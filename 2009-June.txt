From grumbel at mail.berlios.de  Sun Jun 14 02:10:55 2009
From: grumbel at mail.berlios.de (grumbel at BerliOS)
Date: Sun, 14 Jun 2009 02:10:55 +0200
Subject: [Windstille-commit] r2956 - trunk/windstille
Message-ID: <200906140010.n5E0At7S015302@sheep.berlios.de>

Author: grumbel
Date: 2009-06-14 02:10:55 +0200 (Sun, 14 Jun 2009)
New Revision: 2956

Modified:
   trunk/windstille/INSTALL
Log:
Updated apt-get package list

Modified: trunk/windstille/INSTALL
===================================================================
--- trunk/windstille/INSTALL	2009-05-10 05:09:27 UTC (rev 2955)
+++ trunk/windstille/INSTALL	2009-06-14 00:10:55 UTC (rev 2956)
@@ -34,7 +34,13 @@
      libpng12-dev \
      libopenal-dev \
      libgtkmm-2.4-dev \
-     libgtkglextmm-x11-1.2-dev
+     libgtkglextmm-x11-1.2-dev \
+     libmagick++-dev \
+     libcurl4-gnutls-dev \
+     xcftools \
+     libglew1.5-dev \
+     libogg-dev \
+     libvorbis-dev
 
 For compilation type:
 



From grumbel at mail.berlios.de  Sun Jun 14 02:12:40 2009
From: grumbel at mail.berlios.de (grumbel at BerliOS)
Date: Sun, 14 Jun 2009 02:12:40 +0200
Subject: [Windstille-commit] r2957 - trunk/windstille/data/images/decal
Message-ID: <200906140012.n5E0Celx015706@sheep.berlios.de>

Author: grumbel
Date: 2009-06-14 02:12:14 +0200 (Sun, 14 Jun 2009)
New Revision: 2957

Added:
   trunk/windstille/data/images/decal/house1.png
   trunk/windstille/data/images/decal/house2.png
   trunk/windstille/data/images/decal/house3.png
   trunk/windstille/data/images/decal/house4.png
   trunk/windstille/data/images/decal/house5.png
   trunk/windstille/data/images/decal/house6.png
Modified:
   trunk/windstille/data/images/decal/bath_tile.png
   trunk/windstille/data/images/decal/tunnelplate.png
   trunk/windstille/data/images/decal/unit1.png
   trunk/windstille/data/images/decal/ventilation.png
   trunk/windstille/data/images/decal/wall1.png
   trunk/windstille/data/images/decal/wall2.png
Log:
More graphics

Modified: trunk/windstille/data/images/decal/bath_tile.png
===================================================================
(Binary files differ)

Added: trunk/windstille/data/images/decal/house1.png
===================================================================
(Binary files differ)


Property changes on: trunk/windstille/data/images/decal/house1.png
___________________________________________________________________
Name: svn:mime-type
   + image/png

Added: trunk/windstille/data/images/decal/house2.png
===================================================================
(Binary files differ)


Property changes on: trunk/windstille/data/images/decal/house2.png
___________________________________________________________________
Name: svn:mime-type
   + image/png

Added: trunk/windstille/data/images/decal/house3.png
===================================================================
(Binary files differ)


Property changes on: trunk/windstille/data/images/decal/house3.png
___________________________________________________________________
Name: svn:mime-type
   + image/png

Added: trunk/windstille/data/images/decal/house4.png
===================================================================
(Binary files differ)


Property changes on: trunk/windstille/data/images/decal/house4.png
___________________________________________________________________
Name: svn:mime-type
   + image/png

Added: trunk/windstille/data/images/decal/house5.png
===================================================================
(Binary files differ)


Property changes on: trunk/windstille/data/images/decal/house5.png
___________________________________________________________________
Name: svn:mime-type
   + image/png

Added: trunk/windstille/data/images/decal/house6.png
===================================================================
(Binary files differ)


Property changes on: trunk/windstille/data/images/decal/house6.png
___________________________________________________________________
Name: svn:mime-type
   + image/png

Modified: trunk/windstille/data/images/decal/tunnelplate.png
===================================================================
(Binary files differ)

Modified: trunk/windstille/data/images/decal/unit1.png
===================================================================
(Binary files differ)

Modified: trunk/windstille/data/images/decal/ventilation.png
===================================================================
(Binary files differ)

Modified: trunk/windstille/data/images/decal/wall1.png
===================================================================
(Binary files differ)

Modified: trunk/windstille/data/images/decal/wall2.png
===================================================================
(Binary files differ)



From grumbel at mail.berlios.de  Sun Jun 14 02:13:27 2009
From: grumbel at mail.berlios.de (grumbel at BerliOS)
Date: Sun, 14 Jun 2009 02:13:27 +0200
Subject: [Windstille-commit] r2958 - trunk/windstille/src/display
Message-ID: <200906140013.n5E0DRj9015946@sheep.berlios.de>

Author: grumbel
Date: 2009-06-14 02:13:27 +0200 (Sun, 14 Jun 2009)
New Revision: 2958

Modified:
   trunk/windstille/src/display/opengl_state.cpp
Log:
Minor cleanup and a comment on G450

Modified: trunk/windstille/src/display/opengl_state.cpp
===================================================================
--- trunk/windstille/src/display/opengl_state.cpp	2009-06-14 00:12:14 UTC (rev 2957)
+++ trunk/windstille/src/display/opengl_state.cpp	2009-06-14 00:13:27 UTC (rev 2958)
@@ -226,7 +226,7 @@
   // do nothing for now, should be implemented later on
   impl->was_activated = true;
 
-  OpenGLState* global = OpenGLState::global();;
+  OpenGLState* global = OpenGLState::global();
   assert(global);
 
   // always apply color since it might have got changed between a glBegin/glEnd
@@ -273,6 +273,8 @@
     {
       if (impl->texture[i] != global->impl->texture[i])
         { 
+          // FIXME: glActiveTexture() makes the game crash on Matrox
+          // G450, without that line it works
           glActiveTexture(GL_TEXTURE0 + i);
           if (impl->texture[i])
             {



From grumbel at mail.berlios.de  Tue Jun 16 18:03:30 2009
From: grumbel at mail.berlios.de (grumbel at BerliOS)
Date: Tue, 16 Jun 2009 18:03:30 +0200
Subject: [Windstille-commit] r2959 - in trunk/windstille/src: app display
	engine scripting sound util
Message-ID: <200906161603.n5GG3UwA015201@sheep.berlios.de>

Author: grumbel
Date: 2009-06-16 18:03:29 +0200 (Tue, 16 Jun 2009)
New Revision: 2959

Modified:
   trunk/windstille/src/app/config.cpp
   trunk/windstille/src/display/shader_object.cpp
   trunk/windstille/src/display/shader_program.cpp
   trunk/windstille/src/engine/physics.cpp
   trunk/windstille/src/scripting/util.cpp
   trunk/windstille/src/sound/wav_sound_file.cpp
   trunk/windstille/src/util/sexpr_file_reader.cpp
Log:
Added some missing headers for gcc4.4

Modified: trunk/windstille/src/app/config.cpp
===================================================================
--- trunk/windstille/src/app/config.cpp	2009-06-14 00:13:27 UTC (rev 2958)
+++ trunk/windstille/src/app/config.cpp	2009-06-16 16:03:29 UTC (rev 2959)
@@ -18,6 +18,7 @@
 
 #include "windstille.hpp"
 
+#include <stdio.h>
 #include <boost/format.hpp>
 #include <memory>
 #include <iostream>

Modified: trunk/windstille/src/display/shader_object.cpp
===================================================================
--- trunk/windstille/src/display/shader_object.cpp	2009-06-14 00:13:27 UTC (rev 2958)
+++ trunk/windstille/src/display/shader_object.cpp	2009-06-16 16:03:29 UTC (rev 2959)
@@ -16,10 +16,12 @@
 **  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
-#include "shader_object.hpp"
 #include <iostream>
 #include <stdio.h>
+#include <stdlib.h>
+
 #include "util/util.hpp"
+#include "shader_object.hpp"
 
 /** Read a file, user must free() the returned pointer */
 static GLchar* load_file(const char* filename)

Modified: trunk/windstille/src/display/shader_program.cpp
===================================================================
--- trunk/windstille/src/display/shader_program.cpp	2009-06-14 00:13:27 UTC (rev 2958)
+++ trunk/windstille/src/display/shader_program.cpp	2009-06-16 16:03:29 UTC (rev 2959)
@@ -16,10 +16,12 @@
 **  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
-#include "shader_program.hpp"
 #include <iostream>
+#include <stdio.h>
+
 #include "shader_object.hpp"
 #include "util/util.hpp"
+#include "shader_program.hpp"
 
 class ShaderProgramImpl
 {

Modified: trunk/windstille/src/engine/physics.cpp
===================================================================
--- trunk/windstille/src/engine/physics.cpp	2009-06-14 00:13:27 UTC (rev 2958)
+++ trunk/windstille/src/engine/physics.cpp	2009-06-16 16:03:29 UTC (rev 2959)
@@ -17,6 +17,8 @@
 */
 
 #include <boost/bind.hpp>
+#include <iostream>
+
 #include "physics.hpp"
 
 Physics::Physics(Entity* entity)
@@ -59,7 +61,7 @@
 void
 Physics::elastic_collision(const CollisionData& data, const Physics& other)
 {
-  printf("elastic collision.\n");
+  std::cout << "elastic collision." << std::endl;
   // we could calculate this cheaper if we'd do it once for both objects and not
   // each object on it's own...
 
@@ -81,7 +83,7 @@
 void
 Physics::bounce_collision(const CollisionData& data)
 {
-  printf("bounce collision.\n");
+  std::cout << "bounce collision." << std::endl;
   Vector2f collision_vel = data.direction * (velocity() * data.direction);
 
   velocity() -= collision_vel * (1.0 + bounciness);

Modified: trunk/windstille/src/scripting/util.cpp
===================================================================
--- trunk/windstille/src/scripting/util.cpp	2009-06-14 00:13:27 UTC (rev 2958)
+++ trunk/windstille/src/scripting/util.cpp	2009-06-16 16:03:29 UTC (rev 2959)
@@ -20,6 +20,8 @@
 #include <iostream>
 #include <sstream>
 #include <memory>
+#include <stdio.h>
+#include <iostream>
 
 #include <assert.h>
 #include "lisp/lisp.hpp"

Modified: trunk/windstille/src/sound/wav_sound_file.cpp
===================================================================
--- trunk/windstille/src/sound/wav_sound_file.cpp	2009-06-14 00:13:27 UTC (rev 2958)
+++ trunk/windstille/src/sound/wav_sound_file.cpp	2009-06-16 16:03:29 UTC (rev 2959)
@@ -17,7 +17,9 @@
 */
 
 #include <string.h>
+#include <stdint.h>
 #include <stdexcept>
+
 #include "wav_sound_file.hpp"
 
 static inline uint32_t read32LE(PHYSFS_file* file)

Modified: trunk/windstille/src/util/sexpr_file_reader.cpp
===================================================================
--- trunk/windstille/src/util/sexpr_file_reader.cpp	2009-06-14 00:13:27 UTC (rev 2958)
+++ trunk/windstille/src/util/sexpr_file_reader.cpp	2009-06-16 16:03:29 UTC (rev 2959)
@@ -18,6 +18,8 @@
 
 #include <assert.h>
 #include <string.h>
+#include <stdint.h>
+
 #include "lisp/parser.hpp"
 #include "lisp/getters.hpp"
 #include "display/color.hpp"



From grumbel at mail.berlios.de  Wed Jun 17 18:53:37 2009
From: grumbel at mail.berlios.de (grumbel at BerliOS)
Date: Wed, 17 Jun 2009 18:53:37 +0200
Subject: [Windstille-commit] r2960 - in trunk/windstille/src: display math
Message-ID: <200906171653.n5HGrbf9018392@sheep.berlios.de>

Author: grumbel
Date: 2009-06-17 18:53:34 +0200 (Wed, 17 Jun 2009)
New Revision: 2960

Modified:
   trunk/windstille/src/display/display.cpp
   trunk/windstille/src/math/math.hpp
   trunk/windstille/src/math/point.hpp
Log:
Replaced M_PI with math::pi

Modified: trunk/windstille/src/display/display.cpp
===================================================================
--- trunk/windstille/src/display/display.cpp	2009-06-16 16:03:29 UTC (rev 2959)
+++ trunk/windstille/src/display/display.cpp	2009-06-17 16:53:34 UTC (rev 2960)
@@ -167,16 +167,16 @@
   glBegin(GL_QUAD_STRIP);
   for(int i = 0; i <= n; ++i)
     {
-      float x = sinf(i * (M_PI/2) / n) * radius;
-      float y = cosf(i * (M_PI/2) / n) * radius;
+      float x = sinf(i * (math::pi/2) / n) * radius;
+      float y = cosf(i * (math::pi/2) / n) * radius;
 
       glVertex2f(irect.left  - x, irect.top - y);
       glVertex2f(irect.right + x, irect.top - y);
     }
   for(int i = 0; i <= n; ++i)
     {
-      float x = cosf(i * (M_PI/2) / n) * radius;
-      float y = sinf(i * (M_PI/2) / n) * radius;
+      float x = cosf(i * (math::pi/2) / n) * radius;
+      float y = sinf(i * (math::pi/2) / n) * radius;
 
       glVertex2f(irect.left  - x, irect.bottom + y);
       glVertex2f(irect.right + x, irect.bottom + y);
@@ -209,31 +209,31 @@
   glBegin(GL_LINE_STRIP);
   for(int i = 0; i <= n; ++i)
     {
-      float x = sinf(i * (M_PI/2) / n) * radius;
-      float y = cosf(i * (M_PI/2) / n) * radius;
+      float x = sinf(i * (math::pi/2) / n) * radius;
+      float y = cosf(i * (math::pi/2) / n) * radius;
 
       glVertex2f(irect.left  - x, irect.top - y);
     }
   for(int i = 0; i <= n; ++i)
     {
-      float x = cosf(i * (M_PI/2) / n) * radius;
-      float y = sinf(i * (M_PI/2) / n) * radius;
+      float x = cosf(i * (math::pi/2) / n) * radius;
+      float y = sinf(i * (math::pi/2) / n) * radius;
 
       glVertex2f(irect.left  - x, irect.bottom + y);
     }
 
   for(int i = 0; i <= n; ++i)
     {
-      float x = sinf(i * (M_PI/2) / n) * radius;
-      float y = cosf(i * (M_PI/2) / n) * radius;
+      float x = sinf(i * (math::pi/2) / n) * radius;
+      float y = cosf(i * (math::pi/2) / n) * radius;
 
       glVertex2f(irect.right + x, irect.bottom + y);
     }
 
   for(int i = 0; i <= n; ++i)
     {
-      float x = cosf(i * (M_PI/2) / n) * radius;
-      float y = sinf(i * (M_PI/2) / n) * radius;
+      float x = cosf(i * (math::pi/2) / n) * radius;
+      float y = sinf(i * (math::pi/2) / n) * radius;
         
       glVertex2f(irect.right + x, irect.top - y);
     }
@@ -273,8 +273,8 @@
   glVertex2f(radius + pos.x, pos.y);
   for(int i = 1; i < segments; ++i)
     {
-      float x = cosf(i * (M_PI/2) / n) * radius;
-      float y = sinf(i * (M_PI/2) / n) * radius;
+      float x = cosf(i * (math::pi/2) / n) * radius;
+      float y = sinf(i * (math::pi/2) / n) * radius;
       
       glVertex2f(x + pos.x, y + pos.y);
     }
@@ -300,8 +300,8 @@
   glVertex2f(radius + pos.x, pos.y);
   for(int i = 1; i < segments; ++i)
     {
-      float x = cosf(i * (M_PI/2) / n) * radius;
-      float y = sinf(i * (M_PI/2) / n) * radius;
+      float x = cosf(i * (math::pi/2) / n) * radius;
+      float y = sinf(i * (math::pi/2) / n) * radius;
       
       glVertex2f(x + pos.x, y + pos.y);
     }
@@ -320,7 +320,7 @@
     }
   else
     {
-      float step  = (2.0f * M_PI) / segments;
+      float step  = (2.0f * math::pi) / segments;
 
       if (start > end) 
         std::swap(start, end);
@@ -360,7 +360,7 @@
     }
   else
     {
-      float step  = (2.0f * M_PI) / segments;
+      float step  = (2.0f * math::pi) / segments;
 
       if (start > end) 
         std::swap(start, end);

Modified: trunk/windstille/src/math/math.hpp
===================================================================
--- trunk/windstille/src/math/math.hpp	2009-06-16 16:03:29 UTC (rev 2959)
+++ trunk/windstille/src/math/math.hpp	2009-06-17 16:53:34 UTC (rev 2960)
@@ -25,6 +25,8 @@
 
 namespace math {
 
+const float pi = 3.14159265358979323846f;
+
 template<class T> 
 T min (const T& a, const T& b) 
 {
@@ -51,17 +53,17 @@
 
 inline float normalize_angle(float radians)
 {
-  radians = fmodf(radians, static_cast<float>(2.0 * M_PI));
-  if (radians < 0.0)
-    radians += 2.0 * M_PI;
+  radians = fmodf(radians, 2.0f * math::pi);
+  if (radians < 0.0f)
+    radians += 2.0f * math::pi;
   // Floating point math is so loathsome.  In sp98test, the assertion
   // was barfing at P = 180 because a very small negative number plus
   // 2 PI was equalling 2 PI.  Gakk!
-  if (radians == 2.0 * M_PI)
-    radians = 0.0;
+  if (radians == 2.0f * math::pi)
+    radians = 0.0f;
   
   // FIXME: This gets triggered from time to time!
-  //  assert (radians >= 0.0 && radians < 2.0 * M_PI);
+  //  assert (radians >= 0.0 && radians < 2.0 * math::pi);
   return radians;
 }
 
@@ -86,12 +88,12 @@
 
 inline float deg2rad(float degree)
 {
-  return degree / 180.0f * M_PI;
+  return degree / 180.0f * math::pi;
 }
 
 inline float rad2deg(float radians)
 {
-  return radians / M_PI * 180.0f;
+  return radians / math::pi * 180.0f;
 }
 
 } // namespace math

Modified: trunk/windstille/src/math/point.hpp
===================================================================
--- trunk/windstille/src/math/point.hpp	2009-06-16 16:03:29 UTC (rev 2959)
+++ trunk/windstille/src/math/point.hpp	2009-06-17 16:53:34 UTC (rev 2960)
@@ -81,7 +81,7 @@
 		// Because MSVC sucks ass wrt standards compliance, it gets it own special function calls
 		#ifdef _MSC_VER
 		const float c = (float) sqrt((float)r.x*(float)r.x + (float)r.y*(float)r.y);
-		const float nw = (float)(atan2((float)r.y, (float)r.x) + ((angle + 180) * M_PI / 180));
+		const float nw = (float)(atan2((float)r.y, (float)r.x) + ((angle + 180) * math::pi / 180));
 		r.x = (int)((sin(1.5 * M_PI - nw) * c) + 0.5) + hotspot.x;
 		r.y = -(int)((sin(nw) * c) + 0.5) + hotspot.y;
 		#else



From grumbel at mail.berlios.de  Wed Jun 17 19:00:29 2009
From: grumbel at mail.berlios.de (grumbel at BerliOS)
Date: Wed, 17 Jun 2009 19:00:29 +0200
Subject: [Windstille-commit] r2961 - in trunk/windstille: . win32
Message-ID: <200906171700.n5HH0TZi024983@sheep.berlios.de>

Author: grumbel
Date: 2009-06-17 19:00:21 +0200 (Wed, 17 Jun 2009)
New Revision: 2961

Added:
   trunk/windstille/win32/
   trunk/windstille/win32/Display.vcproj
   trunk/windstille/win32/Math.vcproj
   trunk/windstille/win32/PhysFSWrapper.vcproj
   trunk/windstille/win32/Util.vcproj
   trunk/windstille/win32/Windstille.sln
   trunk/windstille/win32/Windstille.vcproj
Log:
Win32 project files from Kenneth Gangstoe <sphair at gmail.com>

Added: trunk/windstille/win32/Display.vcproj
===================================================================
--- trunk/windstille/win32/Display.vcproj	2009-06-17 16:53:34 UTC (rev 2960)
+++ trunk/windstille/win32/Display.vcproj	2009-06-17 17:00:21 UTC (rev 2961)
@@ -0,0 +1,423 @@
+<?xml version="1.0" encoding="Windows-1252"?>
+<VisualStudioProject
+	ProjectType="Visual C++"
+	Version="9,00"
+	Name="Display"
+	ProjectGUID="{C0EE2BEA-8E37-4802-AB33-05FCFF021ACD}"
+	RootNamespace="Display"
+	TargetFrameworkVersion="196613"
+	>
+	<Platforms>
+		<Platform
+			Name="Win32"
+		/>
+	</Platforms>
+	<ToolFiles>
+	</ToolFiles>
+	<Configurations>
+		<Configuration
+			Name="Debug|Win32"
+			OutputDirectory="$(SolutionDir)$(ConfigurationName)"
+			IntermediateDirectory="$(ConfigurationName)"
+			ConfigurationType="4"
+			CharacterSet="0"
+			>
+			<Tool
+				Name="VCPreBuildEventTool"
+			/>
+			<Tool
+				Name="VCCustomBuildTool"
+			/>
+			<Tool
+				Name="VCXMLDataGeneratorTool"
+			/>
+			<Tool
+				Name="VCWebServiceProxyGeneratorTool"
+			/>
+			<Tool
+				Name="VCMIDLTool"
+			/>
+			<Tool
+				Name="VCCLCompilerTool"
+				Optimization="0"
+				AdditionalIncludeDirectories="$(ProjectDir)\..\..\src;$(ProjectDir)\..\.."
+				PreprocessorDefinitions="WIN32;_DEBUG;_WINDOWS"
+				MinimalRebuild="true"
+				BasicRuntimeChecks="3"
+				RuntimeLibrary="1"
+				ObjectFile="$(IntDir)\Display\"
+				ProgramDataBaseFileName="$(IntDir)\Display\display.pdb"
+				XMLDocumentationFileName="$(IntDir)\Display\"
+				WarningLevel="3"
+				DebugInformationFormat="4"
+			/>
+			<Tool
+				Name="VCManagedResourceCompilerTool"
+			/>
+			<Tool
+				Name="VCResourceCompilerTool"
+			/>
+			<Tool
+				Name="VCPreLinkEventTool"
+			/>
+			<Tool
+				Name="VCLibrarianTool"
+			/>
+			<Tool
+				Name="VCALinkTool"
+			/>
+			<Tool
+				Name="VCXDCMakeTool"
+			/>
+			<Tool
+				Name="VCBscMakeTool"
+			/>
+			<Tool
+				Name="VCFxCopTool"
+			/>
+			<Tool
+				Name="VCPostBuildEventTool"
+			/>
+		</Configuration>
+		<Configuration
+			Name="Release|Win32"
+			OutputDirectory="$(SolutionDir)$(ConfigurationName)"
+			IntermediateDirectory="$(ConfigurationName)"
+			ConfigurationType="4"
+			CharacterSet="2"
+			WholeProgramOptimization="1"
+			>
+			<Tool
+				Name="VCPreBuildEventTool"
+			/>
+			<Tool
+				Name="VCCustomBuildTool"
+			/>
+			<Tool
+				Name="VCXMLDataGeneratorTool"
+			/>
+			<Tool
+				Name="VCWebServiceProxyGeneratorTool"
+			/>
+			<Tool
+				Name="VCMIDLTool"
+			/>
+			<Tool
+				Name="VCCLCompilerTool"
+				Optimization="2"
+				EnableIntrinsicFunctions="true"
+				AdditionalIncludeDirectories="$(ProjectDir)\..\..\src;$(ProjectDir)\..\.."
+				PreprocessorDefinitions="WIN32;NDEBUG;_WINDOWS"
+				RuntimeLibrary="0"
+				EnableFunctionLevelLinking="true"
+				WarningLevel="3"
+				DebugInformationFormat="3"
+			/>
+			<Tool
+				Name="VCManagedResourceCompilerTool"
+			/>
+			<Tool
+				Name="VCResourceCompilerTool"
+			/>
+			<Tool
+				Name="VCPreLinkEventTool"
+			/>
+			<Tool
+				Name="VCLibrarianTool"
+			/>
+			<Tool
+				Name="VCALinkTool"
+			/>
+			<Tool
+				Name="VCXDCMakeTool"
+			/>
+			<Tool
+				Name="VCBscMakeTool"
+			/>
+			<Tool
+				Name="VCFxCopTool"
+			/>
+			<Tool
+				Name="VCPostBuildEventTool"
+			/>
+		</Configuration>
+	</Configurations>
+	<References>
+	</References>
+	<Files>
+		<Filter
+			Name="Source Files"
+			Filter="cpp;c;cc;cxx;def;odl;idl;hpj;bat;asm;asmx;h;hpp;hxx;hm;inl;inc;xsd"
+			UniqueIdentifier="{4FC737F1-C7A5-4376-A066-2A32D752A2FF}"
+			>
+			<Filter
+				Name="Font"
+				>
+				<File
+					RelativePath="..\..\src\font\border_font_effect.cpp"
+					>
+				</File>
+				<File
+					RelativePath="..\..\src\font\border_font_effect.hpp"
+					>
+				</File>
+				<File
+					RelativePath="..\..\src\font\font_effect.hpp"
+					>
+				</File>
+				<File
+					RelativePath="..\..\src\font\fonts.cpp"
+					>
+				</File>
+				<File
+					RelativePath="..\..\src\font\fonts.hpp"
+					>
+				</File>
+				<File
+					RelativePath="..\..\src\font\no_font_effect.cpp"
+					>
+				</File>
+				<File
+					RelativePath="..\..\src\font\no_font_effect.hpp"
+					>
+				</File>
+				<File
+					RelativePath="..\..\src\font\ttf_font.cpp"
+					>
+				</File>
+				<File
+					RelativePath="..\..\src\font\ttf_font.hpp"
+					>
+				</File>
+			</Filter>
+			<Filter
+				Name="Display"
+				>
+				<File
+					RelativePath="..\..\src\display\blitter.cpp"
+					>
+				</File>
+				<File
+					RelativePath="..\..\src\display\blitter.hpp"
+					>
+				</File>
+				<File
+					RelativePath="..\..\src\display\color.hpp"
+					>
+				</File>
+				<File
+					RelativePath="..\..\src\display\display.cpp"
+					>
+				</File>
+				<File
+					RelativePath="..\..\src\display\display.hpp"
+					>
+				</File>
+				<File
+					RelativePath="..\..\src\display\drawing_context.cpp"
+					>
+				</File>
+				<File
+					RelativePath="..\..\src\display\drawing_context.hpp"
+					>
+				</File>
+				<File
+					RelativePath="..\..\src\display\drawing_parameters.hpp"
+					>
+				</File>
+				<File
+					RelativePath="..\..\src\display\drawing_request.hpp"
+					>
+				</File>
+				<File
+					RelativePath="..\..\src\display\framebuffer.cpp"
+					>
+				</File>
+				<File
+					RelativePath="..\..\src\display\framebuffer.hpp"
+					>
+				</File>
+				<File
+					RelativePath="..\..\src\display\graphic_context_state.cpp"
+					>
+				</File>
+				<File
+					RelativePath="..\..\src\display\graphic_context_state.hpp"
+					>
+				</File>
+				<File
+					RelativePath="..\..\src\display\opengl_state.cpp"
+					>
+				</File>
+				<File
+					RelativePath="..\..\src\display\opengl_state.hpp"
+					>
+				</File>
+				<File
+					RelativePath="..\..\src\display\render_buffer.cpp"
+					>
+				</File>
+				<File
+					RelativePath="..\..\src\display\render_buffer.hpp"
+					>
+				</File>
+				<File
+					RelativePath="..\..\src\display\scene_context.cpp"
+					>
+				</File>
+				<File
+					RelativePath="..\..\src\display\scene_context.hpp"
+					>
+				</File>
+				<File
+					RelativePath="..\..\src\display\shader_object.cpp"
+					>
+				</File>
+				<File
+					RelativePath="..\..\src\display\shader_object.hpp"
+					>
+				</File>
+				<File
+					RelativePath="..\..\src\display\shader_program.cpp"
+					>
+				</File>
+				<File
+					RelativePath="..\..\src\display\shader_program.hpp"
+					>
+				</File>
+				<File
+					RelativePath="..\..\src\display\software_surface.cpp"
+					>
+				</File>
+				<File
+					RelativePath="..\..\src\display\software_surface.hpp"
+					>
+				</File>
+				<File
+					RelativePath="..\..\src\display\surface.cpp"
+					>
+				</File>
+				<File
+					RelativePath="..\..\src\display\surface.hpp"
+					>
+				</File>
+				<File
+					RelativePath="..\..\src\display\surface_drawing_parameters.hpp"
+					>
+				</File>
+				<File
+					RelativePath="..\..\src\display\surface_manager.cpp"
+					>
+				</File>
+				<File
+					RelativePath="..\..\src\display\surface_manager.hpp"
+					>
+				</File>
+				<File
+					RelativePath="..\..\src\display\text_area.cpp"
+					>
+				</File>
+				<File
+					RelativePath="..\..\src\display\text_area.hpp"
+					>
+				</File>
+				<File
+					RelativePath="..\..\src\display\texture.cpp"
+					>
+				</File>
+				<File
+					RelativePath="..\..\src\display\texture.hpp"
+					>
+				</File>
+				<File
+					RelativePath="..\..\src\display\texture_manager.cpp"
+					>
+				</File>
+				<File
+					RelativePath="..\..\src\display\texture_manager.hpp"
+					>
+				</File>
+				<File
+					RelativePath="..\..\src\display\texture_packer.cpp"
+					>
+				</File>
+				<File
+					RelativePath="..\..\src\display\texture_packer.hpp"
+					>
+				</File>
+				<File
+					RelativePath="..\..\src\display\vertex_array_drawing_request.cpp"
+					>
+				</File>
+				<File
+					RelativePath="..\..\src\display\vertex_array_drawing_request.hpp"
+					>
+				</File>
+			</Filter>
+			<Filter
+				Name="Sprite2D"
+				>
+				<File
+					RelativePath="..\..\src\sprite2d\data.cpp"
+					>
+				</File>
+				<File
+					RelativePath="..\..\src\sprite2d\data.hpp"
+					>
+				</File>
+				<File
+					RelativePath="..\..\src\sprite2d\manager.cpp"
+					>
+				</File>
+				<File
+					RelativePath="..\..\src\sprite2d\manager.hpp"
+					>
+				</File>
+				<File
+					RelativePath="..\..\src\sprite2d\sprite.cpp"
+					>
+				</File>
+				<File
+					RelativePath="..\..\src\sprite2d\sprite.hpp"
+					>
+				</File>
+			</Filter>
+			<Filter
+				Name="Sprite3D"
+				>
+				<File
+					RelativePath="..\..\src\sprite3d\data.cpp"
+					>
+				</File>
+				<File
+					RelativePath="..\..\src\sprite3d\data.hpp"
+					>
+				</File>
+				<File
+					RelativePath="..\..\src\sprite3d\manager.cpp"
+					>
+				</File>
+				<File
+					RelativePath="..\..\src\sprite3d\manager.hpp"
+					>
+				</File>
+				<File
+					RelativePath="..\..\src\sprite3d\sprite3d.cpp"
+					>
+				</File>
+				<File
+					RelativePath="..\..\src\sprite3d\sprite3d.hpp"
+					>
+				</File>
+			</Filter>
+		</Filter>
+		<Filter
+			Name="Resource Files"
+			Filter="rc;ico;cur;bmp;dlg;rc2;rct;bin;rgs;gif;jpg;jpeg;jpe;resx;tiff;tif;png;wav"
+			UniqueIdentifier="{67DA6AB6-F800-4c08-8B7A-83BB121AAD01}"
+			>
+		</Filter>
+	</Files>
+	<Globals>
+	</Globals>
+</VisualStudioProject>

Added: trunk/windstille/win32/Math.vcproj
===================================================================
--- trunk/windstille/win32/Math.vcproj	2009-06-17 16:53:34 UTC (rev 2960)
+++ trunk/windstille/win32/Math.vcproj	2009-06-17 17:00:21 UTC (rev 2961)
@@ -0,0 +1,239 @@
+<?xml version="1.0" encoding="Windows-1252"?>
+<VisualStudioProject
+	ProjectType="Visual C++"
+	Version="9,00"
+	Name="Math"
+	ProjectGUID="{D83F6203-842E-472B-8676-5BFAEA030083}"
+	RootNamespace="Math"
+	TargetFrameworkVersion="196613"
+	>
+	<Platforms>
+		<Platform
+			Name="Win32"
+		/>
+	</Platforms>
+	<ToolFiles>
+	</ToolFiles>
+	<Configurations>
+		<Configuration
+			Name="Debug|Win32"
+			OutputDirectory="$(SolutionDir)$(ConfigurationName)"
+			IntermediateDirectory="$(ConfigurationName)"
+			ConfigurationType="4"
+			CharacterSet="0"
+			>
+			<Tool
+				Name="VCPreBuildEventTool"
+			/>
+			<Tool
+				Name="VCCustomBuildTool"
+			/>
+			<Tool
+				Name="VCXMLDataGeneratorTool"
+			/>
+			<Tool
+				Name="VCWebServiceProxyGeneratorTool"
+			/>
+			<Tool
+				Name="VCMIDLTool"
+			/>
+			<Tool
+				Name="VCCLCompilerTool"
+				Optimization="0"
+				AdditionalIncludeDirectories="$(ProjectDir)\..\..\src;$(ProjectDir)\..\.."
+				PreprocessorDefinitions="WIN32;_DEBUG;_WINDOWS"
+				MinimalRebuild="true"
+				BasicRuntimeChecks="3"
+				RuntimeLibrary="1"
+				ObjectFile="$(IntDir)\Math\"
+				ProgramDataBaseFileName="$(IntDir)\Math\math.pdb"
+				XMLDocumentationFileName="$(IntDir)\Math\"
+				WarningLevel="3"
+				DebugInformationFormat="4"
+			/>
+			<Tool
+				Name="VCManagedResourceCompilerTool"
+			/>
+			<Tool
+				Name="VCResourceCompilerTool"
+			/>
+			<Tool
+				Name="VCPreLinkEventTool"
+			/>
+			<Tool
+				Name="VCLibrarianTool"
+			/>
+			<Tool
+				Name="VCALinkTool"
+			/>
+			<Tool
+				Name="VCXDCMakeTool"
+			/>
+			<Tool
+				Name="VCBscMakeTool"
+			/>
+			<Tool
+				Name="VCFxCopTool"
+			/>
+			<Tool
+				Name="VCPostBuildEventTool"
+			/>
+		</Configuration>
+		<Configuration
+			Name="Release|Win32"
+			OutputDirectory="$(SolutionDir)$(ConfigurationName)"
+			IntermediateDirectory="$(ConfigurationName)"
+			ConfigurationType="4"
+			CharacterSet="2"
+			WholeProgramOptimization="1"
+			>
+			<Tool
+				Name="VCPreBuildEventTool"
+			/>
+			<Tool
+				Name="VCCustomBuildTool"
+			/>
+			<Tool
+				Name="VCXMLDataGeneratorTool"
+			/>
+			<Tool
+				Name="VCWebServiceProxyGeneratorTool"
+			/>
+			<Tool
+				Name="VCMIDLTool"
+			/>
+			<Tool
+				Name="VCCLCompilerTool"
+				Optimization="2"
+				EnableIntrinsicFunctions="true"
+				AdditionalIncludeDirectories="$(ProjectDir)\..\..\src;$(ProjectDir)\..\.."
+				PreprocessorDefinitions="WIN32;NDEBUG;_WINDOWS"
+				RuntimeLibrary="0"
+				EnableFunctionLevelLinking="true"
+				WarningLevel="3"
+				DebugInformationFormat="3"
+			/>
+			<Tool
+				Name="VCManagedResourceCompilerTool"
+			/>
+			<Tool
+				Name="VCResourceCompilerTool"
+			/>
+			<Tool
+				Name="VCPreLinkEventTool"
+			/>
+			<Tool
+				Name="VCLibrarianTool"
+			/>
+			<Tool
+				Name="VCALinkTool"
+			/>
+			<Tool
+				Name="VCXDCMakeTool"
+			/>
+			<Tool
+				Name="VCBscMakeTool"
+			/>
+			<Tool
+				Name="VCFxCopTool"
+			/>
+			<Tool
+				Name="VCPostBuildEventTool"
+			/>
+		</Configuration>
+	</Configurations>
+	<References>
+	</References>
+	<Files>
+		<Filter
+			Name="Source Files"
+			Filter="cpp;c;cc;cxx;def;odl;idl;hpj;bat;asm;asmx;h;hpp;hxx;hm;inl;inc;xsd"
+			UniqueIdentifier="{4FC737F1-C7A5-4376-A066-2A32D752A2FF}"
+			>
+			<File
+				RelativePath="..\..\src\math\line.cpp"
+				>
+			</File>
+			<File
+				RelativePath="..\..\src\math\line.hpp"
+				>
+			</File>
+			<File
+				RelativePath="..\..\src\math\math.hpp"
+				>
+			</File>
+			<File
+				RelativePath="..\..\src\math\matrix.cpp"
+				>
+			</File>
+			<File
+				RelativePath="..\..\src\math\matrix.hpp"
+				>
+			</File>
+			<File
+				RelativePath="..\..\src\math\origin.cpp"
+				>
+			</File>
+			<File
+				RelativePath="..\..\src\math\origin.hpp"
+				>
+			</File>
+			<File
+				RelativePath="..\..\src\math\point.hpp"
+				>
+			</File>
+			<File
+				RelativePath="..\..\src\math\quad.hpp"
+				>
+			</File>
+			<File
+				RelativePath="..\..\src\math\quaternion.cpp"
+				>
+			</File>
+			<File
+				RelativePath="..\..\src\math\quaternion.hpp"
+				>
+			</File>
+			<File
+				RelativePath="..\..\src\math\random.cpp"
+				>
+			</File>
+			<File
+				RelativePath="..\..\src\math\random.hpp"
+				>
+			</File>
+			<File
+				RelativePath="..\..\src\math\rect.cpp"
+				>
+			</File>
+			<File
+				RelativePath="..\..\src\math\rect.hpp"
+				>
+			</File>
+			<File
+				RelativePath="..\..\src\math\size.hpp"
+				>
+			</File>
+			<File
+				RelativePath="..\..\src\math\vector2f.cpp"
+				>
+			</File>
+			<File
+				RelativePath="..\..\src\math\vector2f.hpp"
+				>
+			</File>
+			<File
+				RelativePath="..\..\src\math\vector3.hpp"
+				>
+			</File>
+		</Filter>
+		<Filter
+			Name="Resource Files"
+			Filter="rc;ico;cur;bmp;dlg;rc2;rct;bin;rgs;gif;jpg;jpeg;jpe;resx;tiff;tif;png;wav"
+			UniqueIdentifier="{67DA6AB6-F800-4c08-8B7A-83BB121AAD01}"
+			>
+		</Filter>
+	</Files>
+	<Globals>
+	</Globals>
+</VisualStudioProject>

Added: trunk/windstille/win32/PhysFSWrapper.vcproj
===================================================================
--- trunk/windstille/win32/PhysFSWrapper.vcproj	2009-06-17 16:53:34 UTC (rev 2960)
+++ trunk/windstille/win32/PhysFSWrapper.vcproj	2009-06-17 17:00:21 UTC (rev 2961)
@@ -0,0 +1,179 @@
+<?xml version="1.0" encoding="Windows-1252"?>
+<VisualStudioProject
+	ProjectType="Visual C++"
+	Version="9,00"
+	Name="PhysFSWrapper"
+	ProjectGUID="{55DC1A23-2A86-42B2-8EB4-32AD469AC2B7}"
+	RootNamespace="PhysFSWrapper"
+	TargetFrameworkVersion="196613"
+	>
+	<Platforms>
+		<Platform
+			Name="Win32"
+		/>
+	</Platforms>
+	<ToolFiles>
+	</ToolFiles>
+	<Configurations>
+		<Configuration
+			Name="Debug|Win32"
+			OutputDirectory="$(SolutionDir)$(ConfigurationName)"
+			IntermediateDirectory="$(ConfigurationName)"
+			ConfigurationType="4"
+			CharacterSet="0"
+			>
+			<Tool
+				Name="VCPreBuildEventTool"
+			/>
+			<Tool
+				Name="VCCustomBuildTool"
+			/>
+			<Tool
+				Name="VCXMLDataGeneratorTool"
+			/>
+			<Tool
+				Name="VCWebServiceProxyGeneratorTool"
+			/>
+			<Tool
+				Name="VCMIDLTool"
+			/>
+			<Tool
+				Name="VCCLCompilerTool"
+				Optimization="0"
+				AdditionalIncludeDirectories="$(ProjectDir)\..\..\src;$(ProjectDir)\..\.."
+				PreprocessorDefinitions="WIN32;_DEBUG;_WINDOWS"
+				MinimalRebuild="true"
+				BasicRuntimeChecks="3"
+				RuntimeLibrary="1"
+				ObjectFile="$(IntDir)\PhysFSWrapper\"
+				ProgramDataBaseFileName="$(IntDir)\PhysFSWrapper\physfswrapper.pdb"
+				XMLDocumentationFileName="$(IntDir)\PhysFSWrapper\"
+				WarningLevel="3"
+				DebugInformationFormat="4"
+			/>
+			<Tool
+				Name="VCManagedResourceCompilerTool"
+			/>
+			<Tool
+				Name="VCResourceCompilerTool"
+			/>
+			<Tool
+				Name="VCPreLinkEventTool"
+			/>
+			<Tool
+				Name="VCLibrarianTool"
+			/>
+			<Tool
+				Name="VCALinkTool"
+			/>
+			<Tool
+				Name="VCXDCMakeTool"
+			/>
+			<Tool
+				Name="VCBscMakeTool"
+			/>
+			<Tool
+				Name="VCFxCopTool"
+			/>
+			<Tool
+				Name="VCPostBuildEventTool"
+			/>
+		</Configuration>
+		<Configuration
+			Name="Release|Win32"
+			OutputDirectory="$(SolutionDir)$(ConfigurationName)"
+			IntermediateDirectory="$(ConfigurationName)"
+			ConfigurationType="4"
+			CharacterSet="2"
+			WholeProgramOptimization="1"
+			>
+			<Tool
+				Name="VCPreBuildEventTool"
+			/>
+			<Tool
+				Name="VCCustomBuildTool"
+			/>
+			<Tool
+				Name="VCXMLDataGeneratorTool"
+			/>
+			<Tool
+				Name="VCWebServiceProxyGeneratorTool"
+			/>
+			<Tool
+				Name="VCMIDLTool"
+			/>
+			<Tool
+				Name="VCCLCompilerTool"
+				Optimization="2"
+				EnableIntrinsicFunctions="true"
+				AdditionalIncludeDirectories="$(ProjectDir)\..\..\src;$(ProjectDir)\..\.."
+				PreprocessorDefinitions="WIN32;NDEBUG;_WINDOWS"
+				RuntimeLibrary="0"
+				EnableFunctionLevelLinking="true"
+				WarningLevel="3"
+				DebugInformationFormat="3"
+			/>
+			<Tool
+				Name="VCManagedResourceCompilerTool"
+			/>
+			<Tool
+				Name="VCResourceCompilerTool"
+			/>
+			<Tool
+				Name="VCPreLinkEventTool"
+			/>
+			<Tool
+				Name="VCLibrarianTool"
+			/>
+			<Tool
+				Name="VCALinkTool"
+			/>
+			<Tool
+				Name="VCXDCMakeTool"
+			/>
+			<Tool
+				Name="VCBscMakeTool"
+			/>
+			<Tool
+				Name="VCFxCopTool"
+			/>
+			<Tool
+				Name="VCPostBuildEventTool"
+			/>
+		</Configuration>
+	</Configurations>
+	<References>
+	</References>
+	<Files>
+		<Filter
+			Name="Source Files"
+			Filter="cpp;c;cc;cxx;def;odl;idl;hpj;bat;asm;asmx;h;hpp;hxx;hm;inl;inc;xsd"
+			UniqueIdentifier="{4FC737F1-C7A5-4376-A066-2A32D752A2FF}"
+			>
+			<File
+				RelativePath="..\..\src\physfs\physfs_sdl.cpp"
+				>
+			</File>
+			<File
+				RelativePath="..\..\src\physfs\physfs_sdl.hpp"
+				>
+			</File>
+			<File
+				RelativePath="..\..\src\physfs\physfs_stream.cpp"
+				>
+			</File>
+			<File
+				RelativePath="..\..\src\physfs\physfs_stream.hpp"
+				>
+			</File>
+		</Filter>
+		<Filter
+			Name="Resource Files"
+			Filter="rc;ico;cur;bmp;dlg;rc2;rct;bin;rgs;gif;jpg;jpeg;jpe;resx;tiff;tif;png;wav"
+			UniqueIdentifier="{67DA6AB6-F800-4c08-8B7A-83BB121AAD01}"
+			>
+		</Filter>
+	</Files>
+	<Globals>
+	</Globals>
+</VisualStudioProject>

Added: trunk/windstille/win32/Util.vcproj
===================================================================
--- trunk/windstille/win32/Util.vcproj	2009-06-17 16:53:34 UTC (rev 2960)
+++ trunk/windstille/win32/Util.vcproj	2009-06-17 17:00:21 UTC (rev 2961)
@@ -0,0 +1,307 @@
+<?xml version="1.0" encoding="Windows-1252"?>
+<VisualStudioProject
+	ProjectType="Visual C++"
+	Version="9,00"
+	Name="Util"
+	ProjectGUID="{9018F093-2463-44A8-B3D2-F5B79D176F6C}"
+	RootNamespace="Util"
+	TargetFrameworkVersion="196613"
+	>
+	<Platforms>
+		<Platform
+			Name="Win32"
+		/>
+	</Platforms>
+	<ToolFiles>
+	</ToolFiles>
+	<Configurations>
+		<Configuration
+			Name="Debug|Win32"
+			OutputDirectory="$(SolutionDir)$(ConfigurationName)"
+			IntermediateDirectory="$(ConfigurationName)"
+			ConfigurationType="4"
+			CharacterSet="0"
+			>
+			<Tool
+				Name="VCPreBuildEventTool"
+			/>
+			<Tool
+				Name="VCCustomBuildTool"
+			/>
+			<Tool
+				Name="VCXMLDataGeneratorTool"
+			/>
+			<Tool
+				Name="VCWebServiceProxyGeneratorTool"
+			/>
+			<Tool
+				Name="VCMIDLTool"
+			/>
+			<Tool
+				Name="VCCLCompilerTool"
+				Optimization="0"
+				AdditionalIncludeDirectories="$(ProjectDir)\..\..\src;$(ProjectDir)\..\.."
+				PreprocessorDefinitions="WIN32;_DEBUG;_WINDOWS"
+				MinimalRebuild="true"
+				BasicRuntimeChecks="3"
+				RuntimeLibrary="1"
+				ObjectFile="$(IntDir)\Util\"
+				ProgramDataBaseFileName="$(IntDir)\Util\util.pdb"
+				XMLDocumentationFileName="$(IntDir)\Util\"
+				WarningLevel="3"
+				DebugInformationFormat="4"
+			/>
+			<Tool
+				Name="VCManagedResourceCompilerTool"
+			/>
+			<Tool
+				Name="VCResourceCompilerTool"
+			/>
+			<Tool
+				Name="VCPreLinkEventTool"
+			/>
+			<Tool
+				Name="VCLibrarianTool"
+			/>
+			<Tool
+				Name="VCALinkTool"
+			/>
+			<Tool
+				Name="VCXDCMakeTool"
+			/>
+			<Tool
+				Name="VCBscMakeTool"
+			/>
+			<Tool
+				Name="VCFxCopTool"
+			/>
+			<Tool
+				Name="VCPostBuildEventTool"
+			/>
+		</Configuration>
+		<Configuration
+			Name="Release|Win32"
+			OutputDirectory="$(SolutionDir)$(ConfigurationName)"
+			IntermediateDirectory="$(ConfigurationName)"
+			ConfigurationType="4"
+			CharacterSet="2"
+			WholeProgramOptimization="1"
+			>
+			<Tool
+				Name="VCPreBuildEventTool"
+			/>
+			<Tool
+				Name="VCCustomBuildTool"
+			/>
+			<Tool
+				Name="VCXMLDataGeneratorTool"
+			/>
+			<Tool
+				Name="VCWebServiceProxyGeneratorTool"
+			/>
+			<Tool
+				Name="VCMIDLTool"
+			/>
+			<Tool
+				Name="VCCLCompilerTool"
+				Optimization="2"
+				EnableIntrinsicFunctions="true"
+				AdditionalIncludeDirectories="$(ProjectDir)\..\..\src;$(ProjectDir)\..\.."
+				PreprocessorDefinitions="WIN32;NDEBUG;_WINDOWS"
+				RuntimeLibrary="0"
+				EnableFunctionLevelLinking="true"
+				WarningLevel="3"
+				DebugInformationFormat="3"
+			/>
+			<Tool
+				Name="VCManagedResourceCompilerTool"
+			/>
+			<Tool
+				Name="VCResourceCompilerTool"
+			/>
+			<Tool
+				Name="VCPreLinkEventTool"
+			/>
+			<Tool
+				Name="VCLibrarianTool"
+			/>
+			<Tool
+				Name="VCALinkTool"
+			/>
+			<Tool
+				Name="VCXDCMakeTool"
+			/>
+			<Tool
+				Name="VCBscMakeTool"
+			/>
+			<Tool
+				Name="VCFxCopTool"
+			/>
+			<Tool
+				Name="VCPostBuildEventTool"
+			/>
+		</Configuration>
+	</Configurations>
+	<References>
+	</References>
+	<Files>
+		<Filter
+			Name="Source Files"
+			Filter="cpp;c;cc;cxx;def;odl;idl;hpj;bat;asm;asmx;h;hpp;hxx;hm;inl;inc;xsd"
+			UniqueIdentifier="{4FC737F1-C7A5-4376-A066-2A32D752A2FF}"
+			>
+			<Filter
+				Name="Util"
+				>
+				<File
+					RelativePath="..\..\src\util\baby_xml.cpp"
+					>
+				</File>
+				<File
+					RelativePath="..\..\src\util\baby_xml.hpp"
+					>
+				</File>
+				<File
+					RelativePath="..\..\src\util\command_line.cpp"
+					>
+				</File>
+				<File
+					RelativePath="..\..\src\util\command_line.hpp"
+					>
+				</File>
+				<File
+					RelativePath="..\..\src\util\command_line_generic.cpp"
+					>
+				</File>
+				<File
+					RelativePath="..\..\src\util\command_line_generic.hpp"
+					>
+				</File>
+				<File
+					RelativePath="..\..\src\util\field.hpp"
+					>
+				</File>
+				<File
+					RelativePath="..\..\src\util\file_reader.cpp"
+					>
+				</File>
+				<File
+					RelativePath="..\..\src\util\file_reader.hpp"
+					>
+				</File>
+				<File
+					RelativePath="..\..\src\util\file_reader_impl.hpp"
+					>
+				</File>
+				<File
+					RelativePath="..\..\src\util\file_writer.cpp"
+					>
+				</File>
+				<File
+					RelativePath="..\..\src\util\file_writer.hpp"
+					>
+				</File>
+				<File
+					RelativePath="..\..\src\util\getter.cpp"
+					>
+				</File>
+				<File
+					RelativePath="..\..\src\util\getter.hpp"
+					>
+				</File>
+				<File
+					RelativePath="..\..\src\util\handle.hpp"
+					>
+				</File>
+				<File
+					RelativePath="..\..\src\util\response_curve.cpp"
+					>
+				</File>
+				<File
+					RelativePath="..\..\src\util\response_curve.hpp"
+					>
+				</File>
+				<File
+					RelativePath="..\..\src\util\sexpr_file_reader.cpp"
+					>
+				</File>
+				<File
+					RelativePath="..\..\src\util\sexpr_file_reader.hpp"
+					>
+				</File>
+				<File
+					RelativePath="..\..\src\util\util.cpp"
+					>
+				</File>
+				<File
+					RelativePath="..\..\src\util\util.hpp"
+					>
+				</File>
+			</Filter>
+			<Filter
+				Name="Lisp"
+				>
+				<File
+					RelativePath="..\..\src\lisp\getters.cpp"
+					>
+				</File>
+				<File
+					RelativePath="..\..\src\lisp\getters.hpp"
+					>
+				</File>
+				<File
+					RelativePath="..\..\src\lisp\lexer.cpp"
+					>
+				</File>
+				<File
+					RelativePath="..\..\src\lisp\lexer.hpp"
+					>
+				</File>
+				<File
+					RelativePath="..\..\src\lisp\lisp.cpp"
+					>
+				</File>
+				<File
+					RelativePath="..\..\src\lisp\lisp.hpp"
+					>
+				</File>
+				<File
+					RelativePath="..\..\src\lisp\parser.cpp"
+					>
+				</File>
+				<File
+					RelativePath="..\..\src\lisp\parser.hpp"
+					>
+				</File>
+				<File
+					RelativePath="..\..\src\lisp\properties.cpp"
+					>
+				</File>
+				<File
+					RelativePath="..\..\src\lisp\properties.hpp"
+					>
+				</File>
+				<File
+					RelativePath="..\..\src\lisp\property_iterator.hpp"
+					>
+				</File>
+				<File
+					RelativePath="..\..\src\lisp\writer.cpp"
+					>
+				</File>
+				<File
+					RelativePath="..\..\src\lisp\writer.hpp"
+					>
+				</File>
+			</Filter>
+		</Filter>
+		<Filter
+			Name="Resource Files"
+			Filter="rc;ico;cur;bmp;dlg;rc2;rct;bin;rgs;gif;jpg;jpeg;jpe;resx;tiff;tif;png;wav"
+			UniqueIdentifier="{67DA6AB6-F800-4c08-8B7A-83BB121AAD01}"
+			>
+		</Filter>
+	</Files>
+	<Globals>
+	</Globals>
+</VisualStudioProject>

Added: trunk/windstille/win32/Windstille.sln
===================================================================
--- trunk/windstille/win32/Windstille.sln	2009-06-17 16:53:34 UTC (rev 2960)
+++ trunk/windstille/win32/Windstille.sln	2009-06-17 17:00:21 UTC (rev 2961)
@@ -0,0 +1,50 @@
+?
+Microsoft Visual Studio Solution File, Format Version 10.00
+# Visual Studio 2008
+Project("{8BC9CEB8-8B4A-11D0-8D11-00A0C91BC942}") = "Windstille", "Windstille.vcproj", "{277486D4-93D4-45AC-80A0-0349ECF6AF64}"
+	ProjectSection(ProjectDependencies) = postProject
+		{D83F6203-842E-472B-8676-5BFAEA030083} = {D83F6203-842E-472B-8676-5BFAEA030083}
+		{55DC1A23-2A86-42B2-8EB4-32AD469AC2B7} = {55DC1A23-2A86-42B2-8EB4-32AD469AC2B7}
+		{9018F093-2463-44A8-B3D2-F5B79D176F6C} = {9018F093-2463-44A8-B3D2-F5B79D176F6C}
+		{C0EE2BEA-8E37-4802-AB33-05FCFF021ACD} = {C0EE2BEA-8E37-4802-AB33-05FCFF021ACD}
+	EndProjectSection
+EndProject
+Project("{8BC9CEB8-8B4A-11D0-8D11-00A0C91BC942}") = "Display", "Display.vcproj", "{C0EE2BEA-8E37-4802-AB33-05FCFF021ACD}"
+EndProject
+Project("{8BC9CEB8-8B4A-11D0-8D11-00A0C91BC942}") = "Math", "Math.vcproj", "{D83F6203-842E-472B-8676-5BFAEA030083}"
+EndProject
+Project("{8BC9CEB8-8B4A-11D0-8D11-00A0C91BC942}") = "PhysFSWrapper", "PhysFSWrapper.vcproj", "{55DC1A23-2A86-42B2-8EB4-32AD469AC2B7}"
+EndProject
+Project("{8BC9CEB8-8B4A-11D0-8D11-00A0C91BC942}") = "Util", "Util.vcproj", "{9018F093-2463-44A8-B3D2-F5B79D176F6C}"
+EndProject
+Global
+	GlobalSection(SolutionConfigurationPlatforms) = preSolution
+		Debug|Win32 = Debug|Win32
+		Release|Win32 = Release|Win32
+	EndGlobalSection
+	GlobalSection(ProjectConfigurationPlatforms) = postSolution
+		{277486D4-93D4-45AC-80A0-0349ECF6AF64}.Debug|Win32.ActiveCfg = Debug|Win32
+		{277486D4-93D4-45AC-80A0-0349ECF6AF64}.Debug|Win32.Build.0 = Debug|Win32
+		{277486D4-93D4-45AC-80A0-0349ECF6AF64}.Release|Win32.ActiveCfg = Release|Win32
+		{277486D4-93D4-45AC-80A0-0349ECF6AF64}.Release|Win32.Build.0 = Release|Win32
+		{C0EE2BEA-8E37-4802-AB33-05FCFF021ACD}.Debug|Win32.ActiveCfg = Debug|Win32
+		{C0EE2BEA-8E37-4802-AB33-05FCFF021ACD}.Debug|Win32.Build.0 = Debug|Win32
+		{C0EE2BEA-8E37-4802-AB33-05FCFF021ACD}.Release|Win32.ActiveCfg = Release|Win32
+		{C0EE2BEA-8E37-4802-AB33-05FCFF021ACD}.Release|Win32.Build.0 = Release|Win32
+		{D83F6203-842E-472B-8676-5BFAEA030083}.Debug|Win32.ActiveCfg = Debug|Win32
+		{D83F6203-842E-472B-8676-5BFAEA030083}.Debug|Win32.Build.0 = Debug|Win32
+		{D83F6203-842E-472B-8676-5BFAEA030083}.Release|Win32.ActiveCfg = Release|Win32
+		{D83F6203-842E-472B-8676-5BFAEA030083}.Release|Win32.Build.0 = Release|Win32
+		{55DC1A23-2A86-42B2-8EB4-32AD469AC2B7}.Debug|Win32.ActiveCfg = Debug|Win32
+		{55DC1A23-2A86-42B2-8EB4-32AD469AC2B7}.Debug|Win32.Build.0 = Debug|Win32
+		{55DC1A23-2A86-42B2-8EB4-32AD469AC2B7}.Release|Win32.ActiveCfg = Release|Win32
+		{55DC1A23-2A86-42B2-8EB4-32AD469AC2B7}.Release|Win32.Build.0 = Release|Win32
+		{9018F093-2463-44A8-B3D2-F5B79D176F6C}.Debug|Win32.ActiveCfg = Debug|Win32
+		{9018F093-2463-44A8-B3D2-F5B79D176F6C}.Debug|Win32.Build.0 = Debug|Win32
+		{9018F093-2463-44A8-B3D2-F5B79D176F6C}.Release|Win32.ActiveCfg = Release|Win32
+		{9018F093-2463-44A8-B3D2-F5B79D176F6C}.Release|Win32.Build.0 = Release|Win32
+	EndGlobalSection
+	GlobalSection(SolutionProperties) = preSolution
+		HideSolutionNode = FALSE
+	EndGlobalSection
+EndGlobal

Added: trunk/windstille/win32/Windstille.vcproj
===================================================================
--- trunk/windstille/win32/Windstille.vcproj	2009-06-17 16:53:34 UTC (rev 2960)
+++ trunk/windstille/win32/Windstille.vcproj	2009-06-17 17:00:21 UTC (rev 2961)
@@ -0,0 +1,1185 @@
+<?xml version="1.0" encoding="Windows-1252"?>
+<VisualStudioProject
+	ProjectType="Visual C++"
+	Version="9,00"
+	Name="Windstille"
+	ProjectGUID="{277486D4-93D4-45AC-80A0-0349ECF6AF64}"
+	RootNamespace="Windstille"
+	Keyword="Win32Proj"
+	TargetFrameworkVersion="196613"
+	>
+	<Platforms>
+		<Platform
+			Name="Win32"
+		/>
+	</Platforms>
+	<ToolFiles>
+	</ToolFiles>
+	<Configurations>
+		<Configuration
+			Name="Debug|Win32"
+			OutputDirectory="$(SolutionDir)$(ConfigurationName)"
+			IntermediateDirectory="$(ConfigurationName)"
+			ConfigurationType="1"
+			CharacterSet="0"
+			>
+			<Tool
+				Name="VCPreBuildEventTool"
+			/>
+			<Tool
+				Name="VCCustomBuildTool"
+			/>
+			<Tool
+				Name="VCXMLDataGeneratorTool"
+			/>
+			<Tool
+				Name="VCWebServiceProxyGeneratorTool"
+			/>
+			<Tool
+				Name="VCMIDLTool"
+			/>
+			<Tool
+				Name="VCCLCompilerTool"
+				Optimization="0"
+				AdditionalIncludeDirectories="$(ProjectDir)\..\..\src;$(ProjectDir)\..\.."
+				PreprocessorDefinitions="WIN32;_DEBUG;_WINDOWS"
+				MinimalRebuild="true"
+				BasicRuntimeChecks="3"
+				RuntimeLibrary="1"
+				UsePrecompiledHeader="0"
+				ObjectFile="$(IntDir)\Windstille\"
+				ProgramDataBaseFileName="$(IntDir)\Windstille\windstille.pdb"
+				XMLDocumentationFileName="$(IntDir)\Windstille\"
+				WarningLevel="3"
+				DebugInformationFormat="4"
+			/>
+			<Tool
+				Name="VCManagedResourceCompilerTool"
+			/>
+			<Tool
+				Name="VCResourceCompilerTool"
+			/>
+			<Tool
+				Name="VCPreLinkEventTool"
+			/>
+			<Tool
+				Name="VCLinkerTool"
+				AdditionalDependencies="SDL.lib glew32.lib physfs.lib OpenAL32.lib OpenGL32.lib libvorbis-static-mt.lib libpng-static-mt.lib freetype-static-mt.lib SDL_image.lib libogg-static-mt.lib zlib-static-mt.lib"
+				LinkIncremental="2"
+				GenerateDebugInformation="true"
+				SubSystem="2"
+				TargetMachine="1"
+			/>
+			<Tool
+				Name="VCALinkTool"
+			/>
+			<Tool
+				Name="VCManifestTool"
+			/>
+			<Tool
+				Name="VCXDCMakeTool"
+			/>
+			<Tool
+				Name="VCBscMakeTool"
+			/>
+			<Tool
+				Name="VCFxCopTool"
+			/>
+			<Tool
+				Name="VCAppVerifierTool"
+			/>
+			<Tool
+				Name="VCPostBuildEventTool"
+			/>
+		</Configuration>
+		<Configuration
+			Name="Release|Win32"
+			OutputDirectory="$(SolutionDir)$(ConfigurationName)"
+			IntermediateDirectory="$(ConfigurationName)"
+			ConfigurationType="1"
+			CharacterSet="1"
+			WholeProgramOptimization="1"
+			>
+			<Tool
+				Name="VCPreBuildEventTool"
+			/>
+			<Tool
+				Name="VCCustomBuildTool"
+			/>
+			<Tool
+				Name="VCXMLDataGeneratorTool"
+			/>
+			<Tool
+				Name="VCWebServiceProxyGeneratorTool"
+			/>
+			<Tool
+				Name="VCMIDLTool"
+			/>
+			<Tool
+				Name="VCCLCompilerTool"
+				Optimization="2"
+				EnableIntrinsicFunctions="true"
+				AdditionalIncludeDirectories="$(ProjectDir)\..\..\src;$(ProjectDir)\..\.."
+				PreprocessorDefinitions="WIN32;NDEBUG;_WINDOWS"
+				RuntimeLibrary="0"
+				EnableFunctionLevelLinking="true"
+				UsePrecompiledHeader="0"
+				WarningLevel="3"
+				DebugInformationFormat="3"
+			/>
+			<Tool
+				Name="VCManagedResourceCompilerTool"
+			/>
+			<Tool
+				Name="VCResourceCompilerTool"
+			/>
+			<Tool
+				Name="VCPreLinkEventTool"
+			/>
+			<Tool
+				Name="VCLinkerTool"
+				LinkIncremental="1"
+				GenerateDebugInformation="true"
+				SubSystem="2"
+				OptimizeReferences="2"
+				EnableCOMDATFolding="2"
+				TargetMachine="1"
+			/>
+			<Tool
+				Name="VCALinkTool"
+			/>
+			<Tool
+				Name="VCManifestTool"
+			/>
+			<Tool
+				Name="VCXDCMakeTool"
+			/>
+			<Tool
+				Name="VCBscMakeTool"
+			/>
+			<Tool
+				Name="VCFxCopTool"
+			/>
+			<Tool
+				Name="VCAppVerifierTool"
+			/>
+			<Tool
+				Name="VCPostBuildEventTool"
+			/>
+		</Configuration>
+	</Configurations>
+	<References>
+	</References>
+	<Files>
+		<Filter
+			Name="Source Files"
+			Filter="cpp;c;cc;cxx;def;odl;idl;hpj;bat;asm;asmx;h;hpp;hxx;hm;inl;inc;xsd"
+			UniqueIdentifier="{4FC737F1-C7A5-4376-A066-2A32D752A2FF}"
+			>
+			<File
+				RelativePath="..\..\src\int_types.hpp"
+				>
+			</File>
+			<Filter
+				Name="App"
+				>
+				<File
+					RelativePath="..\..\src\app\config.cpp"
+					>
+				</File>
+				<File
+					RelativePath="..\..\src\app\config.hpp"
+					>
+				</File>
+				<File
+					RelativePath="..\..\src\app\console.cpp"
+					>
+				</File>
+				<File
+					RelativePath="..\..\src\app\console.hpp"
+					>
+				</File>
+				<File
+					RelativePath="..\..\src\app\controller_def.cpp"
+					>
+				</File>
+				<File
+					RelativePath="..\..\src\app\controller_def.hpp"
+					>
+				</File>
+				<File
+					RelativePath="..\..\src\app\globals.cpp"
+					>
+				</File>
+				<File
+					RelativePath="..\..\src\app\globals.hpp"
+					>
+				</File>
+				<File
+					RelativePath="..\..\src\app\menu_manager.cpp"
+					>
+				</File>
+				<File
+					RelativePath="..\..\src\app\menu_manager.hpp"
+					>
+				</File>
+				<File
+					RelativePath="..\..\src\app\weapon.hpp"
+					>
+				</File>
+				<File
+					RelativePath="..\..\src\app\windstille.hpp"
+					>
+				</File>
+				<File
+					RelativePath="..\..\src\app\windstille_main.cpp"
+					>
+				</File>
+				<File
+					RelativePath="..\..\src\app\windstille_main.hpp"
+					>
+				</File>
+			</Filter>
+			<Filter
+				Name="Armature"
+				>
+				<File
+					RelativePath="..\..\src\armature\action.hpp"
+					>
+				</File>
+				<File
+					RelativePath="..\..\src\armature\armature.cpp"
+					>
+				</File>
+				<File
+					RelativePath="..\..\src\armature\armature.hpp"
+					>
+				</File>
+				<File
+					RelativePath="..\..\src\armature\bone.cpp"
+					>
+				</File>
+				<File
+					RelativePath="..\..\src\armature\bone.hpp"
+					>
+				</File>
+				<File
+					RelativePath="..\..\src\armature\mesh.cpp"
+					>
+				</File>
+				<File
+					RelativePath="..\..\src\armature\mesh.hpp"
+					>
+				</File>
+				<File
+					RelativePath="..\..\src\armature\model.cpp"
+					>
+				</File>
+				<File
+					RelativePath="..\..\src\armature\model.hpp"
+					>
+				</File>
+				<File
+					RelativePath="..\..\src\armature\pose.cpp"
+					>
+				</File>
+				<File
+					RelativePath="..\..\src\armature\pose.hpp"
+					>
+				</File>
+				<File
+					RelativePath="..\..\src\armature\pose_bone.hpp"
+					>
+				</File>
+			</Filter>
+			<Filter
+				Name="Collision"
+				>
+				<File
+					RelativePath="..\..\src\collision\collision_data.cpp"
+					>
+				</File>
+				<File
+					RelativePath="..\..\src\collision\collision_data.hpp"
+					>
+				</File>
+				<File
+					RelativePath="..\..\src\collision\collision_engine.cpp"
+					>
+				</File>
+				<File
+					RelativePath="..\..\src\collision\collision_engine.hpp"
+					>
+				</File>
+				<File
+					RelativePath="..\..\src\collision\collision_object.cpp"
+					>
+				</File>
+				<File
+					RelativePath="..\..\src\collision\collision_object.hpp"
+					>
+				</File>
+				<File
+					RelativePath="..\..\src\collision\collision_test.cpp"
+					>
+				</File>
+				<File
+					RelativePath="..\..\src\collision\collision_test.hpp"
+					>
+				</File>
+				<File
+					RelativePath="..\..\src\collision\contact.hpp"
+					>
+				</File>
+				<File
+					RelativePath="..\..\src\collision\stair_contact.cpp"
+					>
+				</File>
+				<File
+					RelativePath="..\..\src\collision\stair_contact.hpp"
+					>
+				</File>
+			</Filter>
+			<Filter
+				Name="Engine"
+				>
+				<File
+					RelativePath="..\..\src\engine\camera.cpp"
+					>
+				</File>
+				<File
+					RelativePath="..\..\src\engine\camera.hpp"
+					>
+				</File>
+				<File
+					RelativePath="..\..\src\engine\entity.cpp"
+					>
+				</File>
+				<File
+					RelativePath="..\..\src\engine\entity.hpp"
+					>
+				</File>
+				<File
+					RelativePath="..\..\src\engine\game_object.cpp"
+					>
+				</File>
+				<File
+					RelativePath="..\..\src\engine\game_object.hpp"
+					>
+				</File>
+				<File
+					RelativePath="..\..\src\engine\physics.cpp"
+					>
+				</File>
+				<File
+					RelativePath="..\..\src\engine\physics.hpp"
+					>
+				</File>
+				<File
+					RelativePath="..\..\src\engine\script_manager.cpp"
+					>
+				</File>
+				<File
+					RelativePath="..\..\src\engine\script_manager.hpp"
+					>
+				</File>
+				<File
+					RelativePath="..\..\src\engine\sector.cpp"
+					>
+				</File>
+				<File
+					RelativePath="..\..\src\engine\sector.hpp"
+					>
+				</File>
+				<File
+					RelativePath="..\..\src\engine\squirrel_thread.cpp"
+					>
+				</File>
+				<File
+					RelativePath="..\..\src\engine\squirrel_thread.hpp"
+					>
+				</File>
+				<File
+					RelativePath="..\..\src\engine\weapon.hpp"
+					>
+				</File>
+			</Filter>
+			<Filter
+				Name="GUI"
+				>
+				<File
+					RelativePath="..\..\src\gui\automap.cpp"
+					>
+				</File>
+				<File
+					RelativePath="..\..\src\gui\automap.hpp"
+					>
+				</File>
+				<File
+					RelativePath="..\..\src\gui\button.cpp"
+					>
+				</File>
+				<File
+					RelativePath="..\..\src\gui\button.hpp"
+					>
+				</File>
+				<File
+					RelativePath="..\..\src\gui\component.cpp"
+					>
+				</File>
+				<File
+					RelativePath="..\..\src\gui\component.hpp"
+					>
+				</File>
+				<File
+					RelativePath="..\..\src\gui\grid_component.cpp"
+					>
+				</File>
+				<File
+					RelativePath="..\..\src\gui\grid_component.hpp"
+					>
+				</File>
+				<File
+					RelativePath="..\..\src\gui\group_component.cpp"
+					>
+				</File>
+				<File
+					RelativePath="..\..\src\gui\group_component.hpp"
+					>
+				</File>
+				<File
+					RelativePath="..\..\src\gui\gui_manager.cpp"
+					>
+				</File>
+				<File
+					RelativePath="..\..\src\gui\gui_manager.hpp"
+					>
+				</File>
+				<File
+					RelativePath="..\..\src\gui\label.cpp"
+					>
+				</File>
+				<File
+					RelativePath="..\..\src\gui\label.hpp"
+					>
+				</File>
+				<File
+					RelativePath="..\..\src\gui\list_view.cpp"
+					>
+				</File>
+				<File
+					RelativePath="..\..\src\gui\list_view.hpp"
+					>
+				</File>
+				<File
+					RelativePath="..\..\src\gui\menu.cpp"
+					>
+				</File>
+				<File
+					RelativePath="..\..\src\gui\menu.hpp"
+					>
+				</File>
+				<File
+					RelativePath="..\..\src\gui\menu_component.cpp"
+					>
+				</File>
+				<File
+					RelativePath="..\..\src\gui\menu_component.hpp"
+					>
+				</File>
+				<File
+					RelativePath="..\..\src\gui\menu_item.cpp"
+					>
+				</File>
+				<File
+					RelativePath="..\..\src\gui\menu_item.hpp"
+					>
+				</File>
+				<File
+					RelativePath="..\..\src\gui\root_component.cpp"
+					>
+				</File>
+				<File
+					RelativePath="..\..\src\gui\root_component.hpp"
+					>
+				</File>
+				<File
+					RelativePath="..\..\src\gui\slider.cpp"
+					>
+				</File>
+				<File
+					RelativePath="..\..\src\gui\slider.hpp"
+					>
+				</File>
+				<File
+					RelativePath="..\..\src\gui\syntax.txt"
+					>
+				</File>
+				<File
+					RelativePath="..\..\src\gui\tab_component.cpp"
+					>
+				</File>
+				<File
+					RelativePath="..\..\src\gui\tab_component.hpp"
+					>
+				</File>
+				<File
+					RelativePath="..\..\src\gui\text_view.cpp"
+					>
+				</File>
+				<File
+					RelativePath="..\..\src\gui\text_view.hpp"
+					>
+				</File>
+			</Filter>
+			<Filter
+				Name="HUD"
+				>
+				<File
+					RelativePath="..\..\src\hud\controller_help_window.cpp"
+					>
+				</File>
+				<File
+					RelativePath="..\..\src\hud\controller_help_window.hpp"
+					>
+				</File>
+				<File
+					RelativePath="..\..\src\hud\conversation.cpp"
+					>
+				</File>
+				<File
+					RelativePath="..\..\src\hud\conversation.hpp"
+					>
+				</File>
+				<File
+					RelativePath="..\..\src\hud\dialog_manager.cpp"
+					>
+				</File>
+				<File
+					RelativePath="..\..\src\hud\dialog_manager.hpp"
+					>
+				</File>
+				<File
+					RelativePath="..\..\src\hud\inventory.cpp"
+					>
+				</File>
+				<File
+					RelativePath="..\..\src\hud\inventory.hpp"
+					>
+				</File>
+				<File
+					RelativePath="..\..\src\hud\pda.cpp"
+					>
+				</File>
+				<File
+					RelativePath="..\..\src\hud\pda.hpp"
+					>
+				</File>
+				<File
+					RelativePath="..\..\src\hud\speech_manager.cpp"
+					>
+				</File>
+				<File
+					RelativePath="..\..\src\hud\speech_manager.hpp"
+					>
+				</File>
+			</Filter>
+			<Filter
+				Name="Input"
+				>
+				<File
+					RelativePath="..\..\src\input\controller.cpp"
+					>
+				</File>
+				<File
+					RelativePath="..\..\src\input\controller.hpp"
+					>
+				</File>
+				<File
+					RelativePath="..\..\src\input\controller_description.cpp"
+					>
+				</File>
+				<File
+					RelativePath="..\..\src\input\controller_description.hpp"
+					>
+				</File>
+				<File
+					RelativePath="..\..\src\input\input_configurator.cpp"
+					>
+				</File>
+				<File
+					RelativePath="..\..\src\input\input_configurator.hpp"
+					>
+				</File>
+				<File
+					RelativePath="..\..\src\input\input_event.hpp"
+					>
+				</File>
+				<File
+					RelativePath="..\..\src\input\input_manager.cpp"
+					>
+				</File>
+				<File
+					RelativePath="..\..\src\input\input_manager.hpp"
+					>
+				</File>
+				<File
+					RelativePath="..\..\src\input\input_manager_impl.cpp"
+					>
+				</File>
+				<File
+					RelativePath="..\..\src\input\input_manager_impl.hpp"
+					>
+				</File>
+				<File
+					RelativePath="..\..\src\input\input_manager_sdl.cpp"
+					>
+				</File>
+				<File
+					RelativePath="..\..\src\input\input_manager_sdl.hpp"
+					>
+				</File>
+				<File
+					RelativePath="..\..\src\input\wiimote.cpp"
+					>
+					<FileConfiguration
+						Name="Debug|Win32"
+						ExcludedFromBuild="true"
+						>
+						<Tool
+							Name="VCCLCompilerTool"
+						/>
+					</FileConfiguration>
+				</File>
+				<File
+					RelativePath="..\..\src\input\wiimote.hpp"
+					>
+					<FileConfiguration
+						Name="Debug|Win32"
+						ExcludedFromBuild="true"
+						>
+						<Tool
+							Name="VCCustomBuildTool"
+						/>
+					</FileConfiguration>
+				</File>
+			</Filter>
+			<Filter
+				Name="Navigation"
+				>
+				<File
+					RelativePath="..\..\src\navigation\edge.cpp"
+					>
+				</File>
+				<File
+					RelativePath="..\..\src\navigation\edge.hpp"
+					>
+				</File>
+				<File
+					RelativePath="..\..\src\navigation\edge_position.cpp"
+					>
+				</File>
+				<File
+					RelativePath="..\..\src\navigation\edge_position.hpp"
+					>
+				</File>
+				<File
+					RelativePath="..\..\src\navigation\navigation_graph.cpp"
+					>
+				</File>
+				<File
+					RelativePath="..\..\src\navigation\navigation_graph.hpp"
+					>
+				</File>
+				<File
+					RelativePath="..\..\src\navigation\node.cpp"
+					>
+				</File>
+				<File
+					RelativePath="..\..\src\navigation\node.hpp"
+					>
+				</File>
+				<File
+					RelativePath="..\..\src\navigation\properties.cpp"
+					>
+				</File>
+				<File
+					RelativePath="..\..\src\navigation\properties.hpp"
+					>
+				</File>
+			</Filter>
+			<Filter
+				Name="Objects"
+				>
+				<File
+					RelativePath="..\..\src\objects\background_gradient.cpp"
+					>
+				</File>
+				<File
+					RelativePath="..\..\src\objects\background_gradient.hpp"
+					>
+				</File>
+				<File
+					RelativePath="..\..\src\objects\bomb.cpp"
+					>
+				</File>
+				<File
+					RelativePath="..\..\src\objects\bomb.hpp"
+					>
+				</File>
+				<File
+					RelativePath="..\..\src\objects\box.cpp"
+					>
+				</File>
+				<File
+					RelativePath="..\..\src\objects\box.hpp"
+					>
+				</File>
+				<File
+					RelativePath="..\..\src\objects\character.cpp"
+					>
+				</File>
+				<File
+					RelativePath="..\..\src\objects\character.hpp"
+					>
+				</File>
+				<File
+					RelativePath="..\..\src\objects\elevator.cpp"
+					>
+				</File>
+				<File
+					RelativePath="..\..\src\objects\elevator.hpp"
+					>
+				</File>
+				<File
+					RelativePath="..\..\src\objects\grenade.cpp"
+					>
+				</File>
+				<File
+					RelativePath="..\..\src\objects\grenade.hpp"
+					>
+				</File>
+				<File
+					RelativePath="..\..\src\objects\hedgehog.cpp"
+					>
+				</File>
+				<File
+					RelativePath="..\..\src\objects\hedgehog.hpp"
+					>
+				</File>
+				<File
+					RelativePath="..\..\src\objects\laser_pointer.cpp"
+					>
+				</File>
+				<File
+					RelativePath="..\..\src\objects\laser_pointer.hpp"
+					>
+				</File>
+				<File
+					RelativePath="..\..\src\objects\liquid.cpp"
+					>
+				</File>
+				<File
+					RelativePath="..\..\src\objects\liquid.hpp"
+					>
+				</File>
+				<File
+					RelativePath="..\..\src\objects\nightvision.cpp"
+					>
+				</File>
+				<File
+					RelativePath="..\..\src\objects\nightvision.hpp"
+					>
+				</File>
+				<File
+					RelativePath="..\..\src\objects\pistol.cpp"
+					>
+				</File>
+				<File
+					RelativePath="..\..\src\objects\pistol.hpp"
+					>
+				</File>
+				<File
+					RelativePath="..\..\src\objects\player.cpp"
+					>
+				</File>
+				<File
+					RelativePath="..\..\src\objects\player.hpp"
+					>
+				</File>
+				<File
+					RelativePath="..\..\src\objects\scriptable_object.cpp"
+					>
+				</File>
+				<File
+					RelativePath="..\..\src\objects\scriptable_object.hpp"
+					>
+				</File>
+				<File
+					RelativePath="..\..\src\objects\shockwave.cpp"
+					>
+				</File>
+				<File
+					RelativePath="..\..\src\objects\shockwave.hpp"
+					>
+				</File>
+				<File
+					RelativePath="..\..\src\objects\spider_mine.cpp"
+					>
+				</File>
+				<File
+					RelativePath="..\..\src\objects\spider_mine.hpp"
+					>
+				</File>
+				<File
+					RelativePath="..\..\src\objects\swarm.cpp"
+					>
+				</File>
+				<File
+					RelativePath="..\..\src\objects\swarm.hpp"
+					>
+				</File>
+				<File
+					RelativePath="..\..\src\objects\test_object.cpp"
+					>
+				</File>
+				<File
+					RelativePath="..\..\src\objects\test_object.hpp"
+					>
+				</File>
+				<File
+					RelativePath="..\..\src\objects\trigger.cpp"
+					>
+				</File>
+				<File
+					RelativePath="..\..\src\objects\trigger.hpp"
+					>
+				</File>
+				<File
+					RelativePath="..\..\src\objects\vrdummy.cpp"
+					>
+				</File>
+				<File
+					RelativePath="..\..\src\objects\vrdummy.hpp"
+					>
+				</File>
+			</Filter>
+			<Filter
+				Name="Particles"
+				>
+				<File
+					RelativePath="..\..\src\particles\deform_drawer.cpp"
+					>
+				</File>
+				<File
+					RelativePath="..\..\src\particles\deform_drawer.hpp"
+					>
+				</File>
+				<File
+					RelativePath="..\..\src\particles\drawer.hpp"
+					>
+				</File>
+				<File
+					RelativePath="..\..\src\particles\particle_system.cpp"
+					>
+				</File>
+				<File
+					RelativePath="..\..\src\particles\particle_system.hpp"
+					>
+				</File>
+				<File
+					RelativePath="..\..\src\particles\randomizer.hpp"
+					>
+				</File>
+				<File
+					RelativePath="..\..\src\particles\spark_drawer.cpp"
+					>
+				</File>
+				<File
+					RelativePath="..\..\src\particles\spark_drawer.hpp"
+					>
+				</File>
+				<File
+					RelativePath="..\..\src\particles\surface_drawer.cpp"
+					>
+				</File>
+				<File
+					RelativePath="..\..\src\particles\surface_drawer.hpp"
+					>
+				</File>
+			</Filter>
+			<Filter
+				Name="Properties"
+				>
+				<File
+					RelativePath="..\..\src\properties\properties.cpp"
+					>
+				</File>
+				<File
+					RelativePath="..\..\src\properties\properties.hpp"
+					>
+				</File>
+				<File
+					RelativePath="..\..\src\properties\property.cpp"
+					>
+				</File>
+				<File
+					RelativePath="..\..\src\properties\property.hpp"
+					>
+				</File>
+				<File
+					RelativePath="..\..\src\properties\property_set.cpp"
+					>
+				</File>
+				<File
+					RelativePath="..\..\src\properties\property_set.hpp"
+					>
+				</File>
+			</Filter>
+			<Filter
+				Name="Screen"
+				>
+				<File
+					RelativePath="..\..\src\screen\armature_test.cpp"
+					>
+				</File>
+				<File
+					RelativePath="..\..\src\screen\armature_test.hpp"
+					>
+				</File>
+				<File
+					RelativePath="..\..\src\screen\game_session.cpp"
+					>
+				</File>
+				<File
+					RelativePath="..\..\src\screen\game_session.hpp"
+					>
+				</File>
+				<File
+					RelativePath="..\..\src\screen\geometry_test.cpp"
+					>
+				</File>
+				<File
+					RelativePath="..\..\src\screen\geometry_test.hpp"
+					>
+				</File>
+				<File
+					RelativePath="..\..\src\screen\navigation_test.cpp"
+					>
+				</File>
+				<File
+					RelativePath="..\..\src\screen\navigation_test.hpp"
+					>
+				</File>
+				<File
+					RelativePath="..\..\src\screen\particle_viewer.cpp"
+					>
+				</File>
+				<File
+					RelativePath="..\..\src\screen\particle_viewer.hpp"
+					>
+				</File>
+				<File
+					RelativePath="..\..\src\screen\screen.cpp"
+					>
+				</File>
+				<File
+					RelativePath="..\..\src\screen\screen.hpp"
+					>
+				</File>
+				<File
+					RelativePath="..\..\src\screen\screen_manager.cpp"
+					>
+				</File>
+				<File
+					RelativePath="..\..\src\screen\screen_manager.hpp"
+					>
+				</File>
+				<File
+					RelativePath="..\..\src\screen\sprite2dview.cpp"
+					>
+				</File>
+				<File
+					RelativePath="..\..\src\screen\sprite2dview.hpp"
+					>
+				</File>
+				<File
+					RelativePath="..\..\src\screen\sprite3dview.cpp"
+					>
+				</File>
+				<File
+					RelativePath="..\..\src\screen\sprite3dview.hpp"
+					>
+				</File>
+				<File
+					RelativePath="..\..\src\screen\title_screen.cpp"
+					>
+				</File>
+				<File
+					RelativePath="..\..\src\screen\title_screen.hpp"
+					>
+				</File>
+				<File
+					RelativePath="..\..\src\screen\view.cpp"
+					>
+				</File>
+				<File
+					RelativePath="..\..\src\screen\view.hpp"
+					>
+				</File>
+			</Filter>
+			<Filter
+				Name="Scripting"
+				>
+				<File
+					RelativePath="..\..\src\scripting\game_objects.cpp"
+					>
+				</File>
+				<File
+					RelativePath="..\..\src\scripting\game_objects.hpp"
+					>
+				</File>
+				<File
+					RelativePath="..\..\src\scripting\interface.cpp"
+					>
+				</File>
+				<File
+					RelativePath="..\..\src\scripting\interface.hpp"
+					>
+				</File>
+				<File
+					RelativePath="..\..\src\scripting\squirrel_error.cpp"
+					>
+				</File>
+				<File
+					RelativePath="..\..\src\scripting\squirrel_error.hpp"
+					>
+				</File>
+				<File
+					RelativePath="..\..\src\scripting\util.cpp"
+					>
+				</File>
+				<File
+					RelativePath="..\..\src\scripting\util.hpp"
+					>
+				</File>
+				<File
+					RelativePath="..\..\src\scripting\wrapper.cpp"
+					>
+				</File>
+				<File
+					RelativePath="..\..\src\scripting\wrapper.hpp"
+					>
+				</File>
+				<File
+					RelativePath="..\..\src\scripting\wrapper.interface.hpp"
+					>
+				</File>
+			</Filter>
+			<Filter
+				Name="Sound"
+				>
+				<File
+					RelativePath="..\..\src\sound\ogg_sound_file.cpp"
+					>
+				</File>
+				<File
+					RelativePath="..\..\src\sound\ogg_sound_file.hpp"
+					>
+				</File>
+				<File
+					RelativePath="..\..\src\sound\sound_file.cpp"
+					>
+				</File>
+				<File
+					RelativePath="..\..\src\sound\sound_file.hpp"
+					>
+				</File>
+				<File
+					RelativePath="..\..\src\sound\sound_manager.cpp"
+					>
+				</File>
+				<File
+					RelativePath="..\..\src\sound\sound_manager.hpp"
+					>
+				</File>
+				<File
+					RelativePath="..\..\src\sound\sound_source.cpp"
+					>
+				</File>
+				<File
+					RelativePath="..\..\src\sound\sound_source.hpp"
+					>
+				</File>
+				<File
+					RelativePath="..\..\src\sound\stream_sound_source.cpp"
+					>
+				</File>
+				<File
+					RelativePath="..\..\src\sound\stream_sound_source.hpp"
+					>
+				</File>
+				<File
+					RelativePath="..\..\src\sound\wav_sound_file.cpp"
+					>
+				</File>
+				<File
+					RelativePath="..\..\src\sound\wav_sound_file.hpp"
+					>
+				</File>
+			</Filter>
+			<Filter
+				Name="Tile"
+				>
+				<File
+					RelativePath="..\..\src\tile\tile.cpp"
+					>
+				</File>
+				<File
+					RelativePath="..\..\src\tile\tile.hpp"
+					>
+				</File>
+				<File
+					RelativePath="..\..\src\tile\tile_description.cpp"
+					>
+				</File>
+				<File
+					RelativePath="..\..\src\tile\tile_description.hpp"
+					>
+				</File>
+				<File
+					RelativePath="..\..\src\tile\tile_factory.cpp"
+					>
+				</File>
+				<File
+					RelativePath="..\..\src\tile\tile_factory.hpp"
+					>
+				</File>
+				<File
+					RelativePath="..\..\src\tile\tile_map.cpp"
+					>
+				</File>
+				<File
+					RelativePath="..\..\src\tile\tile_map.hpp"
+					>
+				</File>
+				<File
+					RelativePath="..\..\src\tile\tile_packer.cpp"
+					>
+				</File>
+				<File
+					RelativePath="..\..\src\tile\tile_packer.hpp"
+					>
+				</File>
+			</Filter>
+		</Filter>
+		<Filter
+			Name="Resource Files"
+			Filter="rc;ico;cur;bmp;dlg;rc2;rct;bin;rgs;gif;jpg;jpeg;jpe;resx;tiff;tif;png;wav"
+			UniqueIdentifier="{67DA6AB6-F800-4c08-8B7A-83BB121AAD01}"
+			>
+		</Filter>
+	</Files>
+	<Globals>
+	</Globals>
+</VisualStudioProject>



From grumbel at mail.berlios.de  Wed Jun 17 19:22:03 2009
From: grumbel at mail.berlios.de (grumbel at BerliOS)
Date: Wed, 17 Jun 2009 19:22:03 +0200
Subject: [Windstille-commit] r2962 - in trunk/windstille/src: . app engine
	hud math objects screen scripting sprite3d tile util
Message-ID: <200906171722.n5HHM38C014179@sheep.berlios.de>

Author: grumbel
Date: 2009-06-17 19:21:59 +0200 (Wed, 17 Jun 2009)
New Revision: 2962

Modified:
   trunk/windstille/src/SConscript
   trunk/windstille/src/app/console.cpp
   trunk/windstille/src/app/menu_manager.cpp
   trunk/windstille/src/engine/camera.cpp
   trunk/windstille/src/hud/conversation.cpp
   trunk/windstille/src/hud/dialog_manager.cpp
   trunk/windstille/src/math/random.cpp
   trunk/windstille/src/math/random.hpp
   trunk/windstille/src/objects/grenade.cpp
   trunk/windstille/src/objects/laser_pointer.cpp
   trunk/windstille/src/objects/player.cpp
   trunk/windstille/src/objects/scriptable_object.cpp
   trunk/windstille/src/objects/swarm.cpp
   trunk/windstille/src/objects/vrdummy.cpp
   trunk/windstille/src/screen/game_session.cpp
   trunk/windstille/src/screen/sprite3dview.cpp
   trunk/windstille/src/screen/view.cpp
   trunk/windstille/src/scripting/interface.cpp
   trunk/windstille/src/scripting/interface.hpp
   trunk/windstille/src/scripting/wrapper.cpp
   trunk/windstille/src/sprite3d/sprite3d.cpp
   trunk/windstille/src/tile/tile.hpp
   trunk/windstille/src/tile/tile_map.cpp
   trunk/windstille/src/util/sexpr_file_reader.cpp
Log:
Some int/float/double conversion cleanup

Modified: trunk/windstille/src/SConscript
===================================================================
--- trunk/windstille/src/SConscript	2009-06-17 17:00:21 UTC (rev 2961)
+++ trunk/windstille/src/SConscript	2009-06-17 17:21:59 UTC (rev 2962)
@@ -117,7 +117,7 @@
 
 env = conf_env.Clone()
 env.Append(LIBS    = [particles_lib, navgraph_lib, display_lib, physfs_lib, util_lib, math_lib,
-                      'GL', 'GLU', 'GLEW', 'squirrel', 'physfs', 'SDL_image', 'openal', 'ogg', 'vorbis', 'vorbisfile', 'png', 'boost_signals'])
+                      'GL', 'GLU', 'GLEW', 'squirrel', 'physfs', 'SDL_image', 'openal', 'ogg', 'vorbis', 'vorbisfile', 'png', 'boost_signals-mt'])
 env.Append(LIBPATH = ['../external/'] )
 env.Append(CPPPATH = ['.', '..', '../external/SQUIRREL2/include/'])
 

Modified: trunk/windstille/src/app/console.cpp
===================================================================
--- trunk/windstille/src/app/console.cpp	2009-06-17 17:00:21 UTC (rev 2961)
+++ trunk/windstille/src/app/console.cpp	2009-06-17 17:21:59 UTC (rev 2962)
@@ -84,8 +84,8 @@
     float display_time;
   };
 
-  int x_pos;
-  int y_pos;
+  float x_pos;
+  float y_pos;
   typedef std::vector<ConsoleEntry> Buffer;
   Buffer buffer;
 
@@ -102,8 +102,8 @@
   ConsoleImpl(Console& console_)
     : console(console_)
   {
-    x_pos = 16;
-    y_pos = 600-16;
+    x_pos = 16.0f;
+    y_pos = 600.0f - 16.0f;
 
     active = false;
     history_position = 1; 

Modified: trunk/windstille/src/app/menu_manager.cpp
===================================================================
--- trunk/windstille/src/app/menu_manager.cpp	2009-06-17 17:00:21 UTC (rev 2961)
+++ trunk/windstille/src/app/menu_manager.cpp	2009-06-17 17:21:59 UTC (rev 2962)
@@ -118,8 +118,8 @@
     
   { // Construct Copyright box
     std::auto_ptr<gui::GroupComponent> text_group
-      (new gui::GroupComponent(Rectf(Vector2f(Display::get_width()/2 - 390,
-                                              Display::get_height() - 100),
+      (new gui::GroupComponent(Rectf(Vector2f(Display::get_width()/2 - 390.0f,
+                                              Display::get_height()  - 100.0f),
                                      Size(800 - 20, 
                                           100 - 10)),
                                "",

Modified: trunk/windstille/src/engine/camera.cpp
===================================================================
--- trunk/windstille/src/engine/camera.cpp	2009-06-17 17:00:21 UTC (rev 2961)
+++ trunk/windstille/src/engine/camera.cpp	2009-06-17 17:21:59 UTC (rev 2962)
@@ -97,11 +97,11 @@
         else if (dist < -vscroll_threshold)
           pos.y = tpos.y + vscroll_threshold;
 
-        int start_x = Display::get_width()/2;
-        int end_x   = Sector::current()->get_width() - Display::get_width()/2;
+        float start_x = Display::get_width()/2;
+        float end_x   = Sector::current()->get_width() - Display::get_width()/2;
 
-        int start_y = Display::get_height()/2;
-        int end_y   = Sector::current()->get_height() - Display::get_height()/2;
+        float start_y = Display::get_height()/2;
+        float end_y   = Sector::current()->get_height() - Display::get_height()/2;
 
         if (pos.x < start_x)
           pos.x = start_x;

Modified: trunk/windstille/src/hud/conversation.cpp
===================================================================
--- trunk/windstille/src/hud/conversation.cpp	2009-06-17 17:00:21 UTC (rev 2961)
+++ trunk/windstille/src/hud/conversation.cpp	2009-06-17 17:21:59 UTC (rev 2962)
@@ -73,7 +73,7 @@
   for(int i = 0; i < (int)choices.size(); ++i)
     { // FIXME:
       Vector2f offset(0.0f, 1.0f);
-      offset = offset.rotate(math::deg2rad(segment*i) - M_PI/2);
+      offset = offset.rotate(math::deg2rad(segment*i) - math::pi/2);
 
       float start = -segment/2 - 90.0f + segment*i;
       float end   = -segment/2 - 90.0f + segment*(i+1);
@@ -82,8 +82,8 @@
 
       Vector2f textpos = pos + Vector2f(0, 16.0f);
       // FIXME: Doesn't handle multi line text
-      Sizef size(Fonts::vera20->get_width(choices[i].topic) + 40,
-                 Fonts::vera20->get_height() + 25);
+      Sizef size(Fonts::vera20->get_width(choices[i].topic) + 40.0f,
+                 Fonts::vera20->get_height() + 25.0f);
       Rectf  rect(textpos + distance * offset - Vector2f(size.width/2, size.height - 15), size);
 
       if (i == selection)
@@ -97,7 +97,7 @@
                                             textpos.y + distance * offset.y), 
                                      choices[i].topic, Color(1.0f, 1.0f, 0.0f));
 
-          Fonts::vera20->draw_center(Vector2f(400, Display::get_height() - 32),
+          Fonts::vera20->draw_center(Vector2f(400.0f, Display::get_height() - 32.0f),
                                      choices[i].text, Color(1.0f, 1.0f, 1.0f));
           Display::draw_rounded_rect(rect, 5.0f, Color(1.0f, 1.0f, 0.0f));
         }

Modified: trunk/windstille/src/hud/dialog_manager.cpp
===================================================================
--- trunk/windstille/src/hud/dialog_manager.cpp	2009-06-17 17:00:21 UTC (rev 2961)
+++ trunk/windstille/src/hud/dialog_manager.cpp	2009-06-17 17:21:59 UTC (rev 2962)
@@ -69,7 +69,7 @@
                                int(text_area->get_rect().get_height()
                                    + text_border_y * 2.0f));
 
-  Point pos(0,0);
+  Vector2f pos(0.0f, 0.0f);
   if(alignment & LEFT) {
     pos.x = outer_border_x;
   } else if(alignment & RIGHT) {
@@ -90,7 +90,7 @@
     Rectf rect(pos.x,
                pos.y,
                pos.x + dialog_width,
-               pos.y + 200);
+               pos.y + 200.0f);
     
     Display::fill_rounded_rect(rect, 16.0f,
                                Color(0, 0, 0.3f, 0.5f));
@@ -98,7 +98,7 @@
                                Color(0.6f, 1.0f, 1.0f, 0.8f));
   
     portrait.draw(Vector2f(pos.x + portrait_border_x,
-                         pos.y + portrait_border_y));
+                           pos.y + portrait_border_y));
   }
   
   text_area->draw();

Modified: trunk/windstille/src/math/random.cpp
===================================================================
--- trunk/windstille/src/math/random.cpp	2009-06-17 17:00:21 UTC (rev 2961)
+++ trunk/windstille/src/math/random.cpp	2009-06-17 17:21:59 UTC (rev 2962)
@@ -106,6 +106,24 @@
   /* divided by 2^32-1 */
 }
 
+float
+Random::frand(float start, float end)
+{
+  return drand(start, end);
+}
+
+float
+Random::frand(float range)
+{
+  return frand(range);
+}
+
+float
+Random::frand()
+{
+  return frand();
+}
+
 int
 Random::sign()
 {

Modified: trunk/windstille/src/math/random.hpp
===================================================================
--- trunk/windstille/src/math/random.hpp	2009-06-17 17:00:21 UTC (rev 2961)
+++ trunk/windstille/src/math/random.hpp	2009-06-17 17:21:59 UTC (rev 2962)
@@ -50,6 +50,10 @@
   /** Returns a random number between \a start and \a end */
   double drand(double start, double end);
 
+  float frand(float start, float end);
+  float frand(float range);
+  float frand();
+
   /** Returns either 1 or -1 */
   int sign();
 private:

Modified: trunk/windstille/src/objects/grenade.cpp
===================================================================
--- trunk/windstille/src/objects/grenade.cpp	2009-06-17 17:00:21 UTC (rev 2961)
+++ trunk/windstille/src/objects/grenade.cpp	2009-06-17 17:21:59 UTC (rev 2962)
@@ -21,7 +21,8 @@
 #include "grenade.hpp"
 
 Grenade::Grenade()
-  : sprite("models/objects/grenade/grenade.wsprite"), physics(this)
+  : sprite("models/objects/grenade/grenade.wsprite"), 
+    physics(this)
 {
   c_object.reset(new CollisionObject(this, Rectf(0, 0, 32, 32)));
   physics.register_collobj(*c_object);

Modified: trunk/windstille/src/objects/laser_pointer.cpp
===================================================================
--- trunk/windstille/src/objects/laser_pointer.cpp	2009-06-17 17:00:21 UTC (rev 2961)
+++ trunk/windstille/src/objects/laser_pointer.cpp	2009-06-17 17:21:59 UTC (rev 2962)
@@ -136,7 +136,7 @@
 void
 LaserPointer::update(float delta)
 {
-  progress += 0.1 * delta;
+  progress += 0.1f * delta;
 }
 
 float

Modified: trunk/windstille/src/objects/player.cpp
===================================================================
--- trunk/windstille/src/objects/player.cpp	2009-06-17 17:00:21 UTC (rev 2961)
+++ trunk/windstille/src/objects/player.cpp	2009-06-17 17:21:59 UTC (rev 2962)
@@ -492,7 +492,7 @@
 void
 Player::update_ducked(const Controller& controller)
 {
-  if (!controller.get_axis_state(Y_AXIS) > 0.5f)
+  if (!(controller.get_axis_state(Y_AXIS) > 0.5f))
     {
       state = DUCKING;
       sprite.set_action("StandToDuck", -1.0);
@@ -535,7 +535,7 @@
 void
 Player::set_stand_to_listen(bool backwards)
 {
-  try_set_action("StandtoListen", backwards ? -1.0 : 1.0);
+  try_set_action("StandtoListen", backwards ? -1.0f : 1.0f);
   if (!backwards) 
     {
       sprite.set_next_action("Listen");

Modified: trunk/windstille/src/objects/scriptable_object.cpp
===================================================================
--- trunk/windstille/src/objects/scriptable_object.cpp	2009-06-17 17:00:21 UTC (rev 2961)
+++ trunk/windstille/src/objects/scriptable_object.cpp	2009-06-17 17:21:59 UTC (rev 2962)
@@ -215,7 +215,7 @@
     highlight.set_alpha(alpha);
     light.set_alpha(alpha);
   } else {
-    float alpha = 1.0 - (fmodf(time, flash_speed) / flash_speed);
+    float alpha = 1.0f - (fmodf(time, flash_speed) / flash_speed);
     // fade off
     highlight.set_alpha(alpha);
     light.set_alpha(alpha);

Modified: trunk/windstille/src/objects/swarm.cpp
===================================================================
--- trunk/windstille/src/objects/swarm.cpp	2009-06-17 17:00:21 UTC (rev 2961)
+++ trunk/windstille/src/objects/swarm.cpp	2009-06-17 17:21:59 UTC (rev 2962)
@@ -41,13 +41,13 @@
 
   for(Agents::iterator i = agents.begin(); i != agents.end(); ++i)
     {
-      i->pos.x = pos.x + rnd.drand(-100, 100);
-      i->pos.y = pos.y + rnd.drand(-100, 100);
+      i->pos.x = pos.x + rnd.frand(-100, 100);
+      i->pos.y = pos.y + rnd.frand(-100, 100);
 
-      i->angle = rnd.drand(-M_PI, M_PI);
-      i->speed = rnd.drand(50.0f, 200.0f);
+      i->angle = rnd.frand(-M_PI, M_PI);
+      i->speed = rnd.frand(50.0f, 200.0f);
 
-      i->max_speed = rnd.drand(100.0f, 200.0f);
+      i->max_speed = rnd.frand(100.0f, 200.0f);
 
       i->turn_speed = i->max_speed/30.0f;
 
@@ -91,7 +91,7 @@
   int x, y;
   SDL_GetMouseState(&x, &y);
   
-  target = GameSession::current()->get_view()->screen_to_world(Vector2f(x, y));
+  target = GameSession::current()->get_view()->screen_to_world(Vector2f(static_cast<float>(x), static_cast<float>(y)));
 
   for(Agents::iterator i = agents.begin(); i != agents.end(); ++i)
     {
@@ -107,7 +107,7 @@
         {
           if (fabs(relative_angle) < 0.3f)
             {
-              //i->angle += rnd.drand(-1.0f, 1.0f) * delta;
+              //i->angle += rnd.frand(-1.0f, 1.0f) * delta;
               if (i->speed < i->max_speed) 
                 i->speed += 100.0f * delta;
             }
@@ -121,13 +121,13 @@
         }
       else
         {
-          i->angle += rnd.drand(-15.0f, 15.0f) * delta;
+          i->angle += rnd.frand(-15.0f, 15.0f) * delta;
           //i->speed += 150.0f - fabs(i->angle);
-          i->speed = rnd.drand(50.0f, 100.0f);
+          i->speed = rnd.frand(50.0f, 100.0f);
         }
 
-      i->pos.x += i->speed * cos(i->angle) * delta;
-      i->pos.y += i->speed * sin(i->angle) * delta;
+      i->pos.x += i->speed * cosf(i->angle) * delta;
+      i->pos.y += i->speed * sinf(i->angle) * delta;
     }
 }
 

Modified: trunk/windstille/src/objects/vrdummy.cpp
===================================================================
--- trunk/windstille/src/objects/vrdummy.cpp	2009-06-17 17:00:21 UTC (rev 2961)
+++ trunk/windstille/src/objects/vrdummy.cpp	2009-06-17 17:21:59 UTC (rev 2962)
@@ -59,8 +59,8 @@
   
   if (jump_time >= 1.0f && velocity == Vector2f(0, 0)) 
     {
-      velocity = Vector2f(rnd.drand(-300.0f, 300.0f),
-                        rnd.drand(-300.0f, 300.0f));
+      velocity = Vector2f(rnd.frand(-300.0f, 300.0f),
+                          rnd.frand(-300.0f, 300.0f));
     }
 
   if (jump_time >= 1.5f)

Modified: trunk/windstille/src/screen/game_session.cpp
===================================================================
--- trunk/windstille/src/screen/game_session.cpp	2009-06-17 17:00:21 UTC (rev 2961)
+++ trunk/windstille/src/screen/game_session.cpp	2009-06-17 17:21:59 UTC (rev 2962)
@@ -174,7 +174,8 @@
   if (pause)
     {
       if ((SDL_GetTicks() / 1000) % 2)
-        Fonts::vera20->draw(Vector2f(Display::get_width()/2, Display::get_height()/2), "Pause");
+        Fonts::vera20->draw(Vector2f(Display::get_width()/2.0f, Display::get_height()/2.0f), 
+                            "Pause");
     }
 }
 
@@ -200,13 +201,13 @@
   
   // Hacks to play around with the game speed
   if(keystate[SDLK_KP1])
-    game_speed *= 1.0 - delta;
+    game_speed *= 1.0f - delta;
 
   if(keystate[SDLK_KP3])
-    game_speed *= 1.0 + delta;
+    game_speed *= 1.0f + delta;
 
   if(keystate[SDLK_KP5])
-    game_speed = 1.0;  
+    game_speed = 1.0f;
 }
 
 void

Modified: trunk/windstille/src/screen/sprite3dview.cpp
===================================================================
--- trunk/windstille/src/screen/sprite3dview.cpp	2009-06-17 17:00:21 UTC (rev 2961)
+++ trunk/windstille/src/screen/sprite3dview.cpp	2009-06-17 17:21:59 UTC (rev 2962)
@@ -62,7 +62,7 @@
   sc.color().fill_screen(Color(0.5, 0.0, 0.5));
 
   sc.push_modelview();
-  sc.translate(Display::get_width()/2, Display::get_height()/2);
+  sc.translate(Display::get_width()/2.0f, Display::get_height()/2.0f);
   sc.scale(scale, scale);
 
   // Rotate
@@ -79,8 +79,8 @@
   //sc.color().draw("Hello World", 100, 100);
   sc.render();
   
-  int x = 10;
-  int y =  Fonts::vera12->get_height() + 5;
+  float x = 10.0f;
+  float y =  Fonts::vera12->get_height() + 5.0f;
   int line_height = Fonts::vera12->get_height()+5;
 
   for(int i = 0; i < int(actions.size()); ++i)
@@ -94,10 +94,10 @@
 
 
       y += line_height;
-      if (y > 580)
+      if (y > 580.0f)
         {
-          x += 200;
-          y =  Fonts::vera12->get_height() + 5;
+          x += 200.0f;
+          y =  Fonts::vera12->get_height() + 5.0f;
         }
     }
 }

Modified: trunk/windstille/src/screen/view.cpp
===================================================================
--- trunk/windstille/src/screen/view.cpp	2009-06-17 17:00:21 UTC (rev 2961)
+++ trunk/windstille/src/screen/view.cpp	2009-06-17 17:21:59 UTC (rev 2962)
@@ -37,13 +37,9 @@
 void
 View::draw (SceneContext& sc)
 {
-  // Casting here isn't really necessary, but should about some
-  // pixel-jitter when scrolling with subpixel values and pixel
-  // precise images.
   if (camera.get_zoom() == 1.0)
     {
-      state.set_pos(Vector2f(static_cast<int>(camera.get_pos().x),
-                             static_cast<int>(camera.get_pos().y)));
+      state.set_pos(Vector2f(camera.get_pos().x), camera.get_pos().y);
     }
   else
     {
@@ -71,10 +67,10 @@
   Uint8 *keystate = SDL_GetKeyState(NULL);
 
   if (keystate[SDLK_KP_PLUS])
-    zoom *= 1.0 + delta;
+    zoom *= 1.0f + delta;
 
   if (keystate[SDLK_KP_MINUS])
-    zoom *= 1.0 - delta;
+    zoom *= 1.0f - delta;
 
   const Controller& controller = InputManager::get_controller();
 

Modified: trunk/windstille/src/scripting/interface.cpp
===================================================================
--- trunk/windstille/src/scripting/interface.cpp	2009-06-17 17:00:21 UTC (rev 2961)
+++ trunk/windstille/src/scripting/interface.cpp	2009-06-17 17:21:59 UTC (rev 2962)
@@ -50,9 +50,9 @@
   SoundManager::current()->play_music(musicfile);
 }
 
-void stop_music(float fadetime)
+void stop_music(bool fade)
 {
-  SoundManager::current()->stop_music(fadetime);
+  SoundManager::current()->stop_music(fade);
 }
 
 void play_sound(const std::string& soundfile)

Modified: trunk/windstille/src/scripting/interface.hpp
===================================================================
--- trunk/windstille/src/scripting/interface.hpp	2009-06-17 17:00:21 UTC (rev 2961)
+++ trunk/windstille/src/scripting/interface.hpp	2009-06-17 17:21:59 UTC (rev 2962)
@@ -53,7 +53,7 @@
 
 void play_music(const std::string& musicfile);
 
-void stop_music(float fadetime);
+void stop_music(bool fade);
 
 void play_sound(const std::string& soundfile);
 

Modified: trunk/windstille/src/scripting/wrapper.cpp
===================================================================
--- trunk/windstille/src/scripting/wrapper.cpp	2009-06-17 17:00:21 UTC (rev 2961)
+++ trunk/windstille/src/scripting/wrapper.cpp	2009-06-17 17:21:59 UTC (rev 2962)
@@ -502,14 +502,14 @@
 
 static SQInteger stop_music_wrapper(HSQUIRRELVM vm)
 {
-  SQFloat arg0;
-  if(SQ_FAILED(sq_getfloat(vm, 2, &arg0))) {
-    sq_throwerror(vm, _SC("Argument 1 not a float"));
+  SQBool arg0;
+  if(SQ_FAILED(sq_getbool(vm, 2, &arg0))) {
+    sq_throwerror(vm, _SC("Argument 1 not a bool"));
     return SQ_ERROR;
   }
 
   try {
-    Scripting::stop_music(static_cast<float> (arg0));
+    Scripting::stop_music(arg0 == SQTrue);
 
     return 0;
 
@@ -1784,7 +1784,7 @@
 
   sq_pushstring(v, "stop_music", -1);
   sq_newclosure(v, &stop_music_wrapper, 0);
-  sq_setparamscheck(v, SQ_MATCHTYPEMASKSTRING, "x|tn");
+  sq_setparamscheck(v, SQ_MATCHTYPEMASKSTRING, "x|tb");
   if(SQ_FAILED(sq_createslot(v, -3))) {
     throw SquirrelError(v, "Couldn't register function 'stop_music'");
   }

Modified: trunk/windstille/src/sprite3d/sprite3d.cpp
===================================================================
--- trunk/windstille/src/sprite3d/sprite3d.cpp	2009-06-17 17:00:21 UTC (rev 2961)
+++ trunk/windstille/src/sprite3d/sprite3d.cpp	2009-06-17 17:21:59 UTC (rev 2962)
@@ -167,11 +167,13 @@
 void
 Sprite3D::set_speed(float speed)
 {
-  if((speed < 0 && frame1.speed >= 0) ||
-     (speed >= 0 && frame1.speed < 0)) {
-    blend_time = 1.0 - blend_time;
-    std::swap(frame1, frame2);
-  }
+  if ((speed <  0.0f && frame1.speed >= 0.0f) ||
+      (speed >= 0.0f && frame1.speed <  0.0f)) 
+    {
+      blend_time = 1.0 - blend_time;
+      std::swap(frame1, frame2);
+    }
+
   frame1.speed = speed;
   frame2.speed = speed;
 }

Modified: trunk/windstille/src/tile/tile.hpp
===================================================================
--- trunk/windstille/src/tile/tile.hpp	2009-06-17 17:00:21 UTC (rev 2961)
+++ trunk/windstille/src/tile/tile.hpp	2009-06-17 17:21:59 UTC (rev 2962)
@@ -61,7 +61,7 @@
 
   Tile(unsigned int arg_colmap);
 
-  unsigned get_colmap() const { return colmap; }
+  unsigned int get_colmap() const { return colmap; }
 };
 
 #endif

Modified: trunk/windstille/src/tile/tile_map.cpp
===================================================================
--- trunk/windstille/src/tile/tile_map.cpp	2009-06-17 17:00:21 UTC (rev 2961)
+++ trunk/windstille/src/tile/tile_map.cpp	2009-06-17 17:21:59 UTC (rev 2962)
@@ -200,7 +200,7 @@
     }
 
   if (field(x_pos, y_pos))
-    return field(x_pos, y_pos)->get_colmap();
+    return field(x_pos, y_pos)->get_colmap() != 0;
   else
     return 0;
 }

Modified: trunk/windstille/src/util/sexpr_file_reader.cpp
===================================================================
--- trunk/windstille/src/util/sexpr_file_reader.cpp	2009-06-17 17:00:21 UTC (rev 2961)
+++ trunk/windstille/src/util/sexpr_file_reader.cpp	2009-06-17 17:21:59 UTC (rev 2962)
@@ -107,7 +107,7 @@
           }
         else if (item->get_type() == lisp::Lisp::TYPE_INT)
           {
-            v = item->get_int();
+            v = static_cast<float>(item->get_int());
             return true;
           }
         else



From grumbel at mail.berlios.de  Wed Jun 17 19:23:27 2009
From: grumbel at mail.berlios.de (grumbel at BerliOS)
Date: Wed, 17 Jun 2009 19:23:27 +0200
Subject: [Windstille-commit] r2963 - trunk/windstille/src/screen
Message-ID: <200906171723.n5HHNRFZ016539@sheep.berlios.de>

Author: grumbel
Date: 2009-06-17 19:23:19 +0200 (Wed, 17 Jun 2009)
New Revision: 2963

Modified:
   trunk/windstille/src/screen/view.cpp
Log:
Corrected typo

Modified: trunk/windstille/src/screen/view.cpp
===================================================================
--- trunk/windstille/src/screen/view.cpp	2009-06-17 17:21:59 UTC (rev 2962)
+++ trunk/windstille/src/screen/view.cpp	2009-06-17 17:23:19 UTC (rev 2963)
@@ -39,7 +39,7 @@
 {
   if (camera.get_zoom() == 1.0)
     {
-      state.set_pos(Vector2f(camera.get_pos().x), camera.get_pos().y);
+      state.set_pos(Vector2f(camera.get_pos().x, camera.get_pos().y));
     }
   else
     {



