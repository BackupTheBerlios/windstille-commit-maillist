<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Windstille-commit] r2268 - in trunk/windstille: data/levels	src/scripting
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/windstille-commit/2008-June/index.html" >
   <LINK REL="made" HREF="mailto:windstille-commit%40lists.berlios.de?Subject=Re%3A%20%5BWindstille-commit%5D%20r2268%20-%20in%20trunk/windstille%3A%20data/levels%0A%09src/scripting&In-Reply-To=%3C200806270013.m5R0DqSG010213%40sheep.berlios.de%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="001287.html">
   <LINK REL="Next"  HREF="001289.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Windstille-commit] r2268 - in trunk/windstille: data/levels	src/scripting</H1>
    <B>jamesgregory at mail.berlios.de</B> 
    <A HREF="mailto:windstille-commit%40lists.berlios.de?Subject=Re%3A%20%5BWindstille-commit%5D%20r2268%20-%20in%20trunk/windstille%3A%20data/levels%0A%09src/scripting&In-Reply-To=%3C200806270013.m5R0DqSG010213%40sheep.berlios.de%3E"
       TITLE="[Windstille-commit] r2268 - in trunk/windstille: data/levels	src/scripting">jamesgregory at mail.berlios.de
       </A><BR>
    <I>Fri Jun 27 02:13:52 CEST 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="001287.html">[Windstille-commit] r2267 - in trunk/windstille/src: . scripting
</A></li>
        <LI>Next message: <A HREF="001289.html">[Windstille-commit] r2269 - trunk/windstille/lib
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1288">[ date ]</a>
              <a href="thread.html#1288">[ thread ]</a>
              <a href="subject.html#1288">[ subject ]</a>
              <a href="author.html#1288">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Author: jamesgregory
Date: 2008-06-27 02:13:45 +0200 (Fri, 27 Jun 2008)
New Revision: 2268

Modified:
   trunk/windstille/data/levels/intro.wst
   trunk/windstille/src/scripting/wrapper.cpp
Log:
don't confuse wchar_t and char when dealing with squirrel

Modified: trunk/windstille/data/levels/intro.wst
===================================================================
--- trunk/windstille/data/levels/intro.wst	2008-06-26 23:36:01 UTC (rev 2267)
+++ trunk/windstille/data/levels/intro.wst	2008-06-27 00:13:45 UTC (rev 2268)
@@ -2,7 +2,7 @@
 (windstille-sector
   (version 2)
   (name   &quot;&quot;)
-  (music  &quot;music/silence_wip.ogg&quot;)
+  (music  &quot;levels/silence_wip.ogg&quot;)
   (ambient-color .666 .666 .666)
   (init-script &quot;levels/intro.nut&quot;)
   (spawnpoint

Modified: trunk/windstille/src/scripting/wrapper.cpp
===================================================================
--- trunk/windstille/src/scripting/wrapper.cpp	2008-06-26 23:36:01 UTC (rev 2267)
+++ trunk/windstille/src/scripting/wrapper.cpp	2008-06-27 00:13:45 UTC (rev 2268)
@@ -13,6 +13,8 @@
 #include &quot;squirrel_error.hpp&quot;
 #include &quot;wrapper.interface.hpp&quot;
 
+#include &quot;../util.hpp&quot;
+
 namespace Scripting
 {
 namespace Wrapper
@@ -37,11 +39,11 @@
   try {
     const std::string&amp; return_value = _this-&gt;get_name();
   
-    sq_pushstring(vm, return_value.c_str(), return_value.size());
+    sq_pushstring(vm, string_to_wstring(return_value).c_str(), return_value.size());
     return 1;
   
   } catch(std::exception&amp; e) {
-    sq_throwerror(vm, e.what());
+    sq_throwerror(vm, string_to_wstring(e.what()).c_str());
     return SQ_ERROR;
   } catch(...) {
     sq_throwerror(vm, _SC(&quot;Unexpected exception while executing function 'get_name'&quot;));
@@ -65,7 +67,7 @@
     return 0;
   
   } catch(std::exception&amp; e) {
-    sq_throwerror(vm, e.what());
+    sq_throwerror(vm, string_to_wstring(e.what()).c_str());
     return SQ_ERROR;
   } catch(...) {
     sq_throwerror(vm, _SC(&quot;Unexpected exception while executing function 'remove'&quot;));
@@ -94,7 +96,7 @@
     return 0;
   
   } catch(std::exception&amp; e) {
-    sq_throwerror(vm, e.what());
+    sq_throwerror(vm, string_to_wstring(e.what()).c_str());
     return SQ_ERROR;
   } catch(...) {
     sq_throwerror(vm, _SC(&quot;Unexpected exception while executing function 'set_active'&quot;));
@@ -118,12 +120,12 @@
   }
   
   try {
-    _this-&gt;set_parent(arg0);
+    _this-&gt;set_parent(wstring_to_string(arg0));
   
     return 0;
   
   } catch(std::exception&amp; e) {
-    sq_throwerror(vm, e.what());
+    sq_throwerror(vm, string_to_wstring(e.what()).c_str());
     return SQ_ERROR;
   } catch(...) {
     sq_throwerror(vm, _SC(&quot;Unexpected exception while executing function 'set_parent'&quot;));
@@ -154,12 +156,12 @@
   }
   
   try {
-    _this-&gt;set_sprite(arg0);
+    _this-&gt;set_sprite(wstring_to_string(arg0));
   
     return 0;
   
   } catch(std::exception&amp; e) {
-    sq_throwerror(vm, e.what());
+    sq_throwerror(vm, string_to_wstring(e.what()).c_str());
     return SQ_ERROR;
   } catch(...) {
     sq_throwerror(vm, _SC(&quot;Unexpected exception while executing function 'set_sprite'&quot;));
@@ -183,12 +185,12 @@
   }
   
   try {
-    _this-&gt;set_action(arg0);
+    _this-&gt;set_action(wstring_to_string(arg0));
   
     return 0;
   
   } catch(std::exception&amp; e) {
-    sq_throwerror(vm, e.what());
+    sq_throwerror(vm, string_to_wstring(e.what()).c_str());
     return SQ_ERROR;
   } catch(...) {
     sq_throwerror(vm, _SC(&quot;Unexpected exception while executing function 'set_action'&quot;));
@@ -222,7 +224,7 @@
     return 0;
   
   } catch(std::exception&amp; e) {
-    sq_throwerror(vm, e.what());
+    sq_throwerror(vm, string_to_wstring(e.what()).c_str());
     return SQ_ERROR;
   } catch(...) {
     sq_throwerror(vm, _SC(&quot;Unexpected exception while executing function 'set_pos'&quot;));
@@ -251,7 +253,7 @@
     return 0;
   
   } catch(std::exception&amp; e) {
-    sq_throwerror(vm, e.what());
+    sq_throwerror(vm, string_to_wstring(e.what()).c_str());
     return SQ_ERROR;
   } catch(...) {
     sq_throwerror(vm, _SC(&quot;Unexpected exception while executing function 'set_vflip'&quot;));
@@ -280,12 +282,12 @@
   }
   
   try {
-    _this-&gt;attach(arg0, arg1);
+    _this-&gt;attach(wstring_to_string(arg0), wstring_to_string(arg1));
   
     return 0;
   
   } catch(std::exception&amp; e) {
-    sq_throwerror(vm, e.what());
+    sq_throwerror(vm, string_to_wstring(e.what()).c_str());
     return SQ_ERROR;
   } catch(...) {
     sq_throwerror(vm, _SC(&quot;Unexpected exception while executing function 'attach'&quot;));
@@ -316,7 +318,7 @@
     return 0;
   
   } catch(std::exception&amp; e) {
-    sq_throwerror(vm, e.what());
+    sq_throwerror(vm, string_to_wstring(e.what()).c_str());
     return SQ_ERROR;
   } catch(...) {
     sq_throwerror(vm, _SC(&quot;Unexpected exception while executing function 'start_listening'&quot;));
@@ -340,7 +342,7 @@
     return 0;
   
   } catch(std::exception&amp; e) {
-    sq_throwerror(vm, e.what());
+    sq_throwerror(vm, string_to_wstring(e.what()).c_str());
     return SQ_ERROR;
   } catch(...) {
     sq_throwerror(vm, _SC(&quot;Unexpected exception while executing function 'stop_listening'&quot;));
@@ -391,7 +393,7 @@
     return 0;
   
   } catch(std::exception&amp; e) {
-    sq_throwerror(vm, e.what());
+    sq_throwerror(vm, string_to_wstring(e.what()).c_str());
     return SQ_ERROR;
   } catch(...) {
     sq_throwerror(vm, _SC(&quot;Unexpected exception while executing function 'move_to'&quot;));
@@ -420,7 +422,7 @@
     return 0;
   
   } catch(std::exception&amp; e) {
-    sq_throwerror(vm, e.what());
+    sq_throwerror(vm, string_to_wstring(e.what()).c_str());
     return SQ_ERROR;
   } catch(...) {
     sq_throwerror(vm, _SC(&quot;Unexpected exception while executing function 'start_flash'&quot;));
@@ -438,12 +440,12 @@
   }
   
   try {
-    Scripting::set_sector(arg0);
+    Scripting::set_sector(wstring_to_string(arg0));
   
     return 0;
   
   } catch(std::exception&amp; e) {
-    sq_throwerror(vm, e.what());
+    sq_throwerror(vm, string_to_wstring(e.what()).c_str());
     return SQ_ERROR;
   } catch(...) {
     sq_throwerror(vm, _SC(&quot;Unexpected exception while executing function 'set_sector'&quot;));
@@ -461,12 +463,12 @@
   }
   
   try {
-    Scripting::play_music(arg0);
+    Scripting::play_music(wstring_to_string(arg0));
   
     return 0;
   
   } catch(std::exception&amp; e) {
-    sq_throwerror(vm, e.what());
+    sq_throwerror(vm, string_to_wstring(e.what()).c_str());
     return SQ_ERROR;
   } catch(...) {
     sq_throwerror(vm, _SC(&quot;Unexpected exception while executing function 'play_music'&quot;));
@@ -489,7 +491,7 @@
     return 0;
   
   } catch(std::exception&amp; e) {
-    sq_throwerror(vm, e.what());
+    sq_throwerror(vm, string_to_wstring(e.what()).c_str());
     return SQ_ERROR;
   } catch(...) {
     sq_throwerror(vm, _SC(&quot;Unexpected exception while executing function 'stop_music'&quot;));
@@ -507,12 +509,12 @@
   }
   
   try {
-    Scripting::play_sound(arg0);
+    Scripting::play_sound(wstring_to_string(arg0));
   
     return 0;
   
   } catch(std::exception&amp; e) {
-    sq_throwerror(vm, e.what());
+    sq_throwerror(vm, string_to_wstring(e.what()).c_str());
     return SQ_ERROR;
   } catch(...) {
     sq_throwerror(vm, _SC(&quot;Unexpected exception while executing function 'play_sound'&quot;));
@@ -535,12 +537,12 @@
   }
   
   try {
-    Scripting::caption_add(static_cast&lt;int&gt; (arg0), arg1);
+    Scripting::caption_add(static_cast&lt;int&gt; (arg0), wstring_to_string(arg1));
   
     return 0;
   
   } catch(std::exception&amp; e) {
-    sq_throwerror(vm, e.what());
+    sq_throwerror(vm, string_to_wstring(e.what()).c_str());
     return SQ_ERROR;
   } catch(...) {
     sq_throwerror(vm, _SC(&quot;Unexpected exception while executing function 'caption_add'&quot;));
@@ -559,7 +561,7 @@
     return 0;
   
   } catch(std::exception&amp; e) {
-    sq_throwerror(vm, e.what());
+    sq_throwerror(vm, string_to_wstring(e.what()).c_str());
     return SQ_ERROR;
   } catch(...) {
     sq_throwerror(vm, _SC(&quot;Unexpected exception while executing function 'caption_clear'&quot;));
@@ -578,7 +580,7 @@
     return 0;
   
   } catch(std::exception&amp; e) {
-    sq_throwerror(vm, e.what());
+    sq_throwerror(vm, string_to_wstring(e.what()).c_str());
     return SQ_ERROR;
   } catch(...) {
     sq_throwerror(vm, _SC(&quot;Unexpected exception while executing function 'caption_end'&quot;));
@@ -601,7 +603,7 @@
     return 0;
   
   } catch(std::exception&amp; e) {
-    sq_throwerror(vm, e.what());
+    sq_throwerror(vm, string_to_wstring(e.what()).c_str());
     return SQ_ERROR;
   } catch(...) {
     sq_throwerror(vm, _SC(&quot;Unexpected exception while executing function 'camera_set_active'&quot;));
@@ -620,7 +622,7 @@
     return 0;
   
   } catch(std::exception&amp; e) {
-    sq_throwerror(vm, e.what());
+    sq_throwerror(vm, string_to_wstring(e.what()).c_str());
     return SQ_ERROR;
   } catch(...) {
     sq_throwerror(vm, _SC(&quot;Unexpected exception while executing function 'camera_continue_path'&quot;));
@@ -639,7 +641,7 @@
     return 0;
   
   } catch(std::exception&amp; e) {
-    sq_throwerror(vm, e.what());
+    sq_throwerror(vm, string_to_wstring(e.what()).c_str());
     return SQ_ERROR;
   } catch(...) {
     sq_throwerror(vm, _SC(&quot;Unexpected exception while executing function 'camera_begin_path'&quot;));
@@ -672,7 +674,7 @@
     return 0;
   
   } catch(std::exception&amp; e) {
-    sq_throwerror(vm, e.what());
+    sq_throwerror(vm, string_to_wstring(e.what()).c_str());
     return SQ_ERROR;
   } catch(...) {
     sq_throwerror(vm, _SC(&quot;Unexpected exception while executing function 'camera_add_point'&quot;));
@@ -691,7 +693,7 @@
     return 0;
   
   } catch(std::exception&amp; e) {
-    sq_throwerror(vm, e.what());
+    sq_throwerror(vm, string_to_wstring(e.what()).c_str());
     return SQ_ERROR;
   } catch(...) {
     sq_throwerror(vm, _SC(&quot;Unexpected exception while executing function 'camera_end_path'&quot;));
@@ -719,7 +721,7 @@
     return 0;
   
   } catch(std::exception&amp; e) {
-    sq_throwerror(vm, e.what());
+    sq_throwerror(vm, string_to_wstring(e.what()).c_str());
     return SQ_ERROR;
   } catch(...) {
     sq_throwerror(vm, _SC(&quot;Unexpected exception while executing function 'camera_set_pos'&quot;));
@@ -742,7 +744,7 @@
     return 0;
   
   } catch(std::exception&amp; e) {
-    sq_throwerror(vm, e.what());
+    sq_throwerror(vm, string_to_wstring(e.what()).c_str());
     return SQ_ERROR;
   } catch(...) {
     sq_throwerror(vm, _SC(&quot;Unexpected exception while executing function 'camera_set_zoom'&quot;));
@@ -765,7 +767,7 @@
     return 0;
   
   } catch(std::exception&amp; e) {
-    sq_throwerror(vm, e.what());
+    sq_throwerror(vm, string_to_wstring(e.what()).c_str());
     return SQ_ERROR;
   } catch(...) {
     sq_throwerror(vm, _SC(&quot;Unexpected exception while executing function 'set_controller_help_active'&quot;));
@@ -798,12 +800,12 @@
   }
   
   try {
-    Scripting::dialog_show(static_cast&lt;int&gt; (arg0), arg1, arg2, arg3);
+    Scripting::dialog_show(static_cast&lt;int&gt; (arg0), wstring_to_string(arg1), wstring_to_string(arg2), wstring_to_string(arg3));
   
     return 0;
   
   } catch(std::exception&amp; e) {
-    sq_throwerror(vm, e.what());
+    sq_throwerror(vm, string_to_wstring(e.what()).c_str());
     return SQ_ERROR;
   } catch(...) {
     sq_throwerror(vm, _SC(&quot;Unexpected exception while executing function 'dialog_show'&quot;));
@@ -822,7 +824,7 @@
     return sq_suspendvm(vm);
   
   } catch(std::exception&amp; e) {
-    sq_throwerror(vm, e.what());
+    sq_throwerror(vm, string_to_wstring(e.what()).c_str());
     return SQ_ERROR;
   } catch(...) {
     sq_throwerror(vm, _SC(&quot;Unexpected exception while executing function 'wait_for_dialog'&quot;));
@@ -841,7 +843,7 @@
     return sq_suspendvm(vm);
   
   } catch(std::exception&amp; e) {
-    sq_throwerror(vm, e.what());
+    sq_throwerror(vm, string_to_wstring(e.what()).c_str());
     return SQ_ERROR;
   } catch(...) {
     sq_throwerror(vm, _SC(&quot;Unexpected exception while executing function 'wait_for_fade'&quot;));
@@ -860,7 +862,7 @@
     return sq_suspendvm(vm);
   
   } catch(std::exception&amp; e) {
-    sq_throwerror(vm, e.what());
+    sq_throwerror(vm, string_to_wstring(e.what()).c_str());
     return SQ_ERROR;
   } catch(...) {
     sq_throwerror(vm, _SC(&quot;Unexpected exception while executing function 'wait_for_camera'&quot;));
@@ -878,12 +880,12 @@
   }
   
   try {
-    Scripting::conversation_add(arg0);
+    Scripting::conversation_add(wstring_to_string(arg0));
   
     return 0;
   
   } catch(std::exception&amp; e) {
-    sq_throwerror(vm, e.what());
+    sq_throwerror(vm, string_to_wstring(e.what()).c_str());
     return SQ_ERROR;
   } catch(...) {
     sq_throwerror(vm, _SC(&quot;Unexpected exception while executing function 'conversation_add'&quot;));
@@ -906,12 +908,12 @@
   }
   
   try {
-    Scripting::conversation_add2(arg0, arg1);
+    Scripting::conversation_add2(wstring_to_string(arg0), wstring_to_string(arg1));
   
     return 0;
   
   } catch(std::exception&amp; e) {
-    sq_throwerror(vm, e.what());
+    sq_throwerror(vm, string_to_wstring(e.what()).c_str());
     return SQ_ERROR;
   } catch(...) {
     sq_throwerror(vm, _SC(&quot;Unexpected exception while executing function 'conversation_add2'&quot;));
@@ -930,7 +932,7 @@
     return 0;
   
   } catch(std::exception&amp; e) {
-    sq_throwerror(vm, e.what());
+    sq_throwerror(vm, string_to_wstring(e.what()).c_str());
     return SQ_ERROR;
   } catch(...) {
     sq_throwerror(vm, _SC(&quot;Unexpected exception while executing function 'conversation_show'&quot;));
@@ -949,7 +951,7 @@
     return 1;
   
   } catch(std::exception&amp; e) {
-    sq_throwerror(vm, e.what());
+    sq_throwerror(vm, string_to_wstring(e.what()).c_str());
     return SQ_ERROR;
   } catch(...) {
     sq_throwerror(vm, _SC(&quot;Unexpected exception while executing function 'conversation_get_selection'&quot;));
@@ -968,7 +970,7 @@
     return sq_suspendvm(vm);
   
   } catch(std::exception&amp; e) {
-    sq_throwerror(vm, e.what());
+    sq_throwerror(vm, string_to_wstring(e.what()).c_str());
     return SQ_ERROR;
   } catch(...) {
     sq_throwerror(vm, _SC(&quot;Unexpected exception while executing function 'wait_for_conversation'&quot;));
@@ -991,12 +993,12 @@
   }
   
   try {
-    Scripting::add_objective(arg0, arg1);
+    Scripting::add_objective(wstring_to_string(arg0), wstring_to_string(arg1));
   
     return 0;
   
   } catch(std::exception&amp; e) {
-    sq_throwerror(vm, e.what());
+    sq_throwerror(vm, string_to_wstring(e.what()).c_str());
     return SQ_ERROR;
   } catch(...) {
     sq_throwerror(vm, _SC(&quot;Unexpected exception while executing function 'add_objective'&quot;));
@@ -1014,12 +1016,12 @@
   }
   
   try {
-    Scripting::objective_complete(arg0);
+    Scripting::objective_complete(wstring_to_string(arg0));
   
     return 0;
   
   } catch(std::exception&amp; e) {
-    sq_throwerror(vm, e.what());
+    sq_throwerror(vm, string_to_wstring(e.what()).c_str());
     return SQ_ERROR;
   } catch(...) {
     sq_throwerror(vm, _SC(&quot;Unexpected exception while executing function 'objective_complete'&quot;));
@@ -1037,13 +1039,13 @@
   }
   
   try {
-    bool return_value = Scripting::is_objective_given(arg0);
+    bool return_value = Scripting::is_objective_given(wstring_to_string(arg0));
   
     sq_pushbool(vm, return_value);
     return 1;
   
   } catch(std::exception&amp; e) {
-    sq_throwerror(vm, e.what());
+    sq_throwerror(vm, string_to_wstring(e.what()).c_str());
     return SQ_ERROR;
   } catch(...) {
     sq_throwerror(vm, _SC(&quot;Unexpected exception while executing function 'is_objective_given'&quot;));
@@ -1061,13 +1063,13 @@
   }
   
   try {
-    bool return_value = Scripting::is_objective_complete(arg0);
+    bool return_value = Scripting::is_objective_complete(wstring_to_string(arg0));
   
     sq_pushbool(vm, return_value);
     return 1;
   
   } catch(std::exception&amp; e) {
-    sq_throwerror(vm, e.what());
+    sq_throwerror(vm, string_to_wstring(e.what()).c_str());
     return SQ_ERROR;
   } catch(...) {
     sq_throwerror(vm, _SC(&quot;Unexpected exception while executing function 'is_objective_complete'&quot;));
@@ -1087,7 +1089,7 @@
     return 1;
   
   } catch(std::exception&amp; e) {
-    sq_throwerror(vm, e.what());
+    sq_throwerror(vm, string_to_wstring(e.what()).c_str());
     return SQ_ERROR;
   } catch(...) {
     sq_throwerror(vm, _SC(&quot;Unexpected exception while executing function 'run_before'&quot;));
@@ -1106,12 +1108,12 @@
   }
   
   try {
-    Scripting::save_state(arg0, arg1);
+    Scripting::save_state(arg0, wstring_to_string(arg1));
   
     return 0;
   
   } catch(std::exception&amp; e) {
-    sq_throwerror(vm, e.what());
+    sq_throwerror(vm, string_to_wstring(e.what()).c_str());
     return SQ_ERROR;
   } catch(...) {
     sq_throwerror(vm, _SC(&quot;Unexpected exception while executing function 'save_state'&quot;));
@@ -1130,12 +1132,12 @@
   }
   
   try {
-    Scripting::load_state(arg0, arg1);
+    Scripting::load_state(arg0, wstring_to_string(arg1));
   
     return 0;
   
   } catch(std::exception&amp; e) {
-    sq_throwerror(vm, e.what());
+    sq_throwerror(vm, string_to_wstring(e.what()).c_str());
     return SQ_ERROR;
   } catch(...) {
     sq_throwerror(vm, _SC(&quot;Unexpected exception while executing function 'load_state'&quot;));
@@ -1154,7 +1156,7 @@
     return 0;
   
   } catch(std::exception&amp; e) {
-    sq_throwerror(vm, e.what());
+    sq_throwerror(vm, string_to_wstring(e.what()).c_str());
     return SQ_ERROR;
   } catch(...) {
     sq_throwerror(vm, _SC(&quot;Unexpected exception while executing function 'list_objects'&quot;));
@@ -1177,7 +1179,7 @@
     return 0;
   
   } catch(std::exception&amp; e) {
-    sq_throwerror(vm, e.what());
+    sq_throwerror(vm, string_to_wstring(e.what()).c_str());
     return SQ_ERROR;
   } catch(...) {
     sq_throwerror(vm, _SC(&quot;Unexpected exception while executing function 'set_debug'&quot;));
@@ -1196,7 +1198,7 @@
     return 1;
   
   } catch(std::exception&amp; e) {
-    sq_throwerror(vm, e.what());
+    sq_throwerror(vm, string_to_wstring(e.what()).c_str());
     return SQ_ERROR;
   } catch(...) {
     sq_throwerror(vm, _SC(&quot;Unexpected exception while executing function 'get_debug'&quot;));
@@ -1215,7 +1217,7 @@
     return 1;
   
   } catch(std::exception&amp; e) {
-    sq_throwerror(vm, e.what());
+    sq_throwerror(vm, string_to_wstring(e.what()).c_str());
     return SQ_ERROR;
   } catch(...) {
     sq_throwerror(vm, _SC(&quot;Unexpected exception while executing function 'get_game_speed'&quot;));
@@ -1238,7 +1240,7 @@
     return 0;
   
   } catch(std::exception&amp; e) {
-    sq_throwerror(vm, e.what());
+    sq_throwerror(vm, string_to_wstring(e.what()).c_str());
     return SQ_ERROR;
   } catch(...) {
     sq_throwerror(vm, _SC(&quot;Unexpected exception while executing function 'set_game_speed'&quot;));
@@ -1262,7 +1264,7 @@
     return sq_suspendvm(vm);
   
   } catch(std::exception&amp; e) {
-    sq_throwerror(vm, e.what());
+    sq_throwerror(vm, string_to_wstring(e.what()).c_str());
     return SQ_ERROR;
   } catch(...) {
     sq_throwerror(vm, _SC(&quot;Unexpected exception while executing function 'wait'&quot;));
@@ -1295,12 +1297,12 @@
   }
   
   try {
-    Scripting::set_console_font(arg0, static_cast&lt;int&gt; (arg1));
+    Scripting::set_console_font(wstring_to_string(arg0), static_cast&lt;int&gt; (arg1));
   
     return 0;
   
   } catch(std::exception&amp; e) {
-    sq_throwerror(vm, e.what());
+    sq_throwerror(vm, string_to_wstring(e.what()).c_str());
     return SQ_ERROR;
   } catch(...) {
     sq_throwerror(vm, _SC(&quot;Unexpected exception while executing function 'set_console_font'&quot;));
@@ -1323,7 +1325,7 @@
     return 0;
   
   } catch(std::exception&amp; e) {
-    sq_throwerror(vm, e.what());
+    sq_throwerror(vm, string_to_wstring(e.what()).c_str());
     return SQ_ERROR;
   } catch(...) {
     sq_throwerror(vm, _SC(&quot;Unexpected exception while executing function 'set_gamma'&quot;));
@@ -1356,7 +1358,7 @@
     return 0;
   
   } catch(std::exception&amp; e) {
-    sq_throwerror(vm, e.what());
+    sq_throwerror(vm, string_to_wstring(e.what()).c_str());
     return SQ_ERROR;
   } catch(...) {
     sq_throwerror(vm, _SC(&quot;Unexpected exception while executing function 'set_gamma_rgb'&quot;));
@@ -1375,7 +1377,7 @@
     return 0;
   
   } catch(std::exception&amp; e) {
-    sq_throwerror(vm, e.what());
+    sq_throwerror(vm, string_to_wstring(e.what()).c_str());
     return SQ_ERROR;
   } catch(...) {
     sq_throwerror(vm, _SC(&quot;Unexpected exception while executing function 'show_config'&quot;));
@@ -1394,7 +1396,7 @@
     return 0;
   
   } catch(std::exception&amp; e) {
-    sq_throwerror(vm, e.what());
+    sq_throwerror(vm, string_to_wstring(e.what()).c_str());
     return SQ_ERROR;
   } catch(...) {
     sq_throwerror(vm, _SC(&quot;Unexpected exception while executing function 'cutscene_begin'&quot;));
@@ -1413,7 +1415,7 @@
     return 0;
   
   } catch(std::exception&amp; e) {
-    sq_throwerror(vm, e.what());
+    sq_throwerror(vm, string_to_wstring(e.what()).c_str());
     return SQ_ERROR;
   } catch(...) {
     sq_throwerror(vm, _SC(&quot;Unexpected exception while executing function 'cutscene_end'&quot;));
@@ -1451,7 +1453,7 @@
     return 0;
   
   } catch(std::exception&amp; e) {
-    sq_throwerror(vm, e.what());
+    sq_throwerror(vm, string_to_wstring(e.what()).c_str());
     return SQ_ERROR;
   } catch(...) {
     sq_throwerror(vm, _SC(&quot;Unexpected exception while executing function 'internal_fadeout_rgb'&quot;));
@@ -1474,7 +1476,7 @@
     return 0;
   
   } catch(std::exception&amp; e) {
-    sq_throwerror(vm, e.what());
+    sq_throwerror(vm, string_to_wstring(e.what()).c_str());
     return SQ_ERROR;
   } catch(...) {
     sq_throwerror(vm, _SC(&quot;Unexpected exception while executing function 'internal_fadein'&quot;));
@@ -1493,7 +1495,7 @@
     return 1;
   
   } catch(std::exception&amp; e) {
-    sq_throwerror(vm, e.what());
+    sq_throwerror(vm, string_to_wstring(e.what()).c_str());
     return SQ_ERROR;
   } catch(...) {
     sq_throwerror(vm, _SC(&quot;Unexpected exception while executing function 'render_mask_get'&quot;));
@@ -1516,7 +1518,7 @@
     return 0;
   
   } catch(std::exception&amp; e) {
-    sq_throwerror(vm, e.what());
+    sq_throwerror(vm, string_to_wstring(e.what()).c_str());
     return SQ_ERROR;
   } catch(...) {
     sq_throwerror(vm, _SC(&quot;Unexpected exception while executing function 'render_mask_set'&quot;));
@@ -1537,7 +1539,7 @@
   using namespace Wrapper;
 
   sq_pushroottable(v);
-  sq_pushstring(v, &quot;GameObject&quot;, -1);
+  sq_pushstring(v, _SC(&quot;GameObject&quot;), -1);
   if(SQ_FAILED(sq_get(v, -2))) {
     std::ostringstream msg;
     msg &lt;&lt; &quot;Couldn't resolved squirrel type 'GameObject'&quot;;
@@ -1563,7 +1565,7 @@
   using namespace Wrapper;
 
   sq_pushroottable(v);
-  sq_pushstring(v, &quot;TestObject&quot;, -1);
+  sq_pushstring(v, _SC(&quot;TestObject&quot;), -1);
   if(SQ_FAILED(sq_get(v, -2))) {
     std::ostringstream msg;
     msg &lt;&lt; &quot;Couldn't resolved squirrel type 'TestObject'&quot;;
@@ -1589,7 +1591,7 @@
   using namespace Wrapper;
 
   sq_pushroottable(v);
-  sq_pushstring(v, &quot;Player&quot;, -1);
+  sq_pushstring(v, _SC(&quot;Player&quot;), -1);
   if(SQ_FAILED(sq_get(v, -2))) {
     std::ostringstream msg;
     msg &lt;&lt; &quot;Couldn't resolved squirrel type 'Player'&quot;;
@@ -1615,7 +1617,7 @@
   using namespace Wrapper;
 
   sq_pushroottable(v);
-  sq_pushstring(v, &quot;ScriptableObject&quot;, -1);
+  sq_pushstring(v, _SC(&quot;ScriptableObject&quot;), -1);
   if(SQ_FAILED(sq_get(v, -2))) {
     std::ostringstream msg;
     msg &lt;&lt; &quot;Couldn't resolved squirrel type 'ScriptableObject'&quot;;
@@ -1640,368 +1642,368 @@
 {
   using namespace Wrapper;
 
-  sq_pushstring(v, &quot;VCENTER&quot;, -1);
+  sq_pushstring(v, _SC(&quot;VCENTER&quot;), -1);
   sq_pushinteger(v, 0);
   if(SQ_FAILED(sq_createslot(v, -3))) {
     throw SquirrelError(v, &quot;Couldn't register constant 'VCENTER'&quot;);
   }
 
-  sq_pushstring(v, &quot;LEFT&quot;, -1);
+  sq_pushstring(v, _SC(&quot;LEFT&quot;), -1);
   sq_pushinteger(v, 1);
   if(SQ_FAILED(sq_createslot(v, -3))) {
     throw SquirrelError(v, &quot;Couldn't register constant 'LEFT'&quot;);
   }
 
-  sq_pushstring(v, &quot;RIGHT&quot;, -1);
+  sq_pushstring(v, _SC(&quot;RIGHT&quot;), -1);
   sq_pushinteger(v, 2);
   if(SQ_FAILED(sq_createslot(v, -3))) {
     throw SquirrelError(v, &quot;Couldn't register constant 'RIGHT'&quot;);
   }
 
-  sq_pushstring(v, &quot;HCENTER&quot;, -1);
+  sq_pushstring(v, _SC(&quot;HCENTER&quot;), -1);
   sq_pushinteger(v, 0);
   if(SQ_FAILED(sq_createslot(v, -3))) {
     throw SquirrelError(v, &quot;Couldn't register constant 'HCENTER'&quot;);
   }
 
-  sq_pushstring(v, &quot;TOP&quot;, -1);
+  sq_pushstring(v, _SC(&quot;TOP&quot;), -1);
   sq_pushinteger(v, 16);
   if(SQ_FAILED(sq_createslot(v, -3))) {
     throw SquirrelError(v, &quot;Couldn't register constant 'TOP'&quot;);
   }
 
-  sq_pushstring(v, &quot;BOTTOM&quot;, -1);
+  sq_pushstring(v, _SC(&quot;BOTTOM&quot;), -1);
   sq_pushinteger(v, 32);
   if(SQ_FAILED(sq_createslot(v, -3))) {
     throw SquirrelError(v, &quot;Couldn't register constant 'BOTTOM'&quot;);
   }
 
-  sq_pushstring(v, &quot;set_sector&quot;, -1);
+  sq_pushstring(v, _SC(&quot;set_sector&quot;), -1);
   sq_newclosure(v, &amp;set_sector_wrapper, 0);
   if(SQ_FAILED(sq_createslot(v, -3))) {
     throw SquirrelError(v, &quot;Couldn't register function 'set_sector'&quot;);
   }
 
-  sq_pushstring(v, &quot;play_music&quot;, -1);
+  sq_pushstring(v, _SC(&quot;play_music&quot;), -1);
   sq_newclosure(v, &amp;play_music_wrapper, 0);
   if(SQ_FAILED(sq_createslot(v, -3))) {
     throw SquirrelError(v, &quot;Couldn't register function 'play_music'&quot;);
   }
 
-  sq_pushstring(v, &quot;stop_music&quot;, -1);
+  sq_pushstring(v, _SC(&quot;stop_music&quot;), -1);
   sq_newclosure(v, &amp;stop_music_wrapper, 0);
   if(SQ_FAILED(sq_createslot(v, -3))) {
     throw SquirrelError(v, &quot;Couldn't register function 'stop_music'&quot;);
   }
 
-  sq_pushstring(v, &quot;play_sound&quot;, -1);
+  sq_pushstring(v, _SC(&quot;play_sound&quot;), -1);
   sq_newclosure(v, &amp;play_sound_wrapper, 0);
   if(SQ_FAILED(sq_createslot(v, -3))) {
     throw SquirrelError(v, &quot;Couldn't register function 'play_sound'&quot;);
   }
 
-  sq_pushstring(v, &quot;caption_add&quot;, -1);
+  sq_pushstring(v, _SC(&quot;caption_add&quot;), -1);
   sq_newclosure(v, &amp;caption_add_wrapper, 0);
   if(SQ_FAILED(sq_createslot(v, -3))) {
     throw SquirrelError(v, &quot;Couldn't register function 'caption_add'&quot;);
   }
 
-  sq_pushstring(v, &quot;caption_clear&quot;, -1);
+  sq_pushstring(v, _SC(&quot;caption_clear&quot;), -1);
   sq_newclosure(v, &amp;caption_clear_wrapper, 0);
   if(SQ_FAILED(sq_createslot(v, -3))) {
     throw SquirrelError(v, &quot;Couldn't register function 'caption_clear'&quot;);
   }
 
-  sq_pushstring(v, &quot;caption_end&quot;, -1);
+  sq_pushstring(v, _SC(&quot;caption_end&quot;), -1);
   sq_newclosure(v, &amp;caption_end_wrapper, 0);
   if(SQ_FAILED(sq_createslot(v, -3))) {
     throw SquirrelError(v, &quot;Couldn't register function 'caption_end'&quot;);
   }
 
-  sq_pushstring(v, &quot;camera_set_active&quot;, -1);
+  sq_pushstring(v, _SC(&quot;camera_set_active&quot;), -1);
   sq_newclosure(v, &amp;camera_set_active_wrapper, 0);
   if(SQ_FAILED(sq_createslot(v, -3))) {
     throw SquirrelError(v, &quot;Couldn't register function 'camera_set_active'&quot;);
   }
 
-  sq_pushstring(v, &quot;camera_continue_path&quot;, -1);
+  sq_pushstring(v, _SC(&quot;camera_continue_path&quot;), -1);
   sq_newclosure(v, &amp;camera_continue_path_wrapper, 0);
   if(SQ_FAILED(sq_createslot(v, -3))) {
     throw SquirrelError(v, &quot;Couldn't register function 'camera_continue_path'&quot;);
   }
 
-  sq_pushstring(v, &quot;camera_begin_path&quot;, -1);
+  sq_pushstring(v, _SC(&quot;camera_begin_path&quot;), -1);
   sq_newclosure(v, &amp;camera_begin_path_wrapper, 0);
   if(SQ_FAILED(sq_createslot(v, -3))) {
     throw SquirrelError(v, &quot;Couldn't register function 'camera_begin_path'&quot;);
   }
 
-  sq_pushstring(v, &quot;camera_add_point&quot;, -1);
+  sq_pushstring(v, _SC(&quot;camera_add_point&quot;), -1);
   sq_newclosure(v, &amp;camera_add_point_wrapper, 0);
   if(SQ_FAILED(sq_createslot(v, -3))) {
     throw SquirrelError(v, &quot;Couldn't register function 'camera_add_point'&quot;);
   }
 
-  sq_pushstring(v, &quot;camera_end_path&quot;, -1);
+  sq_pushstring(v, _SC(&quot;camera_end_path&quot;), -1);
   sq_newclosure(v, &amp;camera_end_path_wrapper, 0);
   if(SQ_FAILED(sq_createslot(v, -3))) {
     throw SquirrelError(v, &quot;Couldn't register function 'camera_end_path'&quot;);
   }
 
-  sq_pushstring(v, &quot;camera_set_pos&quot;, -1);
+  sq_pushstring(v, _SC(&quot;camera_set_pos&quot;), -1);
   sq_newclosure(v, &amp;camera_set_pos_wrapper, 0);
   if(SQ_FAILED(sq_createslot(v, -3))) {
     throw SquirrelError(v, &quot;Couldn't register function 'camera_set_pos'&quot;);
   }
 
-  sq_pushstring(v, &quot;camera_set_zoom&quot;, -1);
+  sq_pushstring(v, _SC(&quot;camera_set_zoom&quot;), -1);
   sq_newclosure(v, &amp;camera_set_zoom_wrapper, 0);
   if(SQ_FAILED(sq_createslot(v, -3))) {
     throw SquirrelError(v, &quot;Couldn't register function 'camera_set_zoom'&quot;);
   }
 
-  sq_pushstring(v, &quot;set_controller_help_active&quot;, -1);
+  sq_pushstring(v, _SC(&quot;set_controller_help_active&quot;), -1);
   sq_newclosure(v, &amp;set_controller_help_active_wrapper, 0);
   if(SQ_FAILED(sq_createslot(v, -3))) {
     throw SquirrelError(v, &quot;Couldn't register function 'set_controller_help_active'&quot;);
   }
 
-  sq_pushstring(v, &quot;dialog_show&quot;, -1);
+  sq_pushstring(v, _SC(&quot;dialog_show&quot;), -1);
   sq_newclosure(v, &amp;dialog_show_wrapper, 0);
   if(SQ_FAILED(sq_createslot(v, -3))) {
     throw SquirrelError(v, &quot;Couldn't register function 'dialog_show'&quot;);
   }
 
-  sq_pushstring(v, &quot;wait_for_dialog&quot;, -1);
+  sq_pushstring(v, _SC(&quot;wait_for_dialog&quot;), -1);
   sq_newclosure(v, &amp;wait_for_dialog_wrapper, 0);
   if(SQ_FAILED(sq_createslot(v, -3))) {
     throw SquirrelError(v, &quot;Couldn't register function 'wait_for_dialog'&quot;);
   }
 
-  sq_pushstring(v, &quot;wait_for_fade&quot;, -1);
+  sq_pushstring(v, _SC(&quot;wait_for_fade&quot;), -1);
   sq_newclosure(v, &amp;wait_for_fade_wrapper, 0);
   if(SQ_FAILED(sq_createslot(v, -3))) {
     throw SquirrelError(v, &quot;Couldn't register function 'wait_for_fade'&quot;);
   }
 
-  sq_pushstring(v, &quot;wait_for_camera&quot;, -1);
+  sq_pushstring(v, _SC(&quot;wait_for_camera&quot;), -1);
   sq_newclosure(v, &amp;wait_for_camera_wrapper, 0);
   if(SQ_FAILED(sq_createslot(v, -3))) {
     throw SquirrelError(v, &quot;Couldn't register function 'wait_for_camera'&quot;);
   }
 
-  sq_pushstring(v, &quot;conversation_add&quot;, -1);
+  sq_pushstring(v, _SC(&quot;conversation_add&quot;), -1);
   sq_newclosure(v, &amp;conversation_add_wrapper, 0);
   if(SQ_FAILED(sq_createslot(v, -3))) {
     throw SquirrelError(v, &quot;Couldn't register function 'conversation_add'&quot;);
   }
 
-  sq_pushstring(v, &quot;conversation_add2&quot;, -1);
+  sq_pushstring(v, _SC(&quot;conversation_add2&quot;), -1);
   sq_newclosure(v, &amp;conversation_add2_wrapper, 0);
   if(SQ_FAILED(sq_createslot(v, -3))) {
     throw SquirrelError(v, &quot;Couldn't register function 'conversation_add2'&quot;);
   }
 
-  sq_pushstring(v, &quot;conversation_show&quot;, -1);
+  sq_pushstring(v, _SC(&quot;conversation_show&quot;), -1);
   sq_newclosure(v, &amp;conversation_show_wrapper, 0);
   if(SQ_FAILED(sq_createslot(v, -3))) {
     throw SquirrelError(v, &quot;Couldn't register function 'conversation_show'&quot;);
   }
 
-  sq_pushstring(v, &quot;conversation_get_selection&quot;, -1);
+  sq_pushstring(v, _SC(&quot;conversation_get_selection&quot;), -1);
   sq_newclosure(v, &amp;conversation_get_selection_wrapper, 0);
   if(SQ_FAILED(sq_createslot(v, -3))) {
     throw SquirrelError(v, &quot;Couldn't register function 'conversation_get_selection'&quot;);
   }
 
-  sq_pushstring(v, &quot;wait_for_conversation&quot;, -1);
+  sq_pushstring(v, _SC(&quot;wait_for_conversation&quot;), -1);
   sq_newclosure(v, &amp;wait_for_conversation_wrapper, 0);
   if(SQ_FAILED(sq_createslot(v, -3))) {
     throw SquirrelError(v, &quot;Couldn't register function 'wait_for_conversation'&quot;);
   }
 
-  sq_pushstring(v, &quot;add_objective&quot;, -1);
+  sq_pushstring(v, _SC(&quot;add_objective&quot;), -1);
   sq_newclosure(v, &amp;add_objective_wrapper, 0);
   if(SQ_FAILED(sq_createslot(v, -3))) {
     throw SquirrelError(v, &quot;Couldn't register function 'add_objective'&quot;);
   }
 
-  sq_pushstring(v, &quot;objective_complete&quot;, -1);
+  sq_pushstring(v, _SC(&quot;objective_complete&quot;), -1);
   sq_newclosure(v, &amp;objective_complete_wrapper, 0);
   if(SQ_FAILED(sq_createslot(v, -3))) {
     throw SquirrelError(v, &quot;Couldn't register function 'objective_complete'&quot;);
   }
 
-  sq_pushstring(v, &quot;is_objective_given&quot;, -1);
+  sq_pushstring(v, _SC(&quot;is_objective_given&quot;), -1);
   sq_newclosure(v, &amp;is_objective_given_wrapper, 0);
   if(SQ_FAILED(sq_createslot(v, -3))) {
     throw SquirrelError(v, &quot;Couldn't register function 'is_objective_given'&quot;);
   }
 
-  sq_pushstring(v, &quot;is_objective_complete&quot;, -1);
+  sq_pushstring(v, _SC(&quot;is_objective_complete&quot;), -1);
   sq_newclosure(v, &amp;is_objective_complete_wrapper, 0);
   if(SQ_FAILED(sq_createslot(v, -3))) {
     throw SquirrelError(v, &quot;Couldn't register function 'is_objective_complete'&quot;);
   }
 
-  sq_pushstring(v, &quot;run_before&quot;, -1);
+  sq_pushstring(v, _SC(&quot;run_before&quot;), -1);
   sq_newclosure(v, &amp;run_before_wrapper, 0);
   if(SQ_FAILED(sq_createslot(v, -3))) {
     throw SquirrelError(v, &quot;Couldn't register function 'run_before'&quot;);
   }
 
-  sq_pushstring(v, &quot;save_state&quot;, -1);
+  sq_pushstring(v, _SC(&quot;save_state&quot;), -1);
   sq_newclosure(v, &amp;save_state_wrapper, 0);
   if(SQ_FAILED(sq_createslot(v, -3))) {
     throw SquirrelError(v, &quot;Couldn't register function 'save_state'&quot;);
   }
 
-  sq_pushstring(v, &quot;load_state&quot;, -1);
+  sq_pushstring(v, _SC(&quot;load_state&quot;), -1);
   sq_newclosure(v, &amp;load_state_wrapper, 0);
   if(SQ_FAILED(sq_createslot(v, -3))) {
     throw SquirrelError(v, &quot;Couldn't register function 'load_state'&quot;);
   }
 
-  sq_pushstring(v, &quot;list_objects&quot;, -1);
+  sq_pushstring(v, _SC(&quot;list_objects&quot;), -1);
   sq_newclosure(v, &amp;list_objects_wrapper, 0);
   if(SQ_FAILED(sq_createslot(v, -3))) {
     throw SquirrelError(v, &quot;Couldn't register function 'list_objects'&quot;);
   }
 
-  sq_pushstring(v, &quot;set_debug&quot;, -1);
+  sq_pushstring(v, _SC(&quot;set_debug&quot;), -1);
   sq_newclosure(v, &amp;set_debug_wrapper, 0);
   if(SQ_FAILED(sq_createslot(v, -3))) {
     throw SquirrelError(v, &quot;Couldn't register function 'set_debug'&quot;);
   }
 
-  sq_pushstring(v, &quot;get_debug&quot;, -1);
+  sq_pushstring(v, _SC(&quot;get_debug&quot;), -1);
   sq_newclosure(v, &amp;get_debug_wrapper, 0);
   if(SQ_FAILED(sq_createslot(v, -3))) {
     throw SquirrelError(v, &quot;Couldn't register function 'get_debug'&quot;);
   }
 
-  sq_pushstring(v, &quot;get_game_speed&quot;, -1);
+  sq_pushstring(v, _SC(&quot;get_game_speed&quot;), -1);
   sq_newclosure(v, &amp;get_game_speed_wrapper, 0);
   if(SQ_FAILED(sq_createslot(v, -3))) {
     throw SquirrelError(v, &quot;Couldn't register function 'get_game_speed'&quot;);
   }
 
-  sq_pushstring(v, &quot;set_game_speed&quot;, -1);
+  sq_pushstring(v, _SC(&quot;set_game_speed&quot;), -1);
   sq_newclosure(v, &amp;set_game_speed_wrapper, 0);
   if(SQ_FAILED(sq_createslot(v, -3))) {
     throw SquirrelError(v, &quot;Couldn't register function 'set_game_speed'&quot;);
   }
 
-  sq_pushstring(v, &quot;wait&quot;, -1);
+  sq_pushstring(v, _SC(&quot;wait&quot;), -1);
   sq_newclosure(v, &amp;wait_wrapper, 0);
   if(SQ_FAILED(sq_createslot(v, -3))) {
     throw SquirrelError(v, &quot;Couldn't register function 'wait'&quot;);
   }
 
-  sq_pushstring(v, &quot;display&quot;, -1);
+  sq_pushstring(v, _SC(&quot;display&quot;), -1);
   sq_newclosure(v, &amp;display_wrapper, 0);
   if(SQ_FAILED(sq_createslot(v, -3))) {
     throw SquirrelError(v, &quot;Couldn't register function 'display'&quot;);
   }
 
-  sq_pushstring(v, &quot;println&quot;, -1);
+  sq_pushstring(v, _SC(&quot;println&quot;), -1);
   sq_newclosure(v, &amp;println_wrapper, 0);
   if(SQ_FAILED(sq_createslot(v, -3))) {
     throw SquirrelError(v, &quot;Couldn't register function 'println'&quot;);
   }
 
-  sq_pushstring(v, &quot;set_console_font&quot;, -1);
+  sq_pushstring(v, _SC(&quot;set_console_font&quot;), -1);
   sq_newclosure(v, &amp;set_console_font_wrapper, 0);
   if(SQ_FAILED(sq_createslot(v, -3))) {
     throw SquirrelError(v, &quot;Couldn't register function 'set_console_font'&quot;);
   }
 
-  sq_pushstring(v, &quot;set_gamma&quot;, -1);
+  sq_pushstring(v, _SC(&quot;set_gamma&quot;), -1);
   sq_newclosure(v, &amp;set_gamma_wrapper, 0);
   if(SQ_FAILED(sq_createslot(v, -3))) {
     throw SquirrelError(v, &quot;Couldn't register function 'set_gamma'&quot;);
   }
 
-  sq_pushstring(v, &quot;set_gamma_rgb&quot;, -1);
+  sq_pushstring(v, _SC(&quot;set_gamma_rgb&quot;), -1);
   sq_newclosure(v, &amp;set_gamma_rgb_wrapper, 0);
   if(SQ_FAILED(sq_createslot(v, -3))) {
     throw SquirrelError(v, &quot;Couldn't register function 'set_gamma_rgb'&quot;);
   }
 
-  sq_pushstring(v, &quot;show_config&quot;, -1);
+  sq_pushstring(v, _SC(&quot;show_config&quot;), -1);
   sq_newclosure(v, &amp;show_config_wrapper, 0);
   if(SQ_FAILED(sq_createslot(v, -3))) {
     throw SquirrelError(v, &quot;Couldn't register function 'show_config'&quot;);
   }
 
-  sq_pushstring(v, &quot;cutscene_begin&quot;, -1);
+  sq_pushstring(v, _SC(&quot;cutscene_begin&quot;), -1);
   sq_newclosure(v, &amp;cutscene_begin_wrapper, 0);
   if(SQ_FAILED(sq_createslot(v, -3))) {
     throw SquirrelError(v, &quot;Couldn't register function 'cutscene_begin'&quot;);
   }
 
-  sq_pushstring(v, &quot;cutscene_end&quot;, -1);
+  sq_pushstring(v, _SC(&quot;cutscene_end&quot;), -1);
   sq_newclosure(v, &amp;cutscene_end_wrapper, 0);
   if(SQ_FAILED(sq_createslot(v, -3))) {
     throw SquirrelError(v, &quot;Couldn't register function 'cutscene_end'&quot;);
   }
 
-  sq_pushstring(v, &quot;internal_fadeout_rgb&quot;, -1);
+  sq_pushstring(v, _SC(&quot;internal_fadeout_rgb&quot;), -1);
   sq_newclosure(v, &amp;internal_fadeout_rgb_wrapper, 0);
   if(SQ_FAILED(sq_createslot(v, -3))) {
     throw SquirrelError(v, &quot;Couldn't register function 'internal_fadeout_rgb'&quot;);
   }
 
-  sq_pushstring(v, &quot;internal_fadein&quot;, -1);
+  sq_pushstring(v, _SC(&quot;internal_fadein&quot;), -1);
   sq_newclosure(v, &amp;internal_fadein_wrapper, 0);
   if(SQ_FAILED(sq_createslot(v, -3))) {
     throw SquirrelError(v, &quot;Couldn't register function 'internal_fadein'&quot;);
   }
 
-  sq_pushstring(v, &quot;render_mask_get&quot;, -1);
+  sq_pushstring(v, _SC(&quot;render_mask_get&quot;), -1);
   sq_newclosure(v, &amp;render_mask_get_wrapper, 0);
   if(SQ_FAILED(sq_createslot(v, -3))) {
     throw SquirrelError(v, &quot;Couldn't register function 'render_mask_get'&quot;);
   }
 
-  sq_pushstring(v, &quot;render_mask_set&quot;, -1);
+  sq_pushstring(v, _SC(&quot;render_mask_set&quot;), -1);
   sq_newclosure(v, &amp;render_mask_set_wrapper, 0);
   if(SQ_FAILED(sq_createslot(v, -3))) {
     throw SquirrelError(v, &quot;Couldn't register function 'render_mask_set'&quot;);
   }
 
-  sq_pushstring(v, &quot;spawn_object&quot;, -1);
+  sq_pushstring(v, _SC(&quot;spawn_object&quot;), -1);
   sq_newclosure(v, &amp;spawn_object_wrapper, 0);
   if(SQ_FAILED(sq_createslot(v, -3))) {
     throw SquirrelError(v, &quot;Couldn't register function 'spawn_object'&quot;);
   }
 
   // Register class GameObject
-  sq_pushstring(v, &quot;GameObject&quot;, -1);
+  sq_pushstring(v, _SC(&quot;GameObject&quot;), -1);
   if(sq_newclass(v, SQFalse) &lt; 0) {
     std::ostringstream msg;
     msg &lt;&lt; &quot;Couldn't create new class 'GameObject'&quot;;
     throw SquirrelError(v, msg.str());
   }
-  sq_pushstring(v, &quot;get_name&quot;, -1);
+  sq_pushstring(v, _SC(&quot;get_name&quot;), -1);
   sq_newclosure(v, &amp;GameObject_get_name_wrapper, 0);
   if(SQ_FAILED(sq_createslot(v, -3))) {
     throw SquirrelError(v, &quot;Couldn't register function 'get_name'&quot;);
   }
 
-  sq_pushstring(v, &quot;remove&quot;, -1);
+  sq_pushstring(v, _SC(&quot;remove&quot;), -1);
   sq_newclosure(v, &amp;GameObject_remove_wrapper, 0);
   if(SQ_FAILED(sq_createslot(v, -3))) {
     throw SquirrelError(v, &quot;Couldn't register function 'remove'&quot;);
   }
 
-  sq_pushstring(v, &quot;set_active&quot;, -1);
+  sq_pushstring(v, _SC(&quot;set_active&quot;), -1);
   sq_newclosure(v, &amp;GameObject_set_active_wrapper, 0);
   if(SQ_FAILED(sq_createslot(v, -3))) {
     throw SquirrelError(v, &quot;Couldn't register function 'set_active'&quot;);
   }
 
-  sq_pushstring(v, &quot;set_parent&quot;, -1);
+  sq_pushstring(v, _SC(&quot;set_parent&quot;), -1);
   sq_newclosure(v, &amp;GameObject_set_parent_wrapper, 0);
   if(SQ_FAILED(sq_createslot(v, -3))) {
     throw SquirrelError(v, &quot;Couldn't register function 'set_parent'&quot;);
@@ -2012,39 +2014,39 @@
   }
 
   // Register class TestObject
-  sq_pushstring(v, &quot;TestObject&quot;, -1);
-  sq_pushstring(v, &quot;GameObject&quot;, -1);
+  sq_pushstring(v, _SC(&quot;TestObject&quot;), -1);
+  sq_pushstring(v, _SC(&quot;GameObject&quot;), -1);
   sq_get(v, -3);
   if(sq_newclass(v, SQTrue) &lt; 0) {
     std::ostringstream msg;
     msg &lt;&lt; &quot;Couldn't create new class 'TestObject'&quot;;
     throw SquirrelError(v, msg.str());
   }
-  sq_pushstring(v, &quot;set_sprite&quot;, -1);
+  sq_pushstring(v, _SC(&quot;set_sprite&quot;), -1);
   sq_newclosure(v, &amp;TestObject_set_sprite_wrapper, 0);
   if(SQ_FAILED(sq_createslot(v, -3))) {
     throw SquirrelError(v, &quot;Couldn't register function 'set_sprite'&quot;);
   }
 
-  sq_pushstring(v, &quot;set_action&quot;, -1);
+  sq_pushstring(v, _SC(&quot;set_action&quot;), -1);
   sq_newclosure(v, &amp;TestObject_set_action_wrapper, 0);
   if(SQ_FAILED(sq_createslot(v, -3))) {
     throw SquirrelError(v, &quot;Couldn't register function 'set_action'&quot;);
   }
 
-  sq_pushstring(v, &quot;set_pos&quot;, -1);
+  sq_pushstring(v, _SC(&quot;set_pos&quot;), -1);
   sq_newclosure(v, &amp;TestObject_set_pos_wrapper, 0);
   if(SQ_FAILED(sq_createslot(v, -3))) {
     throw SquirrelError(v, &quot;Couldn't register function 'set_pos'&quot;);
   }
 
-  sq_pushstring(v, &quot;set_vflip&quot;, -1);
+  sq_pushstring(v, _SC(&quot;set_vflip&quot;), -1);
   sq_newclosure(v, &amp;TestObject_set_vflip_wrapper, 0);
   if(SQ_FAILED(sq_createslot(v, -3))) {
     throw SquirrelError(v, &quot;Couldn't register function 'set_vflip'&quot;);
   }
 
-  sq_pushstring(v, &quot;attach&quot;, -1);
+  sq_pushstring(v, _SC(&quot;attach&quot;), -1);
   sq_newclosure(v, &amp;TestObject_attach_wrapper, 0);
   if(SQ_FAILED(sq_createslot(v, -3))) {
     throw SquirrelError(v, &quot;Couldn't register function 'attach'&quot;);
@@ -2055,21 +2057,21 @@
   }
 
   // Register class Player
-  sq_pushstring(v, &quot;Player&quot;, -1);
-  sq_pushstring(v, &quot;GameObject&quot;, -1);
+  sq_pushstring(v, _SC(&quot;Player&quot;), -1);
+  sq_pushstring(v, _SC(&quot;GameObject&quot;), -1);
   sq_get(v, -3);
   if(sq_newclass(v, SQTrue) &lt; 0) {
     std::ostringstream msg;
     msg &lt;&lt; &quot;Couldn't create new class 'Player'&quot;;
     throw SquirrelError(v, msg.str());
   }
-  sq_pushstring(v, &quot;start_listening&quot;, -1);
+  sq_pushstring(v, _SC(&quot;start_listening&quot;), -1);
   sq_newclosure(v, &amp;Player_start_listening_wrapper, 0);
   if(SQ_FAILED(sq_createslot(v, -3))) {
     throw SquirrelError(v, &quot;Couldn't register function 'start_listening'&quot;);
   }
 
-  sq_pushstring(v, &quot;stop_listening&quot;, -1);
+  sq_pushstring(v, _SC(&quot;stop_listening&quot;), -1);
   sq_newclosure(v, &amp;Player_stop_listening_wrapper, 0);
   if(SQ_FAILED(sq_createslot(v, -3))) {
     throw SquirrelError(v, &quot;Couldn't register function 'stop_listening'&quot;);
@@ -2080,21 +2082,21 @@
   }
 
   // Register class ScriptableObject
-  sq_pushstring(v, &quot;ScriptableObject&quot;, -1);
-  sq_pushstring(v, &quot;GameObject&quot;, -1);
+  sq_pushstring(v, _SC(&quot;ScriptableObject&quot;), -1);
+  sq_pushstring(v, _SC(&quot;GameObject&quot;), -1);
   sq_get(v, -3);
   if(sq_newclass(v, SQTrue) &lt; 0) {
     std::ostringstream msg;
     msg &lt;&lt; &quot;Couldn't create new class 'ScriptableObject'&quot;;
     throw SquirrelError(v, msg.str());
   }
-  sq_pushstring(v, &quot;move_to&quot;, -1);
+  sq_pushstring(v, _SC(&quot;move_to&quot;), -1);
   sq_newclosure(v, &amp;ScriptableObject_move_to_wrapper, 0);
   if(SQ_FAILED(sq_createslot(v, -3))) {
     throw SquirrelError(v, &quot;Couldn't register function 'move_to'&quot;);
   }
 
-  sq_pushstring(v, &quot;start_flash&quot;, -1);
+  sq_pushstring(v, _SC(&quot;start_flash&quot;), -1);
   sq_newclosure(v, &amp;ScriptableObject_start_flash_wrapper, 0);
   if(SQ_FAILED(sq_createslot(v, -3))) {
     throw SquirrelError(v, &quot;Couldn't register function 'start_flash'&quot;);


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="001287.html">[Windstille-commit] r2267 - in trunk/windstille/src: . scripting
</A></li>
	<LI>Next message: <A HREF="001289.html">[Windstille-commit] r2269 - trunk/windstille/lib
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1288">[ date ]</a>
              <a href="thread.html#1288">[ thread ]</a>
              <a href="subject.html#1288">[ subject ]</a>
              <a href="author.html#1288">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/windstille-commit">More information about the Windstille-commit
mailing list</a><br>
</body></html>
