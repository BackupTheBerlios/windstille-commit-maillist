From grumbel at mail.berlios.de  Tue Feb  3 15:28:21 2009
From: grumbel at mail.berlios.de (grumbel at BerliOS)
Date: Tue, 3 Feb 2009 15:28:21 +0100
Subject: [Windstille-commit] r2386 - trunk/media/images/artwork
Message-ID: <200902031428.n13ESLI4013262@sheep.berlios.de>

Author: grumbel
Date: 2009-02-03 15:20:38 +0100 (Tue, 03 Feb 2009)
New Revision: 2386

Added:
   trunk/media/images/artwork/cave.xcf
   trunk/media/images/artwork/infobooth.xcf
   trunk/media/images/artwork/tiles.xcf
   trunk/media/images/artwork/trainstation.xcf
Log:
Some more graphics

Added: trunk/media/images/artwork/cave.xcf
===================================================================
(Binary files differ)


Property changes on: trunk/media/images/artwork/cave.xcf
___________________________________________________________________
Name: svn:mime-type
   + application/x-xcf

Added: trunk/media/images/artwork/infobooth.xcf
===================================================================
(Binary files differ)


Property changes on: trunk/media/images/artwork/infobooth.xcf
___________________________________________________________________
Name: svn:mime-type
   + application/x-xcf

Added: trunk/media/images/artwork/tiles.xcf
===================================================================
(Binary files differ)


Property changes on: trunk/media/images/artwork/tiles.xcf
___________________________________________________________________
Name: svn:mime-type
   + application/x-xcf

Added: trunk/media/images/artwork/trainstation.xcf
===================================================================
(Binary files differ)


Property changes on: trunk/media/images/artwork/trainstation.xcf
___________________________________________________________________
Name: svn:mime-type
   + application/x-xcf



From grumbel at mail.berlios.de  Tue Feb  3 18:49:50 2009
From: grumbel at mail.berlios.de (grumbel at BerliOS)
Date: Tue, 3 Feb 2009 18:49:50 +0100
Subject: [Windstille-commit] r2387 - trunk/media/images/artwork
Message-ID: <200902031749.n13HnoTi019177@sheep.berlios.de>

Author: grumbel
Date: 2009-02-03 18:45:06 +0100 (Tue, 03 Feb 2009)
New Revision: 2387

Added:
   trunk/media/images/artwork/hangar.xcf
   trunk/media/images/artwork/industrial.xcf
   trunk/media/images/artwork/saveroom.xcf
Log:
More sketches

Added: trunk/media/images/artwork/hangar.xcf
===================================================================
(Binary files differ)


Property changes on: trunk/media/images/artwork/hangar.xcf
___________________________________________________________________
Name: svn:mime-type
   + application/x-xcf

Added: trunk/media/images/artwork/industrial.xcf
===================================================================
(Binary files differ)


Property changes on: trunk/media/images/artwork/industrial.xcf
___________________________________________________________________
Name: svn:mime-type
   + application/x-xcf

Added: trunk/media/images/artwork/saveroom.xcf
===================================================================
(Binary files differ)


Property changes on: trunk/media/images/artwork/saveroom.xcf
___________________________________________________________________
Name: svn:mime-type
   + application/x-xcf



From grumbel at mail.berlios.de  Wed Feb  4 12:25:26 2009
From: grumbel at mail.berlios.de (grumbel at BerliOS)
Date: Wed, 4 Feb 2009 12:25:26 +0100
Subject: [Windstille-commit] r2388 - trunk/media/images/artwork
Message-ID: <200902041125.n14BPQuJ002569@sheep.berlios.de>

Author: grumbel
Date: 2009-02-04 12:23:48 +0100 (Wed, 04 Feb 2009)
New Revision: 2388

Added:
   trunk/media/images/artwork/cave2.xcf
   trunk/media/images/artwork/layerswitch.xcf
   trunk/media/images/artwork/trainstation-old.jpg
Log:
More artwork

Added: trunk/media/images/artwork/cave2.xcf
===================================================================
(Binary files differ)


Property changes on: trunk/media/images/artwork/cave2.xcf
___________________________________________________________________
Name: svn:mime-type
   + application/x-xcf

Added: trunk/media/images/artwork/layerswitch.xcf
===================================================================
(Binary files differ)


Property changes on: trunk/media/images/artwork/layerswitch.xcf
___________________________________________________________________
Name: svn:mime-type
   + application/x-xcf

Added: trunk/media/images/artwork/trainstation-old.jpg
===================================================================
(Binary files differ)


Property changes on: trunk/media/images/artwork/trainstation-old.jpg
___________________________________________________________________
Name: svn:mime-type
   + image/jpeg



From grumbel at mail.berlios.de  Wed Feb  4 12:29:12 2009
From: grumbel at mail.berlios.de (grumbel at BerliOS)
Date: Wed, 4 Feb 2009 12:29:12 +0100
Subject: [Windstille-commit] r2389 - in trunk/media/images: . artwork
	characters characters/misc unsorted
Message-ID: <200902041129.n14BTCpA002780@sheep.berlios.de>

Author: grumbel
Date: 2009-02-04 12:25:55 +0100 (Wed, 04 Feb 2009)
New Revision: 2389

Added:
   trunk/media/images/characters/
   trunk/media/images/characters/misc/
   trunk/media/images/characters/misc/command3.xcf
   trunk/media/images/characters/misc/commander.png
   trunk/media/images/characters/misc/commander4.xcf
   trunk/media/images/characters/misc/commander5.xcf
   trunk/media/images/characters/misc/commander6.xcf
   trunk/media/images/characters/misc/worker.xcf
   trunk/media/images/characters/misc/worker2.xcf
   trunk/media/images/characters/misc/yagor.xcf
   trunk/media/images/locations/
Removed:
   trunk/media/images/unsorted/command3.xcf
   trunk/media/images/unsorted/commander.png
   trunk/media/images/unsorted/commander5.xcf
   trunk/media/images/unsorted/commander6.xcf
   trunk/media/images/unsorted/worker.xcf
   trunk/media/images/unsorted/worker2.xcf
   trunk/media/images/unsorted/yagor.xcf
Modified:
   trunk/media/images/artwork/saveroom.xcf
Log:
Trying to organize graphics somewhat better

Modified: trunk/media/images/artwork/saveroom.xcf
===================================================================
(Binary files differ)

Copied: trunk/media/images/characters/misc/command3.xcf (from rev 2387, trunk/media/images/unsorted/command3.xcf)


Property changes on: trunk/media/images/characters/misc/command3.xcf
___________________________________________________________________
Name: svn:mime-type
   + application/x-xcf
Name: svn:mergeinfo
   + 

Copied: trunk/media/images/characters/misc/commander.png (from rev 2387, trunk/media/images/unsorted/commander.png)


Property changes on: trunk/media/images/characters/misc/commander.png
___________________________________________________________________
Name: svn:mime-type
   + image/png
Name: svn:mergeinfo
   + 

Copied: trunk/media/images/characters/misc/commander4.xcf (from rev 2385, trunk/media/images/unsorted/commander4.xcf)

Copied: trunk/media/images/characters/misc/commander5.xcf (from rev 2387, trunk/media/images/unsorted/commander5.xcf)


Property changes on: trunk/media/images/characters/misc/commander5.xcf
___________________________________________________________________
Name: svn:mime-type
   + application/x-xcf
Name: svn:mergeinfo
   + 

Copied: trunk/media/images/characters/misc/commander6.xcf (from rev 2387, trunk/media/images/unsorted/commander6.xcf)


Property changes on: trunk/media/images/characters/misc/commander6.xcf
___________________________________________________________________
Name: svn:mime-type
   + application/x-xcf
Name: svn:mergeinfo
   + 

Copied: trunk/media/images/characters/misc/worker.xcf (from rev 2387, trunk/media/images/unsorted/worker.xcf)


Property changes on: trunk/media/images/characters/misc/worker.xcf
___________________________________________________________________
Name: svn:mime-type
   + application/x-xcf
Name: svn:mergeinfo
   + 

Copied: trunk/media/images/characters/misc/worker2.xcf (from rev 2387, trunk/media/images/unsorted/worker2.xcf)


Property changes on: trunk/media/images/characters/misc/worker2.xcf
___________________________________________________________________
Name: svn:mime-type
   + application/x-xcf
Name: svn:mergeinfo
   + 

Copied: trunk/media/images/characters/misc/yagor.xcf (from rev 2387, trunk/media/images/unsorted/yagor.xcf)


Property changes on: trunk/media/images/characters/misc/yagor.xcf
___________________________________________________________________
Name: svn:mime-type
   + application/x-xcf
Name: svn:mergeinfo
   + 

Deleted: trunk/media/images/unsorted/command3.xcf
===================================================================
(Binary files differ)

Deleted: trunk/media/images/unsorted/commander.png
===================================================================
(Binary files differ)

Deleted: trunk/media/images/unsorted/commander5.xcf
===================================================================
(Binary files differ)

Deleted: trunk/media/images/unsorted/commander6.xcf
===================================================================
(Binary files differ)

Deleted: trunk/media/images/unsorted/worker.xcf
===================================================================
(Binary files differ)

Deleted: trunk/media/images/unsorted/worker2.xcf
===================================================================
(Binary files differ)

Deleted: trunk/media/images/unsorted/yagor.xcf
===================================================================
(Binary files differ)



From grumbel at mail.berlios.de  Wed Feb  4 12:36:23 2009
From: grumbel at mail.berlios.de (grumbel at BerliOS)
Date: Wed, 4 Feb 2009 12:36:23 +0100
Subject: [Windstille-commit] r2390 - in trunk/media/images: .
	characters/misc creatures locations misc objects tiles unsorted
Message-ID: <200902041136.n14BaNxh008577@sheep.berlios.de>

Author: grumbel
Date: 2009-02-04 12:36:21 +0100 (Wed, 04 Feb 2009)
New Revision: 2390

Added:
   trunk/media/images/characters/misc/anime.xcf
   trunk/media/images/characters/misc/barkeeper.xcf
   trunk/media/images/characters/misc/commander2.xcf
   trunk/media/images/creatures/
   trunk/media/images/creatures/3spider.jpg
   trunk/media/images/creatures/3spider.tga
   trunk/media/images/creatures/panzer.jpg
   trunk/media/images/creatures/panzer.jpg.tga
   trunk/media/images/creatures/spider-3d.jpg
   trunk/media/images/creatures/spider-3d.tga
   trunk/media/images/locations/airport.xcf
   trunk/media/images/locations/airportbar.xcf
   trunk/media/images/locations/airportshop.xcf
   trunk/media/images/locations/elevatorbase.xcf
   trunk/media/images/locations/elevatorhead.xcf
   trunk/media/images/locations/elevatorsketch.xcf
   trunk/media/images/locations/elevatorsketchcolor.xcf
   trunk/media/images/locations/gamescreen.xcf
   trunk/media/images/locations/gamescreen1.xcf
   trunk/media/images/locations/gamescreen2.xcf
   trunk/media/images/locations/gamescreen3.xcf
   trunk/media/images/locations/gamescreen4.xcf
   trunk/media/images/locations/generator.xcf
   trunk/media/images/locations/level.xcf
   trunk/media/images/locations/minesketch.xcf
   trunk/media/images/locations/shuttle.xcf
   trunk/media/images/objects/arboretum.xcf
   trunk/media/images/objects/bar2.xcf
Removed:
   trunk/media/images/misc/elevatorbase.xcf
   trunk/media/images/misc/elevatorhead.xcf
   trunk/media/images/misc/elevatorsketch.xcf
   trunk/media/images/misc/elevatorsketchcolor.xcf
   trunk/media/images/misc/generator.xcf
   trunk/media/images/misc/minesketch.xcf
   trunk/media/images/tiles/airport.xcf
   trunk/media/images/tiles/airportbar.xcf
   trunk/media/images/tiles/airportshop.xcf
   trunk/media/images/tiles/arboretum.xcf
   trunk/media/images/tiles/bar2.xcf
   trunk/media/images/tiles/shuttle.xcf
   trunk/media/images/unsorted/3spider.jpg
   trunk/media/images/unsorted/3spider.tga
   trunk/media/images/unsorted/anime.xcf
   trunk/media/images/unsorted/barkeeper.xcf
   trunk/media/images/unsorted/commander2.xcf
   trunk/media/images/unsorted/commander4.xcf
   trunk/media/images/unsorted/gamescreen.xcf
   trunk/media/images/unsorted/gamescreen1.xcf
   trunk/media/images/unsorted/gamescreen2.xcf
   trunk/media/images/unsorted/gamescreen3.xcf
   trunk/media/images/unsorted/gamescreen4.xcf
   trunk/media/images/unsorted/level.xcf
   trunk/media/images/unsorted/panzer.jpg
   trunk/media/images/unsorted/panzer.jpg.tga
   trunk/media/images/unsorted/spider-3d.jpg
   trunk/media/images/unsorted/spider-3d.tga
Log:
More reorganisation

Copied: trunk/media/images/characters/misc/anime.xcf (from rev 2387, trunk/media/images/unsorted/anime.xcf)


Property changes on: trunk/media/images/characters/misc/anime.xcf
___________________________________________________________________
Name: svn:mime-type
   + application/x-xcf
Name: svn:mergeinfo
   + 

Copied: trunk/media/images/characters/misc/barkeeper.xcf (from rev 2387, trunk/media/images/unsorted/barkeeper.xcf)


Property changes on: trunk/media/images/characters/misc/barkeeper.xcf
___________________________________________________________________
Name: svn:mime-type
   + application/x-xcf
Name: svn:mergeinfo
   + 

Copied: trunk/media/images/characters/misc/commander2.xcf (from rev 2387, trunk/media/images/unsorted/commander2.xcf)


Property changes on: trunk/media/images/characters/misc/commander2.xcf
___________________________________________________________________
Name: svn:mime-type
   + application/x-xcf
Name: svn:mergeinfo
   + 

Copied: trunk/media/images/creatures/3spider.jpg (from rev 2387, trunk/media/images/unsorted/3spider.jpg)


Property changes on: trunk/media/images/creatures/3spider.jpg
___________________________________________________________________
Name: svn:mime-type
   + image/jpeg
Name: svn:mergeinfo
   + 

Copied: trunk/media/images/creatures/3spider.tga (from rev 2387, trunk/media/images/unsorted/3spider.tga)


Property changes on: trunk/media/images/creatures/3spider.tga
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream
Name: svn:mergeinfo
   + 

Copied: trunk/media/images/creatures/panzer.jpg (from rev 2387, trunk/media/images/unsorted/panzer.jpg)


Property changes on: trunk/media/images/creatures/panzer.jpg
___________________________________________________________________
Name: svn:mime-type
   + image/jpeg
Name: svn:mergeinfo
   + 

Copied: trunk/media/images/creatures/panzer.jpg.tga (from rev 2387, trunk/media/images/unsorted/panzer.jpg.tga)


Property changes on: trunk/media/images/creatures/panzer.jpg.tga
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream
Name: svn:mergeinfo
   + 

Copied: trunk/media/images/creatures/spider-3d.jpg (from rev 2387, trunk/media/images/unsorted/spider-3d.jpg)


Property changes on: trunk/media/images/creatures/spider-3d.jpg
___________________________________________________________________
Name: svn:mime-type
   + image/jpeg
Name: svn:mergeinfo
   + 

Copied: trunk/media/images/creatures/spider-3d.tga (from rev 2387, trunk/media/images/unsorted/spider-3d.tga)


Property changes on: trunk/media/images/creatures/spider-3d.tga
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream
Name: svn:mergeinfo
   + 

Copied: trunk/media/images/locations/airport.xcf (from rev 2387, trunk/media/images/tiles/airport.xcf)


Property changes on: trunk/media/images/locations/airport.xcf
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream
Name: svn:mergeinfo
   + 

Copied: trunk/media/images/locations/airportbar.xcf (from rev 2387, trunk/media/images/tiles/airportbar.xcf)


Property changes on: trunk/media/images/locations/airportbar.xcf
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream
Name: svn:mergeinfo
   + 

Copied: trunk/media/images/locations/airportshop.xcf (from rev 2387, trunk/media/images/tiles/airportshop.xcf)


Property changes on: trunk/media/images/locations/airportshop.xcf
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream
Name: svn:mergeinfo
   + 

Copied: trunk/media/images/locations/elevatorbase.xcf (from rev 2387, trunk/media/images/misc/elevatorbase.xcf)


Property changes on: trunk/media/images/locations/elevatorbase.xcf
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream
Name: svn:mergeinfo
   + 

Copied: trunk/media/images/locations/elevatorhead.xcf (from rev 2387, trunk/media/images/misc/elevatorhead.xcf)


Property changes on: trunk/media/images/locations/elevatorhead.xcf
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream
Name: svn:mergeinfo
   + 

Copied: trunk/media/images/locations/elevatorsketch.xcf (from rev 2387, trunk/media/images/misc/elevatorsketch.xcf)


Property changes on: trunk/media/images/locations/elevatorsketch.xcf
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream
Name: svn:mergeinfo
   + 

Copied: trunk/media/images/locations/elevatorsketchcolor.xcf (from rev 2387, trunk/media/images/misc/elevatorsketchcolor.xcf)


Property changes on: trunk/media/images/locations/elevatorsketchcolor.xcf
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream
Name: svn:mergeinfo
   + 

Copied: trunk/media/images/locations/gamescreen.xcf (from rev 2387, trunk/media/images/unsorted/gamescreen.xcf)


Property changes on: trunk/media/images/locations/gamescreen.xcf
___________________________________________________________________
Name: svn:mime-type
   + application/x-xcf
Name: svn:mergeinfo
   + 

Copied: trunk/media/images/locations/gamescreen1.xcf (from rev 2387, trunk/media/images/unsorted/gamescreen1.xcf)


Property changes on: trunk/media/images/locations/gamescreen1.xcf
___________________________________________________________________
Name: svn:mime-type
   + application/x-xcf
Name: svn:mergeinfo
   + 

Copied: trunk/media/images/locations/gamescreen2.xcf (from rev 2387, trunk/media/images/unsorted/gamescreen2.xcf)


Property changes on: trunk/media/images/locations/gamescreen2.xcf
___________________________________________________________________
Name: svn:mime-type
   + application/x-xcf
Name: svn:mergeinfo
   + 

Copied: trunk/media/images/locations/gamescreen3.xcf (from rev 2387, trunk/media/images/unsorted/gamescreen3.xcf)


Property changes on: trunk/media/images/locations/gamescreen3.xcf
___________________________________________________________________
Name: svn:mime-type
   + application/x-xcf
Name: svn:mergeinfo
   + 

Copied: trunk/media/images/locations/gamescreen4.xcf (from rev 2387, trunk/media/images/unsorted/gamescreen4.xcf)


Property changes on: trunk/media/images/locations/gamescreen4.xcf
___________________________________________________________________
Name: svn:mime-type
   + application/x-xcf
Name: svn:mergeinfo
   + 

Copied: trunk/media/images/locations/generator.xcf (from rev 2387, trunk/media/images/misc/generator.xcf)


Property changes on: trunk/media/images/locations/generator.xcf
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream
Name: svn:mergeinfo
   + 

Copied: trunk/media/images/locations/level.xcf (from rev 2387, trunk/media/images/unsorted/level.xcf)


Property changes on: trunk/media/images/locations/level.xcf
___________________________________________________________________
Name: svn:mime-type
   + application/x-xcf
Name: svn:mergeinfo
   + 

Copied: trunk/media/images/locations/minesketch.xcf (from rev 2387, trunk/media/images/misc/minesketch.xcf)


Property changes on: trunk/media/images/locations/minesketch.xcf
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream
Name: svn:mergeinfo
   + 

Copied: trunk/media/images/locations/shuttle.xcf (from rev 2387, trunk/media/images/tiles/shuttle.xcf)


Property changes on: trunk/media/images/locations/shuttle.xcf
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream
Name: svn:mergeinfo
   + 

Deleted: trunk/media/images/misc/elevatorbase.xcf
===================================================================
(Binary files differ)

Deleted: trunk/media/images/misc/elevatorhead.xcf
===================================================================
(Binary files differ)

Deleted: trunk/media/images/misc/elevatorsketch.xcf
===================================================================
(Binary files differ)

Deleted: trunk/media/images/misc/elevatorsketchcolor.xcf
===================================================================
(Binary files differ)

Deleted: trunk/media/images/misc/generator.xcf
===================================================================
(Binary files differ)

Deleted: trunk/media/images/misc/minesketch.xcf
===================================================================
(Binary files differ)

Copied: trunk/media/images/objects/arboretum.xcf (from rev 2387, trunk/media/images/tiles/arboretum.xcf)


Property changes on: trunk/media/images/objects/arboretum.xcf
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream
Name: svn:mergeinfo
   + 

Copied: trunk/media/images/objects/bar2.xcf (from rev 2387, trunk/media/images/tiles/bar2.xcf)


Property changes on: trunk/media/images/objects/bar2.xcf
___________________________________________________________________
Name: svn:mime-type
   + application/x-xcf
Name: svn:mergeinfo
   + 

Deleted: trunk/media/images/tiles/airport.xcf
===================================================================
(Binary files differ)

Deleted: trunk/media/images/tiles/airportbar.xcf
===================================================================
(Binary files differ)

Deleted: trunk/media/images/tiles/airportshop.xcf
===================================================================
(Binary files differ)

Deleted: trunk/media/images/tiles/arboretum.xcf
===================================================================
(Binary files differ)

Deleted: trunk/media/images/tiles/bar2.xcf
===================================================================
(Binary files differ)

Deleted: trunk/media/images/tiles/shuttle.xcf
===================================================================
(Binary files differ)

Deleted: trunk/media/images/unsorted/3spider.jpg
===================================================================
(Binary files differ)

Deleted: trunk/media/images/unsorted/3spider.tga
===================================================================
(Binary files differ)

Deleted: trunk/media/images/unsorted/anime.xcf
===================================================================
(Binary files differ)

Deleted: trunk/media/images/unsorted/barkeeper.xcf
===================================================================
(Binary files differ)

Deleted: trunk/media/images/unsorted/commander2.xcf
===================================================================
(Binary files differ)

Deleted: trunk/media/images/unsorted/commander4.xcf
===================================================================
(Binary files differ)

Deleted: trunk/media/images/unsorted/gamescreen.xcf
===================================================================
(Binary files differ)

Deleted: trunk/media/images/unsorted/gamescreen1.xcf
===================================================================
(Binary files differ)

Deleted: trunk/media/images/unsorted/gamescreen2.xcf
===================================================================
(Binary files differ)

Deleted: trunk/media/images/unsorted/gamescreen3.xcf
===================================================================
(Binary files differ)

Deleted: trunk/media/images/unsorted/gamescreen4.xcf
===================================================================
(Binary files differ)

Deleted: trunk/media/images/unsorted/level.xcf
===================================================================
(Binary files differ)

Deleted: trunk/media/images/unsorted/panzer.jpg
===================================================================
(Binary files differ)

Deleted: trunk/media/images/unsorted/panzer.jpg.tga
===================================================================
(Binary files differ)

Deleted: trunk/media/images/unsorted/spider-3d.jpg
===================================================================
(Binary files differ)

Deleted: trunk/media/images/unsorted/spider-3d.tga
===================================================================
(Binary files differ)



From grumbel at mail.berlios.de  Wed Feb  4 12:50:27 2009
From: grumbel at mail.berlios.de (grumbel at BerliOS)
Date: Wed, 4 Feb 2009 12:50:27 +0100
Subject: [Windstille-commit] r2391 - in trunk/media/images: . artwork
	artwork/misc artwork/misc/storybord characters
	characters/misc creatures gui locations misc objects unsorted
	vehicles weapons
Message-ID: <200902041150.n14BoRFr024412@sheep.berlios.de>

Author: grumbel
Date: 2009-02-04 12:50:16 +0100 (Wed, 04 Feb 2009)
New Revision: 2391

Added:
   trunk/media/images/characters/artwork7.xcf
   trunk/media/images/characters/artwork8.xcf
   trunk/media/images/characters/deepsuit.xcf
   trunk/media/images/characters/jane.xcf
   trunk/media/images/characters/jane1.xcf
   trunk/media/images/characters/jane2.xcf
   trunk/media/images/characters/misc/frontview.xcf
   trunk/media/images/characters/misc/frontview1.xcf
   trunk/media/images/characters/misc/frontview2.xcf
   trunk/media/images/characters/misc/frontview2_small.xcf
   trunk/media/images/characters/misc/jeff.png
   trunk/media/images/characters/misc/yagor2.xcf
   trunk/media/images/creatures/crab.png
   trunk/media/images/creatures/dog.png
   trunk/media/images/creatures/dogs.png
   trunk/media/images/creatures/enemy1.png
   trunk/media/images/creatures/enemy2.png
   trunk/media/images/creatures/enemy3.png
   trunk/media/images/creatures/enemy4.png
   trunk/media/images/creatures/enemy5.png
   trunk/media/images/creatures/enemy6.png
   trunk/media/images/creatures/enemy7.png
   trunk/media/images/creatures/fish.png
   trunk/media/images/creatures/fish.xcf
   trunk/media/images/creatures/morph.png
   trunk/media/images/creatures/plant.png
   trunk/media/images/creatures/plant2.png
   trunk/media/images/creatures/plant3.png
   trunk/media/images/creatures/plant4.png
   trunk/media/images/creatures/plant5.png
   trunk/media/images/creatures/turtle.png
   trunk/media/images/creatures/turtle1.png
   trunk/media/images/creatures/walker.png
   trunk/media/images/gui/controldialog.xcf
   trunk/media/images/locations/bar.png
   trunk/media/images/locations/bar2.xcf
   trunk/media/images/locations/bartest.xcf
   trunk/media/images/locations/cave.xcf
   trunk/media/images/locations/cave2.xcf
   trunk/media/images/locations/elevator.xcf
   trunk/media/images/locations/elevatorwheel.xcf
   trunk/media/images/locations/floor.xcf
   trunk/media/images/locations/hangar.xcf
   trunk/media/images/locations/haus2.xcf
   trunk/media/images/locations/haus3.xcf
   trunk/media/images/locations/hause.xcf
   trunk/media/images/locations/home.xcf
   trunk/media/images/locations/hospital.xcf
   trunk/media/images/locations/hq.png
   trunk/media/images/locations/industrial.xcf
   trunk/media/images/locations/infobooth.xcf
   trunk/media/images/locations/layerswitch.xcf
   trunk/media/images/locations/metalwall.xcf
   trunk/media/images/locations/publictrain.xcf
   trunk/media/images/locations/room.xcf
   trunk/media/images/locations/room2.xcf
   trunk/media/images/locations/rooms.xcf
   trunk/media/images/locations/saveroom.xcf
   trunk/media/images/locations/shower.xcf
   trunk/media/images/locations/stairs.xcf
   trunk/media/images/locations/stonesketch.png
   trunk/media/images/locations/tiles.xcf
   trunk/media/images/locations/trainstation-old.jpg
   trunk/media/images/locations/trainstation.xcf
   trunk/media/images/locations/virtualreality.xcf
   trunk/media/images/locations/vrcamber.xcf
   trunk/media/images/locations/windstillelevel.xcf
   trunk/media/images/objects/ball.png
   trunk/media/images/objects/box.xcf
   trunk/media/images/objects/cryo.xcf
   trunk/media/images/objects/plant.xcf
   trunk/media/images/objects/satchel.xcf
   trunk/media/images/objects/streetlamp.xcf
   trunk/media/images/vehicles/
   trunk/media/images/vehicles/carsketch.xcf
   trunk/media/images/vehicles/shuttle.xcf
   trunk/media/images/vehicles/train.xcf
   trunk/media/images/vehicles/truck.xcf
   trunk/media/images/weapons/
   trunk/media/images/weapons/gun.xcf
   trunk/media/images/weapons/gun1.xcf
   trunk/media/images/weapons/gun3.xcf
   trunk/media/images/weapons/gun4.xcf
   trunk/media/images/weapons/plasmagranate.xcf
   trunk/media/images/weapons/rifle.xcf
Removed:
   trunk/media/images/artwork/cave.xcf
   trunk/media/images/artwork/cave2.xcf
   trunk/media/images/artwork/hangar.xcf
   trunk/media/images/artwork/industrial.xcf
   trunk/media/images/artwork/infobooth.xcf
   trunk/media/images/artwork/jane.xcf
   trunk/media/images/artwork/jane1.xcf
   trunk/media/images/artwork/jane2.xcf
   trunk/media/images/artwork/layerswitch.xcf
   trunk/media/images/artwork/misc/artwork7.xcf
   trunk/media/images/artwork/misc/artwork8.xcf
   trunk/media/images/artwork/misc/bar.png
   trunk/media/images/artwork/misc/bar2.xcf
   trunk/media/images/artwork/misc/box.xcf
   trunk/media/images/artwork/misc/crab.png
   trunk/media/images/artwork/misc/deepsuit.xcf
   trunk/media/images/artwork/misc/dog.png
   trunk/media/images/artwork/misc/dogs.png
   trunk/media/images/artwork/misc/enemy1.png
   trunk/media/images/artwork/misc/enemy2.png
   trunk/media/images/artwork/misc/enemy3.png
   trunk/media/images/artwork/misc/enemy4.png
   trunk/media/images/artwork/misc/enemy5.png
   trunk/media/images/artwork/misc/enemy6.png
   trunk/media/images/artwork/misc/enemy7.png
   trunk/media/images/artwork/misc/fish.png
   trunk/media/images/artwork/misc/fish.xcf
   trunk/media/images/artwork/misc/floor.xcf
   trunk/media/images/artwork/misc/frontview.xcf
   trunk/media/images/artwork/misc/frontview1.xcf
   trunk/media/images/artwork/misc/frontview2.xcf
   trunk/media/images/artwork/misc/frontview2_small.xcf
   trunk/media/images/artwork/misc/home.xcf
   trunk/media/images/artwork/misc/hospital.xcf
   trunk/media/images/artwork/misc/hq.png
   trunk/media/images/artwork/misc/jeff.png
   trunk/media/images/artwork/misc/morph.png
   trunk/media/images/artwork/misc/plant.png
   trunk/media/images/artwork/misc/plant2.png
   trunk/media/images/artwork/misc/plant3.png
   trunk/media/images/artwork/misc/plant4.png
   trunk/media/images/artwork/misc/plant5.png
   trunk/media/images/artwork/misc/storybord/rooms.xcf
   trunk/media/images/artwork/misc/storybord/shower.xcf
   trunk/media/images/artwork/misc/storybord/virtualreality.xcf
   trunk/media/images/artwork/misc/storybord/vrcamber.xcf
   trunk/media/images/artwork/misc/turtle.png
   trunk/media/images/artwork/misc/turtle1.png
   trunk/media/images/artwork/misc/walker.png
   trunk/media/images/artwork/misc/yagor.xcf
   trunk/media/images/artwork/publictrain.xcf
   trunk/media/images/artwork/saveroom.xcf
   trunk/media/images/artwork/tiles.xcf
   trunk/media/images/artwork/trainstation-old.jpg
   trunk/media/images/artwork/trainstation.xcf
   trunk/media/images/bartest.xcf
   trunk/media/images/misc/carsketch.xcf
   trunk/media/images/misc/controldialog.xcf
   trunk/media/images/misc/cryo.xcf
   trunk/media/images/misc/elevator.xcf
   trunk/media/images/misc/elevatorwheel.xcf
   trunk/media/images/misc/gun.xcf
   trunk/media/images/misc/gun1.xcf
   trunk/media/images/misc/gun3.xcf
   trunk/media/images/misc/gun4.xcf
   trunk/media/images/misc/haus2.xcf
   trunk/media/images/misc/haus3.xcf
   trunk/media/images/misc/hause.xcf
   trunk/media/images/misc/metalwall.xcf
   trunk/media/images/misc/plasmagranate.xcf
   trunk/media/images/misc/rifle.xcf
   trunk/media/images/misc/room.xcf
   trunk/media/images/misc/room2.xcf
   trunk/media/images/misc/satchel.xcf
   trunk/media/images/misc/shuttle.xcf
   trunk/media/images/misc/stairs.xcf
   trunk/media/images/misc/streetlamp.xcf
   trunk/media/images/misc/train.xcf
   trunk/media/images/misc/truck.xcf
   trunk/media/images/misc/windstillelevel.xcf
   trunk/media/images/unsorted/ball.png
   trunk/media/images/unsorted/plant.xcf
   trunk/media/images/unsorted/stonesketch.png
Log:
More reorganisation

Deleted: trunk/media/images/artwork/cave.xcf
===================================================================
(Binary files differ)

Deleted: trunk/media/images/artwork/cave2.xcf
===================================================================
(Binary files differ)

Deleted: trunk/media/images/artwork/hangar.xcf
===================================================================
(Binary files differ)

Deleted: trunk/media/images/artwork/industrial.xcf
===================================================================
(Binary files differ)

Deleted: trunk/media/images/artwork/infobooth.xcf
===================================================================
(Binary files differ)

Deleted: trunk/media/images/artwork/jane.xcf
===================================================================
(Binary files differ)

Deleted: trunk/media/images/artwork/jane1.xcf
===================================================================
(Binary files differ)

Deleted: trunk/media/images/artwork/jane2.xcf
===================================================================
(Binary files differ)

Deleted: trunk/media/images/artwork/layerswitch.xcf
===================================================================
(Binary files differ)

Deleted: trunk/media/images/artwork/misc/artwork7.xcf
===================================================================
(Binary files differ)

Deleted: trunk/media/images/artwork/misc/artwork8.xcf
===================================================================
(Binary files differ)

Deleted: trunk/media/images/artwork/misc/bar.png
===================================================================
(Binary files differ)

Deleted: trunk/media/images/artwork/misc/bar2.xcf
===================================================================
(Binary files differ)

Deleted: trunk/media/images/artwork/misc/box.xcf
===================================================================
(Binary files differ)

Deleted: trunk/media/images/artwork/misc/crab.png
===================================================================
(Binary files differ)

Deleted: trunk/media/images/artwork/misc/deepsuit.xcf
===================================================================
(Binary files differ)

Deleted: trunk/media/images/artwork/misc/dog.png
===================================================================
(Binary files differ)

Deleted: trunk/media/images/artwork/misc/dogs.png
===================================================================
(Binary files differ)

Deleted: trunk/media/images/artwork/misc/enemy1.png
===================================================================
(Binary files differ)

Deleted: trunk/media/images/artwork/misc/enemy2.png
===================================================================
(Binary files differ)

Deleted: trunk/media/images/artwork/misc/enemy3.png
===================================================================
(Binary files differ)

Deleted: trunk/media/images/artwork/misc/enemy4.png
===================================================================
(Binary files differ)

Deleted: trunk/media/images/artwork/misc/enemy5.png
===================================================================
(Binary files differ)

Deleted: trunk/media/images/artwork/misc/enemy6.png
===================================================================
(Binary files differ)

Deleted: trunk/media/images/artwork/misc/enemy7.png
===================================================================
(Binary files differ)

Deleted: trunk/media/images/artwork/misc/fish.png
===================================================================
(Binary files differ)

Deleted: trunk/media/images/artwork/misc/fish.xcf
===================================================================
(Binary files differ)

Deleted: trunk/media/images/artwork/misc/floor.xcf
===================================================================
(Binary files differ)

Deleted: trunk/media/images/artwork/misc/frontview.xcf
===================================================================
(Binary files differ)

Deleted: trunk/media/images/artwork/misc/frontview1.xcf
===================================================================
(Binary files differ)

Deleted: trunk/media/images/artwork/misc/frontview2.xcf
===================================================================
(Binary files differ)

Deleted: trunk/media/images/artwork/misc/frontview2_small.xcf
===================================================================
(Binary files differ)

Deleted: trunk/media/images/artwork/misc/home.xcf
===================================================================
(Binary files differ)

Deleted: trunk/media/images/artwork/misc/hospital.xcf
===================================================================
(Binary files differ)

Deleted: trunk/media/images/artwork/misc/hq.png
===================================================================
(Binary files differ)

Deleted: trunk/media/images/artwork/misc/jeff.png
===================================================================
(Binary files differ)

Deleted: trunk/media/images/artwork/misc/morph.png
===================================================================
(Binary files differ)

Deleted: trunk/media/images/artwork/misc/plant.png
===================================================================
(Binary files differ)

Deleted: trunk/media/images/artwork/misc/plant2.png
===================================================================
(Binary files differ)

Deleted: trunk/media/images/artwork/misc/plant3.png
===================================================================
(Binary files differ)

Deleted: trunk/media/images/artwork/misc/plant4.png
===================================================================
(Binary files differ)

Deleted: trunk/media/images/artwork/misc/plant5.png
===================================================================
(Binary files differ)

Deleted: trunk/media/images/artwork/misc/storybord/rooms.xcf
===================================================================
(Binary files differ)

Deleted: trunk/media/images/artwork/misc/storybord/shower.xcf
===================================================================
(Binary files differ)

Deleted: trunk/media/images/artwork/misc/storybord/virtualreality.xcf
===================================================================
(Binary files differ)

Deleted: trunk/media/images/artwork/misc/storybord/vrcamber.xcf
===================================================================
(Binary files differ)

Deleted: trunk/media/images/artwork/misc/turtle.png
===================================================================
(Binary files differ)

Deleted: trunk/media/images/artwork/misc/turtle1.png
===================================================================
(Binary files differ)

Deleted: trunk/media/images/artwork/misc/walker.png
===================================================================
(Binary files differ)

Deleted: trunk/media/images/artwork/misc/yagor.xcf
===================================================================
(Binary files differ)

Deleted: trunk/media/images/artwork/publictrain.xcf
===================================================================
(Binary files differ)

Deleted: trunk/media/images/artwork/saveroom.xcf
===================================================================
(Binary files differ)

Deleted: trunk/media/images/artwork/tiles.xcf
===================================================================
(Binary files differ)

Deleted: trunk/media/images/artwork/trainstation-old.jpg
===================================================================
(Binary files differ)

Deleted: trunk/media/images/artwork/trainstation.xcf
===================================================================
(Binary files differ)

Deleted: trunk/media/images/bartest.xcf
===================================================================
(Binary files differ)

Copied: trunk/media/images/characters/artwork7.xcf (from rev 2387, trunk/media/images/artwork/misc/artwork7.xcf)


Property changes on: trunk/media/images/characters/artwork7.xcf
___________________________________________________________________
Name: svn:mime-type
   + application/x-xcf
Name: svn:mergeinfo
   + 

Copied: trunk/media/images/characters/artwork8.xcf (from rev 2387, trunk/media/images/artwork/misc/artwork8.xcf)


Property changes on: trunk/media/images/characters/artwork8.xcf
___________________________________________________________________
Name: svn:mime-type
   + application/x-xcf
Name: svn:mergeinfo
   + 

Copied: trunk/media/images/characters/deepsuit.xcf (from rev 2387, trunk/media/images/artwork/misc/deepsuit.xcf)


Property changes on: trunk/media/images/characters/deepsuit.xcf
___________________________________________________________________
Name: svn:mime-type
   + application/x-xcf
Name: svn:mergeinfo
   + 

Copied: trunk/media/images/characters/jane.xcf (from rev 2387, trunk/media/images/artwork/jane.xcf)


Property changes on: trunk/media/images/characters/jane.xcf
___________________________________________________________________
Name: svn:mime-type
   + application/x-xcf
Name: svn:mergeinfo
   + 

Copied: trunk/media/images/characters/jane1.xcf (from rev 2387, trunk/media/images/artwork/jane1.xcf)


Property changes on: trunk/media/images/characters/jane1.xcf
___________________________________________________________________
Name: svn:mime-type
   + application/x-xcf
Name: svn:mergeinfo
   + 

Copied: trunk/media/images/characters/jane2.xcf (from rev 2387, trunk/media/images/artwork/jane2.xcf)


Property changes on: trunk/media/images/characters/jane2.xcf
___________________________________________________________________
Name: svn:mime-type
   + application/x-xcf
Name: svn:mergeinfo
   + 

Copied: trunk/media/images/characters/misc/frontview.xcf (from rev 2387, trunk/media/images/artwork/misc/frontview.xcf)


Property changes on: trunk/media/images/characters/misc/frontview.xcf
___________________________________________________________________
Name: svn:mime-type
   + application/x-xcf
Name: svn:mergeinfo
   + 

Copied: trunk/media/images/characters/misc/frontview1.xcf (from rev 2387, trunk/media/images/artwork/misc/frontview1.xcf)


Property changes on: trunk/media/images/characters/misc/frontview1.xcf
___________________________________________________________________
Name: svn:mime-type
   + application/x-xcf
Name: svn:mergeinfo
   + 

Copied: trunk/media/images/characters/misc/frontview2.xcf (from rev 2387, trunk/media/images/artwork/misc/frontview2.xcf)


Property changes on: trunk/media/images/characters/misc/frontview2.xcf
___________________________________________________________________
Name: svn:mime-type
   + application/x-xcf
Name: svn:mergeinfo
   + 

Copied: trunk/media/images/characters/misc/frontview2_small.xcf (from rev 2387, trunk/media/images/artwork/misc/frontview2_small.xcf)


Property changes on: trunk/media/images/characters/misc/frontview2_small.xcf
___________________________________________________________________
Name: svn:mime-type
   + application/x-xcf
Name: svn:mergeinfo
   + 

Copied: trunk/media/images/characters/misc/jeff.png (from rev 2387, trunk/media/images/artwork/misc/jeff.png)


Property changes on: trunk/media/images/characters/misc/jeff.png
___________________________________________________________________
Name: svn:mime-type
   + image/png
Name: svn:mergeinfo
   + 

Copied: trunk/media/images/characters/misc/yagor2.xcf (from rev 2387, trunk/media/images/artwork/misc/yagor.xcf)


Property changes on: trunk/media/images/characters/misc/yagor2.xcf
___________________________________________________________________
Name: svn:mime-type
   + application/x-xcf
Name: svn:mergeinfo
   + 

Copied: trunk/media/images/creatures/crab.png (from rev 2387, trunk/media/images/artwork/misc/crab.png)


Property changes on: trunk/media/images/creatures/crab.png
___________________________________________________________________
Name: svn:mime-type
   + image/png
Name: svn:mergeinfo
   + 

Copied: trunk/media/images/creatures/dog.png (from rev 2387, trunk/media/images/artwork/misc/dog.png)


Property changes on: trunk/media/images/creatures/dog.png
___________________________________________________________________
Name: svn:mime-type
   + image/png
Name: svn:mergeinfo
   + 

Copied: trunk/media/images/creatures/dogs.png (from rev 2387, trunk/media/images/artwork/misc/dogs.png)


Property changes on: trunk/media/images/creatures/dogs.png
___________________________________________________________________
Name: svn:mime-type
   + image/png
Name: svn:mergeinfo
   + 

Copied: trunk/media/images/creatures/enemy1.png (from rev 2387, trunk/media/images/artwork/misc/enemy1.png)


Property changes on: trunk/media/images/creatures/enemy1.png
___________________________________________________________________
Name: svn:mime-type
   + image/png
Name: svn:mergeinfo
   + 

Copied: trunk/media/images/creatures/enemy2.png (from rev 2387, trunk/media/images/artwork/misc/enemy2.png)


Property changes on: trunk/media/images/creatures/enemy2.png
___________________________________________________________________
Name: svn:mime-type
   + image/png
Name: svn:mergeinfo
   + 

Copied: trunk/media/images/creatures/enemy3.png (from rev 2387, trunk/media/images/artwork/misc/enemy3.png)


Property changes on: trunk/media/images/creatures/enemy3.png
___________________________________________________________________
Name: svn:mime-type
   + image/png
Name: svn:mergeinfo
   + 

Copied: trunk/media/images/creatures/enemy4.png (from rev 2387, trunk/media/images/artwork/misc/enemy4.png)


Property changes on: trunk/media/images/creatures/enemy4.png
___________________________________________________________________
Name: svn:mime-type
   + image/png
Name: svn:mergeinfo
   + 

Copied: trunk/media/images/creatures/enemy5.png (from rev 2387, trunk/media/images/artwork/misc/enemy5.png)


Property changes on: trunk/media/images/creatures/enemy5.png
___________________________________________________________________
Name: svn:mime-type
   + image/png
Name: svn:mergeinfo
   + 

Copied: trunk/media/images/creatures/enemy6.png (from rev 2387, trunk/media/images/artwork/misc/enemy6.png)


Property changes on: trunk/media/images/creatures/enemy6.png
___________________________________________________________________
Name: svn:mime-type
   + image/png
Name: svn:mergeinfo
   + 

Copied: trunk/media/images/creatures/enemy7.png (from rev 2387, trunk/media/images/artwork/misc/enemy7.png)


Property changes on: trunk/media/images/creatures/enemy7.png
___________________________________________________________________
Name: svn:mime-type
   + image/png
Name: svn:mergeinfo
   + 

Copied: trunk/media/images/creatures/fish.png (from rev 2387, trunk/media/images/artwork/misc/fish.png)


Property changes on: trunk/media/images/creatures/fish.png
___________________________________________________________________
Name: svn:mime-type
   + image/png
Name: svn:mergeinfo
   + 

Copied: trunk/media/images/creatures/fish.xcf (from rev 2387, trunk/media/images/artwork/misc/fish.xcf)


Property changes on: trunk/media/images/creatures/fish.xcf
___________________________________________________________________
Name: svn:mime-type
   + application/x-xcf
Name: svn:mergeinfo
   + 

Copied: trunk/media/images/creatures/morph.png (from rev 2387, trunk/media/images/artwork/misc/morph.png)


Property changes on: trunk/media/images/creatures/morph.png
___________________________________________________________________
Name: svn:mime-type
   + image/png
Name: svn:mergeinfo
   + 

Copied: trunk/media/images/creatures/plant.png (from rev 2387, trunk/media/images/artwork/misc/plant.png)


Property changes on: trunk/media/images/creatures/plant.png
___________________________________________________________________
Name: svn:mime-type
   + image/png
Name: svn:mergeinfo
   + 

Copied: trunk/media/images/creatures/plant2.png (from rev 2387, trunk/media/images/artwork/misc/plant2.png)


Property changes on: trunk/media/images/creatures/plant2.png
___________________________________________________________________
Name: svn:mime-type
   + image/png
Name: svn:mergeinfo
   + 

Copied: trunk/media/images/creatures/plant3.png (from rev 2387, trunk/media/images/artwork/misc/plant3.png)


Property changes on: trunk/media/images/creatures/plant3.png
___________________________________________________________________
Name: svn:mime-type
   + image/png
Name: svn:mergeinfo
   + 

Copied: trunk/media/images/creatures/plant4.png (from rev 2387, trunk/media/images/artwork/misc/plant4.png)


Property changes on: trunk/media/images/creatures/plant4.png
___________________________________________________________________
Name: svn:mime-type
   + image/png
Name: svn:mergeinfo
   + 

Copied: trunk/media/images/creatures/plant5.png (from rev 2387, trunk/media/images/artwork/misc/plant5.png)


Property changes on: trunk/media/images/creatures/plant5.png
___________________________________________________________________
Name: svn:mime-type
   + image/png
Name: svn:mergeinfo
   + 

Copied: trunk/media/images/creatures/turtle.png (from rev 2387, trunk/media/images/artwork/misc/turtle.png)


Property changes on: trunk/media/images/creatures/turtle.png
___________________________________________________________________
Name: svn:mime-type
   + image/png
Name: svn:mergeinfo
   + 

Copied: trunk/media/images/creatures/turtle1.png (from rev 2387, trunk/media/images/artwork/misc/turtle1.png)


Property changes on: trunk/media/images/creatures/turtle1.png
___________________________________________________________________
Name: svn:mime-type
   + image/png
Name: svn:mergeinfo
   + 

Copied: trunk/media/images/creatures/walker.png (from rev 2387, trunk/media/images/artwork/misc/walker.png)


Property changes on: trunk/media/images/creatures/walker.png
___________________________________________________________________
Name: svn:mime-type
   + image/png
Name: svn:mergeinfo
   + 

Copied: trunk/media/images/gui/controldialog.xcf (from rev 2387, trunk/media/images/misc/controldialog.xcf)


Property changes on: trunk/media/images/gui/controldialog.xcf
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream
Name: svn:mergeinfo
   + 

Copied: trunk/media/images/locations/bar.png (from rev 2387, trunk/media/images/artwork/misc/bar.png)


Property changes on: trunk/media/images/locations/bar.png
___________________________________________________________________
Name: svn:mime-type
   + image/png
Name: svn:mergeinfo
   + 

Copied: trunk/media/images/locations/bar2.xcf (from rev 2387, trunk/media/images/artwork/misc/bar2.xcf)


Property changes on: trunk/media/images/locations/bar2.xcf
___________________________________________________________________
Name: svn:mime-type
   + application/x-xcf
Name: svn:mergeinfo
   + 

Copied: trunk/media/images/locations/bartest.xcf (from rev 2387, trunk/media/images/bartest.xcf)


Property changes on: trunk/media/images/locations/bartest.xcf
___________________________________________________________________
Name: svn:mime-type
   + application/x-xcf
Name: svn:mergeinfo
   + 

Copied: trunk/media/images/locations/cave.xcf (from rev 2387, trunk/media/images/artwork/cave.xcf)


Property changes on: trunk/media/images/locations/cave.xcf
___________________________________________________________________
Name: svn:mime-type
   + application/x-xcf
Name: svn:mergeinfo
   + 

Copied: trunk/media/images/locations/cave2.xcf (from rev 2388, trunk/media/images/artwork/cave2.xcf)


Property changes on: trunk/media/images/locations/cave2.xcf
___________________________________________________________________
Name: svn:mime-type
   + application/x-xcf
Name: svn:mergeinfo
   + 

Copied: trunk/media/images/locations/elevator.xcf (from rev 2387, trunk/media/images/misc/elevator.xcf)


Property changes on: trunk/media/images/locations/elevator.xcf
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream
Name: svn:mergeinfo
   + 

Copied: trunk/media/images/locations/elevatorwheel.xcf (from rev 2387, trunk/media/images/misc/elevatorwheel.xcf)


Property changes on: trunk/media/images/locations/elevatorwheel.xcf
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream
Name: svn:mergeinfo
   + 

Copied: trunk/media/images/locations/floor.xcf (from rev 2387, trunk/media/images/artwork/misc/floor.xcf)


Property changes on: trunk/media/images/locations/floor.xcf
___________________________________________________________________
Name: svn:mime-type
   + application/x-xcf
Name: svn:mergeinfo
   + 

Copied: trunk/media/images/locations/hangar.xcf (from rev 2387, trunk/media/images/artwork/hangar.xcf)


Property changes on: trunk/media/images/locations/hangar.xcf
___________________________________________________________________
Name: svn:mime-type
   + application/x-xcf
Name: svn:mergeinfo
   + 

Copied: trunk/media/images/locations/haus2.xcf (from rev 2387, trunk/media/images/misc/haus2.xcf)


Property changes on: trunk/media/images/locations/haus2.xcf
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream
Name: svn:mergeinfo
   + 

Copied: trunk/media/images/locations/haus3.xcf (from rev 2387, trunk/media/images/misc/haus3.xcf)


Property changes on: trunk/media/images/locations/haus3.xcf
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream
Name: svn:mergeinfo
   + 

Copied: trunk/media/images/locations/hause.xcf (from rev 2387, trunk/media/images/misc/hause.xcf)


Property changes on: trunk/media/images/locations/hause.xcf
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream
Name: svn:mergeinfo
   + 

Copied: trunk/media/images/locations/home.xcf (from rev 2387, trunk/media/images/artwork/misc/home.xcf)


Property changes on: trunk/media/images/locations/home.xcf
___________________________________________________________________
Name: svn:mime-type
   + application/x-xcf
Name: svn:mergeinfo
   + 

Copied: trunk/media/images/locations/hospital.xcf (from rev 2387, trunk/media/images/artwork/misc/hospital.xcf)


Property changes on: trunk/media/images/locations/hospital.xcf
___________________________________________________________________
Name: svn:mime-type
   + application/x-xcf
Name: svn:mergeinfo
   + 

Copied: trunk/media/images/locations/hq.png (from rev 2387, trunk/media/images/artwork/misc/hq.png)


Property changes on: trunk/media/images/locations/hq.png
___________________________________________________________________
Name: svn:mime-type
   + image/png
Name: svn:mergeinfo
   + 

Copied: trunk/media/images/locations/industrial.xcf (from rev 2387, trunk/media/images/artwork/industrial.xcf)


Property changes on: trunk/media/images/locations/industrial.xcf
___________________________________________________________________
Name: svn:mime-type
   + application/x-xcf
Name: svn:mergeinfo
   + 

Copied: trunk/media/images/locations/infobooth.xcf (from rev 2387, trunk/media/images/artwork/infobooth.xcf)


Property changes on: trunk/media/images/locations/infobooth.xcf
___________________________________________________________________
Name: svn:mime-type
   + application/x-xcf
Name: svn:mergeinfo
   + 

Copied: trunk/media/images/locations/layerswitch.xcf (from rev 2388, trunk/media/images/artwork/layerswitch.xcf)


Property changes on: trunk/media/images/locations/layerswitch.xcf
___________________________________________________________________
Name: svn:mime-type
   + application/x-xcf
Name: svn:mergeinfo
   + 

Copied: trunk/media/images/locations/metalwall.xcf (from rev 2387, trunk/media/images/misc/metalwall.xcf)


Property changes on: trunk/media/images/locations/metalwall.xcf
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream
Name: svn:mergeinfo
   + 

Copied: trunk/media/images/locations/publictrain.xcf (from rev 2387, trunk/media/images/artwork/publictrain.xcf)


Property changes on: trunk/media/images/locations/publictrain.xcf
___________________________________________________________________
Name: svn:mime-type
   + application/x-xcf
Name: svn:mergeinfo
   + 

Copied: trunk/media/images/locations/room.xcf (from rev 2387, trunk/media/images/misc/room.xcf)


Property changes on: trunk/media/images/locations/room.xcf
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream
Name: svn:mergeinfo
   + 

Copied: trunk/media/images/locations/room2.xcf (from rev 2387, trunk/media/images/misc/room2.xcf)


Property changes on: trunk/media/images/locations/room2.xcf
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream
Name: svn:mergeinfo
   + 

Copied: trunk/media/images/locations/rooms.xcf (from rev 2387, trunk/media/images/artwork/misc/storybord/rooms.xcf)


Property changes on: trunk/media/images/locations/rooms.xcf
___________________________________________________________________
Name: svn:mime-type
   + application/x-xcf
Name: svn:mergeinfo
   + 

Copied: trunk/media/images/locations/saveroom.xcf (from rev 2389, trunk/media/images/artwork/saveroom.xcf)


Property changes on: trunk/media/images/locations/saveroom.xcf
___________________________________________________________________
Name: svn:mime-type
   + application/x-xcf
Name: svn:mergeinfo
   + 

Copied: trunk/media/images/locations/shower.xcf (from rev 2387, trunk/media/images/artwork/misc/storybord/shower.xcf)


Property changes on: trunk/media/images/locations/shower.xcf
___________________________________________________________________
Name: svn:mime-type
   + application/x-xcf
Name: svn:mergeinfo
   + 

Copied: trunk/media/images/locations/stairs.xcf (from rev 2387, trunk/media/images/misc/stairs.xcf)


Property changes on: trunk/media/images/locations/stairs.xcf
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream
Name: svn:mergeinfo
   + 

Copied: trunk/media/images/locations/stonesketch.png (from rev 2387, trunk/media/images/unsorted/stonesketch.png)


Property changes on: trunk/media/images/locations/stonesketch.png
___________________________________________________________________
Name: svn:mime-type
   + image/png
Name: svn:mergeinfo
   + 

Copied: trunk/media/images/locations/tiles.xcf (from rev 2387, trunk/media/images/artwork/tiles.xcf)


Property changes on: trunk/media/images/locations/tiles.xcf
___________________________________________________________________
Name: svn:mime-type
   + application/x-xcf
Name: svn:mergeinfo
   + 

Copied: trunk/media/images/locations/trainstation-old.jpg (from rev 2388, trunk/media/images/artwork/trainstation-old.jpg)


Property changes on: trunk/media/images/locations/trainstation-old.jpg
___________________________________________________________________
Name: svn:mime-type
   + image/jpeg
Name: svn:mergeinfo
   + 

Copied: trunk/media/images/locations/trainstation.xcf (from rev 2387, trunk/media/images/artwork/trainstation.xcf)


Property changes on: trunk/media/images/locations/trainstation.xcf
___________________________________________________________________
Name: svn:mime-type
   + application/x-xcf
Name: svn:mergeinfo
   + 

Copied: trunk/media/images/locations/virtualreality.xcf (from rev 2387, trunk/media/images/artwork/misc/storybord/virtualreality.xcf)


Property changes on: trunk/media/images/locations/virtualreality.xcf
___________________________________________________________________
Name: svn:mime-type
   + application/x-xcf
Name: svn:mergeinfo
   + 

Copied: trunk/media/images/locations/vrcamber.xcf (from rev 2387, trunk/media/images/artwork/misc/storybord/vrcamber.xcf)


Property changes on: trunk/media/images/locations/vrcamber.xcf
___________________________________________________________________
Name: svn:mime-type
   + application/x-xcf
Name: svn:mergeinfo
   + 

Copied: trunk/media/images/locations/windstillelevel.xcf (from rev 2387, trunk/media/images/misc/windstillelevel.xcf)


Property changes on: trunk/media/images/locations/windstillelevel.xcf
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream
Name: svn:mergeinfo
   + 

Deleted: trunk/media/images/misc/carsketch.xcf
===================================================================
(Binary files differ)

Deleted: trunk/media/images/misc/controldialog.xcf
===================================================================
(Binary files differ)

Deleted: trunk/media/images/misc/cryo.xcf
===================================================================
(Binary files differ)

Deleted: trunk/media/images/misc/elevator.xcf
===================================================================
(Binary files differ)

Deleted: trunk/media/images/misc/elevatorwheel.xcf
===================================================================
(Binary files differ)

Deleted: trunk/media/images/misc/gun.xcf
===================================================================
(Binary files differ)

Deleted: trunk/media/images/misc/gun1.xcf
===================================================================
(Binary files differ)

Deleted: trunk/media/images/misc/gun3.xcf
===================================================================
(Binary files differ)

Deleted: trunk/media/images/misc/gun4.xcf
===================================================================
(Binary files differ)

Deleted: trunk/media/images/misc/haus2.xcf
===================================================================
(Binary files differ)

Deleted: trunk/media/images/misc/haus3.xcf
===================================================================
(Binary files differ)

Deleted: trunk/media/images/misc/hause.xcf
===================================================================
(Binary files differ)

Deleted: trunk/media/images/misc/metalwall.xcf
===================================================================
(Binary files differ)

Deleted: trunk/media/images/misc/plasmagranate.xcf
===================================================================
(Binary files differ)

Deleted: trunk/media/images/misc/rifle.xcf
===================================================================
(Binary files differ)

Deleted: trunk/media/images/misc/room.xcf
===================================================================
(Binary files differ)

Deleted: trunk/media/images/misc/room2.xcf
===================================================================
(Binary files differ)

Deleted: trunk/media/images/misc/satchel.xcf
===================================================================
(Binary files differ)

Deleted: trunk/media/images/misc/shuttle.xcf
===================================================================
(Binary files differ)

Deleted: trunk/media/images/misc/stairs.xcf
===================================================================
(Binary files differ)

Deleted: trunk/media/images/misc/streetlamp.xcf
===================================================================
(Binary files differ)

Deleted: trunk/media/images/misc/train.xcf
===================================================================
(Binary files differ)

Deleted: trunk/media/images/misc/truck.xcf
===================================================================
(Binary files differ)

Deleted: trunk/media/images/misc/windstillelevel.xcf
===================================================================
(Binary files differ)

Copied: trunk/media/images/objects/ball.png (from rev 2387, trunk/media/images/unsorted/ball.png)


Property changes on: trunk/media/images/objects/ball.png
___________________________________________________________________
Name: svn:mime-type
   + image/png
Name: svn:mergeinfo
   + 

Copied: trunk/media/images/objects/box.xcf (from rev 2387, trunk/media/images/artwork/misc/box.xcf)


Property changes on: trunk/media/images/objects/box.xcf
___________________________________________________________________
Name: svn:mime-type
   + application/x-xcf
Name: svn:mergeinfo
   + 

Copied: trunk/media/images/objects/cryo.xcf (from rev 2387, trunk/media/images/misc/cryo.xcf)


Property changes on: trunk/media/images/objects/cryo.xcf
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream
Name: svn:mergeinfo
   + 

Copied: trunk/media/images/objects/plant.xcf (from rev 2387, trunk/media/images/unsorted/plant.xcf)


Property changes on: trunk/media/images/objects/plant.xcf
___________________________________________________________________
Name: svn:mime-type
   + application/x-xcf
Name: svn:mergeinfo
   + 

Copied: trunk/media/images/objects/satchel.xcf (from rev 2387, trunk/media/images/misc/satchel.xcf)


Property changes on: trunk/media/images/objects/satchel.xcf
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream
Name: svn:mergeinfo
   + 

Copied: trunk/media/images/objects/streetlamp.xcf (from rev 2387, trunk/media/images/misc/streetlamp.xcf)


Property changes on: trunk/media/images/objects/streetlamp.xcf
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream
Name: svn:mergeinfo
   + 

Deleted: trunk/media/images/unsorted/ball.png
===================================================================
(Binary files differ)

Deleted: trunk/media/images/unsorted/plant.xcf
===================================================================
(Binary files differ)

Deleted: trunk/media/images/unsorted/stonesketch.png
===================================================================
(Binary files differ)

Copied: trunk/media/images/vehicles/carsketch.xcf (from rev 2387, trunk/media/images/misc/carsketch.xcf)


Property changes on: trunk/media/images/vehicles/carsketch.xcf
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream
Name: svn:mergeinfo
   + 

Copied: trunk/media/images/vehicles/shuttle.xcf (from rev 2387, trunk/media/images/misc/shuttle.xcf)


Property changes on: trunk/media/images/vehicles/shuttle.xcf
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream
Name: svn:mergeinfo
   + 

Copied: trunk/media/images/vehicles/train.xcf (from rev 2387, trunk/media/images/misc/train.xcf)


Property changes on: trunk/media/images/vehicles/train.xcf
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream
Name: svn:mergeinfo
   + 

Copied: trunk/media/images/vehicles/truck.xcf (from rev 2387, trunk/media/images/misc/truck.xcf)


Property changes on: trunk/media/images/vehicles/truck.xcf
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream
Name: svn:mergeinfo
   + 

Copied: trunk/media/images/weapons/gun.xcf (from rev 2387, trunk/media/images/misc/gun.xcf)


Property changes on: trunk/media/images/weapons/gun.xcf
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream
Name: svn:mergeinfo
   + 

Copied: trunk/media/images/weapons/gun1.xcf (from rev 2387, trunk/media/images/misc/gun1.xcf)


Property changes on: trunk/media/images/weapons/gun1.xcf
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream
Name: svn:mergeinfo
   + 

Copied: trunk/media/images/weapons/gun3.xcf (from rev 2387, trunk/media/images/misc/gun3.xcf)


Property changes on: trunk/media/images/weapons/gun3.xcf
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream
Name: svn:mergeinfo
   + 

Copied: trunk/media/images/weapons/gun4.xcf (from rev 2387, trunk/media/images/misc/gun4.xcf)


Property changes on: trunk/media/images/weapons/gun4.xcf
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream
Name: svn:mergeinfo
   + 

Copied: trunk/media/images/weapons/plasmagranate.xcf (from rev 2387, trunk/media/images/misc/plasmagranate.xcf)


Property changes on: trunk/media/images/weapons/plasmagranate.xcf
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream
Name: svn:mergeinfo
   + 

Copied: trunk/media/images/weapons/rifle.xcf (from rev 2387, trunk/media/images/misc/rifle.xcf)


Property changes on: trunk/media/images/weapons/rifle.xcf
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream
Name: svn:mergeinfo
   + 



From grumbel at mail.berlios.de  Wed Feb  4 13:02:48 2009
From: grumbel at mail.berlios.de (grumbel at BerliOS)
Date: Wed, 4 Feb 2009 13:02:48 +0100
Subject: [Windstille-commit] r2392 - in trunk/media/images: artwork
	artwork/misc characters/misc creatures locations misc tiles
	tiles/misc tiles/unsorted unsorted vehicles
Message-ID: <200902041202.n14C2mTQ005785@sheep.berlios.de>

Author: grumbel
Date: 2009-02-04 13:02:46 +0100 (Wed, 04 Feb 2009)
New Revision: 2392

Added:
   trunk/media/images/artwork/endpic.xcf
   trunk/media/images/artwork/windstille-logosmall.xcf
   trunk/media/images/artwork/windstille.xcf
   trunk/media/images/artwork/windstille_clear.xcf
   trunk/media/images/characters/misc/hero3.xcf
   trunk/media/images/characters/misc/jeff3.xcf
   trunk/media/images/creatures/skeleton.png
   trunk/media/images/creatures/sketches.png
   trunk/media/images/creatures/spike.png
   trunk/media/images/creatures/worm.png
   trunk/media/images/locations/shipbase.xcf
   trunk/media/images/locations/subwayentrance.xcf
   trunk/media/images/locations/subwaystation.xcf
   trunk/media/images/tiles/misc/
   trunk/media/images/tiles/unsorted/
   trunk/media/images/tiles/unsorted/stony.png
   trunk/media/images/tiles/unsorted/tile1.xcf
   trunk/media/images/tiles/unsorted/tile10.xcf
   trunk/media/images/tiles/unsorted/tile11.xcf
   trunk/media/images/tiles/unsorted/tile12.xcf
   trunk/media/images/tiles/unsorted/tile13.xcf
   trunk/media/images/tiles/unsorted/tile14.xcf
   trunk/media/images/tiles/unsorted/tile15.xcf
   trunk/media/images/tiles/unsorted/tile16.xcf
   trunk/media/images/tiles/unsorted/tile17.xcf
   trunk/media/images/tiles/unsorted/tile18.xcf
   trunk/media/images/tiles/unsorted/tile19.xcf
   trunk/media/images/tiles/unsorted/tile2.xcf
   trunk/media/images/tiles/unsorted/tile3.xcf
   trunk/media/images/tiles/unsorted/tile4.xcf
   trunk/media/images/tiles/unsorted/tile40_1.png
   trunk/media/images/tiles/unsorted/tile40_2.png
   trunk/media/images/tiles/unsorted/tile41.xcf
   trunk/media/images/tiles/unsorted/tile42.xcf
   trunk/media/images/tiles/unsorted/tile45.xcf
   trunk/media/images/tiles/unsorted/tile46.xcf
   trunk/media/images/tiles/unsorted/tile47.xcf
   trunk/media/images/tiles/unsorted/tile48.xcf
   trunk/media/images/tiles/unsorted/tile5.xcf
   trunk/media/images/tiles/unsorted/tile6.xcf
   trunk/media/images/tiles/unsorted/tile7.xcf
   trunk/media/images/tiles/unsorted/tile8.xcf
   trunk/media/images/tiles/unsorted/tile9.xcf
   trunk/media/images/unsorted/sketchmu.xcf
   trunk/media/images/unsorted/stuff.xcf
   trunk/media/images/vehicles/tram.png
Removed:
   trunk/media/images/artwork/misc/shipbase.xcf
   trunk/media/images/artwork/misc/skeleton.png
   trunk/media/images/artwork/misc/sketches.png
   trunk/media/images/artwork/misc/spike.png
   trunk/media/images/artwork/misc/stony.png
   trunk/media/images/artwork/misc/subwayentrance.xcf
   trunk/media/images/artwork/misc/subwaystation.xcf
   trunk/media/images/artwork/misc/tile1.xcf
   trunk/media/images/artwork/misc/tile10.xcf
   trunk/media/images/artwork/misc/tile11.xcf
   trunk/media/images/artwork/misc/tile12.xcf
   trunk/media/images/artwork/misc/tile13.xcf
   trunk/media/images/artwork/misc/tile14.xcf
   trunk/media/images/artwork/misc/tile15.xcf
   trunk/media/images/artwork/misc/tile16.xcf
   trunk/media/images/artwork/misc/tile17.xcf
   trunk/media/images/artwork/misc/tile18.xcf
   trunk/media/images/artwork/misc/tile19.xcf
   trunk/media/images/artwork/misc/tile2.xcf
   trunk/media/images/artwork/misc/tile3.xcf
   trunk/media/images/artwork/misc/tile4.xcf
   trunk/media/images/artwork/misc/tile40_1.png
   trunk/media/images/artwork/misc/tile40_2.png
   trunk/media/images/artwork/misc/tile41.xcf
   trunk/media/images/artwork/misc/tile42.xcf
   trunk/media/images/artwork/misc/tile45.xcf
   trunk/media/images/artwork/misc/tile46.xcf
   trunk/media/images/artwork/misc/tile47.xcf
   trunk/media/images/artwork/misc/tile48.xcf
   trunk/media/images/artwork/misc/tile5.xcf
   trunk/media/images/artwork/misc/tile6.xcf
   trunk/media/images/artwork/misc/tile7.xcf
   trunk/media/images/artwork/misc/tile8.xcf
   trunk/media/images/artwork/misc/tile9.xcf
   trunk/media/images/artwork/misc/tiles/
   trunk/media/images/artwork/misc/tram.png
   trunk/media/images/artwork/misc/windstille.xcf
   trunk/media/images/artwork/misc/windstille_clear.xcf
   trunk/media/images/artwork/misc/worm.png
   trunk/media/images/misc/sketchmu.xcf
   trunk/media/images/misc/stuff.xcf
   trunk/media/images/misc/windstille-logosmall.xcf
   trunk/media/images/unsorted/endpic.xcf
   trunk/media/images/unsorted/hero3.xcf
   trunk/media/images/unsorted/jeff3.xcf
Log:
More reorganisation

Copied: trunk/media/images/artwork/endpic.xcf (from rev 2387, trunk/media/images/unsorted/endpic.xcf)


Property changes on: trunk/media/images/artwork/endpic.xcf
___________________________________________________________________
Name: svn:mime-type
   + application/x-xcf
Name: svn:mergeinfo
   + 

Deleted: trunk/media/images/artwork/misc/shipbase.xcf
===================================================================
(Binary files differ)

Deleted: trunk/media/images/artwork/misc/skeleton.png
===================================================================
(Binary files differ)

Deleted: trunk/media/images/artwork/misc/sketches.png
===================================================================
(Binary files differ)

Deleted: trunk/media/images/artwork/misc/spike.png
===================================================================
(Binary files differ)

Deleted: trunk/media/images/artwork/misc/stony.png
===================================================================
(Binary files differ)

Deleted: trunk/media/images/artwork/misc/subwayentrance.xcf
===================================================================
(Binary files differ)

Deleted: trunk/media/images/artwork/misc/subwaystation.xcf
===================================================================
(Binary files differ)

Deleted: trunk/media/images/artwork/misc/tile1.xcf
===================================================================
(Binary files differ)

Deleted: trunk/media/images/artwork/misc/tile10.xcf
===================================================================
(Binary files differ)

Deleted: trunk/media/images/artwork/misc/tile11.xcf
===================================================================
(Binary files differ)

Deleted: trunk/media/images/artwork/misc/tile12.xcf
===================================================================
(Binary files differ)

Deleted: trunk/media/images/artwork/misc/tile13.xcf
===================================================================
(Binary files differ)

Deleted: trunk/media/images/artwork/misc/tile14.xcf
===================================================================
(Binary files differ)

Deleted: trunk/media/images/artwork/misc/tile15.xcf
===================================================================
(Binary files differ)

Deleted: trunk/media/images/artwork/misc/tile16.xcf
===================================================================
(Binary files differ)

Deleted: trunk/media/images/artwork/misc/tile17.xcf
===================================================================
(Binary files differ)

Deleted: trunk/media/images/artwork/misc/tile18.xcf
===================================================================
(Binary files differ)

Deleted: trunk/media/images/artwork/misc/tile19.xcf
===================================================================
(Binary files differ)

Deleted: trunk/media/images/artwork/misc/tile2.xcf
===================================================================
(Binary files differ)

Deleted: trunk/media/images/artwork/misc/tile3.xcf
===================================================================
(Binary files differ)

Deleted: trunk/media/images/artwork/misc/tile4.xcf
===================================================================
(Binary files differ)

Deleted: trunk/media/images/artwork/misc/tile40_1.png
===================================================================
(Binary files differ)

Deleted: trunk/media/images/artwork/misc/tile40_2.png
===================================================================
(Binary files differ)

Deleted: trunk/media/images/artwork/misc/tile41.xcf
===================================================================
(Binary files differ)

Deleted: trunk/media/images/artwork/misc/tile42.xcf
===================================================================
(Binary files differ)

Deleted: trunk/media/images/artwork/misc/tile45.xcf
===================================================================
(Binary files differ)

Deleted: trunk/media/images/artwork/misc/tile46.xcf
===================================================================
(Binary files differ)

Deleted: trunk/media/images/artwork/misc/tile47.xcf
===================================================================
(Binary files differ)

Deleted: trunk/media/images/artwork/misc/tile48.xcf
===================================================================
(Binary files differ)

Deleted: trunk/media/images/artwork/misc/tile5.xcf
===================================================================
(Binary files differ)

Deleted: trunk/media/images/artwork/misc/tile6.xcf
===================================================================
(Binary files differ)

Deleted: trunk/media/images/artwork/misc/tile7.xcf
===================================================================
(Binary files differ)

Deleted: trunk/media/images/artwork/misc/tile8.xcf
===================================================================
(Binary files differ)

Deleted: trunk/media/images/artwork/misc/tile9.xcf
===================================================================
(Binary files differ)

Deleted: trunk/media/images/artwork/misc/tram.png
===================================================================
(Binary files differ)

Deleted: trunk/media/images/artwork/misc/windstille.xcf
===================================================================
(Binary files differ)

Deleted: trunk/media/images/artwork/misc/windstille_clear.xcf
===================================================================
(Binary files differ)

Deleted: trunk/media/images/artwork/misc/worm.png
===================================================================
(Binary files differ)

Copied: trunk/media/images/artwork/windstille-logosmall.xcf (from rev 2387, trunk/media/images/misc/windstille-logosmall.xcf)


Property changes on: trunk/media/images/artwork/windstille-logosmall.xcf
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream
Name: svn:mergeinfo
   + 

Copied: trunk/media/images/artwork/windstille.xcf (from rev 2387, trunk/media/images/artwork/misc/windstille.xcf)


Property changes on: trunk/media/images/artwork/windstille.xcf
___________________________________________________________________
Name: svn:mime-type
   + application/x-xcf
Name: svn:mergeinfo
   + 

Copied: trunk/media/images/artwork/windstille_clear.xcf (from rev 2387, trunk/media/images/artwork/misc/windstille_clear.xcf)


Property changes on: trunk/media/images/artwork/windstille_clear.xcf
___________________________________________________________________
Name: svn:mime-type
   + application/x-xcf
Name: svn:mergeinfo
   + 

Copied: trunk/media/images/characters/misc/hero3.xcf (from rev 2387, trunk/media/images/unsorted/hero3.xcf)


Property changes on: trunk/media/images/characters/misc/hero3.xcf
___________________________________________________________________
Name: svn:mime-type
   + application/x-xcf
Name: svn:mergeinfo
   + 

Copied: trunk/media/images/characters/misc/jeff3.xcf (from rev 2387, trunk/media/images/unsorted/jeff3.xcf)


Property changes on: trunk/media/images/characters/misc/jeff3.xcf
___________________________________________________________________
Name: svn:mime-type
   + application/x-xcf
Name: svn:mergeinfo
   + 

Copied: trunk/media/images/creatures/skeleton.png (from rev 2387, trunk/media/images/artwork/misc/skeleton.png)


Property changes on: trunk/media/images/creatures/skeleton.png
___________________________________________________________________
Name: svn:mime-type
   + image/png
Name: svn:mergeinfo
   + 

Copied: trunk/media/images/creatures/sketches.png (from rev 2387, trunk/media/images/artwork/misc/sketches.png)


Property changes on: trunk/media/images/creatures/sketches.png
___________________________________________________________________
Name: svn:mime-type
   + image/png
Name: svn:mergeinfo
   + 

Copied: trunk/media/images/creatures/spike.png (from rev 2387, trunk/media/images/artwork/misc/spike.png)


Property changes on: trunk/media/images/creatures/spike.png
___________________________________________________________________
Name: svn:mime-type
   + image/png
Name: svn:mergeinfo
   + 

Copied: trunk/media/images/creatures/worm.png (from rev 2387, trunk/media/images/artwork/misc/worm.png)


Property changes on: trunk/media/images/creatures/worm.png
___________________________________________________________________
Name: svn:mime-type
   + image/png
Name: svn:mergeinfo
   + 

Copied: trunk/media/images/locations/shipbase.xcf (from rev 2387, trunk/media/images/artwork/misc/shipbase.xcf)


Property changes on: trunk/media/images/locations/shipbase.xcf
___________________________________________________________________
Name: svn:mime-type
   + application/x-xcf
Name: svn:mergeinfo
   + 

Copied: trunk/media/images/locations/subwayentrance.xcf (from rev 2387, trunk/media/images/artwork/misc/subwayentrance.xcf)


Property changes on: trunk/media/images/locations/subwayentrance.xcf
___________________________________________________________________
Name: svn:mime-type
   + application/x-xcf
Name: svn:mergeinfo
   + 

Copied: trunk/media/images/locations/subwaystation.xcf (from rev 2387, trunk/media/images/artwork/misc/subwaystation.xcf)


Property changes on: trunk/media/images/locations/subwaystation.xcf
___________________________________________________________________
Name: svn:mime-type
   + application/x-xcf
Name: svn:mergeinfo
   + 

Deleted: trunk/media/images/misc/sketchmu.xcf
===================================================================
(Binary files differ)

Deleted: trunk/media/images/misc/stuff.xcf
===================================================================
(Binary files differ)

Deleted: trunk/media/images/misc/windstille-logosmall.xcf
===================================================================
(Binary files differ)

Copied: trunk/media/images/tiles/misc (from rev 2387, trunk/media/images/artwork/misc/tiles)


Property changes on: trunk/media/images/tiles/misc
___________________________________________________________________
Name: svn:mergeinfo
   + 

Copied: trunk/media/images/tiles/unsorted/stony.png (from rev 2387, trunk/media/images/artwork/misc/stony.png)


Property changes on: trunk/media/images/tiles/unsorted/stony.png
___________________________________________________________________
Name: svn:mime-type
   + image/png
Name: svn:mergeinfo
   + 

Copied: trunk/media/images/tiles/unsorted/tile1.xcf (from rev 2387, trunk/media/images/artwork/misc/tile1.xcf)


Property changes on: trunk/media/images/tiles/unsorted/tile1.xcf
___________________________________________________________________
Name: svn:mime-type
   + application/x-xcf
Name: svn:mergeinfo
   + 

Copied: trunk/media/images/tiles/unsorted/tile10.xcf (from rev 2387, trunk/media/images/artwork/misc/tile10.xcf)


Property changes on: trunk/media/images/tiles/unsorted/tile10.xcf
___________________________________________________________________
Name: svn:mime-type
   + application/x-xcf
Name: svn:mergeinfo
   + 

Copied: trunk/media/images/tiles/unsorted/tile11.xcf (from rev 2387, trunk/media/images/artwork/misc/tile11.xcf)


Property changes on: trunk/media/images/tiles/unsorted/tile11.xcf
___________________________________________________________________
Name: svn:mime-type
   + application/x-xcf
Name: svn:mergeinfo
   + 

Copied: trunk/media/images/tiles/unsorted/tile12.xcf (from rev 2387, trunk/media/images/artwork/misc/tile12.xcf)


Property changes on: trunk/media/images/tiles/unsorted/tile12.xcf
___________________________________________________________________
Name: svn:mime-type
   + application/x-xcf
Name: svn:mergeinfo
   + 

Copied: trunk/media/images/tiles/unsorted/tile13.xcf (from rev 2387, trunk/media/images/artwork/misc/tile13.xcf)


Property changes on: trunk/media/images/tiles/unsorted/tile13.xcf
___________________________________________________________________
Name: svn:mime-type
   + application/x-xcf
Name: svn:mergeinfo
   + 

Copied: trunk/media/images/tiles/unsorted/tile14.xcf (from rev 2387, trunk/media/images/artwork/misc/tile14.xcf)


Property changes on: trunk/media/images/tiles/unsorted/tile14.xcf
___________________________________________________________________
Name: svn:mime-type
   + application/x-xcf
Name: svn:mergeinfo
   + 

Copied: trunk/media/images/tiles/unsorted/tile15.xcf (from rev 2387, trunk/media/images/artwork/misc/tile15.xcf)


Property changes on: trunk/media/images/tiles/unsorted/tile15.xcf
___________________________________________________________________
Name: svn:mime-type
   + application/x-xcf
Name: svn:mergeinfo
   + 

Copied: trunk/media/images/tiles/unsorted/tile16.xcf (from rev 2387, trunk/media/images/artwork/misc/tile16.xcf)


Property changes on: trunk/media/images/tiles/unsorted/tile16.xcf
___________________________________________________________________
Name: svn:mime-type
   + application/x-xcf
Name: svn:mergeinfo
   + 

Copied: trunk/media/images/tiles/unsorted/tile17.xcf (from rev 2387, trunk/media/images/artwork/misc/tile17.xcf)


Property changes on: trunk/media/images/tiles/unsorted/tile17.xcf
___________________________________________________________________
Name: svn:mime-type
   + application/x-xcf
Name: svn:mergeinfo
   + 

Copied: trunk/media/images/tiles/unsorted/tile18.xcf (from rev 2387, trunk/media/images/artwork/misc/tile18.xcf)


Property changes on: trunk/media/images/tiles/unsorted/tile18.xcf
___________________________________________________________________
Name: svn:mime-type
   + application/x-xcf
Name: svn:mergeinfo
   + 

Copied: trunk/media/images/tiles/unsorted/tile19.xcf (from rev 2387, trunk/media/images/artwork/misc/tile19.xcf)


Property changes on: trunk/media/images/tiles/unsorted/tile19.xcf
___________________________________________________________________
Name: svn:mime-type
   + application/x-xcf
Name: svn:mergeinfo
   + 

Copied: trunk/media/images/tiles/unsorted/tile2.xcf (from rev 2387, trunk/media/images/artwork/misc/tile2.xcf)


Property changes on: trunk/media/images/tiles/unsorted/tile2.xcf
___________________________________________________________________
Name: svn:mime-type
   + application/x-xcf
Name: svn:mergeinfo
   + 

Copied: trunk/media/images/tiles/unsorted/tile3.xcf (from rev 2387, trunk/media/images/artwork/misc/tile3.xcf)


Property changes on: trunk/media/images/tiles/unsorted/tile3.xcf
___________________________________________________________________
Name: svn:mime-type
   + application/x-xcf
Name: svn:mergeinfo
   + 

Copied: trunk/media/images/tiles/unsorted/tile4.xcf (from rev 2387, trunk/media/images/artwork/misc/tile4.xcf)


Property changes on: trunk/media/images/tiles/unsorted/tile4.xcf
___________________________________________________________________
Name: svn:mime-type
   + application/x-xcf
Name: svn:mergeinfo
   + 

Copied: trunk/media/images/tiles/unsorted/tile40_1.png (from rev 2387, trunk/media/images/artwork/misc/tile40_1.png)


Property changes on: trunk/media/images/tiles/unsorted/tile40_1.png
___________________________________________________________________
Name: svn:mime-type
   + image/png
Name: svn:mergeinfo
   + 

Copied: trunk/media/images/tiles/unsorted/tile40_2.png (from rev 2387, trunk/media/images/artwork/misc/tile40_2.png)


Property changes on: trunk/media/images/tiles/unsorted/tile40_2.png
___________________________________________________________________
Name: svn:mime-type
   + image/png
Name: svn:mergeinfo
   + 

Copied: trunk/media/images/tiles/unsorted/tile41.xcf (from rev 2387, trunk/media/images/artwork/misc/tile41.xcf)


Property changes on: trunk/media/images/tiles/unsorted/tile41.xcf
___________________________________________________________________
Name: svn:mime-type
   + application/x-xcf
Name: svn:mergeinfo
   + 

Copied: trunk/media/images/tiles/unsorted/tile42.xcf (from rev 2387, trunk/media/images/artwork/misc/tile42.xcf)


Property changes on: trunk/media/images/tiles/unsorted/tile42.xcf
___________________________________________________________________
Name: svn:mime-type
   + application/x-xcf
Name: svn:mergeinfo
   + 

Copied: trunk/media/images/tiles/unsorted/tile45.xcf (from rev 2387, trunk/media/images/artwork/misc/tile45.xcf)


Property changes on: trunk/media/images/tiles/unsorted/tile45.xcf
___________________________________________________________________
Name: svn:mime-type
   + application/x-xcf
Name: svn:mergeinfo
   + 

Copied: trunk/media/images/tiles/unsorted/tile46.xcf (from rev 2387, trunk/media/images/artwork/misc/tile46.xcf)


Property changes on: trunk/media/images/tiles/unsorted/tile46.xcf
___________________________________________________________________
Name: svn:mime-type
   + application/x-xcf
Name: svn:mergeinfo
   + 

Copied: trunk/media/images/tiles/unsorted/tile47.xcf (from rev 2387, trunk/media/images/artwork/misc/tile47.xcf)


Property changes on: trunk/media/images/tiles/unsorted/tile47.xcf
___________________________________________________________________
Name: svn:mime-type
   + application/x-xcf
Name: svn:mergeinfo
   + 

Copied: trunk/media/images/tiles/unsorted/tile48.xcf (from rev 2387, trunk/media/images/artwork/misc/tile48.xcf)


Property changes on: trunk/media/images/tiles/unsorted/tile48.xcf
___________________________________________________________________
Name: svn:mime-type
   + application/x-xcf
Name: svn:mergeinfo
   + 

Copied: trunk/media/images/tiles/unsorted/tile5.xcf (from rev 2387, trunk/media/images/artwork/misc/tile5.xcf)


Property changes on: trunk/media/images/tiles/unsorted/tile5.xcf
___________________________________________________________________
Name: svn:mime-type
   + application/x-xcf
Name: svn:mergeinfo
   + 

Copied: trunk/media/images/tiles/unsorted/tile6.xcf (from rev 2387, trunk/media/images/artwork/misc/tile6.xcf)


Property changes on: trunk/media/images/tiles/unsorted/tile6.xcf
___________________________________________________________________
Name: svn:mime-type
   + application/x-xcf
Name: svn:mergeinfo
   + 

Copied: trunk/media/images/tiles/unsorted/tile7.xcf (from rev 2387, trunk/media/images/artwork/misc/tile7.xcf)


Property changes on: trunk/media/images/tiles/unsorted/tile7.xcf
___________________________________________________________________
Name: svn:mime-type
   + application/x-xcf
Name: svn:mergeinfo
   + 

Copied: trunk/media/images/tiles/unsorted/tile8.xcf (from rev 2387, trunk/media/images/artwork/misc/tile8.xcf)


Property changes on: trunk/media/images/tiles/unsorted/tile8.xcf
___________________________________________________________________
Name: svn:mime-type
   + application/x-xcf
Name: svn:mergeinfo
   + 

Copied: trunk/media/images/tiles/unsorted/tile9.xcf (from rev 2387, trunk/media/images/artwork/misc/tile9.xcf)


Property changes on: trunk/media/images/tiles/unsorted/tile9.xcf
___________________________________________________________________
Name: svn:mime-type
   + application/x-xcf
Name: svn:mergeinfo
   + 

Deleted: trunk/media/images/unsorted/endpic.xcf
===================================================================
(Binary files differ)

Deleted: trunk/media/images/unsorted/hero3.xcf
===================================================================
(Binary files differ)

Deleted: trunk/media/images/unsorted/jeff3.xcf
===================================================================
(Binary files differ)

Copied: trunk/media/images/unsorted/sketchmu.xcf (from rev 2387, trunk/media/images/misc/sketchmu.xcf)


Property changes on: trunk/media/images/unsorted/sketchmu.xcf
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream
Name: svn:mergeinfo
   + 

Copied: trunk/media/images/unsorted/stuff.xcf (from rev 2387, trunk/media/images/misc/stuff.xcf)


Property changes on: trunk/media/images/unsorted/stuff.xcf
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream
Name: svn:mergeinfo
   + 

Copied: trunk/media/images/vehicles/tram.png (from rev 2387, trunk/media/images/artwork/misc/tram.png)


Property changes on: trunk/media/images/vehicles/tram.png
___________________________________________________________________
Name: svn:mime-type
   + image/png
Name: svn:mergeinfo
   + 



From grumbel at mail.berlios.de  Wed Feb  4 15:05:47 2009
From: grumbel at mail.berlios.de (grumbel at BerliOS)
Date: Wed, 4 Feb 2009 15:05:47 +0100
Subject: [Windstille-commit] r2393 - in trunk/media/images: . artwork
	artwork/misc characters characters/misc creatures gameplay
	locations objects obsolete tiles unsorted vehicles weapons
Message-ID: <200902041405.n14E5lNc010218@sheep.berlios.de>

Author: grumbel
Date: 2009-02-04 15:05:46 +0100 (Wed, 04 Feb 2009)
New Revision: 2393

Added:
   trunk/media/images/artwork/background1.xcf
   trunk/media/images/artwork/jeff2.xcf
   trunk/media/images/artwork/startscreen.xcf
   trunk/media/images/artwork/startscreen2.xcf
   trunk/media/images/characters/anime.xcf
   trunk/media/images/characters/barkeeper.xcf
   trunk/media/images/characters/character.xcf
   trunk/media/images/characters/character2.xcf
   trunk/media/images/characters/characterfront.xcf
   trunk/media/images/characters/command3.xcf
   trunk/media/images/characters/commander.png
   trunk/media/images/characters/commander2.xcf
   trunk/media/images/characters/commander4.xcf
   trunk/media/images/characters/commander5.xcf
   trunk/media/images/characters/commander6.xcf
   trunk/media/images/characters/frontview.xcf
   trunk/media/images/characters/frontview1.xcf
   trunk/media/images/characters/frontview2.xcf
   trunk/media/images/characters/frontview2_small.xcf
   trunk/media/images/characters/hero3.xcf
   trunk/media/images/characters/jeff.png
   trunk/media/images/characters/jeff3.xcf
   trunk/media/images/characters/worker.xcf
   trunk/media/images/characters/worker2.xcf
   trunk/media/images/characters/yagor.xcf
   trunk/media/images/characters/yagor2.xcf
   trunk/media/images/creatures/atspider.png
   trunk/media/images/creatures/attack.png
   trunk/media/images/creatures/butterfly.png
   trunk/media/images/creatures/igel.xcf
   trunk/media/images/creatures/igle.tga
   trunk/media/images/creatures/qual.png
   trunk/media/images/gameplay/
   trunk/media/images/gameplay/anim1.png
   trunk/media/images/gameplay/anim2.png
   trunk/media/images/gameplay/anim3.png
   trunk/media/images/gameplay/anim4.png
   trunk/media/images/gameplay/artwork12.xcf
   trunk/media/images/gameplay/astroideffect.png
   trunk/media/images/gameplay/climbup.png
   trunk/media/images/gameplay/controlls.png
   trunk/media/images/gameplay/groupmodes.png
   trunk/media/images/gameplay/jumpthrough.png
   trunk/media/images/gameplay/puzzles.png
   trunk/media/images/gameplay/stuffmu.png
   trunk/media/images/gameplay/tilelayout.png
   trunk/media/images/gameplay/tileproblems.png
   trunk/media/images/gameplay/wallgen.png
   trunk/media/images/gameplay/weaponitemselect.xcf
   trunk/media/images/gameplay/windstille-control-scheme.png
   trunk/media/images/gameplay/windstille-movement.png
   trunk/media/images/locations/jungle.png
   trunk/media/images/objects/lamp2.xcf
   trunk/media/images/obsolete/
   trunk/media/images/obsolete/acar.png
   trunk/media/images/obsolete/ahead_rend.tga
   trunk/media/images/obsolete/artwork2.xcf
   trunk/media/images/obsolete/artwork3.xcf
   trunk/media/images/obsolete/artwork4.xcf
   trunk/media/images/obsolete/artwork5.xcf
   trunk/media/images/obsolete/artwork6.xcf
   trunk/media/images/obsolete/bomb.png
   trunk/media/images/obsolete/brainstorm.xcf
   trunk/media/images/obsolete/cameo.tga
   trunk/media/images/obsolete/cameo2.tga
   trunk/media/images/obsolete/cameo3.tga
   trunk/media/images/obsolete/cameo_rend.tga
   trunk/media/images/obsolete/cameo_rend2.tga
   trunk/media/images/obsolete/cameo_rend3.tga
   trunk/media/images/obsolete/diffuse.tga
   trunk/media/images/obsolete/energie.xcf
   trunk/media/images/obsolete/facetex.tga
   trunk/media/images/obsolete/foobar.tga
   trunk/media/images/obsolete/foobarout.tga
   trunk/media/images/obsolete/helmet_windstille.tga
   trunk/media/images/obsolete/hero.xcf
   trunk/media/images/obsolete/hero2.xcf
   trunk/media/images/obsolete/sketchstuff.xcf
   trunk/media/images/obsolete/transporter3tex.tga
   trunk/media/images/obsolete/warpship-tex.tga
   trunk/media/images/obsolete/warpship-texbump.tga
   trunk/media/images/tiles/bluestone1.xcf
   trunk/media/images/tiles/bluestone5.xcf
   trunk/media/images/tiles/bluestone6.xcf
   trunk/media/images/tiles/bluestone7.xcf
   trunk/media/images/tiles/bluestone8.xcf
   trunk/media/images/tiles/green.xcf
   trunk/media/images/vehicles/mech.png
   trunk/media/images/vehicles/mech2.png
   trunk/media/images/vehicles/mech3.png
   trunk/media/images/vehicles/runner.png
   trunk/media/images/vehicles/ship.png
   trunk/media/images/vehicles/shuttle-rescue.xcf
   trunk/media/images/vehicles/starter.png
   trunk/media/images/weapons/flashlight.xcf
   trunk/media/images/weapons/pistol.xcf
Removed:
   trunk/media/images/artwork/misc/artwork12.xcf
   trunk/media/images/artwork/misc/artwork2.xcf
   trunk/media/images/artwork/misc/artwork3.xcf
   trunk/media/images/artwork/misc/artwork4.xcf
   trunk/media/images/artwork/misc/artwork5.xcf
   trunk/media/images/artwork/misc/artwork6.xcf
   trunk/media/images/artwork/misc/astroideffect.png
   trunk/media/images/artwork/misc/atspider.png
   trunk/media/images/artwork/misc/attack.png
   trunk/media/images/artwork/misc/background1.xcf
   trunk/media/images/artwork/misc/bluestone1.xcf
   trunk/media/images/artwork/misc/bluestone2.xcf
   trunk/media/images/artwork/misc/bluestone3.xcf
   trunk/media/images/artwork/misc/bluestone4.xcf
   trunk/media/images/artwork/misc/bluestone5.xcf
   trunk/media/images/artwork/misc/bluestone6.xcf
   trunk/media/images/artwork/misc/bluestone7.xcf
   trunk/media/images/artwork/misc/bluestone8.xcf
   trunk/media/images/artwork/misc/brainstorm.xcf
   trunk/media/images/artwork/misc/butterfly.png
   trunk/media/images/artwork/misc/character.xcf
   trunk/media/images/artwork/misc/character2.xcf
   trunk/media/images/artwork/misc/characterfront.xcf
   trunk/media/images/artwork/misc/energie.xcf
   trunk/media/images/artwork/misc/flashlight.xcf
   trunk/media/images/artwork/misc/green.xcf
   trunk/media/images/artwork/misc/groupmodes.png
   trunk/media/images/artwork/misc/helmet_windstille.tga
   trunk/media/images/artwork/misc/hero.xcf
   trunk/media/images/artwork/misc/hero2.xcf
   trunk/media/images/artwork/misc/igel.xcf
   trunk/media/images/artwork/misc/jeff2.xcf
   trunk/media/images/artwork/misc/jumpthrough.png
   trunk/media/images/artwork/misc/jungle.png
   trunk/media/images/artwork/misc/lamp.xcf
   trunk/media/images/artwork/misc/mech.png
   trunk/media/images/artwork/misc/mech2.png
   trunk/media/images/artwork/misc/mech3.png
   trunk/media/images/artwork/misc/pistol.xcf
   trunk/media/images/artwork/misc/qual.png
   trunk/media/images/artwork/misc/runner.png
   trunk/media/images/artwork/misc/ship.png
   trunk/media/images/artwork/misc/shuttle-rescue.xcf
   trunk/media/images/artwork/misc/sketchstuff.xcf
   trunk/media/images/artwork/misc/starter.png
   trunk/media/images/artwork/misc/startscreen.xcf
   trunk/media/images/artwork/misc/wallgen.png
   trunk/media/images/artwork/misc/weaponitemselect.xcf
   trunk/media/images/characters/misc/anime.xcf
   trunk/media/images/characters/misc/barkeeper.xcf
   trunk/media/images/characters/misc/command3.xcf
   trunk/media/images/characters/misc/commander.png
   trunk/media/images/characters/misc/commander2.xcf
   trunk/media/images/characters/misc/commander4.xcf
   trunk/media/images/characters/misc/commander5.xcf
   trunk/media/images/characters/misc/commander6.xcf
   trunk/media/images/characters/misc/frontview.xcf
   trunk/media/images/characters/misc/frontview1.xcf
   trunk/media/images/characters/misc/frontview2.xcf
   trunk/media/images/characters/misc/frontview2_small.xcf
   trunk/media/images/characters/misc/hero3.xcf
   trunk/media/images/characters/misc/jeff.png
   trunk/media/images/characters/misc/jeff3.xcf
   trunk/media/images/characters/misc/worker.xcf
   trunk/media/images/characters/misc/worker2.xcf
   trunk/media/images/characters/misc/yagor.xcf
   trunk/media/images/characters/misc/yagor2.xcf
   trunk/media/images/particles/
   trunk/media/images/unsorted/acar.png
   trunk/media/images/unsorted/ahead_rend.tga
   trunk/media/images/unsorted/anim1.png
   trunk/media/images/unsorted/anim2.png
   trunk/media/images/unsorted/anim3.png
   trunk/media/images/unsorted/anim4.png
   trunk/media/images/unsorted/bomb.png
   trunk/media/images/unsorted/cameo.tga
   trunk/media/images/unsorted/cameo2.tga
   trunk/media/images/unsorted/cameo3.tga
   trunk/media/images/unsorted/cameo_rend.tga
   trunk/media/images/unsorted/cameo_rend2.tga
   trunk/media/images/unsorted/cameo_rend3.tga
   trunk/media/images/unsorted/climbup.png
   trunk/media/images/unsorted/controlls.png
   trunk/media/images/unsorted/diffuse.tga
   trunk/media/images/unsorted/facetex.tga
   trunk/media/images/unsorted/foobar.tga
   trunk/media/images/unsorted/foobarout.tga
   trunk/media/images/unsorted/igle.tga
   trunk/media/images/unsorted/puzzles.png
   trunk/media/images/unsorted/startscreen.xcf
   trunk/media/images/unsorted/stuffmu.png
   trunk/media/images/unsorted/tilelayout.png
   trunk/media/images/unsorted/tileproblems.png
   trunk/media/images/unsorted/transporter3tex.tga
   trunk/media/images/unsorted/warpship-tex.tga
   trunk/media/images/unsorted/warpship-texbump.tga
   trunk/media/images/unsorted/windstille-control-scheme.png
   trunk/media/images/unsorted/windstille-movement.png
Log:
More reorganisation

Copied: trunk/media/images/artwork/background1.xcf (from rev 2392, trunk/media/images/artwork/misc/background1.xcf)


Property changes on: trunk/media/images/artwork/background1.xcf
___________________________________________________________________
Name: svn:mime-type
   + application/x-xcf
Name: svn:mergeinfo
   + 

Copied: trunk/media/images/artwork/jeff2.xcf (from rev 2392, trunk/media/images/artwork/misc/jeff2.xcf)


Property changes on: trunk/media/images/artwork/jeff2.xcf
___________________________________________________________________
Name: svn:mime-type
   + application/x-xcf
Name: svn:mergeinfo
   + 

Deleted: trunk/media/images/artwork/misc/artwork12.xcf
===================================================================
(Binary files differ)

Deleted: trunk/media/images/artwork/misc/artwork2.xcf
===================================================================
(Binary files differ)

Deleted: trunk/media/images/artwork/misc/artwork3.xcf
===================================================================
(Binary files differ)

Deleted: trunk/media/images/artwork/misc/artwork4.xcf
===================================================================
(Binary files differ)

Deleted: trunk/media/images/artwork/misc/artwork5.xcf
===================================================================
(Binary files differ)

Deleted: trunk/media/images/artwork/misc/artwork6.xcf
===================================================================
(Binary files differ)

Deleted: trunk/media/images/artwork/misc/astroideffect.png
===================================================================
(Binary files differ)

Deleted: trunk/media/images/artwork/misc/atspider.png
===================================================================
(Binary files differ)

Deleted: trunk/media/images/artwork/misc/attack.png
===================================================================
(Binary files differ)

Deleted: trunk/media/images/artwork/misc/background1.xcf
===================================================================
(Binary files differ)

Deleted: trunk/media/images/artwork/misc/bluestone1.xcf
===================================================================
(Binary files differ)

Deleted: trunk/media/images/artwork/misc/bluestone2.xcf
===================================================================
(Binary files differ)

Deleted: trunk/media/images/artwork/misc/bluestone3.xcf
===================================================================
(Binary files differ)

Deleted: trunk/media/images/artwork/misc/bluestone4.xcf
===================================================================
(Binary files differ)

Deleted: trunk/media/images/artwork/misc/bluestone5.xcf
===================================================================
(Binary files differ)

Deleted: trunk/media/images/artwork/misc/bluestone6.xcf
===================================================================
(Binary files differ)

Deleted: trunk/media/images/artwork/misc/bluestone7.xcf
===================================================================
(Binary files differ)

Deleted: trunk/media/images/artwork/misc/bluestone8.xcf
===================================================================
(Binary files differ)

Deleted: trunk/media/images/artwork/misc/brainstorm.xcf
===================================================================
(Binary files differ)

Deleted: trunk/media/images/artwork/misc/butterfly.png
===================================================================
(Binary files differ)

Deleted: trunk/media/images/artwork/misc/character.xcf
===================================================================
(Binary files differ)

Deleted: trunk/media/images/artwork/misc/character2.xcf
===================================================================
(Binary files differ)

Deleted: trunk/media/images/artwork/misc/characterfront.xcf
===================================================================
(Binary files differ)

Deleted: trunk/media/images/artwork/misc/energie.xcf
===================================================================
(Binary files differ)

Deleted: trunk/media/images/artwork/misc/flashlight.xcf
===================================================================
(Binary files differ)

Deleted: trunk/media/images/artwork/misc/green.xcf
===================================================================
(Binary files differ)

Deleted: trunk/media/images/artwork/misc/groupmodes.png
===================================================================
(Binary files differ)

Deleted: trunk/media/images/artwork/misc/helmet_windstille.tga
===================================================================
(Binary files differ)

Deleted: trunk/media/images/artwork/misc/hero.xcf
===================================================================
(Binary files differ)

Deleted: trunk/media/images/artwork/misc/hero2.xcf
===================================================================
(Binary files differ)

Deleted: trunk/media/images/artwork/misc/igel.xcf
===================================================================
(Binary files differ)

Deleted: trunk/media/images/artwork/misc/jeff2.xcf
===================================================================
(Binary files differ)

Deleted: trunk/media/images/artwork/misc/jumpthrough.png
===================================================================
(Binary files differ)

Deleted: trunk/media/images/artwork/misc/jungle.png
===================================================================
(Binary files differ)

Deleted: trunk/media/images/artwork/misc/lamp.xcf
===================================================================
(Binary files differ)

Deleted: trunk/media/images/artwork/misc/mech.png
===================================================================
(Binary files differ)

Deleted: trunk/media/images/artwork/misc/mech2.png
===================================================================
(Binary files differ)

Deleted: trunk/media/images/artwork/misc/mech3.png
===================================================================
(Binary files differ)

Deleted: trunk/media/images/artwork/misc/pistol.xcf
===================================================================
(Binary files differ)

Deleted: trunk/media/images/artwork/misc/qual.png
===================================================================
(Binary files differ)

Deleted: trunk/media/images/artwork/misc/runner.png
===================================================================
(Binary files differ)

Deleted: trunk/media/images/artwork/misc/ship.png
===================================================================
(Binary files differ)

Deleted: trunk/media/images/artwork/misc/shuttle-rescue.xcf
===================================================================
(Binary files differ)

Deleted: trunk/media/images/artwork/misc/sketchstuff.xcf
===================================================================
(Binary files differ)

Deleted: trunk/media/images/artwork/misc/starter.png
===================================================================
(Binary files differ)

Deleted: trunk/media/images/artwork/misc/startscreen.xcf
===================================================================
(Binary files differ)

Deleted: trunk/media/images/artwork/misc/wallgen.png
===================================================================
(Binary files differ)

Deleted: trunk/media/images/artwork/misc/weaponitemselect.xcf
===================================================================
(Binary files differ)

Copied: trunk/media/images/artwork/startscreen.xcf (from rev 2392, trunk/media/images/unsorted/startscreen.xcf)


Property changes on: trunk/media/images/artwork/startscreen.xcf
___________________________________________________________________
Name: svn:mime-type
   + application/x-xcf
Name: svn:mergeinfo
   + 

Copied: trunk/media/images/artwork/startscreen2.xcf (from rev 2392, trunk/media/images/artwork/misc/startscreen.xcf)


Property changes on: trunk/media/images/artwork/startscreen2.xcf
___________________________________________________________________
Name: svn:mime-type
   + application/x-xcf
Name: svn:mergeinfo
   + 

Copied: trunk/media/images/characters/anime.xcf (from rev 2392, trunk/media/images/characters/misc/anime.xcf)

Copied: trunk/media/images/characters/barkeeper.xcf (from rev 2392, trunk/media/images/characters/misc/barkeeper.xcf)

Copied: trunk/media/images/characters/character.xcf (from rev 2392, trunk/media/images/artwork/misc/character.xcf)


Property changes on: trunk/media/images/characters/character.xcf
___________________________________________________________________
Name: svn:mime-type
   + application/x-xcf
Name: svn:mergeinfo
   + 

Copied: trunk/media/images/characters/character2.xcf (from rev 2392, trunk/media/images/artwork/misc/character2.xcf)


Property changes on: trunk/media/images/characters/character2.xcf
___________________________________________________________________
Name: svn:mime-type
   + application/x-xcf
Name: svn:mergeinfo
   + 

Copied: trunk/media/images/characters/characterfront.xcf (from rev 2392, trunk/media/images/artwork/misc/characterfront.xcf)


Property changes on: trunk/media/images/characters/characterfront.xcf
___________________________________________________________________
Name: svn:mime-type
   + application/x-xcf
Name: svn:mergeinfo
   + 

Copied: trunk/media/images/characters/command3.xcf (from rev 2392, trunk/media/images/characters/misc/command3.xcf)

Copied: trunk/media/images/characters/commander.png (from rev 2392, trunk/media/images/characters/misc/commander.png)

Copied: trunk/media/images/characters/commander2.xcf (from rev 2392, trunk/media/images/characters/misc/commander2.xcf)

Copied: trunk/media/images/characters/commander4.xcf (from rev 2392, trunk/media/images/characters/misc/commander4.xcf)


Property changes on: trunk/media/images/characters/commander4.xcf
___________________________________________________________________
Name: svn:mime-type
   + application/x-xcf
Name: svn:mergeinfo
   + 

Copied: trunk/media/images/characters/commander5.xcf (from rev 2392, trunk/media/images/characters/misc/commander5.xcf)

Copied: trunk/media/images/characters/commander6.xcf (from rev 2392, trunk/media/images/characters/misc/commander6.xcf)

Copied: trunk/media/images/characters/frontview.xcf (from rev 2392, trunk/media/images/characters/misc/frontview.xcf)

Copied: trunk/media/images/characters/frontview1.xcf (from rev 2392, trunk/media/images/characters/misc/frontview1.xcf)

Copied: trunk/media/images/characters/frontview2.xcf (from rev 2392, trunk/media/images/characters/misc/frontview2.xcf)

Copied: trunk/media/images/characters/frontview2_small.xcf (from rev 2392, trunk/media/images/characters/misc/frontview2_small.xcf)

Copied: trunk/media/images/characters/hero3.xcf (from rev 2392, trunk/media/images/characters/misc/hero3.xcf)

Copied: trunk/media/images/characters/jeff.png (from rev 2392, trunk/media/images/characters/misc/jeff.png)

Copied: trunk/media/images/characters/jeff3.xcf (from rev 2392, trunk/media/images/characters/misc/jeff3.xcf)

Deleted: trunk/media/images/characters/misc/anime.xcf
===================================================================
(Binary files differ)

Deleted: trunk/media/images/characters/misc/barkeeper.xcf
===================================================================
(Binary files differ)

Deleted: trunk/media/images/characters/misc/command3.xcf
===================================================================
(Binary files differ)

Deleted: trunk/media/images/characters/misc/commander.png
===================================================================
(Binary files differ)

Deleted: trunk/media/images/characters/misc/commander2.xcf
===================================================================
(Binary files differ)

Deleted: trunk/media/images/characters/misc/commander4.xcf
===================================================================
(Binary files differ)

Deleted: trunk/media/images/characters/misc/commander5.xcf
===================================================================
(Binary files differ)

Deleted: trunk/media/images/characters/misc/commander6.xcf
===================================================================
(Binary files differ)

Deleted: trunk/media/images/characters/misc/frontview.xcf
===================================================================
(Binary files differ)

Deleted: trunk/media/images/characters/misc/frontview1.xcf
===================================================================
(Binary files differ)

Deleted: trunk/media/images/characters/misc/frontview2.xcf
===================================================================
(Binary files differ)

Deleted: trunk/media/images/characters/misc/frontview2_small.xcf
===================================================================
(Binary files differ)

Deleted: trunk/media/images/characters/misc/hero3.xcf
===================================================================
(Binary files differ)

Deleted: trunk/media/images/characters/misc/jeff.png
===================================================================
(Binary files differ)

Deleted: trunk/media/images/characters/misc/jeff3.xcf
===================================================================
(Binary files differ)

Deleted: trunk/media/images/characters/misc/worker.xcf
===================================================================
(Binary files differ)

Deleted: trunk/media/images/characters/misc/worker2.xcf
===================================================================
(Binary files differ)

Deleted: trunk/media/images/characters/misc/yagor.xcf
===================================================================
(Binary files differ)

Deleted: trunk/media/images/characters/misc/yagor2.xcf
===================================================================
(Binary files differ)

Copied: trunk/media/images/characters/worker.xcf (from rev 2392, trunk/media/images/characters/misc/worker.xcf)

Copied: trunk/media/images/characters/worker2.xcf (from rev 2392, trunk/media/images/characters/misc/worker2.xcf)

Copied: trunk/media/images/characters/yagor.xcf (from rev 2392, trunk/media/images/characters/misc/yagor.xcf)

Copied: trunk/media/images/characters/yagor2.xcf (from rev 2392, trunk/media/images/characters/misc/yagor2.xcf)

Copied: trunk/media/images/creatures/atspider.png (from rev 2392, trunk/media/images/artwork/misc/atspider.png)


Property changes on: trunk/media/images/creatures/atspider.png
___________________________________________________________________
Name: svn:mime-type
   + image/png
Name: svn:mergeinfo
   + 

Copied: trunk/media/images/creatures/attack.png (from rev 2392, trunk/media/images/artwork/misc/attack.png)


Property changes on: trunk/media/images/creatures/attack.png
___________________________________________________________________
Name: svn:mime-type
   + image/png
Name: svn:mergeinfo
   + 

Copied: trunk/media/images/creatures/butterfly.png (from rev 2392, trunk/media/images/artwork/misc/butterfly.png)


Property changes on: trunk/media/images/creatures/butterfly.png
___________________________________________________________________
Name: svn:mime-type
   + image/png
Name: svn:mergeinfo
   + 

Copied: trunk/media/images/creatures/igel.xcf (from rev 2392, trunk/media/images/artwork/misc/igel.xcf)


Property changes on: trunk/media/images/creatures/igel.xcf
___________________________________________________________________
Name: svn:mime-type
   + application/x-xcf
Name: svn:mergeinfo
   + 

Copied: trunk/media/images/creatures/igle.tga (from rev 2392, trunk/media/images/unsorted/igle.tga)


Property changes on: trunk/media/images/creatures/igle.tga
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream
Name: svn:mergeinfo
   + 

Copied: trunk/media/images/creatures/qual.png (from rev 2392, trunk/media/images/artwork/misc/qual.png)


Property changes on: trunk/media/images/creatures/qual.png
___________________________________________________________________
Name: svn:mime-type
   + image/png
Name: svn:mergeinfo
   + 

Copied: trunk/media/images/gameplay/anim1.png (from rev 2392, trunk/media/images/unsorted/anim1.png)


Property changes on: trunk/media/images/gameplay/anim1.png
___________________________________________________________________
Name: svn:mime-type
   + image/png
Name: svn:mergeinfo
   + 

Copied: trunk/media/images/gameplay/anim2.png (from rev 2392, trunk/media/images/unsorted/anim2.png)


Property changes on: trunk/media/images/gameplay/anim2.png
___________________________________________________________________
Name: svn:mime-type
   + image/png
Name: svn:mergeinfo
   + 

Copied: trunk/media/images/gameplay/anim3.png (from rev 2392, trunk/media/images/unsorted/anim3.png)


Property changes on: trunk/media/images/gameplay/anim3.png
___________________________________________________________________
Name: svn:mime-type
   + image/png
Name: svn:mergeinfo
   + 

Copied: trunk/media/images/gameplay/anim4.png (from rev 2392, trunk/media/images/unsorted/anim4.png)


Property changes on: trunk/media/images/gameplay/anim4.png
___________________________________________________________________
Name: svn:mime-type
   + image/png
Name: svn:mergeinfo
   + 

Copied: trunk/media/images/gameplay/artwork12.xcf (from rev 2392, trunk/media/images/artwork/misc/artwork12.xcf)


Property changes on: trunk/media/images/gameplay/artwork12.xcf
___________________________________________________________________
Name: svn:mime-type
   + application/x-xcf
Name: svn:mergeinfo
   + 

Copied: trunk/media/images/gameplay/astroideffect.png (from rev 2392, trunk/media/images/artwork/misc/astroideffect.png)


Property changes on: trunk/media/images/gameplay/astroideffect.png
___________________________________________________________________
Name: svn:mime-type
   + image/png
Name: svn:mergeinfo
   + 

Copied: trunk/media/images/gameplay/climbup.png (from rev 2392, trunk/media/images/unsorted/climbup.png)


Property changes on: trunk/media/images/gameplay/climbup.png
___________________________________________________________________
Name: svn:mime-type
   + image/png
Name: svn:mergeinfo
   + 

Copied: trunk/media/images/gameplay/controlls.png (from rev 2392, trunk/media/images/unsorted/controlls.png)


Property changes on: trunk/media/images/gameplay/controlls.png
___________________________________________________________________
Name: svn:mime-type
   + image/png
Name: svn:mergeinfo
   + 

Copied: trunk/media/images/gameplay/groupmodes.png (from rev 2392, trunk/media/images/artwork/misc/groupmodes.png)


Property changes on: trunk/media/images/gameplay/groupmodes.png
___________________________________________________________________
Name: svn:mime-type
   + image/png
Name: svn:mergeinfo
   + 

Copied: trunk/media/images/gameplay/jumpthrough.png (from rev 2392, trunk/media/images/artwork/misc/jumpthrough.png)


Property changes on: trunk/media/images/gameplay/jumpthrough.png
___________________________________________________________________
Name: svn:mime-type
   + image/png
Name: svn:mergeinfo
   + 

Copied: trunk/media/images/gameplay/puzzles.png (from rev 2392, trunk/media/images/unsorted/puzzles.png)


Property changes on: trunk/media/images/gameplay/puzzles.png
___________________________________________________________________
Name: svn:mime-type
   + image/png
Name: svn:mergeinfo
   + 

Copied: trunk/media/images/gameplay/stuffmu.png (from rev 2392, trunk/media/images/unsorted/stuffmu.png)


Property changes on: trunk/media/images/gameplay/stuffmu.png
___________________________________________________________________
Name: svn:mime-type
   + image/png
Name: svn:mergeinfo
   + 

Copied: trunk/media/images/gameplay/tilelayout.png (from rev 2392, trunk/media/images/unsorted/tilelayout.png)


Property changes on: trunk/media/images/gameplay/tilelayout.png
___________________________________________________________________
Name: svn:mime-type
   + image/png
Name: svn:mergeinfo
   + 

Copied: trunk/media/images/gameplay/tileproblems.png (from rev 2392, trunk/media/images/unsorted/tileproblems.png)


Property changes on: trunk/media/images/gameplay/tileproblems.png
___________________________________________________________________
Name: svn:mime-type
   + image/png
Name: svn:mergeinfo
   + 

Copied: trunk/media/images/gameplay/wallgen.png (from rev 2392, trunk/media/images/artwork/misc/wallgen.png)


Property changes on: trunk/media/images/gameplay/wallgen.png
___________________________________________________________________
Name: svn:mime-type
   + image/png
Name: svn:mergeinfo
   + 

Copied: trunk/media/images/gameplay/weaponitemselect.xcf (from rev 2392, trunk/media/images/artwork/misc/weaponitemselect.xcf)


Property changes on: trunk/media/images/gameplay/weaponitemselect.xcf
___________________________________________________________________
Name: svn:mime-type
   + application/x-xcf
Name: svn:mergeinfo
   + 

Copied: trunk/media/images/gameplay/windstille-control-scheme.png (from rev 2392, trunk/media/images/unsorted/windstille-control-scheme.png)


Property changes on: trunk/media/images/gameplay/windstille-control-scheme.png
___________________________________________________________________
Name: svn:mime-type
   + image/png
Name: svn:mergeinfo
   + 

Copied: trunk/media/images/gameplay/windstille-movement.png (from rev 2392, trunk/media/images/unsorted/windstille-movement.png)


Property changes on: trunk/media/images/gameplay/windstille-movement.png
___________________________________________________________________
Name: svn:mime-type
   + image/png
Name: svn:mergeinfo
   + 

Copied: trunk/media/images/locations/jungle.png (from rev 2392, trunk/media/images/artwork/misc/jungle.png)


Property changes on: trunk/media/images/locations/jungle.png
___________________________________________________________________
Name: svn:mime-type
   + image/png
Name: svn:mergeinfo
   + 

Copied: trunk/media/images/objects/lamp2.xcf (from rev 2392, trunk/media/images/artwork/misc/lamp.xcf)


Property changes on: trunk/media/images/objects/lamp2.xcf
___________________________________________________________________
Name: svn:mime-type
   + application/x-xcf
Name: svn:mergeinfo
   + 

Copied: trunk/media/images/obsolete/acar.png (from rev 2392, trunk/media/images/unsorted/acar.png)


Property changes on: trunk/media/images/obsolete/acar.png
___________________________________________________________________
Name: svn:mime-type
   + image/png
Name: svn:mergeinfo
   + 

Copied: trunk/media/images/obsolete/ahead_rend.tga (from rev 2392, trunk/media/images/unsorted/ahead_rend.tga)


Property changes on: trunk/media/images/obsolete/ahead_rend.tga
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream
Name: svn:mergeinfo
   + 

Copied: trunk/media/images/obsolete/artwork2.xcf (from rev 2392, trunk/media/images/artwork/misc/artwork2.xcf)


Property changes on: trunk/media/images/obsolete/artwork2.xcf
___________________________________________________________________
Name: svn:mime-type
   + application/x-xcf
Name: svn:mergeinfo
   + 

Copied: trunk/media/images/obsolete/artwork3.xcf (from rev 2392, trunk/media/images/artwork/misc/artwork3.xcf)


Property changes on: trunk/media/images/obsolete/artwork3.xcf
___________________________________________________________________
Name: svn:mime-type
   + application/x-xcf
Name: svn:mergeinfo
   + 

Copied: trunk/media/images/obsolete/artwork4.xcf (from rev 2392, trunk/media/images/artwork/misc/artwork4.xcf)


Property changes on: trunk/media/images/obsolete/artwork4.xcf
___________________________________________________________________
Name: svn:mime-type
   + application/x-xcf
Name: svn:mergeinfo
   + 

Copied: trunk/media/images/obsolete/artwork5.xcf (from rev 2392, trunk/media/images/artwork/misc/artwork5.xcf)


Property changes on: trunk/media/images/obsolete/artwork5.xcf
___________________________________________________________________
Name: svn:mime-type
   + application/x-xcf
Name: svn:mergeinfo
   + 

Copied: trunk/media/images/obsolete/artwork6.xcf (from rev 2392, trunk/media/images/artwork/misc/artwork6.xcf)


Property changes on: trunk/media/images/obsolete/artwork6.xcf
___________________________________________________________________
Name: svn:mime-type
   + application/x-xcf
Name: svn:mergeinfo
   + 

Copied: trunk/media/images/obsolete/bomb.png (from rev 2392, trunk/media/images/unsorted/bomb.png)


Property changes on: trunk/media/images/obsolete/bomb.png
___________________________________________________________________
Name: svn:mime-type
   + image/png
Name: svn:mergeinfo
   + 

Copied: trunk/media/images/obsolete/brainstorm.xcf (from rev 2392, trunk/media/images/artwork/misc/brainstorm.xcf)


Property changes on: trunk/media/images/obsolete/brainstorm.xcf
___________________________________________________________________
Name: svn:mime-type
   + application/x-xcf
Name: svn:mergeinfo
   + 

Copied: trunk/media/images/obsolete/cameo.tga (from rev 2392, trunk/media/images/unsorted/cameo.tga)


Property changes on: trunk/media/images/obsolete/cameo.tga
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream
Name: svn:mergeinfo
   + 

Copied: trunk/media/images/obsolete/cameo2.tga (from rev 2392, trunk/media/images/unsorted/cameo2.tga)


Property changes on: trunk/media/images/obsolete/cameo2.tga
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream
Name: svn:mergeinfo
   + 

Copied: trunk/media/images/obsolete/cameo3.tga (from rev 2392, trunk/media/images/unsorted/cameo3.tga)


Property changes on: trunk/media/images/obsolete/cameo3.tga
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream
Name: svn:mergeinfo
   + 

Copied: trunk/media/images/obsolete/cameo_rend.tga (from rev 2392, trunk/media/images/unsorted/cameo_rend.tga)


Property changes on: trunk/media/images/obsolete/cameo_rend.tga
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream
Name: svn:mergeinfo
   + 

Copied: trunk/media/images/obsolete/cameo_rend2.tga (from rev 2392, trunk/media/images/unsorted/cameo_rend2.tga)


Property changes on: trunk/media/images/obsolete/cameo_rend2.tga
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream
Name: svn:mergeinfo
   + 

Copied: trunk/media/images/obsolete/cameo_rend3.tga (from rev 2392, trunk/media/images/unsorted/cameo_rend3.tga)


Property changes on: trunk/media/images/obsolete/cameo_rend3.tga
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream
Name: svn:mergeinfo
   + 

Copied: trunk/media/images/obsolete/diffuse.tga (from rev 2392, trunk/media/images/unsorted/diffuse.tga)


Property changes on: trunk/media/images/obsolete/diffuse.tga
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream
Name: svn:mergeinfo
   + 

Copied: trunk/media/images/obsolete/energie.xcf (from rev 2392, trunk/media/images/artwork/misc/energie.xcf)


Property changes on: trunk/media/images/obsolete/energie.xcf
___________________________________________________________________
Name: svn:mime-type
   + application/x-xcf
Name: svn:mergeinfo
   + 

Copied: trunk/media/images/obsolete/facetex.tga (from rev 2392, trunk/media/images/unsorted/facetex.tga)


Property changes on: trunk/media/images/obsolete/facetex.tga
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream
Name: svn:mergeinfo
   + 

Copied: trunk/media/images/obsolete/foobar.tga (from rev 2392, trunk/media/images/unsorted/foobar.tga)


Property changes on: trunk/media/images/obsolete/foobar.tga
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream
Name: svn:mergeinfo
   + 

Copied: trunk/media/images/obsolete/foobarout.tga (from rev 2392, trunk/media/images/unsorted/foobarout.tga)


Property changes on: trunk/media/images/obsolete/foobarout.tga
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream
Name: svn:mergeinfo
   + 

Copied: trunk/media/images/obsolete/helmet_windstille.tga (from rev 2392, trunk/media/images/artwork/misc/helmet_windstille.tga)


Property changes on: trunk/media/images/obsolete/helmet_windstille.tga
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream
Name: svn:mergeinfo
   + 

Copied: trunk/media/images/obsolete/hero.xcf (from rev 2392, trunk/media/images/artwork/misc/hero.xcf)


Property changes on: trunk/media/images/obsolete/hero.xcf
___________________________________________________________________
Name: svn:mime-type
   + application/x-xcf
Name: svn:mergeinfo
   + 

Copied: trunk/media/images/obsolete/hero2.xcf (from rev 2392, trunk/media/images/artwork/misc/hero2.xcf)


Property changes on: trunk/media/images/obsolete/hero2.xcf
___________________________________________________________________
Name: svn:mime-type
   + application/x-xcf
Name: svn:mergeinfo
   + 

Copied: trunk/media/images/obsolete/sketchstuff.xcf (from rev 2392, trunk/media/images/artwork/misc/sketchstuff.xcf)


Property changes on: trunk/media/images/obsolete/sketchstuff.xcf
___________________________________________________________________
Name: svn:mime-type
   + application/x-xcf
Name: svn:mergeinfo
   + 

Copied: trunk/media/images/obsolete/transporter3tex.tga (from rev 2392, trunk/media/images/unsorted/transporter3tex.tga)


Property changes on: trunk/media/images/obsolete/transporter3tex.tga
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream
Name: svn:mergeinfo
   + 

Copied: trunk/media/images/obsolete/warpship-tex.tga (from rev 2392, trunk/media/images/unsorted/warpship-tex.tga)


Property changes on: trunk/media/images/obsolete/warpship-tex.tga
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream
Name: svn:mergeinfo
   + 

Copied: trunk/media/images/obsolete/warpship-texbump.tga (from rev 2392, trunk/media/images/unsorted/warpship-texbump.tga)


Property changes on: trunk/media/images/obsolete/warpship-texbump.tga
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream
Name: svn:mergeinfo
   + 

Copied: trunk/media/images/tiles/bluestone1.xcf (from rev 2392, trunk/media/images/artwork/misc/bluestone1.xcf)


Property changes on: trunk/media/images/tiles/bluestone1.xcf
___________________________________________________________________
Name: svn:mime-type
   + application/x-xcf
Name: svn:mergeinfo
   + 

Copied: trunk/media/images/tiles/bluestone5.xcf (from rev 2392, trunk/media/images/artwork/misc/bluestone5.xcf)


Property changes on: trunk/media/images/tiles/bluestone5.xcf
___________________________________________________________________
Name: svn:mime-type
   + application/x-xcf
Name: svn:mergeinfo
   + 

Copied: trunk/media/images/tiles/bluestone6.xcf (from rev 2392, trunk/media/images/artwork/misc/bluestone6.xcf)


Property changes on: trunk/media/images/tiles/bluestone6.xcf
___________________________________________________________________
Name: svn:mime-type
   + application/x-xcf
Name: svn:mergeinfo
   + 

Copied: trunk/media/images/tiles/bluestone7.xcf (from rev 2392, trunk/media/images/artwork/misc/bluestone7.xcf)


Property changes on: trunk/media/images/tiles/bluestone7.xcf
___________________________________________________________________
Name: svn:mime-type
   + application/x-xcf
Name: svn:mergeinfo
   + 

Copied: trunk/media/images/tiles/bluestone8.xcf (from rev 2392, trunk/media/images/artwork/misc/bluestone8.xcf)


Property changes on: trunk/media/images/tiles/bluestone8.xcf
___________________________________________________________________
Name: svn:mime-type
   + application/x-xcf
Name: svn:mergeinfo
   + 

Copied: trunk/media/images/tiles/green.xcf (from rev 2392, trunk/media/images/artwork/misc/green.xcf)


Property changes on: trunk/media/images/tiles/green.xcf
___________________________________________________________________
Name: svn:mime-type
   + application/x-xcf
Name: svn:mergeinfo
   + 

Deleted: trunk/media/images/unsorted/acar.png
===================================================================
(Binary files differ)

Deleted: trunk/media/images/unsorted/ahead_rend.tga
===================================================================
(Binary files differ)

Deleted: trunk/media/images/unsorted/anim1.png
===================================================================
(Binary files differ)

Deleted: trunk/media/images/unsorted/anim2.png
===================================================================
(Binary files differ)

Deleted: trunk/media/images/unsorted/anim3.png
===================================================================
(Binary files differ)

Deleted: trunk/media/images/unsorted/anim4.png
===================================================================
(Binary files differ)

Deleted: trunk/media/images/unsorted/bomb.png
===================================================================
(Binary files differ)

Deleted: trunk/media/images/unsorted/cameo.tga
===================================================================
(Binary files differ)

Deleted: trunk/media/images/unsorted/cameo2.tga
===================================================================
(Binary files differ)

Deleted: trunk/media/images/unsorted/cameo3.tga
===================================================================
(Binary files differ)

Deleted: trunk/media/images/unsorted/cameo_rend.tga
===================================================================
(Binary files differ)

Deleted: trunk/media/images/unsorted/cameo_rend2.tga
===================================================================
(Binary files differ)

Deleted: trunk/media/images/unsorted/cameo_rend3.tga
===================================================================
(Binary files differ)

Deleted: trunk/media/images/unsorted/climbup.png
===================================================================
(Binary files differ)

Deleted: trunk/media/images/unsorted/controlls.png
===================================================================
(Binary files differ)

Deleted: trunk/media/images/unsorted/diffuse.tga
===================================================================
(Binary files differ)

Deleted: trunk/media/images/unsorted/facetex.tga
===================================================================
(Binary files differ)

Deleted: trunk/media/images/unsorted/foobar.tga
===================================================================
(Binary files differ)

Deleted: trunk/media/images/unsorted/foobarout.tga
===================================================================
(Binary files differ)

Deleted: trunk/media/images/unsorted/igle.tga
===================================================================
(Binary files differ)

Deleted: trunk/media/images/unsorted/puzzles.png
===================================================================
(Binary files differ)

Deleted: trunk/media/images/unsorted/startscreen.xcf
===================================================================
(Binary files differ)

Deleted: trunk/media/images/unsorted/stuffmu.png
===================================================================
(Binary files differ)

Deleted: trunk/media/images/unsorted/tilelayout.png
===================================================================
(Binary files differ)

Deleted: trunk/media/images/unsorted/tileproblems.png
===================================================================
(Binary files differ)

Deleted: trunk/media/images/unsorted/transporter3tex.tga
===================================================================
(Binary files differ)

Deleted: trunk/media/images/unsorted/warpship-tex.tga
===================================================================
(Binary files differ)

Deleted: trunk/media/images/unsorted/warpship-texbump.tga
===================================================================
(Binary files differ)

Deleted: trunk/media/images/unsorted/windstille-control-scheme.png
===================================================================
(Binary files differ)

Deleted: trunk/media/images/unsorted/windstille-movement.png
===================================================================
(Binary files differ)

Copied: trunk/media/images/vehicles/mech.png (from rev 2392, trunk/media/images/artwork/misc/mech.png)


Property changes on: trunk/media/images/vehicles/mech.png
___________________________________________________________________
Name: svn:mime-type
   + image/png
Name: svn:mergeinfo
   + 

Copied: trunk/media/images/vehicles/mech2.png (from rev 2392, trunk/media/images/artwork/misc/mech2.png)


Property changes on: trunk/media/images/vehicles/mech2.png
___________________________________________________________________
Name: svn:mime-type
   + image/png
Name: svn:mergeinfo
   + 

Copied: trunk/media/images/vehicles/mech3.png (from rev 2392, trunk/media/images/artwork/misc/mech3.png)


Property changes on: trunk/media/images/vehicles/mech3.png
___________________________________________________________________
Name: svn:mime-type
   + image/png
Name: svn:mergeinfo
   + 

Copied: trunk/media/images/vehicles/runner.png (from rev 2392, trunk/media/images/artwork/misc/runner.png)


Property changes on: trunk/media/images/vehicles/runner.png
___________________________________________________________________
Name: svn:mime-type
   + image/png
Name: svn:mergeinfo
   + 

Copied: trunk/media/images/vehicles/ship.png (from rev 2392, trunk/media/images/artwork/misc/ship.png)


Property changes on: trunk/media/images/vehicles/ship.png
___________________________________________________________________
Name: svn:mime-type
   + image/png
Name: svn:mergeinfo
   + 

Copied: trunk/media/images/vehicles/shuttle-rescue.xcf (from rev 2392, trunk/media/images/artwork/misc/shuttle-rescue.xcf)


Property changes on: trunk/media/images/vehicles/shuttle-rescue.xcf
___________________________________________________________________
Name: svn:mime-type
   + application/x-xcf
Name: svn:mergeinfo
   + 

Copied: trunk/media/images/vehicles/starter.png (from rev 2392, trunk/media/images/artwork/misc/starter.png)


Property changes on: trunk/media/images/vehicles/starter.png
___________________________________________________________________
Name: svn:mime-type
   + image/png
Name: svn:mergeinfo
   + 

Copied: trunk/media/images/weapons/flashlight.xcf (from rev 2392, trunk/media/images/artwork/misc/flashlight.xcf)


Property changes on: trunk/media/images/weapons/flashlight.xcf
___________________________________________________________________
Name: svn:mime-type
   + application/x-xcf
Name: svn:mergeinfo
   + 

Copied: trunk/media/images/weapons/pistol.xcf (from rev 2392, trunk/media/images/artwork/misc/pistol.xcf)


Property changes on: trunk/media/images/weapons/pistol.xcf
___________________________________________________________________
Name: svn:mime-type
   + application/x-xcf
Name: svn:mergeinfo
   + 



From grumbel at mail.berlios.de  Wed Feb  4 15:16:28 2009
From: grumbel at mail.berlios.de (grumbel at BerliOS)
Date: Wed, 4 Feb 2009 15:16:28 +0100
Subject: [Windstille-commit] r2394 - in trunk/media/images: artwork/misc
	objects
Message-ID: <200902041416.n14EGSsV011357@sheep.berlios.de>

Author: grumbel
Date: 2009-02-04 15:16:22 +0100 (Wed, 04 Feb 2009)
New Revision: 2394

Added:
   trunk/media/images/objects/doors.png
   trunk/media/images/objects/doors2.png
Removed:
   trunk/media/images/artwork/misc/doors.png
   trunk/media/images/artwork/misc/doors2.png
Log:
More reorganisation

Deleted: trunk/media/images/artwork/misc/doors.png
===================================================================
(Binary files differ)

Deleted: trunk/media/images/artwork/misc/doors2.png
===================================================================
(Binary files differ)

Copied: trunk/media/images/objects/doors.png (from rev 2392, trunk/media/images/artwork/misc/doors.png)


Property changes on: trunk/media/images/objects/doors.png
___________________________________________________________________
Name: svn:mime-type
   + image/png
Name: svn:mergeinfo
   + 

Copied: trunk/media/images/objects/doors2.png (from rev 2392, trunk/media/images/artwork/misc/doors2.png)


Property changes on: trunk/media/images/objects/doors2.png
___________________________________________________________________
Name: svn:mime-type
   + image/png
Name: svn:mergeinfo
   + 



From grumbel at mail.berlios.de  Wed Feb  4 18:25:39 2009
From: grumbel at mail.berlios.de (grumbel at BerliOS)
Date: Wed, 4 Feb 2009 18:25:39 +0100
Subject: [Windstille-commit] r2395 - trunk/media/images/locations
Message-ID: <200902041725.n14HPd0c030957@sheep.berlios.de>

Author: grumbel
Date: 2009-02-04 18:19:57 +0100 (Wed, 04 Feb 2009)
New Revision: 2395

Added:
   trunk/media/images/locations/apartment.xcf
   trunk/media/images/locations/cave3.xcf
   trunk/media/images/locations/skybridge.xcf
Modified:
   trunk/media/images/locations/haus2.xcf
Log:
More sketches

Added: trunk/media/images/locations/apartment.xcf
===================================================================
(Binary files differ)


Property changes on: trunk/media/images/locations/apartment.xcf
___________________________________________________________________
Name: svn:mime-type
   + application/x-xcf

Added: trunk/media/images/locations/cave3.xcf
===================================================================
(Binary files differ)


Property changes on: trunk/media/images/locations/cave3.xcf
___________________________________________________________________
Name: svn:mime-type
   + application/x-xcf

Modified: trunk/media/images/locations/haus2.xcf
===================================================================
(Binary files differ)

Added: trunk/media/images/locations/skybridge.xcf
===================================================================
(Binary files differ)


Property changes on: trunk/media/images/locations/skybridge.xcf
___________________________________________________________________
Name: svn:mime-type
   + application/x-xcf



From grumbel at mail.berlios.de  Wed Feb  4 19:06:16 2009
From: grumbel at mail.berlios.de (grumbel at BerliOS)
Date: Wed, 4 Feb 2009 19:06:16 +0100
Subject: [Windstille-commit] r2396 - trunk/media/images/locations
Message-ID: <200902041806.n14I6Guu006423@sheep.berlios.de>

Author: grumbel
Date: 2009-02-04 19:03:49 +0100 (Wed, 04 Feb 2009)
New Revision: 2396

Added:
   trunk/media/images/locations/arboretum3.xcf
   trunk/media/images/locations/hangar2.xcf
   trunk/media/images/locations/holoplatform.xcf
   trunk/media/images/locations/nstarentrance.xcf
   trunk/media/images/locations/nstartmineentrance.xcf
   trunk/media/images/locations/yagorsoffice.xcf
Log:
More old stuff

Added: trunk/media/images/locations/arboretum3.xcf
===================================================================
(Binary files differ)


Property changes on: trunk/media/images/locations/arboretum3.xcf
___________________________________________________________________
Name: svn:mime-type
   + application/x-xcf

Added: trunk/media/images/locations/hangar2.xcf
===================================================================
(Binary files differ)


Property changes on: trunk/media/images/locations/hangar2.xcf
___________________________________________________________________
Name: svn:mime-type
   + application/x-xcf

Added: trunk/media/images/locations/holoplatform.xcf
===================================================================
(Binary files differ)


Property changes on: trunk/media/images/locations/holoplatform.xcf
___________________________________________________________________
Name: svn:mime-type
   + application/x-xcf

Added: trunk/media/images/locations/nstarentrance.xcf
===================================================================
(Binary files differ)


Property changes on: trunk/media/images/locations/nstarentrance.xcf
___________________________________________________________________
Name: svn:mime-type
   + application/x-xcf

Added: trunk/media/images/locations/nstartmineentrance.xcf
===================================================================
(Binary files differ)


Property changes on: trunk/media/images/locations/nstartmineentrance.xcf
___________________________________________________________________
Name: svn:mime-type
   + application/x-xcf

Added: trunk/media/images/locations/yagorsoffice.xcf
===================================================================
(Binary files differ)


Property changes on: trunk/media/images/locations/yagorsoffice.xcf
___________________________________________________________________
Name: svn:mime-type
   + application/x-xcf



From grumbel at mail.berlios.de  Wed Feb  4 19:07:50 2009
From: grumbel at mail.berlios.de (grumbel at BerliOS)
Date: Wed, 4 Feb 2009 19:07:50 +0100
Subject: [Windstille-commit] r2397 - in trunk/media/images: locations tiles
Message-ID: <200902041807.n14I7o3o008793@sheep.berlios.de>

Author: grumbel
Date: 2009-02-04 19:07:15 +0100 (Wed, 04 Feb 2009)
New Revision: 2397

Added:
   trunk/media/images/locations/nstarcellar.xcf
   trunk/media/images/tiles/arboretum2.xcf
   trunk/media/images/tiles/library2.xcf
   trunk/media/images/tiles/library3.xcf
Log:
More old stuff

Added: trunk/media/images/locations/nstarcellar.xcf
===================================================================
(Binary files differ)


Property changes on: trunk/media/images/locations/nstarcellar.xcf
___________________________________________________________________
Name: svn:mime-type
   + application/x-xcf

Added: trunk/media/images/tiles/arboretum2.xcf
===================================================================
(Binary files differ)


Property changes on: trunk/media/images/tiles/arboretum2.xcf
___________________________________________________________________
Name: svn:mime-type
   + application/x-xcf

Added: trunk/media/images/tiles/library2.xcf
===================================================================
(Binary files differ)


Property changes on: trunk/media/images/tiles/library2.xcf
___________________________________________________________________
Name: svn:mime-type
   + application/x-xcf

Added: trunk/media/images/tiles/library3.xcf
===================================================================
(Binary files differ)


Property changes on: trunk/media/images/tiles/library3.xcf
___________________________________________________________________
Name: svn:mime-type
   + application/x-xcf



From grumbel at mail.berlios.de  Wed Feb  4 19:20:14 2009
From: grumbel at mail.berlios.de (grumbel at BerliOS)
Date: Wed, 4 Feb 2009 19:20:14 +0100
Subject: [Windstille-commit] r2398 - in trunk/media/images: creatures
	locations tiles vehicles weapons
Message-ID: <200902041820.n14IKE25024330@sheep.berlios.de>

Author: grumbel
Date: 2009-02-04 19:19:54 +0100 (Wed, 04 Feb 2009)
New Revision: 2398

Added:
   trunk/media/images/creatures/creature.xcf
   trunk/media/images/locations/subway.xcf
   trunk/media/images/tiles/metalwall.xcf
   trunk/media/images/vehicles/car.xcf
   trunk/media/images/vehicles/policecar.xcf
   trunk/media/images/weapons/satchel.xcf
Log:
More old stuff

Added: trunk/media/images/creatures/creature.xcf
===================================================================
(Binary files differ)


Property changes on: trunk/media/images/creatures/creature.xcf
___________________________________________________________________
Name: svn:mime-type
   + application/x-xcf

Added: trunk/media/images/locations/subway.xcf
===================================================================
(Binary files differ)


Property changes on: trunk/media/images/locations/subway.xcf
___________________________________________________________________
Name: svn:mime-type
   + application/x-xcf

Added: trunk/media/images/tiles/metalwall.xcf
===================================================================
(Binary files differ)


Property changes on: trunk/media/images/tiles/metalwall.xcf
___________________________________________________________________
Name: svn:mime-type
   + application/x-xcf

Added: trunk/media/images/vehicles/car.xcf
===================================================================
(Binary files differ)


Property changes on: trunk/media/images/vehicles/car.xcf
___________________________________________________________________
Name: svn:mime-type
   + application/x-xcf

Added: trunk/media/images/vehicles/policecar.xcf
===================================================================
(Binary files differ)


Property changes on: trunk/media/images/vehicles/policecar.xcf
___________________________________________________________________
Name: svn:mime-type
   + application/x-xcf

Added: trunk/media/images/weapons/satchel.xcf
===================================================================
(Binary files differ)


Property changes on: trunk/media/images/weapons/satchel.xcf
___________________________________________________________________
Name: svn:mime-type
   + application/x-xcf



From grumbel at mail.berlios.de  Wed Feb  4 20:14:36 2009
From: grumbel at mail.berlios.de (grumbel at BerliOS)
Date: Wed, 4 Feb 2009 20:14:36 +0100
Subject: [Windstille-commit] r2399 - in trunk/media/models/characters: .
	nstartguard police
Message-ID: <200902041914.n14JEacd026567@sheep.berlios.de>

Author: grumbel
Date: 2009-02-04 20:14:07 +0100 (Wed, 04 Feb 2009)
New Revision: 2399

Added:
   trunk/media/models/characters/nstartguard/
   trunk/media/models/characters/nstartguard/nstarguard.xcf
   trunk/media/models/characters/police/
   trunk/media/models/characters/police/police.xcf
Log:
More graphics

Added: trunk/media/models/characters/nstartguard/nstarguard.xcf
===================================================================
(Binary files differ)


Property changes on: trunk/media/models/characters/nstartguard/nstarguard.xcf
___________________________________________________________________
Name: svn:mime-type
   + application/x-xcf

Added: trunk/media/models/characters/police/police.xcf
===================================================================
(Binary files differ)


Property changes on: trunk/media/models/characters/police/police.xcf
___________________________________________________________________
Name: svn:mime-type
   + application/x-xcf



From grumbel at mail.berlios.de  Thu Feb  5 09:08:02 2009
From: grumbel at mail.berlios.de (grumbel at BerliOS)
Date: Thu, 5 Feb 2009 09:08:02 +0100
Subject: [Windstille-commit] r2400 - in trunk/media/images: artwork/misc
	gameplay locations
Message-ID: <200902050808.n15882o6013264@sheep.berlios.de>

Author: grumbel
Date: 2009-02-05 09:08:01 +0100 (Thu, 05 Feb 2009)
New Revision: 2400

Added:
   trunk/media/images/gameplay/chapter1.png
   trunk/media/images/gameplay/chapter2.png
   trunk/media/images/gameplay/chapter3.png
   trunk/media/images/gameplay/hud.xcf
   trunk/media/images/gameplay/hud2.xcf
   trunk/media/images/gameplay/plan1.png
   trunk/media/images/locations/vrnoise.xcf
Removed:
   trunk/media/images/artwork/misc/storybord/
Log:
More reorganisation

Copied: trunk/media/images/gameplay/chapter1.png (from rev 2392, trunk/media/images/artwork/misc/storybord/chapter1.png)


Property changes on: trunk/media/images/gameplay/chapter1.png
___________________________________________________________________
Name: svn:mime-type
   + image/png
Name: svn:mergeinfo
   + 

Copied: trunk/media/images/gameplay/chapter2.png (from rev 2392, trunk/media/images/artwork/misc/storybord/chapter2.png)


Property changes on: trunk/media/images/gameplay/chapter2.png
___________________________________________________________________
Name: svn:mime-type
   + image/png
Name: svn:mergeinfo
   + 

Copied: trunk/media/images/gameplay/chapter3.png (from rev 2392, trunk/media/images/artwork/misc/storybord/chapter3.png)


Property changes on: trunk/media/images/gameplay/chapter3.png
___________________________________________________________________
Name: svn:mime-type
   + image/png
Name: svn:mergeinfo
   + 

Copied: trunk/media/images/gameplay/hud.xcf (from rev 2392, trunk/media/images/artwork/misc/storybord/hud.xcf)


Property changes on: trunk/media/images/gameplay/hud.xcf
___________________________________________________________________
Name: svn:mime-type
   + application/x-xcf
Name: svn:mergeinfo
   + 

Copied: trunk/media/images/gameplay/hud2.xcf (from rev 2392, trunk/media/images/artwork/misc/storybord/hud2.xcf)


Property changes on: trunk/media/images/gameplay/hud2.xcf
___________________________________________________________________
Name: svn:mime-type
   + application/x-xcf
Name: svn:mergeinfo
   + 

Copied: trunk/media/images/gameplay/plan1.png (from rev 2392, trunk/media/images/artwork/misc/storybord/plan1.png)


Property changes on: trunk/media/images/gameplay/plan1.png
___________________________________________________________________
Name: svn:mime-type
   + image/png
Name: svn:mergeinfo
   + 

Copied: trunk/media/images/locations/vrnoise.xcf (from rev 2392, trunk/media/images/artwork/misc/storybord/vrnoise.xcf)


Property changes on: trunk/media/images/locations/vrnoise.xcf
___________________________________________________________________
Name: svn:mime-type
   + application/x-xcf
Name: svn:mergeinfo
   + 



From grumbel at mail.berlios.de  Thu Feb  5 11:23:17 2009
From: grumbel at mail.berlios.de (grumbel at BerliOS)
Date: Thu, 5 Feb 2009 11:23:17 +0100
Subject: [Windstille-commit] r2401 - in trunk/media/images: artwork/misc
	creatures gui locations objects obsolete
Message-ID: <200902051023.n15ANH1C009359@sheep.berlios.de>

Author: grumbel
Date: 2009-02-05 11:23:15 +0100 (Thu, 05 Feb 2009)
New Revision: 2401

Added:
   trunk/media/images/creatures/swarmhost.png
   trunk/media/images/gui/comminterface.png
   trunk/media/images/locations/lava.png
   trunk/media/images/locations/smasher.png
   trunk/media/images/objects/brokencapsule.png
   trunk/media/images/objects/defencegrid.xcf
   trunk/media/images/objects/robo.png
   trunk/media/images/obsolete/artwork.xcf
   trunk/media/images/obsolete/colorfullstuff.png
   trunk/media/images/obsolete/game.xcf
   trunk/media/images/obsolete/jetpack.xcf
   trunk/media/images/obsolete/sit.xcf
   trunk/media/images/obsolete/sprite_jump.xcf
   trunk/media/images/obsolete/sprite_jump_large.xcf
Removed:
   trunk/media/images/artwork/misc/artwork.xcf
   trunk/media/images/artwork/misc/background2.xcf
   trunk/media/images/artwork/misc/brokencapsule.png
   trunk/media/images/artwork/misc/colorfullstuff.png
   trunk/media/images/artwork/misc/comminterface.png
   trunk/media/images/artwork/misc/defencegrid.xcf
   trunk/media/images/artwork/misc/game.xcf
   trunk/media/images/artwork/misc/jetpack.xcf
   trunk/media/images/artwork/misc/lava.png
   trunk/media/images/artwork/misc/pod.png
   trunk/media/images/artwork/misc/robo.png
   trunk/media/images/artwork/misc/sit.xcf
   trunk/media/images/artwork/misc/smasher.png
   trunk/media/images/artwork/misc/sprite_jump.xcf
   trunk/media/images/artwork/misc/sprite_jump_large.xcf
   trunk/media/images/artwork/misc/swarmhost.png
Log:
More reorganisation

Deleted: trunk/media/images/artwork/misc/artwork.xcf
===================================================================
(Binary files differ)

Deleted: trunk/media/images/artwork/misc/background2.xcf
===================================================================
(Binary files differ)

Deleted: trunk/media/images/artwork/misc/brokencapsule.png
===================================================================
(Binary files differ)

Deleted: trunk/media/images/artwork/misc/colorfullstuff.png
===================================================================
(Binary files differ)

Deleted: trunk/media/images/artwork/misc/comminterface.png
===================================================================
(Binary files differ)

Deleted: trunk/media/images/artwork/misc/defencegrid.xcf
===================================================================
(Binary files differ)

Deleted: trunk/media/images/artwork/misc/game.xcf
===================================================================
(Binary files differ)

Deleted: trunk/media/images/artwork/misc/jetpack.xcf
===================================================================
(Binary files differ)

Deleted: trunk/media/images/artwork/misc/lava.png
===================================================================
(Binary files differ)

Deleted: trunk/media/images/artwork/misc/pod.png
===================================================================
(Binary files differ)

Deleted: trunk/media/images/artwork/misc/robo.png
===================================================================
(Binary files differ)

Deleted: trunk/media/images/artwork/misc/sit.xcf
===================================================================
(Binary files differ)

Deleted: trunk/media/images/artwork/misc/smasher.png
===================================================================
(Binary files differ)

Deleted: trunk/media/images/artwork/misc/sprite_jump.xcf
===================================================================
(Binary files differ)

Deleted: trunk/media/images/artwork/misc/sprite_jump_large.xcf
===================================================================
(Binary files differ)

Deleted: trunk/media/images/artwork/misc/swarmhost.png
===================================================================
(Binary files differ)

Copied: trunk/media/images/creatures/swarmhost.png (from rev 2392, trunk/media/images/artwork/misc/swarmhost.png)


Property changes on: trunk/media/images/creatures/swarmhost.png
___________________________________________________________________
Name: svn:mime-type
   + image/png
Name: svn:mergeinfo
   + 

Copied: trunk/media/images/gui/comminterface.png (from rev 2392, trunk/media/images/artwork/misc/comminterface.png)


Property changes on: trunk/media/images/gui/comminterface.png
___________________________________________________________________
Name: svn:mime-type
   + image/png
Name: svn:mergeinfo
   + 

Copied: trunk/media/images/locations/lava.png (from rev 2392, trunk/media/images/artwork/misc/lava.png)


Property changes on: trunk/media/images/locations/lava.png
___________________________________________________________________
Name: svn:mime-type
   + image/png
Name: svn:mergeinfo
   + 

Copied: trunk/media/images/locations/smasher.png (from rev 2392, trunk/media/images/artwork/misc/smasher.png)


Property changes on: trunk/media/images/locations/smasher.png
___________________________________________________________________
Name: svn:mime-type
   + image/png
Name: svn:mergeinfo
   + 

Copied: trunk/media/images/objects/brokencapsule.png (from rev 2392, trunk/media/images/artwork/misc/brokencapsule.png)


Property changes on: trunk/media/images/objects/brokencapsule.png
___________________________________________________________________
Name: svn:mime-type
   + image/png
Name: svn:mergeinfo
   + 

Copied: trunk/media/images/objects/defencegrid.xcf (from rev 2392, trunk/media/images/artwork/misc/defencegrid.xcf)


Property changes on: trunk/media/images/objects/defencegrid.xcf
___________________________________________________________________
Name: svn:mime-type
   + application/x-xcf
Name: svn:mergeinfo
   + 

Copied: trunk/media/images/objects/robo.png (from rev 2392, trunk/media/images/artwork/misc/robo.png)


Property changes on: trunk/media/images/objects/robo.png
___________________________________________________________________
Name: svn:mime-type
   + image/png
Name: svn:mergeinfo
   + 

Copied: trunk/media/images/obsolete/artwork.xcf (from rev 2392, trunk/media/images/artwork/misc/artwork.xcf)


Property changes on: trunk/media/images/obsolete/artwork.xcf
___________________________________________________________________
Name: svn:mime-type
   + application/x-xcf
Name: svn:mergeinfo
   + 

Copied: trunk/media/images/obsolete/colorfullstuff.png (from rev 2392, trunk/media/images/artwork/misc/colorfullstuff.png)


Property changes on: trunk/media/images/obsolete/colorfullstuff.png
___________________________________________________________________
Name: svn:mime-type
   + image/png
Name: svn:mergeinfo
   + 

Copied: trunk/media/images/obsolete/game.xcf (from rev 2392, trunk/media/images/artwork/misc/game.xcf)


Property changes on: trunk/media/images/obsolete/game.xcf
___________________________________________________________________
Name: svn:mime-type
   + application/x-xcf
Name: svn:mergeinfo
   + 

Copied: trunk/media/images/obsolete/jetpack.xcf (from rev 2392, trunk/media/images/artwork/misc/jetpack.xcf)


Property changes on: trunk/media/images/obsolete/jetpack.xcf
___________________________________________________________________
Name: svn:mime-type
   + application/x-xcf
Name: svn:mergeinfo
   + 

Copied: trunk/media/images/obsolete/sit.xcf (from rev 2392, trunk/media/images/artwork/misc/sit.xcf)


Property changes on: trunk/media/images/obsolete/sit.xcf
___________________________________________________________________
Name: svn:mime-type
   + application/x-xcf
Name: svn:mergeinfo
   + 

Copied: trunk/media/images/obsolete/sprite_jump.xcf (from rev 2392, trunk/media/images/artwork/misc/sprite_jump.xcf)


Property changes on: trunk/media/images/obsolete/sprite_jump.xcf
___________________________________________________________________
Name: svn:mime-type
   + application/x-xcf
Name: svn:mergeinfo
   + 

Copied: trunk/media/images/obsolete/sprite_jump_large.xcf (from rev 2392, trunk/media/images/artwork/misc/sprite_jump_large.xcf)


Property changes on: trunk/media/images/obsolete/sprite_jump_large.xcf
___________________________________________________________________
Name: svn:mime-type
   + application/x-xcf
Name: svn:mergeinfo
   + 



From grumbel at mail.berlios.de  Thu Feb  5 11:39:52 2009
From: grumbel at mail.berlios.de (grumbel at BerliOS)
Date: Thu, 5 Feb 2009 11:39:52 +0100
Subject: [Windstille-commit] r2402 - in trunk: . physics2d windstille/test
Message-ID: <200902051039.n15AdqBx011244@sheep.berlios.de>

Author: grumbel
Date: 2009-02-05 11:39:51 +0100 (Thu, 05 Feb 2009)
New Revision: 2402

Added:
   trunk/physics2d/
Removed:
   trunk/windstille/test/physics/
Log:
Moved physics2d test out of windstille directory

Copied: trunk/physics2d (from rev 2401, trunk/windstille/test/physics)


Property changes on: trunk/physics2d
___________________________________________________________________
Name: svn:ignore
   + 
main
.sconsign
.sconsign.dblite

Name: svn:mergeinfo
   + 



From grumbel at mail.berlios.de  Thu Feb  5 18:11:47 2009
From: grumbel at mail.berlios.de (grumbel at BerliOS)
Date: Thu, 5 Feb 2009 18:11:47 +0100
Subject: [Windstille-commit] r2403 - in trunk: media/images media/images/gui
	media/images/locations media/images/particles
	media/images/particles/particles windstille/data/images/particles
Message-ID: <200902051711.n15HBlnx006717@sheep.berlios.de>

Author: grumbel
Date: 2009-02-05 18:08:37 +0100 (Thu, 05 Feb 2009)
New Revision: 2403

Added:
   trunk/media/images/gui/button3.xcf
   trunk/media/images/locations/cave4.xcf
   trunk/media/images/particles/
   trunk/media/images/particles/particles/
Removed:
   trunk/windstille/data/images/particles/snow.xcf
Log:
Some more reorganisation and a new sketch

Added: trunk/media/images/gui/button3.xcf
===================================================================
(Binary files differ)


Property changes on: trunk/media/images/gui/button3.xcf
___________________________________________________________________
Name: svn:mime-type
   + application/x-xcf

Added: trunk/media/images/locations/cave4.xcf
===================================================================
(Binary files differ)


Property changes on: trunk/media/images/locations/cave4.xcf
___________________________________________________________________
Name: svn:mime-type
   + application/x-xcf

Copied: trunk/media/images/particles/particles (from rev 2401, trunk/windstille/data/images/particles)


Property changes on: trunk/media/images/particles/particles
___________________________________________________________________
Name: svn:mergeinfo
   + 

Deleted: trunk/windstille/data/images/particles/snow.xcf
===================================================================
(Binary files differ)



From grumbel at mail.berlios.de  Thu Feb  5 18:12:29 2009
From: grumbel at mail.berlios.de (grumbel at BerliOS)
Date: Thu, 5 Feb 2009 18:12:29 +0100
Subject: [Windstille-commit] r2404 - trunk/media/images/particles
Message-ID: <200902051712.n15HCT7p006779@sheep.berlios.de>

Author: grumbel
Date: 2009-02-05 18:12:29 +0100 (Thu, 05 Feb 2009)
New Revision: 2404

Added:
   trunk/media/images/particles/snow.xcf
Removed:
   trunk/media/images/particles/particles/
Log:
Cleaning up my cleanup

Copied: trunk/media/images/particles/snow.xcf (from rev 2403, trunk/media/images/particles/particles/snow.xcf)


Property changes on: trunk/media/images/particles/snow.xcf
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream
Name: svn:mergeinfo
   + 



From grumbel at mail.berlios.de  Thu Feb  5 18:28:18 2009
From: grumbel at mail.berlios.de (grumbel at BerliOS)
Date: Thu, 5 Feb 2009 18:28:18 +0100
Subject: [Windstille-commit] r2405 - in trunk: . sdl-jstest windstille/tools
Message-ID: <200902051728.n15HSIJB008793@sheep.berlios.de>

Author: grumbel
Date: 2009-02-05 18:28:18 +0100 (Thu, 05 Feb 2009)
New Revision: 2405

Added:
   trunk/sdl-jstest/
Removed:
   trunk/windstille/tools/sdl-jstest/
Log:
Moved sdl-test into trunk/

Copied: trunk/sdl-jstest (from rev 2404, trunk/windstille/tools/sdl-jstest)


Property changes on: trunk/sdl-jstest
___________________________________________________________________
Name: svn:ignore
   + sdl-jstest

Name: svn:mergeinfo
   + 



From grumbel at mail.berlios.de  Thu Feb  5 18:35:40 2009
From: grumbel at mail.berlios.de (grumbel at BerliOS)
Date: Thu, 5 Feb 2009 18:35:40 +0100
Subject: [Windstille-commit] r2406 - in trunk/windstille: . test
Message-ID: <200902051735.n15HZeKM014342@sheep.berlios.de>

Author: grumbel
Date: 2009-02-05 18:35:39 +0100 (Thu, 05 Feb 2009)
New Revision: 2406

Added:
   trunk/windstille/test/SConstruct
Modified:
   trunk/windstille/TODO
   trunk/windstille/test/
Log:
Old stuff floating around in my working copy

Modified: trunk/windstille/TODO
===================================================================
--- trunk/windstille/TODO	2009-02-05 17:28:18 UTC (rev 2405)
+++ trunk/windstille/TODO	2009-02-05 17:35:39 UTC (rev 2406)
@@ -1,3 +1,5 @@
+http://orange.blender.org/blog/the-amazing-incredible-monkey-brush#more-49
+
 - add bison checks
 
 - collision detection


Property changes on: trunk/windstille/test
___________________________________________________________________
Name: svn:ignore
   - .sconsign

   + matrix_test
.sconsign
.sconsign.dblite


Added: trunk/windstille/test/SConstruct
===================================================================
--- trunk/windstille/test/SConstruct	2009-02-05 17:28:18 UTC (rev 2405)
+++ trunk/windstille/test/SConstruct	2009-02-05 17:35:39 UTC (rev 2406)
@@ -0,0 +1,5 @@
+env = Environment(CXXFLAGS=['-Wall'], CPPPATH=['../src/'])
+env.Program('matrix_test',
+            ['matrix_test.cpp', '../src/math/matrix.cpp'])
+
+# EOF #



From grumbel at mail.berlios.de  Thu Feb  5 18:42:52 2009
From: grumbel at mail.berlios.de (grumbel at BerliOS)
Date: Thu, 5 Feb 2009 18:42:52 +0100
Subject: [Windstille-commit] r2407 - in trunk: . blender windstille/tools
Message-ID: <200902051742.n15HgqK1022375@sheep.berlios.de>

Author: grumbel
Date: 2009-02-05 18:42:50 +0100 (Thu, 05 Feb 2009)
New Revision: 2407

Added:
   trunk/blender/
   trunk/blender/bone_export.py
   trunk/blender/bone_test.blend
   trunk/blender/ipo_export.py
   trunk/blender/mesh_export.py
   trunk/blender/model_test.blend
   trunk/blender/pose_export.py
   trunk/blender/windstille_export.py
Removed:
   trunk/windstille/tools/bone_export.py
   trunk/windstille/tools/bone_test.blend
   trunk/windstille/tools/ipo_export.py
   trunk/windstille/tools/mesh_export.py
   trunk/windstille/tools/model_test.blend
   trunk/windstille/tools/pose_export.py
   trunk/windstille/tools/windstille_export.py
Log:
Moved some more tools out of windstille/ tree

Copied: trunk/blender/bone_export.py (from rev 2405, trunk/windstille/tools/bone_export.py)


Property changes on: trunk/blender/bone_export.py
___________________________________________________________________
Name: svn:mergeinfo
   + 

Copied: trunk/blender/bone_test.blend (from rev 2405, trunk/windstille/tools/bone_test.blend)


Property changes on: trunk/blender/bone_test.blend
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream
Name: svn:mergeinfo
   + 

Copied: trunk/blender/ipo_export.py (from rev 2405, trunk/windstille/tools/ipo_export.py)


Property changes on: trunk/blender/ipo_export.py
___________________________________________________________________
Name: svn:mergeinfo
   + 

Copied: trunk/blender/mesh_export.py (from rev 2405, trunk/windstille/tools/mesh_export.py)


Property changes on: trunk/blender/mesh_export.py
___________________________________________________________________
Name: svn:mergeinfo
   + 

Copied: trunk/blender/model_test.blend (from rev 2405, trunk/windstille/tools/model_test.blend)


Property changes on: trunk/blender/model_test.blend
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream
Name: svn:mergeinfo
   + 

Copied: trunk/blender/pose_export.py (from rev 2405, trunk/windstille/tools/pose_export.py)


Property changes on: trunk/blender/pose_export.py
___________________________________________________________________
Name: svn:mergeinfo
   + 

Copied: trunk/blender/windstille_export.py (from rev 2405, trunk/windstille/tools/windstille_export.py)


Property changes on: trunk/blender/windstille_export.py
___________________________________________________________________
Name: svn:mergeinfo
   + 

Deleted: trunk/windstille/tools/bone_export.py
===================================================================
--- trunk/windstille/tools/bone_export.py	2009-02-05 17:35:39 UTC (rev 2406)
+++ trunk/windstille/tools/bone_export.py	2009-02-05 17:42:50 UTC (rev 2407)
@@ -1,81 +0,0 @@
-import Blender
-from Blender import *
-
-arms = Blender.Armature.Get()
-
-def vec2str(vec):
-    return "%f %f %f" % (vec.x,vec.y,vec.z)
-
-def euler2str(euler):
-    return "%f %f %f" % (euler.x, euler.y, euler.z)
-
-def quat2str(quat):
-    return "%f %f %f %f" % (quat.w, quat.x, quat.y, quat.z)
-
-def matrix2str(indent, m):
-        return          ("%9f %9f %9f %9f\n" % (m[0][0], m[0][1], m[0][2], 0)) + \
-               indent + ("%9f %9f %9f %9f\n" % (m[1][0], m[1][1], m[1][2], 0)) + \
-               indent + ("%9f %9f %9f %9f\n" % (m[2][0], m[2][1], m[2][2], 0)) + \
-               indent + ("%9f %9f %9f %9f"   % (      0,       0,       0, 1))
-
-def list2str(lst):
-    str = ""
-    for i in lst:
-        str += " \"%s\"" % i
-    return str
-
-def export_armature(out, armature):
-    out.write(";; -*- scheme -*-\n")
-    out.write("(armature\n")
-    out.write("  (name \"%s\")\n" % armature.name)
-    out.write("  (bones\n")
-
-    for bone in armature.bones.values():
-        if bone.name[:3] == "IK_": # ignore helper bones
-            out.write("    ;; ignoring bone: %s\n" % bone.name)
-            out.write("\n")
-        else:
-            if bone.parent:
-                out.write("    (bone\n")
-            else:
-                out.write("    (bone ;; a root bone\n")
-
-            out.write("      (name      \"%s\")\n" % bone.name)
-
-            out.write("      (children %s)\n" % list2str(map(lambda b: b.name, bone.children)))
-
-            # If a bone lacks parent its head is in armature space,
-            # else in local bonespace
-            if bone.parent:
-                out.write("      (parent    \"%s\")\n" % bone.parent.name)
-                out.write("      (head      %s)\n" % (vec2str(bone.head['BONESPACE']),))
-            else:
-                out.write("      (parent )\n")
-                out.write("      (head      %s)\n" % (vec2str(bone.head['ARMATURESPACE'])))
-
-            out.write("      (length    %s)\n" % (bone.length))
-            out.write("      (matrix   %s)\n" % matrix2str(" "*16, bone.matrix['BONESPACE']))
-            out.write("      (quat      %s)\n" % quat2str(bone.matrix['BONESPACE'].toQuat()))
-            out.write("      (euler     %s)\n" % euler2str(bone.matrix['BONESPACE'].toEuler()))
-            # out.write("###  BoneSpace:"
-            # out.write(bone.matrix['BONESPACE']
-            # print
-            # out.write("  ArmatureSpace:"
-            #  out.write(bone.matrix['ARMATURESPACE']
-            out.write("     )\n\n")
-    out.write("  ) ;; bones\n")
-    out.write(" ) ;; armature\n")
-
-print "Windstille Bone Exporter:"
-for armature in arms.values():
-    filename = "/tmp/bone-%s.scm" % armature.name
-    out = file(filename, "w")
-    print "  - exporting to '%s'..." % filename,
-    export_armature(out, armature)
-    out.close()
-    print "done"
-print
-
-Draw.PupMenu("Export ok")
-
-# EOF #

Deleted: trunk/windstille/tools/bone_test.blend
===================================================================
(Binary files differ)

Deleted: trunk/windstille/tools/ipo_export.py
===================================================================
--- trunk/windstille/tools/ipo_export.py	2009-02-05 17:35:39 UTC (rev 2406)
+++ trunk/windstille/tools/ipo_export.py	2009-02-05 17:42:50 UTC (rev 2407)
@@ -1,35 +0,0 @@
-import Blender
-import Blender.Armature
-from Blender import Ipo
-
-def vec2str(vec):
-    return "%f %f %f" % (vec.x,vec.y,vec.z)
-
-def export_action(out, action):
-    out.write(";; -*- scheme -*-\n")
-    out.write("(action\n")
-    out.write("  (name \"%s\")\n" % action.getName())
-    out.write("  (bones\n")
-    for ipo in action.getAllChannelIpos().values():
-        out.write("    (bone\n")
-        out.write("      (name \"%s\")\n" % ipo.getName())
-        for (v, k) in [('quatw', Ipo.PO_QUATW), ('quatx', Ipo.PO_QUATX),
-                       ('quaty', Ipo.PO_QUATY), ('quatz', Ipo.PO_QUATZ)]:
-            if ipo[k]:
-                out.write("      (%s " % v)
-                for point in ipo[k].bezierPoints:
-                    for v in point.vec:
-                        out.write("%f %f %f" % (v[0], v[1], v[2]))
-                out.write(")\n")                    
-        out.write("     ) ;; bone \n")
-    out.write("   ) ;; bones \n")
-    out.write(" ) ;; action\n")    
-
-for action in Blender.Armature.NLA.GetActions().values():
-    out = file("/tmp/action-%s.scm" % action.getName(), "w")
-    export_action(out, action)
-    out.close
-
-Draw.PupMenu("Export ok")
-
-# EOF #

Deleted: trunk/windstille/tools/mesh_export.py
===================================================================
--- trunk/windstille/tools/mesh_export.py	2009-02-05 17:35:39 UTC (rev 2406)
+++ trunk/windstille/tools/mesh_export.py	2009-02-05 17:42:50 UTC (rev 2407)
@@ -1,268 +0,0 @@
-import Blender
-from Blender import *
-
-class MeshData:
-    """Data structure that holds a list of faces"""
-
-    def __init__(self, texture_filename):
-        # Filename of the used texture
-        self.texture_filename = texture_filename
-
-        # [FaceData, ...]
-        self.faces    = []
-
-        # [VerticeData, ...]
-        self.vertices = []
-
-        # { orig_index : [VerticeData, ...], ... }
-        self.vertmap = {}
-
-        # { (bonename, weight) : VertexGroup, ...}
-        self.groups = {}
-
-    def add(self, face):
-        self.faces.append(face)
-        
-        for vert in face.verts:
-            if not self.vertmap.has_key(vert.orig_idx):
-                self.vertmap[vert.orig_idx] = []
-            self.vertmap[vert.orig_idx].append(vert)
-
-    def add_influences(self, orig_idx, influences):
-        """influences -> [(bonename, weight), ...]"""
-        if not self.vertmap.has_key(orig_idx):
-            pass # this is normal due to MeshData not being a complete
-                 # Blender mesh when multiple textures are in play
-                 
-        else:
-            # orig_idx is part of this mesh
-            for v in self.vertmap[orig_idx]:
-                # print v.orig_idx
-                v.influences = influences
-            
-            for (bone,weight) in influences:
-                key = (bone, weight)
-                if not self.groups.has_key(key):
-                    self.groups[key] = VertexGroup(bone, weight)
-                self.groups[key].add(self.vertmap[orig_idx])
-
-    def finalize(self):
-        """Reorders vertex indexes and merge vertexes which have the
-        same UV coordinates, thus bringing the MeshData into a stage
-        where it is ready to be written out to file"""
-
-        # Generate a list of uniq vertices
-        uniq_vertices = {}
-        for face in self.faces:
-            for vert in face.verts:
-                uniq_vertices[vert.key()] = vert
-
-        # Merge duplicate vertices
-        for face in self.faces:
-            for i in xrange(0, len(face.verts)):
-                face.verts[i] = uniq_vertices[face.verts[i].key()]
-
-        for group in self.groups.values():
-            for i in xrange(0, len(group.vertices)):
-                group.vertices[i] = uniq_vertices[group.vertices[i].key()]
-
-        # Generate new index numbering
-        self.vertices = uniq_vertices.values()
-        for i, vert in enumerate(self.vertices):
-            vert.index = i
-
-        ## Remove '//' infront of the filename that Blender inserts there
-        self.texture_filename = self.texture_filename[2:]
-      
-class FaceData:
-    def __init__(self, verts):
-        self.verts   = verts
-
-class VertexData:
-    def __init__(self, orig_idx, co, uv, normal):
-        self.orig_idx   = orig_idx
-        self.co         = co
-        self.uv         = uv
-        self.normal     = normal
-        self.index      = -1
-        self.influences = []
-
-    def key(self):
-        """Return something that can be used as a key to compare if two vertices are equal"""
-        return (self.co[0], self.co[1], self.co[2],
-                self.normal[0], self.normal[1], self.normal[2],
-                self.uv[0], self.uv[1])
-    
-
-class VertexGroup:
-    def __init__(self, bone, weight):
-        self.bone     = bone
-        self.weight   = weight
-        self.vertices = [] # [VertexData,...]
-
-    def add(self, v):
-        self.vertices.extend(v)
-
-class WindstilleModel:
-    """WindstilleMesh is used to collect data vertex and face data
-    from Blender internals and convert it to a form usable by
-    OpenGL/Windstille"""  
-
-    def __init__(self):
-        # dictionary of { "texture_filename.png" : MeshData, ... } 
-        self.mesh_data   = {}
-
-    def add(self, blender_mesh):
-        """Convert Blender data structures into something that is used by
-        this export script"""
-        
-        # Convert blender meshes to MeshData
-        for face in blender_mesh.faces:
-            if face.image:
-                texture_filename = face.image.filename
-            else:
-                texture_filename = "//404.png"
-            
-            if not self.mesh_data.has_key(texture_filename):
-                mesh = self.mesh_data[texture_filename] = MeshData(texture_filename)
-            else:
-                mesh = self.mesh_data[texture_filename]
-
-            if face.uv == []:
-                raise "Face doesn't have UV"
-
-            verts = []
-            for i in [0, 1, 2]:
-                verts.append(VertexData(face.v[i].index,
-                                        [face.v[i].co[0], face.v[i].co[1], face.v[i].co[2]],
-                                        [face.uv[i][0], 1.0 - face.uv[i][1]],
-                                        [face.v[i].no[1], face.v[i].no[1], face.v[i].no[2]]))
-            mesh.add(FaceData(verts))
-
-            # Write out another triangle in case we have a quad
-            if len(face.v) == 4:
-                verts = []
-                for i in [0, 2, 3]:
-                    verts.append(VertexData(face.v[i].index,
-                                            [face.v[i].co[0], face.v[i].co[1], face.v[i].co[2]],
-                                            [face.uv[i][0], 1.0 - face.uv[i][1]],
-                                            [face.v[i].no[0], face.v[i].no[1], face.v[i].no[2]]))
-                mesh.add(FaceData(verts))
-
-        for mesh in self.mesh_data.values():
-            for vert in blender_mesh.verts:
-                #if blender_mesh.getVertexInfluences(vert.index) == []:
-                #    print "No influences on", vert.index, "this sounds like a bug"
-                #else:
-                #    print vert.index, "Ok"
-                mesh.add_influences(vert.index, blender_mesh.getVertexInfluences(vert.index))
-
-
-    def finalize(self):
-        for (texture, mesh) in self.mesh_data.iteritems():
-            mesh.finalize()
-
-    def write(self, out):
-        out.write(";; -*- scheme -*-\n")
-        out.write("(windstille-model\n")
-        out.write("  (name \"\")\n")
-    
-        for mesh in self.mesh_data.values():
-            out.write("  (mesh\n")
-            out.write("    (name \"\")\n")
-            out.write("    (texture \"%s\")\n\n" % mesh.texture_filename)
-            out.write("    (vertices\n")
-            for v in mesh.vertices:
-                out.write("      %10f %10f %10f ;; %d was %d\n" % (v.co[0], v.co[1], v.co[2],
-                                                                   v.index, v.orig_idx))
-            out.write("     ) ;; vertices\n\n")
-
-            out.write("    (normals\n") 
-            for vert in mesh.vertices:
-                out.write("      %9f %9f %9f\n" % (vert.normal[0],
-                                              vert.normal[1],
-                                              vert.normal[2]))
-            out.write("     ) ;; normals\n\n")
-
-            out.write("    (texcoords\n")
-            for vert in mesh.vertices:
-                out.write("      %f %f\n" % (vert.uv[0], vert.uv[1]))
-            out.write("     ) ;; texcoords\n\n")
-
-            out.write("    (triangles\n")
-            for face in mesh.faces:
-                out.write("      %d %d %d\n" % (face.verts[0].index,
-                                                face.verts[1].index,
-                                                face.verts[2].index))
-            out.write("     ) ;; triangles\n\n")
-
-            out.write("    (groups\n")
-            for group in mesh.groups.values():
-                out.write("      (group\n")
-                out.write("        (bone    \"%s\")\n" % group.bone)
-                out.write("        (weight   %f)\n" % group.weight)
-                out.write("        (vertices")
-                for v in set(map(lambda v: v.index, group.vertices)):
-                    out.write(" %d" % v) 
-                out.write(")\n")
-                out.write("       )\n")
-            out.write("     ) ;; groups\n\n")
-             
-#             out.write("    (influences\n")
-#             for vert in mesh.vertices:
-#                 if vert.influences != []:
-#                     out.write("      (vertex\n")
-#                     out.write("        (index %d)\n" % vert.index)
-#                     out.write("        (influeces")
-#                     for (bone, weight) in vert.influences:
-#                         out.write("\n          (influence (weight %f) (bone \"%s\"))" % (weight, bone))
-#                     out.write("))\n")
-#             out.write("     ) ;; influencs\n\n")
-            
-            out.write("   ) ;; mesh\n\n")
-        out.write(" ) ;; windstille-model\n")
-        out.write("\n;; EOF ;;\n")
-
-    def print_stats(self):
-        """Print some stats, vertex count, face count and such"""
-        print "+===================================================================="
-        print "| WindstilleSprite"
-        print "+===================================================================="
-        print "| Model:" 
-        for i, mesh in enumerate(self.mesh_data.values()):
-            print "|   Mesh:        %d/%d" % (i+1, len(self.mesh_data))
-            print "|     Texture:  ", mesh.texture_filename
-            print "|     Faces:    ", len(mesh.faces)
-            print "|     Vertices: ", len(mesh.vertices)
-            print "|"
-        print "+===================================================================="
-
-
-def export(filename):
-    model = WindstilleModel()
-
-    layers = Blender.Scene.getCurrent().Layers
-
-    for obj in Blender.Object.Get():
-        mesh = obj.getData()
-        if (type(mesh) is not Blender.Types.NMeshType) or not mesh.faces:
-            pass # ignore anything that isn't a mesh
-        elif (obj.Layers & layers) == 0:
-            print "Skipping \"%s\" because it is on an inactive layer" % obj.getName()
-        else:
-            model.add(mesh)
-
-    model.finalize()
-
-    file = open(filename, "w")
-
-    model.write(file)
-    file.close()
-
-    model.print_stats()
-
-export("/tmp/mesh.scm")
-
-Draw.PupMenu("Export ok")
-
-# EOF #

Deleted: trunk/windstille/tools/model_test.blend
===================================================================
(Binary files differ)

Deleted: trunk/windstille/tools/pose_export.py
===================================================================
--- trunk/windstille/tools/pose_export.py	2009-02-05 17:35:39 UTC (rev 2406)
+++ trunk/windstille/tools/pose_export.py	2009-02-05 17:42:50 UTC (rev 2407)
@@ -1,46 +0,0 @@
-import Blender
-from Blender import *
-
-def is_identity(quat):
-    return quat.w == 1.0 and quat.x == 0.0 and quat.y == 0.0 and quat.z == 0.0
-
-def is_null_loc(loc):
-    return loc.x == 0 and loc.y == 0 and loc.z == 0
-
-def export_pose(out, obj):
-    pose = obj.getPose()
-
-    out.write(";; -*- scheme -*-\n")
-    out.write("(pose\n")
-    out.write("  (name \"%s\")\n" % obj.getName())
-    out.write("  (bones\n")
-    for bone in pose.bones.values():
-        if bone.name[:3] == "IK_":
-            out.write("    ;; ignoring '%s', IK control bone\n" % bone.name)
-        elif is_identity(bone.quat) and is_null_loc(bone.loc):
-            out.write("    ;; ignoring '%s', neutral position\n" % bone.name)        
-        else: 
-            out.write("    (bone\n")
-            out.write("      (name \"%s\")\n" % bone.name)
-            out.write("      (loc %f %f %f)\n" %
-                      (bone.loc.x, bone.loc.y, bone.loc.z))
-            out.write("      (quat %f %f %f %f))\n" % 
-                      (bone.quat.w, bone.quat.x, bone.quat.y, bone.quat.z))
-    out.write("   ) ;; bones\n")
-    out.write(" ) ;; pose\n")
-    out.write("\n;; EOF ;;\n")
-
-print "Windstille Pose Exporter:"
-for frame in xrange(1, 20):
-    Blender.Set("curframe", frame)
-    for obj in Blender.Object.Get():
-        if obj.type == "Armature":
-            filename = "/tmp/pose-%s-frame%03d.scm" % (obj.getName(), frame)
-            out = file(filename, "w")
-            export_pose(out, obj)
-            out.close()
-            print "Wrote:", filename
-
-Draw.PupMenu("Export ok")
-
-# EOF #

Deleted: trunk/windstille/tools/windstille_export.py
===================================================================
--- trunk/windstille/tools/windstille_export.py	2009-02-05 17:35:39 UTC (rev 2406)
+++ trunk/windstille/tools/windstille_export.py	2009-02-05 17:42:50 UTC (rev 2407)
@@ -1,612 +0,0 @@
-#!BPY
-
-"""
-Name: 'Windstille Exporter'
-Blender: 233
-Group: 'Export'
-Tip: 'Export meshes/actions to windstille format'
-"""
-
-##  $Id: windstille_main.hxx,v 1.4 2003/11/07 13:00:39 grumbel Exp $
-## 
-##  Windstille - A Jump'n Shoot Game
-##  Copyright (C) 2005 Matthias Braun <matze at braunis.de>,
-##                     Ingo Ruhnke <grumbel at gmx.de>
-##
-##  This program is free software; you can redistribute it and/or
-##  modify it under the terms of the GNU General Public License
-##  as published by the Free Software Foundation; either version 2
-##  of the License, or (at your option) any later version.
-##
-##  This program is distributed in the hope that it will be useful,
-##  but WITHOUT ANY WARRANTY; without even the implied warranty of
-##  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
-##  GNU General Public License for more details.
-## 
-##  You should have received a copy of the GNU General Public License
-##  along with this program; if not, write to the Free Software
-##  Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA.
-
-# Simple Python script that shows how to export animations from
-# Blender
-# Put this script in your $HOME/.blender/scripts directory.
-#
-# See windstille/docs/models.txt for more details
-
-### TODO ###
-# - add handling of meshes with armatures, but without actions
-# - change the code to use some more MathUtil instead of its own quaternion/matrix code 
-############
-
-import string
-import struct, shlex, os.path, math
-import Blender
-from Blender import NMesh
-from Blender import Window
-
-# SAMPLEFRAMES, only export every nth frame of the animation
-DEFAULT_SAMPLERATE = 5
-# ZOOM, is multiplied with all vertex coordinates
-ZOOM = 32.0
-DEFAULT_SPEED = 1.0
-SPEED_MULTIPLIER = 9.8
-# DO NOT change this
-FORMAT_VERSION = 2
-
-def progress(percent, str):
-#    print "%3.2f%% - %s" % (percent*100, str)
-    Window.DrawProgressBar(percent, str)
-
-### Some math helper functions ###
-def matrix2quaternion(m):
-  tr = 1.0 + m[0][0] + m[1][1] + m[2][2]
-  if tr > .00001:
-    s = math.sqrt(tr)
-    w = s / 2.0
-    s = 0.5 / s
-    x = (m[1][2] - m[2][1]) * s
-    y = (m[2][0] - m[0][2]) * s
-    z = (m[0][1] - m[1][0]) * s
-  elif m[0][0] > m[1][1] and m[0][0] > m[2][2]:
-    s = math.sqrt(1.0 + m[0][0] - m[1][1] - m[2][2])
-    x = s / 2.0
-    s = 0.5 / s
-    y = (m[0][1] + m[1][0]) * s
-    z = (m[2][0] + m[0][2]) * s
-    w = (m[1][2] - m[2][1]) * s
-  elif m[1][1] > m[2][2]:
-    s = math.sqrt(1.0 + m[1][1] - m[0][0] - m[2][2])
-    y = s / 2.0
-    s = 0.5 / s
-    x = (m[0][1] + m[1][0]) * s
-    z = (m[1][2] + m[2][1]) * s
-    w = (m[2][0] - m[0][2]) * s
-  else:
-    s = math.sqrt(1.0 + m[2][2] - m[0][0] - m[1][1])
-    z = s / 2.0
-    s = 0.5 / s
-    x = (m[2][0] + m[0][2]) * s
-    y = (m[1][2] + m[2][1]) * s
-    w = (m[0][1] - m[1][0]) * s
-
-  return quaternion_normalize([w, x, y, z])
-
-def quaternion_normalize(q):
-  l = math.sqrt(q[0] * q[0] + q[1] * q[1] + q[2] * q[2] + q[3] * q[3])
-  return q[0] / l, q[1] / l, q[2] / l, q[3] / l
-
-def quaternion_to_axisangle(q):
-  cos_a = q[0]
-  angle = math.acos(cos_a) * 2.0
-  sin_a = math.sqrt(1.0 - cos_a * cos_a)
-  if(sin_a < .0005 or sin_a > .0005): sin_a = 1
-  return angle, q[1]/sin_a, q[2]/sin_a, q[3]/sin_a
-
-def get_text(textname):
-  """Little shortcut function to return the content of
-  Blender.Text.get(textname) as a single string and do a little error
-  handling in addition"""
-  try:
-    textobj = Blender.Text.Get(textname)
-  except Exception, err:
-    print "WARNING: ", err
-    return ""
-  else:
-    return string.join(textobj.asLines(), "\n")
-
-### Data Structures to hold the Mesh ###
-class MeshData:
-  def __init__(self, texture_filename):
-    # Filename of the used texture
-    self.texture_filename = texture_filename
-
-    # [FaceData, ...]
-    self.faces            = []
-
-    self.vertices         = []
-
-  def merge(self, mesh):
-      """Merges a mesh with self"""
-      if self.texture_filename != mesh.texture_filename:
-          raise Exception, "Error: MeshData:merge: meshes can only be merged if they have the same texture"
-      elif self.vertices != []:
-          raise Exception, "Error: MeshData:merge: Must merge the meshes before finalization"
-      else:
-          self.faces += mesh.faces
-
-  def finalize(self):
-      """Reorders vertex indexes and merge vertexes which have the
-      same UV coordinates, thus bringing the MeshData into a stage
-      where it is ready to be written out to file"""
-
-      # Merge vertices with the same UV
-      vertices = {}
-      for face in self.faces:
-          for vert in face.verts:
-              key = (vert.uv[0], vert.uv[1])
-              vertices[key] = vert
-
-      print "Vertices: ", len(vertices)
-
-      # FIXME: This might not work with vertices that have the same
-      # uv, but different positions
-      for face in self.faces:
-          for vi in range(0, len(face.verts)):
-              key = (face.verts[vi].uv[0], face.verts[vi].uv[1])
-              face.verts[vi] = vertices[key]
-
-      self.vertices = vertices.values()
-
-      # Sort the vertices by object to allow faster export in collect_frame_data()
-      self.vertices.sort(lambda x, y: cmp(x.object.getName(), y.object.getName()))
-      
-      # Generate new index numbering
-      for i, vert in enumerate(self.vertices):
-          vert.new_index = i
-
-      ## Remove '//' infront of the filename that Blender inserts there
-      self.texture_filename = self.texture_filename[2:]
-      
-class FaceData:
-    def __init__(self, verts, normal):
-        self.verts   = verts
-        self.normal  = normal
-
-class VertexData:
-    def __init__(self, object, index, uv, normal):
-        self.object    = object
-        self.index     = index
-        self.uv        = uv
-        self.normal    = normal
-        self.new_index = -1
-
-class AttachmentPointData:
-    """Data for an attachment point, its location and its rotation"""
-    def __init__(self, loc, quat):
-        self.loc  = loc
-        self.quat = quat
-
-class FrameData:
-    """ Data used for a single frame in an action """
-    def __init__(self, vertex_locs, attachment_points):
-        # Format: [[[x,y,z], ...], [[x,y,z],  ...], ...] (one list for each Mesh)
-        self.vertex_locs        = vertex_locs
-
-        # [AttachmentPointData, ...]
-        self.attachment_points = attachment_points
-
-class ActionConfig:
-    """ActionConfig handles the properties of a single
-    action, ie. when it starts, when it stops, its speed, how many
-    spamles should be taken, etc."""
-
-    def __init__(self, first_frame, last_frame, speed, samplerate, markers):
-        self.first_frame = first_frame
-        self.last_frame  = last_frame
-        self.speed       = speed
-        self.samplerate  = samplerate
-        self.markers     = markers
-        self.numframes   = last_frame - first_frame + 1
-
-    def __str__(self):
-        return "Frames: %3i - %3i, speed: %3.2f, Samplerate: %3d" % (self.first_frame, self.last_frame,
-                                                                         self.speed, self.samplerate)
-
-    # config entry (first_frame, last_frame, speed, samplerate, markers[])
-    #  a marker is (name, frame)
-    def parse(text):     
-        def expect_string():
-            res = lex.get_token()
-            if res == lex.eof:
-                raise Exception, "Expected string, got EOF"
-            return res
-
-        def expect_int():
-            res = lex.get_token()
-            if res == lex.eof:
-                raise Exception, "Expected in, got EOF"
-            return int(res)
-
-        def expect_float():
-            res = lex.get_token()
-            if res == lex.eof:
-                raise Exception, "Expected float, got EOF"
-            return float(res)
-
-        def expect_dash():
-            res = lex.get_token()
-            if res == lex.eof:
-                raise Exception, "Expected '-', got EOF"
-            elif res != "-":
-                raise Exception, "Expected '-', got '%s'" % res
-
-        lex = shlex.shlex(text)
-        lex.wordchars += "."
-
-        actionconfig = {}
-        while True:
-            token = lex.get_token()
-            if token == lex.eof:
-                break
-            lex.push_token(token)
-            action_name = expect_string()
-            first_frame = expect_int()
-            expect_dash()
-            last_frame = expect_int()
-
-            token = lex.get_token()
-            if token == "speed":
-                speed = expect_float()
-            else:
-                lex.push_token(token)
-                speed = DEFAULT_SPEED
-
-            token = lex.get_token()
-            if token == "samplerate":
-                samplerate = expect_int()
-            else:
-                lex.push_token(token)
-                samplerate = DEFAULT_SAMPLERATE
-
-            token = lex.get_token()
-            markers = []
-            while token == "marker":
-                marker_name = expect_string()
-                marker_frame = expect_int()
-                markers.append( (marker_name, marker_frame) )
-                token = lex.get_token()
-            lex.push_token(token)
-
-            actionconfig[action_name] = ActionConfig(first_frame, last_frame, speed, samplerate, markers)
-
-        return actionconfig
-    parse = staticmethod(parse)
-
-class ActionData:
-  def __init__(self, name, config, frame_data):
-    # name as string
-    self.name       = name
-
-    # ActionConfig
-    self.config     = config
-
-    # FrameData (filled out later in the WindstilleExporter)
-    self.frame_data = frame_data
-
-### end: Data Structures to hold the Mesh ###
-
-class WindstilleSprite:
-  ########################################################
-  def __init__(self):
-      """ Create a WindstilleSprite from the current scene"""
-      ### References to Blender internals
-      # List of Blender mesh objects that should get exported (everything on
-      # seperate layer is ignored)
-      self.mesh_objects    = []
-
-      # Blender armature object
-      self.armature_object = None
-
-      # Blender attachment objects, ie. Empties
-      self.attachment_objects = []
-
-      # Name of the actions as string
-      self.actions = []
-
-      # { actionname : ActionConfig, ... }
-      self.actionconfigs = {}
-      
-      ### Converted Data
-      # List of mesh_data, ie. data we collected and converted ourself from Blender
-      self.mesh_data   = []
-            
-      # Used to store animation data (vertex position and such)
-      self.action_data = []
-
-      ### Start collecting data
-      # Collect Action Config
-      self.collect_actionconfig()
-      # Fill out Blender internal references
-      self.collect_data()
-      # Data for all Meshes
-      self.collect_object_data()
-      # Collect data for the Actions and Animations
-      self.collect_animation_data()
-
-  def collect_actionconfig(self):
-      try:
-          self.actionconfigs = ActionConfig.parse(get_text("actionconfig"))
-      except Exception, message:
-          raise Exception, "Error: Parse Error in actionconfig:" + str(message)
-      
-  def collect_data(self):
-      """Convert Blender data structures into something that is used by
-      this export script"""
-
-      scene  = Blender.Scene.GetCurrent()
-      layers = scene.Layers
-
-      # compose list of meshs to export
-      for obj in Blender.Object.Get():
-          data = obj.getData()
-          if (type(data) is not Blender.Types.NMeshType) or not data.faces:
-              pass # ignore anything that isn't a mesh
-          elif (obj.Layers & layers) == 0:
-              print "Skipping \"%s\" because it is on different layer" % obj.getName()
-          else:
-              texture = data.faces[0].image
-              self.mesh_objects.append(obj)
-
-      # search for armature object
-      armatures = [obj for obj in Blender.Object.Get() if obj.getType() == "Armature"]
-      if len(armatures) > 1:
-          raise Exception, "Need to have at most 1 armature in the scene"
-      elif len(armatures) == 0:
-          self.armature_object = None
-      else:
-          self.armature_object = armatures[0]
-
-      # compose list of objects for attachment points
-      self.attachment_objects += [obj for obj in Blender.Object.Get() 
-                                  if (obj.getType() == 'Empty' and obj.getName().startswith("A:"))]
-
-      # compose list of actions to export
-      if not self.armature_object:
-          self.actions.append("Default")
-      else:
-          for action in Blender.Armature.NLA.GetActions().iteritems():
-              self.actions.append(action[1])
-        
-  ### END: def collect_data()
-
-  def collect_animation_data(self):
-      for index, action in enumerate(self.actions):
-          progress(float(index)/len(self.actions)*0.5, "Collecting Action %s" % (action.name))
-          
-          action.setActive(self.armature_object)
-
-          # find/autodetect config
-          if self.actionconfigs.has_key(action.getName()):
-              actioncfg = self.actionconfigs[action.getName()]
-          else:
-              print "Error: No config for action '%s' defined." % action.getName()
-              actioncfg = ActionConfig(1, 1, DEFAULT_SPEED, DEFAULT_SAMPLERATE, [])
-
-          frame_data = []
-          for frame in range(actioncfg.first_frame, actioncfg.last_frame+1, actioncfg.samplerate):
-              #progress((index + (float(frame)/(actioncfg.last_frame+1 - actioncfg.first_frame)))
-              #         /len(self.actions)*0.5,
-              #         "Collecting Action %s" % (action.name))
-              Blender.Set("curframe", int(frame))
-              frame_data.append(self.collect_frame_data())
-
-          self.action_data.append(ActionData(action.getName(), actioncfg, frame_data))
-
-  def collect_object_data(self):
-    self.mesh_data = {}
-    for obj in self.mesh_objects:
-      ### Convert mesh_objects to MeshData and merge all meshes with
-      ### the same texture
-      for (texture, mesh) in self.collect_mesh_data(obj).iteritems():
-        if self.mesh_data.has_key(texture):
-          self.mesh_data[texture].merge(mesh)
-        else:
-          self.mesh_data[texture] = mesh
-    self.mesh_data = self.mesh_data.values()
-
-    # Optimize the meshs by merging meshes and vertices
-    for mesh in self.mesh_data:
-      mesh.finalize()
-
-  def collect_mesh_data(self, obj): # returns { texture_filename : MeshData, ...}
-      """
-      Returns mesh_data as dict with format:
-      key: texture_filename
-      val: MeshData
-      """
-      mesh_data = {}
-
-      for face in obj.getData().faces:
-          if face.image:
-              texture_filename = face.image.filename
-          else:
-              texture_filename = "//404.png"
-
-          if not mesh_data.has_key(texture_filename):
-              mesh_data[texture_filename] = MeshData(texture_filename)
-
-          faces = []
-          for v in [0, 1, 2]:
-              faces.append(VertexData(obj, face.v[v].index,
-                                      [face.uv[v][0], 1.0-face.uv[v][1]],
-                                      [face.normal[1], -face.normal[2], -face.normal[0]]))
-          mesh_data[texture_filename].faces.append(FaceData(faces,
-                                                            [face.normal[1], -face.normal[2], -face.normal[0]]))
-
-          # Write out another triangle in case we have a quad: index, u, v
-          faces = []
-          if len(face.v) == 4:
-              for v in [0, 2, 3]:
-                  faces.append(VertexData(obj, face.v[v].index,
-                                          [face.uv[v][0], 1.0-face.uv[v][1]],
-                                          [face.normal[1], -face.normal[2], -face.normal[0]]))
-              mesh_data[texture_filename].faces.append(FaceData(faces,
-                                                                [face.normal[1], -face.normal[2], -face.normal[0]]))
-
-      return mesh_data
-
-  def collect_frame_data(self):
-      """
-      Collect all data for the given object in a single frame, frame
-      has to be selected outside of this function.
-      Format:
-      [[[vertex_pos_x, vertex_pos_y, vertex_pos_z], ...],
-      [[attachment_pos_x, attachment_pos_y, attachment_pos_z,
-      attachment_quat1, attachment_quat2, attachment_quat3, attachment_quat4], ...]]
-       """
-      # FIXME: This is by far the slowest function of all, optimizing might help
-      meshs = []
-      attachment_points = []
-
-      obj = None
-
-      # no triangles here (those are global), just vertexes (those are local)
-      for mesh_data in self.mesh_data:
-          vertex_positions = []
-          for vertex in mesh_data.vertices:
-              if obj != vertex.object:
-                  obj  = vertex.object
-                  data = Blender.NMesh.GetRawFromObject(obj.getName())
-                  m    = obj.getMatrix()
-
-              # location: action/frame/mesh/vertices
-              v = data.verts[vertex.index]
-              vertex_positions.append([+(m[0][1]*v[0] + m[1][1]*v[1] + m[2][1]*v[2] + m[3][1]) * ZOOM,
-                                       -(m[0][2]*v[0] + m[1][2]*v[1] + m[2][2]*v[2] + m[3][2]) * ZOOM,
-                                       -(m[0][0]*v[0] + m[1][0]*v[1] + m[2][0]*v[2] + m[3][0]) * ZOOM])
-          meshs.append(vertex_positions)
-
-      # attachment points
-      for obj in self.attachment_objects:
-          m    = obj.matrixWorld
-          loc  = (m[3][0] * ZOOM, m[3][1] * ZOOM, m[3][2] * ZOOM)
-          quat = matrix2quaternion(m)      
-          attachment_points.append(AttachmentPointData([loc[1], -loc[2], -loc[0]],
-                                                       [quat[0], quat[2], quat[3], quat[1]]))
-
-      return FrameData(meshs, attachment_points)
-
-  def write(self, out):
-      """This is a new version of write_file(), instead of using blender
-      internals, it uses the collected data"""
-
-      ### Write magic, version and counts for mesh, attachment_points and actions
-      out.write(struct.pack("=4sHHHH", "W3DS",
-                            FORMAT_VERSION, \
-                            len(self.mesh_data),
-                            len(self.attachment_objects),
-                            len(self.action_data)))
-
-      ### Mesh Header:
-      for mesh in self.mesh_data:
-          out.write(struct.pack("=64sHH",
-                                mesh.texture_filename,
-                                len(mesh.faces),
-                                len(mesh.vertices)))
-          ### Mesh Data:
-          ## Vertex indices of triangles
-          for face in mesh.faces:
-              out.write(struct.pack("=HHH",
-                                    face.verts[0].new_index,
-                                    face.verts[1].new_index,
-                                    face.verts[2].new_index))
-
-          ## Normal
-          for face in mesh.faces:
-              out.write(struct.pack("=fff", face.normal[0], face.normal[1], face.normal[2]))
-
-          ## UV Coordinates
-          for vert in mesh.vertices:
-            out.write(struct.pack("=ff", vert.uv[0], vert.uv[1]))
-
-      ### Attachment points
-      for obj in self.attachment_objects:
-          out.write(struct.pack("=64s", obj.getName()[2:]))
-
-      ## Action Header
-      for index, action in enumerate(self.action_data):
-          progress(0.5 + float(index)/len(self.action_data) * 0.5,
-                   "Writing Action %s" % (action.name))
-
-          out.write(struct.pack("=64sfHH",
-                                action.name, 
-                                action.config.speed * SPEED_MULTIPLIER,
-                                len(action.config.markers),
-                                len(action.frame_data)))
-          
-          ## Marker
-          for (marker_name, marker_frame) in action.config.markers:
-              out.write(struct.pack("=64sH",
-                                    marker_name, 
-                                    (marker_frame - action.config.first_frame) / action.config.samplerate))
-
-          ## Action Data
-          for frame in action.frame_data:
-              ### Vertex positions
-              for mesh in frame.vertex_locs:
-                  for vert in mesh:
-                      out.write(struct.pack("=fff", vert[0], vert[1], vert[2]))
-              ### Attachment Points
-              for at in frame.attachment_points:
-                  out.write(struct.pack("=fffffff",
-                                        at.loc[0],  at.loc[1],  at.loc[2],
-                                        at.quat[0], at.quat[1], at.quat[2], at.quat[3]))
-    ### DONE ###
-
-  def print_stats(self):
-      """Print some stats, vertex count, face count and such"""
-      print "+===================================================================="
-      print "| WindstilleSprite"
-      print "+===================================================================="
-      print "| Mesh Count:     ", len(self.mesh_data)
-      print "| Mesh Objects:   ", self.mesh_objects
-      print "| Actions:        ", self.actions
-      print "| AttachmentObjs: ", self.attachment_objects
-      print "| Meshs: "
-      for mesh in self.mesh_data:
-          print "|   Mesh:       ", mesh
-          print "|     Texture:  ", mesh.texture_filename
-          print "|     Faces:    ", len(mesh.faces)
-          print "|     Vertices: ", len(mesh.vertices)
-          print "|"
-      print "| Actions: "
-      for action in self.action_data:
-          print "|   Name:        ", action.name
-          print "|   Config:      ", action.config
-          print "|   Frames:      ", len(action.frame_data)
-          print "|   Vertices:    ", [len(x) for x in action.frame_data[0].vertex_locs]
-          print "|   Attachments: ", len(action.frame_data[0].attachment_points)
-          print "|"
-      print "+===================================================================="
-    
-def export(filename):
-    data = WindstilleSprite()
-
-    file = open(filename, "wb")
-    data.write(file)
-    file.close()
-
-    data.print_stats()
-
-def fs_callback(filename):
-    print "=== Exporting: %s ===" % (filename)
-    export(filename)
-    Window.DrawProgressBar(1.0, "Finished writing %s" % (filename)) 
-    print "=== Windstille Exporter done, wrote %s ===" % (filename)
-
-defaultname = Blender.Get("filename")
-if defaultname.endswith(".blend"):
-    defaultname = defaultname[0:len(defaultname) - len(".blend")] + ".wsprite"
-Window.FileSelector(fs_callback, "Windstille Export", defaultname)
-
-# EOF #



From grumbel at mail.berlios.de  Thu Feb  5 18:52:16 2009
From: grumbel at mail.berlios.de (grumbel at BerliOS)
Date: Thu, 5 Feb 2009 18:52:16 +0100
Subject: [Windstille-commit] r2408 - in trunk: . blender-thumbnail scripts
Message-ID: <200902051752.n15HqGKF001405@sheep.berlios.de>

Author: grumbel
Date: 2009-02-05 18:52:15 +0100 (Thu, 05 Feb 2009)
New Revision: 2408

Added:
   trunk/blender-thumbnail/
   trunk/blender-thumbnail/blender_thumbnail
   trunk/blender-thumbnail/blender_thumbnail.py
Removed:
   trunk/scripts/blender_thumbnail
   trunk/scripts/blender_thumbnail.py
Log:
Moved blender-thumbnail into its own directory

Copied: trunk/blender-thumbnail/blender_thumbnail (from rev 2407, trunk/scripts/blender_thumbnail)


Property changes on: trunk/blender-thumbnail/blender_thumbnail
___________________________________________________________________
Name: svn:executable
   + *
Name: svn:mergeinfo
   + 

Copied: trunk/blender-thumbnail/blender_thumbnail.py (from rev 2407, trunk/scripts/blender_thumbnail.py)


Property changes on: trunk/blender-thumbnail/blender_thumbnail.py
___________________________________________________________________
Name: svn:mergeinfo
   + 

Deleted: trunk/scripts/blender_thumbnail
===================================================================
--- trunk/scripts/blender_thumbnail	2009-02-05 17:42:50 UTC (rev 2407)
+++ trunk/scripts/blender_thumbnail	2009-02-05 17:52:15 UTC (rev 2408)
@@ -1,150 +0,0 @@
-#!/usr/bin/ruby -w
-##  Blender Thumbnail Generator
-##  Copyright (C) 2007 Ingo Ruhnke <grumbel at gmx.de>
-##
-##  This program is free software; you can redistribute it and/or
-##  modify it under the terms of the GNU General Public License
-##  as published by the Free Software Foundation; either version 2
-##  of the License, or (at your option) any later version.
-##
-##  This program is distributed in the hope that it will be useful,
-##  but WITHOUT ANY WARRANTY; without even the implied warranty of
-##  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
-##  GNU General Public License for more details.
-## 
-##  You should have received a copy of the GNU General Public License
-##  along with this program; if not, write to the Free Software
-##  Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA
-##  02111-1307, USA.
-##
-
-## This script works in combination with blender_thumbnail.py, a
-## rendering script for Blender.
-##
-## Example usage:
-## ~~~~~~~~~~~~~~
-##   $ blender_thumbnail minedriller.blend \
-##       --layout "[['45,45,-45'],['135,45,45']]" \
-##       -o render/minedriller.png 
-## 
-
-require "RMagick"
-require 'getoptlong'
-require 'rdoc/usage'
-
-$cfg_resolution = "512"
-$cfg_output     = "/tmp/blender_thumbnail_output.png"
-$cfg_render     = true
-
-$cfg_blender_script = "/home/ingo/projects/windstille/trunk/scripts/blender_thumbnail.py"
-$cfg_blender_binary = "blender"
-
-$cfg_layout = [
-          [ "-90,0,0", # left
-            "0,0,0", # front
-            "0,90,90", # top
-            "45,45,0", # 45-front
-          ],
-          ["90,0,0", # right
-           "180,0,0", # back
-           "0,-90,90", # bottom
-           "135,45,0", # 45-back
-          ]
-         ]
-
-GetoptLong.new(
-               [ '--help',       '-h', GetoptLong::NO_ARGUMENT ],
-               [ '--no-render',           GetoptLong::NO_ARGUMENT ],
-               [ '--resolution', '-r', GetoptLong::REQUIRED_ARGUMENT ],
-               [ '--layout'    , '-l', GetoptLong::REQUIRED_ARGUMENT ],
-               [ '--output'    , '-o', GetoptLong::REQUIRED_ARGUMENT ],
-               [ '--blender'   , GetoptLong::REQUIRED_ARGUMENT ],
-               [ '--script'    , GetoptLong::REQUIRED_ARGUMENT ]
-               ).each{|opt, arg|
-  case opt
-  when '--help'
-    puts "Usage: #{$0} [OPTION]... FILE..."
-    puts "Generates thumbnails from Blender files."
-    puts ""
-    puts "  --help              Display this help text"
-    puts "  --no-render         Don't render and instead just combine the images (for debugging)"
-    puts "  --resolution RES    Resolution to use for the thumbnail"
-    puts "  --output FILE       Write the final thumbnail to FILE"
-    puts "  --layout LAYOUT     Layout of the thumbnail (ex: [['90,0,0'],['-90,0,0']])"
-    puts "  --blender FILE      Path to the blender binary"
-    puts "  --script  FILE      Path to the blender thumbnail script"
-    puts ""
-    puts "Report bugs to <grumbel at gmx.de>"
-    exit(0)
-
-  when '--blender'
-    $cfg_blender_binary = arg
-
-  when '--script'
-    $cfg_blender_script = arg
-
-  when '--no-render'
-    $cfg_render = false
-
-  when '--resolution'
-    $cfg_resolution = arg
-
-  when '--output'
-    $cfg_output = arg
-
-  when '--layout'
-    $cfg_layout = eval(arg)
-
-  else
-    puts "Some error!?!"
-    exit(1)
-  end
-}
-
-ARGV.each{|filename|
-  positions = $cfg_layout.flatten
-  outfiles  = positions.map{|name| "/tmp/render-#{name}.png" }
-
-  if $cfg_render then
-    # render the graphics
-    ENV["BLEND_THUMB_POS"]        = positions.join(';')
-    ENV["BLEND_THUMB_OUTPUT"]     = outfiles.join(';')
-    ENV["BLEND_THUMB_RESOLUTION"] = $cfg_resolution
-    
-    if not system($cfg_blender_binary, filename, "-P", $cfg_blender_script) then
-      puts "Error while rendering '#{filename}', error code #{$?}"
-    end
-  end
-
-  images = {}
-  outfiles.map{|file| Magick::Image.read(file).first.trim! }.zip($cfg_layout.flatten).each{|v, k|
-    images[k] = v
-  }
-
-  spacing = 16
-  width  = 0
-  height = spacing
-  
-  puts "Composing final image"
-  gc = Magick::Draw.new()
-  $cfg_layout.each{|lst|
-    this_height = lst.map{|i| images[i].rows}.max
-    x = spacing
-    lst.each{|name|
-      image = images[name]
-      gc.composite(x, height + (this_height - image.rows)/2, 0, 0, image)
-      x += image.columns + spacing
-    }
-
-    height += lst.map{|i| images[i].rows}.max + spacing
-    width   = [width, lst.map{|i| images[i].columns + spacing}.inject(0){|t,v| t + v} + spacing].max
-  }
-  # puts "OutImage: #{width} #{height}"
-  outimage = Magick::Image.new(width, height, Magick::HatchFill.new("#78b", "#abd", 32))
-  gc.draw(outimage)
-
-  puts "Writing final image to '#{$cfg_output}'"
-  outimage.write($cfg_output)
-}
-
-# EOF #

Deleted: trunk/scripts/blender_thumbnail.py
===================================================================
--- trunk/scripts/blender_thumbnail.py	2009-02-05 17:42:50 UTC (rev 2407)
+++ trunk/scripts/blender_thumbnail.py	2009-02-05 17:52:15 UTC (rev 2408)
@@ -1,242 +0,0 @@
-##  Blender Thumbnail Generator
-##  Copyright (C) 2007 Ingo Ruhnke <grumbel at gmx.de>
-##
-##  This program is free software; you can redistribute it and/or
-##  modify it under the terms of the GNU General Public License
-##  as published by the Free Software Foundation; either version 2
-##  of the License, or (at your option) any later version.
-##
-##  This program is distributed in the hope that it will be useful,
-##  but WITHOUT ANY WARRANTY; without even the implied warranty of
-##  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
-##  GNU General Public License for more details.
-## 
-##  You should have received a copy of the GNU General Public License
-##  along with this program; if not, write to the Free Software
-##  Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA
-##  02111-1307, USA.
-##
-
-## Usage:
-## blender longshot.blend -P ~/projects/windstille/trunk/scripts/blender_thumbnail.py
-## ! Argument order matters !
-
-## Bugs: The .blend file must not be in "Maximized Window Mode" (Ctrl
-## UpArrow) or it will segfault
-
-## ToDo:
-## - set some better rendering parameter, care less about what is set
-## - in the .blend file (background, ambient occulsion, etc.)
-
-import Blender
-from Blender.Mathutils import *
-from Blender import Camera
-from Blender.Scene import Render
-from Blender import Lamp
-import time
-import math
-import os
-
-# print "\033c--- Start --- %s" % time.time()
-
-class BBox:
-    def __init__(self, bbox = None):
-        self.x1 = self.x2 = None
-        self.y1 = self.y2 = None
-        self.z1 = self.z2 = None    
-
-        if bbox:                
-            for v in bbox: 
-                self.x1 = min(self.x1, v.x) or v.x
-                self.x2 = max(self.x2, v.x) or v.x
-
-                self.y1 = min(self.y1, v.y) or v.y
-                self.y2 = max(self.y2, v.y) or v.y
-
-                self.z1 = min(self.z1, v.z) or v.z
-                self.z2 = max(self.z2, v.z) or v.z
-        else:
-            self.x1 = None
-            self.x2 = None
-            self.y1 = None
-            self.y2 = None
-            self.z1 = None
-            self.z2 = None
-
-    def width_x(self):
-        return self.x2 - self.x1
-
-    def width_y(self):
-        return self.y2 - self.y1
-
-    def width_z(self):
-        return self.z2 - self.z1
-
-    def center(self):
-        return Vector((self.x1 + self.x2)/2, 
-                      (self.y1 + self.y2)/2, 
-                      (self.z1 + self.z2)/2)
-
-    def max(self):
-        """Returns the longest side of the bbox"""
-        return max(self.x2 - self.x1,
-                   self.y2 - self.y1,
-                   self.z2 - self.z1)
-
-    def max_diagonal(self):
-        return math.sqrt(self.width_x() ** 2 +
-                         self.width_y() ** 2 +
-                         self.width_z() ** 2)
-
-    def normalize(self):
-        self.x1 = min(self.x1, self.x2)
-        self.x2 = max(self.x2, self.x1)
-
-        self.y1 = min(self.y1, self.y2)
-        self.y2 = max(self.y2, self.y1)
-
-        self.z1 = min(self.z1, self.z2)
-        self.z2 = max(self.z2, self.z1)
-
-    def valid(self):
-        return self.x1 and self.x2 and \
-               self.y1 and self.y2 and \
-               self.z1 and self.z2
-
-    def join(self, bbox):
-        self.x1 = min(self.x1, bbox.x1) or bbox.x1
-        self.x2 = max(self.x2, bbox.x2) or bbox.x2
-
-        self.y1 = min(self.y1, bbox.y1) or bbox.y1
-        self.y2 = max(self.y2, bbox.y2) or bbox.y2
-
-        self.z1 = min(self.z1, bbox.z1) or bbox.z1
-        self.z2 = max(self.z2, bbox.z2) or bbox.z2
-
-    def __str__(self):
-        return "[bbox: x:%.2f, %.2f, y:%.2f, %.2f, z:%.2f, %.2f]" % \
-               (self.x1, self.x2,
-                self.y1, self.y2,
-                self.z1, self.z2)
-
-class ThumbnailRender:
-    """
-    bbox:  bounding box
-    scene: scene to render
-    cam_obj:   light object for the render
-    light_obj: camera object for the render
-    """
-    def __init__(self, scene):
-        self.scene = scene
-        self.bbox  = None
-        self.cam_obj   = None
-        self.light_obj = None
-        
-    def calc_bbox(self):
-        self.bbox = BBox()
-        for obj in self.scene.objects:
-            if obj.getType() != "Empty" and \
-               obj.getType() != "Light" and \
-               (1 in obj.layers) and obj.boundingBox:
-                # print obj.getType()
-                # print obj.boundingBox
-                # print obj, obj.layers, (1 in obj.layers)
-                # FIXME: for some objects the bbox seems to large
-                self.bbox.join(BBox(obj.boundingBox))
-
-        if not self.bbox.valid:
-            raise "Error: Scene is empty!"
-
-    def place_camera(self, longitude, latitude, rotation):
-        if not self.bbox:
-            self.calc_bbox()
-
-        if not self.cam_obj:
-            cam = Camera.New('ortho')
-
-            light = Lamp.New('Sun')            # create new 'Spot' lamp data
-            light.energy = 1.0
-
-            self.light_obj = self.scene.objects.new(light)
-            self.cam_obj   = self.scene.objects.new(cam)
-            self.scene.setCurrentCamera(self.cam_obj)
-
-            cam.scale = self.bbox.max_diagonal()
-
-        # Position camera and light
-        matrix = RotationMatrix(rotation, 4, 'z') * \
-                 RotationMatrix(90, 4, 'x') * \
-                 TranslationMatrix(Vector(0, -self.bbox.max_diagonal()-2,0)) * \
-                 RotationMatrix(latitude,  4, 'x') * \
-                 RotationMatrix(longitude, 4, 'z') * \
-                 TranslationMatrix(self.bbox.center())
-        self.cam_obj.setMatrix(matrix)
-        self.light_obj.setMatrix(matrix)
-        
-    def render(self, resolution, outfile):
-        render = self.scene.getRenderingContext()
-
-        render.renderwinSize = 100
-
-        render.aspectX = 100
-        render.aspectY = 100
-
-        render.sizeX = resolution
-        render.sizeY = resolution
-
-        render.imageType = Render.PNG
-
-        render.enableRGBAColor()
-
-        render.render()
-
-        render.setRenderPath("")
-        render.saveRenderedImage(outfile)
-
-    def cleanup(self):
-        self.scene.objects.unlink(self.cam_obj)
-        self.scene.objects.unlink(self.light_obj)
-        self.cam_obj = None
-        self.light   = None
-
-
-def resize_list(lst, num):
-    """Resizes a list to num elements, repeating the last one"""
-    while len(lst) < num:
-        lst.append(lst[-1])
-
-def main():
-    # longitude: rotations around z-axis
-    # latitude:  rotations around x/y-axis
-    # rotation:  rotates the final image
-    
-    positions   = (os.getenv("BLEND_THUMB_POS") or "0,0,0").split(';')
-    resolutions = (os.getenv("BLEND_THUMB_RESOLUTION") or "512").split(';')
-    outfiles    = (os.getenv("BLEND_THUMB_OUTPUT") or "/tmp/out.png").split(';')
-
-    num_passes = max(len(positions), len(resolutions), len(outfiles))
-
-    resize_list(positions,   num_passes)
-    resize_list(resolutions, num_passes)
-    resize_list(outfiles,    num_passes)
-
-    renderer = ThumbnailRender(Blender.Scene.GetCurrent())
-        
-    for (position, resolution, outfile) in zip(positions, resolutions, outfiles):
-        print "Rendering: %s %s => %s" % (position, resolution, outfile)
-        
-        (longitude, latitude, rotation) = position.split(',')
-        longitude = -int(longitude)
-        latitude  = -int(latitude)
-        rotation  =  int(rotation)
-        
-        renderer.place_camera(longitude, latitude, rotation)
-        renderer.render(int(resolution), outfile)
-    
-    renderer.cleanup()
-    
-    Blender.Quit()
-
-main()
-        
-# EOF #



From grumbel at mail.berlios.de  Thu Feb  5 18:54:03 2009
From: grumbel at mail.berlios.de (grumbel at BerliOS)
Date: Thu, 5 Feb 2009 18:54:03 +0100
Subject: [Windstille-commit] r2409 - in trunk: . blender-exporter
Message-ID: <200902051754.n15Hs3Yw003383@sheep.berlios.de>

Author: grumbel
Date: 2009-02-05 18:54:03 +0100 (Thu, 05 Feb 2009)
New Revision: 2409

Added:
   trunk/blender-exporter/
Removed:
   trunk/blender/
Log:
Renamed blender/ to blender-exporter/

Copied: trunk/blender-exporter (from rev 2407, trunk/blender)


Property changes on: trunk/blender-exporter
___________________________________________________________________
Name: svn:mergeinfo
   + 



From grumbel at mail.berlios.de  Thu Feb  5 21:04:11 2009
From: grumbel at mail.berlios.de (grumbel at BerliOS)
Date: Thu, 5 Feb 2009 21:04:11 +0100
Subject: [Windstille-commit] r2410 - branches
Message-ID: <200902052004.n15K4Bss025762@sheep.berlios.de>

Author: grumbel
Date: 2009-02-05 21:04:11 +0100 (Thu, 05 Feb 2009)
New Revision: 2410

Removed:
   branches/grumbel/
Log:
Purged old CVS default branch



From grumbel at mail.berlios.de  Thu Feb  5 21:06:08 2009
From: grumbel at mail.berlios.de (grumbel at BerliOS)
Date: Thu, 5 Feb 2009 21:06:08 +0100
Subject: [Windstille-commit] r2411 - tags
Message-ID: <200902052006.n15K68Os026683@sheep.berlios.de>

Author: grumbel
Date: 2009-02-05 21:06:07 +0100 (Thu, 05 Feb 2009)
New Revision: 2411

Removed:
   tags/start/
Log:
Purged old CVS default tag



From grumbel at mail.berlios.de  Thu Feb  5 21:09:13 2009
From: grumbel at mail.berlios.de (grumbel at BerliOS)
Date: Thu, 5 Feb 2009 21:09:13 +0100
Subject: [Windstille-commit] r2412 - in tags/windstille-0.3.0/tools: .
	miniswig
Message-ID: <200902052009.n15K9DOc028740@sheep.berlios.de>

Author: grumbel
Date: 2009-02-05 21:09:13 +0100 (Thu, 05 Feb 2009)
New Revision: 2412

Added:
   tags/windstille-0.3.0/tools/miniswig/
   tags/windstille-0.3.0/tools/miniswig/Jamfile
   tags/windstille-0.3.0/tools/miniswig/create_docu.cpp
   tags/windstille-0.3.0/tools/miniswig/create_docu.hpp
   tags/windstille-0.3.0/tools/miniswig/create_wrapper.cpp
   tags/windstille-0.3.0/tools/miniswig/create_wrapper.hpp
   tags/windstille-0.3.0/tools/miniswig/globals.hpp
   tags/windstille-0.3.0/tools/miniswig/lexer.ll
   tags/windstille-0.3.0/tools/miniswig/main.cpp
   tags/windstille-0.3.0/tools/miniswig/parser.yy
   tags/windstille-0.3.0/tools/miniswig/tree.cpp
   tags/windstille-0.3.0/tools/miniswig/tree.hpp
   tags/windstille-0.3.0/tools/miniswig/xmlwriter.cpp
   tags/windstille-0.3.0/tools/miniswig/xmlwriter.hpp
Modified:
   tags/windstille-0.3.0/tools/
Log:
Added miniswig from windstille-0.3.0 source tarball, since svn:externals isn't much good with tags


Property changes on: tags/windstille-0.3.0/tools
___________________________________________________________________
Name: svn:externals
   - miniswig svn://svn.berlios.de/supertux/trunk/supertux/tools/miniswig

   + 


Added: tags/windstille-0.3.0/tools/miniswig/Jamfile
===================================================================
--- tags/windstille-0.3.0/tools/miniswig/Jamfile	2009-02-05 20:06:07 UTC (rev 2411)
+++ tags/windstille-0.3.0/tools/miniswig/Jamfile	2009-02-05 20:09:13 UTC (rev 2412)
@@ -0,0 +1,22 @@
+SubDir TOP tools miniswig ;
+
+if $(LEX) && $(LEX) != ":" && $(BISON) {
+  
+    # hack because SDL does nasty -Dmain=SDL_main on windows
+    old_CXXFLAGS = $(CXXFLAGS) ;
+    CXXFLAGS = [ Filter $(CXXFLAGS) : -Dmain=SDL_main ] ;
+  
+    sources = [ Filter [ Wildcard *.yy *.ll *.cpp ] : parser.cpp lexer.cpp ] ;
+    MINISWIG = [ Application miniswig : $(sources) : noinstall ] ;
+    C++Flags miniswig : -Wno-unused ;
+    IncludeDir miniswig : . ;
+    ExternalLibs miniswig : LEX ;
+
+    CXXFLAGS = $(old_CXXFLAGS) ;
+
+# we gotta run bison before flex
+    lexer_cpp = [ SearchSource lexer.cpp ] ;
+    lexer_o = [ LocateTarget $(lexer_cpp:S=.o) ] ;
+    Depends lexer_o : [ LocateTarget parser.cpp : $(SUBDIR) ] ;
+}
+

Added: tags/windstille-0.3.0/tools/miniswig/create_docu.cpp
===================================================================
--- tags/windstille-0.3.0/tools/miniswig/create_docu.cpp	2009-02-05 20:06:07 UTC (rev 2411)
+++ tags/windstille-0.3.0/tools/miniswig/create_docu.cpp	2009-02-05 20:09:13 UTC (rev 2412)
@@ -0,0 +1,112 @@
+#include <config.h>
+
+#include "tree.hpp"
+#include <iostream>
+#include <sstream>
+#include <stdexcept>
+#include "create_docu.hpp"
+#include "globals.hpp"
+
+void
+DocuCreator::create_docu(Namespace* ns)
+{
+    std::string fromfile = original_file != "" ? original_file : inputfile;
+
+    writer.openTag("documentation");
+    writer.openTag("namespace");
+    writer.writeAttribute("name", ns->name);
+
+    for(std::vector<AtomicType*>::iterator i = ns->types.begin();
+            i != ns->types.end(); ++i) {
+        AtomicType* type = *i;
+        Class* _class = dynamic_cast<Class*> (type);
+        if(_class != 0)
+            create_class_docu(_class);
+    }
+    for(std::vector<Function*>::iterator i = ns->functions.begin();
+            i != ns->functions.end(); ++i) {
+        create_function_docu(0, *i);
+    }
+
+    writer.closeTag("namespace");
+    writer.closeTag("documentation");
+}
+
+void
+DocuCreator::create_class_docu(Class* _class)
+{
+    writer.openTag("class");
+    writer.writeAttribute("name", _class->name);
+
+    if(_class->docu_comment != "") {
+        writer.writeTag("documentation");
+        writer.write(_class->docu_comment);
+    }
+
+    for(std::vector<ClassMember*>::iterator i = _class->members.begin();
+            i != _class->members.end(); ++i) {
+        ClassMember* member = *i;
+        if(member->visibility != ClassMember::PUBLIC)
+            continue;
+        Function* function = dynamic_cast<Function*> (member);
+        if(!function)
+            continue;
+        if(function->type != Function::FUNCTION)
+            continue;
+        create_function_docu(_class, function);
+    }
+
+    writer.closeTag("class");
+}
+
+void
+DocuCreator::create_function_docu(Class* _class, Function* function)
+{
+    writer.openTag("function");
+
+    writer.writeAttribute("return_type",
+            get_type(function->return_type));
+    writer.writeAttribute("name", function->name);
+
+    if(function->docu_comment != "") {
+        writer.writeTag("documentation");
+        writer.write(function->docu_comment);
+    }
+
+    for(std::vector<Parameter>::iterator p = function->parameters.begin();
+            p != function->parameters.end(); ++p) {
+        if(p == function->parameters.begin()
+                && p->type.atomic_type == HSQUIRRELVMType::instance())
+            continue;
+
+        writer.writeTag("param");
+        writer.writeAttribute("type", get_type(p->type));
+        writer.writeAttribute("name", p->name);
+    }
+
+    writer.closeTag("function");
+}
+
+std::string
+DocuCreator::get_type(const Type& type)
+{
+    if(type.ref > 0 && type.atomic_type != StringType::instance())
+        throw std::runtime_error("References not handled yet");
+    if(type.pointer > 0)
+        throw std::runtime_error("Pointers not handled yet");
+    if(type.atomic_type == &BasicType::VOID) {
+        return "void";
+    } else if(type.atomic_type == &BasicType::INT) {
+        return "int";
+    } else if(type.atomic_type == &BasicType::FLOAT) {
+        return "float";
+    } else if(type.atomic_type == &BasicType::BOOL) {
+        return "bool";
+    } else if(type.atomic_type == StringType::instance()) {
+        return "string";
+    }
+
+    std::ostringstream msg;
+    msg << "Type '" << type.atomic_type->name << "' not supported yet.";
+    throw std::runtime_error(msg.str());
+}


Property changes on: tags/windstille-0.3.0/tools/miniswig/create_docu.cpp
___________________________________________________________________
Name: svn:keywords
   + Id
Name: svn:eol-style
   + native

Added: tags/windstille-0.3.0/tools/miniswig/create_docu.hpp
===================================================================
--- tags/windstille-0.3.0/tools/miniswig/create_docu.hpp	2009-02-05 20:06:07 UTC (rev 2411)
+++ tags/windstille-0.3.0/tools/miniswig/create_docu.hpp	2009-02-05 20:09:13 UTC (rev 2412)
@@ -0,0 +1,26 @@
+#ifndef __CREATE_DOCU_H__
+#define __CREATE_DOCU_H__
+
+#include "tree.hpp"
+#include "xmlwriter.hpp"
+
+class DocuCreator
+{
+public:
+    const char* ind;
+    std::ostream& out;
+    XmlWriter writer;
+
+    DocuCreator(std::ostream& _out = std::cout)
+        : out(_out), writer(out)
+    {
+        ind = "  ";
+    }
+
+    void create_docu(Namespace* ns);
+    void create_class_docu(Class* _class);
+    void create_function_docu(Class* _class, Function* function);
+    std::string get_type(const Type& type);
+};
+
+#endif


Property changes on: tags/windstille-0.3.0/tools/miniswig/create_docu.hpp
___________________________________________________________________
Name: svn:keywords
   + Id
Name: svn:eol-style
   + native

Added: tags/windstille-0.3.0/tools/miniswig/create_wrapper.cpp
===================================================================
--- tags/windstille-0.3.0/tools/miniswig/create_wrapper.cpp	2009-02-05 20:06:07 UTC (rev 2411)
+++ tags/windstille-0.3.0/tools/miniswig/create_wrapper.cpp	2009-02-05 20:09:13 UTC (rev 2412)
@@ -0,0 +1,533 @@
+#include <config.h>
+
+#include "tree.hpp"
+#include <iostream>
+#include <sstream>
+#include <stdexcept>
+#include "create_wrapper.hpp"
+#include "globals.hpp"
+
+void
+WrapperCreator::create_wrapper(Namespace* ns)
+{
+    std::string fromfile = original_file != "" ? original_file : inputfile;
+
+    if(selected_namespace != "") {
+        ns_prefix = selected_namespace;
+        ns_prefix += "::";
+    }
+
+    // hpp file
+    hppout
+        << "/**\n"
+        << " * WARNING: This file is automatically generated from:\n"
+        << " *  '" << fromfile << "'\n"
+        << " * DO NOT CHANGE\n"
+        << " */\n"
+        << "#ifndef __" << modulename << "_WRAPPER_H__\n"
+        << "#define __" << modulename << "_WRAPPER_H__\n"
+        << "\n"
+        << "#include <squirrel.h>\n"
+        << "#include \"wrapper.interface.hpp\"\n"
+        << "\n"
+        << "namespace Scripting\n"
+        << "{\n"
+        << "\n";
+
+    hppout << "void register_" << modulename << "_wrapper(HSQUIRRELVM v);\n"
+           << "\n";
+
+    for(std::vector<AtomicType*>::iterator i = ns->types.begin();
+            i != ns->types.end(); ++i) {
+        AtomicType* type = *i;
+        Class* _class = dynamic_cast<Class*> (type);
+        if(_class == 0)
+            continue;
+
+        hppout << "void create_squirrel_instance(HSQUIRRELVM v, "
+               << ns_prefix << _class->name
+               << "* object, bool setup_releasehook = false);\n";
+    }
+    hppout <<"\n"
+           << "}\n"
+           << "\n"
+           << "#endif\n"
+           << "\n";
+
+    // cpp header
+    out << "/**\n"
+        << " * WARNING: This file is automatically generated from:\n"
+        << " *  '" << fromfile << "'\n"
+        << " * DO NOT CHANGE\n"
+        << " */\n"
+        << "#include <config.h>\n"
+        << "\n"
+        << "#include <new>\n"
+        << "#include <assert.h>\n"
+        << "#include <string>\n"
+        << "#include <sstream>\n"
+        << "#include <squirrel.h>\n"
+        << "#include \"squirrel_error.hpp\"\n"
+        << "#include \"wrapper.interface.hpp\"\n"
+        << "\n"
+        << "namespace Scripting\n"
+        << "{\n"
+        << "namespace Wrapper\n"
+        << "{\n"
+        << "\n";
+
+    for(std::vector<AtomicType*>::iterator i = ns->types.begin();
+            i != ns->types.end(); ++i) {
+        AtomicType* type = *i;
+        Class* _class = dynamic_cast<Class*> (type);
+        if(_class != 0)
+            create_class_wrapper(_class);
+    }
+    for(std::vector<Function*>::iterator i = ns->functions.begin();
+            i != ns->functions.end(); ++i) {
+        create_function_wrapper(0, *i);
+    }
+
+    out << "} // end of namespace Wrapper\n";
+    out << "\n";
+
+    for(std::vector<AtomicType*>::iterator i = ns->types.begin();
+            i != ns->types.end(); ++i) {
+        AtomicType* type = *i;
+        Class* _class = dynamic_cast<Class*> (type);
+        if(_class != 0)
+            create_squirrel_instance(_class);
+    }
+
+    out << "void register_" << modulename << "_wrapper(HSQUIRRELVM v)\n"
+        << "{\n"
+        << ind << "using namespace Wrapper;\n"
+        << "\n";
+
+    create_register_constants_code(ns);
+    create_register_functions_code(ns);
+    create_register_classes_code(ns);
+
+    out << "}\n"
+        << "\n"
+        << "} // end of namespace Scripting\n"
+        << "\n";
+}
+
+void
+WrapperCreator::create_register_function_code(Function* function, Class* _class)
+{
+    if(function->type == Function::DESTRUCTOR)
+        return;
+
+    out << ind << "sq_pushstring(v, \"" << function->name << "\", -1);\n";
+    out << ind << "sq_newclosure(v, &"
+        << (_class != 0 ? _class->name + "_" : "") << function->name
+        << "_wrapper, 0);\n";
+    create_register_slot_code("function", function->name);
+    out << "\n";
+}
+
+void
+WrapperCreator::create_register_functions_code(Namespace* ns)
+{
+    for(std::vector<Function*>::iterator i = ns->functions.begin();
+            i != ns->functions.end(); ++i) {
+        Function* function = *i;
+        create_register_function_code(function, 0);
+    }
+}
+
+void
+WrapperCreator::create_register_classes_code(Namespace* ns)
+{
+    for(std::vector<AtomicType*>::iterator i = ns->types.begin();
+            i != ns->types.end(); ++i) {
+        AtomicType* type = *i;
+        Class* _class = dynamic_cast<Class*> (type);
+        if(_class == 0)
+            continue;
+        if(_class->super_classes.size() > 0)
+            continue;
+
+        create_register_class_code(_class);
+    }
+}
+
+void
+WrapperCreator::create_register_class_code(Class* _class)
+{
+    out << ind << "// Register class " << _class->name << "\n";
+    out << ind << "sq_pushstring(v, \""
+        << _class->name << "\", -1);\n";
+
+    if(_class->super_classes.size() > 0) {
+        if(_class->super_classes.size() > 1) {
+            std::ostringstream msg;
+            msg << "Multiple inheritance not supported (at class '"
+                << _class->name << "')";
+            throw std::runtime_error(msg.str());
+        }
+
+        out << ind << "sq_pushstring(v, \""
+            << _class->super_classes[0]->name << "\", -1);\n";
+        out << ind << "sq_get(v, -3);\n";
+    }
+    out << ind << "if(sq_newclass(v, "
+        << (_class->super_classes.size() > 0 ? "SQTrue" : "SQFalse")
+        << ") < 0) {\n";
+    out << ind << ind << "std::ostringstream msg;\n";
+    out << ind << ind << "msg << \"Couldn't create new class '"
+        << _class->name << "'\";\n";
+    out << ind << ind << "throw SquirrelError(v, msg.str());\n";
+    out << ind << "}\n";
+
+    for(std::vector<ClassMember*>::iterator i = _class->members.begin();
+            i != _class->members.end(); ++i) {
+        ClassMember* member = *i;
+        if(member->visibility != ClassMember::PUBLIC)
+            continue;
+        Function* function = dynamic_cast<Function*> (member);
+        if(function) {
+            create_register_function_code(function, _class);
+        }
+        Field* field = dynamic_cast<Field*> (member);
+        if(field) {
+            create_register_constant_code(field);
+        }
+    }
+
+    create_register_slot_code("class", _class->name);
+    out << "\n";
+
+    for(std::vector<Class*>::iterator i = _class->sub_classes.begin();
+            i != _class->sub_classes.end(); ++i) {
+        Class* _class = *i;
+        create_register_class_code(_class);
+    }
+}
+
+void
+WrapperCreator::create_register_constants_code(Namespace* ns)
+{
+    for(std::vector<Field*>::iterator i = ns->fields.begin();
+            i != ns->fields.end(); ++i) {
+        Field* field = *i;
+        create_register_constant_code(field);
+    }
+}
+
+void
+WrapperCreator::create_register_constant_code(Field* field)
+{
+    if(!field->has_const_value)
+        return;
+    out << ind << "sq_pushstring(v, \"" << field->name << "\", -1);\n";
+    if(field->type->atomic_type == &BasicType::INT) {
+        out << ind << "sq_pushinteger(v, " << field->const_int_value << ");\n";
+    } else if(field->type->atomic_type == &BasicType::FLOAT) {
+        out << ind << "sq_pushfloat(v, " << field->const_float_value << ");\n";
+    } else if(field->type->atomic_type == StringType::instance()) {
+        out << ind << "sq_pushstring(v, \""
+            << field->const_string_value << "\", -1);\n";
+    } else {
+      throw std::runtime_error("Constant is not int, float or string");
+    }
+    create_register_slot_code("constant", field->name);
+    out << "\n";
+}
+
+void
+WrapperCreator::create_register_slot_code(const std::string& what,
+                                          const std::string& name)
+{
+    out << ind << "if(SQ_FAILED(sq_createslot(v, -3))) {\n";
+    out << ind << ind << "throw SquirrelError(v, \""
+        << "Couldn't register " << what << " '" << name << "'\");\n";
+    out << ind << "}\n";
+}
+
+void
+WrapperCreator::create_function_wrapper(Class* _class, Function* function)
+{
+    if(function->type == Function::DESTRUCTOR)
+        assert(false);
+
+    std::string ns_prefix;
+    if(selected_namespace != "")
+        ns_prefix = selected_namespace + "::";
+    if(function->type == Function::CONSTRUCTOR)
+        function->name = "constructor";
+
+    out << "static SQInteger ";
+    if(_class != 0) {
+        out << _class->name << "_";
+    }
+    out << function->name << "_wrapper(HSQUIRRELVM vm)\n"
+        << "{\n";
+    // avoid warning...
+    if(_class == 0 && function->parameters.empty()
+            && function->return_type.is_void()
+            && function->type != Function::CONSTRUCTOR) {
+        out << ind << "(void) vm;\n";
+    }
+
+    // retrieve pointer to class instance
+    if(_class != 0 && function->type != Function::CONSTRUCTOR) {
+        out << ind << "SQUserPointer data;\n";
+        out << ind << "if(SQ_FAILED(sq_getinstanceup(vm, 1, &data, 0))) {\n";
+        out << ind << ind << "sq_throwerror(vm, _SC(\"'" << function->name << "' called without instance\"));\n";
+        out << ind << ind << "return SQ_ERROR;\n";
+        out << ind << "}\n";
+        out << ind << ns_prefix <<  _class->name << "* _this = reinterpret_cast<" << ns_prefix << _class->name << "*> (data);\n";
+    }
+
+    // custom function?
+    if(function->custom) {
+        if(function->type != Function::FUNCTION)
+            throw std::runtime_error(
+                    "custom not allow constructor+destructor yet");
+        if(function->return_type.atomic_type != SQIntegerType::instance())
+            throw std::runtime_error("custom function has to return SQInteger");
+        if(function->parameters.size() != 1)
+            throw std::runtime_error(
+                    "custom function must have 1 HSQUIRRELVM parameter");
+
+        out << ind << "return ";
+        if(_class != 0)
+            out << "_this->";
+        else
+            out << ns_prefix;
+        out << function->name << "(vm);\n";
+        out << "}\n";
+        out << "\n";
+        return;
+    }
+
+    // declare and retrieve arguments
+    int i = 0;
+    int arg_offset = 2;
+    for(std::vector<Parameter>::iterator p = function->parameters.begin();
+            p != function->parameters.end(); ++p) {
+        if(i == 0 && p->type.atomic_type == HSQUIRRELVMType::instance()) {
+            out << ind << "HSQUIRRELVM arg0 = vm;\n";
+            arg_offset--;
+        } else {
+            char argname[64];
+            snprintf(argname, sizeof(argname), "arg%d", i);
+            prepare_argument(p->type, i + arg_offset, argname);
+        }
+        ++i;
+    }
+
+    // call function
+    out << ind << "\n";
+    out << ind << "try {\n";
+    out << ind << ind;
+    if(!function->return_type.is_void()) {
+        function->return_type.write_c_type(out);
+        out << " return_value = ";
+    }
+    if(_class != 0) {
+        if(function->type == Function::CONSTRUCTOR) {
+            out << ns_prefix << _class->name << "* _this = new " << ns_prefix;
+        } else {
+            out << "_this->";
+        }
+    } else {
+        out << ns_prefix;
+    }
+    if(function->type == Function::CONSTRUCTOR) {
+        out << _class->name << "(";
+    } else {
+        out << function->name << "(";
+    }
+    for(size_t i = 0; i < function->parameters.size(); ++i) {
+        if(i != 0)
+            out << ", ";
+        const Parameter param = function->parameters[i];
+        if(param.type.ref == 0 && param.type.pointer == 0) {
+            if(param.type.atomic_type == &BasicType::INT)
+                out << "static_cast<int> (arg" << i << ")";
+            else if(param.type.atomic_type == &BasicType::FLOAT)
+                out << "static_cast<float> (arg" << i << ")";
+            else if(param.type.atomic_type == &BasicType::BOOL)
+                out << "arg" << i << " == SQTrue";
+            else
+                out << "arg" << i;
+        } else {
+            out << "arg" << i;
+        }
+    }
+    out << ");\n";
+    if(function->type == Function::CONSTRUCTOR) {
+        out << ind << "if(SQ_FAILED(sq_setinstanceup(vm, 1, _this))) {\n";
+        out << ind << ind << "sq_throwerror(vm, _SC(\"Couldn't setup instance of '" << _class->name << "' class\"));\n";
+        out << ind << ind << "return SQ_ERROR;\n";
+        out << ind << "}\n";
+        out << ind << "sq_setreleasehook(vm, 1, "
+            << _class->name << "_release_hook);\n";
+    }
+    out << ind << "\n";
+    // push return value back on stack and return
+    if(function->suspend) {
+        if(!function->return_type.is_void()) {
+            std::stringstream msg;
+            msg << "Function '" << function->name << "' declared as suspend"
+                << " but has a return value.";
+            throw std::runtime_error(msg.str());
+        }
+        out << ind << ind << "return sq_suspendvm(vm);\n";
+    } else if(function->return_type.is_void()) {
+        out << ind << ind << "return 0;\n";
+    } else {
+        push_to_stack(function->return_type, "return_value");
+        out << ind << ind << "return 1;\n";
+    }
+
+    out << ind << "\n";
+    out << ind << "} catch(std::exception& e) {\n";
+    out << ind << ind << "sq_throwerror(vm, e.what());\n";
+    out << ind << ind << "return SQ_ERROR;\n";
+    out << ind << "} catch(...) {\n";
+    out << ind << ind << "sq_throwerror(vm, _SC(\"Unexpected exception while executing function '" << function->name << "'\"));\n";
+    out << ind << ind << "return SQ_ERROR;\n";
+    out << ind << "}\n";
+    out << ind << "\n";
+
+    out << "}\n";
+    out << "\n";
+}
+
+void
+WrapperCreator::prepare_argument(const Type& type, size_t index,
+        const std::string& var)
+{
+    if(type.ref > 0 && type.atomic_type != StringType::instance())
+        throw std::runtime_error("References not handled yet");
+    if(type.pointer > 0)
+        throw std::runtime_error("Pointers not handled yet");
+    if(type.atomic_type == &BasicType::INT) {
+        out << ind << "SQInteger " << var << ";\n";
+        out << ind << "if(SQ_FAILED(sq_getinteger(vm, " << index << ", &" << var << "))) {\n";
+        out << ind << ind << "sq_throwerror(vm, _SC(\"Argument " << (index-1) << " not an integer\"));\n";
+        out << ind << ind << "return SQ_ERROR;\n";
+        out << ind << "}\n";
+    } else if(type.atomic_type == &BasicType::FLOAT) {
+        out << ind << "SQFloat " << var << ";\n";
+        out << ind << "if(SQ_FAILED(sq_getfloat(vm, " << index << ", &" << var << "))) {\n";
+        out << ind << ind << "sq_throwerror(vm, _SC(\"Argument " << (index-1) << " not a float\"));\n";
+        out << ind << ind << "return SQ_ERROR;\n";
+        out << ind << "}\n";
+    } else if(type.atomic_type == &BasicType::BOOL) {
+        out << ind << "SQBool " << var << ";\n";
+        out << ind << "if(SQ_FAILED(sq_getbool(vm, " << index << ", &" << var << "))) {\n";
+        out << ind << ind << "sq_throwerror(vm, _SC(\"Argument " << (index-1) << " not a bool\"));\n";
+        out << ind << ind << "return SQ_ERROR;\n";
+        out << ind << "}\n";
+    } else if(type.atomic_type == StringType::instance()) {
+        out << ind << "const SQChar* " << var << ";\n";
+        out << ind << "if(SQ_FAILED(sq_getstring(vm, " << index << ", &" << var << "))) {\n";
+        out << ind << ind << "sq_throwerror(vm, _SC(\"Argument " << (index-1) << " not a string\"));\n";
+        out << ind << ind << "return SQ_ERROR;\n";
+        out << ind << "}\n";
+    } else {
+        std::ostringstream msg;
+        msg << "Type '" << type.atomic_type->name << "' not supported yet.";
+        throw std::runtime_error(msg.str());
+    }
+}
+
+void
+WrapperCreator::push_to_stack(const Type& type, const std::string& var)
+{
+    if(type.ref > 0 && type.atomic_type != StringType::instance())
+        throw std::runtime_error("References not handled yet");
+    if(type.pointer > 0)
+        throw std::runtime_error("Pointers not handled yet");
+    out << ind << ind;
+    if(type.atomic_type == &BasicType::INT) {
+        out << "sq_pushinteger(vm, " << var << ");\n";
+    } else if(type.atomic_type == &BasicType::FLOAT) {
+        out << "sq_pushfloat(vm, " << var << ");\n";
+    } else if(type.atomic_type == &BasicType::BOOL) {
+        out << "sq_pushbool(vm, " << var << ");\n";
+    } else if(type.atomic_type == StringType::instance()) {
+        out << "sq_pushstring(vm, " << var << ".c_str(), "
+            << var << ".size());\n";
+    } else {
+        std::ostringstream msg;
+        msg << "Type '" << type.atomic_type->name << "' not supported yet.";
+        throw std::runtime_error(msg.str());
+    }
+}
+
+void
+WrapperCreator::create_class_wrapper(Class* _class)
+{
+    create_class_release_hook(_class);
+    for(std::vector<ClassMember*>::iterator i = _class->members.begin();
+            i != _class->members.end(); ++i) {
+        ClassMember* member = *i;
+        if(member->visibility != ClassMember::PUBLIC)
+            continue;
+        Function* function = dynamic_cast<Function*> (member);
+        if(!function)
+            continue;
+        // don't wrap destructors
+        if(function->type == Function::DESTRUCTOR)
+            continue;
+        create_function_wrapper(_class, function);
+    }
+}
+
+void
+WrapperCreator::create_squirrel_instance(Class* _class)
+{
+    out << "void create_squirrel_instance(HSQUIRRELVM v, "
+        << ns_prefix << _class->name
+        << "* object, bool setup_releasehook)\n"
+        << "{\n"
+        << ind << "using namespace Wrapper;\n"
+        << "\n"
+        << ind << "sq_pushroottable(v);\n"
+        << ind << "sq_pushstring(v, \"" << _class->name << "\", -1);\n"
+        << ind << "if(SQ_FAILED(sq_get(v, -2))) {\n"
+        << ind << ind << "std::ostringstream msg;\n"
+        << ind << ind << "msg << \"Couldn't resolved squirrel type '"
+        << _class->name << "'\";\n"
+        << ind << ind << "throw SquirrelError(v, msg.str());\n"
+        << ind << "}\n"
+        << "\n"
+        << ind << "if(SQ_FAILED(sq_createinstance(v, -1)) || "
+        << "SQ_FAILED(sq_setinstanceup(v, -1, object))) {\n"
+        << ind << ind << "std::ostringstream msg;\n"
+        << ind << ind << "msg << \"Couldn't setup squirrel instance for "
+        << "object of type '" << _class->name << "'\";\n"
+        << ind << ind << "throw SquirrelError(v, msg.str());\n"
+        << ind << "}\n"
+        << ind << "sq_remove(v, -2); // remove object name\n"
+        << "\n"
+        << ind << "if(setup_releasehook) {\n"
+        << ind << ind << "sq_setreleasehook(v, -1, "
+        << _class->name << "_release_hook);\n"
+        << ind << "}\n"
+        << "\n"
+        << ind << "sq_remove(v, -2); // remove root table\n"
+        << "}\n"
+        << "\n";
+}
+
+void
+WrapperCreator::create_class_release_hook(Class* _class)
+{
+    out << "static SQInteger " << _class->name << "_release_hook(SQUserPointer ptr, SQInteger )\n"
+        << "{\n"
+        << ind << ns_prefix << _class->name
+        << "* _this = reinterpret_cast<" << ns_prefix << _class->name
+        << "*> (ptr);\n"
+        << ind << "delete _this;\n"
+        << ind << "return 0;\n"
+        << "}\n"
+        << "\n";
+}


Property changes on: tags/windstille-0.3.0/tools/miniswig/create_wrapper.cpp
___________________________________________________________________
Name: svn:keywords
   + Id
Name: svn:eol-style
   + native

Added: tags/windstille-0.3.0/tools/miniswig/create_wrapper.hpp
===================================================================
--- tags/windstille-0.3.0/tools/miniswig/create_wrapper.hpp	2009-02-05 20:06:07 UTC (rev 2411)
+++ tags/windstille-0.3.0/tools/miniswig/create_wrapper.hpp	2009-02-05 20:09:13 UTC (rev 2412)
@@ -0,0 +1,46 @@
+#ifndef __CREATE_WRAPPER_H__
+#define __CREATE_WRAPPER_H__
+
+#include "tree.hpp"
+
+class WrapperCreator
+{
+public:
+    /// this is used for indentation
+    const char* ind;
+    // output stream
+    std::ostream& out;
+    std::ostream& hppout;
+
+    WrapperCreator(std::ostream& _out = std::cout, std::ostream& _hppout = std::cout)
+        : out(_out), hppout(_hppout)
+    {
+        ind = "  ";
+    }
+
+    void create_wrapper(Namespace* ns);
+
+private:
+    std::string ns_prefix;
+
+    void create_register_functions_code(Namespace* ns);
+    void create_register_function_code(Function* function, Class* _class);
+    void create_register_classes_code(Namespace* ns);
+    void create_register_class_code(Class* _class);
+    void create_register_constant_code(Field* field);
+    void create_register_constants_code(Namespace* ns);
+    void create_register_slot_code(const std::string& what,
+                                   const std::string& name);
+
+    void create_function_list(Namespace* ns);
+    void create_const_lists(Namespace* ns);
+    void create_class_const_lists(Class* _class);
+    void create_class_wrapper(Class* _class);
+    void create_class_release_hook(Class* _class);
+    void create_squirrel_instance(Class* _class);
+    void create_function_wrapper(Class* _class, Function* function);
+    void prepare_argument(const Type& type, size_t idx, const std::string& var);
+    void push_to_stack(const Type& type, const std::string& var);
+};
+
+#endif


Property changes on: tags/windstille-0.3.0/tools/miniswig/create_wrapper.hpp
___________________________________________________________________
Name: svn:keywords
   + Id
Name: svn:eol-style
   + native

Added: tags/windstille-0.3.0/tools/miniswig/globals.hpp
===================================================================
--- tags/windstille-0.3.0/tools/miniswig/globals.hpp	2009-02-05 20:06:07 UTC (rev 2411)
+++ tags/windstille-0.3.0/tools/miniswig/globals.hpp	2009-02-05 20:09:13 UTC (rev 2412)
@@ -0,0 +1,29 @@
+#ifndef __GLOBALS_H__
+#define __GLOBALS_H__
+
+#include "tree.hpp"
+#include <iostream>
+
+// parsing
+extern CompilationUnit* unit;
+extern bool search_down;
+extern Namespace* search_namespace;
+extern Namespace* current_namespace;
+extern std::string last_docucomment;
+// the first file indicated by # 1 "..."
+// (this is what the C preprocessor outputs so that you know which was the
+// original file before preprocessing
+extern std::string original_file;
+// the filename where the current fragment came from (before it was included by
+// the preprocessor)
+extern std::string current_file;
+// get line number inside the current_file
+int getCurrentLine();
+
+// config/output
+extern std::istream* input;
+extern std::string inputfile;
+extern std::string modulename;
+extern std::string selected_namespace;
+
+#endif


Property changes on: tags/windstille-0.3.0/tools/miniswig/globals.hpp
___________________________________________________________________
Name: svn:keywords
   + Id
Name: svn:eol-style
   + native

Added: tags/windstille-0.3.0/tools/miniswig/lexer.ll
===================================================================
--- tags/windstille-0.3.0/tools/miniswig/lexer.ll	2009-02-05 20:06:07 UTC (rev 2411)
+++ tags/windstille-0.3.0/tools/miniswig/lexer.ll	2009-02-05 20:09:13 UTC (rev 2412)
@@ -0,0 +1,139 @@
+%{
+#include <config.h>
+  
+#include <math.h>
+#include <stdlib.h>
+#include <string.h>
+#include <iostream>
+#include "tree.hpp"
+#include "parser.hpp"
+#include "globals.hpp"
+
+// there seems to be a bug in flex that adds some ECHO directives
+// in some rules, we don't need debug output
+#define ECHO  {}
+
+#define YY_NEVER_INTERACTIVE 1
+#define YY_DECL int yylex(YYSTYPE* yylval)
+
+#define YY_INPUT(buf, result, max_size)                     \
+{                                                           \
+    input->read(buf, max_size);                             \
+    result = input->gcount();                               \
+}
+
+std::string last_docucomment;
+std::string original_file;
+std::string current_file;
+std::string comm;
+int offset_lnum;
+
+int getCurrentLine()
+{
+    return yylineno - offset_lnum;
+}
+    
+%}
+
+%option noyywrap
+%option yylineno
+/* %option never-interactive */
+
+%x comment
+%%
+
+#[ \t]+[0-9]+[ \t]+.*                         {
+    int lnum;
+    char file[1024];
+    if(sscanf(yytext, "# %d \"%1023[^\"]\"", &lnum, file) == 2) {
+        offset_lnum = yylineno - lnum + 1;
+        current_file = file;
+        if(original_file == "")
+            original_file = file;
+    } else {
+        std::cerr << "Warning: Parse error in processor info directive.\n";
+    }
+}
+#.*                                     /* ignore preprocessor directives */
+[[:space:]]+                            /* eat spaces */
+"/*"                                    { BEGIN(comment); comm = ""; }
+<comment>[^*\n]*                        { comm += yytext; }
+<comment>"*"+[^*/]*                     { comm += yytext; }
+<comment>"*/"                    {
+    BEGIN(INITIAL);
+    if(comm[0] == '*') { // It's a docu comment...
+        last_docucomment = "";
+        bool linestart = true;
+        for(size_t i = 1; i < comm.size(); ++i) {
+            if(linestart && (comm[i] == '*' || isspace(comm[i]))) {
+                continue;
+            } else if(comm[i] == '\n') {
+                linestart = true;
+            } else {
+                linestart = false;
+            }
+            last_docucomment += comm[i];
+        }
+    }
+}
+\/\/[^\n]*\n                            {
+    if(yytext[2] == '/') { // it's a docu comment...
+        last_docucomment = std::string(yytext+3, strlen(yytext)-4);
+    }
+}
+class                                   { return T_CLASS; }
+struct                                  { return T_STRUCT; }
+static                                  { return T_STATIC; }
+virtual                                 { }
+const                                   { return T_CONST; }
+unsigned                                { return T_UNSIGNED; }
+signed                                  { return T_SIGNED; }
+void                                    { return T_VOID; }
+bool                                    { return T_BOOL; }
+char                                    { return T_CHAR; }
+short                                   { return T_SHORT; }
+int                                     { return T_INT; }
+long                                    { return T_LONG; }
+float                                   { return T_FLOAT; }
+double                                  { return T_DOUBLE; }
+public                                  { return T_PUBLIC; }
+protected                               { return T_PROTECTED; }
+private                                 { return T_PRIVATE; }
+namespace                               { return T_NAMESPACE; }
+__suspend                               { return T_SUSPEND; }
+__custom                                { return T_CUSTOM; }
+[a-zA-Z_][a-zA-Z_0-9]*                  {
+        Namespace* ns = search_namespace;
+        if(ns == 0)
+            ns = current_namespace;          
+        // is it a type?
+        yylval->atomic_type = ns->_findType(yytext, search_down);
+        if(yylval->atomic_type) {
+            return T_ATOMIC_TYPE;
+        }
+        // or a namespace? (hack for now...)
+        yylval->_namespace = ns->_findNamespace(yytext, search_down);
+        if(yylval->_namespace) {
+            return T_NAMESPACEREF;
+        }
+        // a new ID
+        yylval->str = strdup(yytext);
+        return T_ID;
+}
+\:\:                                    { return T_DDCOL; }
+(0x)?[0-9]+ {
+        sscanf(yytext, "%i", &(yylval->ival));
+        return T_INT;
+}
+[0-9]*\.[0-9]+(e[0-9]+)? { 
+        sscanf(yytext, "%f", &(yylval->fval));
+        return T_FLOAT;
+}
+\".*\" {
+        yylval->str = strdup(yytext);
+        return T_STRING;
+}
+.                                       { return yytext[0]; }
+
+%%
+

Added: tags/windstille-0.3.0/tools/miniswig/main.cpp
===================================================================
--- tags/windstille-0.3.0/tools/miniswig/main.cpp	2009-02-05 20:06:07 UTC (rev 2411)
+++ tags/windstille-0.3.0/tools/miniswig/main.cpp	2009-02-05 20:09:13 UTC (rev 2412)
@@ -0,0 +1,145 @@
+#include <config.h>
+
+#include <iostream>
+#include <fstream>
+#include <vector>
+#include <string>
+#include "tree.hpp"
+#include "globals.hpp"
+#include "create_wrapper.hpp"
+#include "create_docu.hpp"
+
+extern int yyparse();
+extern int yylex();
+
+CompilationUnit* unit = 0;
+std::istream* input = 0;
+std::string inputfile;
+std::string selected_namespace;
+std::string modulename = "wrapper";
+
+void usage()
+{
+    std::cout << "Usage: miniswig --input FILE --output-cpp FILE --output-hpp FILE [--module NAME] [--select-namespace NAME]\n";
+    std::cout << "\n";
+}
+
+int main(int argc, char** argv)
+{
+    std::string outputcpp;
+    std::string outputhpp;
+    std::string output_doc;
+    for(int i = 0; i < argc; ++i) {
+        if(strcmp(argv[i], "--module") == 0) {
+            if(i+1 >= argc) {
+                std::cerr << "Need to specify a module name.\n";
+                usage();
+                return 1;
+            }
+            modulename = argv[++i];
+        } else if(strcmp(argv[i], "--input") == 0) {
+            if(i+1 >= argc) {
+                std::cerr << "Need to specify input file name.\n";
+                usage();
+                return 1;
+            }
+            inputfile = argv[++i];
+        } else if(strcmp(argv[i], "--output-cpp") == 0) {
+            if(i+1 >= argc) {
+                std::cerr << "Need to specifiy output cpp name.\n";
+                usage();
+                return 1;
+            }
+            outputcpp = argv[++i];
+        } else if(strcmp(argv[i], "--output-hpp") == 0) {
+            if(i+1 >= argc) {
+                std::cerr << "Need to specify output hpp name.\n";
+                usage();
+                return 1;
+            }
+            outputhpp = argv[++i];
+        } else if(strcmp(argv[i], "--select-namespace") == 0) {
+            if(i+1 >= argc) {
+                std::cerr << "Need to specify a namespace.\n";
+                usage();
+                return 1;
+            }
+            selected_namespace = argv[++i];
+        } else if(strcmp(argv[i], "--output-doc") == 0) {
+          if(i+1 >= argc) {
+            std::cerr << "Need to specify document xml file.\n";
+            usage();
+            return 1;
+          }
+          output_doc = argv[++i];
+        } else if(argv[i][0] == '-') {
+            std::cerr << "Unknown option '" << argv[i] << "'.\n";
+            usage();
+            return 1;
+        } else {
+        }
+    }
+    if( inputfile == "" || (
+            (outputcpp == "" || outputhpp == "") && output_doc == "")) {
+        std::cerr << "Not all options specified.\n";
+        usage();
+        return 1;
+    }
+
+    try {
+        input = new std::ifstream(inputfile.c_str());
+        if(!input->good()) {
+            std::cerr << "Couldn't open file '" << input << "' for reading.\n";
+            return 1;
+        }
+        current_file = inputfile;
+        unit = new CompilationUnit();
+        Namespace* std_namespace = new Namespace();
+        std_namespace->name = "std";
+        std_namespace->types.push_back(new StringType());
+        unit->namespaces.push_back(std_namespace);
+        unit->types.push_back(new HSQUIRRELVMType());
+        unit->types.push_back(new SQIntegerType());
+
+        yyparse();
+
+        Namespace* ns = unit;
+        if(selected_namespace != "") {
+            ns = ns->findNamespace(selected_namespace);
+        }
+
+        if(outputcpp != "") {
+            std::ofstream cppout(outputcpp.c_str());
+            if(!cppout.good()) {
+                std::cerr << "Couldn't open file '"
+                          << outputcpp << "' for writing.\n";
+                return 1;
+            }
+            std::ofstream hppout(outputhpp.c_str());
+            if(!hppout.good()) {
+                std::cerr << "Couldn't open file '" << outputhpp
+                          << "' for writing.\n";
+                return 1;
+            }
+
+            WrapperCreator creator(cppout, hppout);
+            creator.create_wrapper(ns);
+        }
+
+        if(output_doc != "") {
+            std::ofstream dout(output_doc.c_str());
+            if(!dout.good()) {
+                std::cerr << "Couldn't open file '"
+                    << output_doc << "' for writing.\n";
+                return 1;
+            }
+            DocuCreator creator(dout);
+            creator.create_docu(ns);
+        }
+    } catch(std::exception& e) {
+        std::cerr << "Exception: " << e.what() << "\n";
+        return 1;
+    }
+
+    return 0;
+}


Property changes on: tags/windstille-0.3.0/tools/miniswig/main.cpp
___________________________________________________________________
Name: svn:keywords
   + Id
Name: svn:eol-style
   + native

Added: tags/windstille-0.3.0/tools/miniswig/parser.yy
===================================================================
--- tags/windstille-0.3.0/tools/miniswig/parser.yy	2009-02-05 20:06:07 UTC (rev 2411)
+++ tags/windstille-0.3.0/tools/miniswig/parser.yy	2009-02-05 20:09:13 UTC (rev 2412)
@@ -0,0 +1,447 @@
+%{
+#include <config.h>
+
+#include <iostream>
+#include <sstream>
+#include <stdexcept>
+#include "tree.hpp"
+#include "globals.hpp"
+
+%}
+
+%pure_parser
+%union {
+    char*       str;
+    int         ival;
+    float       fval;
+    Class*      _class;
+    Function*   function;
+    Field*      field;
+    Type*       type;
+    AtomicType* atomic_type;
+    Namespace*  _namespace;
+}
+
+%{
+
+extern int yylex(YYSTYPE* yylval);
+void yyerror(const char* s);
+extern int yylineno;
+
+bool search_down = true;
+Namespace* search_namespace = 0;
+Namespace* current_namespace = 0;
+static Class* current_class = 0;
+static Function* current_function = 0;
+static Type* current_type = 0;
+static Field* current_field = 0;
+static ClassMember::Visbility current_visibility;
+
+class ParseError : public std::exception
+{
+public:
+    ParseError(const std::string& message) throw()
+    {
+        std::ostringstream msg;
+        msg << "Parse error in '" << current_file
+            << "' line " << getCurrentLine() << ": "
+            << message;
+        this->message = msg.str();
+    }
+    virtual ~ParseError() throw()
+    {}
+    const char* what() const throw()
+    {
+        return message.c_str();
+    }
+
+private:
+    std::string message;
+};
+
+%}
+
+%token <ival> T_INT
+%token <fval> T_FLOAT
+%token <str>  T_STRING
+%token <str>  T_ID
+%token <atomic_type> T_ATOMIC_TYPE
+%token <_namespace> T_NAMESPACEREF
+%token T_CLASS
+%token T_STRUCT
+%token T_STATIC
+%token T_SUSPEND
+%token T_CUSTOM
+%token T_CONST
+%token T_UNSIGNED
+%token T_SIGNED
+%token T_VOID
+%token T_BOOL
+%token T_CHAR
+%token T_SHORT
+%token T_LONG
+%token T_DOUBLE
+%token T_PUBLIC
+%token T_PROTECTED
+%token T_PRIVATE
+%token T_NAMESPACE
+%token T_DDCOL "::"
+
+%type <_class> class_declaration
+%type <function> function_declaration
+%type <function> constructor_declaration;
+%type <function> destructor_declaration;
+%type <field> field_declaration;
+%type <type>   type
+%type <atomic_type> type_identifier
+
+%%
+
+input:
+        {
+            current_namespace = unit;
+        }
+    namespace_members
+;
+
+namespace_members: /* empty */
+    | namespace_members namespace_member
+;
+
+namespace_declaration:
+    T_NAMESPACE T_ID '{' 
+        {
+            Namespace* newNamespace = new Namespace();
+            newNamespace->name = $2;
+            free($2);
+            current_namespace->add_namespace(newNamespace);
+            current_namespace = newNamespace;
+        }
+    namespace_members '}'
+        {
+            current_namespace = current_namespace->parent;
+        }
+    | T_NAMESPACE T_NAMESPACEREF '{'
+        {
+            current_namespace = $2;
+        }
+    namespace_members '}'
+        {
+            current_namespace = current_namespace->parent;
+        }
+;
+
+namespace_member:
+    class_declaration
+        { current_namespace->add_type($1); }
+    | function_declaration
+        { current_namespace->functions.push_back($1); }
+    | namespace_declaration
+    | field_declaration
+        { current_namespace->fields.push_back($1); }
+;  
+
+class_declaration:
+    T_CLASS T_ID 
+        {
+            current_class = new Class();
+            current_class->name = $2;
+            free($2);
+            current_class->docu_comment = last_docucomment;
+            last_docucomment = "";
+            current_visibility = ClassMember::PROTECTED;
+        }
+    superclass_list '{' class_body '}' ';'
+        {
+            $$ = current_class;
+        }
+;
+
+superclass_list:
+    /* empty */
+    | ':' superclasses
+;
+
+superclasses:
+      superclass
+    | superclasses ',' superclass
+;
+
+superclass:
+    superclass_visibility type_identifier
+        {
+            Class* superclass = dynamic_cast<Class*> ($2);
+            if(superclass == 0)
+                throw ParseError("SuperClass is not a Class type");
+            current_class->super_classes.push_back(superclass);
+            superclass->sub_classes.push_back(current_class);
+        }
+;
+
+superclass_visibility:
+    T_PUBLIC
+    | T_PROTECTED
+    | T_PRIVATE
+;
+
+class_body: /* empty */
+        | class_body class_body_element
+;
+
+class_body_element:
+        visibility_change
+        | constructor_declaration
+            { 
+                $1->visibility = current_visibility;
+                current_class->members.push_back($1);
+            }
+        | destructor_declaration
+            {
+                $1->visibility = current_visibility;
+                current_class->members.push_back($1);
+            }
+        | function_declaration
+            {
+                $1->visibility = current_visibility;
+                current_class->members.push_back($1);
+            }
+        | field_declaration
+            {
+                $1->visibility = current_visibility;
+                current_class->members.push_back($1);
+            }
+;
+
+visibility_change:
+    T_PUBLIC ':'
+        { current_visibility = ClassMember::PUBLIC; }
+    |   T_PROTECTED ':'
+        { current_visibility = ClassMember::PROTECTED; }
+    |   T_PRIVATE ':'
+        { current_visibility = ClassMember::PRIVATE; }
+;
+
+constructor_declaration:    
+    T_ID '('
+        {
+            current_function = new Function();
+            current_function->type = Function::CONSTRUCTOR;
+            current_function->docu_comment = last_docucomment;
+            last_docucomment = "";
+            free($1);
+        }
+    parameter_list ')' ';'
+        {
+            $$ = current_function;
+        }
+;
+
+destructor_declaration:
+    '~' T_ID '(' ')' abstract_declaration ';'
+        {
+            current_function = new Function();
+            current_function->type = Function::DESTRUCTOR;
+            current_function->docu_comment = last_docucomment;
+            last_docucomment = "";
+            free($2);
+            $$ = current_function;
+        }
+;
+
+field_declaration:
+    type T_ID 
+        {
+            current_field = new Field();
+            current_field->type = $1;
+            current_field->docu_comment = last_docucomment;
+            last_docucomment = "";
+            current_field->name = $2;
+            free($2);
+        }
+    maybe_const_initialisation ';'
+        {
+            $$ = current_field;
+        }
+;
+
+maybe_const_initialisation:
+    /* empty */
+    | '=' T_INT
+        {
+            if(current_field->type->atomic_type == &BasicType::FLOAT) {
+                current_field->const_float_value = (float) $2;
+            } else {
+                current_field->const_int_value = $2;
+            }
+            current_field->has_const_value = true;
+        }
+    | '=' T_FLOAT
+        {
+            current_field->const_float_value = $2;
+            current_field->has_const_value = true;
+        }
+    | '=' T_STRING
+        {
+            current_field->const_string_value = $2;
+            current_field->has_const_value = true;
+        }
+;          
+
+function_declaration:
+    type T_ID '(' 
+        {
+            current_function = new Function();
+            current_function->type = Function::FUNCTION;
+            current_function->return_type = *($1);
+            delete $1;
+            current_function->name = $2;
+            free($2);
+            current_function->docu_comment = last_docucomment;
+            last_docucomment = "";
+        }                           
+    parameter_list ')' function_attributes abstract_declaration ';'
+        {
+            $$ = current_function;
+        }
+;
+
+function_attributes:
+    /* empty */
+    | T_CONST function_attributes
+    | T_CUSTOM function_attributes
+      {
+        current_function->custom = true;
+      }
+    | T_SUSPEND function_attributes
+      {
+        current_function->suspend = true;
+      }
+;
+
+abstract_declaration:
+    /* empty */
+    | '=' T_INT
+;
+
+parameter_list:
+    /* empty */
+    | parameters
+;
+
+parameters:
+    parameter
+    | parameters ',' parameter
+;
+
+parameter:
+    type
+        {
+            Parameter parameter;
+            parameter.type = *($1);
+            delete $1;
+            current_function->parameters.push_back(parameter);
+        }
+    | type T_ID
+        {
+            Parameter parameter;
+            parameter.type = *($1);
+            delete $1;
+            parameter.name = $2;
+            free($2);
+            current_function->parameters.push_back(parameter);
+        }
+;
+
+type:
+        {
+            current_type = new Type();
+        }
+    prefix_type_modifiers atomic_type postfix_type_modifiers 
+        {
+            $$ = current_type;
+        }
+;
+
+prefix_type_modifiers:
+    /* empty */
+    | prefix_type_modifiers prefix_type_modifier
+;
+
+prefix_type_modifier:
+    T_UNSIGNED
+        { current_type->_unsigned = true; }
+    | T_SIGNED
+        { current_type->_unsigned = false; }
+    | T_STATIC
+        { current_type->_static = true; }
+    | T_CONST
+        { current_type->_const = true; }
+;
+
+postfix_type_modifiers:
+    /* empty */
+    | postfix_type_modifiers postfix_type_modifier
+;
+
+postfix_type_modifier:
+    T_CONST
+        { current_type->_const = true; }
+    |   '*'
+        { current_type->pointer++; }
+    |   '&'
+        { current_type->ref++; }
+;
+
+atomic_type:
+    T_VOID
+        { current_type->atomic_type = &BasicType::VOID; }
+    | T_BOOL
+        { current_type->atomic_type = &BasicType::BOOL; }
+    | T_CHAR
+        { current_type->atomic_type = &BasicType::CHAR; }
+    | T_SHORT
+        { current_type->atomic_type = &BasicType::SHORT; }
+    | T_INT
+        { current_type->atomic_type = &BasicType::INT; }
+    | T_LONG
+        { current_type->atomic_type = &BasicType::LONG; }
+    | T_FLOAT
+        { current_type->atomic_type = &BasicType::FLOAT; }
+    | T_DOUBLE
+        { current_type->atomic_type = &BasicType::DOUBLE; }
+    | type_identifier
+        { current_type->atomic_type = $1; }
+;
+
+type_identifier:
+    T_ATOMIC_TYPE
+        {
+            $$ = $1;
+        }
+    | namespace_refs "::" T_ATOMIC_TYPE
+        {
+            $$ = $3;
+            search_namespace = 0;
+            search_down = true;
+        }
+;
+
+namespace_refs:
+    T_NAMESPACEREF
+        {
+            search_namespace = $1;
+            search_down = false;
+        }
+    | namespace_refs "::" T_NAMESPACEREF
+        {
+            search_namespace = $3;
+        }
+;
+
+%%
+
+void yyerror(const char* error)
+{
+    throw ParseError(error);
+}
+

Added: tags/windstille-0.3.0/tools/miniswig/tree.cpp
===================================================================
--- tags/windstille-0.3.0/tools/miniswig/tree.cpp	2009-02-05 20:06:07 UTC (rev 2411)
+++ tags/windstille-0.3.0/tools/miniswig/tree.cpp	2009-02-05 20:09:13 UTC (rev 2412)
@@ -0,0 +1,15 @@
+#include <config.h>
+#include "tree.hpp"
+
+BasicType BasicType::VOID("void");
+BasicType BasicType::BOOL("bool");
+BasicType BasicType::CHAR("char");
+BasicType BasicType::SHORT("short");
+BasicType BasicType::INT("int");
+BasicType BasicType::LONG("long");
+BasicType BasicType::FLOAT("float");
+BasicType BasicType::DOUBLE("double");
+
+StringType* StringType::_instance = NULL;
+HSQUIRRELVMType* HSQUIRRELVMType::_instance = NULL;
+SQIntegerType* SQIntegerType::_instance = NULL;


Property changes on: tags/windstille-0.3.0/tools/miniswig/tree.cpp
___________________________________________________________________
Name: svn:keywords
   + Id
Name: svn:eol-style
   + native

Added: tags/windstille-0.3.0/tools/miniswig/tree.hpp
===================================================================
--- tags/windstille-0.3.0/tools/miniswig/tree.hpp	2009-02-05 20:06:07 UTC (rev 2411)
+++ tags/windstille-0.3.0/tools/miniswig/tree.hpp	2009-02-05 20:09:13 UTC (rev 2412)
@@ -0,0 +1,311 @@
+#ifndef __TREE_H__
+#define __TREE_H__
+
+#include <vector>
+#include <string>
+#include <iostream>
+#include <sstream>
+#include <stdexcept>
+#include <assert.h>
+
+class Namespace;
+
+class AtomicType {
+public:
+    AtomicType()
+        : parent(0)
+    { }
+    virtual ~AtomicType()
+    { }
+
+    virtual void write_c(std::ostream& out)
+    {
+        out << name;
+    }
+
+    std::string name;
+    Namespace* parent;
+};
+
+class BasicType : public AtomicType {
+public:
+    static BasicType VOID;
+    static BasicType BOOL;
+    static BasicType CHAR;
+    static BasicType SHORT;
+    static BasicType INT;
+    static BasicType LONG;
+    static BasicType FLOAT;
+    static BasicType DOUBLE;
+
+private:
+    BasicType(const std::string& name)
+    {
+        this->name = name;
+    }
+};
+
+class Type {
+public:
+    Type()
+        : atomic_type(0), _unsigned(false), _const(false), _static(false),
+        pointer(0), ref(0)
+    { }
+
+    void write_c_type(std::ostream& out)
+    {
+        if(_static)
+            out << "static ";
+        if(_const)
+            out << "const ";
+        atomic_type->write_c(out);
+        for(int i = 0; i < pointer; ++i)
+            out << "*";
+        for(int i = 0; i < ref; ++i)
+            out << "&";
+    }
+
+    bool is_void() const
+    {
+        if(atomic_type == 0)
+            return true;
+        if(atomic_type == &BasicType::VOID && pointer == 0)
+            return true;
+        return false;
+    }
+
+    AtomicType* atomic_type;
+    bool _unsigned;
+    bool _const;
+    bool _static;
+    // number of '*' in the type declaration...
+    int pointer;
+    // number of '&' in the type declaration...
+    int ref;
+};
+
+class SQIntegerType : public AtomicType {
+public:
+    SQIntegerType()
+    {
+        this->name = "SQInteger";
+        assert(_instance == 0);
+        _instance = this;
+    }
+    virtual ~SQIntegerType()
+    {
+        assert(_instance == this);
+        _instance = NULL;
+    }
+
+    static SQIntegerType* instance()
+    {
+        return _instance;
+    }
+private:
+    static SQIntegerType* _instance;
+};
+
+class HSQUIRRELVMType : public AtomicType {
+public:
+    HSQUIRRELVMType()
+    {
+        this->name = "HSQUIRRELVM";
+        assert(_instance == 0);
+        _instance = this;
+    }
+    virtual ~HSQUIRRELVMType()
+    {
+        assert(_instance == this);
+        _instance = NULL;
+    }
+
+    static HSQUIRRELVMType* instance()
+    {
+        return _instance;
+    }
+private:
+    static HSQUIRRELVMType* _instance;
+};
+
+class StringType : public AtomicType {
+public:
+    StringType()
+    {
+        this->name = "string";
+        assert(_instance == 0);
+        _instance = this;
+    }
+    virtual ~StringType()
+    {
+        assert(_instance == this);
+        _instance = 0;
+    }
+
+    static StringType* instance()
+    {
+        return _instance;
+    }
+
+    virtual void write_c(std::ostream& out)
+    {
+        out << "std::string";
+    }
+
+private:
+    static StringType* _instance;
+};
+
+class Parameter {
+public:
+    std::string name;
+    Type type;
+};
+
+class ClassMember {
+public:
+    virtual ~ClassMember()
+    { }
+
+    enum Visbility {
+        PUBLIC,
+        PROTECTED,
+        PRIVATE
+    };
+    Visbility visibility;
+};
+
+class Function : public ClassMember {
+public:
+    Function() {
+      type = FUNCTION;
+      suspend = false;
+      custom = false;
+    }
+
+    enum FuncType {
+        FUNCTION,
+        CONSTRUCTOR,
+        DESTRUCTOR
+    };
+    FuncType type;
+    /// function should suspend squirrel VM after execution
+    bool suspend;
+    /// a custom wrapper (just pass along HSQUIRRELVM)
+    bool custom;
+    std::string docu_comment;
+    std::string name;
+    Type return_type;
+    std::vector<Parameter> parameters;
+};
+
+class Field : public ClassMember {
+public:
+    Field()
+    {
+        has_const_value = false;
+    }
+
+    Type* type;
+    std::string docu_comment;
+    std::string name;
+    bool has_const_value;
+
+    union {
+        float const_float_value;
+        int const_int_value;
+    };
+    std::string const_string_value;
+};
+
+class Class : public AtomicType {
+public:
+    ~Class() {
+        for(std::vector<ClassMember*>::iterator i = members.begin();
+                i != members.end(); ++i)
+            delete *i;
+    }
+
+    std::vector<ClassMember*> members;
+    std::vector<Class*> super_classes;
+    std::vector<Class*> sub_classes;
+    std::string docu_comment;
+};
+
+class Namespace {
+public:
+    Namespace() {
+        parent = 0;
+    }
+    virtual ~Namespace() {
+        for(std::vector<Function*>::iterator i = functions.begin();
+                i != functions.end(); ++i)
+            delete *i;
+        for(std::vector<AtomicType*>::iterator i = types.begin();
+                i != types.end(); ++i)
+            delete *i;
+        for(std::vector<Namespace*>::iterator i = namespaces.begin();
+                i != namespaces.end(); ++i)
+            delete *i;
+    }
+    void add_type(AtomicType* type)
+    {
+        types.push_back(type);
+        type->parent = this;
+    }
+    void add_namespace(Namespace* ns)
+    {
+        namespaces.push_back(ns);
+        ns->parent = this;
+    }
+    AtomicType* _findType(const std::string& name, bool godown = false) {
+        for(std::vector<AtomicType*>::iterator i = types.begin();
+                i != types.end(); ++i) {
+            AtomicType* type = *i;
+            if(type->name == name)
+                return type;
+        }
+        if(godown && parent)
+            return parent->_findType(name, true);
+
+        return 0;
+    }
+
+    Namespace* _findNamespace(const std::string& name, bool godown = false) {
+        for(std::vector<Namespace*>::iterator i = namespaces.begin();
+                i != namespaces.end(); ++i) {
+            Namespace* ns = *i;
+            if(ns->name == name)
+                return ns;
+        }
+        if(godown && parent)
+            return parent->_findNamespace(name, true);
+
+        return 0;
+    }
+
+    Namespace* findNamespace(const std::string& name, bool godown = false) {
+        Namespace* ret = _findNamespace(name, godown);
+        if(!ret) {
+            std::ostringstream msg;
+            msg << "Couldn't find namespace '" << name << "'.";
+            throw std::runtime_error(msg.str());
+        }
+
+        return ret;
+    }
+
+    std::vector<Function*> functions;
+    std::vector<Field*> fields;
+    std::vector<AtomicType*> types;
+    std::vector<Namespace*> namespaces;
+
+    Namespace* parent;
+    std::string name;
+};
+
+class CompilationUnit : public Namespace {
+public:
+};
+
+#endif


Property changes on: tags/windstille-0.3.0/tools/miniswig/tree.hpp
___________________________________________________________________
Name: svn:keywords
   + Id
Name: svn:eol-style
   + native

Added: tags/windstille-0.3.0/tools/miniswig/xmlwriter.cpp
===================================================================
--- tags/windstille-0.3.0/tools/miniswig/xmlwriter.cpp	2009-02-05 20:06:07 UTC (rev 2411)
+++ tags/windstille-0.3.0/tools/miniswig/xmlwriter.cpp	2009-02-05 20:09:13 UTC (rev 2412)
@@ -0,0 +1,77 @@
+#include <config.h>
+
+#include <stdexcept>
+#include <sstream>
+#include "xmlwriter.hpp"
+
+XmlWriter::XmlWriter(std::ostream& outstream)
+    : out(outstream), indent(0)
+{
+}
+
+XmlWriter::~XmlWriter()
+{
+    if(sections.size() > 0) {
+        std::cerr << "WARNING: NOT CLOSED: ";
+        for(std::vector<std::string>::iterator i = sections.begin();
+                i != sections.end(); ++i)
+            std::cerr << *i << " ";
+        std::cerr << "\n";
+    }
+
+    closeTag();
+}
+
+void XmlWriter::openTag(const char* name)
+{
+    newLine();
+    out << "<" << name;
+    closetag = ">";
+    indent++;
+
+    sections.push_back(name);
+}
+
+void XmlWriter::closeTag(const char* name)
+{
+    if(sections.size() == 0)
+	throw std::runtime_error("got closeSection without prior openSection.");
+
+    const std::string& lastsection = sections.back();
+    if (lastsection != name) {
+        std::ostringstream msg;
+        msg << "mismtach in open/closeSection. Expected '"
+            << lastsection << "' got '" << name << "'";
+        throw std::runtime_error(msg.str());
+    }
+    sections.pop_back();
+
+    indent--;
+    newLine();
+    // XXX: We should check for consistency here
+    out << "</" << name;
+    closetag = ">" ;
+}
+
+void XmlWriter::writeTag(const char* name)
+{
+    newLine();
+    out << "<" << name;
+    closetag = "/>";
+    lasttag = name;
+}
+
+void XmlWriter::newLine()
+{
+    if(closetag != "") {
+        closeTag();
+        for (int i=0;i<indent;i++)
+            out << "\t";
+    }
+}
+
+void XmlWriter::closeTag()
+{
+    if (closetag != "")
+	out << closetag << "\n";
+}


Property changes on: tags/windstille-0.3.0/tools/miniswig/xmlwriter.cpp
___________________________________________________________________
Name: svn:keywords
   + Id
Name: svn:eol-style
   + native

Added: tags/windstille-0.3.0/tools/miniswig/xmlwriter.hpp
===================================================================
--- tags/windstille-0.3.0/tools/miniswig/xmlwriter.hpp	2009-02-05 20:06:07 UTC (rev 2411)
+++ tags/windstille-0.3.0/tools/miniswig/xmlwriter.hpp	2009-02-05 20:09:13 UTC (rev 2412)
@@ -0,0 +1,78 @@
+#ifndef __XMLWRITER_H__
+#define __XMLWRITER_H__
+
+#include <iostream>
+#include <vector>
+#include <string>
+
+/** This class is a class which helps printing formated xml output.
+ * Example:
+ *  This sequence:
+ *   xml.openTag("world");
+ *   xml.writeAttribute("name", "foo");
+ *   xml.writeTag("bar");
+ *   xml.writeTag("baz");
+ *   xml.writeAttribute("name", "boo");
+ *   xml.writeAttribute("style", "old");
+ *   xml.write("text");
+ *   xml.closeTag("world");
+ *  results in this output:
+ *   <world name="foo">
+ *     <bar/>
+ *     <baz name="boo" style="old">text</baz>
+ *   </world>
+ */
+class XmlWriter {
+public:
+    XmlWriter(std::ostream& out);
+    ~XmlWriter();
+
+    /** Start a xml tag which contains subtags */
+    void openTag(const char* name);
+    /** Closes an xml tag with subtags */
+    void closeTag(const char* name);
+
+    void writeTag(const char* name);
+
+    template <class T>
+      void comment(const T& outp)
+      {   // This routine writes just about anything as an XML comment.
+	newLine();
+	out << "<!-- " << outp ;
+	closetag = " -->";
+      }
+
+
+    template<class T>
+    void write(const T& text)
+    {
+        if (closetag[0]=='>') {
+            out << ">";
+            closetag = "";
+        } else if (closetag[0]=='/') {
+      	    out << ">"; // eventually we should place a \n here
+	    closetag = "</";
+	    closetag += lasttag;
+	    closetag += ">";
+	}
+	out << text;
+    }
+
+    template<class T>
+    void writeAttribute(const char* name, T value)
+    {
+	out << " " << name << "=\"" << value << "\"";
+    }
+
+private:
+    void newLine();
+    void closeTag();
+
+    std::ostream& out;
+    int indent;
+    std::string closetag;
+    std::string lasttag;
+    std::vector<std::string> sections;
+};
+
+#endif


Property changes on: tags/windstille-0.3.0/tools/miniswig/xmlwriter.hpp
___________________________________________________________________
Name: svn:keywords
   + Id
Name: svn:eol-style
   + native



From grumbel at mail.berlios.de  Fri Feb  6 15:24:44 2009
From: grumbel at mail.berlios.de (grumbel at BerliOS)
Date: Fri, 6 Feb 2009 15:24:44 +0100
Subject: [Windstille-commit] r2413 - trunk
Message-ID: <200902061424.n16EOiiT027138@sheep.berlios.de>

Author: grumbel
Date: 2009-02-06 15:24:43 +0100 (Fri, 06 Feb 2009)
New Revision: 2413

Modified:
   trunk/README
Log:
README update

Modified: trunk/README
===================================================================
--- trunk/README	2009-02-05 20:09:13 UTC (rev 2412)
+++ trunk/README	2009-02-06 14:24:43 UTC (rev 2413)
@@ -23,5 +23,17 @@
 windstille-nds/
  - a little prototype of Windstille for the NintendoDS
 
+physics2d/
+ - a simple 2d box physics engine
+
+blender-thumbnail/
+ - scripts to automatically generate thumbnails out of .blend files
+
+blender-exporter/
+ - export scripts to convert .blend files into stuff usable by Windstille engine
+
+sdl-jstest/
+ - a joystick test application using SDL
+
 ________________________________________________________________________
 $Id$



From grumbel at mail.berlios.de  Fri Feb  6 21:06:46 2009
From: grumbel at mail.berlios.de (grumbel at BerliOS)
Date: Fri, 6 Feb 2009 21:06:46 +0100
Subject: [Windstille-commit] r2414 - trunk/media/images/locations
Message-ID: <200902062006.n16K6k7n031453@sheep.berlios.de>

Author: grumbel
Date: 2009-02-06 20:50:08 +0100 (Fri, 06 Feb 2009)
New Revision: 2414

Added:
   trunk/media/images/locations/cave5.xcf
   trunk/media/images/locations/subway2.xcf
Modified:
   trunk/media/images/locations/airportbar.xcf
   trunk/media/images/locations/haus3.xcf
   trunk/media/images/locations/home.xcf
   trunk/media/images/locations/hospital.xcf
   trunk/media/images/locations/level.xcf
   trunk/media/images/locations/nstarcellar.xcf
   trunk/media/images/locations/nstartmineentrance.xcf
   trunk/media/images/locations/rooms.xcf
Log:
Two new sketches and a bunch of small updates (mostly just black background)

Modified: trunk/media/images/locations/airportbar.xcf
===================================================================
(Binary files differ)

Added: trunk/media/images/locations/cave5.xcf
===================================================================
(Binary files differ)


Property changes on: trunk/media/images/locations/cave5.xcf
___________________________________________________________________
Name: svn:mime-type
   + application/x-xcf

Modified: trunk/media/images/locations/haus3.xcf
===================================================================
(Binary files differ)

Modified: trunk/media/images/locations/home.xcf
===================================================================
(Binary files differ)

Modified: trunk/media/images/locations/hospital.xcf
===================================================================
(Binary files differ)

Modified: trunk/media/images/locations/level.xcf
===================================================================
(Binary files differ)

Modified: trunk/media/images/locations/nstarcellar.xcf
===================================================================
(Binary files differ)

Modified: trunk/media/images/locations/nstartmineentrance.xcf
===================================================================
(Binary files differ)

Modified: trunk/media/images/locations/rooms.xcf
===================================================================
(Binary files differ)

Added: trunk/media/images/locations/subway2.xcf
===================================================================
(Binary files differ)


Property changes on: trunk/media/images/locations/subway2.xcf
___________________________________________________________________
Name: svn:mime-type
   + application/x-xcf



From grumbel at mail.berlios.de  Sat Feb  7 09:05:11 2009
From: grumbel at mail.berlios.de (grumbel at BerliOS)
Date: Sat, 7 Feb 2009 09:05:11 +0100
Subject: [Windstille-commit] r2415 - trunk/txt2png
Message-ID: <200902070805.n1785BmB003708@sheep.berlios.de>

Author: grumbel
Date: 2009-02-07 09:05:10 +0100 (Sat, 07 Feb 2009)
New Revision: 2415

Added:
   trunk/txt2png/Makefile
Modified:
   trunk/txt2png/
Log:
Minor cleanup


Property changes on: trunk/txt2png
___________________________________________________________________
Name: svn:ignore
   + .sconsign.dblite
txt2png


Added: trunk/txt2png/Makefile
===================================================================
--- trunk/txt2png/Makefile	2009-02-06 19:50:08 UTC (rev 2414)
+++ trunk/txt2png/Makefile	2009-02-07 08:05:10 UTC (rev 2415)
@@ -0,0 +1,2 @@
+all:
+	scons -D



From grumbel at mail.berlios.de  Sat Feb  7 09:10:05 2009
From: grumbel at mail.berlios.de (grumbel at BerliOS)
Date: Sat, 7 Feb 2009 09:10:05 +0100
Subject: [Windstille-commit] r2416 - trunk/html2image
Message-ID: <200902070810.n178A5eF004159@sheep.berlios.de>

Author: grumbel
Date: 2009-02-07 09:10:04 +0100 (Sat, 07 Feb 2009)
New Revision: 2416

Modified:
   trunk/html2image/
Log:
Cleanup


Property changes on: trunk/html2image
___________________________________________________________________
Name: svn:ignore
   + htmlcreator
old
.sconsign.dblite




From grumbel at mail.berlios.de  Sat Feb  7 21:32:14 2009
From: grumbel at mail.berlios.de (grumbel at BerliOS)
Date: Sat, 7 Feb 2009 21:32:14 +0100
Subject: [Windstille-commit] r2417 - trunk/media/images/locations
Message-ID: <200902072032.n17KWEJ0017252@sheep.berlios.de>

Author: grumbel
Date: 2009-02-07 21:25:37 +0100 (Sat, 07 Feb 2009)
New Revision: 2417

Modified:
   trunk/media/images/locations/airportshop.xcf
   trunk/media/images/locations/generator.xcf
Log:
Some graphics updates

Modified: trunk/media/images/locations/airportshop.xcf
===================================================================
(Binary files differ)

Modified: trunk/media/images/locations/generator.xcf
===================================================================
(Binary files differ)



From grumbel at mail.berlios.de  Sun Feb  8 16:14:19 2009
From: grumbel at mail.berlios.de (grumbel at BerliOS)
Date: Sun, 8 Feb 2009 16:14:19 +0100
Subject: [Windstille-commit] r2418 - trunk/media/images/locations
Message-ID: <200902081514.n18FEJfP010343@sheep.berlios.de>

Author: grumbel
Date: 2009-02-08 16:09:15 +0100 (Sun, 08 Feb 2009)
New Revision: 2418

Added:
   trunk/media/images/locations/cave6.xcf
   trunk/media/images/locations/cellar.xcf
Log:
Two more sketches

Added: trunk/media/images/locations/cave6.xcf
===================================================================
(Binary files differ)


Property changes on: trunk/media/images/locations/cave6.xcf
___________________________________________________________________
Name: svn:mime-type
   + application/x-xcf

Added: trunk/media/images/locations/cellar.xcf
===================================================================
(Binary files differ)


Property changes on: trunk/media/images/locations/cellar.xcf
___________________________________________________________________
Name: svn:mime-type
   + application/x-xcf



From grumbel at mail.berlios.de  Sun Feb  8 22:16:34 2009
From: grumbel at mail.berlios.de (grumbel at BerliOS)
Date: Sun, 8 Feb 2009 22:16:34 +0100
Subject: [Windstille-commit] r2419 - trunk/media/images/locations
Message-ID: <200902082116.n18LGY41009038@sheep.berlios.de>

Author: grumbel
Date: 2009-02-08 22:11:00 +0100 (Sun, 08 Feb 2009)
New Revision: 2419

Added:
   trunk/media/images/locations/desert.xcf
   trunk/media/images/locations/desert2.xcf
Log:
Two more sketches

Added: trunk/media/images/locations/desert.xcf
===================================================================
(Binary files differ)


Property changes on: trunk/media/images/locations/desert.xcf
___________________________________________________________________
Name: svn:mime-type
   + application/x-xcf

Added: trunk/media/images/locations/desert2.xcf
===================================================================
(Binary files differ)


Property changes on: trunk/media/images/locations/desert2.xcf
___________________________________________________________________
Name: svn:mime-type
   + application/x-xcf



From grumbel at mail.berlios.de  Mon Feb  9 15:14:39 2009
From: grumbel at mail.berlios.de (grumbel at BerliOS)
Date: Mon, 9 Feb 2009 15:14:39 +0100
Subject: [Windstille-commit] r2420 - trunk/media/wiki
Message-ID: <200902091414.n19EEd4j018163@sheep.berlios.de>

Author: grumbel
Date: 2009-02-09 15:14:38 +0100 (Mon, 09 Feb 2009)
New Revision: 2420

Added:
   trunk/media/wiki/Backstory.wiki
   trunk/media/wiki/Prototypes.wiki
Modified:
   trunk/media/wiki/Main Page.wiki
   trunk/media/wiki/PDA.wiki
   trunk/media/wiki/Prefab.wiki
   trunk/media/wiki/Rebirth.wiki
Log:
Random updates

Added: trunk/media/wiki/Backstory.wiki
===================================================================
--- trunk/media/wiki/Backstory.wiki	2009-02-08 21:11:00 UTC (rev 2419)
+++ trunk/media/wiki/Backstory.wiki	2009-02-09 14:14:38 UTC (rev 2420)
@@ -0,0 +1,93 @@
+== 2025 - Landing on the Moon, again
+
+In preparation for the mission to Mars mankind planed a research mission to moon with the goal to setup a small colony 
+
+== 2032 - Landing on Mars
+
+Fifthy years late, but mankind had finally made it to Mars. The two year trip brought many new insights into long time travel and also ignited the interest in space colonisation again.
+
+== 2040 - Moon Colony
+
+The Moon colony, once started as a testbed for the Mars mission, was now nearing its 15 anniversary. It no longer was limited to the two base modules with which it ones started, it now had grown into a small village and got frequent visits not only from the national space agencies but also from private enterprises. Space tourism has moved to whole new levels with the Moon Colony
+
+== 2050 - Space Telescope
+
+With the help of the Moon Colony a new space telescope was assembled, one good enough to discover planets and collect information about them.
+
+== 2060 - Project Longshot
+
+Project Longshot once started as an idea in the late 1970's now became reality. The telescopes had discovered a planet system around Alpha Centauri B and it was now Longshot job to profide some close up views, but as always with space travel, this wasn't going to be a short journey.
+
+== 2110 - Arrival
+
+Longshot entered the planet system of Alpha Centauri B, it was the first time a man-made object had done so.  As programmed Longshot launched a couple of small daughter satellites to do the closer inspection, while Longshot itself, to heavy to slow down, would continue through the system and into the void of space.
+
+On their journey through the system the satelites produced some very detailed images of the planets and also discovered dozens of moons formerly unknown moons and smaller planets.
+
+One planet, called Central, seemed perfect for collonisation, it had already a very earthlike athmosphere and plenty of water, in fact it consists to nine tenth out of water, which meant it had only little land to offer, but that should be more then enough to get a colonie started. Later collonisation could then happen via city-ships and similar land-creating endevours. The land that was there should be enough for a few decades to come.
+
+The other was Hoti, it had an athmosphere, not breathable, but not toxic either, a simple oxygen masks should be enough to protect the population outside and inside the city there could be a decent athmosphere. 
+
+The last canditat was named Nugani, it was a moon close to the gas giant Ensani. 
+
+== 2220 - Collonisation
+
+The Longshot drones had collected information about the new system for many decades and it became clear that the system provided habitatable planets. Plans for collonisation where put into place. 
+
+Along with those ships carriing the people, automatic ships where send that should handle the terraforming.
+
+== 2263 - Collonisation - Phase 1
+
+The trip to Alpha Centauri took fourthy years. A handful of landing capsules where lost on entry, but that is probably to be expected on such a riski trip. 
+
+As planed the terraforming started. While the atmosphere wasn't toxic by itself, it lacked enough oxigen to sustain human settlements, so the first few decades where spend in environment suits or with oxigen masks. 
+
+== 2312 - Terraforming
+
+The robotic probes arrive and terraforming begins.
+
+== 2380 - Collonisation - Phase 2
+
+With the terraforming making progress it become clear that it wouldn't take much longer till the atmosphere of Zeta-12 become breathable. So the humans got ready to move to Alpha Centauri B.
+
+A dozens ships where build, each with the ability to carry 16 entry capsules, each carring around 40 people. 640 people per ship 25 ships in total.
+
+== 2382 - Collonisation - Corruption
+
+Unknown by the earth government, the company Red Star, had build a handful of collonisation ships themselves. While NStars ships flow in a large group, so that they could give each other support on the long journey, the ships of Red Star where build for speed. They where build to overtake the NStar fleed and arrive at Alpha Centauri B first. The idea was simple, new land was freely available and whoever got there first was the one who could land claim to it. And Red Star was prepared to do exactly that. Not only where their ships faster, they also carried plenty of guns to protect their land. NStars fleed wasn't equiped or prepared for a war, they where launched with the expection to be the first.
+
+== 2423 - Athmosphere on Zeta-12 becomes breathable
+
+150 years after the terraforming had begone, Zeta-12 become ready for human habitants. The oxigen levels still were not up to earth standards, so cities had some additional oxigen supply going, but one no longer suffocated in the plain athmosphere. 
+
+The human settle ships arrive.
+
+== 2424 - Arrivial, Evil Supprise
+
+One collonisation ship gets shoot out of the sky by RedStar.
+
+== 2425 - Touchdown - Colonization on Zeta-12 begins
+
+In preparation to touchdown all humans in hibernation have been woken up, after all things could go wrong when entering the athmosphere and it might be important that they can evocuate the capsules fast enough. 
+
+== 2434 - multiple cities have been build on Zeta-12 
+
+
+
+== 2497 - Jane enters the world
+
+
+
+== 2517 - The main game begins
+
+
+== 
+
+
+= Planets
+
+Zeta-12: A moon around a large gas giant, a cold place, but parts are keep warm through tectonic activity.
+
+Central: A central very earth like planet, lots of water, very little land.
+
+Hoti: A desert like planet close to the sun, very warm, only the poles are habitatable.

Modified: trunk/media/wiki/Main Page.wiki
===================================================================
--- trunk/media/wiki/Main Page.wiki	2009-02-08 21:11:00 UTC (rev 2419)
+++ trunk/media/wiki/Main Page.wiki	2009-02-09 14:14:38 UTC (rev 2420)
@@ -33,10 +33,10 @@
 * [[Tilemap]]
 * [[Dialog]]
 * [[Prefab]]
-* [[Coding style]]
 
 == Story
 
+* [[Backstory]]
 * [[Plot]]
 * [[Plot Events]]
 * [[Characters]]

Modified: trunk/media/wiki/PDA.wiki
===================================================================
--- trunk/media/wiki/PDA.wiki	2009-02-08 21:11:00 UTC (rev 2419)
+++ trunk/media/wiki/PDA.wiki	2009-02-09 14:14:38 UTC (rev 2420)
@@ -4,4 +4,6 @@
 * record mission/quest logs
 * detailed auto-map
 
-When not in use the PDA should be in small form at the edge of the screen to provide a little automap, when activated it should pop-up and fill half the screen, while the player is visible on the other side, the game should continue to run when the PDA is activated.
\ No newline at end of file
+When not in use the PDA should be in small form at the edge of the screen to provide a little automap, when activated it should pop-up and fill half the screen, while the player is visible on the other side, the game should continue to run when the PDA is activated. 
+
+The PDA shall also act as communicator to call remote characters, the ship, the base or services. 

Modified: trunk/media/wiki/Prefab.wiki
===================================================================
--- trunk/media/wiki/Prefab.wiki	2009-02-08 21:11:00 UTC (rev 2419)
+++ trunk/media/wiki/Prefab.wiki	2009-02-09 14:14:38 UTC (rev 2420)
@@ -11,6 +11,7 @@
  (parameter (pos "vector") (image "sprite") ... ({Name} {Type}))
  (function "prefab_streetlamp"))
 }}}
+
 Name gives the name of the prefab, while sprite gives the sprite which should represent it in the editor. Parameter is a list of possible parameters that the prefab can have and which should be editable in the editor. Function is the scripting function which is called with the given parameter to create the prefab.
 
 {{{
@@ -20,4 +21,4 @@
  spawn_object("scriptable-objects", trashcan_params)
  spawn_object("flies", flies_params)
 }
-}}}
\ No newline at end of file
+}}}

Added: trunk/media/wiki/Prototypes.wiki
===================================================================
--- trunk/media/wiki/Prototypes.wiki	2009-02-08 21:11:00 UTC (rev 2419)
+++ trunk/media/wiki/Prototypes.wiki	2009-02-09 14:14:38 UTC (rev 2420)
@@ -0,0 +1,12 @@
+== Navigation Mesh ==
+
+The Navigation Mesh Prototype should demonstrate the concept of the
+navigation mesh level layout and demonstrate actions like jumping,
+ledge grabbing, etc. performated on the mesh.
+
+== Shooting ==
+
+The shooting test shall demonstrate the shooting, the aiming with
+laser pointer, as well as flamethrower action.
+
+

Modified: trunk/media/wiki/Rebirth.wiki
===================================================================
--- trunk/media/wiki/Rebirth.wiki	2009-02-08 21:11:00 UTC (rev 2419)
+++ trunk/media/wiki/Rebirth.wiki	2009-02-09 14:14:38 UTC (rev 2420)
@@ -8,6 +8,6 @@
 
 Some code for this is in place and availabe in a test application, it is not hooked up into the game.
 
-== Sectors
+== 
 
-
+Gam e



From grumbel at mail.berlios.de  Mon Feb  9 21:25:03 2009
From: grumbel at mail.berlios.de (grumbel at BerliOS)
Date: Mon, 9 Feb 2009 21:25:03 +0100
Subject: [Windstille-commit] r2421 - trunk/media/images/locations
Message-ID: <200902092025.n19KP3m7017694@sheep.berlios.de>

Author: grumbel
Date: 2009-02-09 21:21:58 +0100 (Mon, 09 Feb 2009)
New Revision: 2421

Added:
   trunk/media/images/locations/desert3.xcf
Log:
Another sketch

Added: trunk/media/images/locations/desert3.xcf
===================================================================
(Binary files differ)


Property changes on: trunk/media/images/locations/desert3.xcf
___________________________________________________________________
Name: svn:mime-type
   + application/x-xcf



From grumbel at mail.berlios.de  Tue Feb 10 13:39:59 2009
From: grumbel at mail.berlios.de (grumbel at BerliOS)
Date: Tue, 10 Feb 2009 13:39:59 +0100
Subject: [Windstille-commit] r2422 - in trunk/windstille: data lib lib/glew
	src/collision src/display src/font src/gui src/input src/lisp
	src/math src/objects src/particles src/physfs src/scripting
	src/signals src/sound src/sprite2d src/sprite3d src/tinygettext
Message-ID: <200902101239.n1ACdxuD026144@sheep.berlios.de>

Author: grumbel
Date: 2009-02-10 13:39:57 +0100 (Tue, 10 Feb 2009)
New Revision: 2422

Removed:
   trunk/windstille/data/Jamfile
   trunk/windstille/lib/Jamfile
   trunk/windstille/lib/glew/Jamfile
   trunk/windstille/src/collision/Jamfile
   trunk/windstille/src/display/Jamfile
   trunk/windstille/src/font/Jamfile
   trunk/windstille/src/gui/Jamfile
   trunk/windstille/src/input/Jamfile
   trunk/windstille/src/lisp/Jamfile
   trunk/windstille/src/math/Jamfile
   trunk/windstille/src/objects/Jamfile
   trunk/windstille/src/particles/Jamfile
   trunk/windstille/src/physfs/Jamfile
   trunk/windstille/src/scripting/Jamfile
   trunk/windstille/src/signals/Jamfile
   trunk/windstille/src/sound/Jamfile
   trunk/windstille/src/sprite2d/Jamfile
   trunk/windstille/src/sprite3d/Jamfile
   trunk/windstille/src/tinygettext/Jamfile
Log:
Getting rid of Jamfiles

Deleted: trunk/windstille/data/Jamfile
===================================================================
--- trunk/windstille/data/Jamfile	2009-02-09 20:21:58 UTC (rev 2421)
+++ trunk/windstille/data/Jamfile	2009-02-10 12:39:57 UTC (rev 2422)
@@ -1,20 +0,0 @@
-SubDir TOP data ;
-
-IMAGEPATHS =
-    images
-    images/bonus
-    images/diamond
-    images/hero_dead
-    images/hero_run
-    images/objects
-    images/particles
-    images/tiles
-;
-
-for p in $(IMAGEPATHS) {
-    InstallData [ Wildcard $(p) : *.png *.jpg ] : $(p) ;
-}
-
-InstallData [ Wildcard levels : *.scm ] : levels ;
-InstallData [ Wildcard music : *.ogg ] : music ;
-InstallData [ Wildcard controller : *.scm ] : controller ;

Deleted: trunk/windstille/lib/Jamfile
===================================================================
--- trunk/windstille/lib/Jamfile	2009-02-09 20:21:58 UTC (rev 2421)
+++ trunk/windstille/lib/Jamfile	2009-02-10 12:39:57 UTC (rev 2422)
@@ -1,14 +0,0 @@
-SubDir TOP lib ;
-
-SubInclude TOP lib glew ;
-
-Library squirrel
-    : [ Wildcard SQUIRREL2/squirrel : *.cpp *.h ]
-      [ Wildcard SQUIRREL2/sqstdlib : *.cpp *.h ]
-    : noinstall
-;
-CXXFLAGS on $(squirrel_OBJECTS) 
-        = [ Filter [ on $(squirrel_OBJECTS) GetVar CXXFLAGS ] : -Wall -W -Werror ] ;
-CFLAGS on $(squirrel_OBJECTS) 
-        = [ Filter [ on $(squirrel_OBJECTS) GetVar CFLAGS ] : -Wall -W -Werror ] ;
-IncludeDir squirrel : SQUIRREL2/include ;

Deleted: trunk/windstille/lib/glew/Jamfile
===================================================================
--- trunk/windstille/lib/glew/Jamfile	2009-02-09 20:21:58 UTC (rev 2421)
+++ trunk/windstille/lib/glew/Jamfile	2009-02-10 12:39:57 UTC (rev 2422)
@@ -1,8 +0,0 @@
-SubDir TOP lib glew ;
-
-Library glew : [ Wildcard *.c *.h ] ;
-# CFlags glew : -Wno-all ;
-IncludeDir glew : . ;
-LinkWith glew : $(GL) ;
-Help glew : "Build the glew support library" ;
-

Deleted: trunk/windstille/src/collision/Jamfile
===================================================================
--- trunk/windstille/src/collision/Jamfile	2009-02-09 20:21:58 UTC (rev 2421)
+++ trunk/windstille/src/collision/Jamfile	2009-02-10 12:39:57 UTC (rev 2422)
@@ -1,21 +0,0 @@
-SubDir TOP src collision ;
-
-sources =
-  collision_data.cpp
-  collision_data.hpp
-  collision_engine.cpp
-  collision_engine.hpp
-  collision_object.cpp
-  collision_object.hpp
-  collision_test.cpp
-  collision_test.hpp
-  contact.hpp
-  stair_contact.hpp
-  stair_contact.cpp
-  ladder_contact.hpp
-  ladder_contact.cpp
-;
-
-TRANSLATABLE_SOURCES += [ SearchSource $(sources) ] ;
-collision_objects = [ CompileObjects $(sources) ] ;
-

Deleted: trunk/windstille/src/display/Jamfile
===================================================================
--- trunk/windstille/src/display/Jamfile	2009-02-09 20:21:58 UTC (rev 2421)
+++ trunk/windstille/src/display/Jamfile	2009-02-10 12:39:57 UTC (rev 2422)
@@ -1,6 +0,0 @@
-SubDir TOP src display ;
-
-sources = [ Wildcard *.cpp *.hpp ] ;
-
-TRANSLATABLE_SOURCES = [ SearchSource $(sources) ] ;
-display_objects = [ CompileObjects $(sources) ] ;

Deleted: trunk/windstille/src/font/Jamfile
===================================================================
--- trunk/windstille/src/font/Jamfile	2009-02-09 20:21:58 UTC (rev 2421)
+++ trunk/windstille/src/font/Jamfile	2009-02-10 12:39:57 UTC (rev 2422)
@@ -1,6 +0,0 @@
-SubDir TOP src font ;
-
-sources = [ Wildcard *.cpp *.hpp ] ;
-
-TRANSLATABLE_SOURCES = [ SearchSource $(sources) ] ;
-font_objects = [ CompileObjects $(sources) ] ;

Deleted: trunk/windstille/src/gui/Jamfile
===================================================================
--- trunk/windstille/src/gui/Jamfile	2009-02-09 20:21:58 UTC (rev 2421)
+++ trunk/windstille/src/gui/Jamfile	2009-02-10 12:39:57 UTC (rev 2422)
@@ -1,6 +0,0 @@
-SubDir TOP src gui ;
-
-sources = [ Wildcard *.cpp *.hpp ] ;
-
-TRANSLATABLE_SOURCES = [ SearchSource $(sources) ] ;
-gui_objects = [ CompileObjects $(sources) ] ;

Deleted: trunk/windstille/src/input/Jamfile
===================================================================
--- trunk/windstille/src/input/Jamfile	2009-02-09 20:21:58 UTC (rev 2421)
+++ trunk/windstille/src/input/Jamfile	2009-02-10 12:39:57 UTC (rev 2422)
@@ -1,7 +0,0 @@
-SubDir TOP src input ;
-
-sources = [ Wildcard *.cpp *.hpp ] ;
-
-TRANSLATABLE_SOURCES += [ SearchSource $(sources) ] ;
-input_objects = [ CompileObjects $(sources) ] ;
-

Deleted: trunk/windstille/src/lisp/Jamfile
===================================================================
--- trunk/windstille/src/lisp/Jamfile	2009-02-09 20:21:58 UTC (rev 2421)
+++ trunk/windstille/src/lisp/Jamfile	2009-02-10 12:39:57 UTC (rev 2422)
@@ -1,7 +0,0 @@
-SubDir TOP src lisp ;
-
-sources = [ Wildcard *.cpp *.hpp ] ;
-
-TRANSLATABLE_SOURCES += [ SearchSource $(sources) ] ;
-lisp_objects = [ CompileObjects $(sources) ] ;
-

Deleted: trunk/windstille/src/math/Jamfile
===================================================================
--- trunk/windstille/src/math/Jamfile	2009-02-09 20:21:58 UTC (rev 2421)
+++ trunk/windstille/src/math/Jamfile	2009-02-10 12:39:57 UTC (rev 2422)
@@ -1,6 +0,0 @@
-SubDir TOP src math ;
-
-sources = [ Wildcard *.cpp *.hpp ] ;
-
-TRANSLATABLE_SOURCES = [ SearchSource $(sources) ] ;
-math_objects = [ CompileObjects $(sources) ] ;

Deleted: trunk/windstille/src/objects/Jamfile
===================================================================
--- trunk/windstille/src/objects/Jamfile	2009-02-09 20:21:58 UTC (rev 2421)
+++ trunk/windstille/src/objects/Jamfile	2009-02-10 12:39:57 UTC (rev 2422)
@@ -1,7 +0,0 @@
-SubDir TOP src objects ;
-
-sources = [ Wildcard *.cpp *.hpp ] ;
-
-TRANSLATABLE_SOURCES += [ SearchSource $(sources) ] ;
-objects_objects = [ CompileObjects $(sources) ] ;
-

Deleted: trunk/windstille/src/particles/Jamfile
===================================================================
--- trunk/windstille/src/particles/Jamfile	2009-02-09 20:21:58 UTC (rev 2421)
+++ trunk/windstille/src/particles/Jamfile	2009-02-10 12:39:57 UTC (rev 2422)
@@ -1,6 +0,0 @@
-SubDir TOP src particles ;
-
-sources = [ Wildcard *.cpp *.hpp ] ;
-
-TRANSLATABLE_SOURCES = [ SearchSource $(sources) ] ;
-particles_objects = [ CompileObjects $(sources) ] ;

Deleted: trunk/windstille/src/physfs/Jamfile
===================================================================
--- trunk/windstille/src/physfs/Jamfile	2009-02-09 20:21:58 UTC (rev 2421)
+++ trunk/windstille/src/physfs/Jamfile	2009-02-10 12:39:57 UTC (rev 2422)
@@ -1,7 +0,0 @@
-SubDir TOP src physfs ;
-
-sources = [ Wildcard *.cpp *.hpp ] ;
-
-TRANSLATABLE_SOURCES += [ SearchSource $(sources) ] ;
-physfs_objects = [ CompileObjects $(sources) ] ;
-

Deleted: trunk/windstille/src/scripting/Jamfile
===================================================================
--- trunk/windstille/src/scripting/Jamfile	2009-02-09 20:21:58 UTC (rev 2421)
+++ trunk/windstille/src/scripting/Jamfile	2009-02-10 12:39:57 UTC (rev 2422)
@@ -1,56 +0,0 @@
-SubDir TOP src scripting ;
-
-if $(LEX) && $(BISON) {
-    MINISWIG_AVAILABLE = 1 ;
-} else {
-    MINISWIG_AVAILABLE = ;
-}
-
-if $(MINISWIG_AVAILABLE)
-{
-    ##  MiniSwigRule outputcppfile : inputfile : modulename : flags
-    rule MiniSwigRule
-    {
-        local sources = [ SearchSource $(>) ] ;
-        local cppfile = [ LocateTarget $(<) : $(SUBDIR) ] ;
-        local headerfile = [ LocateTarget $(<:S=.hpp) : $(SUBDIR) ] ;	
-        SEARCH on $(headerfile) = $(SOURCH_SOURCE) ;
-
-        Depends $(cppfile) : $(headerfile) ;
-        MiniSwig $(cppfile) : $(sources) ;
-        CPPFLAGS on $(cppfile) = $(CPPFLAGS) -DSCRIPTING_API ;
-        headerfile on $(cppfile) = $(headerfile) ;
-        modulename on $(cppfile) = $(3) ;
-        FLAGS on $(cppfile) = $(4) ;
-
-        local object = [ CompileObject $(cppfile) ] ;
-
-        return $(object) ;
-    }
-
-    rule MiniSwig
-    {
-        Depends $(<) : $(>) $(MINISWIG) ;
-    }
-
-    actions MiniSwig bind headerfile
-    {
-        $(CPP) -x c -CC $(CPPFLAGS) $(>) -o $(LOCATE_OBJECTS)/miniswig.tmp
-        $(top_builddir)/miniswig --output-cpp $(<) --input $(LOCATE_OBJECTS)/miniswig.tmp --output-hpp $(headerfile) --module $(modulename) $(FLAGS)
-#       rm -f $(LOCATE_OBJECTS)/miniswig.tmp
-    }
-}
-
-scripting_sources = [ Filter [ Wildcard *.cpp *.hpp ] : wrapper.cpp wrapper.hpp ] ;
-if ! $(MINISWIG_AVAILABLE)
-{
-    scripting_sources += [ SearchSource wrapper.cpp ] ;
-}
-scripting_objects = [ CompileObjects $(scripting_sources) ] ;
-if $(MINISWIG_AVAILABLE)
-{
-    scripting_objects += 
-        [ MiniSwigRule wrapper.cpp : wrapper.interface.hpp : windstille : --select-namespace Scripting ] ;
-}
-
-TRANSLATABLE_SOURCES += [ SearchSource $(scripting_sources) ] ;

Deleted: trunk/windstille/src/signals/Jamfile
===================================================================
--- trunk/windstille/src/signals/Jamfile	2009-02-09 20:21:58 UTC (rev 2421)
+++ trunk/windstille/src/signals/Jamfile	2009-02-10 12:39:57 UTC (rev 2422)
@@ -1,6 +0,0 @@
-SubDir TOP src signals ;
-
-sources = [ Wildcard *.cpp *.hpp ] ;
-
-TRANSLATABLE_SOURCES = [ SearchSource $(sources) ] ;
-signals_objects = [ CompileObjects $(sources) ] ;

Deleted: trunk/windstille/src/sound/Jamfile
===================================================================
--- trunk/windstille/src/sound/Jamfile	2009-02-09 20:21:58 UTC (rev 2421)
+++ trunk/windstille/src/sound/Jamfile	2009-02-10 12:39:57 UTC (rev 2422)
@@ -1,7 +0,0 @@
-SubDir TOP src sound ;
-
-sources = [ Wildcard *.cpp *.hpp ] ;
-
-TRANSLATABLE_SOURCES += [ SearchSource $(sources) ] ;
-sound_objects = [ CompileObjects $(sources) ] ;
-

Deleted: trunk/windstille/src/sprite2d/Jamfile
===================================================================
--- trunk/windstille/src/sprite2d/Jamfile	2009-02-09 20:21:58 UTC (rev 2421)
+++ trunk/windstille/src/sprite2d/Jamfile	2009-02-10 12:39:57 UTC (rev 2422)
@@ -1,7 +0,0 @@
-SubDir TOP src sprite2d ;
-
-sources = [ Wildcard *.cpp *.hpp ] ;
-
-TRANSLATABLE_SOURCES += [ SearchSource $(sources) ] ;
-sprite2d_objects = [ CompileObjects $(sources) ] ;
-

Deleted: trunk/windstille/src/sprite3d/Jamfile
===================================================================
--- trunk/windstille/src/sprite3d/Jamfile	2009-02-09 20:21:58 UTC (rev 2421)
+++ trunk/windstille/src/sprite3d/Jamfile	2009-02-10 12:39:57 UTC (rev 2422)
@@ -1,7 +0,0 @@
-SubDir TOP src sprite3d ;
-
-sources = [ Wildcard *.cpp *.hpp ] ;
-
-TRANSLATABLE_SOURCES += [ SearchSource $(sources) ] ;
-sprite3d_objects = [ CompileObjects $(sources) ] ;
-

Deleted: trunk/windstille/src/tinygettext/Jamfile
===================================================================
--- trunk/windstille/src/tinygettext/Jamfile	2009-02-09 20:21:58 UTC (rev 2421)
+++ trunk/windstille/src/tinygettext/Jamfile	2009-02-10 12:39:57 UTC (rev 2422)
@@ -1,7 +0,0 @@
-SubDir TOP src tinygettext ;
-
-sources = [ Wildcard *.cpp *.hpp ] ;
-
-TRANSLATABLE_SOURCES += [ SearchSource $(sources) ] ;
-tinygettext_objects = [ CompileObjects $(sources) ] ;
-



From grumbel at mail.berlios.de  Tue Feb 10 13:40:32 2009
From: grumbel at mail.berlios.de (grumbel at BerliOS)
Date: Tue, 10 Feb 2009 13:40:32 +0100
Subject: [Windstille-commit] r2423 - trunk/windstille/src
Message-ID: <200902101240.n1ACeWdu026232@sheep.berlios.de>

Author: grumbel
Date: 2009-02-10 13:40:32 +0100 (Tue, 10 Feb 2009)
New Revision: 2423

Modified:
   trunk/windstille/src/response_curve.cpp
Log:
Added proper argc check

Modified: trunk/windstille/src/response_curve.cpp
===================================================================
--- trunk/windstille/src/response_curve.cpp	2009-02-10 12:39:57 UTC (rev 2422)
+++ trunk/windstille/src/response_curve.cpp	2009-02-10 12:40:32 UTC (rev 2423)
@@ -68,15 +68,21 @@
 
 int main(int argc, char** argv)
 {
-  float samples[] = { 0.0f, 0.25f, 0.75f, 1.0f };
-  std::vector<float> samples_vec(samples, samples+4);
+  if (argc != 2)
+    {
+      std::cout << "Usage: " << argv[0] << " FLOAT" << std::endl;
+    }
+  else
+    {
+      float samples[] = { 0.0f, 0.25f, 0.75f, 1.0f };
+      std::vector<float> samples_vec(samples, samples+4);
 
-  std::cout << "Samples: " << samples_vec.size() << std::endl;
+      std::cout << "Samples: " << samples_vec.size() << std::endl;
 
-  ResponseCurve curve(0.0f, 1.0f, samples_vec);
+      ResponseCurve curve(0.0f, 1.0f, samples_vec);
 
-  std::cout << curve.get(atof(argv[1])) << std::endl;
-
+      std::cout << curve.get(atof(argv[1])) << std::endl;
+    }
   return 0;
 }
 #endif



From grumbel at mail.berlios.de  Tue Feb 10 13:40:48 2009
From: grumbel at mail.berlios.de (grumbel at BerliOS)
Date: Tue, 10 Feb 2009 13:40:48 +0100
Subject: [Windstille-commit] r2424 - trunk/windstille
Message-ID: <200902101240.n1ACemdu026323@sheep.berlios.de>

Author: grumbel
Date: 2009-02-10 13:40:48 +0100 (Tue, 10 Feb 2009)
New Revision: 2424

Modified:
   trunk/windstille/SConstruct
Log:
Removed sdl-jstest

Modified: trunk/windstille/SConstruct
===================================================================
--- trunk/windstille/SConstruct	2009-02-10 12:40:32 UTC (rev 2423)
+++ trunk/windstille/SConstruct	2009-02-10 12:40:48 UTC (rev 2424)
@@ -215,7 +215,6 @@
 # SConscript('build/src/scripting/SConscript')
 
 SConscript('tools/SConscript')
-SConscript('tools/sdl-jstest/SConscript')
 SConscript('lib/SConscript')
 SConscript('src/SConscript')
 



From grumbel at mail.berlios.de  Tue Feb 10 13:49:46 2009
From: grumbel at mail.berlios.de (grumbel at BerliOS)
Date: Tue, 10 Feb 2009 13:49:46 +0100
Subject: [Windstille-commit] r2425 - trunk/windstille/data
Message-ID: <200902101249.n1ACnkqj027350@sheep.berlios.de>

Author: grumbel
Date: 2009-02-10 13:49:46 +0100 (Tue, 10 Feb 2009)
New Revision: 2425

Removed:
   trunk/windstille/data/coroutine.rb
   trunk/windstille/data/game.rb
Log:
Old ruby code removed

Deleted: trunk/windstille/data/coroutine.rb
===================================================================
--- trunk/windstille/data/coroutine.rb	2009-02-10 12:40:48 UTC (rev 2424)
+++ trunk/windstille/data/coroutine.rb	2009-02-10 12:49:46 UTC (rev 2425)
@@ -1,64 +0,0 @@
-class Coroutine
-  def initialize()
-    @continuation = nil
-    @status = :waiting
-  end
-
-  def status()
-    return @status
-  end
-
-  def update()
-    if @status != :finished then
-      @status = :running
-
-      callcc {|@break|
-        if @continuation then
-          @continuation.call
-        else
-          self.run()
-        end
-        @status = :finished
-      }
-      
-      if @status == :running then
-        @status = :waiting
-      end
-    end
-  end
-  
-  def restart()
-    @status = :waiting
-  end
-
-  def wait()
-    callcc {|@continuation| 
-      @status = :waiting
-      @break.call
-    }
-  end
-
-  def waitTime(time)
-    coroutine_wait(time)
-    wait()
-  end
-
-  def waitFor(entity)
-    #puts "waitFor: #{entity}"
-    coroutine_waitFor(entity)
-    wait()
-    wait()
-    wait()
-    wait()
-#    callcc {|@continuation| 
-#      @status = :waiting
-#      @break.call
-#    }
-  end
-
-  def waitFrame()
-    wait()
-  end
-end
-
-# EOF #

Deleted: trunk/windstille/data/game.rb
===================================================================
--- trunk/windstille/data/game.rb	2009-02-10 12:40:48 UTC (rev 2424)
+++ trunk/windstille/data/game.rb	2009-02-10 12:49:46 UTC (rev 2425)
@@ -1,3 +0,0 @@
-puts "XXX: game.rb is loading"
-
-# EOF #



From grumbel at mail.berlios.de  Tue Feb 10 14:08:30 2009
From: grumbel at mail.berlios.de (grumbel at BerliOS)
Date: Tue, 10 Feb 2009 14:08:30 +0100
Subject: [Windstille-commit] r2426 - in trunk: media/wiki windstille/doc
Message-ID: <200902101308.n1AD8Ufo029112@sheep.berlios.de>

Author: grumbel
Date: 2009-02-10 14:08:30 +0100 (Tue, 10 Feb 2009)
New Revision: 2426

Added:
   trunk/media/wiki/actions.dia
   trunk/media/wiki/models.txt
   trunk/media/wiki/wsprite_fileformat.txt
Removed:
   trunk/windstille/doc/actions.dia
   trunk/windstille/doc/models.txt
   trunk/windstille/doc/wsprite_fileformat.txt
Log:
Moved documentation into wiki directory

Copied: trunk/media/wiki/actions.dia (from rev 2425, trunk/windstille/doc/actions.dia)


Property changes on: trunk/media/wiki/actions.dia
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream
Name: svn:mergeinfo
   + 

Copied: trunk/media/wiki/models.txt (from rev 2425, trunk/windstille/doc/models.txt)


Property changes on: trunk/media/wiki/models.txt
___________________________________________________________________
Name: svn:mergeinfo
   + 

Copied: trunk/media/wiki/wsprite_fileformat.txt (from rev 2425, trunk/windstille/doc/wsprite_fileformat.txt)


Property changes on: trunk/media/wiki/wsprite_fileformat.txt
___________________________________________________________________
Name: svn:mergeinfo
   + 

Deleted: trunk/windstille/doc/actions.dia
===================================================================
(Binary files differ)

Deleted: trunk/windstille/doc/models.txt
===================================================================
--- trunk/windstille/doc/models.txt	2009-02-10 12:49:46 UTC (rev 2425)
+++ trunk/windstille/doc/models.txt	2009-02-10 13:08:30 UTC (rev 2426)
@@ -1,60 +0,0 @@
-Notes about blender models:
-
-- You can install the exporter by placing it in your $HOME/.blender/scripts
-  directory. Best would be to create a symlink:
-  
-     ln -s contrib/windstille_exporter.py $HOME/.blender/scripts
-     
-- 1 blender unit corresponds to 32pixels in game
-  (if you use the default 800x600 game resolution)
-- When looking at a character turned left from the side, coordinate axes are:
-    z -> up
-    y -> right
-    x -> front
-  (the exporter will convert these to windstille coordinates which are
-   x->right, y -> down, z -> back)
-- Each blender object should use the same texture on all it's faces.
-   (you can have multiple objects per model of course)
-- You should animate your models with armatures. The exporter will grab all
-  defined actions for the armature and export these. You are only allowed to
-  have 1 armature object in the scene at the moment
-- Empty Objects whose names start with A: are exported as attachement points
-- Take a look at the console output to see warnings and errors from the script
-- You should specify additional attributes for the actions by creating a blender
-  textobject with name "actionconfig". You can then specify lines like this
-  (this example states that for action MyActionName frames 5 - 40 should be
-   exported every 8th frame should be exported and the animation should be
-   played back with speed 5.7 later. The speed and samplerate part are optional)
-
-  # Sampe actionconfig file
-
-  MyActionName 5 - 40
-  AnotherAction 1 - 30 speed 5.0
-
-  You can append additional options at the line. They are each optional but you
-  have to specify them in this order.
-    speed FLOAT_NUMBER      the default fps speed the animation should be played
-    samplerate INT_NUMBER   only sample every nth frame in blender
-    marker NAME INT_NUMBER  remembers a named marker at a specific frame. These
-                            markers will be used by the program for purposes
-                            like finding out when you can safely change
-                            animations. You can specify multiple markers.
-
-- Windstille has some keys that make debugging animations alot easier:
-    Numpad 2,4,6,8 can be used to move the camera around
-    Numpad +,- zoom in and out.
-    Numpad 1,3 slow down and accelerate the game
-
-    So you can easily zoom in and watch your animation in slow motion with
-    these keys.
-
-(- Only for information you don't have to care about this: UVs in blender are
-    u -> right
-    v -> up
-  UVs in windstille are
-    u -> right
-    v -> down
-  Rotations from windstille rotation compared with blender rotations:
-    ws.x = blend.y
-    ws.y = blend.z
-    ws.z = blend.x )

Deleted: trunk/windstille/doc/wsprite_fileformat.txt
===================================================================
--- trunk/windstille/doc/wsprite_fileformat.txt	2009-02-10 12:49:46 UTC (rev 2425)
+++ trunk/windstille/doc/wsprite_fileformat.txt	2009-02-10 13:08:30 UTC (rev 2426)
@@ -1,41 +0,0 @@
-Header
-    char     magic[4] (= W3DS)
-    uint16_t format_version      (=2 at the moment)
-    uint16_t mesh_count
-    uint16_t attachement_point_count
-    uint16_t action_count
-
-Mesh Header (x mesh_count)
-    char     texturename[64]
-    uint16_t triangle_count
-    uint16_t vertex_count
-
-    uint16_t vertexnum    (x 3*triangle_count) # three vertex indexes per face
-    float    normal[3]    (x triangle_count)   # one normal per face
-    float    texcoord[2]  (x vertex_count)     # one uv coordinate per vertex
-
-Attachement Point Header x attachement_point_count
-    char name[64]
-
-Action Header (x action_count)
-    char     name[64]
-    float    speed
-    uint16_t marker_count
-    uint16_t frame_count
-
-  Marker (x marker_count)
-    char     name[64]
-    uint16_t frame_count
-
-  MeshData (x frame_count)
-    (x frame_count)
-      (x mesh_count)
-        (x mesh.vertex_count)
-          float[3] vertex_location
-
-      (x attachement_point_count)
-        float locX, locY, locZ
-        float rotW, rotX, rotY, rotZ (it's a quaternion)
-
-
-# EOF #



From grumbel at mail.berlios.de  Tue Feb 10 14:45:25 2009
From: grumbel at mail.berlios.de (grumbel at BerliOS)
Date: Tue, 10 Feb 2009 14:45:25 +0100
Subject: [Windstille-commit] r2427 - in trunk/windstille/src: . display
Message-ID: <200902101345.n1ADjPck031805@sheep.berlios.de>

Author: grumbel
Date: 2009-02-10 14:45:23 +0100 (Tue, 10 Feb 2009)
New Revision: 2427

Removed:
   trunk/windstille/src/sharedptr.hpp
Modified:
   trunk/windstille/src/controller_help_window.hpp
   trunk/windstille/src/display/framebuffer.cpp
   trunk/windstille/src/display/framebuffer.hpp
   trunk/windstille/src/display/render_buffer.hpp
   trunk/windstille/src/display/shader_object.hpp
   trunk/windstille/src/display/shader_program.hpp
   trunk/windstille/src/display/texture.cpp
   trunk/windstille/src/display/texture.hpp
   trunk/windstille/src/file_reader.cpp
   trunk/windstille/src/file_reader.hpp
   trunk/windstille/src/game_session.hpp
   trunk/windstille/src/graphic_context_state.hpp
   trunk/windstille/src/inventory.hpp
   trunk/windstille/src/sexpr_file_reader.cpp
Log:
Replaced custom SharedPtr with boost::shared_ptr<>

Modified: trunk/windstille/src/controller_help_window.hpp
===================================================================
--- trunk/windstille/src/controller_help_window.hpp	2009-02-10 13:08:30 UTC (rev 2426)
+++ trunk/windstille/src/controller_help_window.hpp	2009-02-10 13:45:23 UTC (rev 2427)
@@ -27,7 +27,7 @@
 #define HEADER_CONTROLLER_HELP_WINDOW_HPP
 
 #include "screen.hpp"
-#include "sharedptr.hpp"
+#include <boost/shared_ptr.hpp>
 
 class ControllerHelpWindowImpl;
 
@@ -43,7 +43,7 @@
   static ControllerHelpWindow* current() { return current_; }
 
 private:
-  SharedPtr<ControllerHelpWindowImpl> impl;
+  boost::shared_ptr<ControllerHelpWindowImpl> impl;
   static ControllerHelpWindow* current_;
 };
 

Modified: trunk/windstille/src/display/framebuffer.cpp
===================================================================
--- trunk/windstille/src/display/framebuffer.cpp	2009-02-10 13:08:30 UTC (rev 2426)
+++ trunk/windstille/src/display/framebuffer.cpp	2009-02-10 13:45:23 UTC (rev 2427)
@@ -106,7 +106,7 @@
 
 Framebuffer::operator bool() const
 {
-  return !impl.is_null();
+  return impl.get();
 }
 
 bool

Modified: trunk/windstille/src/display/framebuffer.hpp
===================================================================
--- trunk/windstille/src/display/framebuffer.hpp	2009-02-10 13:08:30 UTC (rev 2426)
+++ trunk/windstille/src/display/framebuffer.hpp	2009-02-10 13:45:23 UTC (rev 2427)
@@ -53,7 +53,7 @@
   bool operator!=(const Framebuffer&) const;
 
 private:
-  SharedPtr<FramebufferImpl> impl;
+  boost::shared_ptr<FramebufferImpl> impl;
 };
 
 #endif

Modified: trunk/windstille/src/display/render_buffer.hpp
===================================================================
--- trunk/windstille/src/display/render_buffer.hpp	2009-02-10 13:08:30 UTC (rev 2426)
+++ trunk/windstille/src/display/render_buffer.hpp	2009-02-10 13:45:23 UTC (rev 2427)
@@ -27,7 +27,7 @@
 #define HEADER_RENDER_BUFFER_HPP
 
 #include <GL/gl.h>
-#include "sharedptr.hpp"
+#include <boost/shared_ptr.hpp>
 
 class RenderBufferImpl;
 
@@ -43,8 +43,9 @@
   RenderBuffer(GLenum format, int width, int height);
   
   GLuint get_handle() const;
+
 private:
-  SharedPtr<RenderBufferImpl> impl;
+  boost::shared_ptr<RenderBufferImpl> impl;
 };
 
 #endif

Modified: trunk/windstille/src/display/shader_object.hpp
===================================================================
--- trunk/windstille/src/display/shader_object.hpp	2009-02-10 13:08:30 UTC (rev 2426)
+++ trunk/windstille/src/display/shader_object.hpp	2009-02-10 13:45:23 UTC (rev 2427)
@@ -29,7 +29,7 @@
 #include <GL/glew.h>
 #include <GL/gl.h>
 #include <string>
-#include "sharedptr.hpp"
+#include <boost/shared_ptr.hpp>
 
 class ShaderObjectImpl;
 
@@ -44,8 +44,9 @@
   void load(const std::string& filename);
   void compile();
   void print_log();
+
 private:
-  SharedPtr<ShaderObjectImpl> impl;
+  boost::shared_ptr<ShaderObjectImpl> impl;
 };
 
 #endif

Modified: trunk/windstille/src/display/shader_program.hpp
===================================================================
--- trunk/windstille/src/display/shader_program.hpp	2009-02-10 13:08:30 UTC (rev 2426)
+++ trunk/windstille/src/display/shader_program.hpp	2009-02-10 13:45:23 UTC (rev 2427)
@@ -28,7 +28,7 @@
 
 #include <GL/glew.h>
 #include <GL/gl.h>
-#include "sharedptr.hpp"
+#include <boost/shared_ptr.hpp>
 
 class ShaderProgramImpl;
 class ShaderObject;
@@ -60,7 +60,7 @@
   void set_uniform4i(const char* name, GLint v0, GLint v1, GLint v2, GLint v3);
 
 private:
-  SharedPtr<ShaderProgramImpl> impl;
+  boost::shared_ptr<ShaderProgramImpl> impl;
 };
 
 #endif

Modified: trunk/windstille/src/display/texture.cpp
===================================================================
--- trunk/windstille/src/display/texture.cpp	2009-02-10 13:08:30 UTC (rev 2426)
+++ trunk/windstille/src/display/texture.cpp	2009-02-10 13:45:23 UTC (rev 2427)
@@ -235,7 +235,7 @@
 
 Texture::operator bool() const
 {
-  return !impl.is_null();
+  return impl.get();
 }
 
 bool

Modified: trunk/windstille/src/display/texture.hpp
===================================================================
--- trunk/windstille/src/display/texture.hpp	2009-02-10 13:08:30 UTC (rev 2426)
+++ trunk/windstille/src/display/texture.hpp	2009-02-10 13:45:23 UTC (rev 2427)
@@ -31,7 +31,7 @@
 #include <GL/glew.h>
 #include <GL/gl.h>
 #include <SDL.h>
-#include "../sharedptr.hpp"
+#include <boost/shared_ptr.hpp>
 
 class TextureImpl;
 
@@ -84,8 +84,9 @@
 
   /** true if the Texture is valid and usable, false if not */
   operator bool() const;
+
 private:
-  SharedPtr<TextureImpl> impl;
+  boost::shared_ptr<TextureImpl> impl;
 };
 
 #endif

Modified: trunk/windstille/src/file_reader.cpp
===================================================================
--- trunk/windstille/src/file_reader.cpp	2009-02-10 13:08:30 UTC (rev 2426)
+++ trunk/windstille/src/file_reader.cpp	2009-02-10 13:45:23 UTC (rev 2427)
@@ -44,13 +44,12 @@
     }
 }
 
-FileReader::FileReader(SharedPtr<FileReaderImpl> impl_)
+FileReader::FileReader(boost::shared_ptr<FileReaderImpl> impl_)
   : impl(impl_)
 {
 }
 
 FileReader::FileReader()
-  : impl(0)
 {
 }
 

Modified: trunk/windstille/src/file_reader.hpp
===================================================================
--- trunk/windstille/src/file_reader.hpp	2009-02-10 13:08:30 UTC (rev 2426)
+++ trunk/windstille/src/file_reader.hpp	2009-02-10 13:45:23 UTC (rev 2427)
@@ -23,7 +23,7 @@
 #include <string>
 #include <vector>
 #include "getter.hpp"
-#include "sharedptr.hpp"
+#include <boost/shared_ptr.hpp>
 
 class FileReaderImpl;
 
@@ -34,7 +34,7 @@
 public:
   static FileReader parse(const std::string& filename);
 
-  FileReader(SharedPtr<FileReaderImpl> impl_);
+  FileReader(boost::shared_ptr<FileReaderImpl> impl_);
   FileReader();
 
   /** Name of the current section, ie. in the case of
@@ -80,7 +80,7 @@
   void print_unused_warnings(const std::string& title) const;
 
 private:
-  SharedPtr<FileReaderImpl> impl;
+  boost::shared_ptr<FileReaderImpl> impl;
 };
 
 #endif

Modified: trunk/windstille/src/game_session.hpp
===================================================================
--- trunk/windstille/src/game_session.hpp	2009-02-10 13:08:30 UTC (rev 2426)
+++ trunk/windstille/src/game_session.hpp	2009-02-10 13:45:23 UTC (rev 2427)
@@ -90,8 +90,9 @@
   void quit();
 
   SceneContext* get_scene_context();
+
 private:
-  SharedPtr<GameSessionImpl> impl;
+  boost::shared_ptr<GameSessionImpl> impl;
 };
 
 #endif

Modified: trunk/windstille/src/graphic_context_state.hpp
===================================================================
--- trunk/windstille/src/graphic_context_state.hpp	2009-02-10 13:08:30 UTC (rev 2426)
+++ trunk/windstille/src/graphic_context_state.hpp	2009-02-10 13:45:23 UTC (rev 2427)
@@ -22,7 +22,7 @@
 
 #include "math/rect.hpp"
 #include "math/vector.hpp"
-#include "sharedptr.hpp"
+#include <boost/shared_ptr.hpp>
 
 class SceneContext;
 
@@ -71,7 +71,7 @@
   Vector screen_to_world(const Vector& pos);
 
 private:
-  SharedPtr<GraphicContextStateImpl> impl;
+  boost::shared_ptr<GraphicContextStateImpl> impl;
 };
 
 #endif

Modified: trunk/windstille/src/inventory.hpp
===================================================================
--- trunk/windstille/src/inventory.hpp	2009-02-10 13:08:30 UTC (rev 2426)
+++ trunk/windstille/src/inventory.hpp	2009-02-10 13:45:23 UTC (rev 2427)
@@ -27,7 +27,7 @@
 #define HEADER_WINDSTILLE_INVENTORY_HPP
 
 #include "screen.hpp"
-#include "sharedptr.hpp"
+#include <boost/shared_ptr.hpp>
 
 class InventoryImpl;
 
@@ -43,7 +43,7 @@
   void update(float delta, const Controller& controller);
 
 private:
-  SharedPtr<InventoryImpl> impl;
+  boost::shared_ptr<InventoryImpl> impl;
 };
 
 #endif

Modified: trunk/windstille/src/sexpr_file_reader.cpp
===================================================================
--- trunk/windstille/src/sexpr_file_reader.cpp	2009-02-10 13:08:30 UTC (rev 2426)
+++ trunk/windstille/src/sexpr_file_reader.cpp	2009-02-10 13:45:23 UTC (rev 2427)
@@ -24,6 +24,7 @@
 */
 
 #include <assert.h>
+#include <string.h>
 #include "lisp/parser.hpp"
 #include "lisp/getters.hpp"
 #include "color.hpp"
@@ -240,12 +241,12 @@
 };
 
 SExprFileReader::SExprFileReader(const lisp::Lisp* sexpr, bool delete_sexpr)
-  : FileReader(SharedPtr<FileReaderImpl>(new SExprFileReaderImpl(sexpr, delete_sexpr)))
+  : FileReader(boost::shared_ptr<FileReaderImpl>(new SExprFileReaderImpl(sexpr, delete_sexpr)))
 {
 }
 
 SExprFileReader::SExprFileReader(const lisp::Lisp* root, const lisp::Lisp* sexpr)
-  : FileReader(SharedPtr<FileReaderImpl>(new SExprFileReaderImpl(root, sexpr)))
+  : FileReader(boost::shared_ptr<FileReaderImpl>(new SExprFileReaderImpl(root, sexpr)))
 {
 }
 

Deleted: trunk/windstille/src/sharedptr.hpp
===================================================================
--- trunk/windstille/src/sharedptr.hpp	2009-02-10 13:08:30 UTC (rev 2426)
+++ trunk/windstille/src/sharedptr.hpp	2009-02-10 13:45:23 UTC (rev 2427)
@@ -1,188 +0,0 @@
-/*
-**  ClanLib SDK
-**  Copyright (c) 1997-2005 The ClanLib Team
-**
-**  This software is provided 'as-is', without any express or implied
-**  warranty.  In no event will the authors be held liable for any damages
-**  arising from the use of this software.
-**
-**  Permission is granted to anyone to use this software for any purpose,
-**  including commercial applications, and to alter it and redistribute it
-**  freely, subject to the following restrictions:
-**
-**  1. The origin of this software must not be misrepresented; you must not
-**     claim that you wrote the original software. If you use this software
-**     in a product, an acknowledgment in the product documentation would be
-**     appreciated but is not required.
-**  2. Altered source versions must be plainly marked as such, and must not be
-**     misrepresented as being the original software.
-**  3. This notice may not be removed or altered from any source distribution.
-**
-**  Note: Some of the libraries ClanLib may link to may have additional
-**  requirements or restrictions.
-**
-**  File Author(s):
-**
-**    Magnus Norddahl
-**    (if your name is missing here, please add it)
-*/
-
-//! clanCore="System"
-//! header=core.h
-
-#ifndef HEADER_SHAREDPTR_HPP
-#define HEADER_SHAREDPTR_HPP
-
-template <typename TEvil>
-class SharedPtr_Generic
-{
-public:
-	SharedPtr_Generic() : ptr(0), ref_count(1) { return; }
-
-	virtual ~SharedPtr_Generic() { return; }
-
-public:
-	//: Pointer to new-allocated data, or else 0:
-	TEvil *ptr;
-	
-	//: reference count:
-	unsigned int ref_count;
-};
-
-template <typename T, typename TEvil>
-class SharedPtr_Deleter : public SharedPtr_Generic<T>
-{
-public:
-	SharedPtr_Deleter(TEvil *e) { this->ptr = e; }
-
-	~SharedPtr_Deleter() { delete this->ptr; }
-};
-
-//: Shared pointer class (automatically deletes data when all SharedPtrs to data are gone).
-//- !group=Core/System!
-//- !header=core.h!
-//- <p> Use SharedPtr when you have data that's intended to be shared between
-//- multiple users without each user needing an individual copy. </p>
-//- <p> Note that SharedPtr uses a very simple reference counting system, so is susecptible
-//- to circular loop issues. </p>
-template <typename T, typename U = T>
-class SharedPtr
-{
-//! Construction:
-public:
-	//: Constructs a SharedPtr.
-	//param t: A pointer which was the return value of a 'new' call.
-	//- <p> After the SharedPtr has been constructed based on a passed pointer,
-	//- the SharedPtr takes full control over that data. The original pointer shouldn't
-	//- be used to access or delete the data anymore; instead, use the SharedPtr. </p>
-	SharedPtr() : impl(0) { return; }
-
-	SharedPtr(const SharedPtr<T, U>& other) : impl(other.impl) { increment(); }
-
-	template <typename D>
-	explicit SharedPtr(D* ptr) : impl(new SharedPtr_Deleter<T, D>(ptr)) { return; }
-
-	explicit SharedPtr(SharedPtr_Generic<T> *impl) : impl(impl) { increment(); }
-	
-	~SharedPtr() { decrement(); }
-	
-//! Attributes:
-public:
-	//: Returns true if this SharedPtr is not dereferencable.
-	bool is_null() const { return impl ? (impl->ptr == 0) : true; }
-
-	//: Returns number of references (including this one) to the data cache.
-	//- <p> Returns 0 if this pointer is null. </p>
-	int get_ref_count() const { if (impl == 0) return 0; return impl->ref_count; }
-	
-	//: Gives access to the pointer itself.
-	//- <p> Be careful not to keep the returned pointer around after doing any
-	//- non-const operations on the SharedPtr; it could be invalid
-	//- after that.</p>
-	U* get() { return (U*) ((impl != 0) ? impl->ptr : 0); }
-
-	U const* get() const { return (const U*) ((impl != 0) ? impl->ptr : 0); }
-
-	//: Pointer equality check operator.
-	//- <p> This will return true if the SharedPtrs point to the same data. It doesn't
-	//- check the data itself for equality. </p>
-	bool operator==(const T* other) const { return other == ((impl != 0) ? impl->ptr : 0); }
-
-	bool operator==(const SharedPtr<T, U>& other) const { return other.impl == impl; }
-
-	//: reelase the content of the SharedPtr
-	//- <p> Decrements the reference count and sets the data pointer to null.
-	//- This is usefull for solving circular references</p>
-	void release (void) 
-	{
-		if (impl!= 0)
-		{
-			decrement ();
-			impl = 0;
-		}
-	}
-//! Operations:
-public:
-	//: Copy assignment operator.
-	//param t: A pointer which was the return value of a 'new' call.
-	//- <p> Once the assignment statement is finished when assigning a passed pointer,
-	//- the SharedPtr takes full control over that data. The original pointer shouldn't
-	//- be used to access or delete the data anymore; instead, use the SharedPtr. </p>
-	SharedPtr<T, U>& operator=(const SharedPtr<T, U>& other)
-	{
-		if (other.impl != impl)
-		{
-			decrement();
-			impl = other.impl;
-			increment();
-		}
-		return *this;
-	}
-
-	template <typename D>
-	SharedPtr<T, U>& operator=(D* t)
-	{
-		decrement();
-		impl = new SharedPtr_Deleter<T, D>(t);
-		return *this;
-	}
-	
-	//: Dereferencing operator.
-	U& operator*() { return *((U*) impl->ptr); }
-
-	U const& operator*() const { return *((const U*) impl->ptr); }
-	
-	//: Indirect member access operator.
-	U* operator->() { return (U*) impl->ptr; }
-
-	U const* operator->() const { return (const U*) impl->ptr; }
-
-	SharedPtr_Generic<T> *get_impl() { return impl; }
-
-//! Implementation:
-private:
-	// Shared data:
-	SharedPtr_Generic<T> *impl;
-	
-	//: Increases the ref count
-	void increment()
-	{
-		if (impl != 0)
-			++impl->ref_count;
-	}
-	
-	//: Decreases the ref count, deletes entry and sets ptr to 0 if ptr_ref_count reaches zero
-	void decrement()
-	{
-		if (impl != 0)
-		{
-			if (--impl->ref_count == 0)
-			{
-				delete impl;
-				impl = 0;
-			}
-		}
-	}
-};
-
-#endif



From grumbel at mail.berlios.de  Tue Feb 10 15:12:19 2009
From: grumbel at mail.berlios.de (grumbel at BerliOS)
Date: Tue, 10 Feb 2009 15:12:19 +0100
Subject: [Windstille-commit] r2428 - in trunk/windstille/src: . collision gui
Message-ID: <200902101412.n1AECJlM002375@sheep.berlios.de>

Author: grumbel
Date: 2009-02-10 15:12:18 +0100 (Tue, 10 Feb 2009)
New Revision: 2428

Removed:
   trunk/windstille/src/signals/
Modified:
   trunk/windstille/src/SConscript
   trunk/windstille/src/box.cpp
   trunk/windstille/src/box.hpp
   trunk/windstille/src/collision/collision_object.hpp
   trunk/windstille/src/entity.hpp
   trunk/windstille/src/gui/menu_item.hpp
   trunk/windstille/src/menu_manager.cpp
   trunk/windstille/src/menu_manager.hpp
   trunk/windstille/src/physics.cpp
   trunk/windstille/src/physics.hpp
   trunk/windstille/src/player.cpp
   trunk/windstille/src/player.hpp
   trunk/windstille/src/screen.hpp
Log:
Replaced custom Signal code with boost::signal/boost::bind

Modified: trunk/windstille/src/SConscript
===================================================================
--- trunk/windstille/src/SConscript	2009-02-10 13:45:23 UTC (rev 2427)
+++ trunk/windstille/src/SConscript	2009-02-10 14:12:18 UTC (rev 2428)
@@ -29,7 +29,7 @@
 SConscript('scripting/SConscript')
 
 env = conf_env.Clone()
-env.Append(LIBS    = ['GL', 'GLU', 'squirrel', 'physfs', 'SDL_image', 'openal', 'glew', 'ogg', 'vorbis', 'vorbisfile', 'png'])
+env.Append(LIBS    = ['GL', 'GLU', 'squirrel', 'physfs', 'SDL_image', 'openal', 'glew', 'ogg', 'vorbis', 'vorbisfile', 'png', 'boost_signals'])
 env.Append(LIBPATH = ['../lib/'] )
 env.Append(CPPPATH = ['.', '..', '../lib/SQUIRREL2/include/', '../lib/glew'])
 
@@ -192,8 +192,6 @@
 'scripting/squirrel_error.cpp',
 'scripting/wrapper.cpp',
 'scripting/util.cpp',
-'signals/slot.cpp',
-'signals/slot_generic.cpp',
 'sound/sound_file.cpp',
 'sound/sound_manager.cpp',
 'sound/sound_source.cpp',

Modified: trunk/windstille/src/box.cpp
===================================================================
--- trunk/windstille/src/box.cpp	2009-02-10 13:45:23 UTC (rev 2427)
+++ trunk/windstille/src/box.cpp	2009-02-10 14:12:18 UTC (rev 2428)
@@ -18,6 +18,7 @@
 //  Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA.
 
 #include <stdexcept>
+#include <boost/bind.hpp>
 #include "box.hpp"
 #include "globals.hpp"
 #include "collision/collision_engine.hpp"
@@ -54,7 +55,7 @@
 
   Sector::current()->get_collision_engine()->add(colobj);
 
-  slot = colobj->sig_collision().connect(this, &Box::collision);
+  colobj->sig_collision().connect(boost::bind(&Box::collision, this, _1));
 }
 
 Box::~Box()

Modified: trunk/windstille/src/box.hpp
===================================================================
--- trunk/windstille/src/box.hpp	2009-02-10 13:45:23 UTC (rev 2427)
+++ trunk/windstille/src/box.hpp	2009-02-10 14:12:18 UTC (rev 2428)
@@ -31,7 +31,6 @@
 private:
   Sprite sprite;
   CollisionObject* colobj;
-  Slot slot;
   float gravity;
 
 public:

Modified: trunk/windstille/src/collision/collision_object.hpp
===================================================================
--- trunk/windstille/src/collision/collision_object.hpp	2009-02-10 13:45:23 UTC (rev 2427)
+++ trunk/windstille/src/collision/collision_object.hpp	2009-02-10 14:12:18 UTC (rev 2428)
@@ -22,7 +22,7 @@
 #ifndef HEADER_COLLISION_OBJECT_HPP
 #define HEADER_COLLISION_OBJECT_HPP
 
-#include "signals/signals.hpp"
+#include <boost/signals.hpp>
 #include "math/vector.hpp"
 #include "math/rect.hpp"
 #include "collision_data.hpp"
@@ -54,7 +54,7 @@
 
   GameObject* game_object;
 
-  Signal_v1<const CollisionData &> collision;
+  boost::signal<void (const CollisionData &)> collision;
 
   Rectf primitive;
   TileMap* tilemap;
@@ -128,7 +128,7 @@
   unsigned int get_check_domains() const;
   void         set_check_domains(unsigned int d);
 
-  Signal_v1<const CollisionData &>& sig_collision() { return collision; }
+  boost::signal<void (const CollisionData &)>& sig_collision() { return collision; }
 
   friend class CollisionEngine;
 };

Modified: trunk/windstille/src/entity.hpp
===================================================================
--- trunk/windstille/src/entity.hpp	2009-02-10 13:45:23 UTC (rev 2427)
+++ trunk/windstille/src/entity.hpp	2009-02-10 14:12:18 UTC (rev 2428)
@@ -26,7 +26,7 @@
 #ifndef HEADER_ENTITY_HXX
 #define HEADER_ENTITY_HXX
 
-#include "signals/signal_v0.hpp"
+#include <boost/signal.hpp>
 #include "math/vector.hpp"
 #include "game_object.hpp"
 #include "collision/collision_object.hpp"
@@ -36,7 +36,7 @@
 class Entity : public GameObject
 {
 private:
-  Signal_v0 done; 
+  boost::signal<void ()> done; 
 
 protected:
   friend class Physics;
@@ -77,7 +77,7 @@
 
   void set_parent(Entity* parent_);
 
-  Signal_v0& sig_done() { return done; }
+  boost::signal<void ()>& sig_done() { return done; }
 
 private:
   Entity (const Entity&);

Modified: trunk/windstille/src/gui/menu_item.hpp
===================================================================
--- trunk/windstille/src/gui/menu_item.hpp	2009-02-10 13:45:23 UTC (rev 2427)
+++ trunk/windstille/src/gui/menu_item.hpp	2009-02-10 14:12:18 UTC (rev 2428)
@@ -26,11 +26,10 @@
 #ifndef HEADER_WINDSTILLE_GUI_MENU_ITEM_HPP
 #define HEADER_WINDSTILLE_GUI_MENU_ITEM_HPP
 
+#include <boost/signal.hpp>
 #include <string>
 #include <vector>
 #include "math/rect.hpp"
-#include "signals/signal_v1.hpp"
-#include "signals/signal_v0.hpp"
 
 namespace gui {
 
@@ -59,7 +58,7 @@
   
   int index;
   std::vector<EnumValue> labels;
-  Signal_v1<int> on_change;
+  boost::signal<void (int)> on_change;
 public:  
   EnumMenuItem(MenuComponent* parent_, 
                const std::string& label_, int index_ = 0);
@@ -71,7 +70,7 @@
   void click() {}
   void draw(const Rectf& rect, bool is_active);
   void update(float);
-  Signal_v1<int>& sig_change() { return on_change; }
+  boost::signal<void (int)>& sig_change() { return on_change; }
 };
 
 /** A slider widget for use in volume controls, gamma controls and
@@ -82,7 +81,7 @@
   int min_value;
   int max_value;
   int step;
-  Signal_v1<int> on_change;
+  boost::signal<void (int)> on_change;
 public:  
   SliderMenuItem(MenuComponent* parent_, 
                  const std::string& label_, int value_, int mix_value_ = 0, int max_value_ = 100, int step = 10);
@@ -91,12 +90,13 @@
   void click() {}
   void draw(const Rectf& rect, bool is_active);
   void update(float);
-  Signal_v1<int>& sig_change() { return on_change; }
+  boost::signal<void (int)>& sig_change() { return on_change; }
 };
 
 class ButtonMenuItem : public MenuItem {
 public:
-  Signal_v0 on_click;
+  boost::signal<void ()> on_click;
+
 public:  
   ButtonMenuItem(MenuComponent* parent_, const std::string& label_);
   void incr() {}
@@ -104,7 +104,7 @@
   void click();
   void draw(const Rectf& rect, bool is_active);
   void update(float);
-  Signal_v0& sig_click() { return on_click; }
+  boost::signal<void ()>& sig_click() { return on_click; }
 };
 
 } // namespace gui

Modified: trunk/windstille/src/menu_manager.cpp
===================================================================
--- trunk/windstille/src/menu_manager.cpp	2009-02-10 13:45:23 UTC (rev 2427)
+++ trunk/windstille/src/menu_manager.cpp	2009-02-10 14:12:18 UTC (rev 2428)
@@ -23,6 +23,7 @@
 **  02111-1307, USA.
 */
 
+#include <boost/bind.hpp>
 #include "config.hpp"
 #include "sound/sound_manager.hpp"
 #include "console.hpp"
@@ -73,7 +74,7 @@
 
   SliderMenuItem* music_volume_item = new SliderMenuItem(menu,  "Master Volume",   
                                                          config.get_int("master-volume"), 0, 100, 10);
-  slots.push_back(music_volume_item->sig_change().connect(this, &MenuManager::menu_music_volume));
+  music_volume_item->sig_change().connect(boost::bind(&MenuManager::menu_music_volume, this, _1));
   menu->add_item(music_volume_item);
 
   SliderMenuItem* sfx_volume_item   = new SliderMenuItem(menu,  "SFX Volume",   100, 0, 100, 10);
@@ -94,13 +95,13 @@
   show_fps_item->add_pair(0, "off");
   show_fps_item->add_pair(1, "on");
   menu->add_item(show_fps_item);
-  slots.push_back(show_fps_item->sig_change().connect(this, &MenuManager::menu_show_fps));
+  show_fps_item->sig_change().connect(boost::bind(&MenuManager::menu_show_fps, this, _1));
 
   EnumMenuItem* fullscreen_item = new EnumMenuItem(menu,  "Fullscreen", config.get_bool("fullscreen"));
   fullscreen_item->add_pair(0, "off");
   fullscreen_item->add_pair(1, "on");
   menu->add_item(fullscreen_item);
-  slots.push_back(fullscreen_item->sig_change().connect(this, &MenuManager::menu_fullscreen));
+  fullscreen_item->sig_change().connect(boost::bind(&MenuManager::menu_fullscreen, this, _1));
 
   EnumMenuItem* difficulty_item = new EnumMenuItem(menu,  "Difficulty", 1);
   difficulty_item->add_pair(0, "easy");
@@ -109,14 +110,14 @@
   menu->add_item(difficulty_item);
 
   SliderMenuItem* gamma_item   = new SliderMenuItem(menu,  "Gamma",  100, 10, 200, 10);
-  slots.push_back(gamma_item->sig_change().connect(this, &MenuManager::menu_gamma));
+  gamma_item->sig_change().connect(boost::bind(&MenuManager::menu_gamma, this, _1));
   menu->add_item(gamma_item);
 
   #ifdef HAVE_CWIID
   if (wiimote)
     {
       ButtonMenuItem* wiimote_button = new ButtonMenuItem(menu,  "Try to Connect Wiimote");
-      slots.push_back(wiimote_button->sig_click().connect(this, &MenuManager::menu_wiimote));
+      wiimote_button->sig_click().connect(boost::bind(&MenuManager::menu_wiimote, this));
       menu->add_item(wiimote_button);
     }
   #endif
@@ -159,43 +160,43 @@
   menu->set_font(Fonts::vera20);
 
   ButtonMenuItem* select_scenario_button = new ButtonMenuItem(menu,  "Select Scenario");
-  slots.push_back(select_scenario_button->sig_click().connect(this, &MenuManager::display_scenario_menu));
+  select_scenario_button->sig_click().connect(boost::bind(&MenuManager::display_scenario_menu, this));
   menu->add_item(select_scenario_button);
 
   ButtonMenuItem* navigation_test_button = new ButtonMenuItem(menu,  "Navigation Test");
-  slots.push_back(navigation_test_button->sig_click().connect(this, &MenuManager::menu_show_navigation_test));
+  navigation_test_button->sig_click().connect(boost::bind(&MenuManager::menu_show_navigation_test, this));
   menu->add_item(navigation_test_button);
 
   ButtonMenuItem* armature_test_button = new ButtonMenuItem(menu,  "Armature Test");
-  slots.push_back(armature_test_button->sig_click().connect(this, &MenuManager::menu_show_armature_test));
+  armature_test_button->sig_click().connect(boost::bind(&MenuManager::menu_show_armature_test, this));
   menu->add_item(armature_test_button);
 
   ButtonMenuItem* geometry_test_button = new ButtonMenuItem(menu,  "Geometry Test");
-  slots.push_back(geometry_test_button->sig_click().connect(this, &MenuManager::menu_show_geometry_test));
+  geometry_test_button->sig_click().connect(boost::bind(&MenuManager::menu_show_geometry_test, this));
   menu->add_item(geometry_test_button);
 
   ButtonMenuItem* model_viewer_button = new ButtonMenuItem(menu,  "Model Viewer");
-  slots.push_back(model_viewer_button->sig_click().connect(this, &MenuManager::display_models_menu));
+  model_viewer_button->sig_click().connect(boost::bind(&MenuManager::display_models_menu, this));
   menu->add_item(model_viewer_button);
 
   ButtonMenuItem* particles_button = new ButtonMenuItem(menu,  "Particle Systems");
-  slots.push_back(particles_button->sig_click().connect(this, &MenuManager::display_particle_menu));
+  particles_button->sig_click().connect(boost::bind(&MenuManager::display_particle_menu, this));
   menu->add_item(particles_button);
 
   ButtonMenuItem* options_button = new ButtonMenuItem(menu,  "Options");
-  slots.push_back(options_button->sig_click().connect(this, &MenuManager::display_option_menu));
+  options_button->sig_click().connect(boost::bind(&MenuManager::display_option_menu, this));
   menu->add_item(options_button);
 
   ButtonMenuItem* credits_button = new ButtonMenuItem(menu,  "Credits");
-  slots.push_back(credits_button->sig_click().connect(this, &MenuManager::display_credits));
+  credits_button->sig_click().connect(boost::bind(&MenuManager::display_credits, this));
   menu->add_item(credits_button);
 
   ButtonMenuItem* help_button = new ButtonMenuItem(menu,  "Help");
-  slots.push_back(help_button->sig_click().connect(this, &MenuManager::display_help));
+  help_button->sig_click().connect(boost::bind(&MenuManager::display_help, this));
   menu->add_item(help_button);
 
   ButtonMenuItem* quit_button = new ButtonMenuItem(menu,  "Quit");
-  slots.push_back(quit_button->sig_click().connect(this, &MenuManager::menu_quit));
+  quit_button->sig_click().connect(boost::bind(&MenuManager::menu_quit, this));
   menu->add_item(quit_button);
   // End: Option Menu
 
@@ -222,31 +223,31 @@
   menu->set_font(Fonts::vera20);
 
   ButtonMenuItem* continue_button = new ButtonMenuItem(menu,  "Resume Game");
-  slots.push_back(continue_button->sig_click().connect(this, &MenuManager::menu_continue));
+  continue_button->sig_click().connect(boost::bind(&MenuManager::menu_continue, this));
   menu->add_item(continue_button);
 
   //  ButtonMenuItem* select_scenario_button = new ButtonMenuItem(menu,  "Select Scenario");
-  //  slots.push_back(select_scenario_button->sig_click().connect(this, &MenuManager::display_scenario_menu));
+  //  select_scenario_button->sig_click().connect(boost::bind(&MenuManager::display_scenario_menu, this));
   // menu->add_item(select_scenario_button);
 
   ButtonMenuItem* options_button = new ButtonMenuItem(menu,  "Options");
-  slots.push_back(options_button->sig_click().connect(this, &MenuManager::display_option_menu));
+  options_button->sig_click().connect(boost::bind(&MenuManager::display_option_menu, this));
   menu->add_item(options_button);
 
   ButtonMenuItem* debug_button = new ButtonMenuItem(menu,  "Debug");
-  slots.push_back(debug_button->sig_click().connect(this, &MenuManager::display_debug_menu));
+  debug_button->sig_click().connect(boost::bind(&MenuManager::display_debug_menu, this));
   menu->add_item(debug_button);
 
   ButtonMenuItem* credits_button = new ButtonMenuItem(menu,  "Credits");
-  slots.push_back(credits_button->sig_click().connect(this, &MenuManager::display_credits));
+  credits_button->sig_click().connect(boost::bind(&MenuManager::display_credits, this));
   menu->add_item(credits_button);
 
   ButtonMenuItem* help_button = new ButtonMenuItem(menu,  "Help");
-  slots.push_back(help_button->sig_click().connect(this, &MenuManager::display_help));
+  help_button->sig_click().connect(boost::bind(&MenuManager::display_help, this));
   menu->add_item(help_button);
 
   ButtonMenuItem* quit_button = new ButtonMenuItem(menu,  "Return to Title Screen");
-  slots.push_back(quit_button->sig_click().connect(this, &MenuManager::menu_exit));
+  quit_button->sig_click().connect(boost::bind(&MenuManager::menu_exit, this));
   menu->add_item(quit_button);
   // End: Option Menu
 
@@ -288,9 +289,7 @@
     {
       ButtonMenuItem* scenario_button = new ButtonMenuItem(menu,  *i);
 
-      slots.push_back(scenario_button->sig_click().connect<MenuManager, std::string>
-                      (this, &MenuManager::menu_show_model, 
-                       std::string(*i)));
+      scenario_button->sig_click().connect(boost::bind(&MenuManager::menu_show_model, this, std::string(*i)));
 
       menu->add_item(scenario_button);
     }
@@ -322,9 +321,7 @@
     {
       ButtonMenuItem* scenario_button = new ButtonMenuItem(menu,  *i);
 
-      slots.push_back(scenario_button->sig_click().connect<MenuManager, std::string>
-                      (this, &MenuManager::menu_show_particle_system, 
-                       std::string(*i)));
+      scenario_button->sig_click().connect(boost::bind(&MenuManager::menu_show_particle_system, this, *i));
 
       menu->add_item(scenario_button);
     }
@@ -362,9 +359,7 @@
     {
       ButtonMenuItem* scenario_button = new ButtonMenuItem(menu,  *i);
 
-      slots.push_back(scenario_button->sig_click().connect<MenuManager, std::string>
-                      (this, &MenuManager::menu_start_scenario, 
-                       std::string(*i)));
+      scenario_button->sig_click().connect(boost::bind(&MenuManager::menu_start_scenario, this, *i));
 
       menu->add_item(scenario_button);
     }
@@ -393,15 +388,15 @@
   Color amb = Sector::current()->get_ambient_light();
 
   SliderMenuItem* r_ambient_light_item = new SliderMenuItem(menu,  "Ambient Light (Red)", int(amb.r*100), 0, 100, 10);
-  slots.push_back(r_ambient_light_item->sig_change().connect(this, &MenuManager::menu_ambient_light, 0));
+  r_ambient_light_item->sig_change().connect(boost::bind(&MenuManager::menu_ambient_light, this, _1, 0));
   menu->add_item(r_ambient_light_item);
 
   SliderMenuItem* g_ambient_light_item = new SliderMenuItem(menu,  "Ambient Light (Green)", int(amb.g*100), 0, 100, 10);
-  slots.push_back(g_ambient_light_item->sig_change().connect(this, &MenuManager::menu_ambient_light, 1));
+  g_ambient_light_item->sig_change().connect(boost::bind(&MenuManager::menu_ambient_light, this, _1, 1));
   menu->add_item(g_ambient_light_item);
 
   SliderMenuItem* b_ambient_light_item = new SliderMenuItem(menu,  "Ambient Light (Blue)", int(amb.b*100), 0, 100, 10);
-  slots.push_back(b_ambient_light_item->sig_change().connect(this, &MenuManager::menu_ambient_light, 2));
+  b_ambient_light_item->sig_change().connect(boost::bind(&MenuManager::menu_ambient_light, this, _1, 2));
   menu->add_item(b_ambient_light_item);
 
   manager->get_root()->add_child(group);

Modified: trunk/windstille/src/menu_manager.hpp
===================================================================
--- trunk/windstille/src/menu_manager.hpp	2009-02-10 13:45:23 UTC (rev 2427)
+++ trunk/windstille/src/menu_manager.hpp	2009-02-10 14:12:18 UTC (rev 2428)
@@ -27,13 +27,11 @@
 #define HEADER_WINDSTILLE_MENU_MANAGER_HPP
 
 #include <vector>
-#include "signals/slot.hpp"
 
 /** */
 class MenuManager
 {
 private:
-  std::vector<Slot> slots;
 
 public:
   MenuManager();

Modified: trunk/windstille/src/physics.cpp
===================================================================
--- trunk/windstille/src/physics.cpp	2009-02-10 13:45:23 UTC (rev 2427)
+++ trunk/windstille/src/physics.cpp	2009-02-10 14:12:18 UTC (rev 2428)
@@ -1,4 +1,5 @@
 
+#include <boost/bind.hpp>
 #include "physics.hpp"
 
 Physics::Physics(Entity* entity)
@@ -17,7 +18,7 @@
 void
 Physics::register_collobj(CollisionObject& object)
 {
-  slots.push_back(object.sig_collision().connect(this, &Physics::collision));
+  object.sig_collision().connect(boost::bind(&Physics::collision, this, _1));
 }
 
 void

Modified: trunk/windstille/src/physics.hpp
===================================================================
--- trunk/windstille/src/physics.hpp	2009-02-10 13:45:23 UTC (rev 2427)
+++ trunk/windstille/src/physics.hpp	2009-02-10 14:12:18 UTC (rev 2428)
@@ -30,8 +30,6 @@
   Vector force;
   float air_friction;
   float contact_friction;
-
-  std::vector<Slot> slots;
 };
 
 #endif

Modified: trunk/windstille/src/player.cpp
===================================================================
--- trunk/windstille/src/player.cpp	2009-02-10 13:45:23 UTC (rev 2427)
+++ trunk/windstille/src/player.cpp	2009-02-10 14:12:18 UTC (rev 2428)
@@ -17,6 +17,7 @@
 //  along with this program; if not, write to the Free Software
 //  Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA.
 
+#include <boost/bind.hpp>
 #include "tile_map.hpp"
 #include "sector.hpp"
 #include "input/controller.hpp"
@@ -70,7 +71,7 @@
   c_object->set_pos(pos);
   c_object->set_velocity(velocity);
   
-  slot = c_object->sig_collision().connect(this, &Player::collision);
+  c_object->sig_collision().connect(boost::bind(&Player::collision, this, _1));
 
   Sector::current()->get_collision_engine()->add(c_object);
 

Modified: trunk/windstille/src/player.hpp
===================================================================
--- trunk/windstille/src/player.hpp	2009-02-10 13:45:23 UTC (rev 2427)
+++ trunk/windstille/src/player.hpp	2009-02-10 14:12:18 UTC (rev 2428)
@@ -52,7 +52,6 @@
   int energy;
 
   CollisionObject* c_object;
-  Slot slot;
 
   LaserPointer* laser_pointer;
   Contact* contact;

Modified: trunk/windstille/src/screen.hpp
===================================================================
--- trunk/windstille/src/screen.hpp	2009-02-10 13:45:23 UTC (rev 2427)
+++ trunk/windstille/src/screen.hpp	2009-02-10 14:12:18 UTC (rev 2428)
@@ -27,7 +27,6 @@
 #define HEADER_SCREEN_HXX
 
 #include <SDL.h>
-#include "signals/slot.hpp"
 
 class Controller;
 



From grumbel at mail.berlios.de  Tue Feb 10 15:32:15 2009
From: grumbel at mail.berlios.de (grumbel at BerliOS)
Date: Tue, 10 Feb 2009 15:32:15 +0100
Subject: [Windstille-commit] r2430 - in trunk/windstille/src: . font objects
Message-ID: <200902101432.n1AEWFfC004092@sheep.berlios.de>

Author: grumbel
Date: 2009-02-10 15:32:10 +0100 (Tue, 10 Feb 2009)
New Revision: 2430

Modified:
   trunk/windstille/src/console.cpp
   trunk/windstille/src/console.hpp
   trunk/windstille/src/elevator.cpp
   trunk/windstille/src/elevator.hpp
   trunk/windstille/src/font/ttf_font.cpp
   trunk/windstille/src/objects/bomb.cpp
   trunk/windstille/src/objects/bomb.hpp
   trunk/windstille/src/objects/hedgehog.cpp
   trunk/windstille/src/objects/hedgehog.hpp
   trunk/windstille/src/objects/spider_mine.cpp
   trunk/windstille/src/objects/spider_mine.hpp
Log:
Switched to GPLv3, cleaned up copyright header

Modified: trunk/windstille/src/console.cpp
===================================================================
--- trunk/windstille/src/console.cpp	2009-02-10 14:28:05 UTC (rev 2429)
+++ trunk/windstille/src/console.cpp	2009-02-10 14:32:10 UTC (rev 2430)
@@ -2,19 +2,18 @@
 **  Windstille - A Sci-Fi Action-Adventure Game
 **  Copyright (C) 2005 Ingo Ruhnke <grumbel at gmx.de>
 **
-**  This program is free software; you can redistribute it and/or
-**  modify it under the terms of the GNU General Public License
-**  as published by the Free Software Foundation; either version 2
-**  of the License, or (at your option) any later version.
-**
+**  This program is free software: you can redistribute it and/or modify
+**  it under the terms of the GNU General Public License as published by
+**  the Free Software Foundation, either version 3 of the License, or
+**  (at your option) any later version.
+**  
 **  This program is distributed in the hope that it will be useful,
 **  but WITHOUT ANY WARRANTY; without even the implied warranty of
 **  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 **  GNU General Public License for more details.
-** 
+**  
 **  You should have received a copy of the GNU General Public License
-**  along with this program; if not, write to the Free Software
-**  Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA.
+**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
 #include <assert.h>

Modified: trunk/windstille/src/console.hpp
===================================================================
--- trunk/windstille/src/console.hpp	2009-02-10 14:28:05 UTC (rev 2429)
+++ trunk/windstille/src/console.hpp	2009-02-10 14:32:10 UTC (rev 2430)
@@ -2,19 +2,18 @@
 **  Windstille - A Sci-Fi Action-Adventure Game
 **  Copyright (C) 2005 Ingo Ruhnke <grumbel at gmx.de>
 **
-**  This program is free software; you can redistribute it and/or
-**  modify it under the terms of the GNU General Public License
-**  as published by the Free Software Foundation; either version 2
-**  of the License, or (at your option) any later version.
-**
+**  This program is free software: you can redistribute it and/or modify
+**  it under the terms of the GNU General Public License as published by
+**  the Free Software Foundation, either version 3 of the License, or
+**  (at your option) any later version.
+**  
 **  This program is distributed in the hope that it will be useful,
 **  but WITHOUT ANY WARRANTY; without even the implied warranty of
 **  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 **  GNU General Public License for more details.
-** 
+**  
 **  You should have received a copy of the GNU General Public License
-**  along with this program; if not, write to the Free Software
-**  Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA.
+**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
 #ifndef CONSOLE_HXX

Modified: trunk/windstille/src/elevator.cpp
===================================================================
--- trunk/windstille/src/elevator.cpp	2009-02-10 14:28:05 UTC (rev 2429)
+++ trunk/windstille/src/elevator.cpp	2009-02-10 14:32:10 UTC (rev 2430)
@@ -2,19 +2,18 @@
 **  Windstille - A Sci-Fi Action-Adventure Game
 **  Copyright (C) 2005 Ingo Ruhnke <grumbel at gmx.de>
 **
-**  This program is free software; you can redistribute it and/or
-**  modify it under the terms of the GNU General Public License
-**  as published by the Free Software Foundation; either version 2
-**  of the License, or (at your option) any later version.
-**
+**  This program is free software: you can redistribute it and/or modify
+**  it under the terms of the GNU General Public License as published by
+**  the Free Software Foundation, either version 3 of the License, or
+**  (at your option) any later version.
+**  
 **  This program is distributed in the hope that it will be useful,
 **  but WITHOUT ANY WARRANTY; without even the implied warranty of
 **  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 **  GNU General Public License for more details.
-** 
+**  
 **  You should have received a copy of the GNU General Public License
-**  along with this program; if not, write to the Free Software
-**  Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA.
+**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
 #include <stdexcept>

Modified: trunk/windstille/src/elevator.hpp
===================================================================
--- trunk/windstille/src/elevator.hpp	2009-02-10 14:28:05 UTC (rev 2429)
+++ trunk/windstille/src/elevator.hpp	2009-02-10 14:32:10 UTC (rev 2430)
@@ -2,19 +2,18 @@
 **  Windstille - A Sci-Fi Action-Adventure Game
 **  Copyright (C) 2005 Ingo Ruhnke <grumbel at gmx.de>
 **
-**  This program is free software; you can redistribute it and/or
-**  modify it under the terms of the GNU General Public License
-**  as published by the Free Software Foundation; either version 2
-**  of the License, or (at your option) any later version.
-**
+**  This program is free software: you can redistribute it and/or modify
+**  it under the terms of the GNU General Public License as published by
+**  the Free Software Foundation, either version 3 of the License, or
+**  (at your option) any later version.
+**  
 **  This program is distributed in the hope that it will be useful,
 **  but WITHOUT ANY WARRANTY; without even the implied warranty of
 **  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 **  GNU General Public License for more details.
-** 
+**  
 **  You should have received a copy of the GNU General Public License
-**  along with this program; if not, write to the Free Software
-**  Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA.
+**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
 #ifndef HEADER_ELEVATOR_HXX

Modified: trunk/windstille/src/font/ttf_font.cpp
===================================================================
--- trunk/windstille/src/font/ttf_font.cpp	2009-02-10 14:28:05 UTC (rev 2429)
+++ trunk/windstille/src/font/ttf_font.cpp	2009-02-10 14:32:10 UTC (rev 2430)
@@ -2,19 +2,18 @@
 **  Windstille - A Sci-Fi Action-Adventure Game
 **  Copyright (C) 2005 Ingo Ruhnke <grumbel at gmx.de>
 **
-**  This program is free software; you can redistribute it and/or
-**  modify it under the terms of the GNU General Public License
-**  as published by the Free Software Foundation; either version 2
-**  of the License, or (at your option) any later version.
-**
+**  This program is free software: you can redistribute it and/or modify
+**  it under the terms of the GNU General Public License as published by
+**  the Free Software Foundation, either version 3 of the License, or
+**  (at your option) any later version.
+**  
 **  This program is distributed in the hope that it will be useful,
 **  but WITHOUT ANY WARRANTY; without even the implied warranty of
 **  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 **  GNU General Public License for more details.
-** 
+**  
 **  You should have received a copy of the GNU General Public License
-**  along with this program; if not, write to the Free Software
-**  Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA.
+**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
 #include <assert.h>

Modified: trunk/windstille/src/objects/bomb.cpp
===================================================================
--- trunk/windstille/src/objects/bomb.cpp	2009-02-10 14:28:05 UTC (rev 2429)
+++ trunk/windstille/src/objects/bomb.cpp	2009-02-10 14:32:10 UTC (rev 2430)
@@ -2,19 +2,18 @@
 **  Windstille - A Sci-Fi Action-Adventure Game
 **  Copyright (C) 2005 Ingo Ruhnke <grumbel at gmx.de>
 **
-**  This program is free software; you can redistribute it and/or
-**  modify it under the terms of the GNU General Public License
-**  as published by the Free Software Foundation; either version 2
-**  of the License, or (at your option) any later version.
-**
+**  This program is free software: you can redistribute it and/or modify
+**  it under the terms of the GNU General Public License as published by
+**  the Free Software Foundation, either version 3 of the License, or
+**  (at your option) any later version.
+**  
 **  This program is distributed in the hope that it will be useful,
 **  but WITHOUT ANY WARRANTY; without even the implied warranty of
 **  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 **  GNU General Public License for more details.
-** 
+**  
 **  You should have received a copy of the GNU General Public License
-**  along with this program; if not, write to the Free Software
-**  Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA.
+**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
 #include "globals.hpp"

Modified: trunk/windstille/src/objects/bomb.hpp
===================================================================
--- trunk/windstille/src/objects/bomb.hpp	2009-02-10 14:28:05 UTC (rev 2429)
+++ trunk/windstille/src/objects/bomb.hpp	2009-02-10 14:32:10 UTC (rev 2430)
@@ -2,19 +2,18 @@
 **  Windstille - A Sci-Fi Action-Adventure Game
 **  Copyright (C) 2005 Ingo Ruhnke <grumbel at gmx.de>
 **
-**  This program is free software; you can redistribute it and/or
-**  modify it under the terms of the GNU General Public License
-**  as published by the Free Software Foundation; either version 2
-**  of the License, or (at your option) any later version.
-**
+**  This program is free software: you can redistribute it and/or modify
+**  it under the terms of the GNU General Public License as published by
+**  the Free Software Foundation, either version 3 of the License, or
+**  (at your option) any later version.
+**  
 **  This program is distributed in the hope that it will be useful,
 **  but WITHOUT ANY WARRANTY; without even the implied warranty of
 **  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 **  GNU General Public License for more details.
-** 
+**  
 **  You should have received a copy of the GNU General Public License
-**  along with this program; if not, write to the Free Software
-**  Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA.
+**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
 #ifndef HEADER_BOMB_HXX

Modified: trunk/windstille/src/objects/hedgehog.cpp
===================================================================
--- trunk/windstille/src/objects/hedgehog.cpp	2009-02-10 14:28:05 UTC (rev 2429)
+++ trunk/windstille/src/objects/hedgehog.cpp	2009-02-10 14:32:10 UTC (rev 2430)
@@ -2,19 +2,18 @@
 **  Windstille - A Sci-Fi Action-Adventure Game
 **  Copyright (C) 2005 Ingo Ruhnke <grumbel at gmx.de>
 **
-**  This program is free software; you can redistribute it and/or
-**  modify it under the terms of the GNU General Public License
-**  as published by the Free Software Foundation; either version 2
-**  of the License, or (at your option) any later version.
-**
+**  This program is free software: you can redistribute it and/or modify
+**  it under the terms of the GNU General Public License as published by
+**  the Free Software Foundation, either version 3 of the License, or
+**  (at your option) any later version.
+**  
 **  This program is distributed in the hope that it will be useful,
 **  but WITHOUT ANY WARRANTY; without even the implied warranty of
 **  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 **  GNU General Public License for more details.
-** 
+**  
 **  You should have received a copy of the GNU General Public License
-**  along with this program; if not, write to the Free Software
-**  Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA.
+**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
 #include "globals.hpp"

Modified: trunk/windstille/src/objects/hedgehog.hpp
===================================================================
--- trunk/windstille/src/objects/hedgehog.hpp	2009-02-10 14:28:05 UTC (rev 2429)
+++ trunk/windstille/src/objects/hedgehog.hpp	2009-02-10 14:32:10 UTC (rev 2430)
@@ -2,19 +2,18 @@
 **  Windstille - A Sci-Fi Action-Adventure Game
 **  Copyright (C) 2005 Ingo Ruhnke <grumbel at gmx.de>
 **
-**  This program is free software; you can redistribute it and/or
-**  modify it under the terms of the GNU General Public License
-**  as published by the Free Software Foundation; either version 2
-**  of the License, or (at your option) any later version.
-**
+**  This program is free software: you can redistribute it and/or modify
+**  it under the terms of the GNU General Public License as published by
+**  the Free Software Foundation, either version 3 of the License, or
+**  (at your option) any later version.
+**  
 **  This program is distributed in the hope that it will be useful,
 **  but WITHOUT ANY WARRANTY; without even the implied warranty of
 **  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 **  GNU General Public License for more details.
-** 
+**  
 **  You should have received a copy of the GNU General Public License
-**  along with this program; if not, write to the Free Software
-**  Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA.
+**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
 #ifndef HEADER_HEDGEHOG_HXX

Modified: trunk/windstille/src/objects/spider_mine.cpp
===================================================================
--- trunk/windstille/src/objects/spider_mine.cpp	2009-02-10 14:28:05 UTC (rev 2429)
+++ trunk/windstille/src/objects/spider_mine.cpp	2009-02-10 14:32:10 UTC (rev 2430)
@@ -2,19 +2,18 @@
 **  Windstille - A Sci-Fi Action-Adventure Game
 **  Copyright (C) 2005 Ingo Ruhnke <grumbel at gmx.de>
 **
-**  This program is free software; you can redistribute it and/or
-**  modify it under the terms of the GNU General Public License
-**  as published by the Free Software Foundation; either version 2
-**  of the License, or (at your option) any later version.
-**
+**  This program is free software: you can redistribute it and/or modify
+**  it under the terms of the GNU General Public License as published by
+**  the Free Software Foundation, either version 3 of the License, or
+**  (at your option) any later version.
+**  
 **  This program is distributed in the hope that it will be useful,
 **  but WITHOUT ANY WARRANTY; without even the implied warranty of
 **  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 **  GNU General Public License for more details.
-** 
+**  
 **  You should have received a copy of the GNU General Public License
-**  along with this program; if not, write to the Free Software
-**  Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA.
+**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
 #include <config.h>

Modified: trunk/windstille/src/objects/spider_mine.hpp
===================================================================
--- trunk/windstille/src/objects/spider_mine.hpp	2009-02-10 14:28:05 UTC (rev 2429)
+++ trunk/windstille/src/objects/spider_mine.hpp	2009-02-10 14:32:10 UTC (rev 2430)
@@ -2,19 +2,18 @@
 **  Windstille - A Sci-Fi Action-Adventure Game
 **  Copyright (C) 2005 Ingo Ruhnke <grumbel at gmx.de>
 **
-**  This program is free software; you can redistribute it and/or
-**  modify it under the terms of the GNU General Public License
-**  as published by the Free Software Foundation; either version 2
-**  of the License, or (at your option) any later version.
-**
+**  This program is free software: you can redistribute it and/or modify
+**  it under the terms of the GNU General Public License as published by
+**  the Free Software Foundation, either version 3 of the License, or
+**  (at your option) any later version.
+**  
 **  This program is distributed in the hope that it will be useful,
 **  but WITHOUT ANY WARRANTY; without even the implied warranty of
 **  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 **  GNU General Public License for more details.
-** 
+**  
 **  You should have received a copy of the GNU General Public License
-**  along with this program; if not, write to the Free Software
-**  Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA.
+**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
 #ifndef HEADER_SPIDER_HPP



From grumbel at mail.berlios.de  Tue Feb 10 15:35:30 2009
From: grumbel at mail.berlios.de (grumbel at BerliOS)
Date: Tue, 10 Feb 2009 15:35:30 +0100
Subject: [Windstille-commit] r2431 - trunk/windstille/src/collision
Message-ID: <200902101435.n1AEZUTx004285@sheep.berlios.de>

Author: grumbel
Date: 2009-02-10 15:35:30 +0100 (Tue, 10 Feb 2009)
New Revision: 2431

Modified:
   trunk/windstille/src/collision/collision_data.hpp
   trunk/windstille/src/collision/collision_engine.cpp
   trunk/windstille/src/collision/collision_engine.hpp
   trunk/windstille/src/collision/collision_object.cpp
   trunk/windstille/src/collision/collision_object.hpp
   trunk/windstille/src/collision/collision_test.cpp
   trunk/windstille/src/collision/collision_test.hpp
Log:
Switched to GPLv3, cleaned up copyright header

Modified: trunk/windstille/src/collision/collision_data.hpp
===================================================================
--- trunk/windstille/src/collision/collision_data.hpp	2009-02-10 14:32:10 UTC (rev 2430)
+++ trunk/windstille/src/collision/collision_data.hpp	2009-02-10 14:35:30 UTC (rev 2431)
@@ -1,23 +1,21 @@
 /*
- * Copyright (c) 2005 by the Windstille team. All rights reserved.
- *
- * collision.hxx
- * by David Kamphausen (david.kamphausen at web.de)
- *    Ingo Ruhnke
- *
- * The "Windstille" project, including all files needed to compile it,
- * is free software; you can redistribute it and/or use it and/or modify it
- * under the terms of the GNU General Public License as published
- * by the Free Software Foundation; either version 2 of the License,
- * or (at your option) any later version.
- *
- * This program is distributed in the hope that it will be useful,
- * but WITHOUT ANY WARRANTY; without even the implied warranty of
- * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.
- *
- * You should have received a copy of the GNU General Public
- * License along with this program.
- */
+**  Windstille - A Sci-Fi Action-Adventure Game
+**  Copyright (C) 2005 David Kamphausen <david.kamphausen at web.de>,
+**                     Ingo Ruhnke <grumbel at gmx.de>
+**
+**  This program is free software: you can redistribute it and/or modify
+**  it under the terms of the GNU General Public License as published by
+**  the Free Software Foundation, either version 3 of the License, or
+**  (at your option) any later version.
+**  
+**  This program is distributed in the hope that it will be useful,
+**  but WITHOUT ANY WARRANTY; without even the implied warranty of
+**  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+**  GNU General Public License for more details.
+**  
+**  You should have received a copy of the GNU General Public License
+**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
+*/
 
 #ifndef HEADER_COLLISION_DATA_HXX
 #define HEADER_COLLISION_DATA_HXX

Modified: trunk/windstille/src/collision/collision_engine.cpp
===================================================================
--- trunk/windstille/src/collision/collision_engine.cpp	2009-02-10 14:32:10 UTC (rev 2430)
+++ trunk/windstille/src/collision/collision_engine.cpp	2009-02-10 14:35:30 UTC (rev 2431)
@@ -1,23 +1,21 @@
 /*
- * Copyright (c) 2005 by the Windstille team. All rights reserved.
- *
- * collision_engine.hxx
- * by David Kamphausen (david.kamphausen at web.de)
- *    Ingo Ruhnke
- *
- * The "Windstille" project, including all files needed to compile it,
- * is free software; you can redistribute it and/or use it and/or modify it
- * under the terms of the GNU General Public License as published
- * by the Free Software Foundation; either version 2 of the License,
- * or (at your option) any later version.
- *
- * This program is distributed in the hope that it will be useful,
- * but WITHOUT ANY WARRANTY; without even the implied warranty of
- * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.
- *
- * You should have received a copy of the GNU General Public
- * License along with this program.
- */
+**  Windstille - A Sci-Fi Action-Adventure Game
+**  Copyright (C) 2005 David Kamphausen <david.kamphausen at web.de>,
+**                     Ingo Ruhnke <grumbel at gmx.de>
+**
+**  This program is free software: you can redistribute it and/or modify
+**  it under the terms of the GNU General Public License as published by
+**  the Free Software Foundation, either version 3 of the License, or
+**  (at your option) any later version.
+**  
+**  This program is distributed in the hope that it will be useful,
+**  but WITHOUT ANY WARRANTY; without even the implied warranty of
+**  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+**  GNU General Public License for more details.
+**  
+**  You should have received a copy of the GNU General Public License
+**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
+*/
 
 #include "collision_test.hpp"
 #include "collision_engine.hpp"

Modified: trunk/windstille/src/collision/collision_engine.hpp
===================================================================
--- trunk/windstille/src/collision/collision_engine.hpp	2009-02-10 14:32:10 UTC (rev 2430)
+++ trunk/windstille/src/collision/collision_engine.hpp	2009-02-10 14:35:30 UTC (rev 2431)
@@ -1,23 +1,21 @@
 /*
- * Copyright (c) 2005 by the Windstille team. All rights reserved.
- *
- * collision_engine.hxx
- * by David Kamphausen (david.kamphausen at web.de)
- *    Ingo Ruhnke
- *
- * The "Windstille" project, including all files needed to compile it,
- * is free software; you can redistribute it and/or use it and/or modify it
- * under the terms of the GNU General Public License as published
- * by the Free Software Foundation; either version 2 of the License,
- * or (at your option) any later version.
- *
- * This program is distributed in the hope that it will be useful,
- * but WITHOUT ANY WARRANTY; without even the implied warranty of
- * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.
- *
- * You should have received a copy of the GNU General Public
- * License along with this program.
- */
+**  Windstille - A Sci-Fi Action-Adventure Game
+**  Copyright (C) 2005 David Kamphausen <david.kamphausen at web.de>,
+**                     Ingo Ruhnke <grumbel at gmx.de>
+**
+**  This program is free software: you can redistribute it and/or modify
+**  it under the terms of the GNU General Public License as published by
+**  the Free Software Foundation, either version 3 of the License, or
+**  (at your option) any later version.
+**  
+**  This program is distributed in the hope that it will be useful,
+**  but WITHOUT ANY WARRANTY; without even the implied warranty of
+**  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+**  GNU General Public License for more details.
+**  
+**  You should have received a copy of the GNU General Public License
+**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
+*/
 
 #ifndef HEADER_COLLISION_ENGINE_HPP
 #define HEADER_COLLISION_ENGINE_HPP

Modified: trunk/windstille/src/collision/collision_object.cpp
===================================================================
--- trunk/windstille/src/collision/collision_object.cpp	2009-02-10 14:32:10 UTC (rev 2430)
+++ trunk/windstille/src/collision/collision_object.cpp	2009-02-10 14:35:30 UTC (rev 2431)
@@ -1,23 +1,21 @@
 /*
- * Copyright (c) 2005 by the Windstille team. All rights reserved.
- *
- * collision_object.cxx
- * by David Kamphausen (david.kamphausen at web.de)
- *    Ingo Ruhnke
- *
- * The "Windstille" project, including all files needed to compile it,
- * is free software; you can redistribute it and/or use it and/or modify it
- * under the terms of the GNU General Public License as published
- * by the Free Software Foundation; either version 2 of the License,
- * or (at your option) any later version.
- *
- * This program is distributed in the hope that it will be useful,
- * but WITHOUT ANY WARRANTY; without even the implied warranty of
- * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.
- *
- * You should have received a copy of the GNU General Public
- * License along with this program.
- */
+**  Windstille - A Sci-Fi Action-Adventure Game
+**  Copyright (C) 2005 David Kamphausen <david.kamphausen at web.de>,
+**                     Ingo Ruhnke <grumbel at gmx.de>
+**
+**  This program is free software: you can redistribute it and/or modify
+**  it under the terms of the GNU General Public License as published by
+**  the Free Software Foundation, either version 3 of the License, or
+**  (at your option) any later version.
+**  
+**  This program is distributed in the hope that it will be useful,
+**  but WITHOUT ANY WARRANTY; without even the implied warranty of
+**  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+**  GNU General Public License for more details.
+**  
+**  You should have received a copy of the GNU General Public License
+**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
+*/
 
 #include <assert.h>
 

Modified: trunk/windstille/src/collision/collision_object.hpp
===================================================================
--- trunk/windstille/src/collision/collision_object.hpp	2009-02-10 14:32:10 UTC (rev 2430)
+++ trunk/windstille/src/collision/collision_object.hpp	2009-02-10 14:35:30 UTC (rev 2431)
@@ -1,23 +1,21 @@
 /*
- * Copyright (c) 2005 by the Windstille team. All rights reserved.
- *
- * collision_object.hxx
- * by David Kamphausen (david.kamphausen at web.de)
- *    Ingo Ruhnke
- *
- * The "Windstille" project, including all files needed to compile it,
- * is free software; you can redistribute it and/or use it and/or modify it
- * under the terms of the GNU General Public License as published
- * by the Free Software Foundation; either version 2 of the License,
- * or (at your option) any later version.
- *
- * This program is distributed in the hope that it will be useful,
- * but WITHOUT ANY WARRANTY; without even the implied warranty of
- * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.
- *
- * You should have received a copy of the GNU General Public
- * License along with this program.
- */
+**  Windstille - A Sci-Fi Action-Adventure Game
+**  Copyright (C) 2005 David Kamphausen <david.kamphausen at web.de>,
+**                     Ingo Ruhnke <grumbel at gmx.de>
+**
+**  This program is free software: you can redistribute it and/or modify
+**  it under the terms of the GNU General Public License as published by
+**  the Free Software Foundation, either version 3 of the License, or
+**  (at your option) any later version.
+**  
+**  This program is distributed in the hope that it will be useful,
+**  but WITHOUT ANY WARRANTY; without even the implied warranty of
+**  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+**  GNU General Public License for more details.
+**  
+**  You should have received a copy of the GNU General Public License
+**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
+*/
 
 #ifndef HEADER_COLLISION_OBJECT_HPP
 #define HEADER_COLLISION_OBJECT_HPP

Modified: trunk/windstille/src/collision/collision_test.cpp
===================================================================
--- trunk/windstille/src/collision/collision_test.cpp	2009-02-10 14:32:10 UTC (rev 2430)
+++ trunk/windstille/src/collision/collision_test.cpp	2009-02-10 14:35:30 UTC (rev 2431)
@@ -1,23 +1,21 @@
 /*
- * Copyright (c) 2005 by the Windstille team. All rights reserved.
- *
- * collision_test.cxx
- * by David Kamphausen (david.kamphausen at web.de)
- *    Ingo Ruhnke
- *
- * The "Windstille" project, including all files needed to compile it,
- * is free software; you can redistribute it and/or use it and/or modify it
- * under the terms of the GNU General Public License as published
- * by the Free Software Foundation; either version 2 of the License,
- * or (at your option) any later version.
- *
- * This program is distributed in the hope that it will be useful,
- * but WITHOUT ANY WARRANTY; without even the implied warranty of
- * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.
- *
- * You should have received a copy of the GNU General Public
- * License along with this program.
- */
+**  Windstille - A Sci-Fi Action-Adventure Game
+**  Copyright (C) 2005 David Kamphausen <david.kamphausen at web.de>,
+**                     Ingo Ruhnke <grumbel at gmx.de>
+**
+**  This program is free software: you can redistribute it and/or modify
+**  it under the terms of the GNU General Public License as published by
+**  the Free Software Foundation, either version 3 of the License, or
+**  (at your option) any later version.
+**  
+**  This program is distributed in the hope that it will be useful,
+**  but WITHOUT ANY WARRANTY; without even the implied warranty of
+**  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+**  GNU General Public License for more details.
+**  
+**  You should have received a copy of the GNU General Public License
+**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
+*/
 
 #include "collision_test.hpp"
 #include <assert.h>

Modified: trunk/windstille/src/collision/collision_test.hpp
===================================================================
--- trunk/windstille/src/collision/collision_test.hpp	2009-02-10 14:32:10 UTC (rev 2430)
+++ trunk/windstille/src/collision/collision_test.hpp	2009-02-10 14:35:30 UTC (rev 2431)
@@ -1,23 +1,21 @@
 /*
- * Copyright (c) 2005 by the Windstille team. All rights reserved.
- *
- * collision_test.hxx
- * by David Kamphausen (david.kamphausen at web.de)
- *    Ingo Ruhnke
- *
- * The "Windstille" project, including all files needed to compile it,
- * is free software; you can redistribute it and/or use it and/or modify it
- * under the terms of the GNU General Public License as published
- * by the Free Software Foundation; either version 2 of the License,
- * or (at your option) any later version.
- *
- * This program is distributed in the hope that it will be useful,
- * but WITHOUT ANY WARRANTY; without even the implied warranty of
- * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.
- *
- * You should have received a copy of the GNU General Public
- * License along with this program.
- */
+**  Windstille - A Sci-Fi Action-Adventure Game
+**  Copyright (C) 2005 David Kamphausen <david.kamphausen at web.de>,
+**                     Ingo Ruhnke <grumbel at gmx.de>
+**
+**  This program is free software: you can redistribute it and/or modify
+**  it under the terms of the GNU General Public License as published by
+**  the Free Software Foundation, either version 3 of the License, or
+**  (at your option) any later version.
+**  
+**  This program is distributed in the hope that it will be useful,
+**  but WITHOUT ANY WARRANTY; without even the implied warranty of
+**  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+**  GNU General Public License for more details.
+**  
+**  You should have received a copy of the GNU General Public License
+**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
+*/
 
 #ifndef HEADER_COLLTEST_HXX
 #define HEADER_COLLTEST_HXX



From grumbel at mail.berlios.de  Tue Feb 10 15:44:57 2009
From: grumbel at mail.berlios.de (grumbel at BerliOS)
Date: Tue, 10 Feb 2009 15:44:57 +0100
Subject: [Windstille-commit] r2432 - in trunk/windstille/src: . lisp
	scripting
Message-ID: <200902101444.n1AEivpA005459@sheep.berlios.de>

Author: grumbel
Date: 2009-02-10 15:44:55 +0100 (Tue, 10 Feb 2009)
New Revision: 2432

Removed:
   trunk/windstille/src/tinygettext/
Modified:
   trunk/windstille/src/SConscript
   trunk/windstille/src/config.cpp
   trunk/windstille/src/lisp/lexer.cpp
   trunk/windstille/src/lisp/lisp.cpp
   trunk/windstille/src/lisp/parser.cpp
   trunk/windstille/src/lisp/parser.hpp
   trunk/windstille/src/scripting/wrapper.cpp
   trunk/windstille/src/scripting/wrapper.hpp
   trunk/windstille/src/windstille_main.cpp
Log:
Removed tinygettext

Modified: trunk/windstille/src/SConscript
===================================================================
--- trunk/windstille/src/SConscript	2009-02-10 14:35:30 UTC (rev 2431)
+++ trunk/windstille/src/SConscript	2009-02-10 14:44:55 UTC (rev 2432)
@@ -201,9 +201,7 @@
 'sprite2d/sprite.cpp',
 'sprite3d/data.cpp',
 'sprite3d/manager.cpp',
-'sprite3d/sprite3d.cpp',
-'tinygettext/gettext.cpp',
-'tinygettext/tinygettext.cpp'
+'sprite3d/sprite3d.cpp'
 ])
 
 # EOF #

Modified: trunk/windstille/src/config.cpp
===================================================================
--- trunk/windstille/src/config.cpp	2009-02-10 14:35:30 UTC (rev 2431)
+++ trunk/windstille/src/config.cpp	2009-02-10 14:44:55 UTC (rev 2432)
@@ -22,11 +22,12 @@
 #include <memory>
 #include <iostream>
 #include "config.hpp"
-#include "tinygettext/gettext.hpp"
 #include "sexpr_file_reader.hpp"
 #include "command_line.hpp"
 #include "globals.hpp"
 
+#define _(A) A
+
 std::vector<std::string> arg_files;
 
 Config config;

Modified: trunk/windstille/src/lisp/lexer.cpp
===================================================================
--- trunk/windstille/src/lisp/lexer.cpp	2009-02-10 14:35:30 UTC (rev 2431)
+++ trunk/windstille/src/lisp/lexer.cpp	2009-02-10 14:44:55 UTC (rev 2432)
@@ -21,7 +21,7 @@
 #include <sstream>
 #include <stdexcept>
 #include <iostream>
-
+#include <string.h>
 #include "lexer.hpp"
 
 namespace lisp

Modified: trunk/windstille/src/lisp/lisp.cpp
===================================================================
--- trunk/windstille/src/lisp/lisp.cpp	2009-02-10 14:35:30 UTC (rev 2431)
+++ trunk/windstille/src/lisp/lisp.cpp	2009-02-10 14:44:55 UTC (rev 2432)
@@ -17,6 +17,8 @@
 //  You should have received a copy of the GNU General Public License
 //  along with this program; if not, write to the Free Software
 //  Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA.
+
+#include <string.h>
 #include <config.h>
 #include <assert.h>
 #include "lisp.hpp"

Modified: trunk/windstille/src/lisp/parser.cpp
===================================================================
--- trunk/windstille/src/lisp/parser.cpp	2009-02-10 14:35:30 UTC (rev 2431)
+++ trunk/windstille/src/lisp/parser.cpp	2009-02-10 14:44:55 UTC (rev 2432)
@@ -19,13 +19,14 @@
 //  Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA.
 #include <config.h>
 
+#include <memory>
+#include <string.h>
 #include <sstream>
 #include <cassert>
 #include <iostream>
 #include <string>
 #include <exception>
 
-#include "tinygettext/tinygettext.hpp"
 #include "physfs/physfs_stream.hpp"
 #include "parser.hpp"
 #include "lisp.hpp"
@@ -56,16 +57,13 @@
 };
 
 Parser::Parser()
-  : lexer(0), dictionary_manager(0), dictionary(0)
+  : lexer(0)
 {
-  dictionary_manager = new tinygettext::DictionaryManager();
-  dictionary_manager->set_charset("UTF-8");
 }
 
 Parser::~Parser()
 {
   delete lexer;
-  delete dictionary_manager;
 }
 
 static std::string dirname(std::string filename)
@@ -96,8 +94,6 @@
   std::auto_ptr<Parser> parser (new Parser());
 
   parser->filename = filename;
-  parser->dictionary_manager->add_directory(dirname(filename));
-  parser->dictionary = & (parser->dictionary_manager->get_dictionary());
   parser->lexer = new Lexer(stream);
 
   parser->token = parser->lexer->getNextToken();
@@ -131,13 +127,9 @@
             token = lexer->getNextToken();
             if(token != Lexer::TOKEN_STRING)
               throw ParseError(this, "Expected string after '(_' sequence");
-            if(dictionary) {
-              std::string translation = dictionary->translate(lexer->getString());
-              entries.push_back(new Lisp(Lisp::TYPE_STRING, translation));
-            } else {
-              entries.push_back(new Lisp(Lisp::TYPE_STRING, lexer->getString()));
-            }
             
+            entries.push_back(new Lisp(Lisp::TYPE_STRING, lexer->getString()));
+            
             token = lexer->getNextToken();
             if(token != Lexer::TOKEN_CLOSE_PAREN)
               throw ParseError(this, "Expected ')' after '(_ ""' sequence");

Modified: trunk/windstille/src/lisp/parser.hpp
===================================================================
--- trunk/windstille/src/lisp/parser.hpp	2009-02-10 14:35:30 UTC (rev 2431)
+++ trunk/windstille/src/lisp/parser.hpp	2009-02-10 14:44:55 UTC (rev 2432)
@@ -22,11 +22,6 @@
 #include <string>
 #include "lexer.hpp"
 
-namespace tinygettext {
-class Dictionary;
-class DictionaryManager;
-}
-
 namespace lisp
 {
 
@@ -48,8 +43,6 @@
   
   std::string filename;
   Lexer* lexer;
-  tinygettext::DictionaryManager* dictionary_manager;
-  tinygettext::Dictionary* dictionary;
   Lexer::TokenType token;
 };
 

Modified: trunk/windstille/src/scripting/wrapper.cpp
===================================================================
--- trunk/windstille/src/scripting/wrapper.cpp	2009-02-10 14:35:30 UTC (rev 2431)
+++ trunk/windstille/src/scripting/wrapper.cpp	2009-02-10 14:44:55 UTC (rev 2432)
@@ -33,13 +33,13 @@
     return SQ_ERROR;
   }
   Scripting::GameObject* _this = reinterpret_cast<Scripting::GameObject*> (data);
-  
+
   try {
     const std::string& return_value = _this->get_name();
-  
+
     sq_pushstring(vm, return_value.c_str(), return_value.size());
     return 1;
-  
+
   } catch(std::exception& e) {
     sq_throwerror(vm, e.what());
     return SQ_ERROR;
@@ -47,7 +47,7 @@
     sq_throwerror(vm, _SC("Unexpected exception while executing function 'get_name'"));
     return SQ_ERROR;
   }
-  
+
 }
 
 static SQInteger GameObject_remove_wrapper(HSQUIRRELVM vm)
@@ -58,12 +58,12 @@
     return SQ_ERROR;
   }
   Scripting::GameObject* _this = reinterpret_cast<Scripting::GameObject*> (data);
-  
+
   try {
     _this->remove();
-  
+
     return 0;
-  
+
   } catch(std::exception& e) {
     sq_throwerror(vm, e.what());
     return SQ_ERROR;
@@ -71,7 +71,7 @@
     sq_throwerror(vm, _SC("Unexpected exception while executing function 'remove'"));
     return SQ_ERROR;
   }
-  
+
 }
 
 static SQInteger GameObject_set_active_wrapper(HSQUIRRELVM vm)
@@ -87,12 +87,12 @@
     sq_throwerror(vm, _SC("Argument 1 not a bool"));
     return SQ_ERROR;
   }
-  
+
   try {
     _this->set_active(arg0 == SQTrue);
-  
+
     return 0;
-  
+
   } catch(std::exception& e) {
     sq_throwerror(vm, e.what());
     return SQ_ERROR;
@@ -100,7 +100,7 @@
     sq_throwerror(vm, _SC("Unexpected exception while executing function 'set_active'"));
     return SQ_ERROR;
   }
-  
+
 }
 
 static SQInteger GameObject_set_parent_wrapper(HSQUIRRELVM vm)
@@ -116,12 +116,12 @@
     sq_throwerror(vm, _SC("Argument 1 not a string"));
     return SQ_ERROR;
   }
-  
+
   try {
     _this->set_parent(arg0);
-  
+
     return 0;
-  
+
   } catch(std::exception& e) {
     sq_throwerror(vm, e.what());
     return SQ_ERROR;
@@ -129,7 +129,7 @@
     sq_throwerror(vm, _SC("Unexpected exception while executing function 'set_parent'"));
     return SQ_ERROR;
   }
-  
+
 }
 
 static SQInteger TestObject_release_hook(SQUserPointer ptr, SQInteger )
@@ -152,12 +152,12 @@
     sq_throwerror(vm, _SC("Argument 1 not a string"));
     return SQ_ERROR;
   }
-  
+
   try {
     _this->set_sprite(arg0);
-  
+
     return 0;
-  
+
   } catch(std::exception& e) {
     sq_throwerror(vm, e.what());
     return SQ_ERROR;
@@ -165,7 +165,7 @@
     sq_throwerror(vm, _SC("Unexpected exception while executing function 'set_sprite'"));
     return SQ_ERROR;
   }
-  
+
 }
 
 static SQInteger TestObject_set_action_wrapper(HSQUIRRELVM vm)
@@ -181,12 +181,12 @@
     sq_throwerror(vm, _SC("Argument 1 not a string"));
     return SQ_ERROR;
   }
-  
+
   try {
     _this->set_action(arg0);
-  
+
     return 0;
-  
+
   } catch(std::exception& e) {
     sq_throwerror(vm, e.what());
     return SQ_ERROR;
@@ -194,7 +194,7 @@
     sq_throwerror(vm, _SC("Unexpected exception while executing function 'set_action'"));
     return SQ_ERROR;
   }
-  
+
 }
 
 static SQInteger TestObject_set_pos_wrapper(HSQUIRRELVM vm)
@@ -215,12 +215,12 @@
     sq_throwerror(vm, _SC("Argument 2 not a float"));
     return SQ_ERROR;
   }
-  
+
   try {
     _this->set_pos(static_cast<float> (arg0), static_cast<float> (arg1));
-  
+
     return 0;
-  
+
   } catch(std::exception& e) {
     sq_throwerror(vm, e.what());
     return SQ_ERROR;
@@ -228,7 +228,7 @@
     sq_throwerror(vm, _SC("Unexpected exception while executing function 'set_pos'"));
     return SQ_ERROR;
   }
-  
+
 }
 
 static SQInteger TestObject_set_vflip_wrapper(HSQUIRRELVM vm)
@@ -244,12 +244,12 @@
     sq_throwerror(vm, _SC("Argument 1 not a bool"));
     return SQ_ERROR;
   }
-  
+
   try {
     _this->set_vflip(arg0 == SQTrue);
-  
+
     return 0;
-  
+
   } catch(std::exception& e) {
     sq_throwerror(vm, e.what());
     return SQ_ERROR;
@@ -257,7 +257,7 @@
     sq_throwerror(vm, _SC("Unexpected exception while executing function 'set_vflip'"));
     return SQ_ERROR;
   }
-  
+
 }
 
 static SQInteger TestObject_attach_wrapper(HSQUIRRELVM vm)
@@ -278,12 +278,12 @@
     sq_throwerror(vm, _SC("Argument 2 not a string"));
     return SQ_ERROR;
   }
-  
+
   try {
     _this->attach(arg0, arg1);
-  
+
     return 0;
-  
+
   } catch(std::exception& e) {
     sq_throwerror(vm, e.what());
     return SQ_ERROR;
@@ -291,7 +291,7 @@
     sq_throwerror(vm, _SC("Unexpected exception while executing function 'attach'"));
     return SQ_ERROR;
   }
-  
+
 }
 
 static SQInteger Player_release_hook(SQUserPointer ptr, SQInteger )
@@ -309,12 +309,12 @@
     return SQ_ERROR;
   }
   Scripting::Player* _this = reinterpret_cast<Scripting::Player*> (data);
-  
+
   try {
     _this->start_listening();
-  
+
     return 0;
-  
+
   } catch(std::exception& e) {
     sq_throwerror(vm, e.what());
     return SQ_ERROR;
@@ -322,7 +322,7 @@
     sq_throwerror(vm, _SC("Unexpected exception while executing function 'start_listening'"));
     return SQ_ERROR;
   }
-  
+
 }
 
 static SQInteger Player_stop_listening_wrapper(HSQUIRRELVM vm)
@@ -333,12 +333,12 @@
     return SQ_ERROR;
   }
   Scripting::Player* _this = reinterpret_cast<Scripting::Player*> (data);
-  
+
   try {
     _this->stop_listening();
-  
+
     return 0;
-  
+
   } catch(std::exception& e) {
     sq_throwerror(vm, e.what());
     return SQ_ERROR;
@@ -346,7 +346,7 @@
     sq_throwerror(vm, _SC("Unexpected exception while executing function 'stop_listening'"));
     return SQ_ERROR;
   }
-  
+
 }
 
 static SQInteger ScriptableObject_release_hook(SQUserPointer ptr, SQInteger )
@@ -384,12 +384,12 @@
     sq_throwerror(vm, _SC("Argument 4 not a float"));
     return SQ_ERROR;
   }
-  
+
   try {
     _this->move_to(static_cast<float> (arg0), static_cast<float> (arg1), static_cast<float> (arg2), static_cast<float> (arg3));
-  
+
     return 0;
-  
+
   } catch(std::exception& e) {
     sq_throwerror(vm, e.what());
     return SQ_ERROR;
@@ -397,7 +397,7 @@
     sq_throwerror(vm, _SC("Unexpected exception while executing function 'move_to'"));
     return SQ_ERROR;
   }
-  
+
 }
 
 static SQInteger ScriptableObject_start_flash_wrapper(HSQUIRRELVM vm)
@@ -413,12 +413,12 @@
     sq_throwerror(vm, _SC("Argument 1 not a float"));
     return SQ_ERROR;
   }
-  
+
   try {
     _this->start_flash(static_cast<float> (arg0));
-  
+
     return 0;
-  
+
   } catch(std::exception& e) {
     sq_throwerror(vm, e.what());
     return SQ_ERROR;
@@ -426,7 +426,7 @@
     sq_throwerror(vm, _SC("Unexpected exception while executing function 'start_flash'"));
     return SQ_ERROR;
   }
-  
+
 }
 
 static SQInteger set_sector_wrapper(HSQUIRRELVM vm)
@@ -436,12 +436,12 @@
     sq_throwerror(vm, _SC("Argument 1 not a string"));
     return SQ_ERROR;
   }
-  
+
   try {
     Scripting::set_sector(arg0);
-  
+
     return 0;
-  
+
   } catch(std::exception& e) {
     sq_throwerror(vm, e.what());
     return SQ_ERROR;
@@ -449,7 +449,7 @@
     sq_throwerror(vm, _SC("Unexpected exception while executing function 'set_sector'"));
     return SQ_ERROR;
   }
-  
+
 }
 
 static SQInteger play_music_wrapper(HSQUIRRELVM vm)
@@ -459,12 +459,12 @@
     sq_throwerror(vm, _SC("Argument 1 not a string"));
     return SQ_ERROR;
   }
-  
+
   try {
     Scripting::play_music(arg0);
-  
+
     return 0;
-  
+
   } catch(std::exception& e) {
     sq_throwerror(vm, e.what());
     return SQ_ERROR;
@@ -472,7 +472,7 @@
     sq_throwerror(vm, _SC("Unexpected exception while executing function 'play_music'"));
     return SQ_ERROR;
   }
-  
+
 }
 
 static SQInteger stop_music_wrapper(HSQUIRRELVM vm)
@@ -482,12 +482,12 @@
     sq_throwerror(vm, _SC("Argument 1 not a float"));
     return SQ_ERROR;
   }
-  
+
   try {
     Scripting::stop_music(static_cast<float> (arg0));
-  
+
     return 0;
-  
+
   } catch(std::exception& e) {
     sq_throwerror(vm, e.what());
     return SQ_ERROR;
@@ -495,7 +495,7 @@
     sq_throwerror(vm, _SC("Unexpected exception while executing function 'stop_music'"));
     return SQ_ERROR;
   }
-  
+
 }
 
 static SQInteger play_sound_wrapper(HSQUIRRELVM vm)
@@ -505,12 +505,12 @@
     sq_throwerror(vm, _SC("Argument 1 not a string"));
     return SQ_ERROR;
   }
-  
+
   try {
     Scripting::play_sound(arg0);
-  
+
     return 0;
-  
+
   } catch(std::exception& e) {
     sq_throwerror(vm, e.what());
     return SQ_ERROR;
@@ -518,7 +518,7 @@
     sq_throwerror(vm, _SC("Unexpected exception while executing function 'play_sound'"));
     return SQ_ERROR;
   }
-  
+
 }
 
 static SQInteger caption_add_wrapper(HSQUIRRELVM vm)
@@ -533,12 +533,12 @@
     sq_throwerror(vm, _SC("Argument 2 not a string"));
     return SQ_ERROR;
   }
-  
+
   try {
     Scripting::caption_add(static_cast<int> (arg0), arg1);
-  
+
     return 0;
-  
+
   } catch(std::exception& e) {
     sq_throwerror(vm, e.what());
     return SQ_ERROR;
@@ -546,18 +546,18 @@
     sq_throwerror(vm, _SC("Unexpected exception while executing function 'caption_add'"));
     return SQ_ERROR;
   }
-  
+
 }
 
 static SQInteger caption_clear_wrapper(HSQUIRRELVM vm)
 {
   (void) vm;
-  
+
   try {
     Scripting::caption_clear();
-  
+
     return 0;
-  
+
   } catch(std::exception& e) {
     sq_throwerror(vm, e.what());
     return SQ_ERROR;
@@ -565,18 +565,18 @@
     sq_throwerror(vm, _SC("Unexpected exception while executing function 'caption_clear'"));
     return SQ_ERROR;
   }
-  
+
 }
 
 static SQInteger caption_end_wrapper(HSQUIRRELVM vm)
 {
   (void) vm;
-  
+
   try {
     Scripting::caption_end();
-  
+
     return 0;
-  
+
   } catch(std::exception& e) {
     sq_throwerror(vm, e.what());
     return SQ_ERROR;
@@ -584,7 +584,7 @@
     sq_throwerror(vm, _SC("Unexpected exception while executing function 'caption_end'"));
     return SQ_ERROR;
   }
-  
+
 }
 
 static SQInteger camera_set_active_wrapper(HSQUIRRELVM vm)
@@ -594,12 +594,12 @@
     sq_throwerror(vm, _SC("Argument 1 not a bool"));
     return SQ_ERROR;
   }
-  
+
   try {
     Scripting::camera_set_active(arg0 == SQTrue);
-  
+
     return 0;
-  
+
   } catch(std::exception& e) {
     sq_throwerror(vm, e.what());
     return SQ_ERROR;
@@ -607,18 +607,18 @@
     sq_throwerror(vm, _SC("Unexpected exception while executing function 'camera_set_active'"));
     return SQ_ERROR;
   }
-  
+
 }
 
 static SQInteger camera_continue_path_wrapper(HSQUIRRELVM vm)
 {
   (void) vm;
-  
+
   try {
     Scripting::camera_continue_path();
-  
+
     return 0;
-  
+
   } catch(std::exception& e) {
     sq_throwerror(vm, e.what());
     return SQ_ERROR;
@@ -626,18 +626,18 @@
     sq_throwerror(vm, _SC("Unexpected exception while executing function 'camera_continue_path'"));
     return SQ_ERROR;
   }
-  
+
 }
 
 static SQInteger camera_begin_path_wrapper(HSQUIRRELVM vm)
 {
   (void) vm;
-  
+
   try {
     Scripting::camera_begin_path();
-  
+
     return 0;
-  
+
   } catch(std::exception& e) {
     sq_throwerror(vm, e.what());
     return SQ_ERROR;
@@ -645,7 +645,7 @@
     sq_throwerror(vm, _SC("Unexpected exception while executing function 'camera_begin_path'"));
     return SQ_ERROR;
   }
-  
+
 }
 
 static SQInteger camera_add_point_wrapper(HSQUIRRELVM vm)
@@ -665,12 +665,12 @@
     sq_throwerror(vm, _SC("Argument 3 not a float"));
     return SQ_ERROR;
   }
-  
+
   try {
     Scripting::camera_add_point(static_cast<float> (arg0), static_cast<float> (arg1), static_cast<float> (arg2));
-  
+
     return 0;
-  
+
   } catch(std::exception& e) {
     sq_throwerror(vm, e.what());
     return SQ_ERROR;
@@ -678,18 +678,18 @@
     sq_throwerror(vm, _SC("Unexpected exception while executing function 'camera_add_point'"));
     return SQ_ERROR;
   }
-  
+
 }
 
 static SQInteger camera_end_path_wrapper(HSQUIRRELVM vm)
 {
   (void) vm;
-  
+
   try {
     Scripting::camera_end_path();
-  
+
     return 0;
-  
+
   } catch(std::exception& e) {
     sq_throwerror(vm, e.what());
     return SQ_ERROR;
@@ -697,7 +697,7 @@
     sq_throwerror(vm, _SC("Unexpected exception while executing function 'camera_end_path'"));
     return SQ_ERROR;
   }
-  
+
 }
 
 static SQInteger camera_set_pos_wrapper(HSQUIRRELVM vm)
@@ -712,12 +712,12 @@
     sq_throwerror(vm, _SC("Argument 2 not a float"));
     return SQ_ERROR;
   }
-  
+
   try {
     Scripting::camera_set_pos(static_cast<float> (arg0), static_cast<float> (arg1));
-  
+
     return 0;
-  
+
   } catch(std::exception& e) {
     sq_throwerror(vm, e.what());
     return SQ_ERROR;
@@ -725,7 +725,7 @@
     sq_throwerror(vm, _SC("Unexpected exception while executing function 'camera_set_pos'"));
     return SQ_ERROR;
   }
-  
+
 }
 
 static SQInteger camera_set_zoom_wrapper(HSQUIRRELVM vm)
@@ -735,12 +735,12 @@
     sq_throwerror(vm, _SC("Argument 1 not a float"));
     return SQ_ERROR;
   }
-  
+
   try {
     Scripting::camera_set_zoom(static_cast<float> (arg0));
-  
+
     return 0;
-  
+
   } catch(std::exception& e) {
     sq_throwerror(vm, e.what());
     return SQ_ERROR;
@@ -748,7 +748,7 @@
     sq_throwerror(vm, _SC("Unexpected exception while executing function 'camera_set_zoom'"));
     return SQ_ERROR;
   }
-  
+
 }
 
 static SQInteger set_controller_help_active_wrapper(HSQUIRRELVM vm)
@@ -758,12 +758,12 @@
     sq_throwerror(vm, _SC("Argument 1 not a bool"));
     return SQ_ERROR;
   }
-  
+
   try {
     Scripting::set_controller_help_active(arg0 == SQTrue);
-  
+
     return 0;
-  
+
   } catch(std::exception& e) {
     sq_throwerror(vm, e.what());
     return SQ_ERROR;
@@ -771,7 +771,7 @@
     sq_throwerror(vm, _SC("Unexpected exception while executing function 'set_controller_help_active'"));
     return SQ_ERROR;
   }
-  
+
 }
 
 static SQInteger dialog_show_wrapper(HSQUIRRELVM vm)
@@ -796,12 +796,12 @@
     sq_throwerror(vm, _SC("Argument 4 not a string"));
     return SQ_ERROR;
   }
-  
+
   try {
     Scripting::dialog_show(static_cast<int> (arg0), arg1, arg2, arg3);
-  
+
     return 0;
-  
+
   } catch(std::exception& e) {
     sq_throwerror(vm, e.what());
     return SQ_ERROR;
@@ -809,18 +809,18 @@
     sq_throwerror(vm, _SC("Unexpected exception while executing function 'dialog_show'"));
     return SQ_ERROR;
   }
-  
+
 }
 
 static SQInteger wait_for_dialog_wrapper(HSQUIRRELVM vm)
 {
   HSQUIRRELVM arg0 = vm;
-  
+
   try {
     Scripting::wait_for_dialog(arg0);
-  
+
     return sq_suspendvm(vm);
-  
+
   } catch(std::exception& e) {
     sq_throwerror(vm, e.what());
     return SQ_ERROR;
@@ -828,18 +828,18 @@
     sq_throwerror(vm, _SC("Unexpected exception while executing function 'wait_for_dialog'"));
     return SQ_ERROR;
   }
-  
+
 }
 
 static SQInteger wait_for_fade_wrapper(HSQUIRRELVM vm)
 {
   HSQUIRRELVM arg0 = vm;
-  
+
   try {
     Scripting::wait_for_fade(arg0);
-  
+
     return sq_suspendvm(vm);
-  
+
   } catch(std::exception& e) {
     sq_throwerror(vm, e.what());
     return SQ_ERROR;
@@ -847,18 +847,18 @@
     sq_throwerror(vm, _SC("Unexpected exception while executing function 'wait_for_fade'"));
     return SQ_ERROR;
   }
-  
+
 }
 
 static SQInteger wait_for_camera_wrapper(HSQUIRRELVM vm)
 {
   HSQUIRRELVM arg0 = vm;
-  
+
   try {
     Scripting::wait_for_camera(arg0);
-  
+
     return sq_suspendvm(vm);
-  
+
   } catch(std::exception& e) {
     sq_throwerror(vm, e.what());
     return SQ_ERROR;
@@ -866,7 +866,7 @@
     sq_throwerror(vm, _SC("Unexpected exception while executing function 'wait_for_camera'"));
     return SQ_ERROR;
   }
-  
+
 }
 
 static SQInteger conversation_add_wrapper(HSQUIRRELVM vm)
@@ -876,12 +876,12 @@
     sq_throwerror(vm, _SC("Argument 1 not a string"));
     return SQ_ERROR;
   }
-  
+
   try {
     Scripting::conversation_add(arg0);
-  
+
     return 0;
-  
+
   } catch(std::exception& e) {
     sq_throwerror(vm, e.what());
     return SQ_ERROR;
@@ -889,7 +889,7 @@
     sq_throwerror(vm, _SC("Unexpected exception while executing function 'conversation_add'"));
     return SQ_ERROR;
   }
-  
+
 }
 
 static SQInteger conversation_add2_wrapper(HSQUIRRELVM vm)
@@ -904,12 +904,12 @@
     sq_throwerror(vm, _SC("Argument 2 not a string"));
     return SQ_ERROR;
   }
-  
+
   try {
     Scripting::conversation_add2(arg0, arg1);
-  
+
     return 0;
-  
+
   } catch(std::exception& e) {
     sq_throwerror(vm, e.what());
     return SQ_ERROR;
@@ -917,18 +917,18 @@
     sq_throwerror(vm, _SC("Unexpected exception while executing function 'conversation_add2'"));
     return SQ_ERROR;
   }
-  
+
 }
 
 static SQInteger conversation_show_wrapper(HSQUIRRELVM vm)
 {
   (void) vm;
-  
+
   try {
     Scripting::conversation_show();
-  
+
     return 0;
-  
+
   } catch(std::exception& e) {
     sq_throwerror(vm, e.what());
     return SQ_ERROR;
@@ -936,18 +936,18 @@
     sq_throwerror(vm, _SC("Unexpected exception while executing function 'conversation_show'"));
     return SQ_ERROR;
   }
-  
+
 }
 
 static SQInteger conversation_get_selection_wrapper(HSQUIRRELVM vm)
 {
-  
+
   try {
     int return_value = Scripting::conversation_get_selection();
-  
+
     sq_pushinteger(vm, return_value);
     return 1;
-  
+
   } catch(std::exception& e) {
     sq_throwerror(vm, e.what());
     return SQ_ERROR;
@@ -955,18 +955,18 @@
     sq_throwerror(vm, _SC("Unexpected exception while executing function 'conversation_get_selection'"));
     return SQ_ERROR;
   }
-  
+
 }
 
 static SQInteger wait_for_conversation_wrapper(HSQUIRRELVM vm)
 {
   HSQUIRRELVM arg0 = vm;
-  
+
   try {
     Scripting::wait_for_conversation(arg0);
-  
+
     return sq_suspendvm(vm);
-  
+
   } catch(std::exception& e) {
     sq_throwerror(vm, e.what());
     return SQ_ERROR;
@@ -974,7 +974,7 @@
     sq_throwerror(vm, _SC("Unexpected exception while executing function 'wait_for_conversation'"));
     return SQ_ERROR;
   }
-  
+
 }
 
 static SQInteger add_objective_wrapper(HSQUIRRELVM vm)
@@ -989,12 +989,12 @@
     sq_throwerror(vm, _SC("Argument 2 not a string"));
     return SQ_ERROR;
   }
-  
+
   try {
     Scripting::add_objective(arg0, arg1);
-  
+
     return 0;
-  
+
   } catch(std::exception& e) {
     sq_throwerror(vm, e.what());
     return SQ_ERROR;
@@ -1002,7 +1002,7 @@
     sq_throwerror(vm, _SC("Unexpected exception while executing function 'add_objective'"));
     return SQ_ERROR;
   }
-  
+
 }
 
 static SQInteger objective_complete_wrapper(HSQUIRRELVM vm)
@@ -1012,12 +1012,12 @@
     sq_throwerror(vm, _SC("Argument 1 not a string"));
     return SQ_ERROR;
   }
-  
+
   try {
     Scripting::objective_complete(arg0);
-  
+
     return 0;
-  
+
   } catch(std::exception& e) {
     sq_throwerror(vm, e.what());
     return SQ_ERROR;
@@ -1025,7 +1025,7 @@
     sq_throwerror(vm, _SC("Unexpected exception while executing function 'objective_complete'"));
     return SQ_ERROR;
   }
-  
+
 }
 
 static SQInteger is_objective_given_wrapper(HSQUIRRELVM vm)
@@ -1035,13 +1035,13 @@
     sq_throwerror(vm, _SC("Argument 1 not a string"));
     return SQ_ERROR;
   }
-  
+
   try {
     bool return_value = Scripting::is_objective_given(arg0);
-  
+
     sq_pushbool(vm, return_value);
     return 1;
-  
+
   } catch(std::exception& e) {
     sq_throwerror(vm, e.what());
     return SQ_ERROR;
@@ -1049,7 +1049,7 @@
     sq_throwerror(vm, _SC("Unexpected exception while executing function 'is_objective_given'"));
     return SQ_ERROR;
   }
-  
+
 }
 
 static SQInteger is_objective_complete_wrapper(HSQUIRRELVM vm)
@@ -1059,13 +1059,13 @@
     sq_throwerror(vm, _SC("Argument 1 not a string"));
     return SQ_ERROR;
   }
-  
+
   try {
     bool return_value = Scripting::is_objective_complete(arg0);
-  
+
     sq_pushbool(vm, return_value);
     return 1;
-  
+
   } catch(std::exception& e) {
     sq_throwerror(vm, e.what());
     return SQ_ERROR;
@@ -1073,19 +1073,19 @@
     sq_throwerror(vm, _SC("Unexpected exception while executing function 'is_objective_complete'"));
     return SQ_ERROR;
   }
-  
+
 }
 
 static SQInteger run_before_wrapper(HSQUIRRELVM vm)
 {
   HSQUIRRELVM arg0 = vm;
-  
+
   try {
     bool return_value = Scripting::run_before(arg0);
-  
+
     sq_pushbool(vm, return_value);
     return 1;
-  
+
   } catch(std::exception& e) {
     sq_throwerror(vm, e.what());
     return SQ_ERROR;
@@ -1093,7 +1093,7 @@
     sq_throwerror(vm, _SC("Unexpected exception while executing function 'run_before'"));
     return SQ_ERROR;
   }
-  
+
 }
 
 static SQInteger save_state_wrapper(HSQUIRRELVM vm)
@@ -1104,12 +1104,12 @@
     sq_throwerror(vm, _SC("Argument 1 not a string"));
     return SQ_ERROR;
   }
-  
+
   try {
     Scripting::save_state(arg0, arg1);
-  
+
     return 0;
-  
+
   } catch(std::exception& e) {
     sq_throwerror(vm, e.what());
     return SQ_ERROR;
@@ -1117,7 +1117,7 @@
     sq_throwerror(vm, _SC("Unexpected exception while executing function 'save_state'"));
     return SQ_ERROR;
   }
-  
+
 }
 
 static SQInteger load_state_wrapper(HSQUIRRELVM vm)
@@ -1128,12 +1128,12 @@
     sq_throwerror(vm, _SC("Argument 1 not a string"));
     return SQ_ERROR;
   }
-  
+
   try {
     Scripting::load_state(arg0, arg1);
-  
+
     return 0;
-  
+
   } catch(std::exception& e) {
     sq_throwerror(vm, e.what());
     return SQ_ERROR;
@@ -1141,18 +1141,18 @@
     sq_throwerror(vm, _SC("Unexpected exception while executing function 'load_state'"));
     return SQ_ERROR;
   }
-  
+
 }
 
 static SQInteger list_objects_wrapper(HSQUIRRELVM vm)
 {
   (void) vm;
-  
+
   try {
     Scripting::list_objects();
-  
+
     return 0;
-  
+
   } catch(std::exception& e) {
     sq_throwerror(vm, e.what());
     return SQ_ERROR;
@@ -1160,7 +1160,7 @@
     sq_throwerror(vm, _SC("Unexpected exception while executing function 'list_objects'"));
     return SQ_ERROR;
   }
-  
+
 }
 
 static SQInteger set_debug_wrapper(HSQUIRRELVM vm)
@@ -1170,12 +1170,12 @@
     sq_throwerror(vm, _SC("Argument 1 not a bool"));
     return SQ_ERROR;
   }
-  
+
   try {
     Scripting::set_debug(arg0 == SQTrue);
-  
+
     return 0;
-  
+
   } catch(std::exception& e) {
     sq_throwerror(vm, e.what());
     return SQ_ERROR;
@@ -1183,18 +1183,18 @@
     sq_throwerror(vm, _SC("Unexpected exception while executing function 'set_debug'"));
     return SQ_ERROR;
   }
-  
+
 }
 
 static SQInteger get_debug_wrapper(HSQUIRRELVM vm)
 {
-  
+
   try {
     bool return_value = Scripting::get_debug();
-  
+
     sq_pushbool(vm, return_value);
     return 1;
-  
+
   } catch(std::exception& e) {
     sq_throwerror(vm, e.what());
     return SQ_ERROR;
@@ -1202,18 +1202,18 @@
     sq_throwerror(vm, _SC("Unexpected exception while executing function 'get_debug'"));
     return SQ_ERROR;
   }
-  
+
 }
 
 static SQInteger get_game_speed_wrapper(HSQUIRRELVM vm)
 {
-  
+
   try {
     float return_value = Scripting::get_game_speed();
-  
+
     sq_pushfloat(vm, return_value);
     return 1;
-  
+
   } catch(std::exception& e) {
     sq_throwerror(vm, e.what());
     return SQ_ERROR;
@@ -1221,7 +1221,7 @@
     sq_throwerror(vm, _SC("Unexpected exception while executing function 'get_game_speed'"));
     return SQ_ERROR;
   }
-  
+
 }
 
 static SQInteger set_game_speed_wrapper(HSQUIRRELVM vm)
@@ -1231,12 +1231,12 @@
     sq_throwerror(vm, _SC("Argument 1 not a float"));
     return SQ_ERROR;
   }
-  
+
   try {
     Scripting::set_game_speed(static_cast<float> (arg0));
-  
+
     return 0;
-  
+
   } catch(std::exception& e) {
     sq_throwerror(vm, e.what());
     return SQ_ERROR;
@@ -1244,7 +1244,7 @@
     sq_throwerror(vm, _SC("Unexpected exception while executing function 'set_game_speed'"));
     return SQ_ERROR;
   }
-  
+
 }
 
 static SQInteger wait_wrapper(HSQUIRRELVM vm)
@@ -1255,12 +1255,12 @@
     sq_throwerror(vm, _SC("Argument 1 not a float"));
     return SQ_ERROR;
   }
-  
+
   try {
     Scripting::wait(arg0, static_cast<float> (arg1));
-  
+
     return sq_suspendvm(vm);
-  
+
   } catch(std::exception& e) {
     sq_throwerror(vm, e.what());
     return SQ_ERROR;
@@ -1268,7 +1268,7 @@
     sq_throwerror(vm, _SC("Unexpected exception while executing function 'wait'"));
     return SQ_ERROR;
   }
-  
+
 }
 
 static SQInteger display_wrapper(HSQUIRRELVM vm)
@@ -1293,12 +1293,12 @@
     sq_throwerror(vm, _SC("Argument 2 not an integer"));
     return SQ_ERROR;
   }
-  
+
   try {
     Scripting::set_console_font(arg0, static_cast<int> (arg1));
-  
+
     return 0;
-  
+
   } catch(std::exception& e) {
     sq_throwerror(vm, e.what());
     return SQ_ERROR;
@@ -1306,7 +1306,7 @@
     sq_throwerror(vm, _SC("Unexpected exception while executing function 'set_console_font'"));
     return SQ_ERROR;
   }
-  
+
 }
 
 static SQInteger set_gamma_wrapper(HSQUIRRELVM vm)
@@ -1316,12 +1316,12 @@
     sq_throwerror(vm, _SC("Argument 1 not a float"));
     return SQ_ERROR;
   }
-  
+
   try {
     Scripting::set_gamma(static_cast<float> (arg0));
-  
+
     return 0;
-  
+
   } catch(std::exception& e) {
     sq_throwerror(vm, e.what());
     return SQ_ERROR;
@@ -1329,7 +1329,7 @@
     sq_throwerror(vm, _SC("Unexpected exception while executing function 'set_gamma'"));
     return SQ_ERROR;
   }
-  
+
 }
 
 static SQInteger set_gamma_rgb_wrapper(HSQUIRRELVM vm)
@@ -1349,12 +1349,12 @@
     sq_throwerror(vm, _SC("Argument 3 not a float"));
     return SQ_ERROR;
   }
-  
+
   try {
     Scripting::set_gamma_rgb(static_cast<float> (arg0), static_cast<float> (arg1), static_cast<float> (arg2));
-  
+
     return 0;
-  
+
   } catch(std::exception& e) {
     sq_throwerror(vm, e.what());
     return SQ_ERROR;
@@ -1362,18 +1362,18 @@
     sq_throwerror(vm, _SC("Unexpected exception while executing function 'set_gamma_rgb'"));
     return SQ_ERROR;
   }
-  
+
 }
 
 static SQInteger show_config_wrapper(HSQUIRRELVM vm)
 {
   (void) vm;
-  
+
   try {
     Scripting::show_config();
-  
+
     return 0;
-  
+
   } catch(std::exception& e) {
     sq_throwerror(vm, e.what());
     return SQ_ERROR;
@@ -1381,18 +1381,18 @@
     sq_throwerror(vm, _SC("Unexpected exception while executing function 'show_config'"));
     return SQ_ERROR;
   }
-  
+
 }
 
 static SQInteger cutscene_begin_wrapper(HSQUIRRELVM vm)
 {
   (void) vm;
-  
+
   try {
     Scripting::cutscene_begin();
-  
+
     return 0;
-  
+
   } catch(std::exception& e) {
     sq_throwerror(vm, e.what());
     return SQ_ERROR;
@@ -1400,18 +1400,18 @@
     sq_throwerror(vm, _SC("Unexpected exception while executing function 'cutscene_begin'"));
     return SQ_ERROR;
   }
-  
+
 }
 
 static SQInteger cutscene_end_wrapper(HSQUIRRELVM vm)
 {
   (void) vm;
-  
+
   try {
     Scripting::cutscene_end();
-  
+
     return 0;
-  
+
   } catch(std::exception& e) {
     sq_throwerror(vm, e.what());
     return SQ_ERROR;
@@ -1419,7 +1419,7 @@
     sq_throwerror(vm, _SC("Unexpected exception while executing function 'cutscene_end'"));
     return SQ_ERROR;
   }
-  
+
 }
 
 static SQInteger internal_fadeout_rgb_wrapper(HSQUIRRELVM vm)
@@ -1444,12 +1444,12 @@
     sq_throwerror(vm, _SC("Argument 4 not a float"));
     return SQ_ERROR;
   }
-  
+
   try {
     Scripting::internal_fadeout_rgb(static_cast<float> (arg0), static_cast<float> (arg1), static_cast<float> (arg2), static_cast<float> (arg3));
-  
+
     return 0;
-  
+
   } catch(std::exception& e) {
     sq_throwerror(vm, e.what());
     return SQ_ERROR;
@@ -1457,7 +1457,7 @@
     sq_throwerror(vm, _SC("Unexpected exception while executing function 'internal_fadeout_rgb'"));
     return SQ_ERROR;
   }
-  
+
 }
 
 static SQInteger internal_fadein_wrapper(HSQUIRRELVM vm)
@@ -1467,12 +1467,12 @@
     sq_throwerror(vm, _SC("Argument 1 not a float"));
     return SQ_ERROR;
   }
-  
+
   try {
     Scripting::internal_fadein(static_cast<float> (arg0));
-  
+
     return 0;
-  
+
   } catch(std::exception& e) {
     sq_throwerror(vm, e.what());
     return SQ_ERROR;
@@ -1480,18 +1480,18 @@
     sq_throwerror(vm, _SC("Unexpected exception while executing function 'internal_fadein'"));
     return SQ_ERROR;
   }
-  
+
 }
 
 static SQInteger render_mask_get_wrapper(HSQUIRRELVM vm)
 {
-  
+
   try {
     int return_value = Scripting::render_mask_get();
-  
+
     sq_pushinteger(vm, return_value);
     return 1;
-  
+
   } catch(std::exception& e) {
     sq_throwerror(vm, e.what());
     return SQ_ERROR;
@@ -1499,7 +1499,7 @@
     sq_throwerror(vm, _SC("Unexpected exception while executing function 'render_mask_get'"));
     return SQ_ERROR;
   }
-  
+
 }
 
 static SQInteger render_mask_set_wrapper(HSQUIRRELVM vm)
@@ -1509,12 +1509,12 @@
     sq_throwerror(vm, _SC("Argument 1 not an integer"));
     return SQ_ERROR;
   }
-  
+
   try {
     Scripting::render_mask_set(static_cast<int> (arg0));
-  
+
     return 0;
-  
+
   } catch(std::exception& e) {
     sq_throwerror(vm, e.what());
     return SQ_ERROR;
@@ -1522,7 +1522,7 @@
     sq_throwerror(vm, _SC("Unexpected exception while executing function 'render_mask_set'"));
     return SQ_ERROR;
   }
-  
+
 }
 
 static SQInteger spawn_object_wrapper(HSQUIRRELVM vm)
@@ -1531,7 +1531,6 @@
 }
 
 } // end of namespace Wrapper
-
 void create_squirrel_instance(HSQUIRRELVM v, Scripting::GameObject* object, bool setup_releasehook)
 {
   using namespace Wrapper;
@@ -2107,4 +2106,3 @@
 }
 
 } // end of namespace Scripting
-

Modified: trunk/windstille/src/scripting/wrapper.hpp
===================================================================
--- trunk/windstille/src/scripting/wrapper.hpp	2009-02-10 14:35:30 UTC (rev 2431)
+++ trunk/windstille/src/scripting/wrapper.hpp	2009-02-10 14:44:55 UTC (rev 2432)
@@ -22,4 +22,3 @@
 }
 
 #endif
-

Modified: trunk/windstille/src/windstille_main.cpp
===================================================================
--- trunk/windstille/src/windstille_main.cpp	2009-02-10 14:35:30 UTC (rev 2431)
+++ trunk/windstille/src/windstille_main.cpp	2009-02-10 14:44:55 UTC (rev 2432)
@@ -32,7 +32,6 @@
 #include "sound/sound_manager.hpp"
 #include "tile_factory.hpp"
 #include "script_manager.hpp"
-#include "tinygettext/gettext.hpp"
 #include "config.hpp"
 #include "util.hpp"
 #include "font/ttf_font.hpp"
@@ -68,10 +67,6 @@
     init_physfs(argv[0]);
     init_sdl();
 
-    dictionaryManager = new tinygettext::DictionaryManager();
-    dictionaryManager->set_charset("iso8859-1");
-    dictionaryManager->add_directory("locale");
-
     config.load();
     
     config.parse_args(argc, argv);
@@ -189,9 +184,6 @@
 
   config.save();
 
-  delete dictionaryManager;
-  dictionaryManager = 0;
-  
   SDL_Quit();
   PHYSFS_deinit();
 



From grumbel at mail.berlios.de  Tue Feb 10 15:50:52 2009
From: grumbel at mail.berlios.de (grumbel at BerliOS)
Date: Tue, 10 Feb 2009 15:50:52 +0100
Subject: [Windstille-commit] r2433 - trunk/windstille/data
Message-ID: <200902101450.n1AEoqsj005893@sheep.berlios.de>

Author: grumbel
Date: 2009-02-10 15:50:51 +0100 (Tue, 10 Feb 2009)
New Revision: 2433

Removed:
   trunk/windstille/data/addcolor.scm
   trunk/windstille/data/windstille.scm
Log:
Removed obsolete files

Deleted: trunk/windstille/data/addcolor.scm
===================================================================
--- trunk/windstille/data/addcolor.scm	2009-02-10 14:44:55 UTC (rev 2432)
+++ trunk/windstille/data/addcolor.scm	2009-02-10 14:50:51 UTC (rev 2433)
@@ -1,30 +0,0 @@
-(use-modules (ice-9 pretty-print))
-(define tiles (cdr (with-input-from-file "netpanzertiles.scm"
-                     (lambda ()
-                       (read)))))
-(define attrs  (with-input-from-file "/tmp/colors"
-                 (lambda ()
-                   (read))))
-
-(define (attr2color at)
-  (cond
-   ((= at 0) ;; base
-    (list 255   0   0 255))
-   ((= at 1) ;; grass
-    (list   0   0 255 255))
-   ((= at 4) ;; nomove
-    (list   0 255   0 255))
-   ((= at 5) ;; nomove2?
-    (list 255 255   0 255))
-   (else
-    (error "kaputt" at))))
-
-(for-each 
- (lambda (el)
-   (let* ((id (cadadr el))
-          (at (append (assoc-ref attrs id) '(255) )))
-     (pretty-print (append el (list (cons 'color at))))
-     ))
- tiles)
-
-;; EOF ;;
\ No newline at end of file

Deleted: trunk/windstille/data/windstille.scm
===================================================================
--- trunk/windstille/data/windstille.scm	2009-02-10 14:44:55 UTC (rev 2432)
+++ trunk/windstille/data/windstille.scm	2009-02-10 14:50:51 UTC (rev 2433)
@@ -1,9 +0,0 @@
-(display "Windstille Startup Script\n")
-
-(define *game* 'windstille)
-(define *tile-size* 128)
-(game-set-tilesize 128 16)
-(game-load-resources "tiles.xml")
-(game-load-tiles     "tiles.scm")
-
-;; EOF ;;



From grumbel at mail.berlios.de  Tue Feb 10 16:02:46 2009
From: grumbel at mail.berlios.de (grumbel at BerliOS)
Date: Tue, 10 Feb 2009 16:02:46 +0100
Subject: [Windstille-commit] r2434 - trunk/windstille/src/sound
Message-ID: <200902101502.n1AF2k8O006675@sheep.berlios.de>

Author: grumbel
Date: 2009-02-10 16:02:46 +0100 (Tue, 10 Feb 2009)
New Revision: 2434

Modified:
   trunk/windstille/src/sound/sound_file.cpp
Log:
Added missing header

Modified: trunk/windstille/src/sound/sound_file.cpp
===================================================================
--- trunk/windstille/src/sound/sound_file.cpp	2009-02-10 14:50:51 UTC (rev 2433)
+++ trunk/windstille/src/sound/sound_file.cpp	2009-02-10 15:02:46 UTC (rev 2434)
@@ -3,6 +3,7 @@
 
 #include "sound_file.hpp"
 
+#include <string.h>
 #include <stdio.h>
 #include <stdint.h>
 #include <algorithm>



From grumbel at mail.berlios.de  Tue Feb 10 16:03:48 2009
From: grumbel at mail.berlios.de (grumbel at BerliOS)
Date: Tue, 10 Feb 2009 16:03:48 +0100
Subject: [Windstille-commit] r2435 - in trunk/windstille: lib src
Message-ID: <200902101503.n1AF3mO3006779@sheep.berlios.de>

Author: grumbel
Date: 2009-02-10 16:03:47 +0100 (Tue, 10 Feb 2009)
New Revision: 2435

Removed:
   trunk/windstille/lib/glew/
Modified:
   trunk/windstille/lib/README
   trunk/windstille/lib/SConscript
   trunk/windstille/src/SConscript
Log:
Removed glew library from SVN, no longer needed since its included in mainstream distros

Modified: trunk/windstille/lib/README
===================================================================
--- trunk/windstille/lib/README	2009-02-10 15:02:46 UTC (rev 2434)
+++ trunk/windstille/lib/README	2009-02-10 15:03:47 UTC (rev 2435)
@@ -1,5 +1,3 @@
-glew/:      http://glew.sourceforge.net/
-
 SQUIRREL2/ - http://squirrel-lang.org
 -------------------------------------
 SQUIRREL2/ is a verbatim copy of the squirrel tarball, to update it,

Modified: trunk/windstille/lib/SConscript
===================================================================
--- trunk/windstille/lib/SConscript	2009-02-10 15:02:46 UTC (rev 2434)
+++ trunk/windstille/lib/SConscript	2009-02-10 15:03:47 UTC (rev 2435)
@@ -4,12 +4,6 @@
 
 Import('conf_env', 'features')
 
-glew_env = Environment(CPPPATH = ['glew'], CXXFLAGS = ['-g', '-DDEBUG'])
-
-glew = glew_env.Library('glew',
-            glob.glob('glew/*.c') +
-            glob.glob('glew/*.h'))
-
 squirrel_env = Environment(CPPPATH  = ['SQUIRREL2/include'],
                            CXXFLAGS = ["-fno-rtti", "-g", "-DDEBUG"])
 

Modified: trunk/windstille/src/SConscript
===================================================================
--- trunk/windstille/src/SConscript	2009-02-10 15:02:46 UTC (rev 2434)
+++ trunk/windstille/src/SConscript	2009-02-10 15:03:47 UTC (rev 2435)
@@ -29,9 +29,9 @@
 SConscript('scripting/SConscript')
 
 env = conf_env.Clone()
-env.Append(LIBS    = ['GL', 'GLU', 'squirrel', 'physfs', 'SDL_image', 'openal', 'glew', 'ogg', 'vorbis', 'vorbisfile', 'png', 'boost_signals'])
+env.Append(LIBS    = ['GL', 'GLU', 'GLEW', 'squirrel', 'physfs', 'SDL_image', 'openal', 'ogg', 'vorbis', 'vorbisfile', 'png', 'boost_signals'])
 env.Append(LIBPATH = ['../lib/'] )
-env.Append(CPPPATH = ['.', '..', '../lib/SQUIRREL2/include/', '../lib/glew'])
+env.Append(CPPPATH = ['.', '..', '../lib/SQUIRREL2/include/'])
 
 if features['64bit']:
     env.Append(CPPDEFINES = '_SQ64')



From grumbel at mail.berlios.de  Tue Feb 10 16:35:28 2009
From: grumbel at mail.berlios.de (grumbel at BerliOS)
Date: Tue, 10 Feb 2009 16:35:28 +0100
Subject: [Windstille-commit] r2436 - in trunk/windstille: . external
Message-ID: <200902101535.n1AFZSl0010704@sheep.berlios.de>

Author: grumbel
Date: 2009-02-10 16:35:28 +0100 (Tue, 10 Feb 2009)
New Revision: 2436

Added:
   trunk/windstille/external/
Removed:
   trunk/windstille/lib/
Modified:
   trunk/windstille/SConstruct
Log:
Merging tools/ and lib/ into external/

Modified: trunk/windstille/SConstruct
===================================================================
--- trunk/windstille/SConstruct	2009-02-10 15:03:47 UTC (rev 2435)
+++ trunk/windstille/SConstruct	2009-02-10 15:35:28 UTC (rev 2436)
@@ -1,28 +1,19 @@
 ##  -*- python -*-
-##  $Id: windstille_main.hpp 1097 2005-09-23 16:01:59Z grumbel $
-##   __      __ __             ___        __   __ __   __
-##  /  \    /  \__| ____    __| _/_______/  |_|__|  | |  |   ____
-##  \   \/\/   /  |/    \  / __ |/  ___/\   __\  |  | |  | _/ __ \
-##   \        /|  |   |  \/ /_/ |\___ \  |  | |  |  |_|  |_\  ___/
-##    \__/\  / |__|___|  /\____ /____  > |__| |__|____/____/\___  >
-##         \/          \/      \/    \/                         \/
+##  Windstille - A Sci-Fi Action-Adventure Game
 ##  Copyright (C) 2000,2005 Ingo Ruhnke <grumbel at gmx.de>
 ##
-##  This program is free software; you can redistribute it and/or
-##  modify it under the terms of the GNU General Public License
-##  as published by the Free Software Foundation; either version 2
-##  of the License, or (at your option) any later version.
-##
+##  This program is free software: you can redistribute it and/or modify
+##  it under the terms of the GNU General Public License as published by
+##  the Free Software Foundation, either version 3 of the License, or
+##  (at your option) any later version.
+##  
 ##  This program is distributed in the hope that it will be useful,
 ##  but WITHOUT ANY WARRANTY; without even the implied warranty of
 ##  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 ##  GNU General Public License for more details.
-## 
+##  
 ##  You should have received a copy of the GNU General Public License
-##  along with this program; if not, write to the Free Software
-##  Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA
-##  02111-1307, USA.
-##
+##  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 
 import sys, os
 sys.path.append('scons')
@@ -214,8 +205,7 @@
 # SConscript('build/src/SConscript')
 # SConscript('build/src/scripting/SConscript')
 
-SConscript('tools/SConscript')
-SConscript('lib/SConscript')
+SConscript('external/SConscript')
 SConscript('src/SConscript')
 
 # EOF #

Copied: trunk/windstille/external (from rev 2435, trunk/windstille/lib)


Property changes on: trunk/windstille/external
___________________________________________________________________
Name: svn:ignore
   + 
libglew.a
libsquirrel.a

Name: svn:mergeinfo
   + 



From grumbel at mail.berlios.de  Tue Feb 10 16:38:50 2009
From: grumbel at mail.berlios.de (grumbel at BerliOS)
Date: Tue, 10 Feb 2009 16:38:50 +0100
Subject: [Windstille-commit] r2437 - in trunk/windstille: . external
Message-ID: <200902101538.n1AFco49011171@sheep.berlios.de>

Author: grumbel
Date: 2009-02-10 16:38:49 +0100 (Tue, 10 Feb 2009)
New Revision: 2437

Removed:
   trunk/windstille/tools/
Modified:
   trunk/windstille/external/
   trunk/windstille/external/README
   trunk/windstille/external/SConscript
Log:
Merging tools/ and lib/ into external/


Property changes on: trunk/windstille/external
___________________________________________________________________
Name: svn:externals
   + miniswig http://supertux.lethargik.org/svn/supertux/trunk/supertux/tools/miniswig


Modified: trunk/windstille/external/README
===================================================================
--- trunk/windstille/external/README	2009-02-10 15:35:28 UTC (rev 2436)
+++ trunk/windstille/external/README	2009-02-10 15:38:49 UTC (rev 2437)
@@ -1,6 +1,8 @@
 SQUIRREL2/ - http://squirrel-lang.org
--------------------------------------
-SQUIRREL2/ is a verbatim copy of the squirrel tarball, to update it,
-just remove SQUIRREL2 and extract a new tarball.
+    SQUIRREL2/ is a verbatim copy of the squirrel tarball, to update
+    it, just remove SQUIRREL2 and extract a new tarball.
 
+miniswig/ - Squirrel Wrapper Generator
+    uses svn:externals should update automatically
+
 # EOF #

Modified: trunk/windstille/external/SConscript
===================================================================
--- trunk/windstille/external/SConscript	2009-02-10 15:35:28 UTC (rev 2436)
+++ trunk/windstille/external/SConscript	2009-02-10 15:38:49 UTC (rev 2437)
@@ -13,7 +13,29 @@
 squirrel_env.Append(CXXFLAGS = conf_env['CXXFLAGS'])
 
 squirrel_env.Library('squirrel',
-            glob.glob('SQUIRREL2/squirrel/*.cpp') +
-            glob.glob('SQUIRREL2/sqstdlib/*.cpp'))
+                     glob.glob('SQUIRREL2/squirrel/*.cpp') +
+                     glob.glob('SQUIRREL2/sqstdlib/*.cpp'))
 
+# ______________________________________________________________________
+#
+
+miniswig_env = Environment(CPPPATH=['../..'],
+                           CXXFILESUFFIX = ".cpp",
+                           YACCFLAGS=['-d', '--no-lines'])
+
+miniswig = miniswig_env.Program('miniswig/miniswig',
+                                ['miniswig/parser.yy',
+                                 'miniswig/lexer.ll',
+                                 'miniswig/create_docu.cpp',
+                                 'miniswig/xmlwriter.cpp',
+                                 'miniswig/create_wrapper.cpp',
+                                 'miniswig/main.cpp',
+                                 'miniswig/tree.cpp'], 
+                                CPPPATH=["..", "miniswig"])
+
+# bison -d --no-lines -o tools/miniswig/parser.cpp tools/miniswig/parser.yy
+
+Export('miniswig')
+
+
 # EOF #



From grumbel at mail.berlios.de  Tue Feb 10 16:40:34 2009
From: grumbel at mail.berlios.de (grumbel at BerliOS)
Date: Tue, 10 Feb 2009 16:40:34 +0100
Subject: [Windstille-commit] r2438 - in trunk/windstille/src: . scripting
Message-ID: <200902101540.n1AFeYAw011576@sheep.berlios.de>

Author: grumbel
Date: 2009-02-10 16:40:33 +0100 (Tue, 10 Feb 2009)
New Revision: 2438

Modified:
   trunk/windstille/src/SConscript
   trunk/windstille/src/scripting/SConscript
Log:
Merging tools/ and lib/ into external/

Modified: trunk/windstille/src/SConscript
===================================================================
--- trunk/windstille/src/SConscript	2009-02-10 15:38:49 UTC (rev 2437)
+++ trunk/windstille/src/SConscript	2009-02-10 15:40:33 UTC (rev 2438)
@@ -1,28 +1,19 @@
 ##  -*- python -*-
-##  $Id: windstille_main.hpp 1097 2005-09-23 16:01:59Z grumbel $
-##   __      __ __             ___        __   __ __   __
-##  /  \    /  \__| ____    __| _/_______/  |_|__|  | |  |   ____
-##  \   \/\/   /  |/    \  / __ |/  ___/\   __\  |  | |  | _/ __ \
-##   \        /|  |   |  \/ /_/ |\___ \  |  | |  |  |_|  |_\  ___/
-##    \__/\  / |__|___|  /\____ /____  > |__| |__|____/____/\___  >
-##         \/          \/      \/    \/                         \/
+##  Windstille - A Sci-Fi Action-Adventure Game
 ##  Copyright (C) 2000,2005 Ingo Ruhnke <grumbel at gmx.de>
 ##
-##  This program is free software; you can redistribute it and/or
-##  modify it under the terms of the GNU General Public License
-##  as published by the Free Software Foundation; either version 2
-##  of the License, or (at your option) any later version.
-##
+##  This program is free software: you can redistribute it and/or modify
+##  it under the terms of the GNU General Public License as published by
+##  the Free Software Foundation, either version 3 of the License, or
+##  (at your option) any later version.
+##  
 ##  This program is distributed in the hope that it will be useful,
 ##  but WITHOUT ANY WARRANTY; without even the implied warranty of
 ##  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 ##  GNU General Public License for more details.
-## 
+##  
 ##  You should have received a copy of the GNU General Public License
-##  along with this program; if not, write to the Free Software
-##  Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA
-##  02111-1307, USA.
-##
+##  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 
 Import('conf_env', 'features')
 
@@ -30,8 +21,8 @@
 
 env = conf_env.Clone()
 env.Append(LIBS    = ['GL', 'GLU', 'GLEW', 'squirrel', 'physfs', 'SDL_image', 'openal', 'ogg', 'vorbis', 'vorbisfile', 'png', 'boost_signals'])
-env.Append(LIBPATH = ['../lib/'] )
-env.Append(CPPPATH = ['.', '..', '../lib/SQUIRREL2/include/'])
+env.Append(LIBPATH = ['../external/'] )
+env.Append(CPPPATH = ['.', '..', '../external/SQUIRREL2/include/'])
 
 if features['64bit']:
     env.Append(CPPDEFINES = '_SQ64')

Modified: trunk/windstille/src/scripting/SConscript
===================================================================
--- trunk/windstille/src/scripting/SConscript	2009-02-10 15:38:49 UTC (rev 2437)
+++ trunk/windstille/src/scripting/SConscript	2009-02-10 15:40:33 UTC (rev 2438)
@@ -4,7 +4,7 @@
 
 Import(['miniswig'])
 
-env = Environment(MINISWIG='tools/miniswig/miniswig')
+env = Environment(MINISWIG='external/miniswig/miniswig')
 
 env.Depends(env.Command('miniswig.tmp', 'wrapper.interface.hpp',
                         ["cpp -x c  -CC $SOURCE -o $TARGET -DSCRIPTING_API"]),



From grumbel at mail.berlios.de  Tue Feb 10 16:41:43 2009
From: grumbel at mail.berlios.de (grumbel at BerliOS)
Date: Tue, 10 Feb 2009 16:41:43 +0100
Subject: [Windstille-commit] r2439 - trunk/windstille
Message-ID: <200902101541.n1AFfh7W011850@sheep.berlios.de>

Author: grumbel
Date: 2009-02-10 16:41:42 +0100 (Tue, 10 Feb 2009)
New Revision: 2439

Removed:
   trunk/windstille/BUGS
Modified:
   trunk/windstille/TODO
Log:
Merged BUGS and TODO

Deleted: trunk/windstille/BUGS
===================================================================
--- trunk/windstille/BUGS	2009-02-10 15:40:33 UTC (rev 2438)
+++ trunk/windstille/BUGS	2009-02-10 15:41:42 UTC (rev 2439)
@@ -1,22 +0,0 @@
-Windstille Bugs
-===============
-
-- Jane's hat is white, caused by one mesh using two textures, could be
-  fixed in either the exporter or in the model itself
-
-- when Windstille is in windowed mode a window infront of it will
-  cause graphical errors, this is caused by the non-pbuffer based
-  lightmap rendering, implementing proper pbuffer would fix it
-  
-- quickly tapping forward-back-hold down forward makes your character play
-  the walking animation without actually moving anywhere
-   
-- Pressing left (or right), jump and and run at the same time throws an
-  exception that causes the game to exit:
-
-  std::exception: No marker with name 'RightFoot' defined in action 'Stand'
-
-  in general the game shouldn't crash when stuff isn't found, but
-  instead fallback to placeholders and give a error message on the console
-
-# EOF #

Modified: trunk/windstille/TODO
===================================================================
--- trunk/windstille/TODO	2009-02-10 15:40:33 UTC (rev 2438)
+++ trunk/windstille/TODO	2009-02-10 15:41:42 UTC (rev 2439)
@@ -1,3 +1,41 @@
+Windstille ToDo
+===============
+
+* seperate and document components better:
+
+  - collision engine
+  - BabyXML
+  - tinygettext
+  - Sprite2D
+  - Sprite3D
+  - particle systems
+
+* unify copyright header and #ifdef guards
+
+* Update Random number generator: http://www.math.sci.hiroshima-u.ac.jp/~m-mat/MT/SFMT/index.html
+
+* document scripting tricks somewhere:
+  spawn_object("shockwave", {pos=[0,0]})
+
+* miniswig causes bison++ to crash
+
+Windstille Bugs
+===============
+
+- Jane's hat is white, caused by one mesh using two textures, could be
+  fixed in either the exporter or in the model itself
+  
+- quickly tapping forward-back-hold down forward makes your character play
+  the walking animation without actually moving anywhere
+   
+- Pressing left (or right), jump and and run at the same time throws an
+  exception that causes the game to exit:
+
+  std::exception: No marker with name 'RightFoot' defined in action 'Stand'
+
+  in general the game shouldn't crash when stuff isn't found, but
+  instead fallback to placeholders and give a error message on the console
+
 http://orange.blender.org/blog/the-amazing-incredible-monkey-brush#more-49
 
 - add bison checks
@@ -28,9 +66,6 @@
 Misc:
 -----
 
-- rewrite the file reading/writing to look more like that in Pingus
-  (i.e. no toying around with evil pointers, weirdo iter objects,
-  etc. just FileReader)
 - polish/test scripting interface
 - create doll class
 - figure out how to do background animation (coroutines, multiple VM, etc.)



From grumbel at mail.berlios.de  Tue Feb 10 15:28:17 2009
From: grumbel at mail.berlios.de (grumbel at BerliOS)
Date: Tue, 10 Feb 2009 15:28:17 +0100
Subject: [Windstille-commit] r2429 - in trunk/windstille: . src src/armature
	src/collision src/display src/font src/gui src/input src/lisp
	src/math src/navigation src/objects src/particles
	src/scripting src/sprite2d src/sprite3d src/tinygettext
Message-ID: <200902101428.n1AESHKc003580@sheep.berlios.de>

Author: grumbel
Date: 2009-02-10 15:28:05 +0100 (Tue, 10 Feb 2009)
New Revision: 2429

Modified:
   trunk/windstille/COPYING
   trunk/windstille/src/armature/action.hpp
   trunk/windstille/src/armature/armature.cpp
   trunk/windstille/src/armature/armature.hpp
   trunk/windstille/src/armature/bone.cpp
   trunk/windstille/src/armature/bone.hpp
   trunk/windstille/src/armature/ipo_curve.cpp
   trunk/windstille/src/armature/ipo_curve.hpp
   trunk/windstille/src/armature/mesh.cpp
   trunk/windstille/src/armature/mesh.hpp
   trunk/windstille/src/armature/model.cpp
   trunk/windstille/src/armature/model.hpp
   trunk/windstille/src/armature/pose.cpp
   trunk/windstille/src/armature/pose.hpp
   trunk/windstille/src/armature/pose_bone.hpp
   trunk/windstille/src/armature_test.cpp
   trunk/windstille/src/armature_test.hpp
   trunk/windstille/src/baby_xml.cpp
   trunk/windstille/src/baby_xml.hpp
   trunk/windstille/src/blitter.cpp
   trunk/windstille/src/blitter.hpp
   trunk/windstille/src/box.cpp
   trunk/windstille/src/box.hpp
   trunk/windstille/src/camera.cpp
   trunk/windstille/src/camera.hpp
   trunk/windstille/src/character.cpp
   trunk/windstille/src/character.hpp
   trunk/windstille/src/collision/collision_data.cpp
   trunk/windstille/src/collision/contact.hpp
   trunk/windstille/src/collision/ladder_contact.cpp
   trunk/windstille/src/collision/ladder_contact.hpp
   trunk/windstille/src/collision/stair_contact.cpp
   trunk/windstille/src/collision/stair_contact.hpp
   trunk/windstille/src/config.cpp
   trunk/windstille/src/config.hpp
   trunk/windstille/src/console.cpp
   trunk/windstille/src/console.hpp
   trunk/windstille/src/controller_def.cpp
   trunk/windstille/src/controller_def.hpp
   trunk/windstille/src/controller_help_window.cpp
   trunk/windstille/src/controller_help_window.hpp
   trunk/windstille/src/conversation.cpp
   trunk/windstille/src/conversation.hpp
   trunk/windstille/src/dialog_manager.cpp
   trunk/windstille/src/dialog_manager.hpp
   trunk/windstille/src/display/display.cpp
   trunk/windstille/src/display/display.hpp
   trunk/windstille/src/display/drawing_context.cpp
   trunk/windstille/src/display/drawing_context.hpp
   trunk/windstille/src/display/drawing_request.hpp
   trunk/windstille/src/display/framebuffer.cpp
   trunk/windstille/src/display/framebuffer.hpp
   trunk/windstille/src/display/opengl_state.cpp
   trunk/windstille/src/display/opengl_state.hpp
   trunk/windstille/src/display/render_buffer.cpp
   trunk/windstille/src/display/render_buffer.hpp
   trunk/windstille/src/display/scene_context.cpp
   trunk/windstille/src/display/scene_context.hpp
   trunk/windstille/src/display/shader_object.cpp
   trunk/windstille/src/display/shader_object.hpp
   trunk/windstille/src/display/shader_program.cpp
   trunk/windstille/src/display/shader_program.hpp
   trunk/windstille/src/display/surface.cpp
   trunk/windstille/src/display/surface.hpp
   trunk/windstille/src/display/surface_drawing_parameters.hpp
   trunk/windstille/src/display/texture.cpp
   trunk/windstille/src/display/texture.hpp
   trunk/windstille/src/display/vertex_array_drawing_request.cpp
   trunk/windstille/src/display/vertex_array_drawing_request.hpp
   trunk/windstille/src/elevator.cpp
   trunk/windstille/src/elevator.hpp
   trunk/windstille/src/energy_bar.cpp
   trunk/windstille/src/energy_bar.hpp
   trunk/windstille/src/entity.cpp
   trunk/windstille/src/entity.hpp
   trunk/windstille/src/field.hpp
   trunk/windstille/src/file_reader.cpp
   trunk/windstille/src/file_reader.hpp
   trunk/windstille/src/file_reader_impl.hpp
   trunk/windstille/src/font/border_font_effect.cpp
   trunk/windstille/src/font/border_font_effect.hpp
   trunk/windstille/src/font/font_effect.hpp
   trunk/windstille/src/font/fonts.cpp
   trunk/windstille/src/font/fonts.hpp
   trunk/windstille/src/font/ttf_font.cpp
   trunk/windstille/src/font/ttf_font.hpp
   trunk/windstille/src/game_object.cpp
   trunk/windstille/src/game_object.hpp
   trunk/windstille/src/game_session.cpp
   trunk/windstille/src/game_session.hpp
   trunk/windstille/src/geometry_test.cpp
   trunk/windstille/src/geometry_test.hpp
   trunk/windstille/src/getter.cpp
   trunk/windstille/src/getter.hpp
   trunk/windstille/src/globals.cpp
   trunk/windstille/src/globals.hpp
   trunk/windstille/src/graphic_context_state.cpp
   trunk/windstille/src/graphic_context_state.hpp
   trunk/windstille/src/grenade.cpp
   trunk/windstille/src/grenade.hpp
   trunk/windstille/src/gui/automap.cpp
   trunk/windstille/src/gui/automap.hpp
   trunk/windstille/src/gui/button.cpp
   trunk/windstille/src/gui/button.hpp
   trunk/windstille/src/gui/component.cpp
   trunk/windstille/src/gui/component.hpp
   trunk/windstille/src/gui/component_factory.cpp
   trunk/windstille/src/gui/component_factory.hpp
   trunk/windstille/src/gui/grid_component.cpp
   trunk/windstille/src/gui/grid_component.hpp
   trunk/windstille/src/gui/group_component.cpp
   trunk/windstille/src/gui/group_component.hpp
   trunk/windstille/src/gui/gui_manager.cpp
   trunk/windstille/src/gui/gui_manager.hpp
   trunk/windstille/src/gui/label.cpp
   trunk/windstille/src/gui/label.hpp
   trunk/windstille/src/gui/list_view.cpp
   trunk/windstille/src/gui/list_view.hpp
   trunk/windstille/src/gui/menu_component.cpp
   trunk/windstille/src/gui/menu_component.hpp
   trunk/windstille/src/gui/menu_item.cpp
   trunk/windstille/src/gui/menu_item.hpp
   trunk/windstille/src/gui/root_component.cpp
   trunk/windstille/src/gui/root_component.hpp
   trunk/windstille/src/gui/slider.cpp
   trunk/windstille/src/gui/slider.hpp
   trunk/windstille/src/gui/tab_component.cpp
   trunk/windstille/src/gui/tab_component.hpp
   trunk/windstille/src/gui/text_view.cpp
   trunk/windstille/src/gui/text_view.hpp
   trunk/windstille/src/handle.hpp
   trunk/windstille/src/input/controller.cpp
   trunk/windstille/src/input/controller.hpp
   trunk/windstille/src/input/controller_description.cpp
   trunk/windstille/src/input/controller_description.hpp
   trunk/windstille/src/input/input_configurator.cpp
   trunk/windstille/src/input/input_configurator.hpp
   trunk/windstille/src/input/input_event.hpp
   trunk/windstille/src/input/input_manager.cpp
   trunk/windstille/src/input/input_manager.hpp
   trunk/windstille/src/input/input_manager_impl.cpp
   trunk/windstille/src/input/input_manager_impl.hpp
   trunk/windstille/src/input/input_manager_sdl.cpp
   trunk/windstille/src/input/input_manager_sdl.hpp
   trunk/windstille/src/input/wiimote.cpp
   trunk/windstille/src/input/wiimote.hpp
   trunk/windstille/src/inventory.cpp
   trunk/windstille/src/inventory.hpp
   trunk/windstille/src/laser_pointer.cpp
   trunk/windstille/src/laser_pointer.hpp
   trunk/windstille/src/liquid.cpp
   trunk/windstille/src/liquid.hpp
   trunk/windstille/src/lisp/lexer.cpp
   trunk/windstille/src/lisp/lexer.hpp
   trunk/windstille/src/lisp/lisp.cpp
   trunk/windstille/src/lisp/lisp.hpp
   trunk/windstille/src/lisp/parser.cpp
   trunk/windstille/src/lisp/parser.hpp
   trunk/windstille/src/lisp/writer.cpp
   trunk/windstille/src/lisp/writer.hpp
   trunk/windstille/src/math.hpp
   trunk/windstille/src/math/line.cpp
   trunk/windstille/src/math/line.hpp
   trunk/windstille/src/math/quaternion.cpp
   trunk/windstille/src/math/quaternion.hpp
   trunk/windstille/src/math/vector.cpp
   trunk/windstille/src/math/vector.hpp
   trunk/windstille/src/math/vector3.hpp
   trunk/windstille/src/menu_manager.cpp
   trunk/windstille/src/menu_manager.hpp
   trunk/windstille/src/navigation/navigation_graph.cpp
   trunk/windstille/src/navigation/navigation_graph.hpp
   trunk/windstille/src/navigation/node.cpp
   trunk/windstille/src/navigation/node.hpp
   trunk/windstille/src/navigation/properties.cpp
   trunk/windstille/src/navigation/properties.hpp
   trunk/windstille/src/navigation/segment.cpp
   trunk/windstille/src/navigation/segment.hpp
   trunk/windstille/src/navigation/segment_position.cpp
   trunk/windstille/src/navigation/segment_position.hpp
   trunk/windstille/src/navigation_test.cpp
   trunk/windstille/src/navigation_test.hpp
   trunk/windstille/src/objects/background_gradient.cpp
   trunk/windstille/src/objects/background_gradient.hpp
   trunk/windstille/src/objects/bomb.cpp
   trunk/windstille/src/objects/bomb.hpp
   trunk/windstille/src/objects/hedgehog.cpp
   trunk/windstille/src/objects/hedgehog.hpp
   trunk/windstille/src/objects/nightvision.cpp
   trunk/windstille/src/objects/nightvision.hpp
   trunk/windstille/src/objects/shockwave.cpp
   trunk/windstille/src/objects/shockwave.hpp
   trunk/windstille/src/objects/spider_mine.cpp
   trunk/windstille/src/objects/spider_mine.hpp
   trunk/windstille/src/objects/swarm.cpp
   trunk/windstille/src/objects/swarm.hpp
   trunk/windstille/src/objects/vrdummy.cpp
   trunk/windstille/src/objects/vrdummy.hpp
   trunk/windstille/src/particle_viewer.cpp
   trunk/windstille/src/particle_viewer.hpp
   trunk/windstille/src/particles/deform_drawer.cpp
   trunk/windstille/src/particles/deform_drawer.hpp
   trunk/windstille/src/particles/drawer.hpp
   trunk/windstille/src/particles/particle_system.cpp
   trunk/windstille/src/particles/particle_system.hpp
   trunk/windstille/src/particles/randomizer.hpp
   trunk/windstille/src/particles/spark_drawer.cpp
   trunk/windstille/src/particles/spark_drawer.hpp
   trunk/windstille/src/particles/surface_drawer.cpp
   trunk/windstille/src/particles/surface_drawer.hpp
   trunk/windstille/src/pda.cpp
   trunk/windstille/src/pda.hpp
   trunk/windstille/src/pistol.cpp
   trunk/windstille/src/pistol.hpp
   trunk/windstille/src/player.cpp
   trunk/windstille/src/player.hpp
   trunk/windstille/src/random.cpp
   trunk/windstille/src/random.hpp
   trunk/windstille/src/refcounter.hpp
   trunk/windstille/src/response_curve.cpp
   trunk/windstille/src/response_curve.hpp
   trunk/windstille/src/screen.cpp
   trunk/windstille/src/screen.hpp
   trunk/windstille/src/screen_manager.cpp
   trunk/windstille/src/screen_manager.hpp
   trunk/windstille/src/scriptable_object.cpp
   trunk/windstille/src/scriptable_object.hpp
   trunk/windstille/src/scripting/interface.cpp
   trunk/windstille/src/scripting/interface.hpp
   trunk/windstille/src/scripting/util.cpp
   trunk/windstille/src/scripting/util.hpp
   trunk/windstille/src/sector.cpp
   trunk/windstille/src/sector.hpp
   trunk/windstille/src/sexpr_file_reader.cpp
   trunk/windstille/src/sexpr_file_reader.hpp
   trunk/windstille/src/sprite2d/data.cpp
   trunk/windstille/src/sprite2d/data.hpp
   trunk/windstille/src/sprite2d/manager.cpp
   trunk/windstille/src/sprite2d/manager.hpp
   trunk/windstille/src/sprite2d/sprite.cpp
   trunk/windstille/src/sprite2d/sprite.hpp
   trunk/windstille/src/sprite2dview.cpp
   trunk/windstille/src/sprite2dview.hpp
   trunk/windstille/src/sprite3d/data.hpp
   trunk/windstille/src/sprite3d/sprite3d.cpp
   trunk/windstille/src/sprite3d/sprite3d.hpp
   trunk/windstille/src/sprite3dview.cpp
   trunk/windstille/src/sprite3dview.hpp
   trunk/windstille/src/text_area.cpp
   trunk/windstille/src/text_area.hpp
   trunk/windstille/src/tile.cpp
   trunk/windstille/src/tile.hpp
   trunk/windstille/src/tile_description.cpp
   trunk/windstille/src/tile_description.hpp
   trunk/windstille/src/tile_factory.cpp
   trunk/windstille/src/tile_factory.hpp
   trunk/windstille/src/tile_map.cpp
   trunk/windstille/src/tile_map.hpp
   trunk/windstille/src/tile_packer.cpp
   trunk/windstille/src/tile_packer.hpp
   trunk/windstille/src/timer.cpp
   trunk/windstille/src/timer.hpp
   trunk/windstille/src/tinygettext/tinygettext.cpp
   trunk/windstille/src/tinygettext/tinygettext.hpp
   trunk/windstille/src/title_screen.cpp
   trunk/windstille/src/title_screen.hpp
   trunk/windstille/src/trigger.cpp
   trunk/windstille/src/trigger.hpp
   trunk/windstille/src/view.cpp
   trunk/windstille/src/view.hpp
   trunk/windstille/src/weapon.hpp
   trunk/windstille/src/windstille.hpp
   trunk/windstille/src/windstille_main.cpp
   trunk/windstille/src/windstille_main.hpp
Log:
Switched to GPLv3, cleaned up copyright header

Modified: trunk/windstille/COPYING
===================================================================
--- trunk/windstille/COPYING	2009-02-10 14:12:18 UTC (rev 2428)
+++ trunk/windstille/COPYING	2009-02-10 14:28:05 UTC (rev 2429)
@@ -1,301 +1,642 @@
-		    GNU GENERAL PUBLIC LICENSE
-		       Version 2, June 1991
+                    GNU GENERAL PUBLIC LICENSE
+                       Version 3, 29 June 2007
 
- Copyright (C) 1989, 1991 Free Software Foundation, Inc.
-     59 Temple Place, Suite 330, Boston, MA  02111-1307  USA
+ Copyright (C) 2007 Free Software Foundation, Inc. <http://fsf.org/>
  Everyone is permitted to copy and distribute verbatim copies
  of this license document, but changing it is not allowed.
 
-			    Preamble
+                            Preamble
 
-  The licenses for most software are designed to take away your
-freedom to share and change it.  By contrast, the GNU General Public
-License is intended to guarantee your freedom to share and change free
-software--to make sure the software is free for all its users.  This
-General Public License applies to most of the Free Software
-Foundation's software and to any other program whose authors commit to
-using it.  (Some other Free Software Foundation software is covered by
-the GNU Library General Public License instead.)  You can apply it to
+  The GNU General Public License is a free, copyleft license for
+software and other kinds of works.
+
+  The licenses for most software and other practical works are designed
+to take away your freedom to share and change the works.  By contrast,
+the GNU General Public License is intended to guarantee your freedom to
+share and change all versions of a program--to make sure it remains free
+software for all its users.  We, the Free Software Foundation, use the
+GNU General Public License for most of our software; it applies also to
+any other work released this way by its authors.  You can apply it to
 your programs, too.
 
   When we speak of free software, we are referring to freedom, not
 price.  Our General Public Licenses are designed to make sure that you
 have the freedom to distribute copies of free software (and charge for
-this service if you wish), that you receive source code or can get it
-if you want it, that you can change the software or use pieces of it
-in new free programs; and that you know you can do these things.
+them if you wish), that you receive source code or can get it if you
+want it, that you can change the software or use pieces of it in new
+free programs, and that you know you can do these things.
 
-  To protect your rights, we need to make restrictions that forbid
-anyone to deny you these rights or to ask you to surrender the rights.
-These restrictions translate to certain responsibilities for you if you
-distribute copies of the software, or if you modify it.
+  To protect your rights, we need to prevent others from denying you
+these rights or asking you to surrender the rights.  Therefore, you have
+certain responsibilities if you distribute copies of the software, or if
+you modify it: responsibilities to respect the freedom of others.
 
   For example, if you distribute copies of such a program, whether
-gratis or for a fee, you must give the recipients all the rights that
-you have.  You must make sure that they, too, receive or can get the
-source code.  And you must show them these terms so they know their
-rights.
+gratis or for a fee, you must pass on to the recipients the same
+freedoms that you received.  You must make sure that they, too, receive
+or can get the source code.  And you must show them these terms so they
+know their rights.
 
-  We protect your rights with two steps: (1) copyright the software, and
-(2) offer you this license which gives you legal permission to copy,
-distribute and/or modify the software.
+  Developers that use the GNU GPL protect your rights with two steps:
+(1) assert copyright on the software, and (2) offer you this License
+giving you legal permission to copy, distribute and/or modify it.
 
-  Also, for each author's protection and ours, we want to make certain
-that everyone understands that there is no warranty for this free
-software.  If the software is modified by someone else and passed on, we
-want its recipients to know that what they have is not the original, so
-that any problems introduced by others will not reflect on the original
-authors' reputations.
+  For the developers' and authors' protection, the GPL clearly explains
+that there is no warranty for this free software.  For both users' and
+authors' sake, the GPL requires that modified versions be marked as
+changed, so that their problems will not be attributed erroneously to
+authors of previous versions.
 
-  Finally, any free program is threatened constantly by software
-patents.  We wish to avoid the danger that redistributors of a free
-program will individually obtain patent licenses, in effect making the
-program proprietary.  To prevent this, we have made it clear that any
-patent must be licensed for everyone's free use or not licensed at all.
+  Some devices are designed to deny users access to install or run
+modified versions of the software inside them, although the manufacturer
+can do so.  This is fundamentally incompatible with the aim of
+protecting users' freedom to change the software.  The systematic
+pattern of such abuse occurs in the area of products for individuals to
+use, which is precisely where it is most unacceptable.  Therefore, we
+have designed this version of the GPL to prohibit the practice for those
+products.  If such problems arise substantially in other domains, we
+stand ready to extend this provision to those domains in future versions
+of the GPL, as needed to protect the freedom of users.
 
+  Finally, every program is threatened constantly by software patents.
+States should not allow patents to restrict development and use of
+software on general-purpose computers, but in those that do, we wish to
+avoid the special danger that patents applied to a free program could
+make it effectively proprietary.  To prevent this, the GPL assures that
+patents cannot be used to render the program non-free.
+
   The precise terms and conditions for copying, distribution and
 modification follow.
-
-		    GNU GENERAL PUBLIC LICENSE
-   TERMS AND CONDITIONS FOR COPYING, DISTRIBUTION AND MODIFICATION
 
-  0. This License applies to any program or other work which contains
-a notice placed by the copyright holder saying it may be distributed
-under the terms of this General Public License.  The "Program", below,
-refers to any such program or work, and a "work based on the Program"
-means either the Program or any derivative work under copyright law:
-that is to say, a work containing the Program or a portion of it,
-either verbatim or with modifications and/or translated into another
-language.  (Hereinafter, translation is included without limitation in
-the term "modification".)  Each licensee is addressed as "you".
+                       TERMS AND CONDITIONS
 
-Activities other than copying, distribution and modification are not
-covered by this License; they are outside its scope.  The act of
-running the Program is not restricted, and the output from the Program
-is covered only if its contents constitute a work based on the
-Program (independent of having been made by running the Program).
-Whether that is true depends on what the Program does.
+  0. Definitions.
 
-  1. You may copy and distribute verbatim copies of the Program's
-source code as you receive it, in any medium, provided that you
-conspicuously and appropriately publish on each copy an appropriate
-copyright notice and disclaimer of warranty; keep intact all the
-notices that refer to this License and to the absence of any warranty;
-and give any other recipients of the Program a copy of this License
-along with the Program.
+  "This License" refers to version 3 of the GNU General Public License.
 
-You may charge a fee for the physical act of transferring a copy, and
-you may at your option offer warranty protection in exchange for a fee.
+  "Copyright" also means copyright-like laws that apply to other kinds of
+works, such as semiconductor masks.
 
-  2. You may modify your copy or copies of the Program or any portion
-of it, thus forming a work based on the Program, and copy and
-distribute such modifications or work under the terms of Section 1
-above, provided that you also meet all of these conditions:
+  "The Program" refers to any copyrightable work licensed under this
+License.  Each licensee is addressed as "you".  "Licensees" and
+"recipients" may be individuals or organizations.
 
-    a) You must cause the modified files to carry prominent notices
-    stating that you changed the files and the date of any change.
+  To "modify" a work means to copy from or adapt all or part of the work
+in a fashion requiring copyright permission, other than the making of an
+exact copy.  The resulting work is called a "modified version" of the
+earlier work or a work "based on" the earlier work.
 
-    b) You must cause any work that you distribute or publish, that in
-    whole or in part contains or is derived from the Program or any
-    part thereof, to be licensed as a whole at no charge to all third
-    parties under the terms of this License.
+  A "covered work" means either the unmodified Program or a work based
+on the Program.
 
-    c) If the modified program normally reads commands interactively
-    when run, you must cause it, when started running for such
-    interactive use in the most ordinary way, to print or display an
-    announcement including an appropriate copyright notice and a
-    notice that there is no warranty (or else, saying that you provide
-    a warranty) and that users may redistribute the program under
-    these conditions, and telling the user how to view a copy of this
-    License.  (Exception: if the Program itself is interactive but
-    does not normally print such an announcement, your work based on
-    the Program is not required to print an announcement.)
-
-These requirements apply to the modified work as a whole.  If
-identifiable sections of that work are not derived from the Program,
-and can be reasonably considered independent and separate works in
-themselves, then this License, and its terms, do not apply to those
-sections when you distribute them as separate works.  But when you
-distribute the same sections as part of a whole which is a work based
-on the Program, the distribution of the whole must be on the terms of
-this License, whose permissions for other licensees extend to the
-entire whole, and thus to each and every part regardless of who wrote it.
+  To "propagate" a work means to do anything with it that, without
+permission, would make you directly or secondarily liable for
+infringement under applicable copyright law, except executing it on a
+computer or modifying a private copy.  Propagation includes copying,
+distribution (with or without modification), making available to the
+public, and in some countries other activities as well.
 
-Thus, it is not the intent of this section to claim rights or contest
-your rights to work written entirely by you; rather, the intent is to
-exercise the right to control the distribution of derivative or
-collective works based on the Program.
+  To "convey" a work means any kind of propagation that enables other
+parties to make or receive copies.  Mere interaction with a user through
+a computer network, with no transfer of a copy, is not conveying.
 
-In addition, mere aggregation of another work not based on the Program
-with the Program (or with a work based on the Program) on a volume of
-a storage or distribution medium does not bring the other work under
-the scope of this License.
+  An interactive user interface displays "Appropriate Legal Notices"
+to the extent that it includes a convenient and prominently visible
+feature that (1) displays an appropriate copyright notice, and (2)
+tells the user that there is no warranty for the work (except to the
+extent that warranties are provided), that licensees may convey the
+work under this License, and how to view a copy of this License.  If
+the interface presents a list of user commands or options, such as a
+menu, a prominent item in the list meets this criterion.
 
-  3. You may copy and distribute the Program (or a work based on it,
-under Section 2) in object code or executable form under the terms of
-Sections 1 and 2 above provided that you also do one of the following:
+  1. Source Code.
 
-    a) Accompany it with the complete corresponding machine-readable
-    source code, which must be distributed under the terms of Sections
-    1 and 2 above on a medium customarily used for software interchange; or,
+  The "source code" for a work means the preferred form of the work
+for making modifications to it.  "Object code" means any non-source
+form of a work.
 
-    b) Accompany it with a written offer, valid for at least three
-    years, to give any third party, for a charge no more than your
-    cost of physically performing source distribution, a complete
-    machine-readable copy of the corresponding source code, to be
-    distributed under the terms of Sections 1 and 2 above on a medium
-    customarily used for software interchange; or,
+  A "Standard Interface" means an interface that either is an official
+standard defined by a recognized standards body, or, in the case of
+interfaces specified for a particular programming language, one that
+is widely used among developers working in that language.
 
-    c) Accompany it with the information you received as to the offer
-    to distribute corresponding source code.  (This alternative is
-    allowed only for noncommercial distribution and only if you
-    received the program in object code or executable form with such
-    an offer, in accord with Subsection b above.)
+  The "System Libraries" of an executable work include anything, other
+than the work as a whole, that (a) is included in the normal form of
+packaging a Major Component, but which is not part of that Major
+Component, and (b) serves only to enable use of the work with that
+Major Component, or to implement a Standard Interface for which an
+implementation is available to the public in source code form.  A
+"Major Component", in this context, means a major essential component
+(kernel, window system, and so on) of the specific operating system
+(if any) on which the executable work runs, or a compiler used to
+produce the work, or an object code interpreter used to run it.
 
-The source code for a work means the preferred form of the work for
-making modifications to it.  For an executable work, complete source
-code means all the source code for all modules it contains, plus any
-associated interface definition files, plus the scripts used to
-control compilation and installation of the executable.  However, as a
-special exception, the source code distributed need not include
-anything that is normally distributed (in either source or binary
-form) with the major components (compiler, kernel, and so on) of the
-operating system on which the executable runs, unless that component
-itself accompanies the executable.
+  The "Corresponding Source" for a work in object code form means all
+the source code needed to generate, install, and (for an executable
+work) run the object code and to modify the work, including scripts to
+control those activities.  However, it does not include the work's
+System Libraries, or general-purpose tools or generally available free
+programs which are used unmodified in performing those activities but
+which are not part of the work.  For example, Corresponding Source
+includes interface definition files associated with source files for
+the work, and the source code for shared libraries and dynamically
+linked subprograms that the work is specifically designed to require,
+such as by intimate data communication or control flow between those
+subprograms and other parts of the work.
 
-If distribution of executable or object code is made by offering
-access to copy from a designated place, then offering equivalent
-access to copy the source code from the same place counts as
-distribution of the source code, even though third parties are not
-compelled to copy the source along with the object code.
-
-  4. You may not copy, modify, sublicense, or distribute the Program
-except as expressly provided under this License.  Any attempt
-otherwise to copy, modify, sublicense or distribute the Program is
-void, and will automatically terminate your rights under this License.
-However, parties who have received copies, or rights, from you under
-this License will not have their licenses terminated so long as such
-parties remain in full compliance.
+  The Corresponding Source need not include anything that users
+can regenerate automatically from other parts of the Corresponding
+Source.
 
-  5. You are not required to accept this License, since you have not
-signed it.  However, nothing else grants you permission to modify or
-distribute the Program or its derivative works.  These actions are
-prohibited by law if you do not accept this License.  Therefore, by
-modifying or distributing the Program (or any work based on the
-Program), you indicate your acceptance of this License to do so, and
-all its terms and conditions for copying, distributing or modifying
-the Program or works based on it.
+  The Corresponding Source for a work in source code form is that
+same work.
 
-  6. Each time you redistribute the Program (or any work based on the
-Program), the recipient automatically receives a license from the
-original licensor to copy, distribute or modify the Program subject to
-these terms and conditions.  You may not impose any further
-restrictions on the recipients' exercise of the rights granted herein.
-You are not responsible for enforcing compliance by third parties to
+  2. Basic Permissions.
+
+  All rights granted under this License are granted for the term of
+copyright on the Program, and are irrevocable provided the stated
+conditions are met.  This License explicitly affirms your unlimited
+permission to run the unmodified Program.  The output from running a
+covered work is covered by this License only if the output, given its
+content, constitutes a covered work.  This License acknowledges your
+rights of fair use or other equivalent, as provided by copyright law.
+
+  You may make, run and propagate covered works that you do not
+convey, without conditions so long as your license otherwise remains
+in force.  You may convey covered works to others for the sole purpose
+of having them make modifications exclusively for you, or provide you
+with facilities for running those works, provided that you comply with
+the terms of this License in conveying all material for which you do
+not control copyright.  Those thus making or running the covered works
+for you must do so exclusively on your behalf, under your direction
+and control, on terms that prohibit them from making any copies of
+your copyrighted material outside their relationship with you.
+
+  Conveying under any other circumstances is permitted solely under
+the conditions stated below.  Sublicensing is not allowed; section 10
+makes it unnecessary.
+
+  3. Protecting Users' Legal Rights From Anti-Circumvention Law.
+
+  No covered work shall be deemed part of an effective technological
+measure under any applicable law fulfilling obligations under article
+11 of the WIPO copyright treaty adopted on 20 December 1996, or
+similar laws prohibiting or restricting circumvention of such
+measures.
+
+  When you convey a covered work, you waive any legal power to forbid
+circumvention of technological measures to the extent such circumvention
+is effected by exercising rights under this License with respect to
+the covered work, and you disclaim any intention to limit operation or
+modification of the work as a means of enforcing, against the work's
+users, your or third parties' legal rights to forbid circumvention of
+technological measures.
+
+  4. Conveying Verbatim Copies.
+
+  You may convey verbatim copies of the Program's source code as you
+receive it, in any medium, provided that you conspicuously and
+appropriately publish on each copy an appropriate copyright notice;
+keep intact all notices stating that this License and any
+non-permissive terms added in accord with section 7 apply to the code;
+keep intact all notices of the absence of any warranty; and give all
+recipients a copy of this License along with the Program.
+
+  You may charge any price or no price for each copy that you convey,
+and you may offer support or warranty protection for a fee.
+
+  5. Conveying Modified Source Versions.
+
+  You may convey a work based on the Program, or the modifications to
+produce it from the Program, in the form of source code under the
+terms of section 4, provided that you also meet all of these conditions:
+
+    a) The work must carry prominent notices stating that you modified
+    it, and giving a relevant date.
+
+    b) The work must carry prominent notices stating that it is
+    released under this License and any conditions added under section
+    7.  This requirement modifies the requirement in section 4 to
+    "keep intact all notices".
+
+    c) You must license the entire work, as a whole, under this
+    License to anyone who comes into possession of a copy.  This
+    License will therefore apply, along with any applicable section 7
+    additional terms, to the whole of the work, and all its parts,
+    regardless of how they are packaged.  This License gives no
+    permission to license the work in any other way, but it does not
+    invalidate such permission if you have separately received it.
+
+    d) If the work has interactive user interfaces, each must display
+    Appropriate Legal Notices; however, if the Program has interactive
+    interfaces that do not display Appropriate Legal Notices, your
+    work need not make them do so.
+
+  A compilation of a covered work with other separate and independent
+works, which are not by their nature extensions of the covered work,
+and which are not combined with it such as to form a larger program,
+in or on a volume of a storage or distribution medium, is called an
+"aggregate" if the compilation and its resulting copyright are not
+used to limit the access or legal rights of the compilation's users
+beyond what the individual works permit.  Inclusion of a covered work
+in an aggregate does not cause this License to apply to the other
+parts of the aggregate.
+
+  6. Conveying Non-Source Forms.
+
+  You may convey a covered work in object code form under the terms
+of sections 4 and 5, provided that you also convey the
+machine-readable Corresponding Source under the terms of this License,
+in one of these ways:
+
+    a) Convey the object code in, or embodied in, a physical product
+    (including a physical distribution medium), accompanied by the
+    Corresponding Source fixed on a durable physical medium
+    customarily used for software interchange.
+
+    b) Convey the object code in, or embodied in, a physical product
+    (including a physical distribution medium), accompanied by a
+    written offer, valid for at least three years and valid for as
+    long as you offer spare parts or customer support for that product
+    model, to give anyone who possesses the object code either (1) a
+    copy of the Corresponding Source for all the software in the
+    product that is covered by this License, on a durable physical
+    medium customarily used for software interchange, for a price no
+    more than your reasonable cost of physically performing this
+    conveying of source, or (2) access to copy the
+    Corresponding Source from a network server at no charge.
+
+    c) Convey individual copies of the object code with a copy of the
+    written offer to provide the Corresponding Source.  This
+    alternative is allowed only occasionally and noncommercially, and
+    only if you received the object code with such an offer, in accord
+    with subsection 6b.
+
+    d) Convey the object code by offering access from a designated
+    place (gratis or for a charge), and offer equivalent access to the
+    Corresponding Source in the same way through the same place at no
+    further charge.  You need not require recipients to copy the
+    Corresponding Source along with the object code.  If the place to
+    copy the object code is a network server, the Corresponding Source
+    may be on a different server (operated by you or a third party)
+    that supports equivalent copying facilities, provided you maintain
+    clear directions next to the object code saying where to find the
+    Corresponding Source.  Regardless of what server hosts the
+    Corresponding Source, you remain obligated to ensure that it is
+    available for as long as needed to satisfy these requirements.
+
+    e) Convey the object code using peer-to-peer transmission, provided
+    you inform other peers where the object code and Corresponding
+    Source of the work are being offered to the general public at no
+    charge under subsection 6d.
+
+  A separable portion of the object code, whose source code is excluded
+from the Corresponding Source as a System Library, need not be
+included in conveying the object code work.
+
+  A "User Product" is either (1) a "consumer product", which means any
+tangible personal property which is normally used for personal, family,
+or household purposes, or (2) anything designed or sold for incorporation
+into a dwelling.  In determining whether a product is a consumer product,
+doubtful cases shall be resolved in favor of coverage.  For a particular
+product received by a particular user, "normally used" refers to a
+typical or common use of that class of product, regardless of the status
+of the particular user or of the way in which the particular user
+actually uses, or expects or is expected to use, the product.  A product
+is a consumer product regardless of whether the product has substantial
+commercial, industrial or non-consumer uses, unless such uses represent
+the only significant mode of use of the product.
+
+  "Installation Information" for a User Product means any methods,
+procedures, authorization keys, or other information required to install
+and execute modified versions of a covered work in that User Product from
+a modified version of its Corresponding Source.  The information must
+suffice to ensure that the continued functioning of the modified object
+code is in no case prevented or interfered with solely because
+modification has been made.
+
+  If you convey an object code work under this section in, or with, or
+specifically for use in, a User Product, and the conveying occurs as
+part of a transaction in which the right of possession and use of the
+User Product is transferred to the recipient in perpetuity or for a
+fixed term (regardless of how the transaction is characterized), the
+Corresponding Source conveyed under this section must be accompanied
+by the Installation Information.  But this requirement does not apply
+if neither you nor any third party retains the ability to install
+modified object code on the User Product (for example, the work has
+been installed in ROM).
+
+  The requirement to provide Installation Information does not include a
+requirement to continue to provide support service, warranty, or updates
+for a work that has been modified or installed by the recipient, or for
+the User Product in which it has been modified or installed.  Access to a
+network may be denied when the modification itself materially and
+adversely affects the operation of the network or violates the rules and
+protocols for communication across the network.
+
+  Corresponding Source conveyed, and Installation Information provided,
+in accord with this section must be in a format that is publicly
+documented (and with an implementation available to the public in
+source code form), and must require no special password or key for
+unpacking, reading or copying.
+
+  7. Additional Terms.
+
+  "Additional permissions" are terms that supplement the terms of this
+License by making exceptions from one or more of its conditions.
+Additional permissions that are applicable to the entire Program shall
+be treated as though they were included in this License, to the extent
+that they are valid under applicable law.  If additional permissions
+apply only to part of the Program, that part may be used separately
+under those permissions, but the entire Program remains governed by
+this License without regard to the additional permissions.
+
+  When you convey a copy of a covered work, you may at your option
+remove any additional permissions from that copy, or from any part of
+it.  (Additional permissions may be written to require their own
+removal in certain cases when you modify the work.)  You may place
+additional permissions on material, added by you to a covered work,
+for which you have or can give appropriate copyright permission.
+
+  Notwithstanding any other provision of this License, for material you
+add to a covered work, you may (if authorized by the copyright holders of
+that material) supplement the terms of this License with terms:
+
+    a) Disclaiming warranty or limiting liability differently from the
+    terms of sections 15 and 16 of this License; or
+
+    b) Requiring preservation of specified reasonable legal notices or
+    author attributions in that material or in the Appropriate Legal
+    Notices displayed by works containing it; or
+
+    c) Prohibiting misrepresentation of the origin of that material, or
+    requiring that modified versions of such material be marked in
+    reasonable ways as different from the original version; or
+
+    d) Limiting the use for publicity purposes of names of licensors or
+    authors of the material; or
+
+    e) Declining to grant rights under trademark law for use of some
+    trade names, trademarks, or service marks; or
+
+    f) Requiring indemnification of licensors and authors of that
+    material by anyone who conveys the material (or modified versions of
+    it) with contractual assumptions of liability to the recipient, for
+    any liability that these contractual assumptions directly impose on
+    those licensors and authors.
+
+  All other non-permissive additional terms are considered "further
+restrictions" within the meaning of section 10.  If the Program as you
+received it, or any part of it, contains a notice stating that it is
+governed by this License along with a term that is a further
+restriction, you may remove that term.  If a license document contains
+a further restriction but permits relicensing or conveying under this
+License, you may add to a covered work material governed by the terms
+of that license document, provided that the further restriction does
+not survive such relicensing or conveying.
+
+  If you add terms to a covered work in accord with this section, you
+must place, in the relevant source files, a statement of the
+additional terms that apply to those files, or a notice indicating
+where to find the applicable terms.
+
+  Additional terms, permissive or non-permissive, may be stated in the
+form of a separately written license, or stated as exceptions;
+the above requirements apply either way.
+
+  8. Termination.
+
+  You may not propagate or modify a covered work except as expressly
+provided under this License.  Any attempt otherwise to propagate or
+modify it is void, and will automatically terminate your rights under
+this License (including any patent licenses granted under the third
+paragraph of section 11).
+
+  However, if you cease all violation of this License, then your
+license from a particular copyright holder is reinstated (a)
+provisionally, unless and until the copyright holder explicitly and
+finally terminates your license, and (b) permanently, if the copyright
+holder fails to notify you of the violation by some reasonable means
+prior to 60 days after the cessation.
+
+  Moreover, your license from a particular copyright holder is
+reinstated permanently if the copyright holder notifies you of the
+violation by some reasonable means, this is the first time you have
+received notice of violation of this License (for any work) from that
+copyright holder, and you cure the violation prior to 30 days after
+your receipt of the notice.
+
+  Termination of your rights under this section does not terminate the
+licenses of parties who have received copies or rights from you under
+this License.  If your rights have been terminated and not permanently
+reinstated, you do not qualify to receive new licenses for the same
+material under section 10.
+
+  9. Acceptance Not Required for Having Copies.
+
+  You are not required to accept this License in order to receive or
+run a copy of the Program.  Ancillary propagation of a covered work
+occurring solely as a consequence of using peer-to-peer transmission
+to receive a copy likewise does not require acceptance.  However,
+nothing other than this License grants you permission to propagate or
+modify any covered work.  These actions infringe copyright if you do
+not accept this License.  Therefore, by modifying or propagating a
+covered work, you indicate your acceptance of this License to do so.
+
+  10. Automatic Licensing of Downstream Recipients.
+
+  Each time you convey a covered work, the recipient automatically
+receives a license from the original licensors, to run, modify and
+propagate that work, subject to this License.  You are not responsible
+for enforcing compliance by third parties with this License.
+
+  An "entity transaction" is a transaction transferring control of an
+organization, or substantially all assets of one, or subdividing an
+organization, or merging organizations.  If propagation of a covered
+work results from an entity transaction, each party to that
+transaction who receives a copy of the work also receives whatever
+licenses to the work the party's predecessor in interest had or could
+give under the previous paragraph, plus a right to possession of the
+Corresponding Source of the work from the predecessor in interest, if
+the predecessor has it or can get it with reasonable efforts.
+
+  You may not impose any further restrictions on the exercise of the
+rights granted or affirmed under this License.  For example, you may
+not impose a license fee, royalty, or other charge for exercise of
+rights granted under this License, and you may not initiate litigation
+(including a cross-claim or counterclaim in a lawsuit) alleging that
+any patent claim is infringed by making, using, selling, offering for
+sale, or importing the Program or any portion of it.
+
+  11. Patents.
+
+  A "contributor" is a copyright holder who authorizes use under this
+License of the Program or a work on which the Program is based.  The
+work thus licensed is called the contributor's "contributor version".
+
+  A contributor's "essential patent claims" are all patent claims
+owned or controlled by the contributor, whether already acquired or
+hereafter acquired, that would be infringed by some manner, permitted
+by this License, of making, using, or selling its contributor version,
+but do not include claims that would be infringed only as a
+consequence of further modification of the contributor version.  For
+purposes of this definition, "control" includes the right to grant
+patent sublicenses in a manner consistent with the requirements of
 this License.
 
-  7. If, as a consequence of a court judgment or allegation of patent
-infringement or for any other reason (not limited to patent issues),
-conditions are imposed on you (whether by court order, agreement or
+  Each contributor grants you a non-exclusive, worldwide, royalty-free
+patent license under the contributor's essential patent claims, to
+make, use, sell, offer for sale, import and otherwise run, modify and
+propagate the contents of its contributor version.
+
+  In the following three paragraphs, a "patent license" is any express
+agreement or commitment, however denominated, not to enforce a patent
+(such as an express permission to practice a patent or covenant not to
+sue for patent infringement).  To "grant" such a patent license to a
+party means to make such an agreement or commitment not to enforce a
+patent against the party.
+
+  If you convey a covered work, knowingly relying on a patent license,
+and the Corresponding Source of the work is not available for anyone
+to copy, free of charge and under the terms of this License, through a
+publicly available network server or other readily accessible means,
+then you must either (1) cause the Corresponding Source to be so
+available, or (2) arrange to deprive yourself of the benefit of the
+patent license for this particular work, or (3) arrange, in a manner
+consistent with the requirements of this License, to extend the patent
+license to downstream recipients.  "Knowingly relying" means you have
+actual knowledge that, but for the patent license, your conveying the
+covered work in a country, or your recipient's use of the covered work
+in a country, would infringe one or more identifiable patents in that
+country that you have reason to believe are valid.
+
+  If, pursuant to or in connection with a single transaction or
+arrangement, you convey, or propagate by procuring conveyance of, a
+covered work, and grant a patent license to some of the parties
+receiving the covered work authorizing them to use, propagate, modify
+or convey a specific copy of the covered work, then the patent license
+you grant is automatically extended to all recipients of the covered
+work and works based on it.
+
+  A patent license is "discriminatory" if it does not include within
+the scope of its coverage, prohibits the exercise of, or is
+conditioned on the non-exercise of one or more of the rights that are
+specifically granted under this License.  You may not convey a covered
+work if you are a party to an arrangement with a third party that is
+in the business of distributing software, under which you make payment
+to the third party based on the extent of your activity of conveying
+the work, and under which the third party grants, to any of the
+parties who would receive the covered work from you, a discriminatory
+patent license (a) in connection with copies of the covered work
+conveyed by you (or copies made from those copies), or (b) primarily
+for and in connection with specific products or compilations that
+contain the covered work, unless you entered into that arrangement,
+or that patent license was granted, prior to 28 March 2007.
+
+  Nothing in this License shall be construed as excluding or limiting
+any implied license or other defenses to infringement that may
+otherwise be available to you under applicable patent law.
+
+  12. No Surrender of Others' Freedom.
+
+  If conditions are imposed on you (whether by court order, agreement or
 otherwise) that contradict the conditions of this License, they do not
-excuse you from the conditions of this License.  If you cannot
-distribute so as to satisfy simultaneously your obligations under this
-License and any other pertinent obligations, then as a consequence you
-may not distribute the Program at all.  For example, if a patent
-license would not permit royalty-free redistribution of the Program by
-all those who receive copies directly or indirectly through you, then
-the only way you could satisfy both it and this License would be to
-refrain entirely from distribution of the Program.
+excuse you from the conditions of this License.  If you cannot convey a
+covered work so as to satisfy simultaneously your obligations under this
+License and any other pertinent obligations, then as a consequence you may
+not convey it at all.  For example, if you agree to terms that obligate you
+to collect a royalty for further conveying from those to whom you convey
+the Program, the only way you could satisfy both those terms and this
+License would be to refrain entirely from conveying the Program.
 
-If any portion of this section is held invalid or unenforceable under
-any particular circumstance, the balance of the section is intended to
-apply and the section as a whole is intended to apply in other
-circumstances.
+  13. Use with the GNU Affero General Public License.
 
-It is not the purpose of this section to induce you to infringe any
-patents or other property right claims or to contest validity of any
-such claims; this section has the sole purpose of protecting the
-integrity of the free software distribution system, which is
-implemented by public license practices.  Many people have made
-generous contributions to the wide range of software distributed
-through that system in reliance on consistent application of that
-system; it is up to the author/donor to decide if he or she is willing
-to distribute software through any other system and a licensee cannot
-impose that choice.
+  Notwithstanding any other provision of this License, you have
+permission to link or combine any covered work with a work licensed
+under version 3 of the GNU Affero General Public License into a single
+combined work, and to convey the resulting work.  The terms of this
+License will continue to apply to the part which is the covered work,
+but the special requirements of the GNU Affero General Public License,
+section 13, concerning interaction through a network will apply to the
+combination as such.
 
-This section is intended to make thoroughly clear what is believed to
-be a consequence of the rest of this License.
-
-  8. If the distribution and/or use of the Program is restricted in
-certain countries either by patents or by copyrighted interfaces, the
-original copyright holder who places the Program under this License
-may add an explicit geographical distribution limitation excluding
-those countries, so that distribution is permitted only in or among
-countries not thus excluded.  In such case, this License incorporates
-the limitation as if written in the body of this License.
+  14. Revised Versions of this License.
 
-  9. The Free Software Foundation may publish revised and/or new versions
-of the General Public License from time to time.  Such new versions will
+  The Free Software Foundation may publish revised and/or new versions of
+the GNU General Public License from time to time.  Such new versions will
 be similar in spirit to the present version, but may differ in detail to
 address new problems or concerns.
 
-Each version is given a distinguishing version number.  If the Program
-specifies a version number of this License which applies to it and "any
-later version", you have the option of following the terms and conditions
-either of that version or of any later version published by the Free
-Software Foundation.  If the Program does not specify a version number of
-this License, you may choose any version ever published by the Free Software
-Foundation.
+  Each version is given a distinguishing version number.  If the
+Program specifies that a certain numbered version of the GNU General
+Public License "or any later version" applies to it, you have the
+option of following the terms and conditions either of that numbered
+version or of any later version published by the Free Software
+Foundation.  If the Program does not specify a version number of the
+GNU General Public License, you may choose any version ever published
+by the Free Software Foundation.
 
-  10. If you wish to incorporate parts of the Program into other free
-programs whose distribution conditions are different, write to the author
-to ask for permission.  For software which is copyrighted by the Free
-Software Foundation, write to the Free Software Foundation; we sometimes
-make exceptions for this.  Our decision will be guided by the two goals
-of preserving the free status of all derivatives of our free software and
-of promoting the sharing and reuse of software generally.
+  If the Program specifies that a proxy can decide which future
+versions of the GNU General Public License can be used, that proxy's
+public statement of acceptance of a version permanently authorizes you
+to choose that version for the Program.
 
-			    NO WARRANTY
+  Later license versions may give you additional or different
+permissions.  However, no additional obligations are imposed on any
+author or copyright holder as a result of your choosing to follow a
+later version.
 
-  11. BECAUSE THE PROGRAM IS LICENSED FREE OF CHARGE, THERE IS NO WARRANTY
-FOR THE PROGRAM, TO THE EXTENT PERMITTED BY APPLICABLE LAW.  EXCEPT WHEN
-OTHERWISE STATED IN WRITING THE COPYRIGHT HOLDERS AND/OR OTHER PARTIES
-PROVIDE THE PROGRAM "AS IS" WITHOUT WARRANTY OF ANY KIND, EITHER EXPRESSED
-OR IMPLIED, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF
-MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE.  THE ENTIRE RISK AS
-TO THE QUALITY AND PERFORMANCE OF THE PROGRAM IS WITH YOU.  SHOULD THE
-PROGRAM PROVE DEFECTIVE, YOU ASSUME THE COST OF ALL NECESSARY SERVICING,
-REPAIR OR CORRECTION.
+  15. Disclaimer of Warranty.
 
-  12. IN NO EVENT UNLESS REQUIRED BY APPLICABLE LAW OR AGREED TO IN WRITING
-WILL ANY COPYRIGHT HOLDER, OR ANY OTHER PARTY WHO MAY MODIFY AND/OR
-REDISTRIBUTE THE PROGRAM AS PERMITTED ABOVE, BE LIABLE TO YOU FOR DAMAGES,
-INCLUDING ANY GENERAL, SPECIAL, INCIDENTAL OR CONSEQUENTIAL DAMAGES ARISING
-OUT OF THE USE OR INABILITY TO USE THE PROGRAM (INCLUDING BUT NOT LIMITED
-TO LOSS OF DATA OR DATA BEING RENDERED INACCURATE OR LOSSES SUSTAINED BY
-YOU OR THIRD PARTIES OR A FAILURE OF THE PROGRAM TO OPERATE WITH ANY OTHER
-PROGRAMS), EVEN IF SUCH HOLDER OR OTHER PARTY HAS BEEN ADVISED OF THE
-POSSIBILITY OF SUCH DAMAGES.
+  THERE IS NO WARRANTY FOR THE PROGRAM, TO THE EXTENT PERMITTED BY
+APPLICABLE LAW.  EXCEPT WHEN OTHERWISE STATED IN WRITING THE COPYRIGHT
+HOLDERS AND/OR OTHER PARTIES PROVIDE THE PROGRAM "AS IS" WITHOUT WARRANTY
+OF ANY KIND, EITHER EXPRESSED OR IMPLIED, INCLUDING, BUT NOT LIMITED TO,
+THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
+PURPOSE.  THE ENTIRE RISK AS TO THE QUALITY AND PERFORMANCE OF THE PROGRAM
+IS WITH YOU.  SHOULD THE PROGRAM PROVE DEFECTIVE, YOU ASSUME THE COST OF
+ALL NECESSARY SERVICING, REPAIR OR CORRECTION.
 
-		     END OF TERMS AND CONDITIONS
-
-	    How to Apply These Terms to Your New Programs
+  16. Limitation of Liability.
 
+  IN NO EVENT UNLESS REQUIRED BY APPLICABLE LAW OR AGREED TO IN WRITING
+WILL ANY COPYRIGHT HOLDER, OR ANY OTHER PARTY WHO MODIFIES AND/OR CONVEYS
+THE PROGRAM AS PERMITTED ABOVE, BE LIABLE TO YOU FOR DAMAGES, INCLUDING ANY
+GENERAL, SPECIAL, INCIDENTAL OR CONSEQUENTIAL DAMAGES ARISING OUT OF THE
+USE OR INABILITY TO USE THE PROGRAM (INCLUDING BUT NOT LIMITED TO LOSS OF
+DATA OR DATA BEING RENDERED INACCURATE OR LOSSES SUSTAINED BY YOU OR THIRD
+PARTIES OR A FAILURE OF THE PROGRAM TO OPERATE WITH ANY OTHER PROGRAMS),
+EVEN IF SUCH HOLDER OR OTHER PARTY HAS BEEN ADVISED OF THE POSSIBILITY OF
+SUCH DAMAGES.
+
+  17. Interpretation of Sections 15 and 16.
+
+  If the disclaimer of warranty and limitation of liability provided
+above cannot be given local legal effect according to their terms,
+reviewing courts shall apply local law that most closely approximates
+an absolute waiver of all civil liability in connection with the
+Program, unless a warranty or assumption of liability accompanies a
+copy of the Program in return for a fee.
+
+                     END OF TERMS AND CONDITIONS
+
+            How to Apply These Terms to Your New Programs
+
   If you develop a new program, and you want it to be of the greatest
 possible use to the public, the best way to achieve this is to make it
 free software which everyone can redistribute and change under these terms.
 
   To do so, attach the following notices to the program.  It is safest
 to attach them to the start of each source file to most effectively
-convey the exclusion of warranty; and each file should have at least
+state the exclusion of warranty; and each file should have at least
 the "copyright" line and a pointer to where the full notice is found.
 
     <one line to give the program's name and a brief idea of what it does.>
     Copyright (C) <year>  <name of author>
 
-    This program is free software; you can redistribute it and/or modify
+    This program is free software: you can redistribute it and/or modify
     it under the terms of the GNU General Public License as published by
-    the Free Software Foundation; either version 2 of the License, or
+    the Free Software Foundation, either version 3 of the License, or
     (at your option) any later version.
 
     This program is distributed in the hope that it will be useful,
@@ -304,37 +645,30 @@
     GNU General Public License for more details.
 
     You should have received a copy of the GNU General Public License
-    along with this program; if not, write to the Free Software
-    Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA
+    along with this program.  If not, see <http://www.gnu.org/licenses/>.
 
-
 Also add information on how to contact you by electronic and paper mail.
 
-If the program is interactive, make it output a short notice like this
-when it starts in an interactive mode:
+  If the program does terminal interaction, make it output a short
+notice like this when it starts in an interactive mode:
 
-    Gnomovision version 69, Copyright (C) year  name of author
-    Gnomovision comes with ABSOLUTELY NO WARRANTY; for details type `show w'.
+    <program>  Copyright (C) <year>  <name of author>
+    This program comes with ABSOLUTELY NO WARRANTY; for details type `show w'.
     This is free software, and you are welcome to redistribute it
     under certain conditions; type `show c' for details.
 
 The hypothetical commands `show w' and `show c' should show the appropriate
-parts of the General Public License.  Of course, the commands you use may
-be called something other than `show w' and `show c'; they could even be
-mouse-clicks or menu items--whatever suits your program.
+parts of the General Public License.  Of course, your program's commands
+might be different; for a GUI interface, you would use an "about box".
 
-You should also get your employer (if you work as a programmer) or your
-school, if any, to sign a "copyright disclaimer" for the program, if
-necessary.  Here is a sample; alter the names:
+  You should also get your employer (if you work as a programmer) or school,
+if any, to sign a "copyright disclaimer" for the program, if necessary.
+For more information on this, and how to apply and follow the GNU GPL, see
+<http://www.gnu.org/licenses/>.
 
-  Yoyodyne, Inc., hereby disclaims all copyright interest in the program
-  `Gnomovision' (which makes passes at compilers) written by James Hacker.
-
-  <signature of Ty Coon>, 1 April 1989
-  Ty Coon, President of Vice
-
-This General Public License does not permit incorporating your program into
-proprietary programs.  If your program is a subroutine library, you may
-consider it more useful to permit linking proprietary applications with the
-library.  If this is what you want to do, use the GNU Library General
-Public License instead of this License.
+  The GNU General Public License does not permit incorporating your program
+into proprietary programs.  If your program is a subroutine library, you
+may consider it more useful to permit linking proprietary applications with
+the library.  If this is what you want to do, use the GNU Lesser General
+Public License instead of this License.  But first, please read
+<http://www.gnu.org/philosophy/why-not-lgpl.html>.

Modified: trunk/windstille/src/armature/action.hpp
===================================================================
--- trunk/windstille/src/armature/action.hpp	2009-02-10 14:12:18 UTC (rev 2428)
+++ trunk/windstille/src/armature/action.hpp	2009-02-10 14:28:05 UTC (rev 2429)
@@ -1,26 +1,19 @@
-/*  $Id$
-**   __      __ __             ___        __   __ __   __
-**  /  \    /  \__| ____    __| _/_______/  |_|__|  | |  |   ____
-**  \   \/\/   /  |/    \  / __ |/  ___/\   __\  |  | |  | _/ __ \
-**   \        /|  |   |  \/ /_/ |\___ \  |  | |  |  |_|  |_\  ___/
-**    \__/\  / |__|___|  /\____ /____  > |__| |__|____/____/\___  >
-**         \/          \/      \/    \/                         \/
+/*
+**  Windstille - A Sci-Fi Action-Adventure Game
 **  Copyright (C) 2007 Ingo Ruhnke <grumbel at gmx.de>
 **
-**  This program is free software; you can redistribute it and/or
-**  modify it under the terms of the GNU General Public License
-**  as published by the Free Software Foundation; either version 2
-**  of the License, or (at your option) any later version.
-**
+**  This program is free software: you can redistribute it and/or modify
+**  it under the terms of the GNU General Public License as published by
+**  the Free Software Foundation, either version 3 of the License, or
+**  (at your option) any later version.
+**  
 **  This program is distributed in the hope that it will be useful,
 **  but WITHOUT ANY WARRANTY; without even the implied warranty of
 **  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 **  GNU General Public License for more details.
-** 
+**  
 **  You should have received a copy of the GNU General Public License
-**  along with this program; if not, write to the Free Software
-**  Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA
-**  02111-1307, USA.
+**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
 #ifndef HEADER_ACTION_HPP

Modified: trunk/windstille/src/armature/armature.cpp
===================================================================
--- trunk/windstille/src/armature/armature.cpp	2009-02-10 14:12:18 UTC (rev 2428)
+++ trunk/windstille/src/armature/armature.cpp	2009-02-10 14:28:05 UTC (rev 2429)
@@ -1,26 +1,19 @@
-/*  $Id$
-**   __      __ __             ___        __   __ __   __
-**  /  \    /  \__| ____    __| _/_______/  |_|__|  | |  |   ____
-**  \   \/\/   /  |/    \  / __ |/  ___/\   __\  |  | |  | _/ __ \
-**   \        /|  |   |  \/ /_/ |\___ \  |  | |  |  |_|  |_\  ___/
-**    \__/\  / |__|___|  /\____ /____  > |__| |__|____/____/\___  >
-**         \/          \/      \/    \/                         \/
+/*
+**  Windstille - A Sci-Fi Action-Adventure Game
 **  Copyright (C) 2007 Ingo Ruhnke <grumbel at gmx.de>
 **
-**  This program is free software; you can redistribute it and/or
-**  modify it under the terms of the GNU General Public License
-**  as published by the Free Software Foundation; either version 2
-**  of the License, or (at your option) any later version.
-**
+**  This program is free software: you can redistribute it and/or modify
+**  it under the terms of the GNU General Public License as published by
+**  the Free Software Foundation, either version 3 of the License, or
+**  (at your option) any later version.
+**  
 **  This program is distributed in the hope that it will be useful,
 **  but WITHOUT ANY WARRANTY; without even the implied warranty of
 **  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 **  GNU General Public License for more details.
-** 
+**  
 **  You should have received a copy of the GNU General Public License
-**  along with this program; if not, write to the Free Software
-**  Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA
-**  02111-1307, USA.
+**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
 #include <GL/glew.h>

Modified: trunk/windstille/src/armature/armature.hpp
===================================================================
--- trunk/windstille/src/armature/armature.hpp	2009-02-10 14:12:18 UTC (rev 2428)
+++ trunk/windstille/src/armature/armature.hpp	2009-02-10 14:28:05 UTC (rev 2429)
@@ -1,26 +1,19 @@
-/*  $Id$
-**   __      __ __             ___        __   __ __   __
-**  /  \    /  \__| ____    __| _/_______/  |_|__|  | |  |   ____
-**  \   \/\/   /  |/    \  / __ |/  ___/\   __\  |  | |  | _/ __ \
-**   \        /|  |   |  \/ /_/ |\___ \  |  | |  |  |_|  |_\  ___/
-**    \__/\  / |__|___|  /\____ /____  > |__| |__|____/____/\___  >
-**         \/          \/      \/    \/                         \/
+/*
+**  Windstille - A Sci-Fi Action-Adventure Game
 **  Copyright (C) 2007 Ingo Ruhnke <grumbel at gmx.de>
 **
-**  This program is free software; you can redistribute it and/or
-**  modify it under the terms of the GNU General Public License
-**  as published by the Free Software Foundation; either version 2
-**  of the License, or (at your option) any later version.
-**
+**  This program is free software: you can redistribute it and/or modify
+**  it under the terms of the GNU General Public License as published by
+**  the Free Software Foundation, either version 3 of the License, or
+**  (at your option) any later version.
+**  
 **  This program is distributed in the hope that it will be useful,
 **  but WITHOUT ANY WARRANTY; without even the implied warranty of
 **  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 **  GNU General Public License for more details.
-** 
+**  
 **  You should have received a copy of the GNU General Public License
-**  along with this program; if not, write to the Free Software
-**  Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA
-**  02111-1307, USA.
+**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
 #ifndef HEADER_ARMATURE_HPP

Modified: trunk/windstille/src/armature/bone.cpp
===================================================================
--- trunk/windstille/src/armature/bone.cpp	2009-02-10 14:12:18 UTC (rev 2428)
+++ trunk/windstille/src/armature/bone.cpp	2009-02-10 14:28:05 UTC (rev 2429)
@@ -1,26 +1,19 @@
-/*  $Id$
-**   __      __ __             ___        __   __ __   __
-**  /  \    /  \__| ____    __| _/_______/  |_|__|  | |  |   ____
-**  \   \/\/   /  |/    \  / __ |/  ___/\   __\  |  | |  | _/ __ \
-**   \        /|  |   |  \/ /_/ |\___ \  |  | |  |  |_|  |_\  ___/
-**    \__/\  / |__|___|  /\____ /____  > |__| |__|____/____/\___  >
-**         \/          \/      \/    \/                         \/
+/*
+**  Windstille - A Sci-Fi Action-Adventure Game
 **  Copyright (C) 2007 Ingo Ruhnke <grumbel at gmx.de>
 **
-**  This program is free software; you can redistribute it and/or
-**  modify it under the terms of the GNU General Public License
-**  as published by the Free Software Foundation; either version 2
-**  of the License, or (at your option) any later version.
-**
+**  This program is free software: you can redistribute it and/or modify
+**  it under the terms of the GNU General Public License as published by
+**  the Free Software Foundation, either version 3 of the License, or
+**  (at your option) any later version.
+**  
 **  This program is distributed in the hope that it will be useful,
 **  but WITHOUT ANY WARRANTY; without even the implied warranty of
 **  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 **  GNU General Public License for more details.
-** 
+**  
 **  You should have received a copy of the GNU General Public License
-**  along with this program; if not, write to the Free Software
-**  Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA
-**  02111-1307, USA.
+**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
 #include "bone.hpp"

Modified: trunk/windstille/src/armature/bone.hpp
===================================================================
--- trunk/windstille/src/armature/bone.hpp	2009-02-10 14:12:18 UTC (rev 2428)
+++ trunk/windstille/src/armature/bone.hpp	2009-02-10 14:28:05 UTC (rev 2429)
@@ -1,26 +1,19 @@
-/*  $Id$
-**   __      __ __             ___        __   __ __   __
-**  /  \    /  \__| ____    __| _/_______/  |_|__|  | |  |   ____
-**  \   \/\/   /  |/    \  / __ |/  ___/\   __\  |  | |  | _/ __ \
-**   \        /|  |   |  \/ /_/ |\___ \  |  | |  |  |_|  |_\  ___/
-**    \__/\  / |__|___|  /\____ /____  > |__| |__|____/____/\___  >
-**         \/          \/      \/    \/                         \/
+/*
+**  Windstille - A Sci-Fi Action-Adventure Game
 **  Copyright (C) 2007 Ingo Ruhnke <grumbel at gmx.de>
 **
-**  This program is free software; you can redistribute it and/or
-**  modify it under the terms of the GNU General Public License
-**  as published by the Free Software Foundation; either version 2
-**  of the License, or (at your option) any later version.
-**
+**  This program is free software: you can redistribute it and/or modify
+**  it under the terms of the GNU General Public License as published by
+**  the Free Software Foundation, either version 3 of the License, or
+**  (at your option) any later version.
+**  
 **  This program is distributed in the hope that it will be useful,
 **  but WITHOUT ANY WARRANTY; without even the implied warranty of
 **  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 **  GNU General Public License for more details.
-** 
+**  
 **  You should have received a copy of the GNU General Public License
-**  along with this program; if not, write to the Free Software
-**  Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA
-**  02111-1307, USA.
+**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
 #ifndef HEADER_SKELETON_BONE_HPP

Modified: trunk/windstille/src/armature/ipo_curve.cpp
===================================================================
--- trunk/windstille/src/armature/ipo_curve.cpp	2009-02-10 14:12:18 UTC (rev 2428)
+++ trunk/windstille/src/armature/ipo_curve.cpp	2009-02-10 14:28:05 UTC (rev 2429)
@@ -1,26 +1,19 @@
-/*  $Id$
-**   __      __ __             ___        __   __ __   __
-**  /  \    /  \__| ____    __| _/_______/  |_|__|  | |  |   ____
-**  \   \/\/   /  |/    \  / __ |/  ___/\   __\  |  | |  | _/ __ \
-**   \        /|  |   |  \/ /_/ |\___ \  |  | |  |  |_|  |_\  ___/
-**    \__/\  / |__|___|  /\____ /____  > |__| |__|____/____/\___  >
-**         \/          \/      \/    \/                         \/
+/*
+**  Windstille - A Sci-Fi Action-Adventure Game
 **  Copyright (C) 2007 Ingo Ruhnke <grumbel at gmx.de>
 **
-**  This program is free software; you can redistribute it and/or
-**  modify it under the terms of the GNU General Public License
-**  as published by the Free Software Foundation; either version 2
-**  of the License, or (at your option) any later version.
-**
+**  This program is free software: you can redistribute it and/or modify
+**  it under the terms of the GNU General Public License as published by
+**  the Free Software Foundation, either version 3 of the License, or
+**  (at your option) any later version.
+**  
 **  This program is distributed in the hope that it will be useful,
 **  but WITHOUT ANY WARRANTY; without even the implied warranty of
 **  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 **  GNU General Public License for more details.
-** 
+**  
 **  You should have received a copy of the GNU General Public License
-**  along with this program; if not, write to the Free Software
-**  Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA
-**  02111-1307, USA.
+**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
 #include "ipo_curve.hpp"

Modified: trunk/windstille/src/armature/ipo_curve.hpp
===================================================================
--- trunk/windstille/src/armature/ipo_curve.hpp	2009-02-10 14:12:18 UTC (rev 2428)
+++ trunk/windstille/src/armature/ipo_curve.hpp	2009-02-10 14:28:05 UTC (rev 2429)
@@ -1,26 +1,19 @@
-/*  $Id$
-**   __      __ __             ___        __   __ __   __
-**  /  \    /  \__| ____    __| _/_______/  |_|__|  | |  |   ____
-**  \   \/\/   /  |/    \  / __ |/  ___/\   __\  |  | |  | _/ __ \
-**   \        /|  |   |  \/ /_/ |\___ \  |  | |  |  |_|  |_\  ___/
-**    \__/\  / |__|___|  /\____ /____  > |__| |__|____/____/\___  >
-**         \/          \/      \/    \/                         \/
+/*
+**  Windstille - A Sci-Fi Action-Adventure Game
 **  Copyright (C) 2007 Ingo Ruhnke <grumbel at gmx.de>
 **
-**  This program is free software; you can redistribute it and/or
-**  modify it under the terms of the GNU General Public License
-**  as published by the Free Software Foundation; either version 2
-**  of the License, or (at your option) any later version.
-**
+**  This program is free software: you can redistribute it and/or modify
+**  it under the terms of the GNU General Public License as published by
+**  the Free Software Foundation, either version 3 of the License, or
+**  (at your option) any later version.
+**  
 **  This program is distributed in the hope that it will be useful,
 **  but WITHOUT ANY WARRANTY; without even the implied warranty of
 **  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 **  GNU General Public License for more details.
-** 
+**  
 **  You should have received a copy of the GNU General Public License
-**  along with this program; if not, write to the Free Software
-**  Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA
-**  02111-1307, USA.
+**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
 #ifndef HEADER_IPO_CURVE_HPP

Modified: trunk/windstille/src/armature/mesh.cpp
===================================================================
--- trunk/windstille/src/armature/mesh.cpp	2009-02-10 14:12:18 UTC (rev 2428)
+++ trunk/windstille/src/armature/mesh.cpp	2009-02-10 14:28:05 UTC (rev 2429)
@@ -1,26 +1,19 @@
-/*  $Id$
-**   __      __ __             ___        __   __ __   __
-**  /  \    /  \__| ____    __| _/_______/  |_|__|  | |  |   ____
-**  \   \/\/   /  |/    \  / __ |/  ___/\   __\  |  | |  | _/ __ \
-**   \        /|  |   |  \/ /_/ |\___ \  |  | |  |  |_|  |_\  ___/
-**    \__/\  / |__|___|  /\____ /____  > |__| |__|____/____/\___  >
-**         \/          \/      \/    \/                         \/
+/*
+**  Windstille - A Sci-Fi Action-Adventure Game
 **  Copyright (C) 2007 Ingo Ruhnke <grumbel at gmx.de>
 **
-**  This program is free software; you can redistribute it and/or
-**  modify it under the terms of the GNU General Public License
-**  as published by the Free Software Foundation; either version 2
-**  of the License, or (at your option) any later version.
-**
+**  This program is free software: you can redistribute it and/or modify
+**  it under the terms of the GNU General Public License as published by
+**  the Free Software Foundation, either version 3 of the License, or
+**  (at your option) any later version.
+**  
 **  This program is distributed in the hope that it will be useful,
 **  but WITHOUT ANY WARRANTY; without even the implied warranty of
 **  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 **  GNU General Public License for more details.
-** 
+**  
 **  You should have received a copy of the GNU General Public License
-**  along with this program; if not, write to the Free Software
-**  Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA
-**  02111-1307, USA.
+**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
 #include <assert.h>

Modified: trunk/windstille/src/armature/mesh.hpp
===================================================================
--- trunk/windstille/src/armature/mesh.hpp	2009-02-10 14:12:18 UTC (rev 2428)
+++ trunk/windstille/src/armature/mesh.hpp	2009-02-10 14:28:05 UTC (rev 2429)
@@ -1,26 +1,19 @@
-/*  $Id$
-**   __      __ __             ___        __   __ __   __
-**  /  \    /  \__| ____    __| _/_______/  |_|__|  | |  |   ____
-**  \   \/\/   /  |/    \  / __ |/  ___/\   __\  |  | |  | _/ __ \
-**   \        /|  |   |  \/ /_/ |\___ \  |  | |  |  |_|  |_\  ___/
-**    \__/\  / |__|___|  /\____ /____  > |__| |__|____/____/\___  >
-**         \/          \/      \/    \/                         \/
+/*
+**  Windstille - A Sci-Fi Action-Adventure Game
 **  Copyright (C) 2007 Ingo Ruhnke <grumbel at gmx.de>
 **
-**  This program is free software; you can redistribute it and/or
-**  modify it under the terms of the GNU General Public License
-**  as published by the Free Software Foundation; either version 2
-**  of the License, or (at your option) any later version.
-**
+**  This program is free software: you can redistribute it and/or modify
+**  it under the terms of the GNU General Public License as published by
+**  the Free Software Foundation, either version 3 of the License, or
+**  (at your option) any later version.
+**  
 **  This program is distributed in the hope that it will be useful,
 **  but WITHOUT ANY WARRANTY; without even the implied warranty of
 **  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 **  GNU General Public License for more details.
-** 
+**  
 **  You should have received a copy of the GNU General Public License
-**  along with this program; if not, write to the Free Software
-**  Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA
-**  02111-1307, USA.
+**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
 #ifndef HEADER_MESH_HPP

Modified: trunk/windstille/src/armature/model.cpp
===================================================================
--- trunk/windstille/src/armature/model.cpp	2009-02-10 14:12:18 UTC (rev 2428)
+++ trunk/windstille/src/armature/model.cpp	2009-02-10 14:28:05 UTC (rev 2429)
@@ -1,26 +1,19 @@
-/*  $Id$
-**   __      __ __             ___        __   __ __   __
-**  /  \    /  \__| ____    __| _/_______/  |_|__|  | |  |   ____
-**  \   \/\/   /  |/    \  / __ |/  ___/\   __\  |  | |  | _/ __ \
-**   \        /|  |   |  \/ /_/ |\___ \  |  | |  |  |_|  |_\  ___/
-**    \__/\  / |__|___|  /\____ /____  > |__| |__|____/____/\___  >
-**         \/          \/      \/    \/                         \/
+/*
+**  Windstille - A Sci-Fi Action-Adventure Game
 **  Copyright (C) 2007 Ingo Ruhnke <grumbel at gmx.de>
 **
-**  This program is free software; you can redistribute it and/or
-**  modify it under the terms of the GNU General Public License
-**  as published by the Free Software Foundation; either version 2
-**  of the License, or (at your option) any later version.
-**
+**  This program is free software: you can redistribute it and/or modify
+**  it under the terms of the GNU General Public License as published by
+**  the Free Software Foundation, either version 3 of the License, or
+**  (at your option) any later version.
+**  
 **  This program is distributed in the hope that it will be useful,
 **  but WITHOUT ANY WARRANTY; without even the implied warranty of
 **  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 **  GNU General Public License for more details.
-** 
+**  
 **  You should have received a copy of the GNU General Public License
-**  along with this program; if not, write to the Free Software
-**  Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA
-**  02111-1307, USA.
+**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
 #include <iostream>

Modified: trunk/windstille/src/armature/model.hpp
===================================================================
--- trunk/windstille/src/armature/model.hpp	2009-02-10 14:12:18 UTC (rev 2428)
+++ trunk/windstille/src/armature/model.hpp	2009-02-10 14:28:05 UTC (rev 2429)
@@ -1,26 +1,19 @@
-/*  $Id$
-**   __      __ __             ___        __   __ __   __
-**  /  \    /  \__| ____    __| _/_______/  |_|__|  | |  |   ____
-**  \   \/\/   /  |/    \  / __ |/  ___/\   __\  |  | |  | _/ __ \
-**   \        /|  |   |  \/ /_/ |\___ \  |  | |  |  |_|  |_\  ___/
-**    \__/\  / |__|___|  /\____ /____  > |__| |__|____/____/\___  >
-**         \/          \/      \/    \/                         \/
+/*
+**  Windstille - A Sci-Fi Action-Adventure Game
 **  Copyright (C) 2007 Ingo Ruhnke <grumbel at gmx.de>
 **
-**  This program is free software; you can redistribute it and/or
-**  modify it under the terms of the GNU General Public License
-**  as published by the Free Software Foundation; either version 2
-**  of the License, or (at your option) any later version.
-**
+**  This program is free software: you can redistribute it and/or modify
+**  it under the terms of the GNU General Public License as published by
+**  the Free Software Foundation, either version 3 of the License, or
+**  (at your option) any later version.
+**  
 **  This program is distributed in the hope that it will be useful,
 **  but WITHOUT ANY WARRANTY; without even the implied warranty of
 **  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 **  GNU General Public License for more details.
-** 
+**  
 **  You should have received a copy of the GNU General Public License
-**  along with this program; if not, write to the Free Software
-**  Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA
-**  02111-1307, USA.
+**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
 #ifndef HEADER_MODEL_HPP

Modified: trunk/windstille/src/armature/pose.cpp
===================================================================
--- trunk/windstille/src/armature/pose.cpp	2009-02-10 14:12:18 UTC (rev 2428)
+++ trunk/windstille/src/armature/pose.cpp	2009-02-10 14:28:05 UTC (rev 2429)
@@ -1,26 +1,19 @@
-/*  $Id$
-**   __      __ __             ___        __   __ __   __
-**  /  \    /  \__| ____    __| _/_______/  |_|__|  | |  |   ____
-**  \   \/\/   /  |/    \  / __ |/  ___/\   __\  |  | |  | _/ __ \
-**   \        /|  |   |  \/ /_/ |\___ \  |  | |  |  |_|  |_\  ___/
-**    \__/\  / |__|___|  /\____ /____  > |__| |__|____/____/\___  >
-**         \/          \/      \/    \/                         \/
+/*
+**  Windstille - A Sci-Fi Action-Adventure Game
 **  Copyright (C) 2007 Ingo Ruhnke <grumbel at gmx.de>
 **
-**  This program is free software; you can redistribute it and/or
-**  modify it under the terms of the GNU General Public License
-**  as published by the Free Software Foundation; either version 2
-**  of the License, or (at your option) any later version.
-**
+**  This program is free software: you can redistribute it and/or modify
+**  it under the terms of the GNU General Public License as published by
+**  the Free Software Foundation, either version 3 of the License, or
+**  (at your option) any later version.
+**  
 **  This program is distributed in the hope that it will be useful,
 **  but WITHOUT ANY WARRANTY; without even the implied warranty of
 **  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 **  GNU General Public License for more details.
-** 
+**  
 **  You should have received a copy of the GNU General Public License
-**  along with this program; if not, write to the Free Software
-**  Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA
-**  02111-1307, USA.
+**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
 #include <iostream>

Modified: trunk/windstille/src/armature/pose.hpp
===================================================================
--- trunk/windstille/src/armature/pose.hpp	2009-02-10 14:12:18 UTC (rev 2428)
+++ trunk/windstille/src/armature/pose.hpp	2009-02-10 14:28:05 UTC (rev 2429)
@@ -1,26 +1,19 @@
-/*  $Id$
-**   __      __ __             ___        __   __ __   __
-**  /  \    /  \__| ____    __| _/_______/  |_|__|  | |  |   ____
-**  \   \/\/   /  |/    \  / __ |/  ___/\   __\  |  | |  | _/ __ \
-**   \        /|  |   |  \/ /_/ |\___ \  |  | |  |  |_|  |_\  ___/
-**    \__/\  / |__|___|  /\____ /____  > |__| |__|____/____/\___  >
-**         \/          \/      \/    \/                         \/
+/*
+**  Windstille - A Sci-Fi Action-Adventure Game
 **  Copyright (C) 2007 Ingo Ruhnke <grumbel at gmx.de>
 **
-**  This program is free software; you can redistribute it and/or
-**  modify it under the terms of the GNU General Public License
-**  as published by the Free Software Foundation; either version 2
-**  of the License, or (at your option) any later version.
-**
+**  This program is free software: you can redistribute it and/or modify
+**  it under the terms of the GNU General Public License as published by
+**  the Free Software Foundation, either version 3 of the License, or
+**  (at your option) any later version.
+**  
 **  This program is distributed in the hope that it will be useful,
 **  but WITHOUT ANY WARRANTY; without even the implied warranty of
 **  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 **  GNU General Public License for more details.
-** 
+**  
 **  You should have received a copy of the GNU General Public License
-**  along with this program; if not, write to the Free Software
-**  Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA
-**  02111-1307, USA.
+**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
 #ifndef HEADER_POSE_HPP

Modified: trunk/windstille/src/armature/pose_bone.hpp
===================================================================
--- trunk/windstille/src/armature/pose_bone.hpp	2009-02-10 14:12:18 UTC (rev 2428)
+++ trunk/windstille/src/armature/pose_bone.hpp	2009-02-10 14:28:05 UTC (rev 2429)
@@ -1,26 +1,19 @@
-/*  $Id$
-**   __      __ __             ___        __   __ __   __
-**  /  \    /  \__| ____    __| _/_______/  |_|__|  | |  |   ____
-**  \   \/\/   /  |/    \  / __ |/  ___/\   __\  |  | |  | _/ __ \
-**   \        /|  |   |  \/ /_/ |\___ \  |  | |  |  |_|  |_\  ___/
-**    \__/\  / |__|___|  /\____ /____  > |__| |__|____/____/\___  >
-**         \/          \/      \/    \/                         \/
+/*
+**  Windstille - A Sci-Fi Action-Adventure Game
 **  Copyright (C) 2007 Ingo Ruhnke <grumbel at gmx.de>
 **
-**  This program is free software; you can redistribute it and/or
-**  modify it under the terms of the GNU General Public License
-**  as published by the Free Software Foundation; either version 2
-**  of the License, or (at your option) any later version.
-**
+**  This program is free software: you can redistribute it and/or modify
+**  it under the terms of the GNU General Public License as published by
+**  the Free Software Foundation, either version 3 of the License, or
+**  (at your option) any later version.
+**  
 **  This program is distributed in the hope that it will be useful,
 **  but WITHOUT ANY WARRANTY; without even the implied warranty of
 **  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 **  GNU General Public License for more details.
-** 
+**  
 **  You should have received a copy of the GNU General Public License
-**  along with this program; if not, write to the Free Software
-**  Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA
-**  02111-1307, USA.
+**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
 #ifndef HEADER_POSE_BONE_HPP

Modified: trunk/windstille/src/armature_test.cpp
===================================================================
--- trunk/windstille/src/armature_test.cpp	2009-02-10 14:12:18 UTC (rev 2428)
+++ trunk/windstille/src/armature_test.cpp	2009-02-10 14:28:05 UTC (rev 2429)
@@ -1,26 +1,19 @@
-/*  $Id$
-**   __      __ __             ___        __   __ __   __
-**  /  \    /  \__| ____    __| _/_______/  |_|__|  | |  |   ____
-**  \   \/\/   /  |/    \  / __ |/  ___/\   __\  |  | |  | _/ __ \
-**   \        /|  |   |  \/ /_/ |\___ \  |  | |  |  |_|  |_\  ___/
-**    \__/\  / |__|___|  /\____ /____  > |__| |__|____/____/\___  >
-**         \/          \/      \/    \/                         \/
+/*
+**  Windstille - A Sci-Fi Action-Adventure Game
 **  Copyright (C) 2007 Ingo Ruhnke <grumbel at gmx.de>
 **
-**  This program is free software; you can redistribute it and/or
-**  modify it under the terms of the GNU General Public License
-**  as published by the Free Software Foundation; either version 2
-**  of the License, or (at your option) any later version.
-**
+**  This program is free software: you can redistribute it and/or modify
+**  it under the terms of the GNU General Public License as published by
+**  the Free Software Foundation, either version 3 of the License, or
+**  (at your option) any later version.
+**  
 **  This program is distributed in the hope that it will be useful,
 **  but WITHOUT ANY WARRANTY; without even the implied warranty of
 **  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 **  GNU General Public License for more details.
-** 
+**  
 **  You should have received a copy of the GNU General Public License
-**  along with this program; if not, write to the Free Software
-**  Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA
-**  02111-1307, USA.
+**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
 #include <GL/glew.h>

Modified: trunk/windstille/src/armature_test.hpp
===================================================================
--- trunk/windstille/src/armature_test.hpp	2009-02-10 14:12:18 UTC (rev 2428)
+++ trunk/windstille/src/armature_test.hpp	2009-02-10 14:28:05 UTC (rev 2429)
@@ -1,26 +1,19 @@
-/*  $Id$
-**   __      __ __             ___        __   __ __   __
-**  /  \    /  \__| ____    __| _/_______/  |_|__|  | |  |   ____
-**  \   \/\/   /  |/    \  / __ |/  ___/\   __\  |  | |  | _/ __ \
-**   \        /|  |   |  \/ /_/ |\___ \  |  | |  |  |_|  |_\  ___/
-**    \__/\  / |__|___|  /\____ /____  > |__| |__|____/____/\___  >
-**         \/          \/      \/    \/                         \/
+/*
+**  Windstille - A Sci-Fi Action-Adventure Game
 **  Copyright (C) 2007 Ingo Ruhnke <grumbel at gmx.de>
 **
-**  This program is free software; you can redistribute it and/or
-**  modify it under the terms of the GNU General Public License
-**  as published by the Free Software Foundation; either version 2
-**  of the License, or (at your option) any later version.
-**
+**  This program is free software: you can redistribute it and/or modify
+**  it under the terms of the GNU General Public License as published by
+**  the Free Software Foundation, either version 3 of the License, or
+**  (at your option) any later version.
+**  
 **  This program is distributed in the hope that it will be useful,
 **  but WITHOUT ANY WARRANTY; without even the implied warranty of
 **  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 **  GNU General Public License for more details.
-** 
+**  
 **  You should have received a copy of the GNU General Public License
-**  along with this program; if not, write to the Free Software
-**  Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA
-**  02111-1307, USA.
+**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
 #ifndef HEADER_ARMATURE_TEST_HPP

Modified: trunk/windstille/src/baby_xml.cpp
===================================================================
--- trunk/windstille/src/baby_xml.cpp	2009-02-10 14:12:18 UTC (rev 2428)
+++ trunk/windstille/src/baby_xml.cpp	2009-02-10 14:28:05 UTC (rev 2429)
@@ -1,26 +1,19 @@
-/*  $Id$
-**   __      __ __             ___        __   __ __   __
-**  /  \    /  \__| ____    __| _/_______/  |_|__|  | |  |   ____
-**  \   \/\/   /  |/    \  / __ |/  ___/\   __\  |  | |  | _/ __ \
-**   \        /|  |   |  \/ /_/ |\___ \  |  | |  |  |_|  |_\  ___/
-**    \__/\  / |__|___|  /\____ /____  > |__| |__|____/____/\___  >
-**         \/          \/      \/    \/                         \/
+/*
+**  Windstille - A Sci-Fi Action-Adventure Game
 **  Copyright (C) 2005 Ingo Ruhnke <grumbel at gmx.de>
 **
-**  This program is free software; you can redistribute it and/or
-**  modify it under the terms of the GNU General Public License
-**  as published by the Free Software Foundation; either version 2
-**  of the License, or (at your option) any later version.
-**
+**  This program is free software: you can redistribute it and/or modify
+**  it under the terms of the GNU General Public License as published by
+**  the Free Software Foundation, either version 3 of the License, or
+**  (at your option) any later version.
+**  
 **  This program is distributed in the hope that it will be useful,
 **  but WITHOUT ANY WARRANTY; without even the implied warranty of
 **  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 **  GNU General Public License for more details.
-** 
+**  
 **  You should have received a copy of the GNU General Public License
-**  along with this program; if not, write to the Free Software
-**  Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA
-**  02111-1307, USA.
+**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
 #include <sstream>

Modified: trunk/windstille/src/baby_xml.hpp
===================================================================
--- trunk/windstille/src/baby_xml.hpp	2009-02-10 14:12:18 UTC (rev 2428)
+++ trunk/windstille/src/baby_xml.hpp	2009-02-10 14:28:05 UTC (rev 2429)
@@ -1,26 +1,19 @@
-/*  $Id$
-**   __      __ __             ___        __   __ __   __
-**  /  \    /  \__| ____    __| _/_______/  |_|__|  | |  |   ____
-**  \   \/\/   /  |/    \  / __ |/  ___/\   __\  |  | |  | _/ __ \
-**   \        /|  |   |  \/ /_/ |\___ \  |  | |  |  |_|  |_\  ___/
-**    \__/\  / |__|___|  /\____ /____  > |__| |__|____/____/\___  >
-**         \/          \/      \/    \/                         \/
+/*
+**  Windstille - A Sci-Fi Action-Adventure Game
 **  Copyright (C) 2005 Ingo Ruhnke <grumbel at gmx.de>
 **
-**  This program is free software; you can redistribute it and/or
-**  modify it under the terms of the GNU General Public License
-**  as published by the Free Software Foundation; either version 2
-**  of the License, or (at your option) any later version.
-**
+**  This program is free software: you can redistribute it and/or modify
+**  it under the terms of the GNU General Public License as published by
+**  the Free Software Foundation, either version 3 of the License, or
+**  (at your option) any later version.
+**  
 **  This program is distributed in the hope that it will be useful,
 **  but WITHOUT ANY WARRANTY; without even the implied warranty of
 **  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 **  GNU General Public License for more details.
-** 
+**  
 **  You should have received a copy of the GNU General Public License
-**  along with this program; if not, write to the Free Software
-**  Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA
-**  02111-1307, USA.
+**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
 #ifndef HEADER_WINDSTILLE_BABY_XML_HXX

Modified: trunk/windstille/src/blitter.cpp
===================================================================
--- trunk/windstille/src/blitter.cpp	2009-02-10 14:12:18 UTC (rev 2428)
+++ trunk/windstille/src/blitter.cpp	2009-02-10 14:28:05 UTC (rev 2429)
@@ -1,5 +1,5 @@
-//  $Id: blitter.cpp 765 2005-07-26 00:16:45Z matzebraun $
 //
+//
 //  Flexlay - A Generic 2D Game Editor
 //  Copyright (C) 2002 Ingo Ruhnke <grumbel at gmx.de>
 //

Modified: trunk/windstille/src/blitter.hpp
===================================================================
--- trunk/windstille/src/blitter.hpp	2009-02-10 14:12:18 UTC (rev 2428)
+++ trunk/windstille/src/blitter.hpp	2009-02-10 14:28:05 UTC (rev 2429)
@@ -1,4 +1,4 @@
-//  $Id: blitter.hpp 765 2005-07-26 00:16:45Z matzebraun $
+//
 // 
 //  Flexlay - A Generic 2D Game Editor
 //  Copyright (C) 2002 Ingo Ruhnke <grumbel at gmx.de>

Modified: trunk/windstille/src/box.cpp
===================================================================
--- trunk/windstille/src/box.cpp	2009-02-10 14:12:18 UTC (rev 2428)
+++ trunk/windstille/src/box.cpp	2009-02-10 14:28:05 UTC (rev 2429)
@@ -1,4 +1,4 @@
-//  $Id$
+//
 // 
 //  Windstille - A Jump'n Shoot Game
 //  Copyright (C) 2005 David Kamphausen <david.kamphausen at web.de>

Modified: trunk/windstille/src/box.hpp
===================================================================
--- trunk/windstille/src/box.hpp	2009-02-10 14:12:18 UTC (rev 2428)
+++ trunk/windstille/src/box.hpp	2009-02-10 14:28:05 UTC (rev 2429)
@@ -1,4 +1,4 @@
-//  $Id$
+//
 // 
 //  Windstille - A Jump'n Shoot Game
 //  Copyright (C) 2005 David Kamphausen <david.kamphausen at web.de>

Modified: trunk/windstille/src/camera.cpp
===================================================================
--- trunk/windstille/src/camera.cpp	2009-02-10 14:12:18 UTC (rev 2428)
+++ trunk/windstille/src/camera.cpp	2009-02-10 14:28:05 UTC (rev 2429)
@@ -1,26 +1,19 @@
-/*  $Id$
-**   __      __ __             ___        __   __ __   __
-**  /  \    /  \__| ____    __| _/_______/  |_|__|  | |  |   ____
-**  \   \/\/   /  |/    \  / __ |/  ___/\   __\  |  | |  | _/ __ \
-**   \        /|  |   |  \/ /_/ |\___ \  |  | |  |  |_|  |_\  ___/
-**    \__/\  / |__|___|  /\____ /____  > |__| |__|____/____/\___  >
-**         \/          \/      \/    \/                         \/
+/*
+**  Windstille - A Sci-Fi Action-Adventure Game
 **  Copyright (C) 2000,2005 Ingo Ruhnke <grumbel at gmx.de>
 **
-**  This program is free software; you can redistribute it and/or
-**  modify it under the terms of the GNU General Public License
-**  as published by the Free Software Foundation; either version 2
-**  of the License, or (at your option) any later version.
-**
+**  This program is free software: you can redistribute it and/or modify
+**  it under the terms of the GNU General Public License as published by
+**  the Free Software Foundation, either version 3 of the License, or
+**  (at your option) any later version.
+**  
 **  This program is distributed in the hope that it will be useful,
 **  but WITHOUT ANY WARRANTY; without even the implied warranty of
 **  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 **  GNU General Public License for more details.
-** 
+**  
 **  You should have received a copy of the GNU General Public License
-**  along with this program; if not, write to the Free Software
-**  Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA
-**  02111-1307, USA.
+**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
 #include "player.hpp"

Modified: trunk/windstille/src/camera.hpp
===================================================================
--- trunk/windstille/src/camera.hpp	2009-02-10 14:12:18 UTC (rev 2428)
+++ trunk/windstille/src/camera.hpp	2009-02-10 14:28:05 UTC (rev 2429)
@@ -1,26 +1,19 @@
-/*  $Id$
-**   __      __ __             ___        __   __ __   __
-**  /  \    /  \__| ____    __| _/_______/  |_|__|  | |  |   ____
-**  \   \/\/   /  |/    \  / __ |/  ___/\   __\  |  | |  | _/ __ \
-**   \        /|  |   |  \/ /_/ |\___ \  |  | |  |  |_|  |_\  ___/
-**    \__/\  / |__|___|  /\____ /____  > |__| |__|____/____/\___  >
-**         \/          \/      \/    \/                         \/
+/*
+**  Windstille - A Sci-Fi Action-Adventure Game
 **  Copyright (C) 2000,2005 Ingo Ruhnke <grumbel at gmx.de>
 **
-**  This program is free software; you can redistribute it and/or
-**  modify it under the terms of the GNU General Public License
-**  as published by the Free Software Foundation; either version 2
-**  of the License, or (at your option) any later version.
-**
+**  This program is free software: you can redistribute it and/or modify
+**  it under the terms of the GNU General Public License as published by
+**  the Free Software Foundation, either version 3 of the License, or
+**  (at your option) any later version.
+**  
 **  This program is distributed in the hope that it will be useful,
 **  but WITHOUT ANY WARRANTY; without even the implied warranty of
 **  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 **  GNU General Public License for more details.
-** 
+**  
 **  You should have received a copy of the GNU General Public License
-**  along with this program; if not, write to the Free Software
-**  Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA
-**  02111-1307, USA.
+**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
 #ifndef HEADER_CAMERA_HXX

Modified: trunk/windstille/src/character.cpp
===================================================================
--- trunk/windstille/src/character.cpp	2009-02-10 14:12:18 UTC (rev 2428)
+++ trunk/windstille/src/character.cpp	2009-02-10 14:28:05 UTC (rev 2429)
@@ -1,4 +1,4 @@
-//  $Id$
+//
 // 
 //  Windstille - A Jump'n Shoot Game
 //  Copyright (C) 2000 Ingo Ruhnke <grumbel at gmx.de>

Modified: trunk/windstille/src/character.hpp
===================================================================
--- trunk/windstille/src/character.hpp	2009-02-10 14:12:18 UTC (rev 2428)
+++ trunk/windstille/src/character.hpp	2009-02-10 14:28:05 UTC (rev 2429)
@@ -1,4 +1,4 @@
-//  $Id$
+//
 // 
 //  Windstille - A Jump'n Shoot Game
 //  Copyright (C) 2000 Ingo Ruhnke <grumbel at gmx.de>

Modified: trunk/windstille/src/collision/collision_data.cpp
===================================================================
--- trunk/windstille/src/collision/collision_data.cpp	2009-02-10 14:12:18 UTC (rev 2428)
+++ trunk/windstille/src/collision/collision_data.cpp	2009-02-10 14:28:05 UTC (rev 2429)
@@ -1,26 +1,19 @@
-/*  $Id$
-**   __      __ __             ___        __   __ __   __
-**  /  \    /  \__| ____    __| _/_______/  |_|__|  | |  |   ____
-**  \   \/\/   /  |/    \  / __ |/  ___/\   __\  |  | |  | _/ __ \
-**   \        /|  |   |  \/ /_/ |\___ \  |  | |  |  |_|  |_\  ___/
-**    \__/\  / |__|___|  /\____ /____  > |__| |__|____/____/\___  >
-**         \/          \/      \/    \/                         \/
+/*
+**  Windstille - A Sci-Fi Action-Adventure Game
 **  Copyright (C) 2000,2005 Ingo Ruhnke <grumbel at gmx.de>
 **
-**  This program is free software; you can redistribute it and/or
-**  modify it under the terms of the GNU General Public License
-**  as published by the Free Software Foundation; either version 2
-**  of the License, or (at your option) any later version.
-**
+**  This program is free software: you can redistribute it and/or modify
+**  it under the terms of the GNU General Public License as published by
+**  the Free Software Foundation, either version 3 of the License, or
+**  (at your option) any later version.
+**  
 **  This program is distributed in the hope that it will be useful,
 **  but WITHOUT ANY WARRANTY; without even the implied warranty of
 **  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 **  GNU General Public License for more details.
-** 
+**  
 **  You should have received a copy of the GNU General Public License
-**  along with this program; if not, write to the Free Software
-**  Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA
-**  02111-1307, USA.
+**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
 #include "collision_data.hpp"

Modified: trunk/windstille/src/collision/contact.hpp
===================================================================
--- trunk/windstille/src/collision/contact.hpp	2009-02-10 14:12:18 UTC (rev 2428)
+++ trunk/windstille/src/collision/contact.hpp	2009-02-10 14:28:05 UTC (rev 2429)
@@ -1,26 +1,19 @@
-/*  $Id$
-**   __      __ __             ___        __   __ __   __
-**  /  \    /  \__| ____    __| _/_______/  |_|__|  | |  |   ____
-**  \   \/\/   /  |/    \  / __ |/  ___/\   __\  |  | |  | _/ __ \
-**   \        /|  |   |  \/ /_/ |\___ \  |  | |  |  |_|  |_\  ___/
-**    \__/\  / |__|___|  /\____ /____  > |__| |__|____/____/\___  >
-**         \/          \/      \/    \/                         \/
+/*
+**  Windstille - A Sci-Fi Action-Adventure Game
 **  Copyright (C) 2005 Ingo Ruhnke <grumbel at gmx.de>
 **
-**  This program is free software; you can redistribute it and/or
-**  modify it under the terms of the GNU General Public License
-**  as published by the Free Software Foundation; either version 2
-**  of the License, or (at your option) any later version.
-**
+**  This program is free software: you can redistribute it and/or modify
+**  it under the terms of the GNU General Public License as published by
+**  the Free Software Foundation, either version 3 of the License, or
+**  (at your option) any later version.
+**  
 **  This program is distributed in the hope that it will be useful,
 **  but WITHOUT ANY WARRANTY; without even the implied warranty of
 **  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 **  GNU General Public License for more details.
-** 
+**  
 **  You should have received a copy of the GNU General Public License
-**  along with this program; if not, write to the Free Software
-**  Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA
-**  02111-1307, USA.
+**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
 #ifndef HEADER_WINDSTILLE_COLLISION_CONTACT_HPP

Modified: trunk/windstille/src/collision/ladder_contact.cpp
===================================================================
--- trunk/windstille/src/collision/ladder_contact.cpp	2009-02-10 14:12:18 UTC (rev 2428)
+++ trunk/windstille/src/collision/ladder_contact.cpp	2009-02-10 14:28:05 UTC (rev 2429)
@@ -1,26 +1,19 @@
-/*  $Id$
-**   __      __ __             ___        __   __ __   __
-**  /  \    /  \__| ____    __| _/_______/  |_|__|  | |  |   ____
-**  \   \/\/   /  |/    \  / __ |/  ___/\   __\  |  | |  | _/ __ \
-**   \        /|  |   |  \/ /_/ |\___ \  |  | |  |  |_|  |_\  ___/
-**    \__/\  / |__|___|  /\____ /____  > |__| |__|____/____/\___  >
-**         \/          \/      \/    \/                         \/
+/*
+**  Windstille - A Sci-Fi Action-Adventure Game
 **  Copyright (C) 2005 Ingo Ruhnke <grumbel at gmx.de>
 **
-**  This program is free software; you can redistribute it and/or
-**  modify it under the terms of the GNU General Public License
-**  as published by the Free Software Foundation; either version 2
-**  of the License, or (at your option) any later version.
-**
+**  This program is free software: you can redistribute it and/or modify
+**  it under the terms of the GNU General Public License as published by
+**  the Free Software Foundation, either version 3 of the License, or
+**  (at your option) any later version.
+**  
 **  This program is distributed in the hope that it will be useful,
 **  but WITHOUT ANY WARRANTY; without even the implied warranty of
 **  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 **  GNU General Public License for more details.
-** 
+**  
 **  You should have received a copy of the GNU General Public License
-**  along with this program; if not, write to the Free Software
-**  Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA
-**  02111-1307, USA.
+**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
 #include "ladder_contact.hpp"

Modified: trunk/windstille/src/collision/ladder_contact.hpp
===================================================================
--- trunk/windstille/src/collision/ladder_contact.hpp	2009-02-10 14:12:18 UTC (rev 2428)
+++ trunk/windstille/src/collision/ladder_contact.hpp	2009-02-10 14:28:05 UTC (rev 2429)
@@ -1,26 +1,19 @@
-/*  $Id$
-**   __      __ __             ___        __   __ __   __
-**  /  \    /  \__| ____    __| _/_______/  |_|__|  | |  |   ____
-**  \   \/\/   /  |/    \  / __ |/  ___/\   __\  |  | |  | _/ __ \
-**   \        /|  |   |  \/ /_/ |\___ \  |  | |  |  |_|  |_\  ___/
-**    \__/\  / |__|___|  /\____ /____  > |__| |__|____/____/\___  >
-**         \/          \/      \/    \/                         \/
+/*
+**  Windstille - A Sci-Fi Action-Adventure Game
 **  Copyright (C) 2005 Ingo Ruhnke <grumbel at gmx.de>
 **
-**  This program is free software; you can redistribute it and/or
-**  modify it under the terms of the GNU General Public License
-**  as published by the Free Software Foundation; either version 2
-**  of the License, or (at your option) any later version.
-**
+**  This program is free software: you can redistribute it and/or modify
+**  it under the terms of the GNU General Public License as published by
+**  the Free Software Foundation, either version 3 of the License, or
+**  (at your option) any later version.
+**  
 **  This program is distributed in the hope that it will be useful,
 **  but WITHOUT ANY WARRANTY; without even the implied warranty of
 **  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 **  GNU General Public License for more details.
-** 
+**  
 **  You should have received a copy of the GNU General Public License
-**  along with this program; if not, write to the Free Software
-**  Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA
-**  02111-1307, USA.
+**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
 #ifndef HEADER_WINDSTILLE_COLLISION_LADDER_CONTACT_HPP

Modified: trunk/windstille/src/collision/stair_contact.cpp
===================================================================
--- trunk/windstille/src/collision/stair_contact.cpp	2009-02-10 14:12:18 UTC (rev 2428)
+++ trunk/windstille/src/collision/stair_contact.cpp	2009-02-10 14:28:05 UTC (rev 2429)
@@ -1,26 +1,19 @@
-/*  $Id$
-**   __      __ __             ___        __   __ __   __
-**  /  \    /  \__| ____    __| _/_______/  |_|__|  | |  |   ____
-**  \   \/\/   /  |/    \  / __ |/  ___/\   __\  |  | |  | _/ __ \
-**   \        /|  |   |  \/ /_/ |\___ \  |  | |  |  |_|  |_\  ___/
-**    \__/\  / |__|___|  /\____ /____  > |__| |__|____/____/\___  >
-**         \/          \/      \/    \/                         \/
+/*
+**  Windstille - A Sci-Fi Action-Adventure Game
 **  Copyright (C) 2005 Ingo Ruhnke <grumbel at gmx.de>
 **
-**  This program is free software; you can redistribute it and/or
-**  modify it under the terms of the GNU General Public License
-**  as published by the Free Software Foundation; either version 2
-**  of the License, or (at your option) any later version.
-**
+**  This program is free software: you can redistribute it and/or modify
+**  it under the terms of the GNU General Public License as published by
+**  the Free Software Foundation, either version 3 of the License, or
+**  (at your option) any later version.
+**  
 **  This program is distributed in the hope that it will be useful,
 **  but WITHOUT ANY WARRANTY; without even the implied warranty of
 **  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 **  GNU General Public License for more details.
-** 
+**  
 **  You should have received a copy of the GNU General Public License
-**  along with this program; if not, write to the Free Software
-**  Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA
-**  02111-1307, USA.
+**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
 #include <iostream>

Modified: trunk/windstille/src/collision/stair_contact.hpp
===================================================================
--- trunk/windstille/src/collision/stair_contact.hpp	2009-02-10 14:12:18 UTC (rev 2428)
+++ trunk/windstille/src/collision/stair_contact.hpp	2009-02-10 14:28:05 UTC (rev 2429)
@@ -1,26 +1,19 @@
-/*  $Id$
-**   __      __ __             ___        __   __ __   __
-**  /  \    /  \__| ____    __| _/_______/  |_|__|  | |  |   ____
-**  \   \/\/   /  |/    \  / __ |/  ___/\   __\  |  | |  | _/ __ \
-**   \        /|  |   |  \/ /_/ |\___ \  |  | |  |  |_|  |_\  ___/
-**    \__/\  / |__|___|  /\____ /____  > |__| |__|____/____/\___  >
-**         \/          \/      \/    \/                         \/
+/*
+**  Windstille - A Sci-Fi Action-Adventure Game
 **  Copyright (C) 2005 Ingo Ruhnke <grumbel at gmx.de>
 **
-**  This program is free software; you can redistribute it and/or
-**  modify it under the terms of the GNU General Public License
-**  as published by the Free Software Foundation; either version 2
-**  of the License, or (at your option) any later version.
-**
+**  This program is free software: you can redistribute it and/or modify
+**  it under the terms of the GNU General Public License as published by
+**  the Free Software Foundation, either version 3 of the License, or
+**  (at your option) any later version.
+**  
 **  This program is distributed in the hope that it will be useful,
 **  but WITHOUT ANY WARRANTY; without even the implied warranty of
 **  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 **  GNU General Public License for more details.
-** 
+**  
 **  You should have received a copy of the GNU General Public License
-**  along with this program; if not, write to the Free Software
-**  Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA
-**  02111-1307, USA.
+**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
 #ifndef HEADER_STAIR_CONTACT_HPP

Modified: trunk/windstille/src/config.cpp
===================================================================
--- trunk/windstille/src/config.cpp	2009-02-10 14:12:18 UTC (rev 2428)
+++ trunk/windstille/src/config.cpp	2009-02-10 14:28:05 UTC (rev 2429)
@@ -1,26 +1,19 @@
-/*  $Id$
-**   __      __ __             ___        __   __ __   __
-**  /  \    /  \__| ____    __| _/_______/  |_|__|  | |  |   ____
-**  \   \/\/   /  |/    \  / __ |/  ___/\   __\  |  | |  | _/ __ \
-**   \        /|  |   |  \/ /_/ |\___ \  |  | |  |  |_|  |_\  ___/
-**    \__/\  / |__|___|  /\____ /____  > |__| |__|____/____/\___  >
-**         \/          \/      \/    \/                         \/
+/*
+**  Windstille - A Sci-Fi Action-Adventure Game
 **  Copyright (C) 2000,2005 Ingo Ruhnke <grumbel at gmx.de>
 **
-**  This program is free software; you can redistribute it and/or
-**  modify it under the terms of the GNU General Public License
-**  as published by the Free Software Foundation; either version 2
-**  of the License, or (at your option) any later version.
-**
+**  This program is free software: you can redistribute it and/or modify
+**  it under the terms of the GNU General Public License as published by
+**  the Free Software Foundation, either version 3 of the License, or
+**  (at your option) any later version.
+**  
 **  This program is distributed in the hope that it will be useful,
 **  but WITHOUT ANY WARRANTY; without even the implied warranty of
 **  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 **  GNU General Public License for more details.
-** 
+**  
 **  You should have received a copy of the GNU General Public License
-**  along with this program; if not, write to the Free Software
-**  Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA
-**  02111-1307, USA.
+**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
 #include "windstille.hpp"

Modified: trunk/windstille/src/config.hpp
===================================================================
--- trunk/windstille/src/config.hpp	2009-02-10 14:12:18 UTC (rev 2428)
+++ trunk/windstille/src/config.hpp	2009-02-10 14:28:05 UTC (rev 2429)
@@ -1,26 +1,19 @@
-/*  $Id$
-**   __      __ __             ___        __   __ __   __
-**  /  \    /  \__| ____    __| _/_______/  |_|__|  | |  |   ____
-**  \   \/\/   /  |/    \  / __ |/  ___/\   __\  |  | |  | _/ __ \
-**   \        /|  |   |  \/ /_/ |\___ \  |  | |  |  |_|  |_\  ___/
-**    \__/\  / |__|___|  /\____ /____  > |__| |__|____/____/\___  >
-**         \/          \/      \/    \/                         \/
+/*
+**  Windstille - A Sci-Fi Action-Adventure Game
 **  Copyright (C) 2000,2005 Ingo Ruhnke <grumbel at gmx.de>
 **
-**  This program is free software; you can redistribute it and/or
-**  modify it under the terms of the GNU General Public License
-**  as published by the Free Software Foundation; either version 2
-**  of the License, or (at your option) any later version.
-**
+**  This program is free software: you can redistribute it and/or modify
+**  it under the terms of the GNU General Public License as published by
+**  the Free Software Foundation, either version 3 of the License, or
+**  (at your option) any later version.
+**  
 **  This program is distributed in the hope that it will be useful,
 **  but WITHOUT ANY WARRANTY; without even the implied warranty of
 **  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 **  GNU General Public License for more details.
-** 
+**  
 **  You should have received a copy of the GNU General Public License
-**  along with this program; if not, write to the Free Software
-**  Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA
-**  02111-1307, USA.
+**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
 #ifndef HEADER_WINDSTILLE_CONFIG_HPP

Modified: trunk/windstille/src/console.cpp
===================================================================
--- trunk/windstille/src/console.cpp	2009-02-10 14:12:18 UTC (rev 2428)
+++ trunk/windstille/src/console.cpp	2009-02-10 14:28:05 UTC (rev 2429)
@@ -1,10 +1,5 @@
-/*  $Id$
-**   __      __ __             ___        __   __ __   __
-**  /  \    /  \__| ____    __| _/_______/  |_|__|  | |  |   ____
-**  \   \/\/   /  |/    \  / __ |/  ___/\   __\  |  | |  | _/ __ \
-**   \        /|  |   |  \/ /_/ |\___ \  |  | |  |  |_|  |_\  ___/
-**    \__/\  / |__|___|  /\____ /____  > |__| |__|____/____/\___  >
-**         \/          \/      \/    \/                         \/
+/*
+**  Windstille - A Sci-Fi Action-Adventure Game
 **  Copyright (C) 2005 Ingo Ruhnke <grumbel at gmx.de>
 **
 **  This program is free software; you can redistribute it and/or

Modified: trunk/windstille/src/console.hpp
===================================================================
--- trunk/windstille/src/console.hpp	2009-02-10 14:12:18 UTC (rev 2428)
+++ trunk/windstille/src/console.hpp	2009-02-10 14:28:05 UTC (rev 2429)
@@ -1,10 +1,5 @@
-/*  $Id$
-**   __      __ __             ___        __   __ __   __
-**  /  \    /  \__| ____    __| _/_______/  |_|__|  | |  |   ____
-**  \   \/\/   /  |/    \  / __ |/  ___/\   __\  |  | |  | _/ __ \
-**   \        /|  |   |  \/ /_/ |\___ \  |  | |  |  |_|  |_\  ___/
-**    \__/\  / |__|___|  /\____ /____  > |__| |__|____/____/\___  >
-**         \/          \/      \/    \/                         \/
+/*
+**  Windstille - A Sci-Fi Action-Adventure Game
 **  Copyright (C) 2005 Ingo Ruhnke <grumbel at gmx.de>
 **
 **  This program is free software; you can redistribute it and/or

Modified: trunk/windstille/src/controller_def.cpp
===================================================================
--- trunk/windstille/src/controller_def.cpp	2009-02-10 14:12:18 UTC (rev 2428)
+++ trunk/windstille/src/controller_def.cpp	2009-02-10 14:28:05 UTC (rev 2429)
@@ -1,26 +1,19 @@
-/*  $Id$
-**   __      __ __             ___        __   __ __   __
-**  /  \    /  \__| ____    __| _/_______/  |_|__|  | |  |   ____
-**  \   \/\/   /  |/    \  / __ |/  ___/\   __\  |  | |  | _/ __ \
-**   \        /|  |   |  \/ /_/ |\___ \  |  | |  |  |_|  |_\  ___/
-**    \__/\  / |__|___|  /\____ /____  > |__| |__|____/____/\___  >
-**         \/          \/      \/    \/                         \/
+/*
+**  Windstille - A Sci-Fi Action-Adventure Game
 **  Copyright (C) 2000,2005 Ingo Ruhnke <grumbel at gmx.de>
 **
-**  This program is free software; you can redistribute it and/or
-**  modify it under the terms of the GNU General Public License
-**  as published by the Free Software Foundation; either version 2
-**  of the License, or (at your option) any later version.
-**
+**  This program is free software: you can redistribute it and/or modify
+**  it under the terms of the GNU General Public License as published by
+**  the Free Software Foundation, either version 3 of the License, or
+**  (at your option) any later version.
+**  
 **  This program is distributed in the hope that it will be useful,
 **  but WITHOUT ANY WARRANTY; without even the implied warranty of
 **  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 **  GNU General Public License for more details.
-** 
+**  
 **  You should have received a copy of the GNU General Public License
-**  along with this program; if not, write to the Free Software
-**  Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA
-**  02111-1307, USA.
+**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
 #include "controller_def.hpp"

Modified: trunk/windstille/src/controller_def.hpp
===================================================================
--- trunk/windstille/src/controller_def.hpp	2009-02-10 14:12:18 UTC (rev 2428)
+++ trunk/windstille/src/controller_def.hpp	2009-02-10 14:28:05 UTC (rev 2429)
@@ -1,26 +1,19 @@
-/*  $Id$
-**   __      __ __             ___        __   __ __   __
-**  /  \    /  \__| ____    __| _/_______/  |_|__|  | |  |   ____
-**  \   \/\/   /  |/    \  / __ |/  ___/\   __\  |  | |  | _/ __ \
-**   \        /|  |   |  \/ /_/ |\___ \  |  | |  |  |_|  |_\  ___/
-**    \__/\  / |__|___|  /\____ /____  > |__| |__|____/____/\___  >
-**         \/          \/      \/    \/                         \/
+/*
+**  Windstille - A Sci-Fi Action-Adventure Game
 **  Copyright (C) 2000,2005 Ingo Ruhnke <grumbel at gmx.de>
 **
-**  This program is free software; you can redistribute it and/or
-**  modify it under the terms of the GNU General Public License
-**  as published by the Free Software Foundation; either version 2
-**  of the License, or (at your option) any later version.
-**
+**  This program is free software: you can redistribute it and/or modify
+**  it under the terms of the GNU General Public License as published by
+**  the Free Software Foundation, either version 3 of the License, or
+**  (at your option) any later version.
+**  
 **  This program is distributed in the hope that it will be useful,
 **  but WITHOUT ANY WARRANTY; without even the implied warranty of
 **  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 **  GNU General Public License for more details.
-** 
+**  
 **  You should have received a copy of the GNU General Public License
-**  along with this program; if not, write to the Free Software
-**  Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA
-**  02111-1307, USA.
+**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
 #ifndef HEADER_CONTROLLER_DEF_HXX

Modified: trunk/windstille/src/controller_help_window.cpp
===================================================================
--- trunk/windstille/src/controller_help_window.cpp	2009-02-10 14:12:18 UTC (rev 2428)
+++ trunk/windstille/src/controller_help_window.cpp	2009-02-10 14:28:05 UTC (rev 2429)
@@ -1,26 +1,19 @@
-/*  $Id$
-**   __      __ __             ___        __   __ __   __
-**  /  \    /  \__| ____    __| _/_______/  |_|__|  | |  |   ____
-**  \   \/\/   /  |/    \  / __ |/  ___/\   __\  |  | |  | _/ __ \
-**   \        /|  |   |  \/ /_/ |\___ \  |  | |  |  |_|  |_\  ___/
-**    \__/\  / |__|___|  /\____ /____  > |__| |__|____/____/\___  >
-**         \/          \/      \/    \/                         \/
+/*
+**  Windstille - A Sci-Fi Action-Adventure Game
 **  Copyright (C) 2005 Ingo Ruhnke <grumbel at gmx.de>
 **
-**  This program is free software; you can redistribute it and/or
-**  modify it under the terms of the GNU General Public License
-**  as published by the Free Software Foundation; either version 2
-**  of the License, or (at your option) any later version.
-**
+**  This program is free software: you can redistribute it and/or modify
+**  it under the terms of the GNU General Public License as published by
+**  the Free Software Foundation, either version 3 of the License, or
+**  (at your option) any later version.
+**  
 **  This program is distributed in the hope that it will be useful,
 **  but WITHOUT ANY WARRANTY; without even the implied warranty of
 **  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 **  GNU General Public License for more details.
-** 
+**  
 **  You should have received a copy of the GNU General Public License
-**  along with this program; if not, write to the Free Software
-**  Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA
-**  02111-1307, USA.
+**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
 #include "input/input_manager.hpp"

Modified: trunk/windstille/src/controller_help_window.hpp
===================================================================
--- trunk/windstille/src/controller_help_window.hpp	2009-02-10 14:12:18 UTC (rev 2428)
+++ trunk/windstille/src/controller_help_window.hpp	2009-02-10 14:28:05 UTC (rev 2429)
@@ -1,26 +1,19 @@
-/*  $Id$
-**   __      __ __             ___        __   __ __   __
-**  /  \    /  \__| ____    __| _/_______/  |_|__|  | |  |   ____
-**  \   \/\/   /  |/    \  / __ |/  ___/\   __\  |  | |  | _/ __ \
-**   \        /|  |   |  \/ /_/ |\___ \  |  | |  |  |_|  |_\  ___/
-**    \__/\  / |__|___|  /\____ /____  > |__| |__|____/____/\___  >
-**         \/          \/      \/    \/                         \/
+/*
+**  Windstille - A Sci-Fi Action-Adventure Game
 **  Copyright (C) 2005 Ingo Ruhnke <grumbel at gmx.de>
 **
-**  This program is free software; you can redistribute it and/or
-**  modify it under the terms of the GNU General Public License
-**  as published by the Free Software Foundation; either version 2
-**  of the License, or (at your option) any later version.
-**
+**  This program is free software: you can redistribute it and/or modify
+**  it under the terms of the GNU General Public License as published by
+**  the Free Software Foundation, either version 3 of the License, or
+**  (at your option) any later version.
+**  
 **  This program is distributed in the hope that it will be useful,
 **  but WITHOUT ANY WARRANTY; without even the implied warranty of
 **  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 **  GNU General Public License for more details.
-** 
+**  
 **  You should have received a copy of the GNU General Public License
-**  along with this program; if not, write to the Free Software
-**  Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA
-**  02111-1307, USA.
+**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
 #ifndef HEADER_CONTROLLER_HELP_WINDOW_HPP

Modified: trunk/windstille/src/conversation.cpp
===================================================================
--- trunk/windstille/src/conversation.cpp	2009-02-10 14:12:18 UTC (rev 2428)
+++ trunk/windstille/src/conversation.cpp	2009-02-10 14:28:05 UTC (rev 2429)
@@ -1,26 +1,19 @@
-/*  $Id$
-**   __      __ __             ___        __   __ __   __
-**  /  \    /  \__| ____    __| _/_______/  |_|__|  | |  |   ____
-**  \   \/\/   /  |/    \  / __ |/  ___/\   __\  |  | |  | _/ __ \
-**   \        /|  |   |  \/ /_/ |\___ \  |  | |  |  |_|  |_\  ___/
-**    \__/\  / |__|___|  /\____ /____  > |__| |__|____/____/\___  >
-**         \/          \/      \/    \/                         \/
+/*
+**  Windstille - A Sci-Fi Action-Adventure Game
 **  Copyright (C) 2000,2005 Ingo Ruhnke <grumbel at gmx.de>
 **
-**  This program is free software; you can redistribute it and/or
-**  modify it under the terms of the GNU General Public License
-**  as published by the Free Software Foundation; either version 2
-**  of the License, or (at your option) any later version.
-**
+**  This program is free software: you can redistribute it and/or modify
+**  it under the terms of the GNU General Public License as published by
+**  the Free Software Foundation, either version 3 of the License, or
+**  (at your option) any later version.
+**  
 **  This program is distributed in the hope that it will be useful,
 **  but WITHOUT ANY WARRANTY; without even the implied warranty of
 **  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 **  GNU General Public License for more details.
-** 
+**  
 **  You should have received a copy of the GNU General Public License
-**  along with this program; if not, write to the Free Software
-**  Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA
-**  02111-1307, USA.
+**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
 #include "math.hpp"

Modified: trunk/windstille/src/conversation.hpp
===================================================================
--- trunk/windstille/src/conversation.hpp	2009-02-10 14:12:18 UTC (rev 2428)
+++ trunk/windstille/src/conversation.hpp	2009-02-10 14:28:05 UTC (rev 2429)
@@ -1,26 +1,19 @@
-/*  $Id$
-**   __      __ __             ___        __   __ __   __
-**  /  \    /  \__| ____    __| _/_______/  |_|__|  | |  |   ____
-**  \   \/\/   /  |/    \  / __ |/  ___/\   __\  |  | |  | _/ __ \
-**   \        /|  |   |  \/ /_/ |\___ \  |  | |  |  |_|  |_\  ___/
-**    \__/\  / |__|___|  /\____ /____  > |__| |__|____/____/\___  >
-**         \/          \/      \/    \/                         \/
+/*
+**  Windstille - A Sci-Fi Action-Adventure Game
 **  Copyright (C) 2000,2005 Ingo Ruhnke <grumbel at gmx.de>
 **
-**  This program is free software; you can redistribute it and/or
-**  modify it under the terms of the GNU General Public License
-**  as published by the Free Software Foundation; either version 2
-**  of the License, or (at your option) any later version.
-**
+**  This program is free software: you can redistribute it and/or modify
+**  it under the terms of the GNU General Public License as published by
+**  the Free Software Foundation, either version 3 of the License, or
+**  (at your option) any later version.
+**  
 **  This program is distributed in the hope that it will be useful,
 **  but WITHOUT ANY WARRANTY; without even the implied warranty of
 **  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 **  GNU General Public License for more details.
-** 
+**  
 **  You should have received a copy of the GNU General Public License
-**  along with this program; if not, write to the Free Software
-**  Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA
-**  02111-1307, USA.
+**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
 #ifndef HEADER_CONVERSATION_HXX

Modified: trunk/windstille/src/dialog_manager.cpp
===================================================================
--- trunk/windstille/src/dialog_manager.cpp	2009-02-10 14:12:18 UTC (rev 2428)
+++ trunk/windstille/src/dialog_manager.cpp	2009-02-10 14:28:05 UTC (rev 2429)
@@ -1,26 +1,19 @@
-/*  $Id$
-**   __      __ __             ___        __   __ __   __
-**  /  \    /  \__| ____    __| _/_______/  |_|__|  | |  |   ____
-**  \   \/\/   /  |/    \  / __ |/  ___/\   __\  |  | |  | _/ __ \
-**   \        /|  |   |  \/ /_/ |\___ \  |  | |  |  |_|  |_\  ___/
-**    \__/\  / |__|___|  /\____ /____  > |__| |__|____/____/\___  >
-**         \/          \/      \/    \/                         \/
+/*
+**  Windstille - A Sci-Fi Action-Adventure Game
 **  Copyright (C) 2000,2005 Ingo Ruhnke <grumbel at gmx.de>
 **
-**  This program is free software; you can redistribute it and/or
-**  modify it under the terms of the GNU General Public License
-**  as published by the Free Software Foundation; either version 2
-**  of the License, or (at your option) any later version.
-**
+**  This program is free software: you can redistribute it and/or modify
+**  it under the terms of the GNU General Public License as published by
+**  the Free Software Foundation, either version 3 of the License, or
+**  (at your option) any later version.
+**  
 **  This program is distributed in the hope that it will be useful,
 **  but WITHOUT ANY WARRANTY; without even the implied warranty of
 **  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 **  GNU General Public License for more details.
-** 
+**  
 **  You should have received a copy of the GNU General Public License
-**  along with this program; if not, write to the Free Software
-**  Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA
-**  02111-1307, USA.
+**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
 #include <iostream>

Modified: trunk/windstille/src/dialog_manager.hpp
===================================================================
--- trunk/windstille/src/dialog_manager.hpp	2009-02-10 14:12:18 UTC (rev 2428)
+++ trunk/windstille/src/dialog_manager.hpp	2009-02-10 14:28:05 UTC (rev 2429)
@@ -1,26 +1,19 @@
-/*  $Id$
-**   __      __ __             ___        __   __ __   __
-**  /  \    /  \__| ____    __| _/_______/  |_|__|  | |  |   ____
-**  \   \/\/   /  |/    \  / __ |/  ___/\   __\  |  | |  | _/ __ \
-**   \        /|  |   |  \/ /_/ |\___ \  |  | |  |  |_|  |_\  ___/
-**    \__/\  / |__|___|  /\____ /____  > |__| |__|____/____/\___  >
-**         \/          \/      \/    \/                         \/
+/*
+**  Windstille - A Sci-Fi Action-Adventure Game
 **  Copyright (C) 2000,2005 Ingo Ruhnke <grumbel at gmx.de>
 **
-**  This program is free software; you can redistribute it and/or
-**  modify it under the terms of the GNU General Public License
-**  as published by the Free Software Foundation; either version 2
-**  of the License, or (at your option) any later version.
-**
+**  This program is free software: you can redistribute it and/or modify
+**  it under the terms of the GNU General Public License as published by
+**  the Free Software Foundation, either version 3 of the License, or
+**  (at your option) any later version.
+**  
 **  This program is distributed in the hope that it will be useful,
 **  but WITHOUT ANY WARRANTY; without even the implied warranty of
 **  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 **  GNU General Public License for more details.
-** 
+**  
 **  You should have received a copy of the GNU General Public License
-**  along with this program; if not, write to the Free Software
-**  Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA
-**  02111-1307, USA.
+**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
 #ifndef HEADER_DIALOG_MANAGER_HXX

Modified: trunk/windstille/src/display/display.cpp
===================================================================
--- trunk/windstille/src/display/display.cpp	2009-02-10 14:12:18 UTC (rev 2428)
+++ trunk/windstille/src/display/display.cpp	2009-02-10 14:28:05 UTC (rev 2429)
@@ -1,26 +1,19 @@
-/*  $Id$
-**   __      __ __             ___        __   __ __   __
-**  /  \    /  \__| ____    __| _/_______/  |_|__|  | |  |   ____
-**  \   \/\/   /  |/    \  / __ |/  ___/\   __\  |  | |  | _/ __ \
-**   \        /|  |   |  \/ /_/ |\___ \  |  | |  |  |_|  |_\  ___/
-**    \__/\  / |__|___|  /\____ /____  > |__| |__|____/____/\___  >
-**         \/          \/      \/    \/                         \/
+/*
+**  Windstille - A Sci-Fi Action-Adventure Game
 **  Copyright (C) 2005 Ingo Ruhnke <grumbel at gmx.de>
 **
-**  This program is free software; you can redistribute it and/or
-**  modify it under the terms of the GNU General Public License
-**  as published by the Free Software Foundation; either version 2
-**  of the License, or (at your option) any later version.
-**
+**  This program is free software: you can redistribute it and/or modify
+**  it under the terms of the GNU General Public License as published by
+**  the Free Software Foundation, either version 3 of the License, or
+**  (at your option) any later version.
+**  
 **  This program is distributed in the hope that it will be useful,
 **  but WITHOUT ANY WARRANTY; without even the implied warranty of
 **  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 **  GNU General Public License for more details.
-** 
+**  
 **  You should have received a copy of the GNU General Public License
-**  along with this program; if not, write to the Free Software
-**  Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA
-**  02111-1307, USA.
+**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 #include <config.h>
 

Modified: trunk/windstille/src/display/display.hpp
===================================================================
--- trunk/windstille/src/display/display.hpp	2009-02-10 14:12:18 UTC (rev 2428)
+++ trunk/windstille/src/display/display.hpp	2009-02-10 14:28:05 UTC (rev 2429)
@@ -1,26 +1,19 @@
-/*  $Id$
-**   __      __ __             ___        __   __ __   __
-**  /  \    /  \__| ____    __| _/_______/  |_|__|  | |  |   ____
-**  \   \/\/   /  |/    \  / __ |/  ___/\   __\  |  | |  | _/ __ \
-**   \        /|  |   |  \/ /_/ |\___ \  |  | |  |  |_|  |_\  ___/
-**    \__/\  / |__|___|  /\____ /____  > |__| |__|____/____/\___  >
-**         \/          \/      \/    \/                         \/
+/*
+**  Windstille - A Sci-Fi Action-Adventure Game
 **  Copyright (C) 2005 Ingo Ruhnke <grumbel at gmx.de>
 **
-**  This program is free software; you can redistribute it and/or
-**  modify it under the terms of the GNU General Public License
-**  as published by the Free Software Foundation; either version 2
-**  of the License, or (at your option) any later version.
-**
+**  This program is free software: you can redistribute it and/or modify
+**  it under the terms of the GNU General Public License as published by
+**  the Free Software Foundation, either version 3 of the License, or
+**  (at your option) any later version.
+**  
 **  This program is distributed in the hope that it will be useful,
 **  but WITHOUT ANY WARRANTY; without even the implied warranty of
 **  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 **  GNU General Public License for more details.
-** 
+**  
 **  You should have received a copy of the GNU General Public License
-**  along with this program; if not, write to the Free Software
-**  Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA
-**  02111-1307, USA.
+**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
 #ifndef HEADER_DISPLAY_DISPLAY_HPP

Modified: trunk/windstille/src/display/drawing_context.cpp
===================================================================
--- trunk/windstille/src/display/drawing_context.cpp	2009-02-10 14:12:18 UTC (rev 2428)
+++ trunk/windstille/src/display/drawing_context.cpp	2009-02-10 14:28:05 UTC (rev 2429)
@@ -1,26 +1,19 @@
-/*  $Id$
-**   __      __ __             ___        __   __ __   __
-**  /  \    /  \__| ____    __| _/_______/  |_|__|  | |  |   ____
-**  \   \/\/   /  |/    \  / __ |/  ___/\   __\  |  | |  | _/ __ \
-**   \        /|  |   |  \/ /_/ |\___ \  |  | |  |  |_|  |_\  ___/
-**    \__/\  / |__|___|  /\____ /____  > |__| |__|____/____/\___  >
-**         \/          \/      \/    \/                         \/
+/*
+**  Windstille - A Sci-Fi Action-Adventure Game
 **  Copyright (C) 2000,2005 Ingo Ruhnke <grumbel at gmx.de>
 **
-**  This program is free software; you can redistribute it and/or
-**  modify it under the terms of the GNU General Public License
-**  as published by the Free Software Foundation; either version 2
-**  of the License, or (at your option) any later version.
-**
+**  This program is free software: you can redistribute it and/or modify
+**  it under the terms of the GNU General Public License as published by
+**  the Free Software Foundation, either version 3 of the License, or
+**  (at your option) any later version.
+**  
 **  This program is distributed in the hope that it will be useful,
 **  but WITHOUT ANY WARRANTY; without even the implied warranty of
 **  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 **  GNU General Public License for more details.
-** 
+**  
 **  You should have received a copy of the GNU General Public License
-**  along with this program; if not, write to the Free Software
-**  Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA
-**  02111-1307, USA.
+**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
 #include <assert.h>

Modified: trunk/windstille/src/display/drawing_context.hpp
===================================================================
--- trunk/windstille/src/display/drawing_context.hpp	2009-02-10 14:12:18 UTC (rev 2428)
+++ trunk/windstille/src/display/drawing_context.hpp	2009-02-10 14:28:05 UTC (rev 2429)
@@ -1,26 +1,19 @@
-/*  $Id$
-**   __      __ __             ___        __   __ __   __
-**  /  \    /  \__| ____    __| _/_______/  |_|__|  | |  |   ____
-**  \   \/\/   /  |/    \  / __ |/  ___/\   __\  |  | |  | _/ __ \
-**   \        /|  |   |  \/ /_/ |\___ \  |  | |  |  |_|  |_\  ___/
-**    \__/\  / |__|___|  /\____ /____  > |__| |__|____/____/\___  >
-**         \/          \/      \/    \/                         \/
+/*
+**  Windstille - A Sci-Fi Action-Adventure Game
 **  Copyright (C) 2000,2005 Ingo Ruhnke <grumbel at gmx.de>
 **
-**  This program is free software; you can redistribute it and/or
-**  modify it under the terms of the GNU General Public License
-**  as published by the Free Software Foundation; either version 2
-**  of the License, or (at your option) any later version.
-**
+**  This program is free software: you can redistribute it and/or modify
+**  it under the terms of the GNU General Public License as published by
+**  the Free Software Foundation, either version 3 of the License, or
+**  (at your option) any later version.
+**  
 **  This program is distributed in the hope that it will be useful,
 **  but WITHOUT ANY WARRANTY; without even the implied warranty of
 **  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 **  GNU General Public License for more details.
-** 
+**  
 **  You should have received a copy of the GNU General Public License
-**  along with this program; if not, write to the Free Software
-**  Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA
-**  02111-1307, USA.
+**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
 #ifndef HEADER_DRAWING_CONTEXT_HXX

Modified: trunk/windstille/src/display/drawing_request.hpp
===================================================================
--- trunk/windstille/src/display/drawing_request.hpp	2009-02-10 14:12:18 UTC (rev 2428)
+++ trunk/windstille/src/display/drawing_request.hpp	2009-02-10 14:28:05 UTC (rev 2429)
@@ -1,26 +1,19 @@
-/*  $Id$
-**   __      __ __             ___        __   __ __   __
-**  /  \    /  \__| ____    __| _/_______/  |_|__|  | |  |   ____
-**  \   \/\/   /  |/    \  / __ |/  ___/\   __\  |  | |  | _/ __ \
-**   \        /|  |   |  \/ /_/ |\___ \  |  | |  |  |_|  |_\  ___/
-**    \__/\  / |__|___|  /\____ /____  > |__| |__|____/____/\___  >
-**         \/          \/      \/    \/                         \/
+/*
+**  Windstille - A Sci-Fi Action-Adventure Game
 **  Copyright (C) 2000,2005 Ingo Ruhnke <grumbel at gmx.de>
 **
-**  This program is free software; you can redistribute it and/or
-**  modify it under the terms of the GNU General Public License
-**  as published by the Free Software Foundation; either version 2
-**  of the License, or (at your option) any later version.
-**
+**  This program is free software: you can redistribute it and/or modify
+**  it under the terms of the GNU General Public License as published by
+**  the Free Software Foundation, either version 3 of the License, or
+**  (at your option) any later version.
+**  
 **  This program is distributed in the hope that it will be useful,
 **  but WITHOUT ANY WARRANTY; without even the implied warranty of
 **  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 **  GNU General Public License for more details.
-** 
+**  
 **  You should have received a copy of the GNU General Public License
-**  along with this program; if not, write to the Free Software
-**  Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA
-**  02111-1307, USA.
+**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
 #ifndef HEADER_DRAWING_REQUEST_HXX

Modified: trunk/windstille/src/display/framebuffer.cpp
===================================================================
--- trunk/windstille/src/display/framebuffer.cpp	2009-02-10 14:12:18 UTC (rev 2428)
+++ trunk/windstille/src/display/framebuffer.cpp	2009-02-10 14:28:05 UTC (rev 2429)
@@ -1,26 +1,19 @@
-/*  $Id$
-**   __      __ __             ___        __   __ __   __
-**  /  \    /  \__| ____    __| _/_______/  |_|__|  | |  |   ____
-**  \   \/\/   /  |/    \  / __ |/  ___/\   __\  |  | |  | _/ __ \
-**   \        /|  |   |  \/ /_/ |\___ \  |  | |  |  |_|  |_\  ___/
-**    \__/\  / |__|___|  /\____ /____  > |__| |__|____/____/\___  >
-**         \/          \/      \/    \/                         \/
+/*
+**  Windstille - A Sci-Fi Action-Adventure Game
 **  Copyright (C) 2005 Ingo Ruhnke <grumbel at gmx.de>
 **
-**  This program is free software; you can redistribute it and/or
-**  modify it under the terms of the GNU General Public License
-**  as published by the Free Software Foundation; either version 2
-**  of the License, or (at your option) any later version.
-**
+**  This program is free software: you can redistribute it and/or modify
+**  it under the terms of the GNU General Public License as published by
+**  the Free Software Foundation, either version 3 of the License, or
+**  (at your option) any later version.
+**  
 **  This program is distributed in the hope that it will be useful,
 **  but WITHOUT ANY WARRANTY; without even the implied warranty of
 **  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 **  GNU General Public License for more details.
-** 
+**  
 **  You should have received a copy of the GNU General Public License
-**  along with this program; if not, write to the Free Software
-**  Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA
-**  02111-1307, USA.
+**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 #include <config.h>
 

Modified: trunk/windstille/src/display/framebuffer.hpp
===================================================================
--- trunk/windstille/src/display/framebuffer.hpp	2009-02-10 14:12:18 UTC (rev 2428)
+++ trunk/windstille/src/display/framebuffer.hpp	2009-02-10 14:28:05 UTC (rev 2429)
@@ -1,26 +1,19 @@
-/*  $Id$
-**   __      __ __             ___        __   __ __   __
-**  /  \    /  \__| ____    __| _/_______/  |_|__|  | |  |   ____
-**  \   \/\/   /  |/    \  / __ |/  ___/\   __\  |  | |  | _/ __ \
-**   \        /|  |   |  \/ /_/ |\___ \  |  | |  |  |_|  |_\  ___/
-**    \__/\  / |__|___|  /\____ /____  > |__| |__|____/____/\___  >
-**         \/          \/      \/    \/                         \/
+/*
+**  Windstille - A Sci-Fi Action-Adventure Game
 **  Copyright (C) 2005 Ingo Ruhnke <grumbel at gmx.de>
 **
-**  This program is free software; you can redistribute it and/or
-**  modify it under the terms of the GNU General Public License
-**  as published by the Free Software Foundation; either version 2
-**  of the License, or (at your option) any later version.
-**
+**  This program is free software: you can redistribute it and/or modify
+**  it under the terms of the GNU General Public License as published by
+**  the Free Software Foundation, either version 3 of the License, or
+**  (at your option) any later version.
+**  
 **  This program is distributed in the hope that it will be useful,
 **  but WITHOUT ANY WARRANTY; without even the implied warranty of
 **  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 **  GNU General Public License for more details.
-** 
+**  
 **  You should have received a copy of the GNU General Public License
-**  along with this program; if not, write to the Free Software
-**  Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA
-**  02111-1307, USA.
+**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
 #ifndef HEADER_FRAMEBUFFER_HPP

Modified: trunk/windstille/src/display/opengl_state.cpp
===================================================================
--- trunk/windstille/src/display/opengl_state.cpp	2009-02-10 14:12:18 UTC (rev 2428)
+++ trunk/windstille/src/display/opengl_state.cpp	2009-02-10 14:28:05 UTC (rev 2429)
@@ -1,26 +1,19 @@
-/*  $Id$
-**   __      __ __             ___        __   __ __   __
-**  /  \    /  \__| ____    __| _/_______/  |_|__|  | |  |   ____
-**  \   \/\/   /  |/    \  / __ |/  ___/\   __\  |  | |  | _/ __ \
-**   \        /|  |   |  \/ /_/ |\___ \  |  | |  |  |_|  |_\  ___/
-**    \__/\  / |__|___|  /\____ /____  > |__| |__|____/____/\___  >
-**         \/          \/      \/    \/                         \/
+/*
+**  Windstille - A Sci-Fi Action-Adventure Game
 **  Copyright (C) 2005 Ingo Ruhnke <grumbel at gmx.de>
 **
-**  This program is free software; you can redistribute it and/or
-**  modify it under the terms of the GNU General Public License
-**  as published by the Free Software Foundation; either version 2
-**  of the License, or (at your option) any later version.
-**
+**  This program is free software: you can redistribute it and/or modify
+**  it under the terms of the GNU General Public License as published by
+**  the Free Software Foundation, either version 3 of the License, or
+**  (at your option) any later version.
+**  
 **  This program is distributed in the hope that it will be useful,
 **  but WITHOUT ANY WARRANTY; without even the implied warranty of
 **  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 **  GNU General Public License for more details.
-** 
+**  
 **  You should have received a copy of the GNU General Public License
-**  along with this program; if not, write to the Free Software
-**  Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA
-**  02111-1307, USA.
+**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
 #include "opengl_state.hpp"

Modified: trunk/windstille/src/display/opengl_state.hpp
===================================================================
--- trunk/windstille/src/display/opengl_state.hpp	2009-02-10 14:12:18 UTC (rev 2428)
+++ trunk/windstille/src/display/opengl_state.hpp	2009-02-10 14:28:05 UTC (rev 2429)
@@ -1,26 +1,19 @@
-/*  $Id$
-**   __      __ __             ___        __   __ __   __
-**  /  \    /  \__| ____    __| _/_______/  |_|__|  | |  |   ____
-**  \   \/\/   /  |/    \  / __ |/  ___/\   __\  |  | |  | _/ __ \
-**   \        /|  |   |  \/ /_/ |\___ \  |  | |  |  |_|  |_\  ___/
-**    \__/\  / |__|___|  /\____ /____  > |__| |__|____/____/\___  >
-**         \/          \/      \/    \/                         \/
+/*
+**  Windstille - A Sci-Fi Action-Adventure Game
 **  Copyright (C) 2005 Ingo Ruhnke <grumbel at gmx.de>
 **
-**  This program is free software; you can redistribute it and/or
-**  modify it under the terms of the GNU General Public License
-**  as published by the Free Software Foundation; either version 2
-**  of the License, or (at your option) any later version.
-**
+**  This program is free software: you can redistribute it and/or modify
+**  it under the terms of the GNU General Public License as published by
+**  the Free Software Foundation, either version 3 of the License, or
+**  (at your option) any later version.
+**  
 **  This program is distributed in the hope that it will be useful,
 **  but WITHOUT ANY WARRANTY; without even the implied warranty of
 **  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 **  GNU General Public License for more details.
-** 
+**  
 **  You should have received a copy of the GNU General Public License
-**  along with this program; if not, write to the Free Software
-**  Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA
-**  02111-1307, USA.
+**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
 #ifndef HEADER_DISPLAY_OPENGL_STATE_HPP

Modified: trunk/windstille/src/display/render_buffer.cpp
===================================================================
--- trunk/windstille/src/display/render_buffer.cpp	2009-02-10 14:12:18 UTC (rev 2428)
+++ trunk/windstille/src/display/render_buffer.cpp	2009-02-10 14:28:05 UTC (rev 2429)
@@ -1,26 +1,19 @@
-/*  $Id$
-**   __      __ __             ___        __   __ __   __
-**  /  \    /  \__| ____    __| _/_______/  |_|__|  | |  |   ____
-**  \   \/\/   /  |/    \  / __ |/  ___/\   __\  |  | |  | _/ __ \
-**   \        /|  |   |  \/ /_/ |\___ \  |  | |  |  |_|  |_\  ___/
-**    \__/\  / |__|___|  /\____ /____  > |__| |__|____/____/\___  >
-**         \/          \/      \/    \/                         \/
+/*
+**  Windstille - A Sci-Fi Action-Adventure Game
 **  Copyright (C) 2005 Ingo Ruhnke <grumbel at gmx.de>
 **
-**  This program is free software; you can redistribute it and/or
-**  modify it under the terms of the GNU General Public License
-**  as published by the Free Software Foundation; either version 2
-**  of the License, or (at your option) any later version.
-**
+**  This program is free software: you can redistribute it and/or modify
+**  it under the terms of the GNU General Public License as published by
+**  the Free Software Foundation, either version 3 of the License, or
+**  (at your option) any later version.
+**  
 **  This program is distributed in the hope that it will be useful,
 **  but WITHOUT ANY WARRANTY; without even the implied warranty of
 **  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 **  GNU General Public License for more details.
-** 
+**  
 **  You should have received a copy of the GNU General Public License
-**  along with this program; if not, write to the Free Software
-**  Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA
-**  02111-1307, USA.
+**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 #include <config.h>
 

Modified: trunk/windstille/src/display/render_buffer.hpp
===================================================================
--- trunk/windstille/src/display/render_buffer.hpp	2009-02-10 14:12:18 UTC (rev 2428)
+++ trunk/windstille/src/display/render_buffer.hpp	2009-02-10 14:28:05 UTC (rev 2429)
@@ -1,26 +1,19 @@
-/*  $Id$
-**   __      __ __             ___        __   __ __   __
-**  /  \    /  \__| ____    __| _/_______/  |_|__|  | |  |   ____
-**  \   \/\/   /  |/    \  / __ |/  ___/\   __\  |  | |  | _/ __ \
-**   \        /|  |   |  \/ /_/ |\___ \  |  | |  |  |_|  |_\  ___/
-**    \__/\  / |__|___|  /\____ /____  > |__| |__|____/____/\___  >
-**         \/          \/      \/    \/                         \/
+/*
+**  Windstille - A Sci-Fi Action-Adventure Game
 **  Copyright (C) 2005 Ingo Ruhnke <grumbel at gmx.de>
 **
-**  This program is free software; you can redistribute it and/or
-**  modify it under the terms of the GNU General Public License
-**  as published by the Free Software Foundation; either version 2
-**  of the License, or (at your option) any later version.
-**
+**  This program is free software: you can redistribute it and/or modify
+**  it under the terms of the GNU General Public License as published by
+**  the Free Software Foundation, either version 3 of the License, or
+**  (at your option) any later version.
+**  
 **  This program is distributed in the hope that it will be useful,
 **  but WITHOUT ANY WARRANTY; without even the implied warranty of
 **  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 **  GNU General Public License for more details.
-** 
+**  
 **  You should have received a copy of the GNU General Public License
-**  along with this program; if not, write to the Free Software
-**  Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA
-**  02111-1307, USA.
+**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
 #ifndef HEADER_RENDER_BUFFER_HPP

Modified: trunk/windstille/src/display/scene_context.cpp
===================================================================
--- trunk/windstille/src/display/scene_context.cpp	2009-02-10 14:12:18 UTC (rev 2428)
+++ trunk/windstille/src/display/scene_context.cpp	2009-02-10 14:28:05 UTC (rev 2429)
@@ -1,26 +1,19 @@
-/*  $Id$
-**   __      __ __             ___        __   __ __   __
-**  /  \    /  \__| ____    __| _/_______/  |_|__|  | |  |   ____
-**  \   \/\/   /  |/    \  / __ |/  ___/\   __\  |  | |  | _/ __ \
-**   \        /|  |   |  \/ /_/ |\___ \  |  | |  |  |_|  |_\  ___/
-**    \__/\  / |__|___|  /\____ /____  > |__| |__|____/____/\___  >
-**         \/          \/      \/    \/                         \/
+/*
+**  Windstille - A Sci-Fi Action-Adventure Game
 **  Copyright (C) 2000,2005 Ingo Ruhnke <grumbel at gmx.de>
 **
-**  This program is free software; you can redistribute it and/or
-**  modify it under the terms of the GNU General Public License
-**  as published by the Free Software Foundation; either version 2
-**  of the License, or (at your option) any later version.
-**
+**  This program is free software: you can redistribute it and/or modify
+**  it under the terms of the GNU General Public License as published by
+**  the Free Software Foundation, either version 3 of the License, or
+**  (at your option) any later version.
+**  
 **  This program is distributed in the hope that it will be useful,
 **  but WITHOUT ANY WARRANTY; without even the implied warranty of
 **  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 **  GNU General Public License for more details.
-** 
+**  
 **  You should have received a copy of the GNU General Public License
-**  along with this program; if not, write to the Free Software
-**  Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA
-**  02111-1307, USA.
+**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
 #include <GL/glew.h>

Modified: trunk/windstille/src/display/scene_context.hpp
===================================================================
--- trunk/windstille/src/display/scene_context.hpp	2009-02-10 14:12:18 UTC (rev 2428)
+++ trunk/windstille/src/display/scene_context.hpp	2009-02-10 14:28:05 UTC (rev 2429)
@@ -1,26 +1,19 @@
-/*  $Id$
-**   __      __ __             ___        __   __ __   __
-**  /  \    /  \__| ____    __| _/_______/  |_|__|  | |  |   ____
-**  \   \/\/   /  |/    \  / __ |/  ___/\   __\  |  | |  | _/ __ \
-**   \        /|  |   |  \/ /_/ |\___ \  |  | |  |  |_|  |_\  ___/
-**    \__/\  / |__|___|  /\____ /____  > |__| |__|____/____/\___  >
-**         \/          \/      \/    \/                         \/
+/*
+**  Windstille - A Sci-Fi Action-Adventure Game
 **  Copyright (C) 2000,2005 Ingo Ruhnke <grumbel at gmx.de>
 **
-**  This program is free software; you can redistribute it and/or
-**  modify it under the terms of the GNU General Public License
-**  as published by the Free Software Foundation; either version 2
-**  of the License, or (at your option) any later version.
-**
+**  This program is free software: you can redistribute it and/or modify
+**  it under the terms of the GNU General Public License as published by
+**  the Free Software Foundation, either version 3 of the License, or
+**  (at your option) any later version.
+**  
 **  This program is distributed in the hope that it will be useful,
 **  but WITHOUT ANY WARRANTY; without even the implied warranty of
 **  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 **  GNU General Public License for more details.
-** 
+**  
 **  You should have received a copy of the GNU General Public License
-**  along with this program; if not, write to the Free Software
-**  Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA
-**  02111-1307, USA.
+**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
 #ifndef HEADER_SCENE_CONTEXT_HXX

Modified: trunk/windstille/src/display/shader_object.cpp
===================================================================
--- trunk/windstille/src/display/shader_object.cpp	2009-02-10 14:12:18 UTC (rev 2428)
+++ trunk/windstille/src/display/shader_object.cpp	2009-02-10 14:28:05 UTC (rev 2429)
@@ -1,26 +1,19 @@
-/*  $Id$
-**   __      __ __             ___        __   __ __   __
-**  /  \    /  \__| ____    __| _/_______/  |_|__|  | |  |   ____
-**  \   \/\/   /  |/    \  / __ |/  ___/\   __\  |  | |  | _/ __ \
-**   \        /|  |   |  \/ /_/ |\___ \  |  | |  |  |_|  |_\  ___/
-**    \__/\  / |__|___|  /\____ /____  > |__| |__|____/____/\___  >
-**         \/          \/      \/    \/                         \/
+/*
+**  Windstille - A Sci-Fi Action-Adventure Game
 **  Copyright (C) 2005 Ingo Ruhnke <grumbel at gmx.de>
 **
-**  This program is free software; you can redistribute it and/or
-**  modify it under the terms of the GNU General Public License
-**  as published by the Free Software Foundation; either version 2
-**  of the License, or (at your option) any later version.
-**
+**  This program is free software: you can redistribute it and/or modify
+**  it under the terms of the GNU General Public License as published by
+**  the Free Software Foundation, either version 3 of the License, or
+**  (at your option) any later version.
+**  
 **  This program is distributed in the hope that it will be useful,
 **  but WITHOUT ANY WARRANTY; without even the implied warranty of
 **  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 **  GNU General Public License for more details.
-** 
+**  
 **  You should have received a copy of the GNU General Public License
-**  along with this program; if not, write to the Free Software
-**  Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA
-**  02111-1307, USA.
+**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
 #include "shader_object.hpp"

Modified: trunk/windstille/src/display/shader_object.hpp
===================================================================
--- trunk/windstille/src/display/shader_object.hpp	2009-02-10 14:12:18 UTC (rev 2428)
+++ trunk/windstille/src/display/shader_object.hpp	2009-02-10 14:28:05 UTC (rev 2429)
@@ -1,26 +1,19 @@
-/*  $Id$
-**   __      __ __             ___        __   __ __   __
-**  /  \    /  \__| ____    __| _/_______/  |_|__|  | |  |   ____
-**  \   \/\/   /  |/    \  / __ |/  ___/\   __\  |  | |  | _/ __ \
-**   \        /|  |   |  \/ /_/ |\___ \  |  | |  |  |_|  |_\  ___/
-**    \__/\  / |__|___|  /\____ /____  > |__| |__|____/____/\___  >
-**         \/          \/      \/    \/                         \/
+/*
+**  Windstille - A Sci-Fi Action-Adventure Game
 **  Copyright (C) 2005 Ingo Ruhnke <grumbel at gmx.de>
 **
-**  This program is free software; you can redistribute it and/or
-**  modify it under the terms of the GNU General Public License
-**  as published by the Free Software Foundation; either version 2
-**  of the License, or (at your option) any later version.
-**
+**  This program is free software: you can redistribute it and/or modify
+**  it under the terms of the GNU General Public License as published by
+**  the Free Software Foundation, either version 3 of the License, or
+**  (at your option) any later version.
+**  
 **  This program is distributed in the hope that it will be useful,
 **  but WITHOUT ANY WARRANTY; without even the implied warranty of
 **  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 **  GNU General Public License for more details.
-** 
+**  
 **  You should have received a copy of the GNU General Public License
-**  along with this program; if not, write to the Free Software
-**  Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA
-**  02111-1307, USA.
+**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
 #ifndef HEADER_SHADER_OBJECT_HPP

Modified: trunk/windstille/src/display/shader_program.cpp
===================================================================
--- trunk/windstille/src/display/shader_program.cpp	2009-02-10 14:12:18 UTC (rev 2428)
+++ trunk/windstille/src/display/shader_program.cpp	2009-02-10 14:28:05 UTC (rev 2429)
@@ -1,26 +1,19 @@
-/*  $Id$
-**   __      __ __             ___        __   __ __   __
-**  /  \    /  \__| ____    __| _/_______/  |_|__|  | |  |   ____
-**  \   \/\/   /  |/    \  / __ |/  ___/\   __\  |  | |  | _/ __ \
-**   \        /|  |   |  \/ /_/ |\___ \  |  | |  |  |_|  |_\  ___/
-**    \__/\  / |__|___|  /\____ /____  > |__| |__|____/____/\___  >
-**         \/          \/      \/    \/                         \/
+/*
+**  Windstille - A Sci-Fi Action-Adventure Game
 **  Copyright (C) 2005 Ingo Ruhnke <grumbel at gmx.de>
 **
-**  This program is free software; you can redistribute it and/or
-**  modify it under the terms of the GNU General Public License
-**  as published by the Free Software Foundation; either version 2
-**  of the License, or (at your option) any later version.
-**
+**  This program is free software: you can redistribute it and/or modify
+**  it under the terms of the GNU General Public License as published by
+**  the Free Software Foundation, either version 3 of the License, or
+**  (at your option) any later version.
+**  
 **  This program is distributed in the hope that it will be useful,
 **  but WITHOUT ANY WARRANTY; without even the implied warranty of
 **  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 **  GNU General Public License for more details.
-** 
+**  
 **  You should have received a copy of the GNU General Public License
-**  along with this program; if not, write to the Free Software
-**  Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA
-**  02111-1307, USA.
+**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
 #include "shader_program.hpp"

Modified: trunk/windstille/src/display/shader_program.hpp
===================================================================
--- trunk/windstille/src/display/shader_program.hpp	2009-02-10 14:12:18 UTC (rev 2428)
+++ trunk/windstille/src/display/shader_program.hpp	2009-02-10 14:28:05 UTC (rev 2429)
@@ -1,26 +1,19 @@
-/*  $Id$
-**   __      __ __             ___        __   __ __   __
-**  /  \    /  \__| ____    __| _/_______/  |_|__|  | |  |   ____
-**  \   \/\/   /  |/    \  / __ |/  ___/\   __\  |  | |  | _/ __ \
-**   \        /|  |   |  \/ /_/ |\___ \  |  | |  |  |_|  |_\  ___/
-**    \__/\  / |__|___|  /\____ /____  > |__| |__|____/____/\___  >
-**         \/          \/      \/    \/                         \/
+/*
+**  Windstille - A Sci-Fi Action-Adventure Game
 **  Copyright (C) 2005 Ingo Ruhnke <grumbel at gmx.de>
 **
-**  This program is free software; you can redistribute it and/or
-**  modify it under the terms of the GNU General Public License
-**  as published by the Free Software Foundation; either version 2
-**  of the License, or (at your option) any later version.
-**
+**  This program is free software: you can redistribute it and/or modify
+**  it under the terms of the GNU General Public License as published by
+**  the Free Software Foundation, either version 3 of the License, or
+**  (at your option) any later version.
+**  
 **  This program is distributed in the hope that it will be useful,
 **  but WITHOUT ANY WARRANTY; without even the implied warranty of
 **  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 **  GNU General Public License for more details.
-** 
+**  
 **  You should have received a copy of the GNU General Public License
-**  along with this program; if not, write to the Free Software
-**  Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA
-**  02111-1307, USA.
+**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
 #ifndef HEADER_SHADER_PROGRAM_HPP

Modified: trunk/windstille/src/display/surface.cpp
===================================================================
--- trunk/windstille/src/display/surface.cpp	2009-02-10 14:12:18 UTC (rev 2428)
+++ trunk/windstille/src/display/surface.cpp	2009-02-10 14:28:05 UTC (rev 2429)
@@ -1,26 +1,19 @@
-/*  $Id$
-**   __      __ __             ___        __   __ __   __
-**  /  \    /  \__| ____    __| _/_______/  |_|__|  | |  |   ____
-**  \   \/\/   /  |/    \  / __ |/  ___/\   __\  |  | |  | _/ __ \
-**   \        /|  |   |  \/ /_/ |\___ \  |  | |  |  |_|  |_\  ___/
-**    \__/\  / |__|___|  /\____ /____  > |__| |__|____/____/\___  >
-**         \/          \/      \/    \/                         \/
+/*
+**  Windstille - A Sci-Fi Action-Adventure Game
 **  Copyright (C) 2005 Ingo Ruhnke <grumbel at gmx.de>
 **
-**  This program is free software; you can redistribute it and/or
-**  modify it under the terms of the GNU General Public License
-**  as published by the Free Software Foundation; either version 2
-**  of the License, or (at your option) any later version.
-**
+**  This program is free software: you can redistribute it and/or modify
+**  it under the terms of the GNU General Public License as published by
+**  the Free Software Foundation, either version 3 of the License, or
+**  (at your option) any later version.
+**  
 **  This program is distributed in the hope that it will be useful,
 **  but WITHOUT ANY WARRANTY; without even the implied warranty of
 **  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 **  GNU General Public License for more details.
-** 
+**  
 **  You should have received a copy of the GNU General Public License
-**  along with this program; if not, write to the Free Software
-**  Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA
-**  02111-1307, USA.
+**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
 #include "surface.hpp"

Modified: trunk/windstille/src/display/surface.hpp
===================================================================
--- trunk/windstille/src/display/surface.hpp	2009-02-10 14:12:18 UTC (rev 2428)
+++ trunk/windstille/src/display/surface.hpp	2009-02-10 14:28:05 UTC (rev 2429)
@@ -1,26 +1,19 @@
-/*  $Id$
-**   __      __ __             ___        __   __ __   __
-**  /  \    /  \__| ____    __| _/_______/  |_|__|  | |  |   ____
-**  \   \/\/   /  |/    \  / __ |/  ___/\   __\  |  | |  | _/ __ \
-**   \        /|  |   |  \/ /_/ |\___ \  |  | |  |  |_|  |_\  ___/
-**    \__/\  / |__|___|  /\____ /____  > |__| |__|____/____/\___  >
-**         \/          \/      \/    \/                         \/
+/*
+**  Windstille - A Sci-Fi Action-Adventure Game
 **  Copyright (C) 2005 Ingo Ruhnke <grumbel at gmx.de>
 **
-**  This program is free software; you can redistribute it and/or
-**  modify it under the terms of the GNU General Public License
-**  as published by the Free Software Foundation; either version 2
-**  of the License, or (at your option) any later version.
-**
+**  This program is free software: you can redistribute it and/or modify
+**  it under the terms of the GNU General Public License as published by
+**  the Free Software Foundation, either version 3 of the License, or
+**  (at your option) any later version.
+**  
 **  This program is distributed in the hope that it will be useful,
 **  but WITHOUT ANY WARRANTY; without even the implied warranty of
 **  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 **  GNU General Public License for more details.
-** 
+**  
 **  You should have received a copy of the GNU General Public License
-**  along with this program; if not, write to the Free Software
-**  Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA
-**  02111-1307, USA.
+**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
 #ifndef HEADER_SURFACE_HPP

Modified: trunk/windstille/src/display/surface_drawing_parameters.hpp
===================================================================
--- trunk/windstille/src/display/surface_drawing_parameters.hpp	2009-02-10 14:12:18 UTC (rev 2428)
+++ trunk/windstille/src/display/surface_drawing_parameters.hpp	2009-02-10 14:28:05 UTC (rev 2429)
@@ -1,26 +1,19 @@
-/*  $Id$
-**   __      __ __             ___        __   __ __   __
-**  /  \    /  \__| ____    __| _/_______/  |_|__|  | |  |   ____
-**  \   \/\/   /  |/    \  / __ |/  ___/\   __\  |  | |  | _/ __ \
-**   \        /|  |   |  \/ /_/ |\___ \  |  | |  |  |_|  |_\  ___/
-**    \__/\  / |__|___|  /\____ /____  > |__| |__|____/____/\___  >
-**         \/          \/      \/    \/                         \/
+/*
+**  Windstille - A Sci-Fi Action-Adventure Game
 **  Copyright (C) 2005 Ingo Ruhnke <grumbel at gmx.de>
 **
-**  This program is free software; you can redistribute it and/or
-**  modify it under the terms of the GNU General Public License
-**  as published by the Free Software Foundation; either version 2
-**  of the License, or (at your option) any later version.
-**
+**  This program is free software: you can redistribute it and/or modify
+**  it under the terms of the GNU General Public License as published by
+**  the Free Software Foundation, either version 3 of the License, or
+**  (at your option) any later version.
+**  
 **  This program is distributed in the hope that it will be useful,
 **  but WITHOUT ANY WARRANTY; without even the implied warranty of
 **  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 **  GNU General Public License for more details.
-** 
+**  
 **  You should have received a copy of the GNU General Public License
-**  along with this program; if not, write to the Free Software
-**  Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA
-**  02111-1307, USA.
+**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
 #ifndef HEADER_GLUTIL_SURFACE_DRAWING_PARAMETERS_HPP

Modified: trunk/windstille/src/display/texture.cpp
===================================================================
--- trunk/windstille/src/display/texture.cpp	2009-02-10 14:12:18 UTC (rev 2428)
+++ trunk/windstille/src/display/texture.cpp	2009-02-10 14:28:05 UTC (rev 2429)
@@ -1,27 +1,20 @@
-/*  $Id: windstille_main.hpp 752 2005-07-25 10:00:44Z grumbel $
-**   __      __ __             ___        __   __ __   __
-**  /  \    /  \__| ____    __| _/_______/  |_|__|  | |  |   ____
-**  \   \/\/   /  |/    \  / __ |/  ___/\   __\  |  | |  | _/ __ \
-**   \        /|  |   |  \/ /_/ |\___ \  |  | |  |  |_|  |_\  ___/
-**    \__/\  / |__|___|  /\____ /____  > |__| |__|____/____/\___  >
-**         \/          \/      \/    \/                         \/
+/*
+**  Windstille - A Sci-Fi Action-Adventure Game
 **  Copyright (C) 2000,2005 Ingo Ruhnke <grumbel at gmx.de>,
 **                          Matthias Braun <matze at braunis.de>
 **
-**  This program is free software; you can redistribute it and/or
-**  modify it under the terms of the GNU General Public License
-**  as published by the Free Software Foundation; either version 2
-**  of the License, or (at your option) any later version.
-**
+**  This program is free software: you can redistribute it and/or modify
+**  it under the terms of the GNU General Public License as published by
+**  the Free Software Foundation, either version 3 of the License, or
+**  (at your option) any later version.
+**  
 **  This program is distributed in the hope that it will be useful,
 **  but WITHOUT ANY WARRANTY; without even the implied warranty of
 **  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 **  GNU General Public License for more details.
-** 
+**  
 **  You should have received a copy of the GNU General Public License
-**  along with this program; if not, write to the Free Software
-**  Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA
-**  02111-1307, USA.
+**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
 #include <stdexcept>

Modified: trunk/windstille/src/display/texture.hpp
===================================================================
--- trunk/windstille/src/display/texture.hpp	2009-02-10 14:12:18 UTC (rev 2428)
+++ trunk/windstille/src/display/texture.hpp	2009-02-10 14:28:05 UTC (rev 2429)
@@ -1,27 +1,20 @@
-/*  $Id: windstille_main.hpp 752 2005-07-25 10:00:44Z grumbel $
-**   __      __ __             ___        __   __ __   __
-**  /  \    /  \__| ____    __| _/_______/  |_|__|  | |  |   ____
-**  \   \/\/   /  |/    \  / __ |/  ___/\   __\  |  | |  | _/ __ \
-**   \        /|  |   |  \/ /_/ |\___ \  |  | |  |  |_|  |_\  ___/
-**    \__/\  / |__|___|  /\____ /____  > |__| |__|____/____/\___  >
-**         \/          \/      \/    \/                         \/
+/*
+**  Windstille - A Sci-Fi Action-Adventure Game
 **  Copyright (C) 2000,2005 Ingo Ruhnke <grumbel at gmx.de>,
 **                          Matthias Braun <matze at braunis.de>
 **
-**  This program is free software; you can redistribute it and/or
-**  modify it under the terms of the GNU General Public License
-**  as published by the Free Software Foundation; either version 2
-**  of the License, or (at your option) any later version.
-**
+**  This program is free software: you can redistribute it and/or modify
+**  it under the terms of the GNU General Public License as published by
+**  the Free Software Foundation, either version 3 of the License, or
+**  (at your option) any later version.
+**  
 **  This program is distributed in the hope that it will be useful,
 **  but WITHOUT ANY WARRANTY; without even the implied warranty of
 **  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 **  GNU General Public License for more details.
-** 
+**  
 **  You should have received a copy of the GNU General Public License
-**  along with this program; if not, write to the Free Software
-**  Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA
-**  02111-1307, USA.
+**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
 #ifndef __TEXTURE_HPP__

Modified: trunk/windstille/src/display/vertex_array_drawing_request.cpp
===================================================================
--- trunk/windstille/src/display/vertex_array_drawing_request.cpp	2009-02-10 14:12:18 UTC (rev 2428)
+++ trunk/windstille/src/display/vertex_array_drawing_request.cpp	2009-02-10 14:28:05 UTC (rev 2429)
@@ -1,26 +1,19 @@
-/*  $Id$
-**   __      __ __             ___        __   __ __   __
-**  /  \    /  \__| ____    __| _/_______/  |_|__|  | |  |   ____
-**  \   \/\/   /  |/    \  / __ |/  ___/\   __\  |  | |  | _/ __ \
-**   \        /|  |   |  \/ /_/ |\___ \  |  | |  |  |_|  |_\  ___/
-**    \__/\  / |__|___|  /\____ /____  > |__| |__|____/____/\___  >
-**         \/          \/      \/    \/                         \/
+/*
+**  Windstille - A Sci-Fi Action-Adventure Game
 **  Copyright (C) 2005 Ingo Ruhnke <grumbel at gmx.de>
 **
-**  This program is free software; you can redistribute it and/or
-**  modify it under the terms of the GNU General Public License
-**  as published by the Free Software Foundation; either version 2
-**  of the License, or (at your option) any later version.
-**
+**  This program is free software: you can redistribute it and/or modify
+**  it under the terms of the GNU General Public License as published by
+**  the Free Software Foundation, either version 3 of the License, or
+**  (at your option) any later version.
+**  
 **  This program is distributed in the hope that it will be useful,
 **  but WITHOUT ANY WARRANTY; without even the implied warranty of
 **  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 **  GNU General Public License for more details.
-** 
+**  
 **  You should have received a copy of the GNU General Public License
-**  along with this program; if not, write to the Free Software
-**  Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA
-**  02111-1307, USA.
+**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
 

Modified: trunk/windstille/src/display/vertex_array_drawing_request.hpp
===================================================================
--- trunk/windstille/src/display/vertex_array_drawing_request.hpp	2009-02-10 14:12:18 UTC (rev 2428)
+++ trunk/windstille/src/display/vertex_array_drawing_request.hpp	2009-02-10 14:28:05 UTC (rev 2429)
@@ -1,4 +1,4 @@
-//  $Id$
+//
 // 
 //  Windstille - A Jump'n Shoot Game
 //  Copyright (C) 2005 Ingo Ruhnke <grumbel at gmx.de>

Modified: trunk/windstille/src/elevator.cpp
===================================================================
--- trunk/windstille/src/elevator.cpp	2009-02-10 14:12:18 UTC (rev 2428)
+++ trunk/windstille/src/elevator.cpp	2009-02-10 14:28:05 UTC (rev 2429)
@@ -1,10 +1,5 @@
-/*  $Id$
-**   __      __ __             ___        __   __ __   __
-**  /  \    /  \__| ____    __| _/_______/  |_|__|  | |  |   ____
-**  \   \/\/   /  |/    \  / __ |/  ___/\   __\  |  | |  | _/ __ \
-**   \        /|  |   |  \/ /_/ |\___ \  |  | |  |  |_|  |_\  ___/
-**    \__/\  / |__|___|  /\____ /____  > |__| |__|____/____/\___  >
-**         \/          \/      \/    \/                         \/
+/*
+**  Windstille - A Sci-Fi Action-Adventure Game
 **  Copyright (C) 2005 Ingo Ruhnke <grumbel at gmx.de>
 **
 **  This program is free software; you can redistribute it and/or

Modified: trunk/windstille/src/elevator.hpp
===================================================================
--- trunk/windstille/src/elevator.hpp	2009-02-10 14:12:18 UTC (rev 2428)
+++ trunk/windstille/src/elevator.hpp	2009-02-10 14:28:05 UTC (rev 2429)
@@ -1,10 +1,5 @@
-/*  $Id$
-**   __      __ __             ___        __   __ __   __
-**  /  \    /  \__| ____    __| _/_______/  |_|__|  | |  |   ____
-**  \   \/\/   /  |/    \  / __ |/  ___/\   __\  |  | |  | _/ __ \
-**   \        /|  |   |  \/ /_/ |\___ \  |  | |  |  |_|  |_\  ___/
-**    \__/\  / |__|___|  /\____ /____  > |__| |__|____/____/\___  >
-**         \/          \/      \/    \/                         \/
+/*
+**  Windstille - A Sci-Fi Action-Adventure Game
 **  Copyright (C) 2005 Ingo Ruhnke <grumbel at gmx.de>
 **
 **  This program is free software; you can redistribute it and/or

Modified: trunk/windstille/src/energy_bar.cpp
===================================================================
--- trunk/windstille/src/energy_bar.cpp	2009-02-10 14:12:18 UTC (rev 2428)
+++ trunk/windstille/src/energy_bar.cpp	2009-02-10 14:28:05 UTC (rev 2429)
@@ -1,26 +1,19 @@
-/*  $Id$
-**   __      __ __             ___        __   __ __   __
-**  /  \    /  \__| ____    __| _/_______/  |_|__|  | |  |   ____
-**  \   \/\/   /  |/    \  / __ |/  ___/\   __\  |  | |  | _/ __ \
-**   \        /|  |   |  \/ /_/ |\___ \  |  | |  |  |_|  |_\  ___/
-**    \__/\  / |__|___|  /\____ /____  > |__| |__|____/____/\___  >
-**         \/          \/      \/    \/                         \/
+/*
+**  Windstille - A Sci-Fi Action-Adventure Game
 **  Copyright (C) 2000,2005 Ingo Ruhnke <grumbel at gmx.de>
 **
-**  This program is free software; you can redistribute it and/or
-**  modify it under the terms of the GNU General Public License
-**  as published by the Free Software Foundation; either version 2
-**  of the License, or (at your option) any later version.
-**
+**  This program is free software: you can redistribute it and/or modify
+**  it under the terms of the GNU General Public License as published by
+**  the Free Software Foundation, either version 3 of the License, or
+**  (at your option) any later version.
+**  
 **  This program is distributed in the hope that it will be useful,
 **  but WITHOUT ANY WARRANTY; without even the implied warranty of
 **  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 **  GNU General Public License for more details.
-** 
+**  
 **  You should have received a copy of the GNU General Public License
-**  along with this program; if not, write to the Free Software
-**  Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA
-**  02111-1307, USA.
+**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
 #include "globals.hpp"

Modified: trunk/windstille/src/energy_bar.hpp
===================================================================
--- trunk/windstille/src/energy_bar.hpp	2009-02-10 14:12:18 UTC (rev 2428)
+++ trunk/windstille/src/energy_bar.hpp	2009-02-10 14:28:05 UTC (rev 2429)
@@ -1,26 +1,19 @@
-/*  $Id$
-**   __      __ __             ___        __   __ __   __
-**  /  \    /  \__| ____    __| _/_______/  |_|__|  | |  |   ____
-**  \   \/\/   /  |/    \  / __ |/  ___/\   __\  |  | |  | _/ __ \
-**   \        /|  |   |  \/ /_/ |\___ \  |  | |  |  |_|  |_\  ___/
-**    \__/\  / |__|___|  /\____ /____  > |__| |__|____/____/\___  >
-**         \/          \/      \/    \/                         \/
+/*
+**  Windstille - A Sci-Fi Action-Adventure Game
 **  Copyright (C) 2000,2005 Ingo Ruhnke <grumbel at gmx.de>
 **
-**  This program is free software; you can redistribute it and/or
-**  modify it under the terms of the GNU General Public License
-**  as published by the Free Software Foundation; either version 2
-**  of the License, or (at your option) any later version.
-**
+**  This program is free software: you can redistribute it and/or modify
+**  it under the terms of the GNU General Public License as published by
+**  the Free Software Foundation, either version 3 of the License, or
+**  (at your option) any later version.
+**  
 **  This program is distributed in the hope that it will be useful,
 **  but WITHOUT ANY WARRANTY; without even the implied warranty of
 **  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 **  GNU General Public License for more details.
-** 
+**  
 **  You should have received a copy of the GNU General Public License
-**  along with this program; if not, write to the Free Software
-**  Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA
-**  02111-1307, USA.
+**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
 #ifndef HEADER_ENERGYBAR_HXX

Modified: trunk/windstille/src/entity.cpp
===================================================================
--- trunk/windstille/src/entity.cpp	2009-02-10 14:12:18 UTC (rev 2428)
+++ trunk/windstille/src/entity.cpp	2009-02-10 14:28:05 UTC (rev 2429)
@@ -1,26 +1,19 @@
-/*  $Id$
-**   __      __ __             ___        __   __ __   __
-**  /  \    /  \__| ____    __| _/_______/  |_|__|  | |  |   ____
-**  \   \/\/   /  |/    \  / __ |/  ___/\   __\  |  | |  | _/ __ \
-**   \        /|  |   |  \/ /_/ |\___ \  |  | |  |  |_|  |_\  ___/
-**    \__/\  / |__|___|  /\____ /____  > |__| |__|____/____/\___  >
-**         \/          \/      \/    \/                         \/
+/*
+**  Windstille - A Sci-Fi Action-Adventure Game
 **  Copyright (C) 2005 Ingo Ruhnke <grumbel at gmx.de>
 **
-**  This program is free software; you can redistribute it and/or
-**  modify it under the terms of the GNU General Public License
-**  as published by the Free Software Foundation; either version 2
-**  of the License, or (at your option) any later version.
-**
+**  This program is free software: you can redistribute it and/or modify
+**  it under the terms of the GNU General Public License as published by
+**  the Free Software Foundation, either version 3 of the License, or
+**  (at your option) any later version.
+**  
 **  This program is distributed in the hope that it will be useful,
 **  but WITHOUT ANY WARRANTY; without even the implied warranty of
 **  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 **  GNU General Public License for more details.
-** 
+**  
 **  You should have received a copy of the GNU General Public License
-**  along with this program; if not, write to the Free Software
-**  Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA
-**  02111-1307, USA.
+**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
 #include <assert.h>

Modified: trunk/windstille/src/entity.hpp
===================================================================
--- trunk/windstille/src/entity.hpp	2009-02-10 14:12:18 UTC (rev 2428)
+++ trunk/windstille/src/entity.hpp	2009-02-10 14:28:05 UTC (rev 2429)
@@ -1,26 +1,19 @@
-/*  $Id$
-**   __      __ __             ___        __   __ __   __
-**  /  \    /  \__| ____    __| _/_______/  |_|__|  | |  |   ____
-**  \   \/\/   /  |/    \  / __ |/  ___/\   __\  |  | |  | _/ __ \
-**   \        /|  |   |  \/ /_/ |\___ \  |  | |  |  |_|  |_\  ___/
-**    \__/\  / |__|___|  /\____ /____  > |__| |__|____/____/\___  >
-**         \/          \/      \/    \/                         \/
+/*
+**  Windstille - A Sci-Fi Action-Adventure Game
 **  Copyright (C) 2005 Ingo Ruhnke <grumbel at gmx.de>
 **
-**  This program is free software; you can redistribute it and/or
-**  modify it under the terms of the GNU General Public License
-**  as published by the Free Software Foundation; either version 2
-**  of the License, or (at your option) any later version.
-**
+**  This program is free software: you can redistribute it and/or modify
+**  it under the terms of the GNU General Public License as published by
+**  the Free Software Foundation, either version 3 of the License, or
+**  (at your option) any later version.
+**  
 **  This program is distributed in the hope that it will be useful,
 **  but WITHOUT ANY WARRANTY; without even the implied warranty of
 **  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 **  GNU General Public License for more details.
-** 
+**  
 **  You should have received a copy of the GNU General Public License
-**  along with this program; if not, write to the Free Software
-**  Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA
-**  02111-1307, USA.
+**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
 #ifndef HEADER_ENTITY_HXX

Modified: trunk/windstille/src/field.hpp
===================================================================
--- trunk/windstille/src/field.hpp	2009-02-10 14:12:18 UTC (rev 2428)
+++ trunk/windstille/src/field.hpp	2009-02-10 14:28:05 UTC (rev 2429)
@@ -1,4 +1,4 @@
-//  $Id$
+//
 // 
 //  Windstille - A Jump'n Shoot Game
 //  Copyright (C) 2000 Ingo Ruhnke <grumbel at gmx.de>

Modified: trunk/windstille/src/file_reader.cpp
===================================================================
--- trunk/windstille/src/file_reader.cpp	2009-02-10 14:12:18 UTC (rev 2428)
+++ trunk/windstille/src/file_reader.cpp	2009-02-10 14:28:05 UTC (rev 2429)
@@ -1,5 +1,5 @@
-//  $Id$
 //
+//
 //  Pingus - A free Lemmings clone
 //  Copyright (C) 2002 Ingo Ruhnke <grumbel at gmx.de>
 //

Modified: trunk/windstille/src/file_reader.hpp
===================================================================
--- trunk/windstille/src/file_reader.hpp	2009-02-10 14:12:18 UTC (rev 2428)
+++ trunk/windstille/src/file_reader.hpp	2009-02-10 14:28:05 UTC (rev 2429)
@@ -1,5 +1,5 @@
-//  $Id: file_reader.hxx,v 1.4 2003/10/18 23:17:27 grumbel Exp $
 //
+//
 //  Pingus - A free Lemmings clone
 //  Copyright (C) 2002 Ingo Ruhnke <grumbel at gmx.de>
 //

Modified: trunk/windstille/src/file_reader_impl.hpp
===================================================================
--- trunk/windstille/src/file_reader_impl.hpp	2009-02-10 14:12:18 UTC (rev 2428)
+++ trunk/windstille/src/file_reader_impl.hpp	2009-02-10 14:28:05 UTC (rev 2429)
@@ -1,4 +1,4 @@
-//  $Id$
+//
 // 
 //  Pingus - A free Lemmings clone
 //  Copyright (C) 2002 Ingo Ruhnke <grumbel at gmx.de>

Modified: trunk/windstille/src/font/border_font_effect.cpp
===================================================================
--- trunk/windstille/src/font/border_font_effect.cpp	2009-02-10 14:12:18 UTC (rev 2428)
+++ trunk/windstille/src/font/border_font_effect.cpp	2009-02-10 14:28:05 UTC (rev 2429)
@@ -1,26 +1,19 @@
-/*  $Id$
-**   __      __ __             ___        __   __ __   __
-**  /  \    /  \__| ____    __| _/_______/  |_|__|  | |  |   ____
-**  \   \/\/   /  |/    \  / __ |/  ___/\   __\  |  | |  | _/ __ \
-**   \        /|  |   |  \/ /_/ |\___ \  |  | |  |  |_|  |_\  ___/
-**    \__/\  / |__|___|  /\____ /____  > |__| |__|____/____/\___  >
-**         \/          \/      \/    \/                         \/
+/*
+**  Windstille - A Sci-Fi Action-Adventure Game
 **  Copyright (C) 2005 Ingo Ruhnke <grumbel at gmx.de>
 **
-**  This program is free software; you can redistribute it and/or
-**  modify it under the terms of the GNU General Public License
-**  as published by the Free Software Foundation; either version 2
-**  of the License, or (at your option) any later version.
-**
+**  This program is free software: you can redistribute it and/or modify
+**  it under the terms of the GNU General Public License as published by
+**  the Free Software Foundation, either version 3 of the License, or
+**  (at your option) any later version.
+**  
 **  This program is distributed in the hope that it will be useful,
 **  but WITHOUT ANY WARRANTY; without even the implied warranty of
 **  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 **  GNU General Public License for more details.
-** 
+**  
 **  You should have received a copy of the GNU General Public License
-**  along with this program; if not, write to the Free Software
-**  Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA
-**  02111-1307, USA.
+**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
 #include <algorithm>

Modified: trunk/windstille/src/font/border_font_effect.hpp
===================================================================
--- trunk/windstille/src/font/border_font_effect.hpp	2009-02-10 14:12:18 UTC (rev 2428)
+++ trunk/windstille/src/font/border_font_effect.hpp	2009-02-10 14:28:05 UTC (rev 2429)
@@ -1,26 +1,19 @@
-/*  $Id$
-**   __      __ __             ___        __   __ __   __
-**  /  \    /  \__| ____    __| _/_______/  |_|__|  | |  |   ____
-**  \   \/\/   /  |/    \  / __ |/  ___/\   __\  |  | |  | _/ __ \
-**   \        /|  |   |  \/ /_/ |\___ \  |  | |  |  |_|  |_\  ___/
-**    \__/\  / |__|___|  /\____ /____  > |__| |__|____/____/\___  >
-**         \/          \/      \/    \/                         \/
+/*
+**  Windstille - A Sci-Fi Action-Adventure Game
 **  Copyright (C) 2005 Ingo Ruhnke <grumbel at gmx.de>
 **
-**  This program is free software; you can redistribute it and/or
-**  modify it under the terms of the GNU General Public License
-**  as published by the Free Software Foundation; either version 2
-**  of the License, or (at your option) any later version.
-**
+**  This program is free software: you can redistribute it and/or modify
+**  it under the terms of the GNU General Public License as published by
+**  the Free Software Foundation, either version 3 of the License, or
+**  (at your option) any later version.
+**  
 **  This program is distributed in the hope that it will be useful,
 **  but WITHOUT ANY WARRANTY; without even the implied warranty of
 **  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 **  GNU General Public License for more details.
-** 
+**  
 **  You should have received a copy of the GNU General Public License
-**  along with this program; if not, write to the Free Software
-**  Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA
-**  02111-1307, USA.
+**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
 #ifndef HEADER_WINDSTILLE_BORDER_FONT_EFFECT_HPP

Modified: trunk/windstille/src/font/font_effect.hpp
===================================================================
--- trunk/windstille/src/font/font_effect.hpp	2009-02-10 14:12:18 UTC (rev 2428)
+++ trunk/windstille/src/font/font_effect.hpp	2009-02-10 14:28:05 UTC (rev 2429)
@@ -1,26 +1,19 @@
-/*  $Id$
-**   __      __ __             ___        __   __ __   __
-**  /  \    /  \__| ____    __| _/_______/  |_|__|  | |  |   ____
-**  \   \/\/   /  |/    \  / __ |/  ___/\   __\  |  | |  | _/ __ \
-**   \        /|  |   |  \/ /_/ |\___ \  |  | |  |  |_|  |_\  ___/
-**    \__/\  / |__|___|  /\____ /____  > |__| |__|____/____/\___  >
-**         \/          \/      \/    \/                         \/
+/*
+**  Windstille - A Sci-Fi Action-Adventure Game
 **  Copyright (C) 2005 Ingo Ruhnke <grumbel at gmx.de>
 **
-**  This program is free software; you can redistribute it and/or
-**  modify it under the terms of the GNU General Public License
-**  as published by the Free Software Foundation; either version 2
-**  of the License, or (at your option) any later version.
-**
+**  This program is free software: you can redistribute it and/or modify
+**  it under the terms of the GNU General Public License as published by
+**  the Free Software Foundation, either version 3 of the License, or
+**  (at your option) any later version.
+**  
 **  This program is distributed in the hope that it will be useful,
 **  but WITHOUT ANY WARRANTY; without even the implied warranty of
 **  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 **  GNU General Public License for more details.
-** 
+**  
 **  You should have received a copy of the GNU General Public License
-**  along with this program; if not, write to the Free Software
-**  Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA
-**  02111-1307, USA.
+**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
 #ifndef HEADER_WINDSTILLE_FONT_EFFECT_HPP

Modified: trunk/windstille/src/font/fonts.cpp
===================================================================
--- trunk/windstille/src/font/fonts.cpp	2009-02-10 14:12:18 UTC (rev 2428)
+++ trunk/windstille/src/font/fonts.cpp	2009-02-10 14:28:05 UTC (rev 2429)
@@ -1,26 +1,19 @@
-/*  $Id$
-**   __      __ __             ___        __   __ __   __
-**  /  \    /  \__| ____    __| _/_______/  |_|__|  | |  |   ____
-**  \   \/\/   /  |/    \  / __ |/  ___/\   __\  |  | |  | _/ __ \
-**   \        /|  |   |  \/ /_/ |\___ \  |  | |  |  |_|  |_\  ___/
-**    \__/\  / |__|___|  /\____ /____  > |__| |__|____/____/\___  >
-**         \/          \/      \/    \/                         \/
+/*
+**  Windstille - A Sci-Fi Action-Adventure Game
 **  Copyright (C) 2000,2005 Ingo Ruhnke <grumbel at gmx.de>
 **
-**  This program is free software; you can redistribute it and/or
-**  modify it under the terms of the GNU General Public License
-**  as published by the Free Software Foundation; either version 2
-**  of the License, or (at your option) any later version.
-**
+**  This program is free software: you can redistribute it and/or modify
+**  it under the terms of the GNU General Public License as published by
+**  the Free Software Foundation, either version 3 of the License, or
+**  (at your option) any later version.
+**  
 **  This program is distributed in the hope that it will be useful,
 **  but WITHOUT ANY WARRANTY; without even the implied warranty of
 **  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 **  GNU General Public License for more details.
-** 
+**  
 **  You should have received a copy of the GNU General Public License
-**  along with this program; if not, write to the Free Software
-**  Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA
-**  02111-1307, USA.
+**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
 #include "globals.hpp"

Modified: trunk/windstille/src/font/fonts.hpp
===================================================================
--- trunk/windstille/src/font/fonts.hpp	2009-02-10 14:12:18 UTC (rev 2428)
+++ trunk/windstille/src/font/fonts.hpp	2009-02-10 14:28:05 UTC (rev 2429)
@@ -1,26 +1,19 @@
-/*  $Id$
-**   __      __ __             ___        __   __ __   __
-**  /  \    /  \__| ____    __| _/_______/  |_|__|  | |  |   ____
-**  \   \/\/   /  |/    \  / __ |/  ___/\   __\  |  | |  | _/ __ \
-**   \        /|  |   |  \/ /_/ |\___ \  |  | |  |  |_|  |_\  ___/
-**    \__/\  / |__|___|  /\____ /____  > |__| |__|____/____/\___  >
-**         \/          \/      \/    \/                         \/
+/*
+**  Windstille - A Sci-Fi Action-Adventure Game
 **  Copyright (C) 2000,2005 Ingo Ruhnke <grumbel at gmx.de>
 **
-**  This program is free software; you can redistribute it and/or
-**  modify it under the terms of the GNU General Public License
-**  as published by the Free Software Foundation; either version 2
-**  of the License, or (at your option) any later version.
-**
+**  This program is free software: you can redistribute it and/or modify
+**  it under the terms of the GNU General Public License as published by
+**  the Free Software Foundation, either version 3 of the License, or
+**  (at your option) any later version.
+**  
 **  This program is distributed in the hope that it will be useful,
 **  but WITHOUT ANY WARRANTY; without even the implied warranty of
 **  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 **  GNU General Public License for more details.
-** 
+**  
 **  You should have received a copy of the GNU General Public License
-**  along with this program; if not, write to the Free Software
-**  Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA
-**  02111-1307, USA.
+**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
 #ifndef HEADER_FONTS_HXX

Modified: trunk/windstille/src/font/ttf_font.cpp
===================================================================
--- trunk/windstille/src/font/ttf_font.cpp	2009-02-10 14:12:18 UTC (rev 2428)
+++ trunk/windstille/src/font/ttf_font.cpp	2009-02-10 14:28:05 UTC (rev 2429)
@@ -1,10 +1,5 @@
-/*  $Id$
-**   __      __ __             ___        __   __ __   __
-**  /  \    /  \__| ____    __| _/_______/  |_|__|  | |  |   ____
-**  \   \/\/   /  |/    \  / __ |/  ___/\   __\  |  | |  | _/ __ \
-**   \        /|  |   |  \/ /_/ |\___ \  |  | |  |  |_|  |_\  ___/
-**    \__/\  / |__|___|  /\____ /____  > |__| |__|____/____/\___  >
-**         \/          \/      \/    \/                         \/
+/*
+**  Windstille - A Sci-Fi Action-Adventure Game
 **  Copyright (C) 2005 Ingo Ruhnke <grumbel at gmx.de>
 **
 **  This program is free software; you can redistribute it and/or

Modified: trunk/windstille/src/font/ttf_font.hpp
===================================================================
--- trunk/windstille/src/font/ttf_font.hpp	2009-02-10 14:12:18 UTC (rev 2428)
+++ trunk/windstille/src/font/ttf_font.hpp	2009-02-10 14:28:05 UTC (rev 2429)
@@ -1,26 +1,19 @@
-/*  $Id$
-**   __      __ __             ___        __   __ __   __
-**  /  \    /  \__| ____    __| _/_______/  |_|__|  | |  |   ____
-**  \   \/\/   /  |/    \  / __ |/  ___/\   __\  |  | |  | _/ __ \
-**   \        /|  |   |  \/ /_/ |\___ \  |  | |  |  |_|  |_\  ___/
-**    \__/\  / |__|___|  /\____ /____  > |__| |__|____/____/\___  >
-**         \/          \/      \/    \/                         \/
+/*
+**  Windstille - A Sci-Fi Action-Adventure Game
 **  Copyright (C) 2005 Ingo Ruhnke <grumbel at gmx.de>
 **
-**  This program is free software; you can redistribute it and/or
-**  modify it under the terms of the GNU General Public License
-**  as published by the Free Software Foundation; either version 2
-**  of the License, or (at your option) any later version.
-**
+**  This program is free software: you can redistribute it and/or modify
+**  it under the terms of the GNU General Public License as published by
+**  the Free Software Foundation, either version 3 of the License, or
+**  (at your option) any later version.
+**  
 **  This program is distributed in the hope that it will be useful,
 **  but WITHOUT ANY WARRANTY; without even the implied warranty of
 **  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 **  GNU General Public License for more details.
-** 
+**  
 **  You should have received a copy of the GNU General Public License
-**  along with this program; if not, write to the Free Software
-**  Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA
-**  02111-1307, USA.
+**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
 #ifndef HEADER_TTF_FONT_HXX

Modified: trunk/windstille/src/game_object.cpp
===================================================================
--- trunk/windstille/src/game_object.cpp	2009-02-10 14:12:18 UTC (rev 2428)
+++ trunk/windstille/src/game_object.cpp	2009-02-10 14:28:05 UTC (rev 2429)
@@ -1,5 +1,5 @@
-//  $Id$
 //
+//
 //  Windstille - A Jump'n Shoot Game
 //  Copyright (C) 2000 Ingo Ruhnke <grumbel at gmx.de>
 //

Modified: trunk/windstille/src/game_object.hpp
===================================================================
--- trunk/windstille/src/game_object.hpp	2009-02-10 14:12:18 UTC (rev 2428)
+++ trunk/windstille/src/game_object.hpp	2009-02-10 14:28:05 UTC (rev 2429)
@@ -1,4 +1,4 @@
-//  $Id$
+//
 // 
 //  Windstille - A Jump'n Shoot Game
 //  Copyright (C) 2000 Ingo Ruhnke <grumbel at gmx.de>

Modified: trunk/windstille/src/game_session.cpp
===================================================================
--- trunk/windstille/src/game_session.cpp	2009-02-10 14:12:18 UTC (rev 2428)
+++ trunk/windstille/src/game_session.cpp	2009-02-10 14:28:05 UTC (rev 2429)
@@ -1,26 +1,19 @@
-/*  $Id$
-**   __      __ __             ___        __   __ __   __
-**  /  \    /  \__| ____    __| _/_______/  |_|__|  | |  |   ____
-**  \   \/\/   /  |/    \  / __ |/  ___/\   __\  |  | |  | _/ __ \
-**   \        /|  |   |  \/ /_/ |\___ \  |  | |  |  |_|  |_\  ___/
-**    \__/\  / |__|___|  /\____ /____  > |__| |__|____/____/\___  >
-**         \/          \/      \/    \/                         \/
+/*
+**  Windstille - A Sci-Fi Action-Adventure Game
 **  Copyright (C) 2000,2005 Ingo Ruhnke <grumbel at gmx.de>
 **
-**  This program is free software; you can redistribute it and/or
-**  modify it under the terms of the GNU General Public License
-**  as published by the Free Software Foundation; either version 2
-**  of the License, or (at your option) any later version.
-**
+**  This program is free software: you can redistribute it and/or modify
+**  it under the terms of the GNU General Public License as published by
+**  the Free Software Foundation, either version 3 of the License, or
+**  (at your option) any later version.
+**  
 **  This program is distributed in the hope that it will be useful,
 **  but WITHOUT ANY WARRANTY; without even the implied warranty of
 **  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 **  GNU General Public License for more details.
-** 
+**  
 **  You should have received a copy of the GNU General Public License
-**  along with this program; if not, write to the Free Software
-**  Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA
-**  02111-1307, USA.
+**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
 #include <math.h>

Modified: trunk/windstille/src/game_session.hpp
===================================================================
--- trunk/windstille/src/game_session.hpp	2009-02-10 14:12:18 UTC (rev 2428)
+++ trunk/windstille/src/game_session.hpp	2009-02-10 14:28:05 UTC (rev 2429)
@@ -1,26 +1,19 @@
-/*  $Id$
-**   __      __ __             ___        __   __ __   __
-**  /  \    /  \__| ____    __| _/_______/  |_|__|  | |  |   ____
-**  \   \/\/   /  |/    \  / __ |/  ___/\   __\  |  | |  | _/ __ \
-**   \        /|  |   |  \/ /_/ |\___ \  |  | |  |  |_|  |_\  ___/
-**    \__/\  / |__|___|  /\____ /____  > |__| |__|____/____/\___  >
-**         \/          \/      \/    \/                         \/
+/*
+**  Windstille - A Sci-Fi Action-Adventure Game
 **  Copyright (C) 2000,2005 Ingo Ruhnke <grumbel at gmx.de>
 **
-**  This program is free software; you can redistribute it and/or
-**  modify it under the terms of the GNU General Public License
-**  as published by the Free Software Foundation; either version 2
-**  of the License, or (at your option) any later version.
-**
+**  This program is free software: you can redistribute it and/or modify
+**  it under the terms of the GNU General Public License as published by
+**  the Free Software Foundation, either version 3 of the License, or
+**  (at your option) any later version.
+**  
 **  This program is distributed in the hope that it will be useful,
 **  but WITHOUT ANY WARRANTY; without even the implied warranty of
 **  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 **  GNU General Public License for more details.
-** 
+**  
 **  You should have received a copy of the GNU General Public License
-**  along with this program; if not, write to the Free Software
-**  Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA
-**  02111-1307, USA.
+**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
 #ifndef GAME_SESSION_HXX

Modified: trunk/windstille/src/geometry_test.cpp
===================================================================
--- trunk/windstille/src/geometry_test.cpp	2009-02-10 14:12:18 UTC (rev 2428)
+++ trunk/windstille/src/geometry_test.cpp	2009-02-10 14:28:05 UTC (rev 2429)
@@ -1,26 +1,19 @@
-/*  $Id$
-**   __      __ __             ___        __   __ __   __
-**  /  \    /  \__| ____    __| _/_______/  |_|__|  | |  |   ____
-**  \   \/\/   /  |/    \  / __ |/  ___/\   __\  |  | |  | _/ __ \
-**   \        /|  |   |  \/ /_/ |\___ \  |  | |  |  |_|  |_\  ___/
-**    \__/\  / |__|___|  /\____ /____  > |__| |__|____/____/\___  >
-**         \/          \/      \/    \/                         \/
+/*
+**  Windstille - A Sci-Fi Action-Adventure Game
 **  Copyright (C) 2007 Ingo Ruhnke <grumbel at gmx.de>
 **
-**  This program is free software; you can redistribute it and/or
-**  modify it under the terms of the GNU General Public License
-**  as published by the Free Software Foundation; either version 2
-**  of the License, or (at your option) any later version.
-**
+**  This program is free software: you can redistribute it and/or modify
+**  it under the terms of the GNU General Public License as published by
+**  the Free Software Foundation, either version 3 of the License, or
+**  (at your option) any later version.
+**  
 **  This program is distributed in the hope that it will be useful,
 **  but WITHOUT ANY WARRANTY; without even the implied warranty of
 **  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 **  GNU General Public License for more details.
-** 
+**  
 **  You should have received a copy of the GNU General Public License
-**  along with this program; if not, write to the Free Software
-**  Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA
-**  02111-1307, USA.
+**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
 #include <GL/glew.h>

Modified: trunk/windstille/src/geometry_test.hpp
===================================================================
--- trunk/windstille/src/geometry_test.hpp	2009-02-10 14:12:18 UTC (rev 2428)
+++ trunk/windstille/src/geometry_test.hpp	2009-02-10 14:28:05 UTC (rev 2429)
@@ -1,26 +1,19 @@
-/*  $Id$
-**   __      __ __             ___        __   __ __   __
-**  /  \    /  \__| ____    __| _/_______/  |_|__|  | |  |   ____
-**  \   \/\/   /  |/    \  / __ |/  ___/\   __\  |  | |  | _/ __ \
-**   \        /|  |   |  \/ /_/ |\___ \  |  | |  |  |_|  |_\  ___/
-**    \__/\  / |__|___|  /\____ /____  > |__| |__|____/____/\___  >
-**         \/          \/      \/    \/                         \/
+/*
+**  Windstille - A Sci-Fi Action-Adventure Game
 **  Copyright (C) 2007 Ingo Ruhnke <grumbel at gmx.de>
 **
-**  This program is free software; you can redistribute it and/or
-**  modify it under the terms of the GNU General Public License
-**  as published by the Free Software Foundation; either version 2
-**  of the License, or (at your option) any later version.
-**
+**  This program is free software: you can redistribute it and/or modify
+**  it under the terms of the GNU General Public License as published by
+**  the Free Software Foundation, either version 3 of the License, or
+**  (at your option) any later version.
+**  
 **  This program is distributed in the hope that it will be useful,
 **  but WITHOUT ANY WARRANTY; without even the implied warranty of
 **  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 **  GNU General Public License for more details.
-** 
+**  
 **  You should have received a copy of the GNU General Public License
-**  along with this program; if not, write to the Free Software
-**  Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA
-**  02111-1307, USA.
+**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
 #ifndef HEADER_GEOMETRY_TEST_HPP

Modified: trunk/windstille/src/getter.cpp
===================================================================
--- trunk/windstille/src/getter.cpp	2009-02-10 14:12:18 UTC (rev 2428)
+++ trunk/windstille/src/getter.cpp	2009-02-10 14:28:05 UTC (rev 2429)
@@ -1,26 +1,19 @@
-/*  $Id$
-**   __      __ __             ___        __   __ __   __
-**  /  \    /  \__| ____    __| _/_______/  |_|__|  | |  |   ____
-**  \   \/\/   /  |/    \  / __ |/  ___/\   __\  |  | |  | _/ __ \
-**   \        /|  |   |  \/ /_/ |\___ \  |  | |  |  |_|  |_\  ___/
-**    \__/\  / |__|___|  /\____ /____  > |__| |__|____/____/\___  >
-**         \/          \/      \/    \/                         \/
+/*
+**  Windstille - A Sci-Fi Action-Adventure Game
 **  Copyright (C) 2007 Ingo Ruhnke <grumbel at gmx.de>
 **
-**  This program is free software; you can redistribute it and/or
-**  modify it under the terms of the GNU General Public License
-**  as published by the Free Software Foundation; either version 2
-**  of the License, or (at your option) any later version.
-**
+**  This program is free software: you can redistribute it and/or modify
+**  it under the terms of the GNU General Public License as published by
+**  the Free Software Foundation, either version 3 of the License, or
+**  (at your option) any later version.
+**  
 **  This program is distributed in the hope that it will be useful,
 **  but WITHOUT ANY WARRANTY; without even the implied warranty of
 **  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 **  GNU General Public License for more details.
-** 
+**  
 **  You should have received a copy of the GNU General Public License
-**  along with this program; if not, write to the Free Software
-**  Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA
-**  02111-1307, USA.
+**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
 #include "math/vector.hpp"

Modified: trunk/windstille/src/getter.hpp
===================================================================
--- trunk/windstille/src/getter.hpp	2009-02-10 14:12:18 UTC (rev 2428)
+++ trunk/windstille/src/getter.hpp	2009-02-10 14:28:05 UTC (rev 2429)
@@ -1,26 +1,19 @@
-/*  $Id$
-**   __      __ __             ___        __   __ __   __
-**  /  \    /  \__| ____    __| _/_______/  |_|__|  | |  |   ____
-**  \   \/\/   /  |/    \  / __ |/  ___/\   __\  |  | |  | _/ __ \
-**   \        /|  |   |  \/ /_/ |\___ \  |  | |  |  |_|  |_\  ___/
-**    \__/\  / |__|___|  /\____ /____  > |__| |__|____/____/\___  >
-**         \/          \/      \/    \/                         \/
+/*
+**  Windstille - A Sci-Fi Action-Adventure Game
 **  Copyright (C) 2007 Ingo Ruhnke <grumbel at gmx.de>
 **
-**  This program is free software; you can redistribute it and/or
-**  modify it under the terms of the GNU General Public License
-**  as published by the Free Software Foundation; either version 2
-**  of the License, or (at your option) any later version.
-**
+**  This program is free software: you can redistribute it and/or modify
+**  it under the terms of the GNU General Public License as published by
+**  the Free Software Foundation, either version 3 of the License, or
+**  (at your option) any later version.
+**  
 **  This program is distributed in the hope that it will be useful,
 **  but WITHOUT ANY WARRANTY; without even the implied warranty of
 **  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 **  GNU General Public License for more details.
-** 
+**  
 **  You should have received a copy of the GNU General Public License
-**  along with this program; if not, write to the Free Software
-**  Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA
-**  02111-1307, USA.
+**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
 #ifndef HEADER_WINDSTILLE_GETTER_HPP

Modified: trunk/windstille/src/globals.cpp
===================================================================
--- trunk/windstille/src/globals.cpp	2009-02-10 14:12:18 UTC (rev 2428)
+++ trunk/windstille/src/globals.cpp	2009-02-10 14:28:05 UTC (rev 2429)
@@ -1,26 +1,19 @@
-/*  $Id$
-**   __      __ __             ___        __   __ __   __
-**  /  \    /  \__| ____    __| _/_______/  |_|__|  | |  |   ____
-**  \   \/\/   /  |/    \  / __ |/  ___/\   __\  |  | |  | _/ __ \
-**   \        /|  |   |  \/ /_/ |\___ \  |  | |  |  |_|  |_\  ___/
-**    \__/\  / |__|___|  /\____ /____  > |__| |__|____/____/\___  >
-**         \/          \/      \/    \/                         \/
+/*
+**  Windstille - A Sci-Fi Action-Adventure Game
 **  Copyright (C) 2000,2005 Ingo Ruhnke <grumbel at gmx.de>
 **
-**  This program is free software; you can redistribute it and/or
-**  modify it under the terms of the GNU General Public License
-**  as published by the Free Software Foundation; either version 2
-**  of the License, or (at your option) any later version.
-**
+**  This program is free software: you can redistribute it and/or modify
+**  it under the terms of the GNU General Public License as published by
+**  the Free Software Foundation, either version 3 of the License, or
+**  (at your option) any later version.
+**  
 **  This program is distributed in the hope that it will be useful,
 **  but WITHOUT ANY WARRANTY; without even the implied warranty of
 **  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 **  GNU General Public License for more details.
-** 
+**  
 **  You should have received a copy of the GNU General Public License
-**  along with this program; if not, write to the Free Software
-**  Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA
-**  02111-1307, USA.
+**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
 #include "globals.hpp"

Modified: trunk/windstille/src/globals.hpp
===================================================================
--- trunk/windstille/src/globals.hpp	2009-02-10 14:12:18 UTC (rev 2428)
+++ trunk/windstille/src/globals.hpp	2009-02-10 14:28:05 UTC (rev 2429)
@@ -1,4 +1,4 @@
-//  $Id$
+//
 // 
 //  Windstille - A Jump'n Shoot Game
 //  Copyright (C) 2000 Ingo Ruhnke <grumbel at gmx.de>

Modified: trunk/windstille/src/graphic_context_state.cpp
===================================================================
--- trunk/windstille/src/graphic_context_state.cpp	2009-02-10 14:12:18 UTC (rev 2428)
+++ trunk/windstille/src/graphic_context_state.cpp	2009-02-10 14:28:05 UTC (rev 2429)
@@ -1,5 +1,5 @@
-//  $Id$
 //
+//
 //  Flexlay - A Generic 2D Game Editor
 //  Copyright (C) 2002 Ingo Ruhnke <grumbel at gmx.de>
 //

Modified: trunk/windstille/src/graphic_context_state.hpp
===================================================================
--- trunk/windstille/src/graphic_context_state.hpp	2009-02-10 14:12:18 UTC (rev 2428)
+++ trunk/windstille/src/graphic_context_state.hpp	2009-02-10 14:28:05 UTC (rev 2429)
@@ -1,4 +1,4 @@
-//  $Id$
+//
 // 
 //  Flexlay - A Generic 2D Game Editor
 //  Copyright (C) 2002 Ingo Ruhnke <grumbel at gmx.de>

Modified: trunk/windstille/src/grenade.cpp
===================================================================
--- trunk/windstille/src/grenade.cpp	2009-02-10 14:12:18 UTC (rev 2428)
+++ trunk/windstille/src/grenade.cpp	2009-02-10 14:28:05 UTC (rev 2429)
@@ -1,26 +1,19 @@
-/*  $Id$
-**   __      __ __             ___        __   __ __   __
-**  /  \    /  \__| ____    __| _/_______/  |_|__|  | |  |   ____
-**  \   \/\/   /  |/    \  / __ |/  ___/\   __\  |  | |  | _/ __ \
-**   \        /|  |   |  \/ /_/ |\___ \  |  | |  |  |_|  |_\  ___/
-**    \__/\  / |__|___|  /\____ /____  > |__| |__|____/____/\___  >
-**         \/          \/      \/    \/                         \/
+/*
+**  Windstille - A Sci-Fi Action-Adventure Game
 **  Copyright (C) 2005 Ingo Ruhnke <grumbel at gmx.de>
 **
-**  This program is free software; you can redistribute it and/or
-**  modify it under the terms of the GNU General Public License
-**  as published by the Free Software Foundation; either version 2
-**  of the License, or (at your option) any later version.
-**
+**  This program is free software: you can redistribute it and/or modify
+**  it under the terms of the GNU General Public License as published by
+**  the Free Software Foundation, either version 3 of the License, or
+**  (at your option) any later version.
+**  
 **  This program is distributed in the hope that it will be useful,
 **  but WITHOUT ANY WARRANTY; without even the implied warranty of
 **  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 **  GNU General Public License for more details.
-** 
+**  
 **  You should have received a copy of the GNU General Public License
-**  along with this program; if not, write to the Free Software
-**  Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA
-**  02111-1307, USA.
+**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
 #include "grenade.hpp"

Modified: trunk/windstille/src/grenade.hpp
===================================================================
--- trunk/windstille/src/grenade.hpp	2009-02-10 14:12:18 UTC (rev 2428)
+++ trunk/windstille/src/grenade.hpp	2009-02-10 14:28:05 UTC (rev 2429)
@@ -1,26 +1,19 @@
-/*  $Id$
-**   __      __ __             ___        __   __ __   __
-**  /  \    /  \__| ____    __| _/_______/  |_|__|  | |  |   ____
-**  \   \/\/   /  |/    \  / __ |/  ___/\   __\  |  | |  | _/ __ \
-**   \        /|  |   |  \/ /_/ |\___ \  |  | |  |  |_|  |_\  ___/
-**    \__/\  / |__|___|  /\____ /____  > |__| |__|____/____/\___  >
-**         \/          \/      \/    \/                         \/
+/*
+**  Windstille - A Sci-Fi Action-Adventure Game
 **  Copyright (C) 2005 Matthias Braun <matze at braunis.de>
 **
-**  This program is free software; you can redistribute it and/or
-**  modify it under the terms of the GNU General Public License
-**  as published by the Free Software Foundation; either version 2
-**  of the License, or (at your option) any later version.
-**
+**  This program is free software: you can redistribute it and/or modify
+**  it under the terms of the GNU General Public License as published by
+**  the Free Software Foundation, either version 3 of the License, or
+**  (at your option) any later version.
+**  
 **  This program is distributed in the hope that it will be useful,
 **  but WITHOUT ANY WARRANTY; without even the implied warranty of
 **  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 **  GNU General Public License for more details.
-** 
+**  
 **  You should have received a copy of the GNU General Public License
-**  along with this program; if not, write to the Free Software
-**  Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA
-**  02111-1307, USA.
+**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 #ifndef __GRENADE_HPP__
 #define __GRENADE_HPP__

Modified: trunk/windstille/src/gui/automap.cpp
===================================================================
--- trunk/windstille/src/gui/automap.cpp	2009-02-10 14:12:18 UTC (rev 2428)
+++ trunk/windstille/src/gui/automap.cpp	2009-02-10 14:28:05 UTC (rev 2429)
@@ -1,26 +1,19 @@
-/*  $Id$
-**   __      __ __             ___        __   __ __   __
-**  /  \    /  \__| ____    __| _/_______/  |_|__|  | |  |   ____
-**  \   \/\/   /  |/    \  / __ |/  ___/\   __\  |  | |  | _/ __ \
-**   \        /|  |   |  \/ /_/ |\___ \  |  | |  |  |_|  |_\  ___/
-**    \__/\  / |__|___|  /\____ /____  > |__| |__|____/____/\___  >
-**         \/          \/      \/    \/                         \/
+/*
+**  Windstille - A Sci-Fi Action-Adventure Game
 **  Copyright (C) 2005 Ingo Ruhnke <grumbel at gmx.de>
 **
-**  This program is free software; you can redistribute it and/or
-**  modify it under the terms of the GNU General Public License
-**  as published by the Free Software Foundation; either version 2
-**  of the License, or (at your option) any later version.
-**
+**  This program is free software: you can redistribute it and/or modify
+**  it under the terms of the GNU General Public License as published by
+**  the Free Software Foundation, either version 3 of the License, or
+**  (at your option) any later version.
+**  
 **  This program is distributed in the hope that it will be useful,
 **  but WITHOUT ANY WARRANTY; without even the implied warranty of
 **  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 **  GNU General Public License for more details.
-** 
+**  
 **  You should have received a copy of the GNU General Public License
-**  along with this program; if not, write to the Free Software
-**  Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA
-**  02111-1307, USA.
+**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
 #include "display/surface_drawing_parameters.hpp"

Modified: trunk/windstille/src/gui/automap.hpp
===================================================================
--- trunk/windstille/src/gui/automap.hpp	2009-02-10 14:12:18 UTC (rev 2428)
+++ trunk/windstille/src/gui/automap.hpp	2009-02-10 14:28:05 UTC (rev 2429)
@@ -1,26 +1,19 @@
-/*  $Id$
-**   __      __ __             ___        __   __ __   __
-**  /  \    /  \__| ____    __| _/_______/  |_|__|  | |  |   ____
-**  \   \/\/   /  |/    \  / __ |/  ___/\   __\  |  | |  | _/ __ \
-**   \        /|  |   |  \/ /_/ |\___ \  |  | |  |  |_|  |_\  ___/
-**    \__/\  / |__|___|  /\____ /____  > |__| |__|____/____/\___  >
-**         \/          \/      \/    \/                         \/
+/*
+**  Windstille - A Sci-Fi Action-Adventure Game
 **  Copyright (C) 2005 Ingo Ruhnke <grumbel at gmx.de>
 **
-**  This program is free software; you can redistribute it and/or
-**  modify it under the terms of the GNU General Public License
-**  as published by the Free Software Foundation; either version 2
-**  of the License, or (at your option) any later version.
-**
+**  This program is free software: you can redistribute it and/or modify
+**  it under the terms of the GNU General Public License as published by
+**  the Free Software Foundation, either version 3 of the License, or
+**  (at your option) any later version.
+**  
 **  This program is distributed in the hope that it will be useful,
 **  but WITHOUT ANY WARRANTY; without even the implied warranty of
 **  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 **  GNU General Public License for more details.
-** 
+**  
 **  You should have received a copy of the GNU General Public License
-**  along with this program; if not, write to the Free Software
-**  Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA
-**  02111-1307, USA.
+**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
 #ifndef HEADER_WINDSTILLE_GUI_AUTOMAP_HPP

Modified: trunk/windstille/src/gui/button.cpp
===================================================================
--- trunk/windstille/src/gui/button.cpp	2009-02-10 14:12:18 UTC (rev 2428)
+++ trunk/windstille/src/gui/button.cpp	2009-02-10 14:28:05 UTC (rev 2429)
@@ -1,26 +1,19 @@
-/*  $Id$
-**   __      __ __             ___        __   __ __   __
-**  /  \    /  \__| ____    __| _/_______/  |_|__|  | |  |   ____
-**  \   \/\/   /  |/    \  / __ |/  ___/\   __\  |  | |  | _/ __ \
-**   \        /|  |   |  \/ /_/ |\___ \  |  | |  |  |_|  |_\  ___/
-**    \__/\  / |__|___|  /\____ /____  > |__| |__|____/____/\___  >
-**         \/          \/      \/    \/                         \/
+/*
+**  Windstille - A Sci-Fi Action-Adventure Game
 **  Copyright (C) 2005 Ingo Ruhnke <grumbel at gmx.de>
 **
-**  This program is free software; you can redistribute it and/or
-**  modify it under the terms of the GNU General Public License
-**  as published by the Free Software Foundation; either version 2
-**  of the License, or (at your option) any later version.
-**
+**  This program is free software: you can redistribute it and/or modify
+**  it under the terms of the GNU General Public License as published by
+**  the Free Software Foundation, either version 3 of the License, or
+**  (at your option) any later version.
+**  
 **  This program is distributed in the hope that it will be useful,
 **  but WITHOUT ANY WARRANTY; without even the implied warranty of
 **  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 **  GNU General Public License for more details.
-** 
+**  
 **  You should have received a copy of the GNU General Public License
-**  along with this program; if not, write to the Free Software
-**  Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA
-**  02111-1307, USA.
+**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
 #include <assert.h>

Modified: trunk/windstille/src/gui/button.hpp
===================================================================
--- trunk/windstille/src/gui/button.hpp	2009-02-10 14:12:18 UTC (rev 2428)
+++ trunk/windstille/src/gui/button.hpp	2009-02-10 14:28:05 UTC (rev 2429)
@@ -1,26 +1,19 @@
-/*  $Id$
-**   __      __ __             ___        __   __ __   __
-**  /  \    /  \__| ____    __| _/_______/  |_|__|  | |  |   ____
-**  \   \/\/   /  |/    \  / __ |/  ___/\   __\  |  | |  | _/ __ \
-**   \        /|  |   |  \/ /_/ |\___ \  |  | |  |  |_|  |_\  ___/
-**    \__/\  / |__|___|  /\____ /____  > |__| |__|____/____/\___  >
-**         \/          \/      \/    \/                         \/
+/*
+**  Windstille - A Sci-Fi Action-Adventure Game
 **  Copyright (C) 2005 Ingo Ruhnke <grumbel at gmx.de>
 **
-**  This program is free software; you can redistribute it and/or
-**  modify it under the terms of the GNU General Public License
-**  as published by the Free Software Foundation; either version 2
-**  of the License, or (at your option) any later version.
-**
+**  This program is free software: you can redistribute it and/or modify
+**  it under the terms of the GNU General Public License as published by
+**  the Free Software Foundation, either version 3 of the License, or
+**  (at your option) any later version.
+**  
 **  This program is distributed in the hope that it will be useful,
 **  but WITHOUT ANY WARRANTY; without even the implied warranty of
 **  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 **  GNU General Public License for more details.
-** 
+**  
 **  You should have received a copy of the GNU General Public License
-**  along with this program; if not, write to the Free Software
-**  Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA
-**  02111-1307, USA.
+**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
 #ifndef HEADER_WINDSTILLE_GUI_BUTTON_HPP

Modified: trunk/windstille/src/gui/component.cpp
===================================================================
--- trunk/windstille/src/gui/component.cpp	2009-02-10 14:12:18 UTC (rev 2428)
+++ trunk/windstille/src/gui/component.cpp	2009-02-10 14:28:05 UTC (rev 2429)
@@ -1,26 +1,19 @@
-/*  $Id$
-**   __      __ __             ___        __   __ __   __
-**  /  \    /  \__| ____    __| _/_______/  |_|__|  | |  |   ____
-**  \   \/\/   /  |/    \  / __ |/  ___/\   __\  |  | |  | _/ __ \
-**   \        /|  |   |  \/ /_/ |\___ \  |  | |  |  |_|  |_\  ___/
-**    \__/\  / |__|___|  /\____ /____  > |__| |__|____/____/\___  >
-**         \/          \/      \/    \/                         \/
+/*
+**  Windstille - A Sci-Fi Action-Adventure Game
 **  Copyright (C) 2005 Ingo Ruhnke <grumbel at gmx.de>
 **
-**  This program is free software; you can redistribute it and/or
-**  modify it under the terms of the GNU General Public License
-**  as published by the Free Software Foundation; either version 2
-**  of the License, or (at your option) any later version.
-**
+**  This program is free software: you can redistribute it and/or modify
+**  it under the terms of the GNU General Public License as published by
+**  the Free Software Foundation, either version 3 of the License, or
+**  (at your option) any later version.
+**  
 **  This program is distributed in the hope that it will be useful,
 **  but WITHOUT ANY WARRANTY; without even the implied warranty of
 **  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 **  GNU General Public License for more details.
-** 
+**  
 **  You should have received a copy of the GNU General Public License
-**  along with this program; if not, write to the Free Software
-**  Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA
-**  02111-1307, USA.
+**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
 #include <assert.h>

Modified: trunk/windstille/src/gui/component.hpp
===================================================================
--- trunk/windstille/src/gui/component.hpp	2009-02-10 14:12:18 UTC (rev 2428)
+++ trunk/windstille/src/gui/component.hpp	2009-02-10 14:28:05 UTC (rev 2429)
@@ -1,26 +1,19 @@
-/*  $Id$
-**   __      __ __             ___        __   __ __   __
-**  /  \    /  \__| ____    __| _/_______/  |_|__|  | |  |   ____
-**  \   \/\/   /  |/    \  / __ |/  ___/\   __\  |  | |  | _/ __ \
-**   \        /|  |   |  \/ /_/ |\___ \  |  | |  |  |_|  |_\  ___/
-**    \__/\  / |__|___|  /\____ /____  > |__| |__|____/____/\___  >
-**         \/          \/      \/    \/                         \/
+/*
+**  Windstille - A Sci-Fi Action-Adventure Game
 **  Copyright (C) 2005 Ingo Ruhnke <grumbel at gmx.de>
 **
-**  This program is free software; you can redistribute it and/or
-**  modify it under the terms of the GNU General Public License
-**  as published by the Free Software Foundation; either version 2
-**  of the License, or (at your option) any later version.
-**
+**  This program is free software: you can redistribute it and/or modify
+**  it under the terms of the GNU General Public License as published by
+**  the Free Software Foundation, either version 3 of the License, or
+**  (at your option) any later version.
+**  
 **  This program is distributed in the hope that it will be useful,
 **  but WITHOUT ANY WARRANTY; without even the implied warranty of
 **  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 **  GNU General Public License for more details.
-** 
+**  
 **  You should have received a copy of the GNU General Public License
-**  along with this program; if not, write to the Free Software
-**  Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA
-**  02111-1307, USA.
+**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
 #ifndef HEADER_WINDSTILLE_GUI_COMPONENT_HPP

Modified: trunk/windstille/src/gui/component_factory.cpp
===================================================================
--- trunk/windstille/src/gui/component_factory.cpp	2009-02-10 14:12:18 UTC (rev 2428)
+++ trunk/windstille/src/gui/component_factory.cpp	2009-02-10 14:28:05 UTC (rev 2429)
@@ -1,26 +1,19 @@
-/*  $Id$
-**   __      __ __             ___        __   __ __   __
-**  /  \    /  \__| ____    __| _/_______/  |_|__|  | |  |   ____
-**  \   \/\/   /  |/    \  / __ |/  ___/\   __\  |  | |  | _/ __ \
-**   \        /|  |   |  \/ /_/ |\___ \  |  | |  |  |_|  |_\  ___/
-**    \__/\  / |__|___|  /\____ /____  > |__| |__|____/____/\___  >
-**         \/          \/      \/    \/                         \/
+/*
+**  Windstille - A Sci-Fi Action-Adventure Game
 **  Copyright (C) 2005 Ingo Ruhnke <grumbel at gmx.de>
 **
-**  This program is free software; you can redistribute it and/or
-**  modify it under the terms of the GNU General Public License
-**  as published by the Free Software Foundation; either version 2
-**  of the License, or (at your option) any later version.
-**
+**  This program is free software: you can redistribute it and/or modify
+**  it under the terms of the GNU General Public License as published by
+**  the Free Software Foundation, either version 3 of the License, or
+**  (at your option) any later version.
+**  
 **  This program is distributed in the hope that it will be useful,
 **  but WITHOUT ANY WARRANTY; without even the implied warranty of
 **  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 **  GNU General Public License for more details.
-** 
+**  
 **  You should have received a copy of the GNU General Public License
-**  along with this program; if not, write to the Free Software
-**  Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA
-**  02111-1307, USA.
+**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
 #include <stdexcept>

Modified: trunk/windstille/src/gui/component_factory.hpp
===================================================================
--- trunk/windstille/src/gui/component_factory.hpp	2009-02-10 14:12:18 UTC (rev 2428)
+++ trunk/windstille/src/gui/component_factory.hpp	2009-02-10 14:28:05 UTC (rev 2429)
@@ -1,26 +1,19 @@
-/*  $Id$
-**   __      __ __             ___        __   __ __   __
-**  /  \    /  \__| ____    __| _/_______/  |_|__|  | |  |   ____
-**  \   \/\/   /  |/    \  / __ |/  ___/\   __\  |  | |  | _/ __ \
-**   \        /|  |   |  \/ /_/ |\___ \  |  | |  |  |_|  |_\  ___/
-**    \__/\  / |__|___|  /\____ /____  > |__| |__|____/____/\___  >
-**         \/          \/      \/    \/                         \/
+/*
+**  Windstille - A Sci-Fi Action-Adventure Game
 **  Copyright (C) 2005 Ingo Ruhnke <grumbel at gmx.de>
 **
-**  This program is free software; you can redistribute it and/or
-**  modify it under the terms of the GNU General Public License
-**  as published by the Free Software Foundation; either version 2
-**  of the License, or (at your option) any later version.
-**
+**  This program is free software: you can redistribute it and/or modify
+**  it under the terms of the GNU General Public License as published by
+**  the Free Software Foundation, either version 3 of the License, or
+**  (at your option) any later version.
+**  
 **  This program is distributed in the hope that it will be useful,
 **  but WITHOUT ANY WARRANTY; without even the implied warranty of
 **  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 **  GNU General Public License for more details.
-** 
+**  
 **  You should have received a copy of the GNU General Public License
-**  along with this program; if not, write to the Free Software
-**  Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA
-**  02111-1307, USA.
+**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
 #ifndef HEADER_COMPONENT_FACTORY_HPP

Modified: trunk/windstille/src/gui/grid_component.cpp
===================================================================
--- trunk/windstille/src/gui/grid_component.cpp	2009-02-10 14:12:18 UTC (rev 2428)
+++ trunk/windstille/src/gui/grid_component.cpp	2009-02-10 14:28:05 UTC (rev 2429)
@@ -1,26 +1,19 @@
-/*  $Id$
-**   __      __ __             ___        __   __ __   __
-**  /  \    /  \__| ____    __| _/_______/  |_|__|  | |  |   ____
-**  \   \/\/   /  |/    \  / __ |/  ___/\   __\  |  | |  | _/ __ \
-**   \        /|  |   |  \/ /_/ |\___ \  |  | |  |  |_|  |_\  ___/
-**    \__/\  / |__|___|  /\____ /____  > |__| |__|____/____/\___  >
-**         \/          \/      \/    \/                         \/
+/*
+**  Windstille - A Sci-Fi Action-Adventure Game
 **  Copyright (C) 2005 Ingo Ruhnke <grumbel at gmx.de>
 **
-**  This program is free software; you can redistribute it and/or
-**  modify it under the terms of the GNU General Public License
-**  as published by the Free Software Foundation; either version 2
-**  of the License, or (at your option) any later version.
-**
+**  This program is free software: you can redistribute it and/or modify
+**  it under the terms of the GNU General Public License as published by
+**  the Free Software Foundation, either version 3 of the License, or
+**  (at your option) any later version.
+**  
 **  This program is distributed in the hope that it will be useful,
 **  but WITHOUT ANY WARRANTY; without even the implied warranty of
 **  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 **  GNU General Public License for more details.
-** 
+**  
 **  You should have received a copy of the GNU General Public License
-**  along with this program; if not, write to the Free Software
-**  Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA
-**  02111-1307, USA.
+**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
 #include <iostream>

Modified: trunk/windstille/src/gui/grid_component.hpp
===================================================================
--- trunk/windstille/src/gui/grid_component.hpp	2009-02-10 14:12:18 UTC (rev 2428)
+++ trunk/windstille/src/gui/grid_component.hpp	2009-02-10 14:28:05 UTC (rev 2429)
@@ -1,26 +1,19 @@
-/*  $Id$
-**   __      __ __             ___        __   __ __   __
-**  /  \    /  \__| ____    __| _/_______/  |_|__|  | |  |   ____
-**  \   \/\/   /  |/    \  / __ |/  ___/\   __\  |  | |  | _/ __ \
-**   \        /|  |   |  \/ /_/ |\___ \  |  | |  |  |_|  |_\  ___/
-**    \__/\  / |__|___|  /\____ /____  > |__| |__|____/____/\___  >
-**         \/          \/      \/    \/                         \/
+/*
+**  Windstille - A Sci-Fi Action-Adventure Game
 **  Copyright (C) 2005 Ingo Ruhnke <grumbel at gmx.de>
 **
-**  This program is free software; you can redistribute it and/or
-**  modify it under the terms of the GNU General Public License
-**  as published by the Free Software Foundation; either version 2
-**  of the License, or (at your option) any later version.
-**
+**  This program is free software: you can redistribute it and/or modify
+**  it under the terms of the GNU General Public License as published by
+**  the Free Software Foundation, either version 3 of the License, or
+**  (at your option) any later version.
+**  
 **  This program is distributed in the hope that it will be useful,
 **  but WITHOUT ANY WARRANTY; without even the implied warranty of
 **  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 **  GNU General Public License for more details.
-** 
+**  
 **  You should have received a copy of the GNU General Public License
-**  along with this program; if not, write to the Free Software
-**  Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA
-**  02111-1307, USA.
+**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
 #ifndef HEADER_WINDSTILLE_GUI_GRID_COMPONENT_HPP

Modified: trunk/windstille/src/gui/group_component.cpp
===================================================================
--- trunk/windstille/src/gui/group_component.cpp	2009-02-10 14:12:18 UTC (rev 2428)
+++ trunk/windstille/src/gui/group_component.cpp	2009-02-10 14:28:05 UTC (rev 2429)
@@ -1,26 +1,19 @@
-/*  $Id$
-**   __      __ __             ___        __   __ __   __
-**  /  \    /  \__| ____    __| _/_______/  |_|__|  | |  |   ____
-**  \   \/\/   /  |/    \  / __ |/  ___/\   __\  |  | |  | _/ __ \
-**   \        /|  |   |  \/ /_/ |\___ \  |  | |  |  |_|  |_\  ___/
-**    \__/\  / |__|___|  /\____ /____  > |__| |__|____/____/\___  >
-**         \/          \/      \/    \/                         \/
+/*
+**  Windstille - A Sci-Fi Action-Adventure Game
 **  Copyright (C) 2005 Ingo Ruhnke <grumbel at gmx.de>
 **
-**  This program is free software; you can redistribute it and/or
-**  modify it under the terms of the GNU General Public License
-**  as published by the Free Software Foundation; either version 2
-**  of the License, or (at your option) any later version.
-**
+**  This program is free software: you can redistribute it and/or modify
+**  it under the terms of the GNU General Public License as published by
+**  the Free Software Foundation, either version 3 of the License, or
+**  (at your option) any later version.
+**  
 **  This program is distributed in the hope that it will be useful,
 **  but WITHOUT ANY WARRANTY; without even the implied warranty of
 **  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 **  GNU General Public License for more details.
-** 
+**  
 **  You should have received a copy of the GNU General Public License
-**  along with this program; if not, write to the Free Software
-**  Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA
-**  02111-1307, USA.
+**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
 #include <assert.h>

Modified: trunk/windstille/src/gui/group_component.hpp
===================================================================
--- trunk/windstille/src/gui/group_component.hpp	2009-02-10 14:12:18 UTC (rev 2428)
+++ trunk/windstille/src/gui/group_component.hpp	2009-02-10 14:28:05 UTC (rev 2429)
@@ -1,26 +1,19 @@
-/*  $Id$
-**   __      __ __             ___        __   __ __   __
-**  /  \    /  \__| ____    __| _/_______/  |_|__|  | |  |   ____
-**  \   \/\/   /  |/    \  / __ |/  ___/\   __\  |  | |  | _/ __ \
-**   \        /|  |   |  \/ /_/ |\___ \  |  | |  |  |_|  |_\  ___/
-**    \__/\  / |__|___|  /\____ /____  > |__| |__|____/____/\___  >
-**         \/          \/      \/    \/                         \/
+/*
+**  Windstille - A Sci-Fi Action-Adventure Game
 **  Copyright (C) 2005 Ingo Ruhnke <grumbel at gmx.de>
 **
-**  This program is free software; you can redistribute it and/or
-**  modify it under the terms of the GNU General Public License
-**  as published by the Free Software Foundation; either version 2
-**  of the License, or (at your option) any later version.
-**
+**  This program is free software: you can redistribute it and/or modify
+**  it under the terms of the GNU General Public License as published by
+**  the Free Software Foundation, either version 3 of the License, or
+**  (at your option) any later version.
+**  
 **  This program is distributed in the hope that it will be useful,
 **  but WITHOUT ANY WARRANTY; without even the implied warranty of
 **  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 **  GNU General Public License for more details.
-** 
+**  
 **  You should have received a copy of the GNU General Public License
-**  along with this program; if not, write to the Free Software
-**  Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA
-**  02111-1307, USA.
+**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
 #ifndef HEADER_GROUP_COMPONENT_HPP

Modified: trunk/windstille/src/gui/gui_manager.cpp
===================================================================
--- trunk/windstille/src/gui/gui_manager.cpp	2009-02-10 14:12:18 UTC (rev 2428)
+++ trunk/windstille/src/gui/gui_manager.cpp	2009-02-10 14:28:05 UTC (rev 2429)
@@ -1,26 +1,19 @@
-/*  $Id$
-**   __      __ __             ___        __   __ __   __
-**  /  \    /  \__| ____    __| _/_______/  |_|__|  | |  |   ____
-**  \   \/\/   /  |/    \  / __ |/  ___/\   __\  |  | |  | _/ __ \
-**   \        /|  |   |  \/ /_/ |\___ \  |  | |  |  |_|  |_\  ___/
-**    \__/\  / |__|___|  /\____ /____  > |__| |__|____/____/\___  >
-**         \/          \/      \/    \/                         \/
+/*
+**  Windstille - A Sci-Fi Action-Adventure Game
 **  Copyright (C) 2005 Ingo Ruhnke <grumbel at gmx.de>
 **
-**  This program is free software; you can redistribute it and/or
-**  modify it under the terms of the GNU General Public License
-**  as published by the Free Software Foundation; either version 2
-**  of the License, or (at your option) any later version.
-**
+**  This program is free software: you can redistribute it and/or modify
+**  it under the terms of the GNU General Public License as published by
+**  the Free Software Foundation, either version 3 of the License, or
+**  (at your option) any later version.
+**  
 **  This program is distributed in the hope that it will be useful,
 **  but WITHOUT ANY WARRANTY; without even the implied warranty of
 **  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 **  GNU General Public License for more details.
-** 
+**  
 **  You should have received a copy of the GNU General Public License
-**  along with this program; if not, write to the Free Software
-**  Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA
-**  02111-1307, USA.
+**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
 #include "input/controller.hpp"

Modified: trunk/windstille/src/gui/gui_manager.hpp
===================================================================
--- trunk/windstille/src/gui/gui_manager.hpp	2009-02-10 14:12:18 UTC (rev 2428)
+++ trunk/windstille/src/gui/gui_manager.hpp	2009-02-10 14:28:05 UTC (rev 2429)
@@ -1,26 +1,19 @@
-/*  $Id$
-**   __      __ __             ___        __   __ __   __
-**  /  \    /  \__| ____    __| _/_______/  |_|__|  | |  |   ____
-**  \   \/\/   /  |/    \  / __ |/  ___/\   __\  |  | |  | _/ __ \
-**   \        /|  |   |  \/ /_/ |\___ \  |  | |  |  |_|  |_\  ___/
-**    \__/\  / |__|___|  /\____ /____  > |__| |__|____/____/\___  >
-**         \/          \/      \/    \/                         \/
+/*
+**  Windstille - A Sci-Fi Action-Adventure Game
 **  Copyright (C) 2005 Ingo Ruhnke <grumbel at gmx.de>
 **
-**  This program is free software; you can redistribute it and/or
-**  modify it under the terms of the GNU General Public License
-**  as published by the Free Software Foundation; either version 2
-**  of the License, or (at your option) any later version.
-**
+**  This program is free software: you can redistribute it and/or modify
+**  it under the terms of the GNU General Public License as published by
+**  the Free Software Foundation, either version 3 of the License, or
+**  (at your option) any later version.
+**  
 **  This program is distributed in the hope that it will be useful,
 **  but WITHOUT ANY WARRANTY; without even the implied warranty of
 **  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 **  GNU General Public License for more details.
-** 
+**  
 **  You should have received a copy of the GNU General Public License
-**  along with this program; if not, write to the Free Software
-**  Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA
-**  02111-1307, USA.
+**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
 #ifndef HEADER_WINDSTILLE_GUI_GUI_MANAGER_HPP

Modified: trunk/windstille/src/gui/label.cpp
===================================================================
--- trunk/windstille/src/gui/label.cpp	2009-02-10 14:12:18 UTC (rev 2428)
+++ trunk/windstille/src/gui/label.cpp	2009-02-10 14:28:05 UTC (rev 2429)
@@ -1,26 +1,19 @@
-/*  $Id$
-**   __      __ __             ___        __   __ __   __
-**  /  \    /  \__| ____    __| _/_______/  |_|__|  | |  |   ____
-**  \   \/\/   /  |/    \  / __ |/  ___/\   __\  |  | |  | _/ __ \
-**   \        /|  |   |  \/ /_/ |\___ \  |  | |  |  |_|  |_\  ___/
-**    \__/\  / |__|___|  /\____ /____  > |__| |__|____/____/\___  >
-**         \/          \/      \/    \/                         \/
+/*
+**  Windstille - A Sci-Fi Action-Adventure Game
 **  Copyright (C) 2005 Ingo Ruhnke <grumbel at gmx.de>
 **
-**  This program is free software; you can redistribute it and/or
-**  modify it under the terms of the GNU General Public License
-**  as published by the Free Software Foundation; either version 2
-**  of the License, or (at your option) any later version.
-**
+**  This program is free software: you can redistribute it and/or modify
+**  it under the terms of the GNU General Public License as published by
+**  the Free Software Foundation, either version 3 of the License, or
+**  (at your option) any later version.
+**  
 **  This program is distributed in the hope that it will be useful,
 **  but WITHOUT ANY WARRANTY; without even the implied warranty of
 **  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 **  GNU General Public License for more details.
-** 
+**  
 **  You should have received a copy of the GNU General Public License
-**  along with this program; if not, write to the Free Software
-**  Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA
-**  02111-1307, USA.
+**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
 #include "font/fonts.hpp"

Modified: trunk/windstille/src/gui/label.hpp
===================================================================
--- trunk/windstille/src/gui/label.hpp	2009-02-10 14:12:18 UTC (rev 2428)
+++ trunk/windstille/src/gui/label.hpp	2009-02-10 14:28:05 UTC (rev 2429)
@@ -1,26 +1,19 @@
-/*  $Id$
-**   __      __ __             ___        __   __ __   __
-**  /  \    /  \__| ____    __| _/_______/  |_|__|  | |  |   ____
-**  \   \/\/   /  |/    \  / __ |/  ___/\   __\  |  | |  | _/ __ \
-**   \        /|  |   |  \/ /_/ |\___ \  |  | |  |  |_|  |_\  ___/
-**    \__/\  / |__|___|  /\____ /____  > |__| |__|____/____/\___  >
-**         \/          \/      \/    \/                         \/
+/*
+**  Windstille - A Sci-Fi Action-Adventure Game
 **  Copyright (C) 2005 Ingo Ruhnke <grumbel at gmx.de>
 **
-**  This program is free software; you can redistribute it and/or
-**  modify it under the terms of the GNU General Public License
-**  as published by the Free Software Foundation; either version 2
-**  of the License, or (at your option) any later version.
-**
+**  This program is free software: you can redistribute it and/or modify
+**  it under the terms of the GNU General Public License as published by
+**  the Free Software Foundation, either version 3 of the License, or
+**  (at your option) any later version.
+**  
 **  This program is distributed in the hope that it will be useful,
 **  but WITHOUT ANY WARRANTY; without even the implied warranty of
 **  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 **  GNU General Public License for more details.
-** 
+**  
 **  You should have received a copy of the GNU General Public License
-**  along with this program; if not, write to the Free Software
-**  Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA
-**  02111-1307, USA.
+**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
 #ifndef HEADER_LABEL_HPP

Modified: trunk/windstille/src/gui/list_view.cpp
===================================================================
--- trunk/windstille/src/gui/list_view.cpp	2009-02-10 14:12:18 UTC (rev 2428)
+++ trunk/windstille/src/gui/list_view.cpp	2009-02-10 14:28:05 UTC (rev 2429)
@@ -1,26 +1,19 @@
-/*  $Id$
-**   __      __ __             ___        __   __ __   __
-**  /  \    /  \__| ____    __| _/_______/  |_|__|  | |  |   ____
-**  \   \/\/   /  |/    \  / __ |/  ___/\   __\  |  | |  | _/ __ \
-**   \        /|  |   |  \/ /_/ |\___ \  |  | |  |  |_|  |_\  ___/
-**    \__/\  / |__|___|  /\____ /____  > |__| |__|____/____/\___  >
-**         \/          \/      \/    \/                         \/
+/*
+**  Windstille - A Sci-Fi Action-Adventure Game
 **  Copyright (C) 2005 Ingo Ruhnke <grumbel at gmx.de>
 **
-**  This program is free software; you can redistribute it and/or
-**  modify it under the terms of the GNU General Public License
-**  as published by the Free Software Foundation; either version 2
-**  of the License, or (at your option) any later version.
-**
+**  This program is free software: you can redistribute it and/or modify
+**  it under the terms of the GNU General Public License as published by
+**  the Free Software Foundation, either version 3 of the License, or
+**  (at your option) any later version.
+**  
 **  This program is distributed in the hope that it will be useful,
 **  but WITHOUT ANY WARRANTY; without even the implied warranty of
 **  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 **  GNU General Public License for more details.
-** 
+**  
 **  You should have received a copy of the GNU General Public License
-**  along with this program; if not, write to the Free Software
-**  Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA
-**  02111-1307, USA.
+**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
 #include "display/display.hpp"

Modified: trunk/windstille/src/gui/list_view.hpp
===================================================================
--- trunk/windstille/src/gui/list_view.hpp	2009-02-10 14:12:18 UTC (rev 2428)
+++ trunk/windstille/src/gui/list_view.hpp	2009-02-10 14:28:05 UTC (rev 2429)
@@ -1,26 +1,19 @@
-/*  $Id$
-**   __      __ __             ___        __   __ __   __
-**  /  \    /  \__| ____    __| _/_______/  |_|__|  | |  |   ____
-**  \   \/\/   /  |/    \  / __ |/  ___/\   __\  |  | |  | _/ __ \
-**   \        /|  |   |  \/ /_/ |\___ \  |  | |  |  |_|  |_\  ___/
-**    \__/\  / |__|___|  /\____ /____  > |__| |__|____/____/\___  >
-**         \/          \/      \/    \/                         \/
+/*
+**  Windstille - A Sci-Fi Action-Adventure Game
 **  Copyright (C) 2005 Ingo Ruhnke <grumbel at gmx.de>
 **
-**  This program is free software; you can redistribute it and/or
-**  modify it under the terms of the GNU General Public License
-**  as published by the Free Software Foundation; either version 2
-**  of the License, or (at your option) any later version.
-**
+**  This program is free software: you can redistribute it and/or modify
+**  it under the terms of the GNU General Public License as published by
+**  the Free Software Foundation, either version 3 of the License, or
+**  (at your option) any later version.
+**  
 **  This program is distributed in the hope that it will be useful,
 **  but WITHOUT ANY WARRANTY; without even the implied warranty of
 **  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 **  GNU General Public License for more details.
-** 
+**  
 **  You should have received a copy of the GNU General Public License
-**  along with this program; if not, write to the Free Software
-**  Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA
-**  02111-1307, USA.
+**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
 #ifndef HEADER_WINDSTILLE_GUI_LIST_VIEW_HPP

Modified: trunk/windstille/src/gui/menu_component.cpp
===================================================================
--- trunk/windstille/src/gui/menu_component.cpp	2009-02-10 14:12:18 UTC (rev 2428)
+++ trunk/windstille/src/gui/menu_component.cpp	2009-02-10 14:28:05 UTC (rev 2429)
@@ -1,26 +1,19 @@
-/*  $Id$
-**   __      __ __             ___        __   __ __   __
-**  /  \    /  \__| ____    __| _/_______/  |_|__|  | |  |   ____
-**  \   \/\/   /  |/    \  / __ |/  ___/\   __\  |  | |  | _/ __ \
-**   \        /|  |   |  \/ /_/ |\___ \  |  | |  |  |_|  |_\  ___/
-**    \__/\  / |__|___|  /\____ /____  > |__| |__|____/____/\___  >
-**         \/          \/      \/    \/                         \/
+/*
+**  Windstille - A Sci-Fi Action-Adventure Game
 **  Copyright (C) 2005 Ingo Ruhnke <grumbel at gmx.de>
 **
-**  This program is free software; you can redistribute it and/or
-**  modify it under the terms of the GNU General Public License
-**  as published by the Free Software Foundation; either version 2
-**  of the License, or (at your option) any later version.
-**
+**  This program is free software: you can redistribute it and/or modify
+**  it under the terms of the GNU General Public License as published by
+**  the Free Software Foundation, either version 3 of the License, or
+**  (at your option) any later version.
+**  
 **  This program is distributed in the hope that it will be useful,
 **  but WITHOUT ANY WARRANTY; without even the implied warranty of
 **  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 **  GNU General Public License for more details.
-** 
+**  
 **  You should have received a copy of the GNU General Public License
-**  along with this program; if not, write to the Free Software
-**  Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA
-**  02111-1307, USA.
+**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
 #include <iostream>

Modified: trunk/windstille/src/gui/menu_component.hpp
===================================================================
--- trunk/windstille/src/gui/menu_component.hpp	2009-02-10 14:12:18 UTC (rev 2428)
+++ trunk/windstille/src/gui/menu_component.hpp	2009-02-10 14:28:05 UTC (rev 2429)
@@ -1,26 +1,19 @@
-/*  $Id$
-**   __      __ __             ___        __   __ __   __
-**  /  \    /  \__| ____    __| _/_______/  |_|__|  | |  |   ____
-**  \   \/\/   /  |/    \  / __ |/  ___/\   __\  |  | |  | _/ __ \
-**   \        /|  |   |  \/ /_/ |\___ \  |  | |  |  |_|  |_\  ___/
-**    \__/\  / |__|___|  /\____ /____  > |__| |__|____/____/\___  >
-**         \/          \/      \/    \/                         \/
+/*
+**  Windstille - A Sci-Fi Action-Adventure Game
 **  Copyright (C) 2007 Ingo Ruhnke <grumbel at gmx.de>
 **
-**  This program is free software; you can redistribute it and/or
-**  modify it under the terms of the GNU General Public License
-**  as published by the Free Software Foundation; either version 2
-**  of the License, or (at your option) any later version.
-**
+**  This program is free software: you can redistribute it and/or modify
+**  it under the terms of the GNU General Public License as published by
+**  the Free Software Foundation, either version 3 of the License, or
+**  (at your option) any later version.
+**  
 **  This program is distributed in the hope that it will be useful,
 **  but WITHOUT ANY WARRANTY; without even the implied warranty of
 **  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 **  GNU General Public License for more details.
-** 
+**  
 **  You should have received a copy of the GNU General Public License
-**  along with this program; if not, write to the Free Software
-**  Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA
-**  02111-1307, USA.
+**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
 #ifndef HEADER_WINDSTILLE_GUI_MENU_COMPONENT_HPP

Modified: trunk/windstille/src/gui/menu_item.cpp
===================================================================
--- trunk/windstille/src/gui/menu_item.cpp	2009-02-10 14:12:18 UTC (rev 2428)
+++ trunk/windstille/src/gui/menu_item.cpp	2009-02-10 14:28:05 UTC (rev 2429)
@@ -1,26 +1,19 @@
-/*  $Id$
-**   __      __ __             ___        __   __ __   __
-**  /  \    /  \__| ____    __| _/_______/  |_|__|  | |  |   ____
-**  \   \/\/   /  |/    \  / __ |/  ___/\   __\  |  | |  | _/ __ \
-**   \        /|  |   |  \/ /_/ |\___ \  |  | |  |  |_|  |_\  ___/
-**    \__/\  / |__|___|  /\____ /____  > |__| |__|____/____/\___  >
-**         \/          \/      \/    \/                         \/
+/*
+**  Windstille - A Sci-Fi Action-Adventure Game
 **  Copyright (C) 2005 Ingo Ruhnke <grumbel at gmx.de>
 **
-**  This program is free software; you can redistribute it and/or
-**  modify it under the terms of the GNU General Public License
-**  as published by the Free Software Foundation; either version 2
-**  of the License, or (at your option) any later version.
-**
+**  This program is free software: you can redistribute it and/or modify
+**  it under the terms of the GNU General Public License as published by
+**  the Free Software Foundation, either version 3 of the License, or
+**  (at your option) any later version.
+**  
 **  This program is distributed in the hope that it will be useful,
 **  but WITHOUT ANY WARRANTY; without even the implied warranty of
 **  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 **  GNU General Public License for more details.
-** 
+**  
 **  You should have received a copy of the GNU General Public License
-**  along with this program; if not, write to the Free Software
-**  Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA
-**  02111-1307, USA.
+**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
 #include "sound/sound_manager.hpp"

Modified: trunk/windstille/src/gui/menu_item.hpp
===================================================================
--- trunk/windstille/src/gui/menu_item.hpp	2009-02-10 14:12:18 UTC (rev 2428)
+++ trunk/windstille/src/gui/menu_item.hpp	2009-02-10 14:28:05 UTC (rev 2429)
@@ -1,26 +1,19 @@
-/*  $Id$
-**   __      __ __             ___        __   __ __   __
-**  /  \    /  \__| ____    __| _/_______/  |_|__|  | |  |   ____
-**  \   \/\/   /  |/    \  / __ |/  ___/\   __\  |  | |  | _/ __ \
-**   \        /|  |   |  \/ /_/ |\___ \  |  | |  |  |_|  |_\  ___/
-**    \__/\  / |__|___|  /\____ /____  > |__| |__|____/____/\___  >
-**         \/          \/      \/    \/                         \/
+/*
+**  Windstille - A Sci-Fi Action-Adventure Game
 **  Copyright (C) 2005 Ingo Ruhnke <grumbel at gmx.de>
 **
-**  This program is free software; you can redistribute it and/or
-**  modify it under the terms of the GNU General Public License
-**  as published by the Free Software Foundation; either version 2
-**  of the License, or (at your option) any later version.
-**
+**  This program is free software: you can redistribute it and/or modify
+**  it under the terms of the GNU General Public License as published by
+**  the Free Software Foundation, either version 3 of the License, or
+**  (at your option) any later version.
+**  
 **  This program is distributed in the hope that it will be useful,
 **  but WITHOUT ANY WARRANTY; without even the implied warranty of
 **  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 **  GNU General Public License for more details.
-** 
+**  
 **  You should have received a copy of the GNU General Public License
-**  along with this program; if not, write to the Free Software
-**  Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA
-**  02111-1307, USA.
+**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
 #ifndef HEADER_WINDSTILLE_GUI_MENU_ITEM_HPP

Modified: trunk/windstille/src/gui/root_component.cpp
===================================================================
--- trunk/windstille/src/gui/root_component.cpp	2009-02-10 14:12:18 UTC (rev 2428)
+++ trunk/windstille/src/gui/root_component.cpp	2009-02-10 14:28:05 UTC (rev 2429)
@@ -1,26 +1,19 @@
-/*  $Id$
-**   __      __ __             ___        __   __ __   __
-**  /  \    /  \__| ____    __| _/_______/  |_|__|  | |  |   ____
-**  \   \/\/   /  |/    \  / __ |/  ___/\   __\  |  | |  | _/ __ \
-**   \        /|  |   |  \/ /_/ |\___ \  |  | |  |  |_|  |_\  ___/
-**    \__/\  / |__|___|  /\____ /____  > |__| |__|____/____/\___  >
-**         \/          \/      \/    \/                         \/
+/*
+**  Windstille - A Sci-Fi Action-Adventure Game
 **  Copyright (C) 2005 Ingo Ruhnke <grumbel at gmx.de>
 **
-**  This program is free software; you can redistribute it and/or
-**  modify it under the terms of the GNU General Public License
-**  as published by the Free Software Foundation; either version 2
-**  of the License, or (at your option) any later version.
-**
+**  This program is free software: you can redistribute it and/or modify
+**  it under the terms of the GNU General Public License as published by
+**  the Free Software Foundation, either version 3 of the License, or
+**  (at your option) any later version.
+**  
 **  This program is distributed in the hope that it will be useful,
 **  but WITHOUT ANY WARRANTY; without even the implied warranty of
 **  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 **  GNU General Public License for more details.
-** 
+**  
 **  You should have received a copy of the GNU General Public License
-**  along with this program; if not, write to the Free Software
-**  Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA
-**  02111-1307, USA.
+**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
 #include <iostream>

Modified: trunk/windstille/src/gui/root_component.hpp
===================================================================
--- trunk/windstille/src/gui/root_component.hpp	2009-02-10 14:12:18 UTC (rev 2428)
+++ trunk/windstille/src/gui/root_component.hpp	2009-02-10 14:28:05 UTC (rev 2429)
@@ -1,26 +1,19 @@
-/*  $Id$
-**   __      __ __             ___        __   __ __   __
-**  /  \    /  \__| ____    __| _/_______/  |_|__|  | |  |   ____
-**  \   \/\/   /  |/    \  / __ |/  ___/\   __\  |  | |  | _/ __ \
-**   \        /|  |   |  \/ /_/ |\___ \  |  | |  |  |_|  |_\  ___/
-**    \__/\  / |__|___|  /\____ /____  > |__| |__|____/____/\___  >
-**         \/          \/      \/    \/                         \/
+/*
+**  Windstille - A Sci-Fi Action-Adventure Game
 **  Copyright (C) 2005 Ingo Ruhnke <grumbel at gmx.de>
 **
-**  This program is free software; you can redistribute it and/or
-**  modify it under the terms of the GNU General Public License
-**  as published by the Free Software Foundation; either version 2
-**  of the License, or (at your option) any later version.
-**
+**  This program is free software: you can redistribute it and/or modify
+**  it under the terms of the GNU General Public License as published by
+**  the Free Software Foundation, either version 3 of the License, or
+**  (at your option) any later version.
+**  
 **  This program is distributed in the hope that it will be useful,
 **  but WITHOUT ANY WARRANTY; without even the implied warranty of
 **  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 **  GNU General Public License for more details.
-** 
+**  
 **  You should have received a copy of the GNU General Public License
-**  along with this program; if not, write to the Free Software
-**  Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA
-**  02111-1307, USA.
+**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
 #ifndef HEADER_WINDSTILLE_GUI_ROOT_COMPONENT_HPP

Modified: trunk/windstille/src/gui/slider.cpp
===================================================================
--- trunk/windstille/src/gui/slider.cpp	2009-02-10 14:12:18 UTC (rev 2428)
+++ trunk/windstille/src/gui/slider.cpp	2009-02-10 14:28:05 UTC (rev 2429)
@@ -1,26 +1,19 @@
-/*  $Id$
-**   __      __ __             ___        __   __ __   __
-**  /  \    /  \__| ____    __| _/_______/  |_|__|  | |  |   ____
-**  \   \/\/   /  |/    \  / __ |/  ___/\   __\  |  | |  | _/ __ \
-**   \        /|  |   |  \/ /_/ |\___ \  |  | |  |  |_|  |_\  ___/
-**    \__/\  / |__|___|  /\____ /____  > |__| |__|____/____/\___  >
-**         \/          \/      \/    \/                         \/
+/*
+**  Windstille - A Sci-Fi Action-Adventure Game
 **  Copyright (C) 2005 Ingo Ruhnke <grumbel at gmx.de>
 **
-**  This program is free software; you can redistribute it and/or
-**  modify it under the terms of the GNU General Public License
-**  as published by the Free Software Foundation; either version 2
-**  of the License, or (at your option) any later version.
-**
+**  This program is free software: you can redistribute it and/or modify
+**  it under the terms of the GNU General Public License as published by
+**  the Free Software Foundation, either version 3 of the License, or
+**  (at your option) any later version.
+**  
 **  This program is distributed in the hope that it will be useful,
 **  but WITHOUT ANY WARRANTY; without even the implied warranty of
 **  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 **  GNU General Public License for more details.
-** 
+**  
 **  You should have received a copy of the GNU General Public License
-**  along with this program; if not, write to the Free Software
-**  Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA
-**  02111-1307, USA.
+**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
 #include "input/controller.hpp"

Modified: trunk/windstille/src/gui/slider.hpp
===================================================================
--- trunk/windstille/src/gui/slider.hpp	2009-02-10 14:12:18 UTC (rev 2428)
+++ trunk/windstille/src/gui/slider.hpp	2009-02-10 14:28:05 UTC (rev 2429)
@@ -1,26 +1,19 @@
-/*  $Id$
-**   __      __ __             ___        __   __ __   __
-**  /  \    /  \__| ____    __| _/_______/  |_|__|  | |  |   ____
-**  \   \/\/   /  |/    \  / __ |/  ___/\   __\  |  | |  | _/ __ \
-**   \        /|  |   |  \/ /_/ |\___ \  |  | |  |  |_|  |_\  ___/
-**    \__/\  / |__|___|  /\____ /____  > |__| |__|____/____/\___  >
-**         \/          \/      \/    \/                         \/
+/*
+**  Windstille - A Sci-Fi Action-Adventure Game
 **  Copyright (C) 2005 Ingo Ruhnke <grumbel at gmx.de>
 **
-**  This program is free software; you can redistribute it and/or
-**  modify it under the terms of the GNU General Public License
-**  as published by the Free Software Foundation; either version 2
-**  of the License, or (at your option) any later version.
-**
+**  This program is free software: you can redistribute it and/or modify
+**  it under the terms of the GNU General Public License as published by
+**  the Free Software Foundation, either version 3 of the License, or
+**  (at your option) any later version.
+**  
 **  This program is distributed in the hope that it will be useful,
 **  but WITHOUT ANY WARRANTY; without even the implied warranty of
 **  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 **  GNU General Public License for more details.
-** 
+**  
 **  You should have received a copy of the GNU General Public License
-**  along with this program; if not, write to the Free Software
-**  Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA
-**  02111-1307, USA.
+**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
 #ifndef HEADER_SLIDER_HPP

Modified: trunk/windstille/src/gui/tab_component.cpp
===================================================================
--- trunk/windstille/src/gui/tab_component.cpp	2009-02-10 14:12:18 UTC (rev 2428)
+++ trunk/windstille/src/gui/tab_component.cpp	2009-02-10 14:28:05 UTC (rev 2429)
@@ -1,26 +1,19 @@
-/*  $Id$
-**   __      __ __             ___        __   __ __   __
-**  /  \    /  \__| ____    __| _/_______/  |_|__|  | |  |   ____
-**  \   \/\/   /  |/    \  / __ |/  ___/\   __\  |  | |  | _/ __ \
-**   \        /|  |   |  \/ /_/ |\___ \  |  | |  |  |_|  |_\  ___/
-**    \__/\  / |__|___|  /\____ /____  > |__| |__|____/____/\___  >
-**         \/          \/      \/    \/                         \/
+/*
+**  Windstille - A Sci-Fi Action-Adventure Game
 **  Copyright (C) 2005 Ingo Ruhnke <grumbel at gmx.de>
 **
-**  This program is free software; you can redistribute it and/or
-**  modify it under the terms of the GNU General Public License
-**  as published by the Free Software Foundation; either version 2
-**  of the License, or (at your option) any later version.
-**
+**  This program is free software: you can redistribute it and/or modify
+**  it under the terms of the GNU General Public License as published by
+**  the Free Software Foundation, either version 3 of the License, or
+**  (at your option) any later version.
+**  
 **  This program is distributed in the hope that it will be useful,
 **  but WITHOUT ANY WARRANTY; without even the implied warranty of
 **  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 **  GNU General Public License for more details.
-** 
+**  
 **  You should have received a copy of the GNU General Public License
-**  along with this program; if not, write to the Free Software
-**  Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA
-**  02111-1307, USA.
+**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
 #include <assert.h>

Modified: trunk/windstille/src/gui/tab_component.hpp
===================================================================
--- trunk/windstille/src/gui/tab_component.hpp	2009-02-10 14:12:18 UTC (rev 2428)
+++ trunk/windstille/src/gui/tab_component.hpp	2009-02-10 14:28:05 UTC (rev 2429)
@@ -1,26 +1,19 @@
-/*  $Id$
-**   __      __ __             ___        __   __ __   __
-**  /  \    /  \__| ____    __| _/_______/  |_|__|  | |  |   ____
-**  \   \/\/   /  |/    \  / __ |/  ___/\   __\  |  | |  | _/ __ \
-**   \        /|  |   |  \/ /_/ |\___ \  |  | |  |  |_|  |_\  ___/
-**    \__/\  / |__|___|  /\____ /____  > |__| |__|____/____/\___  >
-**         \/          \/      \/    \/                         \/
+/*
+**  Windstille - A Sci-Fi Action-Adventure Game
 **  Copyright (C) 2005 Ingo Ruhnke <grumbel at gmx.de>
 **
-**  This program is free software; you can redistribute it and/or
-**  modify it under the terms of the GNU General Public License
-**  as published by the Free Software Foundation; either version 2
-**  of the License, or (at your option) any later version.
-**
+**  This program is free software: you can redistribute it and/or modify
+**  it under the terms of the GNU General Public License as published by
+**  the Free Software Foundation, either version 3 of the License, or
+**  (at your option) any later version.
+**  
 **  This program is distributed in the hope that it will be useful,
 **  but WITHOUT ANY WARRANTY; without even the implied warranty of
 **  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 **  GNU General Public License for more details.
-** 
+**  
 **  You should have received a copy of the GNU General Public License
-**  along with this program; if not, write to the Free Software
-**  Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA
-**  02111-1307, USA.
+**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
 #ifndef HEADER_WINDSTILLE_GUI_TAB_COMPONENT_HPP

Modified: trunk/windstille/src/gui/text_view.cpp
===================================================================
--- trunk/windstille/src/gui/text_view.cpp	2009-02-10 14:12:18 UTC (rev 2428)
+++ trunk/windstille/src/gui/text_view.cpp	2009-02-10 14:28:05 UTC (rev 2429)
@@ -1,26 +1,19 @@
-/*  $Id$
-**   __      __ __             ___        __   __ __   __
-**  /  \    /  \__| ____    __| _/_______/  |_|__|  | |  |   ____
-**  \   \/\/   /  |/    \  / __ |/  ___/\   __\  |  | |  | _/ __ \
-**   \        /|  |   |  \/ /_/ |\___ \  |  | |  |  |_|  |_\  ___/
-**    \__/\  / |__|___|  /\____ /____  > |__| |__|____/____/\___  >
-**         \/          \/      \/    \/                         \/
+/*
+**  Windstille - A Sci-Fi Action-Adventure Game
 **  Copyright (C) 2005 Ingo Ruhnke <grumbel at gmx.de>
 **
-**  This program is free software; you can redistribute it and/or
-**  modify it under the terms of the GNU General Public License
-**  as published by the Free Software Foundation; either version 2
-**  of the License, or (at your option) any later version.
-**
+**  This program is free software: you can redistribute it and/or modify
+**  it under the terms of the GNU General Public License as published by
+**  the Free Software Foundation, either version 3 of the License, or
+**  (at your option) any later version.
+**  
 **  This program is distributed in the hope that it will be useful,
 **  but WITHOUT ANY WARRANTY; without even the implied warranty of
 **  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 **  GNU General Public License for more details.
-** 
+**  
 **  You should have received a copy of the GNU General Public License
-**  along with this program; if not, write to the Free Software
-**  Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA
-**  02111-1307, USA.
+**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
 #include "input/controller.hpp"

Modified: trunk/windstille/src/gui/text_view.hpp
===================================================================
--- trunk/windstille/src/gui/text_view.hpp	2009-02-10 14:12:18 UTC (rev 2428)
+++ trunk/windstille/src/gui/text_view.hpp	2009-02-10 14:28:05 UTC (rev 2429)
@@ -1,26 +1,19 @@
-/*  $Id$
-**   __      __ __             ___        __   __ __   __
-**  /  \    /  \__| ____    __| _/_______/  |_|__|  | |  |   ____
-**  \   \/\/   /  |/    \  / __ |/  ___/\   __\  |  | |  | _/ __ \
-**   \        /|  |   |  \/ /_/ |\___ \  |  | |  |  |_|  |_\  ___/
-**    \__/\  / |__|___|  /\____ /____  > |__| |__|____/____/\___  >
-**         \/          \/      \/    \/                         \/
+/*
+**  Windstille - A Sci-Fi Action-Adventure Game
 **  Copyright (C) 2005 Ingo Ruhnke <grumbel at gmx.de>
 **
-**  This program is free software; you can redistribute it and/or
-**  modify it under the terms of the GNU General Public License
-**  as published by the Free Software Foundation; either version 2
-**  of the License, or (at your option) any later version.
-**
+**  This program is free software: you can redistribute it and/or modify
+**  it under the terms of the GNU General Public License as published by
+**  the Free Software Foundation, either version 3 of the License, or
+**  (at your option) any later version.
+**  
 **  This program is distributed in the hope that it will be useful,
 **  but WITHOUT ANY WARRANTY; without even the implied warranty of
 **  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 **  GNU General Public License for more details.
-** 
+**  
 **  You should have received a copy of the GNU General Public License
-**  along with this program; if not, write to the Free Software
-**  Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA
-**  02111-1307, USA.
+**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
 #ifndef HEADER_WINDSTILLE_GUI_TEXT_VIEW_HPP

Modified: trunk/windstille/src/handle.hpp
===================================================================
--- trunk/windstille/src/handle.hpp	2009-02-10 14:12:18 UTC (rev 2428)
+++ trunk/windstille/src/handle.hpp	2009-02-10 14:28:05 UTC (rev 2429)
@@ -1,26 +1,19 @@
-/*  $Id$
-**   __      __ __             ___        __   __ __   __
-**  /  \    /  \__| ____    __| _/_______/  |_|__|  | |  |   ____
-**  \   \/\/   /  |/    \  / __ |/  ___/\   __\  |  | |  | _/ __ \
-**   \        /|  |   |  \/ /_/ |\___ \  |  | |  |  |_|  |_\  ___/
-**    \__/\  / |__|___|  /\____ /____  > |__| |__|____/____/\___  >
-**         \/          \/      \/    \/                         \/
+/*
+**  Windstille - A Sci-Fi Action-Adventure Game
 **  Copyright (C) 2007 Ingo Ruhnke <grumbel at gmx.de>
 **
-**  This program is free software; you can redistribute it and/or
-**  modify it under the terms of the GNU General Public License
-**  as published by the Free Software Foundation; either version 2
-**  of the License, or (at your option) any later version.
-**
+**  This program is free software: you can redistribute it and/or modify
+**  it under the terms of the GNU General Public License as published by
+**  the Free Software Foundation, either version 3 of the License, or
+**  (at your option) any later version.
+**  
 **  This program is distributed in the hope that it will be useful,
 **  but WITHOUT ANY WARRANTY; without even the implied warranty of
 **  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 **  GNU General Public License for more details.
-** 
+**  
 **  You should have received a copy of the GNU General Public License
-**  along with this program; if not, write to the Free Software
-**  Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA
-**  02111-1307, USA.
+**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
 #ifndef HEADER_HANDLE_HPP

Modified: trunk/windstille/src/input/controller.cpp
===================================================================
--- trunk/windstille/src/input/controller.cpp	2009-02-10 14:12:18 UTC (rev 2428)
+++ trunk/windstille/src/input/controller.cpp	2009-02-10 14:28:05 UTC (rev 2429)
@@ -1,22 +1,20 @@
-/*  $Id$
+/*
 **
 **  Pingus - A free Lemmings clone
 **  Copyright (C) 2000,2005 Ingo Ruhnke <grumbel at gmx.de>
 **
-**  This program is free software; you can redistribute it and/or
-**  modify it under the terms of the GNU General Public License
-**  as published by the Free Software Foundation; either version 2
-**  of the License, or (at your option) any later version.
-**
+**  This program is free software: you can redistribute it and/or modify
+**  it under the terms of the GNU General Public License as published by
+**  the Free Software Foundation, either version 3 of the License, or
+**  (at your option) any later version.
+**  
 **  This program is distributed in the hope that it will be useful,
 **  but WITHOUT ANY WARRANTY; without even the implied warranty of
 **  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 **  GNU General Public License for more details.
-** 
+**  
 **  You should have received a copy of the GNU General Public License
-**  along with this program; if not, write to the Free Software
-**  Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA
-**  02111-1307, USA.
+**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
 #include <assert.h>

Modified: trunk/windstille/src/input/controller.hpp
===================================================================
--- trunk/windstille/src/input/controller.hpp	2009-02-10 14:12:18 UTC (rev 2428)
+++ trunk/windstille/src/input/controller.hpp	2009-02-10 14:28:05 UTC (rev 2429)
@@ -1,26 +1,19 @@
-/*  $Id$
-**   __      __ __             ___        __   __ __   __
-**  /  \    /  \__| ____    __| _/_______/  |_|__|  | |  |   ____
-**  \   \/\/   /  |/    \  / __ |/  ___/\   __\  |  | |  | _/ __ \
-**   \        /|  |   |  \/ /_/ |\___ \  |  | |  |  |_|  |_\  ___/
-**    \__/\  / |__|___|  /\____ /____  > |__| |__|____/____/\___  >
-**         \/          \/      \/    \/                         \/
+/*
+**  Windstille - A Sci-Fi Action-Adventure Game
 **  Copyright (C) 2000,2005 Ingo Ruhnke <grumbel at gmx.de>
 **
-**  This program is free software; you can redistribute it and/or
-**  modify it under the terms of the GNU General Public License
-**  as published by the Free Software Foundation; either version 2
-**  of the License, or (at your option) any later version.
-**
+**  This program is free software: you can redistribute it and/or modify
+**  it under the terms of the GNU General Public License as published by
+**  the Free Software Foundation, either version 3 of the License, or
+**  (at your option) any later version.
+**  
 **  This program is distributed in the hope that it will be useful,
 **  but WITHOUT ANY WARRANTY; without even the implied warranty of
 **  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 **  GNU General Public License for more details.
-** 
+**  
 **  You should have received a copy of the GNU General Public License
-**  along with this program; if not, write to the Free Software
-**  Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA
-**  02111-1307, USA.
+**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
 #ifndef HEADER_CONTROLLER_HXX

Modified: trunk/windstille/src/input/controller_description.cpp
===================================================================
--- trunk/windstille/src/input/controller_description.cpp	2009-02-10 14:12:18 UTC (rev 2428)
+++ trunk/windstille/src/input/controller_description.cpp	2009-02-10 14:28:05 UTC (rev 2429)
@@ -1,26 +1,19 @@
-/*  $Id$
-**   __      __ __             ___        __   __ __   __
-**  /  \    /  \__| ____    __| _/_______/  |_|__|  | |  |   ____
-**  \   \/\/   /  |/    \  / __ |/  ___/\   __\  |  | |  | _/ __ \
-**   \        /|  |   |  \/ /_/ |\___ \  |  | |  |  |_|  |_\  ___/
-**    \__/\  / |__|___|  /\____ /____  > |__| |__|____/____/\___  >
-**         \/          \/      \/    \/                         \/
+/*
+**  Windstille - A Sci-Fi Action-Adventure Game
 **  Copyright (C) 2005 Ingo Ruhnke <grumbel at gmx.de>
 **
-**  This program is free software; you can redistribute it and/or
-**  modify it under the terms of the GNU General Public License
-**  as published by the Free Software Foundation; either version 2
-**  of the License, or (at your option) any later version.
-**
+**  This program is free software: you can redistribute it and/or modify
+**  it under the terms of the GNU General Public License as published by
+**  the Free Software Foundation, either version 3 of the License, or
+**  (at your option) any later version.
+**  
 **  This program is distributed in the hope that it will be useful,
 **  but WITHOUT ANY WARRANTY; without even the implied warranty of
 **  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 **  GNU General Public License for more details.
-** 
+**  
 **  You should have received a copy of the GNU General Public License
-**  along with this program; if not, write to the Free Software
-**  Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA
-**  02111-1307, USA.
+**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
 #include <stdexcept>

Modified: trunk/windstille/src/input/controller_description.hpp
===================================================================
--- trunk/windstille/src/input/controller_description.hpp	2009-02-10 14:12:18 UTC (rev 2428)
+++ trunk/windstille/src/input/controller_description.hpp	2009-02-10 14:28:05 UTC (rev 2429)
@@ -1,26 +1,19 @@
-/*  $Id$
-**   __      __ __             ___        __   __ __   __
-**  /  \    /  \__| ____    __| _/_______/  |_|__|  | |  |   ____
-**  \   \/\/   /  |/    \  / __ |/  ___/\   __\  |  | |  | _/ __ \
-**   \        /|  |   |  \/ /_/ |\___ \  |  | |  |  |_|  |_\  ___/
-**    \__/\  / |__|___|  /\____ /____  > |__| |__|____/____/\___  >
-**         \/          \/      \/    \/                         \/
+/*
+**  Windstille - A Sci-Fi Action-Adventure Game
 **  Copyright (C) 2005 Ingo Ruhnke <grumbel at gmx.de>
 **
-**  This program is free software; you can redistribute it and/or
-**  modify it under the terms of the GNU General Public License
-**  as published by the Free Software Foundation; either version 2
-**  of the License, or (at your option) any later version.
-**
+**  This program is free software: you can redistribute it and/or modify
+**  it under the terms of the GNU General Public License as published by
+**  the Free Software Foundation, either version 3 of the License, or
+**  (at your option) any later version.
+**  
 **  This program is distributed in the hope that it will be useful,
 **  but WITHOUT ANY WARRANTY; without even the implied warranty of
 **  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 **  GNU General Public License for more details.
-** 
+**  
 **  You should have received a copy of the GNU General Public License
-**  along with this program; if not, write to the Free Software
-**  Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA
-**  02111-1307, USA.
+**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
 #ifndef HEADER_CONTROLLER_DESCRIPTION_HPP

Modified: trunk/windstille/src/input/input_configurator.cpp
===================================================================
--- trunk/windstille/src/input/input_configurator.cpp	2009-02-10 14:12:18 UTC (rev 2428)
+++ trunk/windstille/src/input/input_configurator.cpp	2009-02-10 14:28:05 UTC (rev 2429)
@@ -1,26 +1,19 @@
-/*  $Id$
-**   __      __ __             ___        __   __ __   __
-**  /  \    /  \__| ____    __| _/_______/  |_|__|  | |  |   ____
-**  \   \/\/   /  |/    \  / __ |/  ___/\   __\  |  | |  | _/ __ \
-**   \        /|  |   |  \/ /_/ |\___ \  |  | |  |  |_|  |_\  ___/
-**    \__/\  / |__|___|  /\____ /____  > |__| |__|____/____/\___  >
-**         \/          \/      \/    \/                         \/
+/*
+**  Windstille - A Sci-Fi Action-Adventure Game
 **  Copyright (C) 2005 Ingo Ruhnke <grumbel at gmx.de>
 **
-**  This program is free software; you can redistribute it and/or
-**  modify it under the terms of the GNU General Public License
-**  as published by the Free Software Foundation; either version 2
-**  of the License, or (at your option) any later version.
-**
+**  This program is free software: you can redistribute it and/or modify
+**  it under the terms of the GNU General Public License as published by
+**  the Free Software Foundation, either version 3 of the License, or
+**  (at your option) any later version.
+**  
 **  This program is distributed in the hope that it will be useful,
 **  but WITHOUT ANY WARRANTY; without even the implied warranty of
 **  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 **  GNU General Public License for more details.
-** 
+**  
 **  You should have received a copy of the GNU General Public License
-**  along with this program; if not, write to the Free Software
-**  Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA
-**  02111-1307, USA.
+**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
 #include <iostream>

Modified: trunk/windstille/src/input/input_configurator.hpp
===================================================================
--- trunk/windstille/src/input/input_configurator.hpp	2009-02-10 14:12:18 UTC (rev 2428)
+++ trunk/windstille/src/input/input_configurator.hpp	2009-02-10 14:28:05 UTC (rev 2429)
@@ -1,26 +1,19 @@
-/*  $Id$
-**   __      __ __             ___        __   __ __   __
-**  /  \    /  \__| ____    __| _/_______/  |_|__|  | |  |   ____
-**  \   \/\/   /  |/    \  / __ |/  ___/\   __\  |  | |  | _/ __ \
-**   \        /|  |   |  \/ /_/ |\___ \  |  | |  |  |_|  |_\  ___/
-**    \__/\  / |__|___|  /\____ /____  > |__| |__|____/____/\___  >
-**         \/          \/      \/    \/                         \/
+/*
+**  Windstille - A Sci-Fi Action-Adventure Game
 **  Copyright (C) 2005 Ingo Ruhnke <grumbel at gmx.de>
 **
-**  This program is free software; you can redistribute it and/or
-**  modify it under the terms of the GNU General Public License
-**  as published by the Free Software Foundation; either version 2
-**  of the License, or (at your option) any later version.
-**
+**  This program is free software: you can redistribute it and/or modify
+**  it under the terms of the GNU General Public License as published by
+**  the Free Software Foundation, either version 3 of the License, or
+**  (at your option) any later version.
+**  
 **  This program is distributed in the hope that it will be useful,
 **  but WITHOUT ANY WARRANTY; without even the implied warranty of
 **  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 **  GNU General Public License for more details.
-** 
+**  
 **  You should have received a copy of the GNU General Public License
-**  along with this program; if not, write to the Free Software
-**  Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA
-**  02111-1307, USA.
+**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
 #ifndef HEADER_INPUT_CONFIGURATOR_HPP

Modified: trunk/windstille/src/input/input_event.hpp
===================================================================
--- trunk/windstille/src/input/input_event.hpp	2009-02-10 14:12:18 UTC (rev 2428)
+++ trunk/windstille/src/input/input_event.hpp	2009-02-10 14:28:05 UTC (rev 2429)
@@ -1,26 +1,19 @@
-/*  $Id$
-**   __      __ __             ___        __   __ __   __
-**  /  \    /  \__| ____    __| _/_______/  |_|__|  | |  |   ____
-**  \   \/\/   /  |/    \  / __ |/  ___/\   __\  |  | |  | _/ __ \
-**   \        /|  |   |  \/ /_/ |\___ \  |  | |  |  |_|  |_\  ___/
-**    \__/\  / |__|___|  /\____ /____  > |__| |__|____/____/\___  >
-**         \/          \/      \/    \/                         \/
+/*
+**  Windstille - A Sci-Fi Action-Adventure Game
 **  Copyright (C) 2000,2005 Ingo Ruhnke <grumbel at gmx.de>
 **
-**  This program is free software; you can redistribute it and/or
-**  modify it under the terms of the GNU General Public License
-**  as published by the Free Software Foundation; either version 2
-**  of the License, or (at your option) any later version.
-**
+**  This program is free software: you can redistribute it and/or modify
+**  it under the terms of the GNU General Public License as published by
+**  the Free Software Foundation, either version 3 of the License, or
+**  (at your option) any later version.
+**  
 **  This program is distributed in the hope that it will be useful,
 **  but WITHOUT ANY WARRANTY; without even the implied warranty of
 **  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 **  GNU General Public License for more details.
-** 
+**  
 **  You should have received a copy of the GNU General Public License
-**  along with this program; if not, write to the Free Software
-**  Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA
-**  02111-1307, USA.
+**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
 #ifndef HEADER_INPUT_EVENT_HXX

Modified: trunk/windstille/src/input/input_manager.cpp
===================================================================
--- trunk/windstille/src/input/input_manager.cpp	2009-02-10 14:12:18 UTC (rev 2428)
+++ trunk/windstille/src/input/input_manager.cpp	2009-02-10 14:28:05 UTC (rev 2429)
@@ -1,26 +1,19 @@
-/*  $Id$
-**   __      __ __             ___        __   __ __   __
-**  /  \    /  \__| ____    __| _/_______/  |_|__|  | |  |   ____
-**  \   \/\/   /  |/    \  / __ |/  ___/\   __\  |  | |  | _/ __ \
-**   \        /|  |   |  \/ /_/ |\___ \  |  | |  |  |_|  |_\  ___/
-**    \__/\  / |__|___|  /\____ /____  > |__| |__|____/____/\___  >
-**         \/          \/      \/    \/                         \/
+/*
+**  Windstille - A Sci-Fi Action-Adventure Game
 **  Copyright (C) 2000,2005 Ingo Ruhnke <grumbel at gmx.de>
 **
-**  This program is free software; you can redistribute it and/or
-**  modify it under the terms of the GNU General Public License
-**  as published by the Free Software Foundation; either version 2
-**  of the License, or (at your option) any later version.
-**
+**  This program is free software: you can redistribute it and/or modify
+**  it under the terms of the GNU General Public License as published by
+**  the Free Software Foundation, either version 3 of the License, or
+**  (at your option) any later version.
+**  
 **  This program is distributed in the hope that it will be useful,
 **  but WITHOUT ANY WARRANTY; without even the implied warranty of
 **  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 **  GNU General Public License for more details.
-** 
+**  
 **  You should have received a copy of the GNU General Public License
-**  along with this program; if not, write to the Free Software
-**  Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA
-**  02111-1307, USA.
+**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
 #include <iostream>

Modified: trunk/windstille/src/input/input_manager.hpp
===================================================================
--- trunk/windstille/src/input/input_manager.hpp	2009-02-10 14:12:18 UTC (rev 2428)
+++ trunk/windstille/src/input/input_manager.hpp	2009-02-10 14:28:05 UTC (rev 2429)
@@ -1,26 +1,19 @@
-/*  $Id$
-**   __      __ __             ___        __   __ __   __
-**  /  \    /  \__| ____    __| _/_______/  |_|__|  | |  |   ____
-**  \   \/\/   /  |/    \  / __ |/  ___/\   __\  |  | |  | _/ __ \
-**   \        /|  |   |  \/ /_/ |\___ \  |  | |  |  |_|  |_\  ___/
-**    \__/\  / |__|___|  /\____ /____  > |__| |__|____/____/\___  >
-**         \/          \/      \/    \/                         \/
+/*
+**  Windstille - A Sci-Fi Action-Adventure Game
 **  Copyright (C) 2000,2005 Ingo Ruhnke <grumbel at gmx.de>
 **
-**  This program is free software; you can redistribute it and/or
-**  modify it under the terms of the GNU General Public License
-**  as published by the Free Software Foundation; either version 2
-**  of the License, or (at your option) any later version.
-**
+**  This program is free software: you can redistribute it and/or modify
+**  it under the terms of the GNU General Public License as published by
+**  the Free Software Foundation, either version 3 of the License, or
+**  (at your option) any later version.
+**  
 **  This program is distributed in the hope that it will be useful,
 **  but WITHOUT ANY WARRANTY; without even the implied warranty of
 **  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 **  GNU General Public License for more details.
-** 
+**  
 **  You should have received a copy of the GNU General Public License
-**  along with this program; if not, write to the Free Software
-**  Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA
-**  02111-1307, USA.
+**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
 #ifndef HEADER_INPUT_MANAGER_HXX

Modified: trunk/windstille/src/input/input_manager_impl.cpp
===================================================================
--- trunk/windstille/src/input/input_manager_impl.cpp	2009-02-10 14:12:18 UTC (rev 2428)
+++ trunk/windstille/src/input/input_manager_impl.cpp	2009-02-10 14:28:05 UTC (rev 2429)
@@ -1,26 +1,19 @@
-/*  $Id$
-**   __      __ __             ___        __   __ __   __
-**  /  \    /  \__| ____    __| _/_______/  |_|__|  | |  |   ____
-**  \   \/\/   /  |/    \  / __ |/  ___/\   __\  |  | |  | _/ __ \
-**   \        /|  |   |  \/ /_/ |\___ \  |  | |  |  |_|  |_\  ___/
-**    \__/\  / |__|___|  /\____ /____  > |__| |__|____/____/\___  >
-**         \/          \/      \/    \/                         \/
+/*
+**  Windstille - A Sci-Fi Action-Adventure Game
 **  Copyright (C) 2000,2005 Ingo Ruhnke <grumbel at gmx.de>
 **
-**  This program is free software; you can redistribute it and/or
-**  modify it under the terms of the GNU General Public License
-**  as published by the Free Software Foundation; either version 2
-**  of the License, or (at your option) any later version.
-**
+**  This program is free software: you can redistribute it and/or modify
+**  it under the terms of the GNU General Public License as published by
+**  the Free Software Foundation, either version 3 of the License, or
+**  (at your option) any later version.
+**  
 **  This program is distributed in the hope that it will be useful,
 **  but WITHOUT ANY WARRANTY; without even the implied warranty of
 **  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 **  GNU General Public License for more details.
-** 
+**  
 **  You should have received a copy of the GNU General Public License
-**  along with this program; if not, write to the Free Software
-**  Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA
-**  02111-1307, USA.
+**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
 #include <math.h>

Modified: trunk/windstille/src/input/input_manager_impl.hpp
===================================================================
--- trunk/windstille/src/input/input_manager_impl.hpp	2009-02-10 14:12:18 UTC (rev 2428)
+++ trunk/windstille/src/input/input_manager_impl.hpp	2009-02-10 14:28:05 UTC (rev 2429)
@@ -1,26 +1,19 @@
-/*  $Id$
-**   __      __ __             ___        __   __ __   __
-**  /  \    /  \__| ____    __| _/_______/  |_|__|  | |  |   ____
-**  \   \/\/   /  |/    \  / __ |/  ___/\   __\  |  | |  | _/ __ \
-**   \        /|  |   |  \/ /_/ |\___ \  |  | |  |  |_|  |_\  ___/
-**    \__/\  / |__|___|  /\____ /____  > |__| |__|____/____/\___  >
-**         \/          \/      \/    \/                         \/
+/*
+**  Windstille - A Sci-Fi Action-Adventure Game
 **  Copyright (C) 2000,2005 Ingo Ruhnke <grumbel at gmx.de>
 **
-**  This program is free software; you can redistribute it and/or
-**  modify it under the terms of the GNU General Public License
-**  as published by the Free Software Foundation; either version 2
-**  of the License, or (at your option) any later version.
-**
+**  This program is free software: you can redistribute it and/or modify
+**  it under the terms of the GNU General Public License as published by
+**  the Free Software Foundation, either version 3 of the License, or
+**  (at your option) any later version.
+**  
 **  This program is distributed in the hope that it will be useful,
 **  but WITHOUT ANY WARRANTY; without even the implied warranty of
 **  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 **  GNU General Public License for more details.
-** 
+**  
 **  You should have received a copy of the GNU General Public License
-**  along with this program; if not, write to the Free Software
-**  Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA
-**  02111-1307, USA.
+**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
 #ifndef HEADER_INPUT_MANAGER_IMPL_HXX

Modified: trunk/windstille/src/input/input_manager_sdl.cpp
===================================================================
--- trunk/windstille/src/input/input_manager_sdl.cpp	2009-02-10 14:12:18 UTC (rev 2428)
+++ trunk/windstille/src/input/input_manager_sdl.cpp	2009-02-10 14:28:05 UTC (rev 2429)
@@ -1,26 +1,19 @@
-/*  $Id$
-**   __      __ __             ___        __   __ __   __
-**  /  \    /  \__| ____    __| _/_______/  |_|__|  | |  |   ____
-**  \   \/\/   /  |/    \  / __ |/  ___/\   __\  |  | |  | _/ __ \
-**   \        /|  |   |  \/ /_/ |\___ \  |  | |  |  |_|  |_\  ___/
-**    \__/\  / |__|___|  /\____ /____  > |__| |__|____/____/\___  >
-**         \/          \/      \/    \/                         \/
+/*
+**  Windstille - A Sci-Fi Action-Adventure Game
 **  Copyright (C) 2005,2007 Ingo Ruhnke <grumbel at gmx.de>
 **
-**  This program is free software; you can redistribute it and/or
-**  modify it under the terms of the GNU General Public License
-**  as published by the Free Software Foundation; either version 2
-**  of the License, or (at your option) any later version.
-**
+**  This program is free software: you can redistribute it and/or modify
+**  it under the terms of the GNU General Public License as published by
+**  the Free Software Foundation, either version 3 of the License, or
+**  (at your option) any later version.
+**  
 **  This program is distributed in the hope that it will be useful,
 **  but WITHOUT ANY WARRANTY; without even the implied warranty of
 **  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 **  GNU General Public License for more details.
-** 
+**  
 **  You should have received a copy of the GNU General Public License
-**  along with this program; if not, write to the Free Software
-**  Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA
-**  02111-1307, USA.
+**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
 #include <assert.h>

Modified: trunk/windstille/src/input/input_manager_sdl.hpp
===================================================================
--- trunk/windstille/src/input/input_manager_sdl.hpp	2009-02-10 14:12:18 UTC (rev 2428)
+++ trunk/windstille/src/input/input_manager_sdl.hpp	2009-02-10 14:28:05 UTC (rev 2429)
@@ -1,26 +1,19 @@
-/*  $Id$
-**   __      __ __             ___        __   __ __   __
-**  /  \    /  \__| ____    __| _/_______/  |_|__|  | |  |   ____
-**  \   \/\/   /  |/    \  / __ |/  ___/\   __\  |  | |  | _/ __ \
-**   \        /|  |   |  \/ /_/ |\___ \  |  | |  |  |_|  |_\  ___/
-**    \__/\  / |__|___|  /\____ /____  > |__| |__|____/____/\___  >
-**         \/          \/      \/    \/                         \/
+/*
+**  Windstille - A Sci-Fi Action-Adventure Game
 **  Copyright (C) 2005,2007 Ingo Ruhnke <grumbel at gmx.de>
 **
-**  This program is free software; you can redistribute it and/or
-**  modify it under the terms of the GNU General Public License
-**  as published by the Free Software Foundation; either version 2
-**  of the License, or (at your option) any later version.
-**
+**  This program is free software: you can redistribute it and/or modify
+**  it under the terms of the GNU General Public License as published by
+**  the Free Software Foundation, either version 3 of the License, or
+**  (at your option) any later version.
+**  
 **  This program is distributed in the hope that it will be useful,
 **  but WITHOUT ANY WARRANTY; without even the implied warranty of
 **  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 **  GNU General Public License for more details.
-** 
+**  
 **  You should have received a copy of the GNU General Public License
-**  along with this program; if not, write to the Free Software
-**  Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA
-**  02111-1307, USA.
+**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
 #ifndef HEADER_INPUT_MANAGER_SDL_HPP

Modified: trunk/windstille/src/input/wiimote.cpp
===================================================================
--- trunk/windstille/src/input/wiimote.cpp	2009-02-10 14:12:18 UTC (rev 2428)
+++ trunk/windstille/src/input/wiimote.cpp	2009-02-10 14:28:05 UTC (rev 2429)
@@ -1,26 +1,19 @@
-/*  $Id$
-**   __      __ __             ___        __   __ __   __
-**  /  \    /  \__| ____    __| _/_______/  |_|__|  | |  |   ____
-**  \   \/\/   /  |/    \  / __ |/  ___/\   __\  |  | |  | _/ __ \
-**   \        /|  |   |  \/ /_/ |\___ \  |  | |  |  |_|  |_\  ___/
-**    \__/\  / |__|___|  /\____ /____  > |__| |__|____/____/\___  >
-**         \/          \/      \/    \/                         \/
+/*
+**  Windstille - A Sci-Fi Action-Adventure Game
 **  Copyright (C) 2007 Ingo Ruhnke <grumbel at gmx.de>
 **
-**  This program is free software; you can redistribute it and/or
-**  modify it under the terms of the GNU General Public License
-**  as published by the Free Software Foundation; either version 2
-**  of the License, or (at your option) any later version.
-**
+**  This program is free software: you can redistribute it and/or modify
+**  it under the terms of the GNU General Public License as published by
+**  the Free Software Foundation, either version 3 of the License, or
+**  (at your option) any later version.
+**  
 **  This program is distributed in the hope that it will be useful,
 **  but WITHOUT ANY WARRANTY; without even the implied warranty of
 **  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 **  GNU General Public License for more details.
-** 
+**  
 **  You should have received a copy of the GNU General Public License
-**  along with this program; if not, write to the Free Software
-**  Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA
-**  02111-1307, USA.
+**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
 #include <iostream>

Modified: trunk/windstille/src/input/wiimote.hpp
===================================================================
--- trunk/windstille/src/input/wiimote.hpp	2009-02-10 14:12:18 UTC (rev 2428)
+++ trunk/windstille/src/input/wiimote.hpp	2009-02-10 14:28:05 UTC (rev 2429)
@@ -1,26 +1,19 @@
-/*  $Id$
-**   __      __ __             ___        __   __ __   __
-**  /  \    /  \__| ____    __| _/_______/  |_|__|  | |  |   ____
-**  \   \/\/   /  |/    \  / __ |/  ___/\   __\  |  | |  | _/ __ \
-**   \        /|  |   |  \/ /_/ |\___ \  |  | |  |  |_|  |_\  ___/
-**    \__/\  / |__|___|  /\____ /____  > |__| |__|____/____/\___  >
-**         \/          \/      \/    \/                         \/
+/*
+**  Windstille - A Sci-Fi Action-Adventure Game
 **  Copyright (C) 2007 Ingo Ruhnke <grumbel at gmx.de>
 **
-**  This program is free software; you can redistribute it and/or
-**  modify it under the terms of the GNU General Public License
-**  as published by the Free Software Foundation; either version 2
-**  of the License, or (at your option) any later version.
-**
+**  This program is free software: you can redistribute it and/or modify
+**  it under the terms of the GNU General Public License as published by
+**  the Free Software Foundation, either version 3 of the License, or
+**  (at your option) any later version.
+**  
 **  This program is distributed in the hope that it will be useful,
 **  but WITHOUT ANY WARRANTY; without even the implied warranty of
 **  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 **  GNU General Public License for more details.
-** 
+**  
 **  You should have received a copy of the GNU General Public License
-**  along with this program; if not, write to the Free Software
-**  Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA
-**  02111-1307, USA.
+**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
 #ifndef HEADER_WIIMOTE_HPP

Modified: trunk/windstille/src/inventory.cpp
===================================================================
--- trunk/windstille/src/inventory.cpp	2009-02-10 14:12:18 UTC (rev 2428)
+++ trunk/windstille/src/inventory.cpp	2009-02-10 14:28:05 UTC (rev 2429)
@@ -1,26 +1,19 @@
-/*  $Id$
-**   __      __ __             ___        __   __ __   __
-**  /  \    /  \__| ____    __| _/_______/  |_|__|  | |  |   ____
-**  \   \/\/   /  |/    \  / __ |/  ___/\   __\  |  | |  | _/ __ \
-**   \        /|  |   |  \/ /_/ |\___ \  |  | |  |  |_|  |_\  ___/
-**    \__/\  / |__|___|  /\____ /____  > |__| |__|____/____/\___  >
-**         \/          \/      \/    \/                         \/
+/*
+**  Windstille - A Sci-Fi Action-Adventure Game
 **  Copyright (C) 2005 Ingo Ruhnke <grumbel at gmx.de>
 **
-**  This program is free software; you can redistribute it and/or
-**  modify it under the terms of the GNU General Public License
-**  as published by the Free Software Foundation; either version 2
-**  of the License, or (at your option) any later version.
-**
+**  This program is free software: you can redistribute it and/or modify
+**  it under the terms of the GNU General Public License as published by
+**  the Free Software Foundation, either version 3 of the License, or
+**  (at your option) any later version.
+**  
 **  This program is distributed in the hope that it will be useful,
 **  but WITHOUT ANY WARRANTY; without even the implied warranty of
 **  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 **  GNU General Public License for more details.
-** 
+**  
 **  You should have received a copy of the GNU General Public License
-**  along with this program; if not, write to the Free Software
-**  Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA
-**  02111-1307, USA.
+**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
 #include <iostream>

Modified: trunk/windstille/src/inventory.hpp
===================================================================
--- trunk/windstille/src/inventory.hpp	2009-02-10 14:12:18 UTC (rev 2428)
+++ trunk/windstille/src/inventory.hpp	2009-02-10 14:28:05 UTC (rev 2429)
@@ -1,26 +1,19 @@
-/*  $Id$
-**   __      __ __             ___        __   __ __   __
-**  /  \    /  \__| ____    __| _/_______/  |_|__|  | |  |   ____
-**  \   \/\/   /  |/    \  / __ |/  ___/\   __\  |  | |  | _/ __ \
-**   \        /|  |   |  \/ /_/ |\___ \  |  | |  |  |_|  |_\  ___/
-**    \__/\  / |__|___|  /\____ /____  > |__| |__|____/____/\___  >
-**         \/          \/      \/    \/                         \/
+/*
+**  Windstille - A Sci-Fi Action-Adventure Game
 **  Copyright (C) 2005 Ingo Ruhnke <grumbel at gmx.de>
 **
-**  This program is free software; you can redistribute it and/or
-**  modify it under the terms of the GNU General Public License
-**  as published by the Free Software Foundation; either version 2
-**  of the License, or (at your option) any later version.
-**
+**  This program is free software: you can redistribute it and/or modify
+**  it under the terms of the GNU General Public License as published by
+**  the Free Software Foundation, either version 3 of the License, or
+**  (at your option) any later version.
+**  
 **  This program is distributed in the hope that it will be useful,
 **  but WITHOUT ANY WARRANTY; without even the implied warranty of
 **  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 **  GNU General Public License for more details.
-** 
+**  
 **  You should have received a copy of the GNU General Public License
-**  along with this program; if not, write to the Free Software
-**  Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA
-**  02111-1307, USA.
+**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
 #ifndef HEADER_WINDSTILLE_INVENTORY_HPP

Modified: trunk/windstille/src/laser_pointer.cpp
===================================================================
--- trunk/windstille/src/laser_pointer.cpp	2009-02-10 14:12:18 UTC (rev 2428)
+++ trunk/windstille/src/laser_pointer.cpp	2009-02-10 14:28:05 UTC (rev 2429)
@@ -1,26 +1,19 @@
-/*  $Id$
-**   __      __ __             ___        __   __ __   __
-**  /  \    /  \__| ____    __| _/_______/  |_|__|  | |  |   ____
-**  \   \/\/   /  |/    \  / __ |/  ___/\   __\  |  | |  | _/ __ \
-**   \        /|  |   |  \/ /_/ |\___ \  |  | |  |  |_|  |_\  ___/
-**    \__/\  / |__|___|  /\____ /____  > |__| |__|____/____/\___  >
-**         \/          \/      \/    \/                         \/
+/*
+**  Windstille - A Sci-Fi Action-Adventure Game
 **  Copyright (C) 2005 Ingo Ruhnke <grumbel at gmx.de>
 **
-**  This program is free software; you can redistribute it and/or
-**  modify it under the terms of the GNU General Public License
-**  as published by the Free Software Foundation; either version 2
-**  of the License, or (at your option) any later version.
-**
+**  This program is free software: you can redistribute it and/or modify
+**  it under the terms of the GNU General Public License as published by
+**  the Free Software Foundation, either version 3 of the License, or
+**  (at your option) any later version.
+**  
 **  This program is distributed in the hope that it will be useful,
 **  but WITHOUT ANY WARRANTY; without even the implied warranty of
 **  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 **  GNU General Public License for more details.
-** 
+**  
 **  You should have received a copy of the GNU General Public License
-**  along with this program; if not, write to the Free Software
-**  Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA
-**  02111-1307, USA.
+**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 #include <config.h>
 

Modified: trunk/windstille/src/laser_pointer.hpp
===================================================================
--- trunk/windstille/src/laser_pointer.hpp	2009-02-10 14:12:18 UTC (rev 2428)
+++ trunk/windstille/src/laser_pointer.hpp	2009-02-10 14:28:05 UTC (rev 2429)
@@ -1,26 +1,19 @@
-/*  $Id$
-**   __      __ __             ___        __   __ __   __
-**  /  \    /  \__| ____    __| _/_______/  |_|__|  | |  |   ____
-**  \   \/\/   /  |/    \  / __ |/  ___/\   __\  |  | |  | _/ __ \
-**   \        /|  |   |  \/ /_/ |\___ \  |  | |  |  |_|  |_\  ___/
-**    \__/\  / |__|___|  /\____ /____  > |__| |__|____/____/\___  >
-**         \/          \/      \/    \/                         \/
+/*
+**  Windstille - A Sci-Fi Action-Adventure Game
 **  Copyright (C) 2005 Ingo Ruhnke <grumbel at gmx.de>
 **
-**  This program is free software; you can redistribute it and/or
-**  modify it under the terms of the GNU General Public License
-**  as published by the Free Software Foundation; either version 2
-**  of the License, or (at your option) any later version.
-**
+**  This program is free software: you can redistribute it and/or modify
+**  it under the terms of the GNU General Public License as published by
+**  the Free Software Foundation, either version 3 of the License, or
+**  (at your option) any later version.
+**  
 **  This program is distributed in the hope that it will be useful,
 **  but WITHOUT ANY WARRANTY; without even the implied warranty of
 **  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 **  GNU General Public License for more details.
-** 
+**  
 **  You should have received a copy of the GNU General Public License
-**  along with this program; if not, write to the Free Software
-**  Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA
-**  02111-1307, USA.
+**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
 #ifndef HEADER_WINDSTILLE_LASER_POINTER_HPP

Modified: trunk/windstille/src/liquid.cpp
===================================================================
--- trunk/windstille/src/liquid.cpp	2009-02-10 14:12:18 UTC (rev 2428)
+++ trunk/windstille/src/liquid.cpp	2009-02-10 14:28:05 UTC (rev 2429)
@@ -1,26 +1,19 @@
-/*  $Id$
-**   __      __ __             ___        __   __ __   __
-**  /  \    /  \__| ____    __| _/_______/  |_|__|  | |  |   ____
-**  \   \/\/   /  |/    \  / __ |/  ___/\   __\  |  | |  | _/ __ \
-**   \        /|  |   |  \/ /_/ |\___ \  |  | |  |  |_|  |_\  ___/
-**    \__/\  / |__|___|  /\____ /____  > |__| |__|____/____/\___  >
-**         \/          \/      \/    \/                         \/
+/*
+**  Windstille - A Sci-Fi Action-Adventure Game
 **  Copyright (C) 2005 Ingo Ruhnke <grumbel at gmx.de>
 **
-**  This program is free software; you can redistribute it and/or
-**  modify it under the terms of the GNU General Public License
-**  as published by the Free Software Foundation; either version 2
-**  of the License, or (at your option) any later version.
-**
+**  This program is free software: you can redistribute it and/or modify
+**  it under the terms of the GNU General Public License as published by
+**  the Free Software Foundation, either version 3 of the License, or
+**  (at your option) any later version.
+**  
 **  This program is distributed in the hope that it will be useful,
 **  but WITHOUT ANY WARRANTY; without even the implied warranty of
 **  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 **  GNU General Public License for more details.
-** 
+**  
 **  You should have received a copy of the GNU General Public License
-**  along with this program; if not, write to the Free Software
-**  Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA
-**  02111-1307, USA.
+**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
 #include "display/vertex_array_drawing_request.hpp"

Modified: trunk/windstille/src/liquid.hpp
===================================================================
--- trunk/windstille/src/liquid.hpp	2009-02-10 14:12:18 UTC (rev 2428)
+++ trunk/windstille/src/liquid.hpp	2009-02-10 14:28:05 UTC (rev 2429)
@@ -1,26 +1,19 @@
-/*  $Id$
-**   __      __ __             ___        __   __ __   __
-**  /  \    /  \__| ____    __| _/_______/  |_|__|  | |  |   ____
-**  \   \/\/   /  |/    \  / __ |/  ___/\   __\  |  | |  | _/ __ \
-**   \        /|  |   |  \/ /_/ |\___ \  |  | |  |  |_|  |_\  ___/
-**    \__/\  / |__|___|  /\____ /____  > |__| |__|____/____/\___  >
-**         \/          \/      \/    \/                         \/
+/*
+**  Windstille - A Sci-Fi Action-Adventure Game
 **  Copyright (C) 2005 Ingo Ruhnke <grumbel at gmx.de>
 **
-**  This program is free software; you can redistribute it and/or
-**  modify it under the terms of the GNU General Public License
-**  as published by the Free Software Foundation; either version 2
-**  of the License, or (at your option) any later version.
-**
+**  This program is free software: you can redistribute it and/or modify
+**  it under the terms of the GNU General Public License as published by
+**  the Free Software Foundation, either version 3 of the License, or
+**  (at your option) any later version.
+**  
 **  This program is distributed in the hope that it will be useful,
 **  but WITHOUT ANY WARRANTY; without even the implied warranty of
 **  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 **  GNU General Public License for more details.
-** 
+**  
 **  You should have received a copy of the GNU General Public License
-**  along with this program; if not, write to the Free Software
-**  Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA
-**  02111-1307, USA.
+**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
 #ifndef HEADER_WINDSTILLE_LIQUID_HPP

Modified: trunk/windstille/src/lisp/lexer.cpp
===================================================================
--- trunk/windstille/src/lisp/lexer.cpp	2009-02-10 14:12:18 UTC (rev 2428)
+++ trunk/windstille/src/lisp/lexer.cpp	2009-02-10 14:28:05 UTC (rev 2429)
@@ -1,5 +1,5 @@
-//  $Id: lexer.cpp 2379 2005-05-01 19:02:16Z matzebraun $
 //
+//
 //  Copyright (C) 2004 Matthias Braun <matze at braunis.de>
 //  code in this file based on lispreader from Mark Probst
 //

Modified: trunk/windstille/src/lisp/lexer.hpp
===================================================================
--- trunk/windstille/src/lisp/lexer.hpp	2009-02-10 14:12:18 UTC (rev 2428)
+++ trunk/windstille/src/lisp/lexer.hpp	2009-02-10 14:28:05 UTC (rev 2429)
@@ -1,5 +1,5 @@
-//  $Id: lexer.h 2379 2005-05-01 19:02:16Z matzebraun $
 //
+//
 //  Copyright (C) 2004 Matthias Braun <matze at braunis.de>
 //  code in this file based on lispreader from Mark Probst
 //

Modified: trunk/windstille/src/lisp/lisp.cpp
===================================================================
--- trunk/windstille/src/lisp/lisp.cpp	2009-02-10 14:12:18 UTC (rev 2428)
+++ trunk/windstille/src/lisp/lisp.cpp	2009-02-10 14:28:05 UTC (rev 2429)
@@ -1,5 +1,5 @@
-//  $Id: lisp.cpp 2379 2005-05-01 19:02:16Z matzebraun $
 //
+//
 //  TuxKart - a fun racing game with go-kart
 //  Copyright (C) 2004 Matthias Braun <matze at braunis.de>
 //  code in this file based on lispreader from Mark Probst

Modified: trunk/windstille/src/lisp/lisp.hpp
===================================================================
--- trunk/windstille/src/lisp/lisp.hpp	2009-02-10 14:12:18 UTC (rev 2428)
+++ trunk/windstille/src/lisp/lisp.hpp	2009-02-10 14:28:05 UTC (rev 2429)
@@ -1,5 +1,5 @@
-//  $Id: lisp.h 2419 2005-05-06 19:08:24Z matzebraun $
 //
+//
 //  Copyright (C) 2004 Matthias Braun <matze at braunis.de>
 //  code in this file based on lispreader from Mark Probst
 //

Modified: trunk/windstille/src/lisp/parser.cpp
===================================================================
--- trunk/windstille/src/lisp/parser.cpp	2009-02-10 14:12:18 UTC (rev 2428)
+++ trunk/windstille/src/lisp/parser.cpp	2009-02-10 14:28:05 UTC (rev 2429)
@@ -1,5 +1,5 @@
-//  $Id: parser.cpp 2575 2005-06-07 15:59:27Z matzebraun $
 //
+//
 //  TuxKart - a fun racing game with go-kart
 //  Copyright (C) 2004 Matthias Braun <matze at braunis.de>
 //  code in this file based on lispreader from Mark Probst

Modified: trunk/windstille/src/lisp/parser.hpp
===================================================================
--- trunk/windstille/src/lisp/parser.hpp	2009-02-10 14:12:18 UTC (rev 2428)
+++ trunk/windstille/src/lisp/parser.hpp	2009-02-10 14:28:05 UTC (rev 2429)
@@ -1,5 +1,5 @@
-//  $Id: parser.h 2379 2005-05-01 19:02:16Z matzebraun $
 //
+//
 //  TuxKart - a fun racing game with go-kart
 //  Copyright (C) 2004 Matthias Braun <matze at braunis.de>
 //

Modified: trunk/windstille/src/lisp/writer.cpp
===================================================================
--- trunk/windstille/src/lisp/writer.cpp	2009-02-10 14:12:18 UTC (rev 2428)
+++ trunk/windstille/src/lisp/writer.cpp	2009-02-10 14:28:05 UTC (rev 2429)
@@ -1,5 +1,5 @@
-//  $Id: writer.cpp 2575 2005-06-07 15:59:27Z matzebraun $
 //
+//
 //  SuperTux -  A Jump'n Run
 //  Copyright (C) 2004 Matthias Braun <matze at braunis.de
 //

Modified: trunk/windstille/src/lisp/writer.hpp
===================================================================
--- trunk/windstille/src/lisp/writer.hpp	2009-02-10 14:12:18 UTC (rev 2428)
+++ trunk/windstille/src/lisp/writer.hpp	2009-02-10 14:28:05 UTC (rev 2429)
@@ -1,5 +1,5 @@
-//  $Id: writer.h 2575 2005-06-07 15:59:27Z matzebraun $
 //
+//
 //  SuperTux -  A Jump'n Run
 //  Copyright (C) 2004 Matthias Braun <matze at braunis.de
 //

Modified: trunk/windstille/src/math/line.cpp
===================================================================
--- trunk/windstille/src/math/line.cpp	2009-02-10 14:12:18 UTC (rev 2428)
+++ trunk/windstille/src/math/line.cpp	2009-02-10 14:28:05 UTC (rev 2429)
@@ -1,26 +1,19 @@
-/*  $Id$
-**   __      __ __             ___        __   __ __   __
-**  /  \    /  \__| ____    __| _/_______/  |_|__|  | |  |   ____
-**  \   \/\/   /  |/    \  / __ |/  ___/\   __\  |  | |  | _/ __ \
-**   \        /|  |   |  \/ /_/ |\___ \  |  | |  |  |_|  |_\  ___/
-**    \__/\  / |__|___|  /\____ /____  > |__| |__|____/____/\___  >
-**         \/          \/      \/    \/                         \/
+/*
+**  Windstille - A Sci-Fi Action-Adventure Game
 **  Copyright (C) 2007 Ingo Ruhnke <grumbel at gmx.de>
 **
-**  This program is free software; you can redistribute it and/or
-**  modify it under the terms of the GNU General Public License
-**  as published by the Free Software Foundation; either version 2
-**  of the License, or (at your option) any later version.
-**
+**  This program is free software: you can redistribute it and/or modify
+**  it under the terms of the GNU General Public License as published by
+**  the Free Software Foundation, either version 3 of the License, or
+**  (at your option) any later version.
+**  
 **  This program is distributed in the hope that it will be useful,
 **  but WITHOUT ANY WARRANTY; without even the implied warranty of
 **  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 **  GNU General Public License for more details.
-** 
+**  
 **  You should have received a copy of the GNU General Public License
-**  along with this program; if not, write to the Free Software
-**  Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA
-**  02111-1307, USA.
+**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
 #include <iostream>

Modified: trunk/windstille/src/math/line.hpp
===================================================================
--- trunk/windstille/src/math/line.hpp	2009-02-10 14:12:18 UTC (rev 2428)
+++ trunk/windstille/src/math/line.hpp	2009-02-10 14:28:05 UTC (rev 2429)
@@ -1,26 +1,19 @@
-/*  $Id$
-**   __      __ __             ___        __   __ __   __
-**  /  \    /  \__| ____    __| _/_______/  |_|__|  | |  |   ____
-**  \   \/\/   /  |/    \  / __ |/  ___/\   __\  |  | |  | _/ __ \
-**   \        /|  |   |  \/ /_/ |\___ \  |  | |  |  |_|  |_\  ___/
-**    \__/\  / |__|___|  /\____ /____  > |__| |__|____/____/\___  >
-**         \/          \/      \/    \/                         \/
+/*
+**  Windstille - A Sci-Fi Action-Adventure Game
 **  Copyright (C) 2005 Ingo Ruhnke <grumbel at gmx.de>
 **
-**  This program is free software; you can redistribute it and/or
-**  modify it under the terms of the GNU General Public License
-**  as published by the Free Software Foundation; either version 2
-**  of the License, or (at your option) any later version.
-**
+**  This program is free software: you can redistribute it and/or modify
+**  it under the terms of the GNU General Public License as published by
+**  the Free Software Foundation, either version 3 of the License, or
+**  (at your option) any later version.
+**  
 **  This program is distributed in the hope that it will be useful,
 **  but WITHOUT ANY WARRANTY; without even the implied warranty of
 **  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 **  GNU General Public License for more details.
-** 
+**  
 **  You should have received a copy of the GNU General Public License
-**  along with this program; if not, write to the Free Software
-**  Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA
-**  02111-1307, USA.
+**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
 #ifndef HEADER_LINE_HPP

Modified: trunk/windstille/src/math/quaternion.cpp
===================================================================
--- trunk/windstille/src/math/quaternion.cpp	2009-02-10 14:12:18 UTC (rev 2428)
+++ trunk/windstille/src/math/quaternion.cpp	2009-02-10 14:28:05 UTC (rev 2429)
@@ -1,4 +1,4 @@
-//  $Id$
+//
 // 
 //  Windstille - A Jump'n Shoot Game
 //  Copyright (C) 2005 Matthias Braun <matze at braunis.de>

Modified: trunk/windstille/src/math/quaternion.hpp
===================================================================
--- trunk/windstille/src/math/quaternion.hpp	2009-02-10 14:12:18 UTC (rev 2428)
+++ trunk/windstille/src/math/quaternion.hpp	2009-02-10 14:28:05 UTC (rev 2429)
@@ -1,4 +1,4 @@
-//  $Id$
+//
 // 
 //  Windstille - A Jump'n Shoot Game
 //  Copyright (C) 2005 Matthias Braun <matze at braunis.de>

Modified: trunk/windstille/src/math/vector.cpp
===================================================================
--- trunk/windstille/src/math/vector.cpp	2009-02-10 14:12:18 UTC (rev 2428)
+++ trunk/windstille/src/math/vector.cpp	2009-02-10 14:28:05 UTC (rev 2429)
@@ -1,5 +1,5 @@
-//  $Id: vector.cpp 2642 2005-06-26 13:38:53Z matzebraun $
 //
+//
 //  SuperTux -  A Jump'n Run
 //  Copyright (C) 2004 Matthias Braun <matze at braunis.de
 //

Modified: trunk/windstille/src/math/vector.hpp
===================================================================
--- trunk/windstille/src/math/vector.hpp	2009-02-10 14:12:18 UTC (rev 2428)
+++ trunk/windstille/src/math/vector.hpp	2009-02-10 14:28:05 UTC (rev 2429)
@@ -1,5 +1,5 @@
-//  $Id: vector.hpp 2642 2005-06-26 13:38:53Z matzebraun $
 //
+//
 //  SuperTux -  A Jump'n Run
 //  Copyright (C) 2004 Matthias Braun <matze at braunis.de>
 //

Modified: trunk/windstille/src/math/vector3.hpp
===================================================================
--- trunk/windstille/src/math/vector3.hpp	2009-02-10 14:12:18 UTC (rev 2428)
+++ trunk/windstille/src/math/vector3.hpp	2009-02-10 14:28:05 UTC (rev 2429)
@@ -1,4 +1,4 @@
-//  $Id$
+//
 // 
 //  Windstille - A Jump'n Shoot Game
 //  Copyright (C) 2005 Matthias Braun <matze at braunis.de>

Modified: trunk/windstille/src/math.hpp
===================================================================
--- trunk/windstille/src/math.hpp	2009-02-10 14:12:18 UTC (rev 2428)
+++ trunk/windstille/src/math.hpp	2009-02-10 14:28:05 UTC (rev 2429)
@@ -1,26 +1,19 @@
-/*  $Id$
-**   __      __ __             ___        __   __ __   __
-**  /  \    /  \__| ____    __| _/_______/  |_|__|  | |  |   ____
-**  \   \/\/   /  |/    \  / __ |/  ___/\   __\  |  | |  | _/ __ \
-**   \        /|  |   |  \/ /_/ |\___ \  |  | |  |  |_|  |_\  ___/
-**    \__/\  / |__|___|  /\____ /____  > |__| |__|____/____/\___  >
-**         \/          \/      \/    \/                         \/
+/*
+**  Windstille - A Sci-Fi Action-Adventure Game
 **  Copyright (C) 2000,2005 Ingo Ruhnke <grumbel at gmx.de>
 **
-**  This program is free software; you can redistribute it and/or
-**  modify it under the terms of the GNU General Public License
-**  as published by the Free Software Foundation; either version 2
-**  of the License, or (at your option) any later version.
-**
+**  This program is free software: you can redistribute it and/or modify
+**  it under the terms of the GNU General Public License as published by
+**  the Free Software Foundation, either version 3 of the License, or
+**  (at your option) any later version.
+**  
 **  This program is distributed in the hope that it will be useful,
 **  but WITHOUT ANY WARRANTY; without even the implied warranty of
 **  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 **  GNU General Public License for more details.
-** 
+**  
 **  You should have received a copy of the GNU General Public License
-**  along with this program; if not, write to the Free Software
-**  Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA
-**  02111-1307, USA.
+**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
 #ifndef HEADER_MATH_HXX

Modified: trunk/windstille/src/menu_manager.cpp
===================================================================
--- trunk/windstille/src/menu_manager.cpp	2009-02-10 14:12:18 UTC (rev 2428)
+++ trunk/windstille/src/menu_manager.cpp	2009-02-10 14:28:05 UTC (rev 2429)
@@ -1,26 +1,19 @@
-/*  $Id$
-**   __      __ __             ___        __   __ __   __
-**  /  \    /  \__| ____    __| _/_______/  |_|__|  | |  |   ____
-**  \   \/\/   /  |/    \  / __ |/  ___/\   __\  |  | |  | _/ __ \
-**   \        /|  |   |  \/ /_/ |\___ \  |  | |  |  |_|  |_\  ___/
-**    \__/\  / |__|___|  /\____ /____  > |__| |__|____/____/\___  >
-**         \/          \/      \/    \/                         \/
+/*
+**  Windstille - A Sci-Fi Action-Adventure Game
 **  Copyright (C) 2005 Ingo Ruhnke <grumbel at gmx.de>
 **
-**  This program is free software; you can redistribute it and/or
-**  modify it under the terms of the GNU General Public License
-**  as published by the Free Software Foundation; either version 2
-**  of the License, or (at your option) any later version.
-**
+**  This program is free software: you can redistribute it and/or modify
+**  it under the terms of the GNU General Public License as published by
+**  the Free Software Foundation, either version 3 of the License, or
+**  (at your option) any later version.
+**  
 **  This program is distributed in the hope that it will be useful,
 **  but WITHOUT ANY WARRANTY; without even the implied warranty of
 **  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 **  GNU General Public License for more details.
-** 
+**  
 **  You should have received a copy of the GNU General Public License
-**  along with this program; if not, write to the Free Software
-**  Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA
-**  02111-1307, USA.
+**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
 #include <boost/bind.hpp>

Modified: trunk/windstille/src/menu_manager.hpp
===================================================================
--- trunk/windstille/src/menu_manager.hpp	2009-02-10 14:12:18 UTC (rev 2428)
+++ trunk/windstille/src/menu_manager.hpp	2009-02-10 14:28:05 UTC (rev 2429)
@@ -1,26 +1,19 @@
-/*  $Id$
-**   __      __ __             ___        __   __ __   __
-**  /  \    /  \__| ____    __| _/_______/  |_|__|  | |  |   ____
-**  \   \/\/   /  |/    \  / __ |/  ___/\   __\  |  | |  | _/ __ \
-**   \        /|  |   |  \/ /_/ |\___ \  |  | |  |  |_|  |_\  ___/
-**    \__/\  / |__|___|  /\____ /____  > |__| |__|____/____/\___  >
-**         \/          \/      \/    \/                         \/
+/*
+**  Windstille - A Sci-Fi Action-Adventure Game
 **  Copyright (C) 2005 Ingo Ruhnke <grumbel at gmx.de>
 **
-**  This program is free software; you can redistribute it and/or
-**  modify it under the terms of the GNU General Public License
-**  as published by the Free Software Foundation; either version 2
-**  of the License, or (at your option) any later version.
-**
+**  This program is free software: you can redistribute it and/or modify
+**  it under the terms of the GNU General Public License as published by
+**  the Free Software Foundation, either version 3 of the License, or
+**  (at your option) any later version.
+**  
 **  This program is distributed in the hope that it will be useful,
 **  but WITHOUT ANY WARRANTY; without even the implied warranty of
 **  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 **  GNU General Public License for more details.
-** 
+**  
 **  You should have received a copy of the GNU General Public License
-**  along with this program; if not, write to the Free Software
-**  Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA
-**  02111-1307, USA.
+**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
 #ifndef HEADER_WINDSTILLE_MENU_MANAGER_HPP

Modified: trunk/windstille/src/navigation/navigation_graph.cpp
===================================================================
--- trunk/windstille/src/navigation/navigation_graph.cpp	2009-02-10 14:12:18 UTC (rev 2428)
+++ trunk/windstille/src/navigation/navigation_graph.cpp	2009-02-10 14:28:05 UTC (rev 2429)
@@ -1,26 +1,19 @@
-/*  $Id$
-**   __      __ __             ___        __   __ __   __
-**  /  \    /  \__| ____    __| _/_______/  |_|__|  | |  |   ____
-**  \   \/\/   /  |/    \  / __ |/  ___/\   __\  |  | |  | _/ __ \
-**   \        /|  |   |  \/ /_/ |\___ \  |  | |  |  |_|  |_\  ___/
-**    \__/\  / |__|___|  /\____ /____  > |__| |__|____/____/\___  >
-**         \/          \/      \/    \/                         \/
+/*
+**  Windstille - A Sci-Fi Action-Adventure Game
 **  Copyright (C) 2007 Ingo Ruhnke <grumbel at gmx.de>
 **
-**  This program is free software; you can redistribute it and/or
-**  modify it under the terms of the GNU General Public License
-**  as published by the Free Software Foundation; either version 2
-**  of the License, or (at your option) any later version.
-**
+**  This program is free software: you can redistribute it and/or modify
+**  it under the terms of the GNU General Public License as published by
+**  the Free Software Foundation, either version 3 of the License, or
+**  (at your option) any later version.
+**  
 **  This program is distributed in the hope that it will be useful,
 **  but WITHOUT ANY WARRANTY; without even the implied warranty of
 **  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 **  GNU General Public License for more details.
-** 
+**  
 **  You should have received a copy of the GNU General Public License
-**  along with this program; if not, write to the Free Software
-**  Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA
-**  02111-1307, USA.
+**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
 #include <iostream>

Modified: trunk/windstille/src/navigation/navigation_graph.hpp
===================================================================
--- trunk/windstille/src/navigation/navigation_graph.hpp	2009-02-10 14:12:18 UTC (rev 2428)
+++ trunk/windstille/src/navigation/navigation_graph.hpp	2009-02-10 14:28:05 UTC (rev 2429)
@@ -1,26 +1,19 @@
-/*  $Id$
-**   __      __ __             ___        __   __ __   __
-**  /  \    /  \__| ____    __| _/_______/  |_|__|  | |  |   ____
-**  \   \/\/   /  |/    \  / __ |/  ___/\   __\  |  | |  | _/ __ \
-**   \        /|  |   |  \/ /_/ |\___ \  |  | |  |  |_|  |_\  ___/
-**    \__/\  / |__|___|  /\____ /____  > |__| |__|____/____/\___  >
-**         \/          \/      \/    \/                         \/
+/*
+**  Windstille - A Sci-Fi Action-Adventure Game
 **  Copyright (C) 2007 Ingo Ruhnke <grumbel at gmx.de>
 **
-**  This program is free software; you can redistribute it and/or
-**  modify it under the terms of the GNU General Public License
-**  as published by the Free Software Foundation; either version 2
-**  of the License, or (at your option) any later version.
-**
+**  This program is free software: you can redistribute it and/or modify
+**  it under the terms of the GNU General Public License as published by
+**  the Free Software Foundation, either version 3 of the License, or
+**  (at your option) any later version.
+**  
 **  This program is distributed in the hope that it will be useful,
 **  but WITHOUT ANY WARRANTY; without even the implied warranty of
 **  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 **  GNU General Public License for more details.
-** 
+**  
 **  You should have received a copy of the GNU General Public License
-**  along with this program; if not, write to the Free Software
-**  Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA
-**  02111-1307, USA.
+**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
 #ifndef HEADER_NAVIGATION_GRAPH_HPP

Modified: trunk/windstille/src/navigation/node.cpp
===================================================================
--- trunk/windstille/src/navigation/node.cpp	2009-02-10 14:12:18 UTC (rev 2428)
+++ trunk/windstille/src/navigation/node.cpp	2009-02-10 14:28:05 UTC (rev 2429)
@@ -1,26 +1,19 @@
-/*  $Id$
-**   __      __ __             ___        __   __ __   __
-**  /  \    /  \__| ____    __| _/_______/  |_|__|  | |  |   ____
-**  \   \/\/   /  |/    \  / __ |/  ___/\   __\  |  | |  | _/ __ \
-**   \        /|  |   |  \/ /_/ |\___ \  |  | |  |  |_|  |_\  ___/
-**    \__/\  / |__|___|  /\____ /____  > |__| |__|____/____/\___  >
-**         \/          \/      \/    \/                         \/
+/*
+**  Windstille - A Sci-Fi Action-Adventure Game
 **  Copyright (C) 2007 Ingo Ruhnke <grumbel at gmx.de>
 **
-**  This program is free software; you can redistribute it and/or
-**  modify it under the terms of the GNU General Public License
-**  as published by the Free Software Foundation; either version 2
-**  of the License, or (at your option) any later version.
-**
+**  This program is free software: you can redistribute it and/or modify
+**  it under the terms of the GNU General Public License as published by
+**  the Free Software Foundation, either version 3 of the License, or
+**  (at your option) any later version.
+**  
 **  This program is distributed in the hope that it will be useful,
 **  but WITHOUT ANY WARRANTY; without even the implied warranty of
 **  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 **  GNU General Public License for more details.
-** 
+**  
 **  You should have received a copy of the GNU General Public License
-**  along with this program; if not, write to the Free Software
-**  Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA
-**  02111-1307, USA.
+**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
 #include <algorithm>

Modified: trunk/windstille/src/navigation/node.hpp
===================================================================
--- trunk/windstille/src/navigation/node.hpp	2009-02-10 14:12:18 UTC (rev 2428)
+++ trunk/windstille/src/navigation/node.hpp	2009-02-10 14:28:05 UTC (rev 2429)
@@ -1,26 +1,19 @@
-/*  $Id$
-**   __      __ __             ___        __   __ __   __
-**  /  \    /  \__| ____    __| _/_______/  |_|__|  | |  |   ____
-**  \   \/\/   /  |/    \  / __ |/  ___/\   __\  |  | |  | _/ __ \
-**   \        /|  |   |  \/ /_/ |\___ \  |  | |  |  |_|  |_\  ___/
-**    \__/\  / |__|___|  /\____ /____  > |__| |__|____/____/\___  >
-**         \/          \/      \/    \/                         \/
+/*
+**  Windstille - A Sci-Fi Action-Adventure Game
 **  Copyright (C) 2005 Ingo Ruhnke <grumbel at gmx.de>
 **
-**  This program is free software; you can redistribute it and/or
-**  modify it under the terms of the GNU General Public License
-**  as published by the Free Software Foundation; either version 2
-**  of the License, or (at your option) any later version.
-**
+**  This program is free software: you can redistribute it and/or modify
+**  it under the terms of the GNU General Public License as published by
+**  the Free Software Foundation, either version 3 of the License, or
+**  (at your option) any later version.
+**  
 **  This program is distributed in the hope that it will be useful,
 **  but WITHOUT ANY WARRANTY; without even the implied warranty of
 **  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 **  GNU General Public License for more details.
-** 
+**  
 **  You should have received a copy of the GNU General Public License
-**  along with this program; if not, write to the Free Software
-**  Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA
-**  02111-1307, USA.
+**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
 #ifndef HEADER_NAVIGATION_NODE_HPP

Modified: trunk/windstille/src/navigation/properties.cpp
===================================================================
--- trunk/windstille/src/navigation/properties.cpp	2009-02-10 14:12:18 UTC (rev 2428)
+++ trunk/windstille/src/navigation/properties.cpp	2009-02-10 14:28:05 UTC (rev 2429)
@@ -1,26 +1,19 @@
-/*  $Id$
-**   __      __ __             ___        __   __ __   __
-**  /  \    /  \__| ____    __| _/_______/  |_|__|  | |  |   ____
-**  \   \/\/   /  |/    \  / __ |/  ___/\   __\  |  | |  | _/ __ \
-**   \        /|  |   |  \/ /_/ |\___ \  |  | |  |  |_|  |_\  ___/
-**    \__/\  / |__|___|  /\____ /____  > |__| |__|____/____/\___  >
-**         \/          \/      \/    \/                         \/
+/*
+**  Windstille - A Sci-Fi Action-Adventure Game
 **  Copyright (C) 2007 Ingo Ruhnke <grumbel at gmx.de>
 **
-**  This program is free software; you can redistribute it and/or
-**  modify it under the terms of the GNU General Public License
-**  as published by the Free Software Foundation; either version 2
-**  of the License, or (at your option) any later version.
-**
+**  This program is free software: you can redistribute it and/or modify
+**  it under the terms of the GNU General Public License as published by
+**  the Free Software Foundation, either version 3 of the License, or
+**  (at your option) any later version.
+**  
 **  This program is distributed in the hope that it will be useful,
 **  but WITHOUT ANY WARRANTY; without even the implied warranty of
 **  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 **  GNU General Public License for more details.
-** 
+**  
 **  You should have received a copy of the GNU General Public License
-**  along with this program; if not, write to the Free Software
-**  Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA
-**  02111-1307, USA.
+**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
 #include "properties.hpp"

Modified: trunk/windstille/src/navigation/properties.hpp
===================================================================
--- trunk/windstille/src/navigation/properties.hpp	2009-02-10 14:12:18 UTC (rev 2428)
+++ trunk/windstille/src/navigation/properties.hpp	2009-02-10 14:28:05 UTC (rev 2429)
@@ -1,26 +1,19 @@
-/*  $Id$
-**   __      __ __             ___        __   __ __   __
-**  /  \    /  \__| ____    __| _/_______/  |_|__|  | |  |   ____
-**  \   \/\/   /  |/    \  / __ |/  ___/\   __\  |  | |  | _/ __ \
-**   \        /|  |   |  \/ /_/ |\___ \  |  | |  |  |_|  |_\  ___/
-**    \__/\  / |__|___|  /\____ /____  > |__| |__|____/____/\___  >
-**         \/          \/      \/    \/                         \/
+/*
+**  Windstille - A Sci-Fi Action-Adventure Game
 **  Copyright (C) 2005 Ingo Ruhnke <grumbel at gmx.de>
 **
-**  This program is free software; you can redistribute it and/or
-**  modify it under the terms of the GNU General Public License
-**  as published by the Free Software Foundation; either version 2
-**  of the License, or (at your option) any later version.
-**
+**  This program is free software: you can redistribute it and/or modify
+**  it under the terms of the GNU General Public License as published by
+**  the Free Software Foundation, either version 3 of the License, or
+**  (at your option) any later version.
+**  
 **  This program is distributed in the hope that it will be useful,
 **  but WITHOUT ANY WARRANTY; without even the implied warranty of
 **  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 **  GNU General Public License for more details.
-** 
+**  
 **  You should have received a copy of the GNU General Public License
-**  along with this program; if not, write to the Free Software
-**  Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA
-**  02111-1307, USA.
+**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
 #ifndef HEADER_COLLISION_PROPERTIES_HPP

Modified: trunk/windstille/src/navigation/segment.cpp
===================================================================
--- trunk/windstille/src/navigation/segment.cpp	2009-02-10 14:12:18 UTC (rev 2428)
+++ trunk/windstille/src/navigation/segment.cpp	2009-02-10 14:28:05 UTC (rev 2429)
@@ -1,26 +1,19 @@
-/*  $Id$
-**   __      __ __             ___        __   __ __   __
-**  /  \    /  \__| ____    __| _/_______/  |_|__|  | |  |   ____
-**  \   \/\/   /  |/    \  / __ |/  ___/\   __\  |  | |  | _/ __ \
-**   \        /|  |   |  \/ /_/ |\___ \  |  | |  |  |_|  |_\  ___/
-**    \__/\  / |__|___|  /\____ /____  > |__| |__|____/____/\___  >
-**         \/          \/      \/    \/                         \/
+/*
+**  Windstille - A Sci-Fi Action-Adventure Game
 **  Copyright (C) 2007 Ingo Ruhnke <grumbel at gmx.de>
 **
-**  This program is free software; you can redistribute it and/or
-**  modify it under the terms of the GNU General Public License
-**  as published by the Free Software Foundation; either version 2
-**  of the License, or (at your option) any later version.
-**
+**  This program is free software: you can redistribute it and/or modify
+**  it under the terms of the GNU General Public License as published by
+**  the Free Software Foundation, either version 3 of the License, or
+**  (at your option) any later version.
+**  
 **  This program is distributed in the hope that it will be useful,
 **  but WITHOUT ANY WARRANTY; without even the implied warranty of
 **  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 **  GNU General Public License for more details.
-** 
+**  
 **  You should have received a copy of the GNU General Public License
-**  along with this program; if not, write to the Free Software
-**  Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA
-**  02111-1307, USA.
+**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
 #include <assert.h>

Modified: trunk/windstille/src/navigation/segment.hpp
===================================================================
--- trunk/windstille/src/navigation/segment.hpp	2009-02-10 14:12:18 UTC (rev 2428)
+++ trunk/windstille/src/navigation/segment.hpp	2009-02-10 14:28:05 UTC (rev 2429)
@@ -1,26 +1,19 @@
-/*  $Id$
-**   __      __ __             ___        __   __ __   __
-**  /  \    /  \__| ____    __| _/_______/  |_|__|  | |  |   ____
-**  \   \/\/   /  |/    \  / __ |/  ___/\   __\  |  | |  | _/ __ \
-**   \        /|  |   |  \/ /_/ |\___ \  |  | |  |  |_|  |_\  ___/
-**    \__/\  / |__|___|  /\____ /____  > |__| |__|____/____/\___  >
-**         \/          \/      \/    \/                         \/
+/*
+**  Windstille - A Sci-Fi Action-Adventure Game
 **  Copyright (C) 2005 Ingo Ruhnke <grumbel at gmx.de>
 **
-**  This program is free software; you can redistribute it and/or
-**  modify it under the terms of the GNU General Public License
-**  as published by the Free Software Foundation; either version 2
-**  of the License, or (at your option) any later version.
-**
+**  This program is free software: you can redistribute it and/or modify
+**  it under the terms of the GNU General Public License as published by
+**  the Free Software Foundation, either version 3 of the License, or
+**  (at your option) any later version.
+**  
 **  This program is distributed in the hope that it will be useful,
 **  but WITHOUT ANY WARRANTY; without even the implied warranty of
 **  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 **  GNU General Public License for more details.
-** 
+**  
 **  You should have received a copy of the GNU General Public License
-**  along with this program; if not, write to the Free Software
-**  Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA
-**  02111-1307, USA.
+**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
 #ifndef HEADER_SEGMENT_HPP

Modified: trunk/windstille/src/navigation/segment_position.cpp
===================================================================
--- trunk/windstille/src/navigation/segment_position.cpp	2009-02-10 14:12:18 UTC (rev 2428)
+++ trunk/windstille/src/navigation/segment_position.cpp	2009-02-10 14:28:05 UTC (rev 2429)
@@ -1,26 +1,19 @@
-/*  $Id$
-**   __      __ __             ___        __   __ __   __
-**  /  \    /  \__| ____    __| _/_______/  |_|__|  | |  |   ____
-**  \   \/\/   /  |/    \  / __ |/  ___/\   __\  |  | |  | _/ __ \
-**   \        /|  |   |  \/ /_/ |\___ \  |  | |  |  |_|  |_\  ___/
-**    \__/\  / |__|___|  /\____ /____  > |__| |__|____/____/\___  >
-**         \/          \/      \/    \/                         \/
+/*
+**  Windstille - A Sci-Fi Action-Adventure Game
 **  Copyright (C) 2007 Ingo Ruhnke <grumbel at gmx.de>
 **
-**  This program is free software; you can redistribute it and/or
-**  modify it under the terms of the GNU General Public License
-**  as published by the Free Software Foundation; either version 2
-**  of the License, or (at your option) any later version.
-**
+**  This program is free software: you can redistribute it and/or modify
+**  it under the terms of the GNU General Public License as published by
+**  the Free Software Foundation, either version 3 of the License, or
+**  (at your option) any later version.
+**  
 **  This program is distributed in the hope that it will be useful,
 **  but WITHOUT ANY WARRANTY; without even the implied warranty of
 **  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 **  GNU General Public License for more details.
-** 
+**  
 **  You should have received a copy of the GNU General Public License
-**  along with this program; if not, write to the Free Software
-**  Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA
-**  02111-1307, USA.
+**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
 #include "segment.hpp"

Modified: trunk/windstille/src/navigation/segment_position.hpp
===================================================================
--- trunk/windstille/src/navigation/segment_position.hpp	2009-02-10 14:12:18 UTC (rev 2428)
+++ trunk/windstille/src/navigation/segment_position.hpp	2009-02-10 14:28:05 UTC (rev 2429)
@@ -1,26 +1,19 @@
-/*  $Id$
-**   __      __ __             ___        __   __ __   __
-**  /  \    /  \__| ____    __| _/_______/  |_|__|  | |  |   ____
-**  \   \/\/   /  |/    \  / __ |/  ___/\   __\  |  | |  | _/ __ \
-**   \        /|  |   |  \/ /_/ |\___ \  |  | |  |  |_|  |_\  ___/
-**    \__/\  / |__|___|  /\____ /____  > |__| |__|____/____/\___  >
-**         \/          \/      \/    \/                         \/
+/*
+**  Windstille - A Sci-Fi Action-Adventure Game
 **  Copyright (C) 2007 Ingo Ruhnke <grumbel at gmx.de>
 **
-**  This program is free software; you can redistribute it and/or
-**  modify it under the terms of the GNU General Public License
-**  as published by the Free Software Foundation; either version 2
-**  of the License, or (at your option) any later version.
-**
+**  This program is free software: you can redistribute it and/or modify
+**  it under the terms of the GNU General Public License as published by
+**  the Free Software Foundation, either version 3 of the License, or
+**  (at your option) any later version.
+**  
 **  This program is distributed in the hope that it will be useful,
 **  but WITHOUT ANY WARRANTY; without even the implied warranty of
 **  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 **  GNU General Public License for more details.
-** 
+**  
 **  You should have received a copy of the GNU General Public License
-**  along with this program; if not, write to the Free Software
-**  Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA
-**  02111-1307, USA.
+**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
 #ifndef HEADER_CONNECTION_HPP

Modified: trunk/windstille/src/navigation_test.cpp
===================================================================
--- trunk/windstille/src/navigation_test.cpp	2009-02-10 14:12:18 UTC (rev 2428)
+++ trunk/windstille/src/navigation_test.cpp	2009-02-10 14:28:05 UTC (rev 2429)
@@ -1,26 +1,19 @@
-/*  $Id$
-**   __      __ __             ___        __   __ __   __
-**  /  \    /  \__| ____    __| _/_______/  |_|__|  | |  |   ____
-**  \   \/\/   /  |/    \  / __ |/  ___/\   __\  |  | |  | _/ __ \
-**   \        /|  |   |  \/ /_/ |\___ \  |  | |  |  |_|  |_\  ___/
-**    \__/\  / |__|___|  /\____ /____  > |__| |__|____/____/\___  >
-**         \/          \/      \/    \/                         \/
+/*
+**  Windstille - A Sci-Fi Action-Adventure Game
 **  Copyright (C) 2007 Ingo Ruhnke <grumbel at gmx.de>
 **
-**  This program is free software; you can redistribute it and/or
-**  modify it under the terms of the GNU General Public License
-**  as published by the Free Software Foundation; either version 2
-**  of the License, or (at your option) any later version.
-**
+**  This program is free software: you can redistribute it and/or modify
+**  it under the terms of the GNU General Public License as published by
+**  the Free Software Foundation, either version 3 of the License, or
+**  (at your option) any later version.
+**  
 **  This program is distributed in the hope that it will be useful,
 **  but WITHOUT ANY WARRANTY; without even the implied warranty of
 **  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 **  GNU General Public License for more details.
-** 
+**  
 **  You should have received a copy of the GNU General Public License
-**  along with this program; if not, write to the Free Software
-**  Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA
-**  02111-1307, USA.
+**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
 #include <assert.h>

Modified: trunk/windstille/src/navigation_test.hpp
===================================================================
--- trunk/windstille/src/navigation_test.hpp	2009-02-10 14:12:18 UTC (rev 2428)
+++ trunk/windstille/src/navigation_test.hpp	2009-02-10 14:28:05 UTC (rev 2429)
@@ -1,26 +1,19 @@
-/*  $Id$
-**   __      __ __             ___        __   __ __   __
-**  /  \    /  \__| ____    __| _/_______/  |_|__|  | |  |   ____
-**  \   \/\/   /  |/    \  / __ |/  ___/\   __\  |  | |  | _/ __ \
-**   \        /|  |   |  \/ /_/ |\___ \  |  | |  |  |_|  |_\  ___/
-**    \__/\  / |__|___|  /\____ /____  > |__| |__|____/____/\___  >
-**         \/          \/      \/    \/                         \/
+/*
+**  Windstille - A Sci-Fi Action-Adventure Game
 **  Copyright (C) 2007 Ingo Ruhnke <grumbel at gmx.de>
 **
-**  This program is free software; you can redistribute it and/or
-**  modify it under the terms of the GNU General Public License
-**  as published by the Free Software Foundation; either version 2
-**  of the License, or (at your option) any later version.
-**
+**  This program is free software: you can redistribute it and/or modify
+**  it under the terms of the GNU General Public License as published by
+**  the Free Software Foundation, either version 3 of the License, or
+**  (at your option) any later version.
+**  
 **  This program is distributed in the hope that it will be useful,
 **  but WITHOUT ANY WARRANTY; without even the implied warranty of
 **  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 **  GNU General Public License for more details.
-** 
+**  
 **  You should have received a copy of the GNU General Public License
-**  along with this program; if not, write to the Free Software
-**  Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA
-**  02111-1307, USA.
+**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
 #ifndef HEADER_NAVIGATION_TEST_HPP

Modified: trunk/windstille/src/objects/background_gradient.cpp
===================================================================
--- trunk/windstille/src/objects/background_gradient.cpp	2009-02-10 14:12:18 UTC (rev 2428)
+++ trunk/windstille/src/objects/background_gradient.cpp	2009-02-10 14:28:05 UTC (rev 2429)
@@ -1,26 +1,19 @@
-/*  $Id$
-**   __      __ __             ___        __   __ __   __
-**  /  \    /  \__| ____    __| _/_______/  |_|__|  | |  |   ____
-**  \   \/\/   /  |/    \  / __ |/  ___/\   __\  |  | |  | _/ __ \
-**   \        /|  |   |  \/ /_/ |\___ \  |  | |  |  |_|  |_\  ___/
-**    \__/\  / |__|___|  /\____ /____  > |__| |__|____/____/\___  >
-**         \/          \/      \/    \/                         \/
+/*
+**  Windstille - A Sci-Fi Action-Adventure Game
 **  Copyright (C) 2005 Ingo Ruhnke <grumbel at gmx.de>
 **
-**  This program is free software; you can redistribute it and/or
-**  modify it under the terms of the GNU General Public License
-**  as published by the Free Software Foundation; either version 2
-**  of the License, or (at your option) any later version.
-**
+**  This program is free software: you can redistribute it and/or modify
+**  it under the terms of the GNU General Public License as published by
+**  the Free Software Foundation, either version 3 of the License, or
+**  (at your option) any later version.
+**  
 **  This program is distributed in the hope that it will be useful,
 **  but WITHOUT ANY WARRANTY; without even the implied warranty of
 **  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 **  GNU General Public License for more details.
-** 
+**  
 **  You should have received a copy of the GNU General Public License
-**  along with this program; if not, write to the Free Software
-**  Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA
-**  02111-1307, USA.
+**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
 #include <iostream>

Modified: trunk/windstille/src/objects/background_gradient.hpp
===================================================================
--- trunk/windstille/src/objects/background_gradient.hpp	2009-02-10 14:12:18 UTC (rev 2428)
+++ trunk/windstille/src/objects/background_gradient.hpp	2009-02-10 14:28:05 UTC (rev 2429)
@@ -1,26 +1,19 @@
-/*  $Id$
-**   __      __ __             ___        __   __ __   __
-**  /  \    /  \__| ____    __| _/_______/  |_|__|  | |  |   ____
-**  \   \/\/   /  |/    \  / __ |/  ___/\   __\  |  | |  | _/ __ \
-**   \        /|  |   |  \/ /_/ |\___ \  |  | |  |  |_|  |_\  ___/
-**    \__/\  / |__|___|  /\____ /____  > |__| |__|____/____/\___  >
-**         \/          \/      \/    \/                         \/
+/*
+**  Windstille - A Sci-Fi Action-Adventure Game
 **  Copyright (C) 2005 Ingo Ruhnke <grumbel at gmx.de>
 **
-**  This program is free software; you can redistribute it and/or
-**  modify it under the terms of the GNU General Public License
-**  as published by the Free Software Foundation; either version 2
-**  of the License, or (at your option) any later version.
-**
+**  This program is free software: you can redistribute it and/or modify
+**  it under the terms of the GNU General Public License as published by
+**  the Free Software Foundation, either version 3 of the License, or
+**  (at your option) any later version.
+**  
 **  This program is distributed in the hope that it will be useful,
 **  but WITHOUT ANY WARRANTY; without even the implied warranty of
 **  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 **  GNU General Public License for more details.
-** 
+**  
 **  You should have received a copy of the GNU General Public License
-**  along with this program; if not, write to the Free Software
-**  Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA
-**  02111-1307, USA.
+**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
 #ifndef HEADER_BACKGROUND_GRADIENT_HPP

Modified: trunk/windstille/src/objects/bomb.cpp
===================================================================
--- trunk/windstille/src/objects/bomb.cpp	2009-02-10 14:12:18 UTC (rev 2428)
+++ trunk/windstille/src/objects/bomb.cpp	2009-02-10 14:28:05 UTC (rev 2429)
@@ -1,10 +1,5 @@
-/*  $Id$
-**   __      __ __             ___        __   __ __   __
-**  /  \    /  \__| ____    __| _/_______/  |_|__|  | |  |   ____
-**  \   \/\/   /  |/    \  / __ |/  ___/\   __\  |  | |  | _/ __ \
-**   \        /|  |   |  \/ /_/ |\___ \  |  | |  |  |_|  |_\  ___/
-**    \__/\  / |__|___|  /\____ /____  > |__| |__|____/____/\___  >
-**         \/          \/      \/    \/                         \/
+/*
+**  Windstille - A Sci-Fi Action-Adventure Game
 **  Copyright (C) 2005 Ingo Ruhnke <grumbel at gmx.de>
 **
 **  This program is free software; you can redistribute it and/or

Modified: trunk/windstille/src/objects/bomb.hpp
===================================================================
--- trunk/windstille/src/objects/bomb.hpp	2009-02-10 14:12:18 UTC (rev 2428)
+++ trunk/windstille/src/objects/bomb.hpp	2009-02-10 14:28:05 UTC (rev 2429)
@@ -1,10 +1,5 @@
-/*  $Id$
-**   __      __ __             ___        __   __ __   __
-**  /  \    /  \__| ____    __| _/_______/  |_|__|  | |  |   ____
-**  \   \/\/   /  |/    \  / __ |/  ___/\   __\  |  | |  | _/ __ \
-**   \        /|  |   |  \/ /_/ |\___ \  |  | |  |  |_|  |_\  ___/
-**    \__/\  / |__|___|  /\____ /____  > |__| |__|____/____/\___  >
-**         \/          \/      \/    \/                         \/
+/*
+**  Windstille - A Sci-Fi Action-Adventure Game
 **  Copyright (C) 2005 Ingo Ruhnke <grumbel at gmx.de>
 **
 **  This program is free software; you can redistribute it and/or

Modified: trunk/windstille/src/objects/hedgehog.cpp
===================================================================
--- trunk/windstille/src/objects/hedgehog.cpp	2009-02-10 14:12:18 UTC (rev 2428)
+++ trunk/windstille/src/objects/hedgehog.cpp	2009-02-10 14:28:05 UTC (rev 2429)
@@ -1,10 +1,5 @@
-/*  $Id$
-**   __      __ __             ___        __   __ __   __
-**  /  \    /  \__| ____    __| _/_______/  |_|__|  | |  |   ____
-**  \   \/\/   /  |/    \  / __ |/  ___/\   __\  |  | |  | _/ __ \
-**   \        /|  |   |  \/ /_/ |\___ \  |  | |  |  |_|  |_\  ___/
-**    \__/\  / |__|___|  /\____ /____  > |__| |__|____/____/\___  >
-**         \/          \/      \/    \/                         \/
+/*
+**  Windstille - A Sci-Fi Action-Adventure Game
 **  Copyright (C) 2005 Ingo Ruhnke <grumbel at gmx.de>
 **
 **  This program is free software; you can redistribute it and/or

Modified: trunk/windstille/src/objects/hedgehog.hpp
===================================================================
--- trunk/windstille/src/objects/hedgehog.hpp	2009-02-10 14:12:18 UTC (rev 2428)
+++ trunk/windstille/src/objects/hedgehog.hpp	2009-02-10 14:28:05 UTC (rev 2429)
@@ -1,10 +1,5 @@
-/*  $Id$
-**   __      __ __             ___        __   __ __   __
-**  /  \    /  \__| ____    __| _/_______/  |_|__|  | |  |   ____
-**  \   \/\/   /  |/    \  / __ |/  ___/\   __\  |  | |  | _/ __ \
-**   \        /|  |   |  \/ /_/ |\___ \  |  | |  |  |_|  |_\  ___/
-**    \__/\  / |__|___|  /\____ /____  > |__| |__|____/____/\___  >
-**         \/          \/      \/    \/                         \/
+/*
+**  Windstille - A Sci-Fi Action-Adventure Game
 **  Copyright (C) 2005 Ingo Ruhnke <grumbel at gmx.de>
 **
 **  This program is free software; you can redistribute it and/or

Modified: trunk/windstille/src/objects/nightvision.cpp
===================================================================
--- trunk/windstille/src/objects/nightvision.cpp	2009-02-10 14:12:18 UTC (rev 2428)
+++ trunk/windstille/src/objects/nightvision.cpp	2009-02-10 14:28:05 UTC (rev 2429)
@@ -1,26 +1,19 @@
-/*  $Id$
-**   __      __ __             ___        __   __ __   __
-**  /  \    /  \__| ____    __| _/_______/  |_|__|  | |  |   ____
-**  \   \/\/   /  |/    \  / __ |/  ___/\   __\  |  | |  | _/ __ \
-**   \        /|  |   |  \/ /_/ |\___ \  |  | |  |  |_|  |_\  ___/
-**    \__/\  / |__|___|  /\____ /____  > |__| |__|____/____/\___  >
-**         \/          \/      \/    \/                         \/
+/*
+**  Windstille - A Sci-Fi Action-Adventure Game
 **  Copyright (C) 2005 Ingo Ruhnke <grumbel at gmx.de>
 **
-**  This program is free software; you can redistribute it and/or
-**  modify it under the terms of the GNU General Public License
-**  as published by the Free Software Foundation; either version 2
-**  of the License, or (at your option) any later version.
-**
+**  This program is free software: you can redistribute it and/or modify
+**  it under the terms of the GNU General Public License as published by
+**  the Free Software Foundation, either version 3 of the License, or
+**  (at your option) any later version.
+**  
 **  This program is distributed in the hope that it will be useful,
 **  but WITHOUT ANY WARRANTY; without even the implied warranty of
 **  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 **  GNU General Public License for more details.
-** 
+**  
 **  You should have received a copy of the GNU General Public License
-**  along with this program; if not, write to the Free Software
-**  Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA
-**  02111-1307, USA.
+**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
 #include "globals.hpp"

Modified: trunk/windstille/src/objects/nightvision.hpp
===================================================================
--- trunk/windstille/src/objects/nightvision.hpp	2009-02-10 14:12:18 UTC (rev 2428)
+++ trunk/windstille/src/objects/nightvision.hpp	2009-02-10 14:28:05 UTC (rev 2429)
@@ -1,26 +1,19 @@
-/*  $Id$
-**   __      __ __             ___        __   __ __   __
-**  /  \    /  \__| ____    __| _/_______/  |_|__|  | |  |   ____
-**  \   \/\/   /  |/    \  / __ |/  ___/\   __\  |  | |  | _/ __ \
-**   \        /|  |   |  \/ /_/ |\___ \  |  | |  |  |_|  |_\  ___/
-**    \__/\  / |__|___|  /\____ /____  > |__| |__|____/____/\___  >
-**         \/          \/      \/    \/                         \/
+/*
+**  Windstille - A Sci-Fi Action-Adventure Game
 **  Copyright (C) 2005 Ingo Ruhnke <grumbel at gmx.de>
 **
-**  This program is free software; you can redistribute it and/or
-**  modify it under the terms of the GNU General Public License
-**  as published by the Free Software Foundation; either version 2
-**  of the License, or (at your option) any later version.
-**
+**  This program is free software: you can redistribute it and/or modify
+**  it under the terms of the GNU General Public License as published by
+**  the Free Software Foundation, either version 3 of the License, or
+**  (at your option) any later version.
+**  
 **  This program is distributed in the hope that it will be useful,
 **  but WITHOUT ANY WARRANTY; without even the implied warranty of
 **  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 **  GNU General Public License for more details.
-** 
+**  
 **  You should have received a copy of the GNU General Public License
-**  along with this program; if not, write to the Free Software
-**  Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA
-**  02111-1307, USA.
+**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
 #ifndef HEADER_NIGHTVISION_HPP

Modified: trunk/windstille/src/objects/shockwave.cpp
===================================================================
--- trunk/windstille/src/objects/shockwave.cpp	2009-02-10 14:12:18 UTC (rev 2428)
+++ trunk/windstille/src/objects/shockwave.cpp	2009-02-10 14:28:05 UTC (rev 2429)
@@ -1,26 +1,19 @@
-/*  $Id$
-**   __      __ __             ___        __   __ __   __
-**  /  \    /  \__| ____    __| _/_______/  |_|__|  | |  |   ____
-**  \   \/\/   /  |/    \  / __ |/  ___/\   __\  |  | |  | _/ __ \
-**   \        /|  |   |  \/ /_/ |\___ \  |  | |  |  |_|  |_\  ___/
-**    \__/\  / |__|___|  /\____ /____  > |__| |__|____/____/\___  >
-**         \/          \/      \/    \/                         \/
+/*
+**  Windstille - A Sci-Fi Action-Adventure Game
 **  Copyright (C) 2005 Ingo Ruhnke <grumbel at gmx.de>
 **
-**  This program is free software; you can redistribute it and/or
-**  modify it under the terms of the GNU General Public License
-**  as published by the Free Software Foundation; either version 2
-**  of the License, or (at your option) any later version.
-**
+**  This program is free software: you can redistribute it and/or modify
+**  it under the terms of the GNU General Public License as published by
+**  the Free Software Foundation, either version 3 of the License, or
+**  (at your option) any later version.
+**  
 **  This program is distributed in the hope that it will be useful,
 **  but WITHOUT ANY WARRANTY; without even the implied warranty of
 **  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 **  GNU General Public License for more details.
-** 
+**  
 **  You should have received a copy of the GNU General Public License
-**  along with this program; if not, write to the Free Software
-**  Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA
-**  02111-1307, USA.
+**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
 #include "display/opengl_state.hpp"

Modified: trunk/windstille/src/objects/shockwave.hpp
===================================================================
--- trunk/windstille/src/objects/shockwave.hpp	2009-02-10 14:12:18 UTC (rev 2428)
+++ trunk/windstille/src/objects/shockwave.hpp	2009-02-10 14:28:05 UTC (rev 2429)
@@ -1,26 +1,19 @@
-/*  $Id$
-**   __      __ __             ___        __   __ __   __
-**  /  \    /  \__| ____    __| _/_______/  |_|__|  | |  |   ____
-**  \   \/\/   /  |/    \  / __ |/  ___/\   __\  |  | |  | _/ __ \
-**   \        /|  |   |  \/ /_/ |\___ \  |  | |  |  |_|  |_\  ___/
-**    \__/\  / |__|___|  /\____ /____  > |__| |__|____/____/\___  >
-**         \/          \/      \/    \/                         \/
+/*
+**  Windstille - A Sci-Fi Action-Adventure Game
 **  Copyright (C) 2005 Ingo Ruhnke <grumbel at gmx.de>
 **
-**  This program is free software; you can redistribute it and/or
-**  modify it under the terms of the GNU General Public License
-**  as published by the Free Software Foundation; either version 2
-**  of the License, or (at your option) any later version.
-**
+**  This program is free software: you can redistribute it and/or modify
+**  it under the terms of the GNU General Public License as published by
+**  the Free Software Foundation, either version 3 of the License, or
+**  (at your option) any later version.
+**  
 **  This program is distributed in the hope that it will be useful,
 **  but WITHOUT ANY WARRANTY; without even the implied warranty of
 **  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 **  GNU General Public License for more details.
-** 
+**  
 **  You should have received a copy of the GNU General Public License
-**  along with this program; if not, write to the Free Software
-**  Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA
-**  02111-1307, USA.
+**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
 #ifndef HEADER_SHOCKWAVE_HPP

Modified: trunk/windstille/src/objects/spider_mine.cpp
===================================================================
--- trunk/windstille/src/objects/spider_mine.cpp	2009-02-10 14:12:18 UTC (rev 2428)
+++ trunk/windstille/src/objects/spider_mine.cpp	2009-02-10 14:28:05 UTC (rev 2429)
@@ -1,10 +1,5 @@
-/*  $Id$
-**   __      __ __             ___        __   __ __   __
-**  /  \    /  \__| ____    __| _/_______/  |_|__|  | |  |   ____
-**  \   \/\/   /  |/    \  / __ |/  ___/\   __\  |  | |  | _/ __ \
-**   \        /|  |   |  \/ /_/ |\___ \  |  | |  |  |_|  |_\  ___/
-**    \__/\  / |__|___|  /\____ /____  > |__| |__|____/____/\___  >
-**         \/          \/      \/    \/                         \/
+/*
+**  Windstille - A Sci-Fi Action-Adventure Game
 **  Copyright (C) 2005 Ingo Ruhnke <grumbel at gmx.de>
 **
 **  This program is free software; you can redistribute it and/or

Modified: trunk/windstille/src/objects/spider_mine.hpp
===================================================================
--- trunk/windstille/src/objects/spider_mine.hpp	2009-02-10 14:12:18 UTC (rev 2428)
+++ trunk/windstille/src/objects/spider_mine.hpp	2009-02-10 14:28:05 UTC (rev 2429)
@@ -1,10 +1,5 @@
-/*  $Id$
-**   __      __ __             ___        __   __ __   __
-**  /  \    /  \__| ____    __| _/_______/  |_|__|  | |  |   ____
-**  \   \/\/   /  |/    \  / __ |/  ___/\   __\  |  | |  | _/ __ \
-**   \        /|  |   |  \/ /_/ |\___ \  |  | |  |  |_|  |_\  ___/
-**    \__/\  / |__|___|  /\____ /____  > |__| |__|____/____/\___  >
-**         \/          \/      \/    \/                         \/
+/*
+**  Windstille - A Sci-Fi Action-Adventure Game
 **  Copyright (C) 2005 Ingo Ruhnke <grumbel at gmx.de>
 **
 **  This program is free software; you can redistribute it and/or

Modified: trunk/windstille/src/objects/swarm.cpp
===================================================================
--- trunk/windstille/src/objects/swarm.cpp	2009-02-10 14:12:18 UTC (rev 2428)
+++ trunk/windstille/src/objects/swarm.cpp	2009-02-10 14:28:05 UTC (rev 2429)
@@ -1,26 +1,19 @@
-/*  $Id$
-**   __      __ __             ___        __   __ __   __
-**  /  \    /  \__| ____    __| _/_______/  |_|__|  | |  |   ____
-**  \   \/\/   /  |/    \  / __ |/  ___/\   __\  |  | |  | _/ __ \
-**   \        /|  |   |  \/ /_/ |\___ \  |  | |  |  |_|  |_\  ___/
-**    \__/\  / |__|___|  /\____ /____  > |__| |__|____/____/\___  >
-**         \/          \/      \/    \/                         \/
+/*
+**  Windstille - A Sci-Fi Action-Adventure Game
 **  Copyright (C) 2005 Ingo Ruhnke <grumbel at gmx.de>
 **
-**  This program is free software; you can redistribute it and/or
-**  modify it under the terms of the GNU General Public License
-**  as published by the Free Software Foundation; either version 2
-**  of the License, or (at your option) any later version.
-**
+**  This program is free software: you can redistribute it and/or modify
+**  it under the terms of the GNU General Public License as published by
+**  the Free Software Foundation, either version 3 of the License, or
+**  (at your option) any later version.
+**  
 **  This program is distributed in the hope that it will be useful,
 **  but WITHOUT ANY WARRANTY; without even the implied warranty of
 **  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 **  GNU General Public License for more details.
-** 
+**  
 **  You should have received a copy of the GNU General Public License
-**  along with this program; if not, write to the Free Software
-**  Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA
-**  02111-1307, USA.
+**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
 #include "globals.hpp"

Modified: trunk/windstille/src/objects/swarm.hpp
===================================================================
--- trunk/windstille/src/objects/swarm.hpp	2009-02-10 14:12:18 UTC (rev 2428)
+++ trunk/windstille/src/objects/swarm.hpp	2009-02-10 14:28:05 UTC (rev 2429)
@@ -1,26 +1,19 @@
-/*  $Id$
-**   __      __ __             ___        __   __ __   __
-**  /  \    /  \__| ____    __| _/_______/  |_|__|  | |  |   ____
-**  \   \/\/   /  |/    \  / __ |/  ___/\   __\  |  | |  | _/ __ \
-**   \        /|  |   |  \/ /_/ |\___ \  |  | |  |  |_|  |_\  ___/
-**    \__/\  / |__|___|  /\____ /____  > |__| |__|____/____/\___  >
-**         \/          \/      \/    \/                         \/
+/*
+**  Windstille - A Sci-Fi Action-Adventure Game
 **  Copyright (C) 2005 Ingo Ruhnke <grumbel at gmx.de>
 **
-**  This program is free software; you can redistribute it and/or
-**  modify it under the terms of the GNU General Public License
-**  as published by the Free Software Foundation; either version 2
-**  of the License, or (at your option) any later version.
-**
+**  This program is free software: you can redistribute it and/or modify
+**  it under the terms of the GNU General Public License as published by
+**  the Free Software Foundation, either version 3 of the License, or
+**  (at your option) any later version.
+**  
 **  This program is distributed in the hope that it will be useful,
 **  but WITHOUT ANY WARRANTY; without even the implied warranty of
 **  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 **  GNU General Public License for more details.
-** 
+**  
 **  You should have received a copy of the GNU General Public License
-**  along with this program; if not, write to the Free Software
-**  Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA
-**  02111-1307, USA.
+**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
 #ifndef HEADER_SWARM_HPP

Modified: trunk/windstille/src/objects/vrdummy.cpp
===================================================================
--- trunk/windstille/src/objects/vrdummy.cpp	2009-02-10 14:12:18 UTC (rev 2428)
+++ trunk/windstille/src/objects/vrdummy.cpp	2009-02-10 14:28:05 UTC (rev 2429)
@@ -1,26 +1,19 @@
-/*  $Id$
-**   __      __ __             ___        __   __ __   __
-**  /  \    /  \__| ____    __| _/_______/  |_|__|  | |  |   ____
-**  \   \/\/   /  |/    \  / __ |/  ___/\   __\  |  | |  | _/ __ \
-**   \        /|  |   |  \/ /_/ |\___ \  |  | |  |  |_|  |_\  ___/
-**    \__/\  / |__|___|  /\____ /____  > |__| |__|____/____/\___  >
-**         \/          \/      \/    \/                         \/
+/*
+**  Windstille - A Sci-Fi Action-Adventure Game
 **  Copyright (C) 2005 Ingo Ruhnke <grumbel at gmx.de>
 **
-**  This program is free software; you can redistribute it and/or
-**  modify it under the terms of the GNU General Public License
-**  as published by the Free Software Foundation; either version 2
-**  of the License, or (at your option) any later version.
-**
+**  This program is free software: you can redistribute it and/or modify
+**  it under the terms of the GNU General Public License as published by
+**  the Free Software Foundation, either version 3 of the License, or
+**  (at your option) any later version.
+**  
 **  This program is distributed in the hope that it will be useful,
 **  but WITHOUT ANY WARRANTY; without even the implied warranty of
 **  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 **  GNU General Public License for more details.
-** 
+**  
 **  You should have received a copy of the GNU General Public License
-**  along with this program; if not, write to the Free Software
-**  Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA
-**  02111-1307, USA.
+**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
 #include "random.hpp"

Modified: trunk/windstille/src/objects/vrdummy.hpp
===================================================================
--- trunk/windstille/src/objects/vrdummy.hpp	2009-02-10 14:12:18 UTC (rev 2428)
+++ trunk/windstille/src/objects/vrdummy.hpp	2009-02-10 14:28:05 UTC (rev 2429)
@@ -1,26 +1,19 @@
-/*  $Id$
-**   __      __ __             ___        __   __ __   __
-**  /  \    /  \__| ____    __| _/_______/  |_|__|  | |  |   ____
-**  \   \/\/   /  |/    \  / __ |/  ___/\   __\  |  | |  | _/ __ \
-**   \        /|  |   |  \/ /_/ |\___ \  |  | |  |  |_|  |_\  ___/
-**    \__/\  / |__|___|  /\____ /____  > |__| |__|____/____/\___  >
-**         \/          \/      \/    \/                         \/
+/*
+**  Windstille - A Sci-Fi Action-Adventure Game
 **  Copyright (C) 2005 Ingo Ruhnke <grumbel at gmx.de>
 **
-**  This program is free software; you can redistribute it and/or
-**  modify it under the terms of the GNU General Public License
-**  as published by the Free Software Foundation; either version 2
-**  of the License, or (at your option) any later version.
-**
+**  This program is free software: you can redistribute it and/or modify
+**  it under the terms of the GNU General Public License as published by
+**  the Free Software Foundation, either version 3 of the License, or
+**  (at your option) any later version.
+**  
 **  This program is distributed in the hope that it will be useful,
 **  but WITHOUT ANY WARRANTY; without even the implied warranty of
 **  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 **  GNU General Public License for more details.
-** 
+**  
 **  You should have received a copy of the GNU General Public License
-**  along with this program; if not, write to the Free Software
-**  Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA
-**  02111-1307, USA.
+**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
 #ifndef HEADER_BADYGUY_VRDUMMY_HPP

Modified: trunk/windstille/src/particle_viewer.cpp
===================================================================
--- trunk/windstille/src/particle_viewer.cpp	2009-02-10 14:12:18 UTC (rev 2428)
+++ trunk/windstille/src/particle_viewer.cpp	2009-02-10 14:28:05 UTC (rev 2429)
@@ -1,26 +1,19 @@
-/*  $Id$
-**   __      __ __             ___        __   __ __   __
-**  /  \    /  \__| ____    __| _/_______/  |_|__|  | |  |   ____
-**  \   \/\/   /  |/    \  / __ |/  ___/\   __\  |  | |  | _/ __ \
-**   \        /|  |   |  \/ /_/ |\___ \  |  | |  |  |_|  |_\  ___/
-**    \__/\  / |__|___|  /\____ /____  > |__| |__|____/____/\___  >
-**         \/          \/      \/    \/                         \/
+/*
+**  Windstille - A Sci-Fi Action-Adventure Game
 **  Copyright (C) 2005 Ingo Ruhnke <grumbel at gmx.de>
 **
-**  This program is free software; you can redistribute it and/or
-**  modify it under the terms of the GNU General Public License
-**  as published by the Free Software Foundation; either version 2
-**  of the License, or (at your option) any later version.
-**
+**  This program is free software: you can redistribute it and/or modify
+**  it under the terms of the GNU General Public License as published by
+**  the Free Software Foundation, either version 3 of the License, or
+**  (at your option) any later version.
+**  
 **  This program is distributed in the hope that it will be useful,
 **  but WITHOUT ANY WARRANTY; without even the implied warranty of
 **  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 **  GNU General Public License for more details.
-** 
+**  
 **  You should have received a copy of the GNU General Public License
-**  along with this program; if not, write to the Free Software
-**  Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA
-**  02111-1307, USA.
+**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
 #include "sexpr_file_reader.hpp"

Modified: trunk/windstille/src/particle_viewer.hpp
===================================================================
--- trunk/windstille/src/particle_viewer.hpp	2009-02-10 14:12:18 UTC (rev 2428)
+++ trunk/windstille/src/particle_viewer.hpp	2009-02-10 14:28:05 UTC (rev 2429)
@@ -1,26 +1,19 @@
-/*  $Id$
-**   __      __ __             ___        __   __ __   __
-**  /  \    /  \__| ____    __| _/_______/  |_|__|  | |  |   ____
-**  \   \/\/   /  |/    \  / __ |/  ___/\   __\  |  | |  | _/ __ \
-**   \        /|  |   |  \/ /_/ |\___ \  |  | |  |  |_|  |_\  ___/
-**    \__/\  / |__|___|  /\____ /____  > |__| |__|____/____/\___  >
-**         \/          \/      \/    \/                         \/
+/*
+**  Windstille - A Sci-Fi Action-Adventure Game
 **  Copyright (C) 2005 Ingo Ruhnke <grumbel at gmx.de>
 **
-**  This program is free software; you can redistribute it and/or
-**  modify it under the terms of the GNU General Public License
-**  as published by the Free Software Foundation; either version 2
-**  of the License, or (at your option) any later version.
-**
+**  This program is free software: you can redistribute it and/or modify
+**  it under the terms of the GNU General Public License as published by
+**  the Free Software Foundation, either version 3 of the License, or
+**  (at your option) any later version.
+**  
 **  This program is distributed in the hope that it will be useful,
 **  but WITHOUT ANY WARRANTY; without even the implied warranty of
 **  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 **  GNU General Public License for more details.
-** 
+**  
 **  You should have received a copy of the GNU General Public License
-**  along with this program; if not, write to the Free Software
-**  Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA
-**  02111-1307, USA.
+**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
 #ifndef HEADER_PARTICLE_VIEWER_HPP

Modified: trunk/windstille/src/particles/deform_drawer.cpp
===================================================================
--- trunk/windstille/src/particles/deform_drawer.cpp	2009-02-10 14:12:18 UTC (rev 2428)
+++ trunk/windstille/src/particles/deform_drawer.cpp	2009-02-10 14:28:05 UTC (rev 2429)
@@ -1,26 +1,19 @@
-/*  $Id$
-**   __      __ __             ___        __   __ __   __
-**  /  \    /  \__| ____    __| _/_______/  |_|__|  | |  |   ____
-**  \   \/\/   /  |/    \  / __ |/  ___/\   __\  |  | |  | _/ __ \
-**   \        /|  |   |  \/ /_/ |\___ \  |  | |  |  |_|  |_\  ___/
-**    \__/\  / |__|___|  /\____ /____  > |__| |__|____/____/\___  >
-**         \/          \/      \/    \/                         \/
+/*
+**  Windstille - A Sci-Fi Action-Adventure Game
 **  Copyright (C) 2005 Ingo Ruhnke <grumbel at gmx.de>
 **
-**  This program is free software; you can redistribute it and/or
-**  modify it under the terms of the GNU General Public License
-**  as published by the Free Software Foundation; either version 2
-**  of the License, or (at your option) any later version.
-**
+**  This program is free software: you can redistribute it and/or modify
+**  it under the terms of the GNU General Public License as published by
+**  the Free Software Foundation, either version 3 of the License, or
+**  (at your option) any later version.
+**  
 **  This program is distributed in the hope that it will be useful,
 **  but WITHOUT ANY WARRANTY; without even the implied warranty of
 **  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 **  GNU General Public License for more details.
-** 
+**  
 **  You should have received a copy of the GNU General Public License
-**  along with this program; if not, write to the Free Software
-**  Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA
-**  02111-1307, USA.
+**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 #include <config.h>
 

Modified: trunk/windstille/src/particles/deform_drawer.hpp
===================================================================
--- trunk/windstille/src/particles/deform_drawer.hpp	2009-02-10 14:12:18 UTC (rev 2428)
+++ trunk/windstille/src/particles/deform_drawer.hpp	2009-02-10 14:28:05 UTC (rev 2429)
@@ -1,26 +1,19 @@
-/*  $Id$
-**   __      __ __             ___        __   __ __   __
-**  /  \    /  \__| ____    __| _/_______/  |_|__|  | |  |   ____
-**  \   \/\/   /  |/    \  / __ |/  ___/\   __\  |  | |  | _/ __ \
-**   \        /|  |   |  \/ /_/ |\___ \  |  | |  |  |_|  |_\  ___/
-**    \__/\  / |__|___|  /\____ /____  > |__| |__|____/____/\___  >
-**         \/          \/      \/    \/                         \/
+/*
+**  Windstille - A Sci-Fi Action-Adventure Game
 **  Copyright (C) 2005 Ingo Ruhnke <grumbel at gmx.de>
 **
-**  This program is free software; you can redistribute it and/or
-**  modify it under the terms of the GNU General Public License
-**  as published by the Free Software Foundation; either version 2
-**  of the License, or (at your option) any later version.
-**
+**  This program is free software: you can redistribute it and/or modify
+**  it under the terms of the GNU General Public License as published by
+**  the Free Software Foundation, either version 3 of the License, or
+**  (at your option) any later version.
+**  
 **  This program is distributed in the hope that it will be useful,
 **  but WITHOUT ANY WARRANTY; without even the implied warranty of
 **  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 **  GNU General Public License for more details.
-** 
+**  
 **  You should have received a copy of the GNU General Public License
-**  along with this program; if not, write to the Free Software
-**  Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA
-**  02111-1307, USA.
+**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
 #ifndef HEADER_DEFORM_DRAWER_HPP

Modified: trunk/windstille/src/particles/drawer.hpp
===================================================================
--- trunk/windstille/src/particles/drawer.hpp	2009-02-10 14:12:18 UTC (rev 2428)
+++ trunk/windstille/src/particles/drawer.hpp	2009-02-10 14:28:05 UTC (rev 2429)
@@ -1,26 +1,19 @@
-/*  $Id$
-**   __      __ __             ___        __   __ __   __
-**  /  \    /  \__| ____    __| _/_______/  |_|__|  | |  |   ____
-**  \   \/\/   /  |/    \  / __ |/  ___/\   __\  |  | |  | _/ __ \
-**   \        /|  |   |  \/ /_/ |\___ \  |  | |  |  |_|  |_\  ___/
-**    \__/\  / |__|___|  /\____ /____  > |__| |__|____/____/\___  >
-**         \/          \/      \/    \/                         \/
+/*
+**  Windstille - A Sci-Fi Action-Adventure Game
 **  Copyright (C) 2000,2005 Ingo Ruhnke <grumbel at gmx.de>
 **
-**  This program is free software; you can redistribute it and/or
-**  modify it under the terms of the GNU General Public License
-**  as published by the Free Software Foundation; either version 2
-**  of the License, or (at your option) any later version.
-**
+**  This program is free software: you can redistribute it and/or modify
+**  it under the terms of the GNU General Public License as published by
+**  the Free Software Foundation, either version 3 of the License, or
+**  (at your option) any later version.
+**  
 **  This program is distributed in the hope that it will be useful,
 **  but WITHOUT ANY WARRANTY; without even the implied warranty of
 **  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 **  GNU General Public License for more details.
-** 
+**  
 **  You should have received a copy of the GNU General Public License
-**  along with this program; if not, write to the Free Software
-**  Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA
-**  02111-1307, USA.
+**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
 #ifndef HEADER_PARTICLES_DRAWER_HXX

Modified: trunk/windstille/src/particles/particle_system.cpp
===================================================================
--- trunk/windstille/src/particles/particle_system.cpp	2009-02-10 14:12:18 UTC (rev 2428)
+++ trunk/windstille/src/particles/particle_system.cpp	2009-02-10 14:28:05 UTC (rev 2429)
@@ -1,26 +1,19 @@
-/*  $Id$
-**   __      __ __             ___        __   __ __   __
-**  /  \    /  \__| ____    __| _/_______/  |_|__|  | |  |   ____
-**  \   \/\/   /  |/    \  / __ |/  ___/\   __\  |  | |  | _/ __ \
-**   \        /|  |   |  \/ /_/ |\___ \  |  | |  |  |_|  |_\  ___/
-**    \__/\  / |__|___|  /\____ /____  > |__| |__|____/____/\___  >
-**         \/          \/      \/    \/                         \/
+/*
+**  Windstille - A Sci-Fi Action-Adventure Game
 **  Copyright (C) 2000,2005 Ingo Ruhnke <grumbel at gmx.de>
 **
-**  This program is free software; you can redistribute it and/or
-**  modify it under the terms of the GNU General Public License
-**  as published by the Free Software Foundation; either version 2
-**  of the License, or (at your option) any later version.
-**
+**  This program is free software: you can redistribute it and/or modify
+**  it under the terms of the GNU General Public License as published by
+**  the Free Software Foundation, either version 3 of the License, or
+**  (at your option) any later version.
+**  
 **  This program is distributed in the hope that it will be useful,
 **  but WITHOUT ANY WARRANTY; without even the implied warranty of
 **  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 **  GNU General Public License for more details.
-** 
+**  
 **  You should have received a copy of the GNU General Public License
-**  along with this program; if not, write to the Free Software
-**  Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA
-**  02111-1307, USA.
+**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
 #include <math.h>

Modified: trunk/windstille/src/particles/particle_system.hpp
===================================================================
--- trunk/windstille/src/particles/particle_system.hpp	2009-02-10 14:12:18 UTC (rev 2428)
+++ trunk/windstille/src/particles/particle_system.hpp	2009-02-10 14:28:05 UTC (rev 2429)
@@ -1,26 +1,19 @@
-/*  $Id$
-**   __      __ __             ___        __   __ __   __
-**  /  \    /  \__| ____    __| _/_______/  |_|__|  | |  |   ____
-**  \   \/\/   /  |/    \  / __ |/  ___/\   __\  |  | |  | _/ __ \
-**   \        /|  |   |  \/ /_/ |\___ \  |  | |  |  |_|  |_\  ___/
-**    \__/\  / |__|___|  /\____ /____  > |__| |__|____/____/\___  >
-**         \/          \/      \/    \/                         \/
+/*
+**  Windstille - A Sci-Fi Action-Adventure Game
 **  Copyright (C) 2000,2005 Ingo Ruhnke <grumbel at gmx.de>
 **
-**  This program is free software; you can redistribute it and/or
-**  modify it under the terms of the GNU General Public License
-**  as published by the Free Software Foundation; either version 2
-**  of the License, or (at your option) any later version.
-**
+**  This program is free software: you can redistribute it and/or modify
+**  it under the terms of the GNU General Public License as published by
+**  the Free Software Foundation, either version 3 of the License, or
+**  (at your option) any later version.
+**  
 **  This program is distributed in the hope that it will be useful,
 **  but WITHOUT ANY WARRANTY; without even the implied warranty of
 **  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 **  GNU General Public License for more details.
-** 
+**  
 **  You should have received a copy of the GNU General Public License
-**  along with this program; if not, write to the Free Software
-**  Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA
-**  02111-1307, USA.
+**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
 #ifndef HEADER_PARTICLE_SYSTEM_HXX

Modified: trunk/windstille/src/particles/randomizer.hpp
===================================================================
--- trunk/windstille/src/particles/randomizer.hpp	2009-02-10 14:12:18 UTC (rev 2428)
+++ trunk/windstille/src/particles/randomizer.hpp	2009-02-10 14:28:05 UTC (rev 2429)
@@ -1,26 +1,19 @@
-/*  $Id$
-**   __      __ __             ___        __   __ __   __
-**  /  \    /  \__| ____    __| _/_______/  |_|__|  | |  |   ____
-**  \   \/\/   /  |/    \  / __ |/  ___/\   __\  |  | |  | _/ __ \
-**   \        /|  |   |  \/ /_/ |\___ \  |  | |  |  |_|  |_\  ___/
-**    \__/\  / |__|___|  /\____ /____  > |__| |__|____/____/\___  >
-**         \/          \/      \/    \/                         \/
+/*
+**  Windstille - A Sci-Fi Action-Adventure Game
 **  Copyright (C) 2000,2005 Ingo Ruhnke <grumbel at gmx.de>
 **
-**  This program is free software; you can redistribute it and/or
-**  modify it under the terms of the GNU General Public License
-**  as published by the Free Software Foundation; either version 2
-**  of the License, or (at your option) any later version.
-**
+**  This program is free software: you can redistribute it and/or modify
+**  it under the terms of the GNU General Public License as published by
+**  the Free Software Foundation, either version 3 of the License, or
+**  (at your option) any later version.
+**  
 **  This program is distributed in the hope that it will be useful,
 **  but WITHOUT ANY WARRANTY; without even the implied warranty of
 **  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 **  GNU General Public License for more details.
-** 
+**  
 **  You should have received a copy of the GNU General Public License
-**  along with this program; if not, write to the Free Software
-**  Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA
-**  02111-1307, USA.
+**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
 #ifndef HEADER_RANDOMIZER_HXX

Modified: trunk/windstille/src/particles/spark_drawer.cpp
===================================================================
--- trunk/windstille/src/particles/spark_drawer.cpp	2009-02-10 14:12:18 UTC (rev 2428)
+++ trunk/windstille/src/particles/spark_drawer.cpp	2009-02-10 14:28:05 UTC (rev 2429)
@@ -1,26 +1,19 @@
-/*  $Id$
-**   __      __ __             ___        __   __ __   __
-**  /  \    /  \__| ____    __| _/_______/  |_|__|  | |  |   ____
-**  \   \/\/   /  |/    \  / __ |/  ___/\   __\  |  | |  | _/ __ \
-**   \        /|  |   |  \/ /_/ |\___ \  |  | |  |  |_|  |_\  ___/
-**    \__/\  / |__|___|  /\____ /____  > |__| |__|____/____/\___  >
-**         \/          \/      \/    \/                         \/
+/*
+**  Windstille - A Sci-Fi Action-Adventure Game
 **  Copyright (C) 2000,2005 Ingo Ruhnke <grumbel at gmx.de>
 **
-**  This program is free software; you can redistribute it and/or
-**  modify it under the terms of the GNU General Public License
-**  as published by the Free Software Foundation; either version 2
-**  of the License, or (at your option) any later version.
-**
+**  This program is free software: you can redistribute it and/or modify
+**  it under the terms of the GNU General Public License as published by
+**  the Free Software Foundation, either version 3 of the License, or
+**  (at your option) any later version.
+**  
 **  This program is distributed in the hope that it will be useful,
 **  but WITHOUT ANY WARRANTY; without even the implied warranty of
 **  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 **  GNU General Public License for more details.
-** 
+**  
 **  You should have received a copy of the GNU General Public License
-**  along with this program; if not, write to the Free Software
-**  Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA
-**  02111-1307, USA.
+**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
 #include "display/drawing_request.hpp"

Modified: trunk/windstille/src/particles/spark_drawer.hpp
===================================================================
--- trunk/windstille/src/particles/spark_drawer.hpp	2009-02-10 14:12:18 UTC (rev 2428)
+++ trunk/windstille/src/particles/spark_drawer.hpp	2009-02-10 14:28:05 UTC (rev 2429)
@@ -1,26 +1,19 @@
-/*  $Id$
-**   __      __ __             ___        __   __ __   __
-**  /  \    /  \__| ____    __| _/_______/  |_|__|  | |  |   ____
-**  \   \/\/   /  |/    \  / __ |/  ___/\   __\  |  | |  | _/ __ \
-**   \        /|  |   |  \/ /_/ |\___ \  |  | |  |  |_|  |_\  ___/
-**    \__/\  / |__|___|  /\____ /____  > |__| |__|____/____/\___  >
-**         \/          \/      \/    \/                         \/
+/*
+**  Windstille - A Sci-Fi Action-Adventure Game
 **  Copyright (C) 2000,2005 Ingo Ruhnke <grumbel at gmx.de>
 **
-**  This program is free software; you can redistribute it and/or
-**  modify it under the terms of the GNU General Public License
-**  as published by the Free Software Foundation; either version 2
-**  of the License, or (at your option) any later version.
-**
+**  This program is free software: you can redistribute it and/or modify
+**  it under the terms of the GNU General Public License as published by
+**  the Free Software Foundation, either version 3 of the License, or
+**  (at your option) any later version.
+**  
 **  This program is distributed in the hope that it will be useful,
 **  but WITHOUT ANY WARRANTY; without even the implied warranty of
 **  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 **  GNU General Public License for more details.
-** 
+**  
 **  You should have received a copy of the GNU General Public License
-**  along with this program; if not, write to the Free Software
-**  Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA
-**  02111-1307, USA.
+**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
 #ifndef HEADER_PARTICLES_SPARK_DRAWER_HXX

Modified: trunk/windstille/src/particles/surface_drawer.cpp
===================================================================
--- trunk/windstille/src/particles/surface_drawer.cpp	2009-02-10 14:12:18 UTC (rev 2428)
+++ trunk/windstille/src/particles/surface_drawer.cpp	2009-02-10 14:28:05 UTC (rev 2429)
@@ -1,26 +1,19 @@
-/*  $Id$
-**   __      __ __             ___        __   __ __   __
-**  /  \    /  \__| ____    __| _/_______/  |_|__|  | |  |   ____
-**  \   \/\/   /  |/    \  / __ |/  ___/\   __\  |  | |  | _/ __ \
-**   \        /|  |   |  \/ /_/ |\___ \  |  | |  |  |_|  |_\  ___/
-**    \__/\  / |__|___|  /\____ /____  > |__| |__|____/____/\___  >
-**         \/          \/      \/    \/                         \/
+/*
+**  Windstille - A Sci-Fi Action-Adventure Game
 **  Copyright (C) 2000,2005 Ingo Ruhnke <grumbel at gmx.de>
 **
-**  This program is free software; you can redistribute it and/or
-**  modify it under the terms of the GNU General Public License
-**  as published by the Free Software Foundation; either version 2
-**  of the License, or (at your option) any later version.
-**
+**  This program is free software: you can redistribute it and/or modify
+**  it under the terms of the GNU General Public License as published by
+**  the Free Software Foundation, either version 3 of the License, or
+**  (at your option) any later version.
+**  
 **  This program is distributed in the hope that it will be useful,
 **  but WITHOUT ANY WARRANTY; without even the implied warranty of
 **  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 **  GNU General Public License for more details.
-** 
+**  
 **  You should have received a copy of the GNU General Public License
-**  along with this program; if not, write to the Free Software
-**  Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA
-**  02111-1307, USA.
+**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
 #include "display/vertex_array_drawing_request.hpp"

Modified: trunk/windstille/src/particles/surface_drawer.hpp
===================================================================
--- trunk/windstille/src/particles/surface_drawer.hpp	2009-02-10 14:12:18 UTC (rev 2428)
+++ trunk/windstille/src/particles/surface_drawer.hpp	2009-02-10 14:28:05 UTC (rev 2429)
@@ -1,26 +1,19 @@
-/*  $Id$
-**   __      __ __             ___        __   __ __   __
-**  /  \    /  \__| ____    __| _/_______/  |_|__|  | |  |   ____
-**  \   \/\/   /  |/    \  / __ |/  ___/\   __\  |  | |  | _/ __ \
-**   \        /|  |   |  \/ /_/ |\___ \  |  | |  |  |_|  |_\  ___/
-**    \__/\  / |__|___|  /\____ /____  > |__| |__|____/____/\___  >
-**         \/          \/      \/    \/                         \/
+/*
+**  Windstille - A Sci-Fi Action-Adventure Game
 **  Copyright (C) 2000,2005 Ingo Ruhnke <grumbel at gmx.de>
 **
-**  This program is free software; you can redistribute it and/or
-**  modify it under the terms of the GNU General Public License
-**  as published by the Free Software Foundation; either version 2
-**  of the License, or (at your option) any later version.
-**
+**  This program is free software: you can redistribute it and/or modify
+**  it under the terms of the GNU General Public License as published by
+**  the Free Software Foundation, either version 3 of the License, or
+**  (at your option) any later version.
+**  
 **  This program is distributed in the hope that it will be useful,
 **  but WITHOUT ANY WARRANTY; without even the implied warranty of
 **  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 **  GNU General Public License for more details.
-** 
+**  
 **  You should have received a copy of the GNU General Public License
-**  along with this program; if not, write to the Free Software
-**  Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA
-**  02111-1307, USA.
+**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
 #ifndef HEADER_SURFACE_DRAWER_HXX

Modified: trunk/windstille/src/pda.cpp
===================================================================
--- trunk/windstille/src/pda.cpp	2009-02-10 14:12:18 UTC (rev 2428)
+++ trunk/windstille/src/pda.cpp	2009-02-10 14:28:05 UTC (rev 2429)
@@ -1,26 +1,19 @@
-/*  $Id$
-**   __      __ __             ___        __   __ __   __
-**  /  \    /  \__| ____    __| _/_______/  |_|__|  | |  |   ____
-**  \   \/\/   /  |/    \  / __ |/  ___/\   __\  |  | |  | _/ __ \
-**   \        /|  |   |  \/ /_/ |\___ \  |  | |  |  |_|  |_\  ___/
-**    \__/\  / |__|___|  /\____ /____  > |__| |__|____/____/\___  >
-**         \/          \/      \/    \/                         \/
+/*
+**  Windstille - A Sci-Fi Action-Adventure Game
 **  Copyright (C) 2005 Ingo Ruhnke <grumbel at gmx.de>
 **
-**  This program is free software; you can redistribute it and/or
-**  modify it under the terms of the GNU General Public License
-**  as published by the Free Software Foundation; either version 2
-**  of the License, or (at your option) any later version.
-**
+**  This program is free software: you can redistribute it and/or modify
+**  it under the terms of the GNU General Public License as published by
+**  the Free Software Foundation, either version 3 of the License, or
+**  (at your option) any later version.
+**  
 **  This program is distributed in the hope that it will be useful,
 **  but WITHOUT ANY WARRANTY; without even the implied warranty of
 **  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 **  GNU General Public License for more details.
-** 
+**  
 **  You should have received a copy of the GNU General Public License
-**  along with this program; if not, write to the Free Software
-**  Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA
-**  02111-1307, USA.
+**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
 #include "input/input_manager.hpp"

Modified: trunk/windstille/src/pda.hpp
===================================================================
--- trunk/windstille/src/pda.hpp	2009-02-10 14:12:18 UTC (rev 2428)
+++ trunk/windstille/src/pda.hpp	2009-02-10 14:28:05 UTC (rev 2429)
@@ -1,26 +1,19 @@
-/*  $Id$
-**   __      __ __             ___        __   __ __   __
-**  /  \    /  \__| ____    __| _/_______/  |_|__|  | |  |   ____
-**  \   \/\/   /  |/    \  / __ |/  ___/\   __\  |  | |  | _/ __ \
-**   \        /|  |   |  \/ /_/ |\___ \  |  | |  |  |_|  |_\  ___/
-**    \__/\  / |__|___|  /\____ /____  > |__| |__|____/____/\___  >
-**         \/          \/      \/    \/                         \/
+/*
+**  Windstille - A Sci-Fi Action-Adventure Game
 **  Copyright (C) 2005 Ingo Ruhnke <grumbel at gmx.de>
 **
-**  This program is free software; you can redistribute it and/or
-**  modify it under the terms of the GNU General Public License
-**  as published by the Free Software Foundation; either version 2
-**  of the License, or (at your option) any later version.
-**
+**  This program is free software: you can redistribute it and/or modify
+**  it under the terms of the GNU General Public License as published by
+**  the Free Software Foundation, either version 3 of the License, or
+**  (at your option) any later version.
+**  
 **  This program is distributed in the hope that it will be useful,
 **  but WITHOUT ANY WARRANTY; without even the implied warranty of
 **  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 **  GNU General Public License for more details.
-** 
+**  
 **  You should have received a copy of the GNU General Public License
-**  along with this program; if not, write to the Free Software
-**  Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA
-**  02111-1307, USA.
+**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
 #ifndef HEADER_PDA_HPP

Modified: trunk/windstille/src/pistol.cpp
===================================================================
--- trunk/windstille/src/pistol.cpp	2009-02-10 14:12:18 UTC (rev 2428)
+++ trunk/windstille/src/pistol.cpp	2009-02-10 14:28:05 UTC (rev 2429)
@@ -1,4 +1,4 @@
-//  $Id$
+//
 // 
 //  Windstille - A Jump'n Shoot Game
 //  Copyright (C) 2005 Matthias Braun <matze at braunis.de>

Modified: trunk/windstille/src/pistol.hpp
===================================================================
--- trunk/windstille/src/pistol.hpp	2009-02-10 14:12:18 UTC (rev 2428)
+++ trunk/windstille/src/pistol.hpp	2009-02-10 14:28:05 UTC (rev 2429)
@@ -1,4 +1,4 @@
-//  $Id$
+//
 // 
 //  Windstille - A Jump'n Shoot Game
 //  Copyright (C) 2005 Matthias Braun <matze at braunis.de>

Modified: trunk/windstille/src/player.cpp
===================================================================
--- trunk/windstille/src/player.cpp	2009-02-10 14:12:18 UTC (rev 2428)
+++ trunk/windstille/src/player.cpp	2009-02-10 14:28:05 UTC (rev 2429)
@@ -1,5 +1,5 @@
-//  $Id$
 //
+//
 //  Windstille - A Jump'n Shoot Game
 //  Copyright (C) 2000 Ingo Ruhnke <grumbel at gmx.de>
 //

Modified: trunk/windstille/src/player.hpp
===================================================================
--- trunk/windstille/src/player.hpp	2009-02-10 14:12:18 UTC (rev 2428)
+++ trunk/windstille/src/player.hpp	2009-02-10 14:28:05 UTC (rev 2429)
@@ -1,4 +1,4 @@
-//  $Id$
+//
 // 
 //  Windstille - A Jump'n Shoot Game
 //  Copyright (C) 2000 Ingo Ruhnke <grumbel at gmx.de>

Modified: trunk/windstille/src/random.cpp
===================================================================
--- trunk/windstille/src/random.cpp	2009-02-10 14:12:18 UTC (rev 2428)
+++ trunk/windstille/src/random.cpp	2009-02-10 14:28:05 UTC (rev 2429)
@@ -1,26 +1,19 @@
-/*  $Id$
-**   __      __ __             ___        __   __ __   __
-**  /  \    /  \__| ____    __| _/_______/  |_|__|  | |  |   ____
-**  \   \/\/   /  |/    \  / __ |/  ___/\   __\  |  | |  | _/ __ \
-**   \        /|  |   |  \/ /_/ |\___ \  |  | |  |  |_|  |_\  ___/
-**    \__/\  / |__|___|  /\____ /____  > |__| |__|____/____/\___  >
-**         \/          \/      \/    \/                         \/
+/*
+**  Windstille - A Sci-Fi Action-Adventure Game
 **  Copyright (C) 2000,2005 Ingo Ruhnke <grumbel at gmx.de>
 **
-**  This program is free software; you can redistribute it and/or
-**  modify it under the terms of the GNU General Public License
-**  as published by the Free Software Foundation; either version 2
-**  of the License, or (at your option) any later version.
-**
+**  This program is free software: you can redistribute it and/or modify
+**  it under the terms of the GNU General Public License as published by
+**  the Free Software Foundation, either version 3 of the License, or
+**  (at your option) any later version.
+**  
 **  This program is distributed in the hope that it will be useful,
 **  but WITHOUT ANY WARRANTY; without even the implied warranty of
 **  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 **  GNU General Public License for more details.
-** 
+**  
 **  You should have received a copy of the GNU General Public License
-**  along with this program; if not, write to the Free Software
-**  Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA
-**  02111-1307, USA.
+**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
 #include "random.hpp"

Modified: trunk/windstille/src/random.hpp
===================================================================
--- trunk/windstille/src/random.hpp	2009-02-10 14:12:18 UTC (rev 2428)
+++ trunk/windstille/src/random.hpp	2009-02-10 14:28:05 UTC (rev 2429)
@@ -1,26 +1,19 @@
-/*  $Id$
-**   __      __ __             ___        __   __ __   __
-**  /  \    /  \__| ____    __| _/_______/  |_|__|  | |  |   ____
-**  \   \/\/   /  |/    \  / __ |/  ___/\   __\  |  | |  | _/ __ \
-**   \        /|  |   |  \/ /_/ |\___ \  |  | |  |  |_|  |_\  ___/
-**    \__/\  / |__|___|  /\____ /____  > |__| |__|____/____/\___  >
-**         \/          \/      \/    \/                         \/
+/*
+**  Windstille - A Sci-Fi Action-Adventure Game
 **  Copyright (C) 2000,2005 Ingo Ruhnke <grumbel at gmx.de>
 **
-**  This program is free software; you can redistribute it and/or
-**  modify it under the terms of the GNU General Public License
-**  as published by the Free Software Foundation; either version 2
-**  of the License, or (at your option) any later version.
-**
+**  This program is free software: you can redistribute it and/or modify
+**  it under the terms of the GNU General Public License as published by
+**  the Free Software Foundation, either version 3 of the License, or
+**  (at your option) any later version.
+**  
 **  This program is distributed in the hope that it will be useful,
 **  but WITHOUT ANY WARRANTY; without even the implied warranty of
 **  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 **  GNU General Public License for more details.
-** 
+**  
 **  You should have received a copy of the GNU General Public License
-**  along with this program; if not, write to the Free Software
-**  Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA
-**  02111-1307, USA.
+**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
 #ifndef HEADER_RANDOM_HXX

Modified: trunk/windstille/src/refcounter.hpp
===================================================================
--- trunk/windstille/src/refcounter.hpp	2009-02-10 14:12:18 UTC (rev 2428)
+++ trunk/windstille/src/refcounter.hpp	2009-02-10 14:28:05 UTC (rev 2429)
@@ -1,4 +1,4 @@
-//  $Id$
+//
 // 
 //  Windstille - A Jump'n Shoot Game
 //  Copyright (C) 2005 Matthias Braun <matze at braunis.de>

Modified: trunk/windstille/src/response_curve.cpp
===================================================================
--- trunk/windstille/src/response_curve.cpp	2009-02-10 14:12:18 UTC (rev 2428)
+++ trunk/windstille/src/response_curve.cpp	2009-02-10 14:28:05 UTC (rev 2429)
@@ -1,26 +1,19 @@
-/*  $Id$
-**   __      __ __             ___        __   __ __   __
-**  /  \    /  \__| ____    __| _/_______/  |_|__|  | |  |   ____
-**  \   \/\/   /  |/    \  / __ |/  ___/\   __\  |  | |  | _/ __ \
-**   \        /|  |   |  \/ /_/ |\___ \  |  | |  |  |_|  |_\  ___/
-**    \__/\  / |__|___|  /\____ /____  > |__| |__|____/____/\___  >
-**         \/          \/      \/    \/                         \/
+/*
+**  Windstille - A Sci-Fi Action-Adventure Game
 **  Copyright (C) 2005 Ingo Ruhnke <grumbel at gmx.de>
 **
-**  This program is free software; you can redistribute it and/or
-**  modify it under the terms of the GNU General Public License
-**  as published by the Free Software Foundation; either version 2
-**  of the License, or (at your option) any later version.
-**
+**  This program is free software: you can redistribute it and/or modify
+**  it under the terms of the GNU General Public License as published by
+**  the Free Software Foundation, either version 3 of the License, or
+**  (at your option) any later version.
+**  
 **  This program is distributed in the hope that it will be useful,
 **  but WITHOUT ANY WARRANTY; without even the implied warranty of
 **  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 **  GNU General Public License for more details.
-** 
+**  
 **  You should have received a copy of the GNU General Public License
-**  along with this program; if not, write to the Free Software
-**  Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA
-**  02111-1307, USA.
+**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
 #include <assert.h>

Modified: trunk/windstille/src/response_curve.hpp
===================================================================
--- trunk/windstille/src/response_curve.hpp	2009-02-10 14:12:18 UTC (rev 2428)
+++ trunk/windstille/src/response_curve.hpp	2009-02-10 14:28:05 UTC (rev 2429)
@@ -1,26 +1,19 @@
-/*  $Id$
-**   __      __ __             ___        __   __ __   __
-**  /  \    /  \__| ____    __| _/_______/  |_|__|  | |  |   ____
-**  \   \/\/   /  |/    \  / __ |/  ___/\   __\  |  | |  | _/ __ \
-**   \        /|  |   |  \/ /_/ |\___ \  |  | |  |  |_|  |_\  ___/
-**    \__/\  / |__|___|  /\____ /____  > |__| |__|____/____/\___  >
-**         \/          \/      \/    \/                         \/
+/*
+**  Windstille - A Sci-Fi Action-Adventure Game
 **  Copyright (C) 2005 Ingo Ruhnke <grumbel at gmx.de>
 **
-**  This program is free software; you can redistribute it and/or
-**  modify it under the terms of the GNU General Public License
-**  as published by the Free Software Foundation; either version 2
-**  of the License, or (at your option) any later version.
-**
+**  This program is free software: you can redistribute it and/or modify
+**  it under the terms of the GNU General Public License as published by
+**  the Free Software Foundation, either version 3 of the License, or
+**  (at your option) any later version.
+**  
 **  This program is distributed in the hope that it will be useful,
 **  but WITHOUT ANY WARRANTY; without even the implied warranty of
 **  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 **  GNU General Public License for more details.
-** 
+**  
 **  You should have received a copy of the GNU General Public License
-**  along with this program; if not, write to the Free Software
-**  Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA
-**  02111-1307, USA.
+**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
 #ifndef HEADER_RESPONSE_CURVE_HPP

Modified: trunk/windstille/src/screen.cpp
===================================================================
--- trunk/windstille/src/screen.cpp	2009-02-10 14:12:18 UTC (rev 2428)
+++ trunk/windstille/src/screen.cpp	2009-02-10 14:28:05 UTC (rev 2429)
@@ -1,26 +1,19 @@
-/*  $Id$
-**   __      __ __             ___        __   __ __   __
-**  /  \    /  \__| ____    __| _/_______/  |_|__|  | |  |   ____
-**  \   \/\/   /  |/    \  / __ |/  ___/\   __\  |  | |  | _/ __ \
-**   \        /|  |   |  \/ /_/ |\___ \  |  | |  |  |_|  |_\  ___/
-**    \__/\  / |__|___|  /\____ /____  > |__| |__|____/____/\___  >
-**         \/          \/      \/    \/                         \/
+/*
+**  Windstille - A Sci-Fi Action-Adventure Game
 **  Copyright (C) 2000,2005 Ingo Ruhnke <grumbel at gmx.de>
 **
-**  This program is free software; you can redistribute it and/or
-**  modify it under the terms of the GNU General Public License
-**  as published by the Free Software Foundation; either version 2
-**  of the License, or (at your option) any later version.
-**
+**  This program is free software: you can redistribute it and/or modify
+**  it under the terms of the GNU General Public License as published by
+**  the Free Software Foundation, either version 3 of the License, or
+**  (at your option) any later version.
+**  
 **  This program is distributed in the hope that it will be useful,
 **  but WITHOUT ANY WARRANTY; without even the implied warranty of
 **  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 **  GNU General Public License for more details.
-** 
+**  
 **  You should have received a copy of the GNU General Public License
-**  along with this program; if not, write to the Free Software
-**  Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA
-**  02111-1307, USA.
+**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
 #include <math.h>

Modified: trunk/windstille/src/screen.hpp
===================================================================
--- trunk/windstille/src/screen.hpp	2009-02-10 14:12:18 UTC (rev 2428)
+++ trunk/windstille/src/screen.hpp	2009-02-10 14:28:05 UTC (rev 2429)
@@ -1,26 +1,19 @@
-/*  $Id$
-**   __      __ __             ___        __   __ __   __
-**  /  \    /  \__| ____    __| _/_______/  |_|__|  | |  |   ____
-**  \   \/\/   /  |/    \  / __ |/  ___/\   __\  |  | |  | _/ __ \
-**   \        /|  |   |  \/ /_/ |\___ \  |  | |  |  |_|  |_\  ___/
-**    \__/\  / |__|___|  /\____ /____  > |__| |__|____/____/\___  >
-**         \/          \/      \/    \/                         \/
+/*
+**  Windstille - A Sci-Fi Action-Adventure Game
 **  Copyright (C) 2000,2005 Ingo Ruhnke <grumbel at gmx.de>
 **
-**  This program is free software; you can redistribute it and/or
-**  modify it under the terms of the GNU General Public License
-**  as published by the Free Software Foundation; either version 2
-**  of the License, or (at your option) any later version.
-**
+**  This program is free software: you can redistribute it and/or modify
+**  it under the terms of the GNU General Public License as published by
+**  the Free Software Foundation, either version 3 of the License, or
+**  (at your option) any later version.
+**  
 **  This program is distributed in the hope that it will be useful,
 **  but WITHOUT ANY WARRANTY; without even the implied warranty of
 **  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 **  GNU General Public License for more details.
-** 
+**  
 **  You should have received a copy of the GNU General Public License
-**  along with this program; if not, write to the Free Software
-**  Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA
-**  02111-1307, USA.
+**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
 #ifndef HEADER_SCREEN_HXX

Modified: trunk/windstille/src/screen_manager.cpp
===================================================================
--- trunk/windstille/src/screen_manager.cpp	2009-02-10 14:12:18 UTC (rev 2428)
+++ trunk/windstille/src/screen_manager.cpp	2009-02-10 14:28:05 UTC (rev 2429)
@@ -1,26 +1,19 @@
-/*  $Id$
-**   __      __ __             ___        __   __ __   __
-**  /  \    /  \__| ____    __| _/_______/  |_|__|  | |  |   ____
-**  \   \/\/   /  |/    \  / __ |/  ___/\   __\  |  | |  | _/ __ \
-**   \        /|  |   |  \/ /_/ |\___ \  |  | |  |  |_|  |_\  ___/
-**    \__/\  / |__|___|  /\____ /____  > |__| |__|____/____/\___  >
-**         \/          \/      \/    \/                         \/
+/*
+**  Windstille - A Sci-Fi Action-Adventure Game
 **  Copyright (C) 2005 Ingo Ruhnke <grumbel at gmx.de>
 **
-**  This program is free software; you can redistribute it and/or
-**  modify it under the terms of the GNU General Public License
-**  as published by the Free Software Foundation; either version 2
-**  of the License, or (at your option) any later version.
-**
+**  This program is free software: you can redistribute it and/or modify
+**  it under the terms of the GNU General Public License as published by
+**  the Free Software Foundation, either version 3 of the License, or
+**  (at your option) any later version.
+**  
 **  This program is distributed in the hope that it will be useful,
 **  but WITHOUT ANY WARRANTY; without even the implied warranty of
 **  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 **  GNU General Public License for more details.
-** 
+**  
 **  You should have received a copy of the GNU General Public License
-**  along with this program; if not, write to the Free Software
-**  Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA
-**  02111-1307, USA.
+**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
 #include <boost/format.hpp>

Modified: trunk/windstille/src/screen_manager.hpp
===================================================================
--- trunk/windstille/src/screen_manager.hpp	2009-02-10 14:12:18 UTC (rev 2428)
+++ trunk/windstille/src/screen_manager.hpp	2009-02-10 14:28:05 UTC (rev 2429)
@@ -1,26 +1,19 @@
-/*  $Id$
-**   __      __ __             ___        __   __ __   __
-**  /  \    /  \__| ____    __| _/_______/  |_|__|  | |  |   ____
-**  \   \/\/   /  |/    \  / __ |/  ___/\   __\  |  | |  | _/ __ \
-**   \        /|  |   |  \/ /_/ |\___ \  |  | |  |  |_|  |_\  ___/
-**    \__/\  / |__|___|  /\____ /____  > |__| |__|____/____/\___  >
-**         \/          \/      \/    \/                         \/
+/*
+**  Windstille - A Sci-Fi Action-Adventure Game
 **  Copyright (C) 2005 Ingo Ruhnke <grumbel at gmx.de>
 **
-**  This program is free software; you can redistribute it and/or
-**  modify it under the terms of the GNU General Public License
-**  as published by the Free Software Foundation; either version 2
-**  of the License, or (at your option) any later version.
-**
+**  This program is free software: you can redistribute it and/or modify
+**  it under the terms of the GNU General Public License as published by
+**  the Free Software Foundation, either version 3 of the License, or
+**  (at your option) any later version.
+**  
 **  This program is distributed in the hope that it will be useful,
 **  but WITHOUT ANY WARRANTY; without even the implied warranty of
 **  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 **  GNU General Public License for more details.
-** 
+**  
 **  You should have received a copy of the GNU General Public License
-**  along with this program; if not, write to the Free Software
-**  Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA
-**  02111-1307, USA.
+**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
 #ifndef HEADER_SCREEN_MANAGER_HPP

Modified: trunk/windstille/src/scriptable_object.cpp
===================================================================
--- trunk/windstille/src/scriptable_object.cpp	2009-02-10 14:12:18 UTC (rev 2428)
+++ trunk/windstille/src/scriptable_object.cpp	2009-02-10 14:28:05 UTC (rev 2429)
@@ -1,26 +1,19 @@
-/*  $Id$
-**   __      __ __             ___        __   __ __   __
-**  /  \    /  \__| ____    __| _/_______/  |_|__|  | |  |   ____
-**  \   \/\/   /  |/    \  / __ |/  ___/\   __\  |  | |  | _/ __ \
-**   \        /|  |   |  \/ /_/ |\___ \  |  | |  |  |_|  |_\  ___/
-**    \__/\  / |__|___|  /\____ /____  > |__| |__|____/____/\___  >
-**         \/          \/      \/    \/                         \/
+/*
+**  Windstille - A Sci-Fi Action-Adventure Game
 **  Copyright (C) 2005 Ingo Ruhnke <grumbel at gmx.de>
 **
-**  This program is free software; you can redistribute it and/or
-**  modify it under the terms of the GNU General Public License
-**  as published by the Free Software Foundation; either version 2
-**  of the License, or (at your option) any later version.
-**
+**  This program is free software: you can redistribute it and/or modify
+**  it under the terms of the GNU General Public License as published by
+**  the Free Software Foundation, either version 3 of the License, or
+**  (at your option) any later version.
+**  
 **  This program is distributed in the hope that it will be useful,
 **  but WITHOUT ANY WARRANTY; without even the implied warranty of
 **  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 **  GNU General Public License for more details.
-** 
+**  
 **  You should have received a copy of the GNU General Public License
-**  along with this program; if not, write to the Free Software
-**  Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA
-**  02111-1307, USA.
+**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
 

Modified: trunk/windstille/src/scriptable_object.hpp
===================================================================
--- trunk/windstille/src/scriptable_object.hpp	2009-02-10 14:12:18 UTC (rev 2428)
+++ trunk/windstille/src/scriptable_object.hpp	2009-02-10 14:28:05 UTC (rev 2429)
@@ -1,26 +1,19 @@
-/*  $Id$
-**   __      __ __             ___        __   __ __   __
-**  /  \    /  \__| ____    __| _/_______/  |_|__|  | |  |   ____
-**  \   \/\/   /  |/    \  / __ |/  ___/\   __\  |  | |  | _/ __ \
-**   \        /|  |   |  \/ /_/ |\___ \  |  | |  |  |_|  |_\  ___/
-**    \__/\  / |__|___|  /\____ /____  > |__| |__|____/____/\___  >
-**         \/          \/      \/    \/                         \/
+/*
+**  Windstille - A Sci-Fi Action-Adventure Game
 **  Copyright (C) 2005 Ingo Ruhnke <grumbel at gmx.de>
 **
-**  This program is free software; you can redistribute it and/or
-**  modify it under the terms of the GNU General Public License
-**  as published by the Free Software Foundation; either version 2
-**  of the License, or (at your option) any later version.
-**
+**  This program is free software: you can redistribute it and/or modify
+**  it under the terms of the GNU General Public License as published by
+**  the Free Software Foundation, either version 3 of the License, or
+**  (at your option) any later version.
+**  
 **  This program is distributed in the hope that it will be useful,
 **  but WITHOUT ANY WARRANTY; without even the implied warranty of
 **  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 **  GNU General Public License for more details.
-** 
+**  
 **  You should have received a copy of the GNU General Public License
-**  along with this program; if not, write to the Free Software
-**  Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA
-**  02111-1307, USA.
+**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
 

Modified: trunk/windstille/src/scripting/interface.cpp
===================================================================
--- trunk/windstille/src/scripting/interface.cpp	2009-02-10 14:12:18 UTC (rev 2428)
+++ trunk/windstille/src/scripting/interface.cpp	2009-02-10 14:28:05 UTC (rev 2429)
@@ -1,26 +1,19 @@
-/*  $Id: config.cpp 1132 2005-11-28 14:33:49Z grumbel $
-**   __      __ __             ___        __   __ __   __
-**  /  \    /  \__| ____    __| _/_______/  |_|__|  | |  |   ____
-**  \   \/\/   /  |/    \  / __ |/  ___/\   __\  |  | |  | _/ __ \
-**   \        /|  |   |  \/ /_/ |\___ \  |  | |  |  |_|  |_\  ___/
-**    \__/\  / |__|___|  /\____ /____  > |__| |__|____/____/\___  >
-**         \/          \/      \/    \/                         \/
+/*
+**  Windstille - A Sci-Fi Action-Adventure Game
 **  Copyright (C) 2000,2005 Ingo Ruhnke <grumbel at gmx.de>
 **
-**  This program is free software; you can redistribute it and/or
-**  modify it under the terms of the GNU General Public License
-**  as published by the Free Software Foundation; either version 2
-**  of the License, or (at your option) any later version.
-**
+**  This program is free software: you can redistribute it and/or modify
+**  it under the terms of the GNU General Public License as published by
+**  the Free Software Foundation, either version 3 of the License, or
+**  (at your option) any later version.
+**  
 **  This program is distributed in the hope that it will be useful,
 **  but WITHOUT ANY WARRANTY; without even the implied warranty of
 **  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 **  GNU General Public License for more details.
-** 
+**  
 **  You should have received a copy of the GNU General Public License
-**  along with this program; if not, write to the Free Software
-**  Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA
-**  02111-1307, USA.
+**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
 #include <vector>

Modified: trunk/windstille/src/scripting/interface.hpp
===================================================================
--- trunk/windstille/src/scripting/interface.hpp	2009-02-10 14:12:18 UTC (rev 2428)
+++ trunk/windstille/src/scripting/interface.hpp	2009-02-10 14:28:05 UTC (rev 2429)
@@ -1,26 +1,19 @@
-/*  $Id: config.cpp 1132 2005-11-28 14:33:49Z grumbel $
-**   __      __ __             ___        __   __ __   __
-**  /  \    /  \__| ____    __| _/_______/  |_|__|  | |  |   ____
-**  \   \/\/   /  |/    \  / __ |/  ___/\   __\  |  | |  | _/ __ \
-**   \        /|  |   |  \/ /_/ |\___ \  |  | |  |  |_|  |_\  ___/
-**    \__/\  / |__|___|  /\____ /____  > |__| |__|____/____/\___  >
-**         \/          \/      \/    \/                         \/
+/*
+**  Windstille - A Sci-Fi Action-Adventure Game
 **  Copyright (C) 2000,2005 Ingo Ruhnke <grumbel at gmx.de>
 **
-**  This program is free software; you can redistribute it and/or
-**  modify it under the terms of the GNU General Public License
-**  as published by the Free Software Foundation; either version 2
-**  of the License, or (at your option) any later version.
-**
+**  This program is free software: you can redistribute it and/or modify
+**  it under the terms of the GNU General Public License as published by
+**  the Free Software Foundation, either version 3 of the License, or
+**  (at your option) any later version.
+**  
 **  This program is distributed in the hope that it will be useful,
 **  but WITHOUT ANY WARRANTY; without even the implied warranty of
 **  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 **  GNU General Public License for more details.
-** 
+**  
 **  You should have received a copy of the GNU General Public License
-**  along with this program; if not, write to the Free Software
-**  Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA
-**  02111-1307, USA.
+**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
 #ifndef __INTERFACE_HPP__

Modified: trunk/windstille/src/scripting/util.cpp
===================================================================
--- trunk/windstille/src/scripting/util.cpp	2009-02-10 14:12:18 UTC (rev 2428)
+++ trunk/windstille/src/scripting/util.cpp	2009-02-10 14:28:05 UTC (rev 2429)
@@ -1,27 +1,20 @@
-/*  $Id$
-**   __      __ __             ___        __   __ __   __
-**  /  \    /  \__| ____    __| _/_______/  |_|__|  | |  |   ____
-**  \   \/\/   /  |/    \  / __ |/  ___/\   __\  |  | |  | _/ __ \
-**   \        /|  |   |  \/ /_/ |\___ \  |  | |  |  |_|  |_\  ___/
-**    \__/\  / |__|___|  /\____ /____  > |__| |__|____/____/\___  >
-**         \/          \/      \/    \/                         \/
+/*
+**  Windstille - A Sci-Fi Action-Adventure Game
 **  Copyright (C) 2007 Matthias Braun <matze at braunis.de>, 
 **                     Ingo Ruhnke <grumbel at gmx.de>
 **
-**  This program is free software; you can redistribute it and/or
-**  modify it under the terms of the GNU General Public License
-**  as published by the Free Software Foundation; either version 2
-**  of the License, or (at your option) any later version.
-**
+**  This program is free software: you can redistribute it and/or modify
+**  it under the terms of the GNU General Public License as published by
+**  the Free Software Foundation, either version 3 of the License, or
+**  (at your option) any later version.
+**  
 **  This program is distributed in the hope that it will be useful,
 **  but WITHOUT ANY WARRANTY; without even the implied warranty of
 **  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 **  GNU General Public License for more details.
-** 
+**  
 **  You should have received a copy of the GNU General Public License
-**  along with this program; if not, write to the Free Software
-**  Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA
-**  02111-1307, USA.
+**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
 #include <sstream>

Modified: trunk/windstille/src/scripting/util.hpp
===================================================================
--- trunk/windstille/src/scripting/util.hpp	2009-02-10 14:12:18 UTC (rev 2428)
+++ trunk/windstille/src/scripting/util.hpp	2009-02-10 14:28:05 UTC (rev 2429)
@@ -1,26 +1,19 @@
-/*  $Id$
-**   __      __ __             ___        __   __ __   __
-**  /  \    /  \__| ____    __| _/_______/  |_|__|  | |  |   ____
-**  \   \/\/   /  |/    \  / __ |/  ___/\   __\  |  | |  | _/ __ \
-**   \        /|  |   |  \/ /_/ |\___ \  |  | |  |  |_|  |_\  ___/
-**    \__/\  / |__|___|  /\____ /____  > |__| |__|____/____/\___  >
-**         \/          \/      \/    \/                         \/
+/*
+**  Windstille - A Sci-Fi Action-Adventure Game
 **  Copyright (C) 2007 Ingo Ruhnke <grumbel at gmx.de>
 **
-**  This program is free software; you can redistribute it and/or
-**  modify it under the terms of the GNU General Public License
-**  as published by the Free Software Foundation; either version 2
-**  of the License, or (at your option) any later version.
-**
+**  This program is free software: you can redistribute it and/or modify
+**  it under the terms of the GNU General Public License as published by
+**  the Free Software Foundation, either version 3 of the License, or
+**  (at your option) any later version.
+**  
 **  This program is distributed in the hope that it will be useful,
 **  but WITHOUT ANY WARRANTY; without even the implied warranty of
 **  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 **  GNU General Public License for more details.
-** 
+**  
 **  You should have received a copy of the GNU General Public License
-**  along with this program; if not, write to the Free Software
-**  Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA
-**  02111-1307, USA.
+**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
 #ifndef HEADER_WINDSTILLE_SCRIPTING_UTIL_HPP

Modified: trunk/windstille/src/sector.cpp
===================================================================
--- trunk/windstille/src/sector.cpp	2009-02-10 14:12:18 UTC (rev 2428)
+++ trunk/windstille/src/sector.cpp	2009-02-10 14:28:05 UTC (rev 2429)
@@ -1,5 +1,5 @@
-//  $Id$
 //
+//
 //  Windstille - A Jump'n Shoot Game
 //  Copyright (C) 2005 Ingo Ruhnke <grumbel at gmx.de>
 //

Modified: trunk/windstille/src/sector.hpp
===================================================================
--- trunk/windstille/src/sector.hpp	2009-02-10 14:12:18 UTC (rev 2428)
+++ trunk/windstille/src/sector.hpp	2009-02-10 14:28:05 UTC (rev 2429)
@@ -1,4 +1,4 @@
-//  $Id$
+//
 // 
 //  Windstille - A Jump'n Shoot Game
 //  Copyright (C) 2005 Ingo Ruhnke <grumbel at gmx.de>

Modified: trunk/windstille/src/sexpr_file_reader.cpp
===================================================================
--- trunk/windstille/src/sexpr_file_reader.cpp	2009-02-10 14:12:18 UTC (rev 2428)
+++ trunk/windstille/src/sexpr_file_reader.cpp	2009-02-10 14:28:05 UTC (rev 2429)
@@ -1,26 +1,19 @@
-/*  $Id$
-**   __      __ __             ___        __   __ __   __
-**  /  \    /  \__| ____    __| _/_______/  |_|__|  | |  |   ____
-**  \   \/\/   /  |/    \  / __ |/  ___/\   __\  |  | |  | _/ __ \
-**   \        /|  |   |  \/ /_/ |\___ \  |  | |  |  |_|  |_\  ___/
-**    \__/\  / |__|___|  /\____ /____  > |__| |__|____/____/\___  >
-**         \/          \/      \/    \/                         \/
+/*
+**  Windstille - A Sci-Fi Action-Adventure Game
 **  Copyright (C) 2005 Ingo Ruhnke <grumbel at gmx.de>
 **
-**  This program is free software; you can redistribute it and/or
-**  modify it under the terms of the GNU General Public License
-**  as published by the Free Software Foundation; either version 2
-**  of the License, or (at your option) any later version.
-**
+**  This program is free software: you can redistribute it and/or modify
+**  it under the terms of the GNU General Public License as published by
+**  the Free Software Foundation, either version 3 of the License, or
+**  (at your option) any later version.
+**  
 **  This program is distributed in the hope that it will be useful,
 **  but WITHOUT ANY WARRANTY; without even the implied warranty of
 **  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 **  GNU General Public License for more details.
-** 
+**  
 **  You should have received a copy of the GNU General Public License
-**  along with this program; if not, write to the Free Software
-**  Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA
-**  02111-1307, USA.
+**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
 #include <assert.h>

Modified: trunk/windstille/src/sexpr_file_reader.hpp
===================================================================
--- trunk/windstille/src/sexpr_file_reader.hpp	2009-02-10 14:12:18 UTC (rev 2428)
+++ trunk/windstille/src/sexpr_file_reader.hpp	2009-02-10 14:28:05 UTC (rev 2429)
@@ -1,26 +1,19 @@
-/*  $Id$
-**   __      __ __             ___        __   __ __   __
-**  /  \    /  \__| ____    __| _/_______/  |_|__|  | |  |   ____
-**  \   \/\/   /  |/    \  / __ |/  ___/\   __\  |  | |  | _/ __ \
-**   \        /|  |   |  \/ /_/ |\___ \  |  | |  |  |_|  |_\  ___/
-**    \__/\  / |__|___|  /\____ /____  > |__| |__|____/____/\___  >
-**         \/          \/      \/    \/                         \/
+/*
+**  Windstille - A Sci-Fi Action-Adventure Game
 **  Copyright (C) 2005 Ingo Ruhnke <grumbel at gmx.de>
 **
-**  This program is free software; you can redistribute it and/or
-**  modify it under the terms of the GNU General Public License
-**  as published by the Free Software Foundation; either version 2
-**  of the License, or (at your option) any later version.
-**
+**  This program is free software: you can redistribute it and/or modify
+**  it under the terms of the GNU General Public License as published by
+**  the Free Software Foundation, either version 3 of the License, or
+**  (at your option) any later version.
+**  
 **  This program is distributed in the hope that it will be useful,
 **  but WITHOUT ANY WARRANTY; without even the implied warranty of
 **  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 **  GNU General Public License for more details.
-** 
+**  
 **  You should have received a copy of the GNU General Public License
-**  along with this program; if not, write to the Free Software
-**  Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA
-**  02111-1307, USA.
+**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
 #ifndef HEADER_SEXPR_FILE_READER_HPP

Modified: trunk/windstille/src/sprite2d/data.cpp
===================================================================
--- trunk/windstille/src/sprite2d/data.cpp	2009-02-10 14:12:18 UTC (rev 2428)
+++ trunk/windstille/src/sprite2d/data.cpp	2009-02-10 14:28:05 UTC (rev 2429)
@@ -1,27 +1,20 @@
-/*  $Id: windstille.hpp 1460 2007-06-18 04:03:31Z grumbel $
-**   __      __ __             ___        __   __ __   __
-**  /  \    /  \__| ____    __| _/_______/  |_|__|  | |  |   ____
-**  \   \/\/   /  |/    \  / __ |/  ___/\   __\  |  | |  | _/ __ \
-**   \        /|  |   |  \/ /_/ |\___ \  |  | |  |  |_|  |_\  ___/
-**    \__/\  / |__|___|  /\____ /____  > |__| |__|____/____/\___  >
-**         \/          \/      \/    \/                         \/
+/*
+**  Windstille - A Sci-Fi Action-Adventure Game
 **  Copyright (C) 2005,2007 Matthias Braun <matze at braunis.de>,
 **                          Ingo Ruhnke <grumbel at gmx.de>
 **
-**  This program is free software; you can redistribute it and/or
-**  modify it under the terms of the GNU General Public License
-**  as published by the Free Software Foundation; either version 2
-**  of the License, or (at your option) any later version.
-**
+**  This program is free software: you can redistribute it and/or modify
+**  it under the terms of the GNU General Public License as published by
+**  the Free Software Foundation, either version 3 of the License, or
+**  (at your option) any later version.
+**  
 **  This program is distributed in the hope that it will be useful,
 **  but WITHOUT ANY WARRANTY; without even the implied warranty of
 **  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 **  GNU General Public License for more details.
-** 
+**  
 **  You should have received a copy of the GNU General Public License
-**  along with this program; if not, write to the Free Software
-**  Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA
-**  02111-1307, USA.
+**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
 #include <config.h>

Modified: trunk/windstille/src/sprite2d/data.hpp
===================================================================
--- trunk/windstille/src/sprite2d/data.hpp	2009-02-10 14:12:18 UTC (rev 2428)
+++ trunk/windstille/src/sprite2d/data.hpp	2009-02-10 14:28:05 UTC (rev 2429)
@@ -1,27 +1,20 @@
-/*  $Id: windstille.hpp 1460 2007-06-18 04:03:31Z grumbel $
-**   __      __ __             ___        __   __ __   __
-**  /  \    /  \__| ____    __| _/_______/  |_|__|  | |  |   ____
-**  \   \/\/   /  |/    \  / __ |/  ___/\   __\  |  | |  | _/ __ \
-**   \        /|  |   |  \/ /_/ |\___ \  |  | |  |  |_|  |_\  ___/
-**    \__/\  / |__|___|  /\____ /____  > |__| |__|____/____/\___  >
-**         \/          \/      \/    \/                         \/
+/*
+**  Windstille - A Sci-Fi Action-Adventure Game
 **  Copyright (C) 2005,2007 Matthias Braun <matze at braunis.de>,
 **                          Ingo Ruhnke <grumbel at gmx.de>
 **
-**  This program is free software; you can redistribute it and/or
-**  modify it under the terms of the GNU General Public License
-**  as published by the Free Software Foundation; either version 2
-**  of the License, or (at your option) any later version.
-**
+**  This program is free software: you can redistribute it and/or modify
+**  it under the terms of the GNU General Public License as published by
+**  the Free Software Foundation, either version 3 of the License, or
+**  (at your option) any later version.
+**  
 **  This program is distributed in the hope that it will be useful,
 **  but WITHOUT ANY WARRANTY; without even the implied warranty of
 **  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 **  GNU General Public License for more details.
-** 
+**  
 **  You should have received a copy of the GNU General Public License
-**  along with this program; if not, write to the Free Software
-**  Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA
-**  02111-1307, USA.
+**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
 #ifndef __SPRITE_DATA_HPP__

Modified: trunk/windstille/src/sprite2d/manager.cpp
===================================================================
--- trunk/windstille/src/sprite2d/manager.cpp	2009-02-10 14:12:18 UTC (rev 2428)
+++ trunk/windstille/src/sprite2d/manager.cpp	2009-02-10 14:28:05 UTC (rev 2429)
@@ -1,27 +1,20 @@
-/*  $Id: windstille.hpp 1460 2007-06-18 04:03:31Z grumbel $
-**   __      __ __             ___        __   __ __   __
-**  /  \    /  \__| ____    __| _/_______/  |_|__|  | |  |   ____
-**  \   \/\/   /  |/    \  / __ |/  ___/\   __\  |  | |  | _/ __ \
-**   \        /|  |   |  \/ /_/ |\___ \  |  | |  |  |_|  |_\  ___/
-**    \__/\  / |__|___|  /\____ /____  > |__| |__|____/____/\___  >
-**         \/          \/      \/    \/                         \/
+/*
+**  Windstille - A Sci-Fi Action-Adventure Game
 **  Copyright (C) 2005,2007 Matthias Braun <matze at braunis.de>,
 **                          Ingo Ruhnke <grumbel at gmx.de>
 **
-**  This program is free software; you can redistribute it and/or
-**  modify it under the terms of the GNU General Public License
-**  as published by the Free Software Foundation; either version 2
-**  of the License, or (at your option) any later version.
-**
+**  This program is free software: you can redistribute it and/or modify
+**  it under the terms of the GNU General Public License as published by
+**  the Free Software Foundation, either version 3 of the License, or
+**  (at your option) any later version.
+**  
 **  This program is distributed in the hope that it will be useful,
 **  but WITHOUT ANY WARRANTY; without even the implied warranty of
 **  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 **  GNU General Public License for more details.
-** 
+**  
 **  You should have received a copy of the GNU General Public License
-**  along with this program; if not, write to the Free Software
-**  Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA
-**  02111-1307, USA.
+**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
 #include <config.h>

Modified: trunk/windstille/src/sprite2d/manager.hpp
===================================================================
--- trunk/windstille/src/sprite2d/manager.hpp	2009-02-10 14:12:18 UTC (rev 2428)
+++ trunk/windstille/src/sprite2d/manager.hpp	2009-02-10 14:28:05 UTC (rev 2429)
@@ -1,27 +1,20 @@
-/*  $Id: windstille.hpp 1460 2007-06-18 04:03:31Z grumbel $
-**   __      __ __             ___        __   __ __   __
-**  /  \    /  \__| ____    __| _/_______/  |_|__|  | |  |   ____
-**  \   \/\/   /  |/    \  / __ |/  ___/\   __\  |  | |  | _/ __ \
-**   \        /|  |   |  \/ /_/ |\___ \  |  | |  |  |_|  |_\  ___/
-**    \__/\  / |__|___|  /\____ /____  > |__| |__|____/____/\___  >
-**         \/          \/      \/    \/                         \/
+/*
+**  Windstille - A Sci-Fi Action-Adventure Game
 **  Copyright (C) 2005,2007 Matthias Braun <matze at braunis.de>,
 **                          Ingo Ruhnke <grumbel at gmx.de>
 **
-**  This program is free software; you can redistribute it and/or
-**  modify it under the terms of the GNU General Public License
-**  as published by the Free Software Foundation; either version 2
-**  of the License, or (at your option) any later version.
-**
+**  This program is free software: you can redistribute it and/or modify
+**  it under the terms of the GNU General Public License as published by
+**  the Free Software Foundation, either version 3 of the License, or
+**  (at your option) any later version.
+**  
 **  This program is distributed in the hope that it will be useful,
 **  but WITHOUT ANY WARRANTY; without even the implied warranty of
 **  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 **  GNU General Public License for more details.
-** 
+**  
 **  You should have received a copy of the GNU General Public License
-**  along with this program; if not, write to the Free Software
-**  Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA
-**  02111-1307, USA.
+**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
 #ifndef __SPRITE2D_MANAGER_HPP__

Modified: trunk/windstille/src/sprite2d/sprite.cpp
===================================================================
--- trunk/windstille/src/sprite2d/sprite.cpp	2009-02-10 14:12:18 UTC (rev 2428)
+++ trunk/windstille/src/sprite2d/sprite.cpp	2009-02-10 14:28:05 UTC (rev 2429)
@@ -1,27 +1,20 @@
-/*  $Id: windstille.hpp 1460 2007-06-18 04:03:31Z grumbel $
-**   __      __ __             ___        __   __ __   __
-**  /  \    /  \__| ____    __| _/_______/  |_|__|  | |  |   ____
-**  \   \/\/   /  |/    \  / __ |/  ___/\   __\  |  | |  | _/ __ \
-**   \        /|  |   |  \/ /_/ |\___ \  |  | |  |  |_|  |_\  ___/
-**    \__/\  / |__|___|  /\____ /____  > |__| |__|____/____/\___  >
-**         \/          \/      \/    \/                         \/
+/*
+**  Windstille - A Sci-Fi Action-Adventure Game
 **  Copyright (C) 2005,2007 Matthias Braun <matze at braunis.de>,
 **                          Ingo Ruhnke <grumbel at gmx.de>
 **
-**  This program is free software; you can redistribute it and/or
-**  modify it under the terms of the GNU General Public License
-**  as published by the Free Software Foundation; either version 2
-**  of the License, or (at your option) any later version.
-**
+**  This program is free software: you can redistribute it and/or modify
+**  it under the terms of the GNU General Public License as published by
+**  the Free Software Foundation, either version 3 of the License, or
+**  (at your option) any later version.
+**  
 **  This program is distributed in the hope that it will be useful,
 **  but WITHOUT ANY WARRANTY; without even the implied warranty of
 **  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 **  GNU General Public License for more details.
-** 
+**  
 **  You should have received a copy of the GNU General Public License
-**  along with this program; if not, write to the Free Software
-**  Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA
-**  02111-1307, USA.
+**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
 #include "sprite2d/sprite.hpp"

Modified: trunk/windstille/src/sprite2d/sprite.hpp
===================================================================
--- trunk/windstille/src/sprite2d/sprite.hpp	2009-02-10 14:12:18 UTC (rev 2428)
+++ trunk/windstille/src/sprite2d/sprite.hpp	2009-02-10 14:28:05 UTC (rev 2429)
@@ -1,27 +1,20 @@
-/*  $Id: windstille.hpp 1460 2007-06-18 04:03:31Z grumbel $
-**   __      __ __             ___        __   __ __   __
-**  /  \    /  \__| ____    __| _/_______/  |_|__|  | |  |   ____
-**  \   \/\/   /  |/    \  / __ |/  ___/\   __\  |  | |  | _/ __ \
-**   \        /|  |   |  \/ /_/ |\___ \  |  | |  |  |_|  |_\  ___/
-**    \__/\  / |__|___|  /\____ /____  > |__| |__|____/____/\___  >
-**         \/          \/      \/    \/                         \/
+/*
+**  Windstille - A Sci-Fi Action-Adventure Game
 **  Copyright (C) 2005,2007 Matthias Braun <matze at braunis.de>,
 **                          Ingo Ruhnke <grumbel at gmx.de>
 **
-**  This program is free software; you can redistribute it and/or
-**  modify it under the terms of the GNU General Public License
-**  as published by the Free Software Foundation; either version 2
-**  of the License, or (at your option) any later version.
-**
+**  This program is free software: you can redistribute it and/or modify
+**  it under the terms of the GNU General Public License as published by
+**  the Free Software Foundation, either version 3 of the License, or
+**  (at your option) any later version.
+**  
 **  This program is distributed in the hope that it will be useful,
 **  but WITHOUT ANY WARRANTY; without even the implied warranty of
 **  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 **  GNU General Public License for more details.
-** 
+**  
 **  You should have received a copy of the GNU General Public License
-**  along with this program; if not, write to the Free Software
-**  Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA
-**  02111-1307, USA.
+**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
 #ifndef __SPRITE2D_SPRITE_HPP__

Modified: trunk/windstille/src/sprite2dview.cpp
===================================================================
--- trunk/windstille/src/sprite2dview.cpp	2009-02-10 14:12:18 UTC (rev 2428)
+++ trunk/windstille/src/sprite2dview.cpp	2009-02-10 14:28:05 UTC (rev 2429)
@@ -1,26 +1,19 @@
-/*  $Id$
-**   __      __ __             ___        __   __ __   __
-**  /  \    /  \__| ____    __| _/_______/  |_|__|  | |  |   ____
-**  \   \/\/   /  |/    \  / __ |/  ___/\   __\  |  | |  | _/ __ \
-**   \        /|  |   |  \/ /_/ |\___ \  |  | |  |  |_|  |_\  ___/
-**    \__/\  / |__|___|  /\____ /____  > |__| |__|____/____/\___  >
-**         \/          \/      \/    \/                         \/
+/*
+**  Windstille - A Sci-Fi Action-Adventure Game
 **  Copyright (C) 2005 Ingo Ruhnke <grumbel at gmx.de>
 **
-**  This program is free software; you can redistribute it and/or
-**  modify it under the terms of the GNU General Public License
-**  as published by the Free Software Foundation; either version 2
-**  of the License, or (at your option) any later version.
-**
+**  This program is free software: you can redistribute it and/or modify
+**  it under the terms of the GNU General Public License as published by
+**  the Free Software Foundation, either version 3 of the License, or
+**  (at your option) any later version.
+**  
 **  This program is distributed in the hope that it will be useful,
 **  but WITHOUT ANY WARRANTY; without even the implied warranty of
 **  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 **  GNU General Public License for more details.
-** 
+**  
 **  You should have received a copy of the GNU General Public License
-**  along with this program; if not, write to the Free Software
-**  Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA
-**  02111-1307, USA.
+**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
 #include <iostream>

Modified: trunk/windstille/src/sprite2dview.hpp
===================================================================
--- trunk/windstille/src/sprite2dview.hpp	2009-02-10 14:12:18 UTC (rev 2428)
+++ trunk/windstille/src/sprite2dview.hpp	2009-02-10 14:28:05 UTC (rev 2429)
@@ -1,26 +1,19 @@
-/*  $Id$
-**   __      __ __             ___        __   __ __   __
-**  /  \    /  \__| ____    __| _/_______/  |_|__|  | |  |   ____
-**  \   \/\/   /  |/    \  / __ |/  ___/\   __\  |  | |  | _/ __ \
-**   \        /|  |   |  \/ /_/ |\___ \  |  | |  |  |_|  |_\  ___/
-**    \__/\  / |__|___|  /\____ /____  > |__| |__|____/____/\___  >
-**         \/          \/      \/    \/                         \/
+/*
+**  Windstille - A Sci-Fi Action-Adventure Game
 **  Copyright (C) 2005 Ingo Ruhnke <grumbel at gmx.de>
 **
-**  This program is free software; you can redistribute it and/or
-**  modify it under the terms of the GNU General Public License
-**  as published by the Free Software Foundation; either version 2
-**  of the License, or (at your option) any later version.
-**
+**  This program is free software: you can redistribute it and/or modify
+**  it under the terms of the GNU General Public License as published by
+**  the Free Software Foundation, either version 3 of the License, or
+**  (at your option) any later version.
+**  
 **  This program is distributed in the hope that it will be useful,
 **  but WITHOUT ANY WARRANTY; without even the implied warranty of
 **  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 **  GNU General Public License for more details.
-** 
+**  
 **  You should have received a copy of the GNU General Public License
-**  along with this program; if not, write to the Free Software
-**  Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA
-**  02111-1307, USA.
+**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
 #ifndef HEADER_SPRITE2DVIEW_HPP

Modified: trunk/windstille/src/sprite3d/data.hpp
===================================================================
--- trunk/windstille/src/sprite3d/data.hpp	2009-02-10 14:12:18 UTC (rev 2428)
+++ trunk/windstille/src/sprite3d/data.hpp	2009-02-10 14:28:05 UTC (rev 2429)
@@ -1,4 +1,4 @@
-//  $Id$
+//
 // 
 //  Copyright (C) 2005 Matthias Braun <matze at braunis.de>
 //

Modified: trunk/windstille/src/sprite3d/sprite3d.cpp
===================================================================
--- trunk/windstille/src/sprite3d/sprite3d.cpp	2009-02-10 14:12:18 UTC (rev 2428)
+++ trunk/windstille/src/sprite3d/sprite3d.cpp	2009-02-10 14:28:05 UTC (rev 2429)
@@ -1,5 +1,5 @@
-//  $Id$
 //
+//
 //  Copyright (C) 2005 Matthias Braun <matze at braunis.de>
 //
 //  This program is free software; you can redistribute it and/or

Modified: trunk/windstille/src/sprite3d/sprite3d.hpp
===================================================================
--- trunk/windstille/src/sprite3d/sprite3d.hpp	2009-02-10 14:12:18 UTC (rev 2428)
+++ trunk/windstille/src/sprite3d/sprite3d.hpp	2009-02-10 14:28:05 UTC (rev 2429)
@@ -1,4 +1,4 @@
-//  $Id$
+//
 // 
 //  Copyright (C) 2005 Matthias Braun <matze at braunis.de>
 //

Modified: trunk/windstille/src/sprite3dview.cpp
===================================================================
--- trunk/windstille/src/sprite3dview.cpp	2009-02-10 14:12:18 UTC (rev 2428)
+++ trunk/windstille/src/sprite3dview.cpp	2009-02-10 14:28:05 UTC (rev 2429)
@@ -1,26 +1,19 @@
-/*  $Id$
-**   __      __ __             ___        __   __ __   __
-**  /  \    /  \__| ____    __| _/_______/  |_|__|  | |  |   ____
-**  \   \/\/   /  |/    \  / __ |/  ___/\   __\  |  | |  | _/ __ \
-**   \        /|  |   |  \/ /_/ |\___ \  |  | |  |  |_|  |_\  ___/
-**    \__/\  / |__|___|  /\____ /____  > |__| |__|____/____/\___  >
-**         \/          \/      \/    \/                         \/
+/*
+**  Windstille - A Sci-Fi Action-Adventure Game
 **  Copyright (C) 2005 Ingo Ruhnke <grumbel at gmx.de>
 **
-**  This program is free software; you can redistribute it and/or
-**  modify it under the terms of the GNU General Public License
-**  as published by the Free Software Foundation; either version 2
-**  of the License, or (at your option) any later version.
-**
+**  This program is free software: you can redistribute it and/or modify
+**  it under the terms of the GNU General Public License as published by
+**  the Free Software Foundation, either version 3 of the License, or
+**  (at your option) any later version.
+**  
 **  This program is distributed in the hope that it will be useful,
 **  but WITHOUT ANY WARRANTY; without even the implied warranty of
 **  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 **  GNU General Public License for more details.
-** 
+**  
 **  You should have received a copy of the GNU General Public License
-**  along with this program; if not, write to the Free Software
-**  Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA
-**  02111-1307, USA.
+**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
 #include <iostream>

Modified: trunk/windstille/src/sprite3dview.hpp
===================================================================
--- trunk/windstille/src/sprite3dview.hpp	2009-02-10 14:12:18 UTC (rev 2428)
+++ trunk/windstille/src/sprite3dview.hpp	2009-02-10 14:28:05 UTC (rev 2429)
@@ -1,26 +1,19 @@
-/*  $Id$
-**   __      __ __             ___        __   __ __   __
-**  /  \    /  \__| ____    __| _/_______/  |_|__|  | |  |   ____
-**  \   \/\/   /  |/    \  / __ |/  ___/\   __\  |  | |  | _/ __ \
-**   \        /|  |   |  \/ /_/ |\___ \  |  | |  |  |_|  |_\  ___/
-**    \__/\  / |__|___|  /\____ /____  > |__| |__|____/____/\___  >
-**         \/          \/      \/    \/                         \/
+/*
+**  Windstille - A Sci-Fi Action-Adventure Game
 **  Copyright (C) 2005 Ingo Ruhnke <grumbel at gmx.de>
 **
-**  This program is free software; you can redistribute it and/or
-**  modify it under the terms of the GNU General Public License
-**  as published by the Free Software Foundation; either version 2
-**  of the License, or (at your option) any later version.
-**
+**  This program is free software: you can redistribute it and/or modify
+**  it under the terms of the GNU General Public License as published by
+**  the Free Software Foundation, either version 3 of the License, or
+**  (at your option) any later version.
+**  
 **  This program is distributed in the hope that it will be useful,
 **  but WITHOUT ANY WARRANTY; without even the implied warranty of
 **  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 **  GNU General Public License for more details.
-** 
+**  
 **  You should have received a copy of the GNU General Public License
-**  along with this program; if not, write to the Free Software
-**  Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA
-**  02111-1307, USA.
+**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
 #ifndef HEADER_SPRITE3DVIEW_HPP

Modified: trunk/windstille/src/text_area.cpp
===================================================================
--- trunk/windstille/src/text_area.cpp	2009-02-10 14:12:18 UTC (rev 2428)
+++ trunk/windstille/src/text_area.cpp	2009-02-10 14:28:05 UTC (rev 2429)
@@ -1,26 +1,19 @@
-/*  $Id$
-**   __      __ __             ___        __   __ __   __
-**  /  \    /  \__| ____    __| _/_______/  |_|__|  | |  |   ____
-**  \   \/\/   /  |/    \  / __ |/  ___/\   __\  |  | |  | _/ __ \
-**   \        /|  |   |  \/ /_/ |\___ \  |  | |  |  |_|  |_\  ___/
-**    \__/\  / |__|___|  /\____ /____  > |__| |__|____/____/\___  >
-**         \/          \/      \/    \/                         \/
+/*
+**  Windstille - A Sci-Fi Action-Adventure Game
 **  Copyright (C) 2005 Ingo Ruhnke <grumbel at gmx.de>
 **
-**  This program is free software; you can redistribute it and/or
-**  modify it under the terms of the GNU General Public License
-**  as published by the Free Software Foundation; either version 2
-**  of the License, or (at your option) any later version.
-**
+**  This program is free software: you can redistribute it and/or modify
+**  it under the terms of the GNU General Public License as published by
+**  the Free Software Foundation, either version 3 of the License, or
+**  (at your option) any later version.
+**  
 **  This program is distributed in the hope that it will be useful,
 **  but WITHOUT ANY WARRANTY; without even the implied warranty of
 **  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 **  GNU General Public License for more details.
-** 
+**  
 **  You should have received a copy of the GNU General Public License
-**  along with this program; if not, write to the Free Software
-**  Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA
-**  02111-1307, USA.
+**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
 #include <assert.h>

Modified: trunk/windstille/src/text_area.hpp
===================================================================
--- trunk/windstille/src/text_area.hpp	2009-02-10 14:12:18 UTC (rev 2428)
+++ trunk/windstille/src/text_area.hpp	2009-02-10 14:28:05 UTC (rev 2429)
@@ -1,26 +1,19 @@
-/*  $Id$
-**   __      __ __             ___        __   __ __   __
-**  /  \    /  \__| ____    __| _/_______/  |_|__|  | |  |   ____
-**  \   \/\/   /  |/    \  / __ |/  ___/\   __\  |  | |  | _/ __ \
-**   \        /|  |   |  \/ /_/ |\___ \  |  | |  |  |_|  |_\  ___/
-**    \__/\  / |__|___|  /\____ /____  > |__| |__|____/____/\___  >
-**         \/          \/      \/    \/                         \/
+/*
+**  Windstille - A Sci-Fi Action-Adventure Game
 **  Copyright (C) 2005 Ingo Ruhnke <grumbel at gmx.de>
 **
-**  This program is free software; you can redistribute it and/or
-**  modify it under the terms of the GNU General Public License
-**  as published by the Free Software Foundation; either version 2
-**  of the License, or (at your option) any later version.
-**
+**  This program is free software: you can redistribute it and/or modify
+**  it under the terms of the GNU General Public License as published by
+**  the Free Software Foundation, either version 3 of the License, or
+**  (at your option) any later version.
+**  
 **  This program is distributed in the hope that it will be useful,
 **  but WITHOUT ANY WARRANTY; without even the implied warranty of
 **  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 **  GNU General Public License for more details.
-** 
+**  
 **  You should have received a copy of the GNU General Public License
-**  along with this program; if not, write to the Free Software
-**  Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA
-**  02111-1307, USA.
+**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
 #ifndef HEADER_TEXT_AREA_HPP

Modified: trunk/windstille/src/tile.cpp
===================================================================
--- trunk/windstille/src/tile.cpp	2009-02-10 14:12:18 UTC (rev 2428)
+++ trunk/windstille/src/tile.cpp	2009-02-10 14:28:05 UTC (rev 2429)
@@ -1,5 +1,5 @@
-//  $Id$
 //
+//
 //  Windstille - A Jump'n Shoot Game
 //  Copyright (C) 2002 Ingo Ruhnke <grumbel at gmx.de>
 //

Modified: trunk/windstille/src/tile.hpp
===================================================================
--- trunk/windstille/src/tile.hpp	2009-02-10 14:12:18 UTC (rev 2428)
+++ trunk/windstille/src/tile.hpp	2009-02-10 14:28:05 UTC (rev 2429)
@@ -1,4 +1,4 @@
-//  $Id$
+//
 // 
 //  Windstille - A Jump'n Shoot Game
 //  Copyright (C) 2002 Ingo Ruhnke <grumbel at gmx.de>

Modified: trunk/windstille/src/tile_description.cpp
===================================================================
--- trunk/windstille/src/tile_description.cpp	2009-02-10 14:12:18 UTC (rev 2428)
+++ trunk/windstille/src/tile_description.cpp	2009-02-10 14:28:05 UTC (rev 2429)
@@ -1,26 +1,19 @@
-/*  $Id$
-**   __      __ __             ___        __   __ __   __
-**  /  \    /  \__| ____    __| _/_______/  |_|__|  | |  |   ____
-**  \   \/\/   /  |/    \  / __ |/  ___/\   __\  |  | |  | _/ __ \
-**   \        /|  |   |  \/ /_/ |\___ \  |  | |  |  |_|  |_\  ___/
-**    \__/\  / |__|___|  /\____ /____  > |__| |__|____/____/\___  >
-**         \/          \/      \/    \/                         \/
+/*
+**  Windstille - A Sci-Fi Action-Adventure Game
 **  Copyright (C) 2005 Ingo Ruhnke <grumbel at gmx.de>
 **
-**  This program is free software; you can redistribute it and/or
-**  modify it under the terms of the GNU General Public License
-**  as published by the Free Software Foundation; either version 2
-**  of the License, or (at your option) any later version.
-**
+**  This program is free software: you can redistribute it and/or modify
+**  it under the terms of the GNU General Public License as published by
+**  the Free Software Foundation, either version 3 of the License, or
+**  (at your option) any later version.
+**  
 **  This program is distributed in the hope that it will be useful,
 **  but WITHOUT ANY WARRANTY; without even the implied warranty of
 **  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 **  GNU General Public License for more details.
-** 
+**  
 **  You should have received a copy of the GNU General Public License
-**  along with this program; if not, write to the Free Software
-**  Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA
-**  02111-1307, USA.
+**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
 #include <iostream>

Modified: trunk/windstille/src/tile_description.hpp
===================================================================
--- trunk/windstille/src/tile_description.hpp	2009-02-10 14:12:18 UTC (rev 2428)
+++ trunk/windstille/src/tile_description.hpp	2009-02-10 14:28:05 UTC (rev 2429)
@@ -1,26 +1,19 @@
-/*  $Id$
-**   __      __ __             ___        __   __ __   __
-**  /  \    /  \__| ____    __| _/_______/  |_|__|  | |  |   ____
-**  \   \/\/   /  |/    \  / __ |/  ___/\   __\  |  | |  | _/ __ \
-**   \        /|  |   |  \/ /_/ |\___ \  |  | |  |  |_|  |_\  ___/
-**    \__/\  / |__|___|  /\____ /____  > |__| |__|____/____/\___  >
-**         \/          \/      \/    \/                         \/
+/*
+**  Windstille - A Sci-Fi Action-Adventure Game
 **  Copyright (C) 2005 Ingo Ruhnke <grumbel at gmx.de>
 **
-**  This program is free software; you can redistribute it and/or
-**  modify it under the terms of the GNU General Public License
-**  as published by the Free Software Foundation; either version 2
-**  of the License, or (at your option) any later version.
-**
+**  This program is free software: you can redistribute it and/or modify
+**  it under the terms of the GNU General Public License as published by
+**  the Free Software Foundation, either version 3 of the License, or
+**  (at your option) any later version.
+**  
 **  This program is distributed in the hope that it will be useful,
 **  but WITHOUT ANY WARRANTY; without even the implied warranty of
 **  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 **  GNU General Public License for more details.
-** 
+**  
 **  You should have received a copy of the GNU General Public License
-**  along with this program; if not, write to the Free Software
-**  Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA
-**  02111-1307, USA.
+**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
 #ifndef HEADER_TILE_DESCRIPTION_HPP

Modified: trunk/windstille/src/tile_factory.cpp
===================================================================
--- trunk/windstille/src/tile_factory.cpp	2009-02-10 14:12:18 UTC (rev 2428)
+++ trunk/windstille/src/tile_factory.cpp	2009-02-10 14:28:05 UTC (rev 2429)
@@ -1,5 +1,5 @@
-//  $Id$
 //
+//
 //  Windstille - A Jump'n Shoot Game
 //  Copyright (C) 2000 Ingo Ruhnke <grumbel at gmx.de>
 //

Modified: trunk/windstille/src/tile_factory.hpp
===================================================================
--- trunk/windstille/src/tile_factory.hpp	2009-02-10 14:12:18 UTC (rev 2428)
+++ trunk/windstille/src/tile_factory.hpp	2009-02-10 14:28:05 UTC (rev 2429)
@@ -1,4 +1,4 @@
-//  $Id$
+//
 // 
 //  Windstille - A Jump'n Shoot Game
 //  Copyright (C) 2000 Ingo Ruhnke <grumbel at gmx.de>

Modified: trunk/windstille/src/tile_map.cpp
===================================================================
--- trunk/windstille/src/tile_map.cpp	2009-02-10 14:12:18 UTC (rev 2428)
+++ trunk/windstille/src/tile_map.cpp	2009-02-10 14:28:05 UTC (rev 2429)
@@ -1,5 +1,5 @@
-//  $Id$
 //
+//
 //  Windstille - A Jump'n Shoot Game
 //  Copyright (C) 2000 Ingo Ruhnke <grumbel at gmx.de>
 //

Modified: trunk/windstille/src/tile_map.hpp
===================================================================
--- trunk/windstille/src/tile_map.hpp	2009-02-10 14:12:18 UTC (rev 2428)
+++ trunk/windstille/src/tile_map.hpp	2009-02-10 14:28:05 UTC (rev 2429)
@@ -1,4 +1,4 @@
-//  $Id$
+//
 // 
 //  Windstille - A Jump'n Shoot Game
 //  Copyright (C) 2000 Ingo Ruhnke <grumbel at gmx.de>

Modified: trunk/windstille/src/tile_packer.cpp
===================================================================
--- trunk/windstille/src/tile_packer.cpp	2009-02-10 14:12:18 UTC (rev 2428)
+++ trunk/windstille/src/tile_packer.cpp	2009-02-10 14:28:05 UTC (rev 2429)
@@ -1,26 +1,19 @@
-/*  $Id$
-**   __      __ __             ___        __   __ __   __
-**  /  \    /  \__| ____    __| _/_______/  |_|__|  | |  |   ____
-**  \   \/\/   /  |/    \  / __ |/  ___/\   __\  |  | |  | _/ __ \
-**   \        /|  |   |  \/ /_/ |\___ \  |  | |  |  |_|  |_\  ___/
-**    \__/\  / |__|___|  /\____ /____  > |__| |__|____/____/\___  >
-**         \/          \/      \/    \/                         \/
+/*
+**  Windstille - A Sci-Fi Action-Adventure Game
 **  Copyright (C) 2000,2005 Ingo Ruhnke <grumbel at gmx.de>
 **
-**  This program is free software; you can redistribute it and/or
-**  modify it under the terms of the GNU General Public License
-**  as published by the Free Software Foundation; either version 2
-**  of the License, or (at your option) any later version.
-**
+**  This program is free software: you can redistribute it and/or modify
+**  it under the terms of the GNU General Public License as published by
+**  the Free Software Foundation, either version 3 of the License, or
+**  (at your option) any later version.
+**  
 **  This program is distributed in the hope that it will be useful,
 **  but WITHOUT ANY WARRANTY; without even the implied warranty of
 **  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 **  GNU General Public License for more details.
-** 
+**  
 **  You should have received a copy of the GNU General Public License
-**  along with this program; if not, write to the Free Software
-**  Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA
-**  02111-1307, USA.
+**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
 #include <assert.h>

Modified: trunk/windstille/src/tile_packer.hpp
===================================================================
--- trunk/windstille/src/tile_packer.hpp	2009-02-10 14:12:18 UTC (rev 2428)
+++ trunk/windstille/src/tile_packer.hpp	2009-02-10 14:28:05 UTC (rev 2429)
@@ -1,26 +1,19 @@
-/*  $Id$
-**   __      __ __             ___        __   __ __   __
-**  /  \    /  \__| ____    __| _/_______/  |_|__|  | |  |   ____
-**  \   \/\/   /  |/    \  / __ |/  ___/\   __\  |  | |  | _/ __ \
-**   \        /|  |   |  \/ /_/ |\___ \  |  | |  |  |_|  |_\  ___/
-**    \__/\  / |__|___|  /\____ /____  > |__| |__|____/____/\___  >
-**         \/          \/      \/    \/                         \/
+/*
+**  Windstille - A Sci-Fi Action-Adventure Game
 **  Copyright (C) 2000,2005 Ingo Ruhnke <grumbel at gmx.de>
 **
-**  This program is free software; you can redistribute it and/or
-**  modify it under the terms of the GNU General Public License
-**  as published by the Free Software Foundation; either version 2
-**  of the License, or (at your option) any later version.
-**
+**  This program is free software: you can redistribute it and/or modify
+**  it under the terms of the GNU General Public License as published by
+**  the Free Software Foundation, either version 3 of the License, or
+**  (at your option) any later version.
+**  
 **  This program is distributed in the hope that it will be useful,
 **  but WITHOUT ANY WARRANTY; without even the implied warranty of
 **  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 **  GNU General Public License for more details.
-** 
+**  
 **  You should have received a copy of the GNU General Public License
-**  along with this program; if not, write to the Free Software
-**  Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA
-**  02111-1307, USA.
+**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
 #ifndef HEADER_TILE_PACKER_HXX

Modified: trunk/windstille/src/timer.cpp
===================================================================
--- trunk/windstille/src/timer.cpp	2009-02-10 14:12:18 UTC (rev 2428)
+++ trunk/windstille/src/timer.cpp	2009-02-10 14:28:05 UTC (rev 2429)
@@ -1,4 +1,4 @@
-//  $Id$
+//
 // 
 //  SuperTux
 //  Copyright (C) 2005 Matthias Braun <matze at braunis.de>

Modified: trunk/windstille/src/timer.hpp
===================================================================
--- trunk/windstille/src/timer.hpp	2009-02-10 14:12:18 UTC (rev 2428)
+++ trunk/windstille/src/timer.hpp	2009-02-10 14:28:05 UTC (rev 2429)
@@ -1,4 +1,4 @@
-//  $Id$
+//
 // 
 //  SuperTux
 //  Copyright (C) 2005 Matthias Braun <matze at braunis.de>

Modified: trunk/windstille/src/tinygettext/tinygettext.cpp
===================================================================
--- trunk/windstille/src/tinygettext/tinygettext.cpp	2009-02-10 14:12:18 UTC (rev 2428)
+++ trunk/windstille/src/tinygettext/tinygettext.cpp	2009-02-10 14:28:05 UTC (rev 2429)
@@ -1,4 +1,4 @@
-//  $Id: tinygettext.cpp 2575 2005-06-07 15:59:27Z matzebraun $
+//
 // 
 //  TinyGetText - A small flexible gettext() replacement
 //  Copyright (C) 2004 Ingo Ruhnke <grumbel at gmx.de>

Modified: trunk/windstille/src/tinygettext/tinygettext.hpp
===================================================================
--- trunk/windstille/src/tinygettext/tinygettext.hpp	2009-02-10 14:12:18 UTC (rev 2428)
+++ trunk/windstille/src/tinygettext/tinygettext.hpp	2009-02-10 14:28:05 UTC (rev 2429)
@@ -1,4 +1,4 @@
-//  $Id: tinygettext.h 2575 2005-06-07 15:59:27Z matzebraun $
+//
 // 
 //  TinyGetText - A small flexible gettext() replacement
 //  Copyright (C) 2004 Ingo Ruhnke <grumbel at gmx.de>

Modified: trunk/windstille/src/title_screen.cpp
===================================================================
--- trunk/windstille/src/title_screen.cpp	2009-02-10 14:12:18 UTC (rev 2428)
+++ trunk/windstille/src/title_screen.cpp	2009-02-10 14:28:05 UTC (rev 2429)
@@ -1,26 +1,19 @@
-/*  $Id$
-**   __      __ __             ___        __   __ __   __
-**  /  \    /  \__| ____    __| _/_______/  |_|__|  | |  |   ____
-**  \   \/\/   /  |/    \  / __ |/  ___/\   __\  |  | |  | _/ __ \
-**   \        /|  |   |  \/ /_/ |\___ \  |  | |  |  |_|  |_\  ___/
-**    \__/\  / |__|___|  /\____ /____  > |__| |__|____/____/\___  >
-**         \/          \/      \/    \/                         \/
+/*
+**  Windstille - A Sci-Fi Action-Adventure Game
 **  Copyright (C) 2005 Ingo Ruhnke <grumbel at gmx.de>
 **
-**  This program is free software; you can redistribute it and/or
-**  modify it under the terms of the GNU General Public License
-**  as published by the Free Software Foundation; either version 2
-**  of the License, or (at your option) any later version.
-**
+**  This program is free software: you can redistribute it and/or modify
+**  it under the terms of the GNU General Public License as published by
+**  the Free Software Foundation, either version 3 of the License, or
+**  (at your option) any later version.
+**  
 **  This program is distributed in the hope that it will be useful,
 **  but WITHOUT ANY WARRANTY; without even the implied warranty of
 **  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 **  GNU General Public License for more details.
-** 
+**  
 **  You should have received a copy of the GNU General Public License
-**  along with this program; if not, write to the Free Software
-**  Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA
-**  02111-1307, USA.
+**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
 #include <iostream>

Modified: trunk/windstille/src/title_screen.hpp
===================================================================
--- trunk/windstille/src/title_screen.hpp	2009-02-10 14:12:18 UTC (rev 2428)
+++ trunk/windstille/src/title_screen.hpp	2009-02-10 14:28:05 UTC (rev 2429)
@@ -1,26 +1,19 @@
-/*  $Id$
-**   __      __ __             ___        __   __ __   __
-**  /  \    /  \__| ____    __| _/_______/  |_|__|  | |  |   ____
-**  \   \/\/   /  |/    \  / __ |/  ___/\   __\  |  | |  | _/ __ \
-**   \        /|  |   |  \/ /_/ |\___ \  |  | |  |  |_|  |_\  ___/
-**    \__/\  / |__|___|  /\____ /____  > |__| |__|____/____/\___  >
-**         \/          \/      \/    \/                         \/
+/*
+**  Windstille - A Sci-Fi Action-Adventure Game
 **  Copyright (C) 2005 Ingo Ruhnke <grumbel at gmx.de>
 **
-**  This program is free software; you can redistribute it and/or
-**  modify it under the terms of the GNU General Public License
-**  as published by the Free Software Foundation; either version 2
-**  of the License, or (at your option) any later version.
-**
+**  This program is free software: you can redistribute it and/or modify
+**  it under the terms of the GNU General Public License as published by
+**  the Free Software Foundation, either version 3 of the License, or
+**  (at your option) any later version.
+**  
 **  This program is distributed in the hope that it will be useful,
 **  but WITHOUT ANY WARRANTY; without even the implied warranty of
 **  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 **  GNU General Public License for more details.
-** 
+**  
 **  You should have received a copy of the GNU General Public License
-**  along with this program; if not, write to the Free Software
-**  Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA
-**  02111-1307, USA.
+**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
 #ifndef HEADER_TITLE_SCREEN_HPP

Modified: trunk/windstille/src/trigger.cpp
===================================================================
--- trunk/windstille/src/trigger.cpp	2009-02-10 14:12:18 UTC (rev 2428)
+++ trunk/windstille/src/trigger.cpp	2009-02-10 14:28:05 UTC (rev 2429)
@@ -1,4 +1,4 @@
-//  $Id$
+//
 // 
 //  Windstille - A Jump'n Shoot Game
 //  Copyright (C) 2000 Ingo Ruhnke <grumbel at gmx.de>

Modified: trunk/windstille/src/trigger.hpp
===================================================================
--- trunk/windstille/src/trigger.hpp	2009-02-10 14:12:18 UTC (rev 2428)
+++ trunk/windstille/src/trigger.hpp	2009-02-10 14:28:05 UTC (rev 2429)
@@ -1,26 +1,19 @@
-/*  $Id$
-**   __      __ __             ___        __   __ __   __
-**  /  \    /  \__| ____    __| _/_______/  |_|__|  | |  |   ____
-**  \   \/\/   /  |/    \  / __ |/  ___/\   __\  |  | |  | _/ __ \
-**   \        /|  |   |  \/ /_/ |\___ \  |  | |  |  |_|  |_\  ___/
-**    \__/\  / |__|___|  /\____ /____  > |__| |__|____/____/\___  >
-**         \/          \/      \/    \/                         \/
+/*
+**  Windstille - A Sci-Fi Action-Adventure Game
 **  Copyright (C) 2000,2005 Ingo Ruhnke <grumbel at gmx.de>
 **
-**  This program is free software; you can redistribute it and/or
-**  modify it under the terms of the GNU General Public License
-**  as published by the Free Software Foundation; either version 2
-**  of the License, or (at your option) any later version.
-**
+**  This program is free software: you can redistribute it and/or modify
+**  it under the terms of the GNU General Public License as published by
+**  the Free Software Foundation, either version 3 of the License, or
+**  (at your option) any later version.
+**  
 **  This program is distributed in the hope that it will be useful,
 **  but WITHOUT ANY WARRANTY; without even the implied warranty of
 **  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 **  GNU General Public License for more details.
-** 
+**  
 **  You should have received a copy of the GNU General Public License
-**  along with this program; if not, write to the Free Software
-**  Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA
-**  02111-1307, USA.
+**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
 #ifndef HEADER_TRIGGER_HXX

Modified: trunk/windstille/src/view.cpp
===================================================================
--- trunk/windstille/src/view.cpp	2009-02-10 14:12:18 UTC (rev 2428)
+++ trunk/windstille/src/view.cpp	2009-02-10 14:28:05 UTC (rev 2429)
@@ -1,26 +1,19 @@
-/*  $Id$
-**   __      __ __             ___        __   __ __   __
-**  /  \    /  \__| ____    __| _/_______/  |_|__|  | |  |   ____
-**  \   \/\/   /  |/    \  / __ |/  ___/\   __\  |  | |  | _/ __ \
-**   \        /|  |   |  \/ /_/ |\___ \  |  | |  |  |_|  |_\  ___/
-**    \__/\  / |__|___|  /\____ /____  > |__| |__|____/____/\___  >
-**         \/          \/      \/    \/                         \/
+/*
+**  Windstille - A Sci-Fi Action-Adventure Game
 **  Copyright (C) 2000,2005 Ingo Ruhnke <grumbel at gmx.de>
 **
-**  This program is free software; you can redistribute it and/or
-**  modify it under the terms of the GNU General Public License
-**  as published by the Free Software Foundation; either version 2
-**  of the License, or (at your option) any later version.
-**
+**  This program is free software: you can redistribute it and/or modify
+**  it under the terms of the GNU General Public License as published by
+**  the Free Software Foundation, either version 3 of the License, or
+**  (at your option) any later version.
+**  
 **  This program is distributed in the hope that it will be useful,
 **  but WITHOUT ANY WARRANTY; without even the implied warranty of
 **  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 **  GNU General Public License for more details.
-** 
+**  
 **  You should have received a copy of the GNU General Public License
-**  along with this program; if not, write to the Free Software
-**  Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA
-**  02111-1307, USA.
+**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
 #include <SDL.h>

Modified: trunk/windstille/src/view.hpp
===================================================================
--- trunk/windstille/src/view.hpp	2009-02-10 14:12:18 UTC (rev 2428)
+++ trunk/windstille/src/view.hpp	2009-02-10 14:28:05 UTC (rev 2429)
@@ -1,26 +1,19 @@
-/*  $Id$
-**   __      __ __             ___        __   __ __   __
-**  /  \    /  \__| ____    __| _/_______/  |_|__|  | |  |   ____
-**  \   \/\/   /  |/    \  / __ |/  ___/\   __\  |  | |  | _/ __ \
-**   \        /|  |   |  \/ /_/ |\___ \  |  | |  |  |_|  |_\  ___/
-**    \__/\  / |__|___|  /\____ /____  > |__| |__|____/____/\___  >
-**         \/          \/      \/    \/                         \/
+/*
+**  Windstille - A Sci-Fi Action-Adventure Game
 **  Copyright (C) 2000,2005 Ingo Ruhnke <grumbel at gmx.de>
 **
-**  This program is free software; you can redistribute it and/or
-**  modify it under the terms of the GNU General Public License
-**  as published by the Free Software Foundation; either version 2
-**  of the License, or (at your option) any later version.
-**
+**  This program is free software: you can redistribute it and/or modify
+**  it under the terms of the GNU General Public License as published by
+**  the Free Software Foundation, either version 3 of the License, or
+**  (at your option) any later version.
+**  
 **  This program is distributed in the hope that it will be useful,
 **  but WITHOUT ANY WARRANTY; without even the implied warranty of
 **  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 **  GNU General Public License for more details.
-** 
+**  
 **  You should have received a copy of the GNU General Public License
-**  along with this program; if not, write to the Free Software
-**  Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA
-**  02111-1307, USA.
+**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
 #ifndef HEADER_VIEW_HXX

Modified: trunk/windstille/src/weapon.hpp
===================================================================
--- trunk/windstille/src/weapon.hpp	2009-02-10 14:12:18 UTC (rev 2428)
+++ trunk/windstille/src/weapon.hpp	2009-02-10 14:28:05 UTC (rev 2429)
@@ -1,4 +1,4 @@
-//  $Id$
+//
 // 
 //  Windstille - A Jump'n Shoot Game
 //  Copyright (C) 2005 Matthias Braun <matze at braunis.de>

Modified: trunk/windstille/src/windstille.hpp
===================================================================
--- trunk/windstille/src/windstille.hpp	2009-02-10 14:12:18 UTC (rev 2428)
+++ trunk/windstille/src/windstille.hpp	2009-02-10 14:28:05 UTC (rev 2429)
@@ -1,26 +1,19 @@
-/*  $Id$
-**   __      __ __             ___        __   __ __   __
-**  /  \    /  \__| ____    __| _/_______/  |_|__|  | |  |   ____
-**  \   \/\/   /  |/    \  / __ |/  ___/\   __\  |  | |  | _/ __ \
-**   \        /|  |   |  \/ /_/ |\___ \  |  | |  |  |_|  |_\  ___/
-**    \__/\  / |__|___|  /\____ /____  > |__| |__|____/____/\___  >
-**         \/          \/      \/    \/                         \/
+/*
+**  Windstille - A Sci-Fi Action-Adventure Game
 **  Copyright (C) 2007 Ingo Ruhnke <grumbel at gmx.de>
 **
-**  This program is free software; you can redistribute it and/or
-**  modify it under the terms of the GNU General Public License
-**  as published by the Free Software Foundation; either version 2
-**  of the License, or (at your option) any later version.
-**
+**  This program is free software: you can redistribute it and/or modify
+**  it under the terms of the GNU General Public License as published by
+**  the Free Software Foundation, either version 3 of the License, or
+**  (at your option) any later version.
+**  
 **  This program is distributed in the hope that it will be useful,
 **  but WITHOUT ANY WARRANTY; without even the implied warranty of
 **  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 **  GNU General Public License for more details.
-** 
+**  
 **  You should have received a copy of the GNU General Public License
-**  along with this program; if not, write to the Free Software
-**  Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA
-**  02111-1307, USA.
+**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
 #ifndef HEADER_WINDSTILLE_HPP

Modified: trunk/windstille/src/windstille_main.cpp
===================================================================
--- trunk/windstille/src/windstille_main.cpp	2009-02-10 14:12:18 UTC (rev 2428)
+++ trunk/windstille/src/windstille_main.cpp	2009-02-10 14:28:05 UTC (rev 2429)
@@ -1,26 +1,19 @@
-/*  $Id$
-**   __      __ __             ___        __   __ __   __
-**  /  \    /  \__| ____    __| _/_______/  |_|__|  | |  |   ____
-**  \   \/\/   /  |/    \  / __ |/  ___/\   __\  |  | |  | _/ __ \
-**   \        /|  |   |  \/ /_/ |\___ \  |  | |  |  |_|  |_\  ___/
-**    \__/\  / |__|___|  /\____ /____  > |__| |__|____/____/\___  >
-**         \/          \/      \/    \/                         \/
+/*
+**  Windstille - A Sci-Fi Action-Adventure Game
 **  Copyright (C) 2000,2005 Ingo Ruhnke <grumbel at gmx.de>
 **
-**  This program is free software; you can redistribute it and/or
-**  modify it under the terms of the GNU General Public License
-**  as published by the Free Software Foundation; either version 2
-**  of the License, or (at your option) any later version.
-**
+**  This program is free software: you can redistribute it and/or modify
+**  it under the terms of the GNU General Public License as published by
+**  the Free Software Foundation, either version 3 of the License, or
+**  (at your option) any later version.
+**  
 **  This program is distributed in the hope that it will be useful,
 **  but WITHOUT ANY WARRANTY; without even the implied warranty of
 **  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 **  GNU General Public License for more details.
-** 
+**  
 **  You should have received a copy of the GNU General Public License
-**  along with this program; if not, write to the Free Software
-**  Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA
-**  02111-1307, USA.
+**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
 #include "windstille.hpp"

Modified: trunk/windstille/src/windstille_main.hpp
===================================================================
--- trunk/windstille/src/windstille_main.hpp	2009-02-10 14:12:18 UTC (rev 2428)
+++ trunk/windstille/src/windstille_main.hpp	2009-02-10 14:28:05 UTC (rev 2429)
@@ -1,26 +1,19 @@
-/*  $Id$
-**   __      __ __             ___        __   __ __   __
-**  /  \    /  \__| ____    __| _/_______/  |_|__|  | |  |   ____
-**  \   \/\/   /  |/    \  / __ |/  ___/\   __\  |  | |  | _/ __ \
-**   \        /|  |   |  \/ /_/ |\___ \  |  | |  |  |_|  |_\  ___/
-**    \__/\  / |__|___|  /\____ /____  > |__| |__|____/____/\___  >
-**         \/          \/      \/    \/                         \/
+/*
+**  Windstille - A Sci-Fi Action-Adventure Game
 **  Copyright (C) 2000,2005 Ingo Ruhnke <grumbel at gmx.de>
 **
-**  This program is free software; you can redistribute it and/or
-**  modify it under the terms of the GNU General Public License
-**  as published by the Free Software Foundation; either version 2
-**  of the License, or (at your option) any later version.
-**
+**  This program is free software: you can redistribute it and/or modify
+**  it under the terms of the GNU General Public License as published by
+**  the Free Software Foundation, either version 3 of the License, or
+**  (at your option) any later version.
+**  
 **  This program is distributed in the hope that it will be useful,
 **  but WITHOUT ANY WARRANTY; without even the implied warranty of
 **  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 **  GNU General Public License for more details.
-** 
+**  
 **  You should have received a copy of the GNU General Public License
-**  along with this program; if not, write to the Free Software
-**  Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA
-**  02111-1307, USA.
+**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
 /*! \mainpage Windstille Documentation



From grumbel at mail.berlios.de  Tue Feb 10 16:51:26 2009
From: grumbel at mail.berlios.de (grumbel at BerliOS)
Date: Tue, 10 Feb 2009 16:51:26 +0100
Subject: [Windstille-commit] r2440 - trunk/windstille/test
Message-ID: <200902101551.n1AFpQrn015800@sheep.berlios.de>

Author: grumbel
Date: 2009-02-10 16:51:25 +0100 (Tue, 10 Feb 2009)
New Revision: 2440

Added:
   trunk/windstille/test/matrix_test.cpp
Removed:
   trunk/windstille/test/windstille-logo.png
Log:
Removed logo, added missing matrix_test.cpp


Added: trunk/windstille/test/matrix_test.cpp
===================================================================
--- trunk/windstille/test/matrix_test.cpp	2009-02-10 15:41:42 UTC (rev 2439)
+++ trunk/windstille/test/matrix_test.cpp	2009-02-10 15:51:25 UTC (rev 2440)
@@ -0,0 +1,23 @@
+#include <iostream>
+#include "../src/math/matrix.hpp"
+
+int main()
+{
+  Matrix m(0.0f, 0.1f, 0.2f, 0.3f, 
+           1.0f, 1.1f, 1.2f, 1.3f, 
+           2.0f, 2.1f, 2.2f, 2.3f, 
+           3.0f, 3.1f, 3.2f, 3.3f);
+
+  std::cout << "Matrix: " << std::endl;
+  std::cout << m << std::endl;
+
+  std::cout << "Transpose: " << std::endl;
+  std::cout << m.transpose() << std::endl;
+
+  std::cout << "Transpose: " << std::endl;
+  std::cout << m.inverse() << std::endl;
+
+  return 0;
+}
+
+/* EOF */


Property changes on: trunk/windstille/test/matrix_test.cpp
___________________________________________________________________
Name: svn:keywords
   + Id
Name: svn:eol-style
   + native

Deleted: trunk/windstille/test/windstille-logo.png
===================================================================
(Binary files differ)



From grumbel at mail.berlios.de  Tue Feb 10 17:15:36 2009
From: grumbel at mail.berlios.de (grumbel at BerliOS)
Date: Tue, 10 Feb 2009 17:15:36 +0100
Subject: [Windstille-commit] r2441 - trunk/sdl-jstest
Message-ID: <200902101615.n1AGFaXt018450@sheep.berlios.de>

Author: grumbel
Date: 2009-02-10 17:15:36 +0100 (Tue, 10 Feb 2009)
New Revision: 2441

Added:
   trunk/sdl-jstest/SConstruct
Removed:
   trunk/sdl-jstest/SConscript
Modified:
   trunk/sdl-jstest/
Log:
Updated build file to work out of the Windstille directory


Property changes on: trunk/sdl-jstest
___________________________________________________________________
Name: svn:ignore
   - sdl-jstest

   + .sconsign.dblite
sdl-jstest


Deleted: trunk/sdl-jstest/SConscript
===================================================================
--- trunk/sdl-jstest/SConscript	2009-02-10 15:51:25 UTC (rev 2440)
+++ trunk/sdl-jstest/SConscript	2009-02-10 16:15:36 UTC (rev 2441)
@@ -1,36 +0,0 @@
-##  -*- python -*-
-##  $Id: windstille_main.hpp 1097 2005-09-23 16:01:59Z grumbel $
-##   __      __ __             ___        __   __ __   __
-##  /  \    /  \__| ____    __| _/_______/  |_|__|  | |  |   ____
-##  \   \/\/   /  |/    \  / __ |/  ___/\   __\  |  | |  | _/ __ \
-##   \        /|  |   |  \/ /_/ |\___ \  |  | |  |  |_|  |_\  ___/
-##    \__/\  / |__|___|  /\____ /____  > |__| |__|____/____/\___  >
-##         \/          \/      \/    \/                         \/
-##  Copyright (C) 2007 Ingo Ruhnke <grumbel at gmx.de>
-##
-##  This program is free software; you can redistribute it and/or
-##  modify it under the terms of the GNU General Public License
-##  as published by the Free Software Foundation; either version 2
-##  of the License, or (at your option) any later version.
-##
-##  This program is distributed in the hope that it will be useful,
-##  but WITHOUT ANY WARRANTY; without even the implied warranty of
-##  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
-##  GNU General Public License for more details.
-## 
-##  You should have received a copy of the GNU General Public License
-##  along with this program; if not, write to the Free Software
-##  Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA
-##  02111-1307, USA.
-##
-
-Import('conf_env')
-
-sdl_jstest_env = conf_env.Clone()
-sdl_jstest_env.Append(CCFLAGS=["-std=c99", "-Wall"])
-sdl_jstest_env.Append(LIBS=["curses"])
-sdl_jstest_env.ParseConfig('sdl-config --cflags --libs')
-sdl_jstest_env.Program('sdl-jstest', ['sdl-jstest.c'])
-
-# EOF #
-

Copied: trunk/sdl-jstest/SConstruct (from rev 2440, trunk/sdl-jstest/SConscript)
===================================================================
--- trunk/sdl-jstest/SConscript	2009-02-10 15:51:25 UTC (rev 2440)
+++ trunk/sdl-jstest/SConstruct	2009-02-10 16:15:36 UTC (rev 2441)
@@ -0,0 +1,25 @@
+##  -*- python -*-
+##  sdl-jstest - A Joystick Test Application For SDL
+##  Copyright (C) 2000,2005 Ingo Ruhnke <grumbel at gmx.de>
+##
+##  This program is free software: you can redistribute it and/or modify
+##  it under the terms of the GNU General Public License as published by
+##  the Free Software Foundation, either version 3 of the License, or
+##  (at your option) any later version.
+##  
+##  This program is distributed in the hope that it will be useful,
+##  but WITHOUT ANY WARRANTY; without even the implied warranty of
+##  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+##  GNU General Public License for more details.
+##  
+##  You should have received a copy of the GNU General Public License
+##  along with this program.  If not, see <http://www.gnu.org/licenses/>.
+
+sdl_jstest_env = Environment()
+sdl_jstest_env.Append(CCFLAGS=["-std=c99", "-Wall"])
+sdl_jstest_env.Append(LIBS=["curses"])
+sdl_jstest_env.ParseConfig('sdl-config --cflags --libs')
+sdl_jstest_env.Program('sdl-jstest', ['sdl-jstest.c'])
+
+# EOF #
+


Property changes on: trunk/sdl-jstest/SConstruct
___________________________________________________________________
Name: svn:mergeinfo
   + 



From grumbel at mail.berlios.de  Tue Feb 10 18:08:27 2009
From: grumbel at mail.berlios.de (grumbel at BerliOS)
Date: Tue, 10 Feb 2009 18:08:27 +0100
Subject: [Windstille-commit] r2442 - trunk/blender-thumbnail
Message-ID: <200902101708.n1AH8RRQ023176@sheep.berlios.de>

Author: grumbel
Date: 2009-02-10 18:08:26 +0100 (Tue, 10 Feb 2009)
New Revision: 2442

Modified:
   trunk/blender-thumbnail/blender_thumbnail
Log:
Added autodetection of blender_thumbnail.py script
Print usage when no arguments are given

Modified: trunk/blender-thumbnail/blender_thumbnail
===================================================================
--- trunk/blender-thumbnail/blender_thumbnail	2009-02-10 16:15:36 UTC (rev 2441)
+++ trunk/blender-thumbnail/blender_thumbnail	2009-02-10 17:08:26 UTC (rev 2442)
@@ -30,39 +30,34 @@
 
 require "RMagick"
 require 'getoptlong'
-require 'rdoc/usage'
+require 'pathname'
 
 $cfg_resolution = "512"
 $cfg_output     = "/tmp/blender_thumbnail_output.png"
 $cfg_render     = true
 
-$cfg_blender_script = "/home/ingo/projects/windstille/trunk/scripts/blender_thumbnail.py"
 $cfg_blender_binary = "blender"
+$cfg_blender_script = "#{File.dirname($0)}/blender_thumbnail.py"
 
+if not File.exists?($cfg_blender_script)
+  puts "Couldn't find blender_thumbnail.py script"
+  exit 0
+end
+
 $cfg_layout = [
-          [ "-90,0,0", # left
-            "0,0,0", # front
-            "0,90,90", # top
-            "45,45,0", # 45-front
-          ],
-          ["90,0,0", # right
-           "180,0,0", # back
-           "0,-90,90", # bottom
-           "135,45,0", # 45-back
-          ]
-         ]
+               [ "-90,0,0", # left
+                 "0,0,0", # front
+                 "0,90,90", # top
+                 "45,45,0", # 45-front
+               ],
+               ["90,0,0", # right
+                "180,0,0", # back
+                "0,-90,90", # bottom
+                "135,45,0", # 45-back
+               ]
+              ]
 
-GetoptLong.new(
-               [ '--help',       '-h', GetoptLong::NO_ARGUMENT ],
-               [ '--no-render',           GetoptLong::NO_ARGUMENT ],
-               [ '--resolution', '-r', GetoptLong::REQUIRED_ARGUMENT ],
-               [ '--layout'    , '-l', GetoptLong::REQUIRED_ARGUMENT ],
-               [ '--output'    , '-o', GetoptLong::REQUIRED_ARGUMENT ],
-               [ '--blender'   , GetoptLong::REQUIRED_ARGUMENT ],
-               [ '--script'    , GetoptLong::REQUIRED_ARGUMENT ]
-               ).each{|opt, arg|
-  case opt
-  when '--help'
+def print_usage()
     puts "Usage: #{$0} [OPTION]... FILE..."
     puts "Generates thumbnails from Blender files."
     puts ""
@@ -76,7 +71,21 @@
     puts ""
     puts "Report bugs to <grumbel at gmx.de>"
     exit(0)
+end
 
+GetoptLong.new(
+               [ '--help',       '-h', GetoptLong::NO_ARGUMENT ],
+               [ '--no-render',           GetoptLong::NO_ARGUMENT ],
+               [ '--resolution', '-r', GetoptLong::REQUIRED_ARGUMENT ],
+               [ '--layout'    , '-l', GetoptLong::REQUIRED_ARGUMENT ],
+               [ '--output'    , '-o', GetoptLong::REQUIRED_ARGUMENT ],
+               [ '--blender'   , GetoptLong::REQUIRED_ARGUMENT ],
+               [ '--script'    , GetoptLong::REQUIRED_ARGUMENT ]
+               ).each{|opt, arg|
+  case opt
+  when '--help'
+    print_usage()
+
   when '--blender'
     $cfg_blender_binary = arg
 
@@ -101,50 +110,54 @@
   end
 }
 
-ARGV.each{|filename|
-  positions = $cfg_layout.flatten
-  outfiles  = positions.map{|name| "/tmp/render-#{name}.png" }
+if ARGV.empty?() then
+  print_usage()
+else
+  ARGV.each{|filename|
+    positions = $cfg_layout.flatten
+    outfiles  = positions.map{|name| "/tmp/render-#{name}.png" }
 
-  if $cfg_render then
-    # render the graphics
-    ENV["BLEND_THUMB_POS"]        = positions.join(';')
-    ENV["BLEND_THUMB_OUTPUT"]     = outfiles.join(';')
-    ENV["BLEND_THUMB_RESOLUTION"] = $cfg_resolution
-    
-    if not system($cfg_blender_binary, filename, "-P", $cfg_blender_script) then
-      puts "Error while rendering '#{filename}', error code #{$?}"
+    if $cfg_render then
+      # render the graphics
+      ENV["BLEND_THUMB_POS"]        = positions.join(';')
+      ENV["BLEND_THUMB_OUTPUT"]     = outfiles.join(';')
+      ENV["BLEND_THUMB_RESOLUTION"] = $cfg_resolution
+      
+      if not system($cfg_blender_binary, filename, "-P", $cfg_blender_script) then
+        puts "Error while rendering '#{filename}', error code #{$?}"
+      end
     end
-  end
 
-  images = {}
-  outfiles.map{|file| Magick::Image.read(file).first.trim! }.zip($cfg_layout.flatten).each{|v, k|
-    images[k] = v
-  }
+    images = {}
+    outfiles.map{|file| Magick::Image.read(file).first.trim! }.zip($cfg_layout.flatten).each{|v, k|
+      images[k] = v
+    }
 
-  spacing = 16
-  width  = 0
-  height = spacing
-  
-  puts "Composing final image"
-  gc = Magick::Draw.new()
-  $cfg_layout.each{|lst|
-    this_height = lst.map{|i| images[i].rows}.max
-    x = spacing
-    lst.each{|name|
-      image = images[name]
-      gc.composite(x, height + (this_height - image.rows)/2, 0, 0, image)
-      x += image.columns + spacing
+    spacing = 16
+    width  = 0
+    height = spacing
+    
+    puts "Composing final image"
+    gc = Magick::Draw.new()
+    $cfg_layout.each{|lst|
+      this_height = lst.map{|i| images[i].rows}.max
+      x = spacing
+      lst.each{|name|
+        image = images[name]
+        gc.composite(x, height + (this_height - image.rows)/2, 0, 0, image)
+        x += image.columns + spacing
+      }
+
+      height += lst.map{|i| images[i].rows}.max + spacing
+      width   = [width, lst.map{|i| images[i].columns + spacing}.inject(0){|t,v| t + v} + spacing].max
     }
+    # puts "OutImage: #{width} #{height}"
+    outimage = Magick::Image.new(width, height, Magick::HatchFill.new("#78b", "#abd", 32))
+    gc.draw(outimage)
 
-    height += lst.map{|i| images[i].rows}.max + spacing
-    width   = [width, lst.map{|i| images[i].columns + spacing}.inject(0){|t,v| t + v} + spacing].max
+    puts "Writing final image to '#{$cfg_output}'"
+    outimage.write($cfg_output)
   }
-  # puts "OutImage: #{width} #{height}"
-  outimage = Magick::Image.new(width, height, Magick::HatchFill.new("#78b", "#abd", 32))
-  gc.draw(outimage)
+end
 
-  puts "Writing final image to '#{$cfg_output}'"
-  outimage.write($cfg_output)
-}
-
 # EOF #



From grumbel at mail.berlios.de  Tue Feb 10 18:15:39 2009
From: grumbel at mail.berlios.de (grumbel at BerliOS)
Date: Tue, 10 Feb 2009 18:15:39 +0100
Subject: [Windstille-commit] r2443 - trunk/blender-thumbnail
Message-ID: <200902101715.n1AHFdnZ024135@sheep.berlios.de>

Author: grumbel
Date: 2009-02-10 18:15:39 +0100 (Tue, 10 Feb 2009)
New Revision: 2443

Modified:
   trunk/blender-thumbnail/
Log:
svn:ignore


Property changes on: trunk/blender-thumbnail
___________________________________________________________________
Name: svn:ignore
   + old




From grumbel at mail.berlios.de  Tue Feb 10 19:20:39 2009
From: grumbel at mail.berlios.de (grumbel at BerliOS)
Date: Tue, 10 Feb 2009 19:20:39 +0100
Subject: [Windstille-commit] r2444 - trunk/windstille/data/armature/pose
Message-ID: <200902101820.n1AIKd95014865@sheep.berlios.de>

Author: grumbel
Date: 2009-02-10 19:20:38 +0100 (Tue, 10 Feb 2009)
New Revision: 2444

Modified:
   trunk/windstille/data/armature/pose/
Log:
svn:ignore


Property changes on: trunk/windstille/data/armature/pose
___________________________________________________________________
Name: svn:ignore
   + old




From grumbel at mail.berlios.de  Tue Feb 10 19:28:58 2009
From: grumbel at mail.berlios.de (grumbel at BerliOS)
Date: Tue, 10 Feb 2009 19:28:58 +0100
Subject: [Windstille-commit] r2445 - trunk/windstille
Message-ID: <200902101828.n1AISw6I024923@sheep.berlios.de>

Author: grumbel
Date: 2009-02-10 19:28:58 +0100 (Tue, 10 Feb 2009)
New Revision: 2445

Modified:
   trunk/windstille/
Log:
More svn:ignore


Property changes on: trunk/windstille
___________________________________________________________________
Name: svn:ignore
   - cache
custom.py
options.cache
.sconf_temp
.sconsign.dblite
windstille

   + cache
config.log
custom.py
options.cache
.sconf_temp
.sconsign.dblite
windstille




From grumbel at mail.berlios.de  Tue Feb 10 19:39:05 2009
From: grumbel at mail.berlios.de (grumbel at BerliOS)
Date: Tue, 10 Feb 2009 19:39:05 +0100
Subject: [Windstille-commit] r2446 - in trunk/windstille/external/SQUIRREL2:
	. include squirrel
Message-ID: <200902101839.n1AId5K2009099@sheep.berlios.de>

Author: grumbel
Date: 2009-02-10 19:39:04 +0100 (Tue, 10 Feb 2009)
New Revision: 2446

Modified:
   trunk/windstille/external/SQUIRREL2/HISTORY
   trunk/windstille/external/SQUIRREL2/include/squirrel.h
   trunk/windstille/external/SQUIRREL2/squirrel/sqapi.cpp
   trunk/windstille/external/SQUIRREL2/squirrel/sqarray.h
   trunk/windstille/external/SQUIRREL2/squirrel/sqbaselib.cpp
   trunk/windstille/external/SQUIRREL2/squirrel/sqobject.cpp
   trunk/windstille/external/SQUIRREL2/squirrel/sqvm.cpp
Log:
Updated to squirrel 2.2.2

Modified: trunk/windstille/external/SQUIRREL2/HISTORY
===================================================================
--- trunk/windstille/external/SQUIRREL2/HISTORY	2009-02-10 18:28:58 UTC (rev 2445)
+++ trunk/windstille/external/SQUIRREL2/HISTORY	2009-02-10 18:39:04 UTC (rev 2446)
@@ -1,8 +1,17 @@
+***version 2.2.2 stable***
+-fixed some behaviour inconsistencies in thread.call() and thread.wakeup() (thx Mr.Accident)
+-fixed coroutine error propagation
+-fixed lingering return value from native function (thx Tom Leonard)
+-fixed a bug if array.sort() is given a bad sort function (thx Tom Leonard)
+-fixed some minor api bug
+-added sq_arrayremove() and sq_arrayinsert()
+
+***2008-05-16          ***
 ***version 2.2.1 stable***
 -fixed a tailcall bug
 
-***2008-02-17        ***
-***version 2.2 stable***
+***2008-02-17          ***
+***version 2.2 stable  ***
 -added _newslot metamethod in classes
 -added enums added constants
 -added sq_pushconsttable, sq_setconsttable

Modified: trunk/windstille/external/SQUIRREL2/include/squirrel.h
===================================================================
--- trunk/windstille/external/SQUIRREL2/include/squirrel.h	2009-02-10 18:28:58 UTC (rev 2445)
+++ trunk/windstille/external/SQUIRREL2/include/squirrel.h	2009-02-10 18:39:04 UTC (rev 2446)
@@ -39,6 +39,10 @@
 #define SQUIRREL_API extern
 #endif
 
+#if (defined(_WIN64) || defined(_LP64))
+#define _SQ64
+#endif
+
 #ifdef _SQ64
 #ifdef _MSC_VER
 typedef __int64 SQInteger;
@@ -136,7 +140,7 @@
 #define MAX_CHAR 0xFF
 #endif
 
-#define SQUIRREL_VERSION	_SC("Squirrel 2.2.1 stable")
+#define SQUIRREL_VERSION	_SC("Squirrel 2.2.2 stable")
 #define SQUIRREL_COPYRIGHT	_SC("Copyright (C) 2003-2008 Alberto Demichelis")
 #define SQUIRREL_AUTHOR		_SC("Alberto Demichelis")
 
@@ -342,6 +346,8 @@
 SQUIRREL_API SQRESULT sq_arraypop(HSQUIRRELVM v,SQInteger idx,SQBool pushval); 
 SQUIRREL_API SQRESULT sq_arrayresize(HSQUIRRELVM v,SQInteger idx,SQInteger newsize); 
 SQUIRREL_API SQRESULT sq_arrayreverse(HSQUIRRELVM v,SQInteger idx); 
+SQUIRREL_API SQRESULT sq_arrayremove(HSQUIRRELVM v,SQInteger idx,SQInteger itemidx);
+SQUIRREL_API SQRESULT sq_arrayinsert(HSQUIRRELVM v,SQInteger idx,SQInteger destpos);
 SQUIRREL_API SQRESULT sq_setdelegate(HSQUIRRELVM v,SQInteger idx);
 SQUIRREL_API SQRESULT sq_getdelegate(HSQUIRRELVM v,SQInteger idx);
 SQUIRREL_API SQRESULT sq_clone(HSQUIRRELVM v,SQInteger idx);

Modified: trunk/windstille/external/SQUIRREL2/squirrel/sqapi.cpp
===================================================================
--- trunk/windstille/external/SQUIRREL2/squirrel/sqapi.cpp	2009-02-10 18:28:58 UTC (rev 2445)
+++ trunk/windstille/external/SQUIRREL2/squirrel/sqapi.cpp	2009-02-10 18:39:04 UTC (rev 2446)
@@ -288,11 +288,11 @@
 	sq_aux_paramscheck(v,1);
 	SQObjectPtr *arr;
 	_GETSAFE_OBJ(v, idx, OT_ARRAY,arr);
-	if(_array(*arr)->Size() > 0) {
+	if(newsize >= 0) {
 		_array(*arr)->Resize(newsize);
 		return SQ_OK;
 	}
-	return SQ_OK;
+	return sq_throwerror(v,_SC("negative size"));
 }
 
 
@@ -316,6 +316,25 @@
 	return SQ_OK;
 }
 
+SQRESULT sq_arrayremove(HSQUIRRELVM v,SQInteger idx,SQInteger itemidx)
+{
+	sq_aux_paramscheck(v, 1); 
+	SQObjectPtr *arr;
+	_GETSAFE_OBJ(v, idx, OT_ARRAY,arr); 
+	return _array(*arr)->Remove(itemidx) ? SQ_OK : sq_throwerror(v,_SC("index out of range")); 
+}
+
+SQRESULT sq_arrayinsert(HSQUIRRELVM v,SQInteger idx,SQInteger destpos)
+{
+	sq_aux_paramscheck(v, 1); 
+	SQObjectPtr *arr;
+	_GETSAFE_OBJ(v, idx, OT_ARRAY,arr);
+	SQRESULT ret = _array(*arr)->Insert(destpos, v->GetUp(-1)) ? SQ_OK : sq_throwerror(v,_SC("index out of range"));
+	v->Pop();
+	return ret;
+}
+
+
 void sq_newclosure(HSQUIRRELVM v,SQFUNCTION func,SQUnsignedInteger nfreevars)
 {
 	SQNativeClosure *nc = SQNativeClosure::Create(_ss(v), func);
@@ -963,10 +982,8 @@
 		v->GetAt(v->_stackbase+v->_suspended_target)=v->GetUp(-1); //retval
 		v->Pop();
 	} else v->GetAt(v->_stackbase+v->_suspended_target)=_null_;
-	if(!v->Execute(_null_,v->_top,-1,-1,ret,raiseerror,SQVM::ET_RESUME_VM))
+	if(!v->Execute(_null_,v->_top,-1,-1,ret,raiseerror,SQVM::ET_RESUME_VM)) {
 		return SQ_ERROR;
-	if(sq_getvmstate(v) == SQ_VMSTATE_IDLE) {
-		while (v->_top > 1) v->_stack[--v->_top] = _null_;
 	}
 	if(retval)
 		v->Push(ret);

Modified: trunk/windstille/external/SQUIRREL2/squirrel/sqarray.h
===================================================================
--- trunk/windstille/external/SQUIRREL2/squirrel/sqarray.h	2009-02-10 18:28:58 UTC (rev 2445)
+++ trunk/windstille/external/SQUIRREL2/squirrel/sqarray.h	2009-02-10 18:39:04 UTC (rev 2446)
@@ -61,14 +61,22 @@
 	void Extend(const SQArray *a);
 	SQObjectPtr &Top(){return _values.top();}
 	void Pop(){_values.pop_back(); ShrinkIfNeeded(); }
-	void Insert(const SQObject& idx,const SQObject &val){_values.insert((SQUnsignedInteger)tointeger(idx),val);}
+	bool Insert(SQInteger idx,const SQObject &val){
+		if(idx < 0 || idx > (SQInteger)_values.size())
+			return false;
+		_values.insert(idx,val);
+		return true;
+	}
 	void ShrinkIfNeeded() {
 		if(_values.size() <= _values.capacity()>>2) //shrink the array
 			_values.shrinktofit();
 	}
-	void Remove(SQUnsignedInteger idx){
+	bool Remove(SQInteger idx){
+		if(idx < 0 || idx >= (SQInteger)_values.size())
+			return false;
 		_values.remove(idx);
 		ShrinkIfNeeded();
+		return true;
 	}
 	void Release()
 	{

Modified: trunk/windstille/external/SQUIRREL2/squirrel/sqbaselib.cpp
===================================================================
--- trunk/windstille/external/SQUIRREL2/squirrel/sqbaselib.cpp	2009-02-10 18:28:58 UTC (rev 2445)
+++ trunk/windstille/external/SQUIRREL2/squirrel/sqbaselib.cpp	2009-02-10 18:39:04 UTC (rev 2446)
@@ -436,7 +436,8 @@
 	SQObject &o=stack_get(v,1);
 	SQObject &idx=stack_get(v,2);
 	SQObject &val=stack_get(v,3);
-	_array(o)->Insert(idx,val);
+	if(!_array(o)->Insert(tointeger(idx),val))
+		return sq_throwerror(v,_SC("index out of range"));
 	return 0;
 }
 
@@ -482,7 +483,8 @@
 		v->Push(a);
 		v->Push(b);
 		if(SQ_FAILED(sq_call(v, 3, SQTrue, SQFalse))) {
-			v->Raise_Error(_SC("compare func failed"));
+			if(!sq_isstring( v->_lasterror)) 
+				v->Raise_Error(_SC("compare func failed"));
 			return false;
 		}
 		sq_getinteger(v, -1, &ret);
@@ -509,7 +511,11 @@
 					return false;
 			} while( ret <= 0);
 			do {
-				--j; 
+				--j;
+				if ( j < 0 ) {
+					v->Raise_Error( _SC("Invalid qsort, probably compare function defect") ); 
+					return false; 
+				}
 				if(!_qsort_compare(v,arr,a->_values[j],pivot,func,ret))
 					return false;
 			}
@@ -760,6 +766,7 @@
 
 static SQInteger thread_call(HSQUIRRELVM v)
 {
+	
 	SQObjectPtr o = stack_get(v,1);
 	if(type(o) == OT_THREAD) {
 		SQInteger nparams = sq_gettop(v);
@@ -768,8 +775,10 @@
 			sq_move(_thread(o),v,i);
 		if(SQ_SUCCEEDED(sq_call(_thread(o),nparams,SQTrue,SQFalse))) {
 			sq_move(v,_thread(o),-1);
+			sq_pop(_thread(o),1);
 			return 1;
 		}
+		v->_lasterror = _thread(o)->_lasterror;
 		return SQ_ERROR;
 	}
 	return sq_throwerror(v,_SC("wrong parameter"));
@@ -796,14 +805,16 @@
 		if(wakeupret) {
 			sq_move(thread,v,2);
 		}
-		if(SQ_SUCCEEDED(sq_wakeupvm(thread,wakeupret,1,SQFalse))) {
+		if(SQ_SUCCEEDED(sq_wakeupvm(thread,wakeupret,SQTrue,SQFalse))) {
 			sq_move(v,thread,-1);
-			sq_pop(thread,1);
+			sq_pop(thread,1); //pop retval
 			if(sq_getvmstate(thread) == SQ_VMSTATE_IDLE) {
-				sq_pop(thread,1);
+				sq_settop(thread,1); //pop roottable
 			}
 			return 1;
 		}
+		sq_settop(thread,1);
+		v->_lasterror = thread->_lasterror;
 		return SQ_ERROR;
 	}
 	return sq_throwerror(v,_SC("wrong parameter"));

Modified: trunk/windstille/external/SQUIRREL2/squirrel/sqobject.cpp
===================================================================
--- trunk/windstille/external/SQUIRREL2/squirrel/sqobject.cpp	2009-02-10 18:28:58 UTC (rev 2445)
+++ trunk/windstille/external/SQUIRREL2/squirrel/sqobject.cpp	2009-02-10 18:39:04 UTC (rev 2446)
@@ -117,6 +117,7 @@
 bool SQDelegable::SetDelegate(SQTable *mt)
 {
 	SQTable *temp = mt;
+	if(temp == this) return false;
 	while (temp) {
 		if (temp->_delegate == this) return false; //cycle detected
 		temp = temp->_delegate;

Modified: trunk/windstille/external/SQUIRREL2/squirrel/sqvm.cpp
===================================================================
--- trunk/windstille/external/SQUIRREL2/squirrel/sqvm.cpp	2009-02-10 18:28:58 UTC (rev 2445)
+++ trunk/windstille/external/SQUIRREL2/squirrel/sqvm.cpp	2009-02-10 18:39:04 UTC (rev 2446)
@@ -1110,7 +1110,7 @@
 		return false;
 	}
 	
-	if (ret != 0){ retval = TOP(); }
+	if (ret != 0){ retval = TOP(); TOP().Null(); }
 	else { retval = _null_; }
 	_stackbase = oldstackbase;
 	_top = oldtop;



From grumbel at mail.berlios.de  Tue Feb 10 19:53:14 2009
From: grumbel at mail.berlios.de (grumbel at BerliOS)
Date: Tue, 10 Feb 2009 19:53:14 +0100
Subject: [Windstille-commit] r2447 - in trunk/windstille/src: . sprite3d
Message-ID: <200902101853.n1AIrEQo024686@sheep.berlios.de>

Author: grumbel
Date: 2009-02-10 19:53:13 +0100 (Tue, 10 Feb 2009)
New Revision: 2447

Modified:
   trunk/windstille/src/box.cpp
   trunk/windstille/src/box.hpp
   trunk/windstille/src/character.cpp
   trunk/windstille/src/character.hpp
   trunk/windstille/src/field.hpp
   trunk/windstille/src/game_object.cpp
   trunk/windstille/src/game_object.hpp
   trunk/windstille/src/globals.hpp
   trunk/windstille/src/player.hpp
   trunk/windstille/src/refcounter.hpp
   trunk/windstille/src/sprite3d/sprite3d.cpp
   trunk/windstille/src/sprite3d/sprite3d.hpp
   trunk/windstille/src/tile_factory.hpp
   trunk/windstille/src/tile_map.hpp
   trunk/windstille/src/trigger.cpp
Log:
More copyright header updates

Modified: trunk/windstille/src/box.cpp
===================================================================
--- trunk/windstille/src/box.cpp	2009-02-10 18:39:04 UTC (rev 2446)
+++ trunk/windstille/src/box.cpp	2009-02-10 18:53:13 UTC (rev 2447)
@@ -1,21 +1,20 @@
-//
-// 
-//  Windstille - A Jump'n Shoot Game
-//  Copyright (C) 2005 David Kamphausen <david.kamphausen at web.de>
-//
-//  This program is free software; you can redistribute it and/or
-//  modify it under the terms of the GNU General Public License
-//  as published by the Free Software Foundation; either version 2
-//  of the License, or (at your option) any later version.
-//
-//  This program is distributed in the hope that it will be useful,
-//  but WITHOUT ANY WARRANTY; without even the implied warranty of
-//  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
-//  GNU General Public License for more details.
-// 
-//  You should have received a copy of the GNU General Public License
-//  along with this program; if not, write to the Free Software
-//  Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA.
+/*
+**  Windstille - A Sci-Fi Action-Adventure Game
+**  Copyright (C) 2005 David Kamphausen <david.kamphausen at web.de>
+**
+**  This program is free software: you can redistribute it and/or modify
+**  it under the terms of the GNU General Public License as published by
+**  the Free Software Foundation, either version 3 of the License, or
+**  (at your option) any later version.
+**  
+**  This program is distributed in the hope that it will be useful,
+**  but WITHOUT ANY WARRANTY; without even the implied warranty of
+**  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+**  GNU General Public License for more details.
+**  
+**  You should have received a copy of the GNU General Public License
+**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
+*/
 
 #include <stdexcept>
 #include <boost/bind.hpp>

Modified: trunk/windstille/src/box.hpp
===================================================================
--- trunk/windstille/src/box.hpp	2009-02-10 18:39:04 UTC (rev 2446)
+++ trunk/windstille/src/box.hpp	2009-02-10 18:53:13 UTC (rev 2447)
@@ -1,21 +1,20 @@
-//
-// 
-//  Windstille - A Jump'n Shoot Game
-//  Copyright (C) 2005 David Kamphausen <david.kamphausen at web.de>
-//
-//  This program is free software; you can redistribute it and/or
-//  modify it under the terms of the GNU General Public License
-//  as published by the Free Software Foundation; either version 2
-//  of the License, or (at your option) any later version.
-//
-//  This program is distributed in the hope that it will be useful,
-//  but WITHOUT ANY WARRANTY; without even the implied warranty of
-//  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
-//  GNU General Public License for more details.
-// 
-//  You should have received a copy of the GNU General Public License
-//  along with this program; if not, write to the Free Software
-//  Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA.
+/*
+**  Windstille - A Sci-Fi Action-Adventure Game
+**  Copyright (C) 2005 David Kamphausen <david.kamphausen at web.de>
+**
+**  This program is free software: you can redistribute it and/or modify
+**  it under the terms of the GNU General Public License as published by
+**  the Free Software Foundation, either version 3 of the License, or
+**  (at your option) any later version.
+**  
+**  This program is distributed in the hope that it will be useful,
+**  but WITHOUT ANY WARRANTY; without even the implied warranty of
+**  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+**  GNU General Public License for more details.
+**  
+**  You should have received a copy of the GNU General Public License
+**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
+*/
 
 #ifndef HEADER_WINDSTILLE_BOX_HXX
 #define HEADER_WINDSTILLE_BOX_HXX

Modified: trunk/windstille/src/character.cpp
===================================================================
--- trunk/windstille/src/character.cpp	2009-02-10 18:39:04 UTC (rev 2446)
+++ trunk/windstille/src/character.cpp	2009-02-10 18:53:13 UTC (rev 2447)
@@ -1,21 +1,20 @@
-//
-// 
-//  Windstille - A Jump'n Shoot Game
-//  Copyright (C) 2000 Ingo Ruhnke <grumbel at gmx.de>
-//
-//  This program is free software; you can redistribute it and/or
-//  modify it under the terms of the GNU General Public License
-//  as published by the Free Software Foundation; either version 2
-//  of the License, or (at your option) any later version.
-//
-//  This program is distributed in the hope that it will be useful,
-//  but WITHOUT ANY WARRANTY; without even the implied warranty of
-//  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
-//  GNU General Public License for more details.
-// 
-//  You should have received a copy of the GNU General Public License
-//  along with this program; if not, write to the Free Software
-//  Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA.
+/*
+**  Windstille - A Sci-Fi Action-Adventure Game
+**  Copyright (C) 2000 Ingo Ruhnke <grumbel at gmx.de>
+**
+**  This program is free software: you can redistribute it and/or modify
+**  it under the terms of the GNU General Public License as published by
+**  the Free Software Foundation, either version 3 of the License, or
+**  (at your option) any later version.
+**  
+**  This program is distributed in the hope that it will be useful,
+**  but WITHOUT ANY WARRANTY; without even the implied warranty of
+**  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+**  GNU General Public License for more details.
+**  
+**  You should have received a copy of the GNU General Public License
+**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
+*/
 
 #include "character.hpp"
 #include "sector.hpp"

Modified: trunk/windstille/src/character.hpp
===================================================================
--- trunk/windstille/src/character.hpp	2009-02-10 18:39:04 UTC (rev 2446)
+++ trunk/windstille/src/character.hpp	2009-02-10 18:53:13 UTC (rev 2447)
@@ -1,21 +1,20 @@
-//
-// 
-//  Windstille - A Jump'n Shoot Game
-//  Copyright (C) 2000 Ingo Ruhnke <grumbel at gmx.de>
-//
-//  This program is free software; you can redistribute it and/or
-//  modify it under the terms of the GNU General Public License
-//  as published by the Free Software Foundation; either version 2
-//  of the License, or (at your option) any later version.
-//
-//  This program is distributed in the hope that it will be useful,
-//  but WITHOUT ANY WARRANTY; without even the implied warranty of
-//  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
-//  GNU General Public License for more details.
-// 
-//  You should have received a copy of the GNU General Public License
-//  along with this program; if not, write to the Free Software
-//  Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA.
+/*
+**  Windstille - A Sci-Fi Action-Adventure Game
+**  Copyright (C) 2000 Ingo Ruhnke <grumbel at gmx.de>
+**
+**  This program is free software: you can redistribute it and/or modify
+**  it under the terms of the GNU General Public License as published by
+**  the Free Software Foundation, either version 3 of the License, or
+**  (at your option) any later version.
+**  
+**  This program is distributed in the hope that it will be useful,
+**  but WITHOUT ANY WARRANTY; without even the implied warranty of
+**  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+**  GNU General Public License for more details.
+**  
+**  You should have received a copy of the GNU General Public License
+**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
+*/
 
 #ifndef HEADER_CHARACTER_HPP
 #define HEADER_CHARACTER_HPP

Modified: trunk/windstille/src/field.hpp
===================================================================
--- trunk/windstille/src/field.hpp	2009-02-10 18:39:04 UTC (rev 2446)
+++ trunk/windstille/src/field.hpp	2009-02-10 18:53:13 UTC (rev 2447)
@@ -1,21 +1,20 @@
-//
-// 
-//  Windstille - A Jump'n Shoot Game
-//  Copyright (C) 2000 Ingo Ruhnke <grumbel at gmx.de>
-//
-//  This program is free software; you can redistribute it and/or
-//  modify it under the terms of the GNU General Public License
-//  as published by the Free Software Foundation; either version 2
-//  of the License, or (at your option) any later version.
-//
-//  This program is distributed in the hope that it will be useful,
-//  but WITHOUT ANY WARRANTY; without even the implied warranty of
-//  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
-//  GNU General Public License for more details.
-// 
-//  You should have received a copy of the GNU General Public License
-//  along with this program; if not, write to the Free Software
-//  Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA.
+/*
+**  Windstille - A Sci-Fi Action-Adventure Game
+**  Copyright (C) 2000 Ingo Ruhnke <grumbel at gmx.de>
+**
+**  This program is free software: you can redistribute it and/or modify
+**  it under the terms of the GNU General Public License as published by
+**  the Free Software Foundation, either version 3 of the License, or
+**  (at your option) any later version.
+**  
+**  This program is distributed in the hope that it will be useful,
+**  but WITHOUT ANY WARRANTY; without even the implied warranty of
+**  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+**  GNU General Public License for more details.
+**  
+**  You should have received a copy of the GNU General Public License
+**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
+*/
 
 #ifndef FIELD_HXX
 #define FIELD_HXX

Modified: trunk/windstille/src/game_object.cpp
===================================================================
--- trunk/windstille/src/game_object.cpp	2009-02-10 18:39:04 UTC (rev 2446)
+++ trunk/windstille/src/game_object.cpp	2009-02-10 18:53:13 UTC (rev 2447)
@@ -1,21 +1,20 @@
-//
-//
-//  Windstille - A Jump'n Shoot Game
-//  Copyright (C) 2000 Ingo Ruhnke <grumbel at gmx.de>
-//
-//  This program is free software; you can redistribute it and/or
-//  modify it under the terms of the GNU General Public License
-//  as published by the Free Software Foundation; either version 2
-//  of the License, or (at your option) any later version.
-//
-//  This program is distributed in the hope that it will be useful,
-//  but WITHOUT ANY WARRANTY; without even the implied warranty of
-//  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
-//  GNU General Public License for more details.
-//
-//  You should have received a copy of the GNU General Public License
-//  along with this program; if not, write to the Free Software
-//  Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA.
+/*
+**  Windstille - A Sci-Fi Action-Adventure Game
+**  Copyright (C) 2000 Ingo Ruhnke <grumbel at gmx.de>
+**
+**  This program is free software: you can redistribute it and/or modify
+**  it under the terms of the GNU General Public License as published by
+**  the Free Software Foundation, either version 3 of the License, or
+**  (at your option) any later version.
+**  
+**  This program is distributed in the hope that it will be useful,
+**  but WITHOUT ANY WARRANTY; without even the implied warranty of
+**  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+**  GNU General Public License for more details.
+**  
+**  You should have received a copy of the GNU General Public License
+**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
+*/
 
 #include "game_object.hpp"
 #include "sector.hpp"

Modified: trunk/windstille/src/game_object.hpp
===================================================================
--- trunk/windstille/src/game_object.hpp	2009-02-10 18:39:04 UTC (rev 2446)
+++ trunk/windstille/src/game_object.hpp	2009-02-10 18:53:13 UTC (rev 2447)
@@ -1,21 +1,20 @@
-//
-// 
-//  Windstille - A Jump'n Shoot Game
-//  Copyright (C) 2000 Ingo Ruhnke <grumbel at gmx.de>
-//
-//  This program is free software; you can redistribute it and/or
-//  modify it under the terms of the GNU General Public License
-//  as published by the Free Software Foundation; either version 2
-//  of the License, or (at your option) any later version.
-//
-//  This program is distributed in the hope that it will be useful,
-//  but WITHOUT ANY WARRANTY; without even the implied warranty of
-//  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
-//  GNU General Public License for more details.
-// 
-//  You should have received a copy of the GNU General Public License
-//  along with this program; if not, write to the Free Software
-//  Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA.
+/*
+**  Windstille - A Sci-Fi Action-Adventure Game
+**  Copyright (C) 2000 Ingo Ruhnke <grumbel at gmx.de>
+**
+**  This program is free software: you can redistribute it and/or modify
+**  it under the terms of the GNU General Public License as published by
+**  the Free Software Foundation, either version 3 of the License, or
+**  (at your option) any later version.
+**  
+**  This program is distributed in the hope that it will be useful,
+**  but WITHOUT ANY WARRANTY; without even the implied warranty of
+**  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+**  GNU General Public License for more details.
+**  
+**  You should have received a copy of the GNU General Public License
+**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
+*/
 
 #ifndef WINDSTILLE_GAME_OBJECT_HXX
 #define WINDSTILLE_GAME_OBJECT_HXX

Modified: trunk/windstille/src/globals.hpp
===================================================================
--- trunk/windstille/src/globals.hpp	2009-02-10 18:39:04 UTC (rev 2446)
+++ trunk/windstille/src/globals.hpp	2009-02-10 18:53:13 UTC (rev 2447)
@@ -1,21 +1,20 @@
-//
-// 
-//  Windstille - A Jump'n Shoot Game
-//  Copyright (C) 2000 Ingo Ruhnke <grumbel at gmx.de>
-//
-//  This program is free software; you can redistribute it and/or
-//  modify it under the terms of the GNU General Public License
-//  as published by the Free Software Foundation; either version 2
-//  of the License, or (at your option) any later version.
-//
-//  This program is distributed in the hope that it will be useful,
-//  but WITHOUT ANY WARRANTY; without even the implied warranty of
-//  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
-//  GNU General Public License for more details.
-// 
-//  You should have received a copy of the GNU General Public License
-//  along with this program; if not, write to the Free Software
-//  Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA.
+/*
+**  Windstille - A Sci-Fi Action-Adventure Game
+**  Copyright (C) 2000 Ingo Ruhnke <grumbel at gmx.de>
+**
+**  This program is free software: you can redistribute it and/or modify
+**  it under the terms of the GNU General Public License as published by
+**  the Free Software Foundation, either version 3 of the License, or
+**  (at your option) any later version.
+**  
+**  This program is distributed in the hope that it will be useful,
+**  but WITHOUT ANY WARRANTY; without even the implied warranty of
+**  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+**  GNU General Public License for more details.
+**  
+**  You should have received a copy of the GNU General Public License
+**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
+*/
 
 #ifndef GLOBALS_HXX
 #define GLOBALS_HXX

Modified: trunk/windstille/src/player.hpp
===================================================================
--- trunk/windstille/src/player.hpp	2009-02-10 18:39:04 UTC (rev 2446)
+++ trunk/windstille/src/player.hpp	2009-02-10 18:53:13 UTC (rev 2447)
@@ -1,21 +1,20 @@
-//
-// 
-//  Windstille - A Jump'n Shoot Game
-//  Copyright (C) 2000 Ingo Ruhnke <grumbel at gmx.de>
-//
-//  This program is free software; you can redistribute it and/or
-//  modify it under the terms of the GNU General Public License
-//  as published by the Free Software Foundation; either version 2
-//  of the License, or (at your option) any later version.
-//
-//  This program is distributed in the hope that it will be useful,
-//  but WITHOUT ANY WARRANTY; without even the implied warranty of
-//  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
-//  GNU General Public License for more details.
-// 
-//  You should have received a copy of the GNU General Public License
-//  along with this program; if not, write to the Free Software
-//  Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA.
+/*
+**  Windstille - A Sci-Fi Action-Adventure Game
+**  Copyright (C) 2000 Ingo Ruhnke <grumbel at gmx.de>
+**
+**  This program is free software: you can redistribute it and/or modify
+**  it under the terms of the GNU General Public License as published by
+**  the Free Software Foundation, either version 3 of the License, or
+**  (at your option) any later version.
+**  
+**  This program is distributed in the hope that it will be useful,
+**  but WITHOUT ANY WARRANTY; without even the implied warranty of
+**  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+**  GNU General Public License for more details.
+**  
+**  You should have received a copy of the GNU General Public License
+**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
+*/
 #ifndef PLAYER_HXX
 #define PLAYER_HXX
 

Modified: trunk/windstille/src/refcounter.hpp
===================================================================
--- trunk/windstille/src/refcounter.hpp	2009-02-10 18:39:04 UTC (rev 2446)
+++ trunk/windstille/src/refcounter.hpp	2009-02-10 18:53:13 UTC (rev 2447)
@@ -1,21 +1,20 @@
-//
-// 
-//  Windstille - A Jump'n Shoot Game
-//  Copyright (C) 2005 Matthias Braun <matze at braunis.de>
-//
-//  This program is free software; you can redistribute it and/or
-//  modify it under the terms of the GNU General Public License
-//  as published by the Free Software Foundation; either version 2
-//  of the License, or (at your option) any later version.
-//
-//  This program is distributed in the hope that it will be useful,
-//  but WITHOUT ANY WARRANTY; without even the implied warranty of
-//  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
-//  GNU General Public License for more details.
-// 
-//  You should have received a copy of the GNU General Public License
-//  along with this program; if not, write to the Free Software
-//  Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA.
+/*
+**  Windstille - A Sci-Fi Action-Adventure Game
+**  Copyright (C) 2005 Matthias Braun <matze at braunis.de>
+**
+**  This program is free software: you can redistribute it and/or modify
+**  it under the terms of the GNU General Public License as published by
+**  the Free Software Foundation, either version 3 of the License, or
+**  (at your option) any later version.
+**  
+**  This program is distributed in the hope that it will be useful,
+**  but WITHOUT ANY WARRANTY; without even the implied warranty of
+**  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+**  GNU General Public License for more details.
+**  
+**  You should have received a copy of the GNU General Public License
+**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
+*/
 
 #ifndef __REFCOUNTER_HPP__
 #define __REFCOUNTER_HPP__

Modified: trunk/windstille/src/sprite3d/sprite3d.cpp
===================================================================
--- trunk/windstille/src/sprite3d/sprite3d.cpp	2009-02-10 18:39:04 UTC (rev 2446)
+++ trunk/windstille/src/sprite3d/sprite3d.cpp	2009-02-10 18:53:13 UTC (rev 2447)
@@ -1,20 +1,21 @@
-//
-//
-//  Copyright (C) 2005 Matthias Braun <matze at braunis.de>
-//
-//  This program is free software; you can redistribute it and/or
-//  modify it under the terms of the GNU General Public License
-//  as published by the Free Software Foundation; either version 2
-//  of the License, or (at your option) any later version.
-//
-//  This program is distributed in the hope that it will be useful,
-//  but WITHOUT ANY WARRANTY; without even the implied warranty of
-//  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
-//  GNU General Public License for more details.
-//
-//  You should have received a copy of the GNU General Public License
-//  along with this program; if not, write to the Free Software
-//  Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA.
+/*
+**  Windstille - A Sci-Fi Action-Adventure Game
+**  Copyright (C) 2005 Matthias Braun <matze at braunis.de>
+**
+**  This program is free software: you can redistribute it and/or modify
+**  it under the terms of the GNU General Public License as published by
+**  the Free Software Foundation, either version 3 of the License, or
+**  (at your option) any later version.
+**  
+**  This program is distributed in the hope that it will be useful,
+**  but WITHOUT ANY WARRANTY; without even the implied warranty of
+**  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+**  GNU General Public License for more details.
+**  
+**  You should have received a copy of the GNU General Public License
+**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
+*/
+
 #include <config.h>
 
 #include "sprite3d/sprite3d.hpp"

Modified: trunk/windstille/src/sprite3d/sprite3d.hpp
===================================================================
--- trunk/windstille/src/sprite3d/sprite3d.hpp	2009-02-10 18:39:04 UTC (rev 2446)
+++ trunk/windstille/src/sprite3d/sprite3d.hpp	2009-02-10 18:53:13 UTC (rev 2447)
@@ -1,20 +1,20 @@
-//
-// 
-//  Copyright (C) 2005 Matthias Braun <matze at braunis.de>
-//
-//  This program is free software; you can redistribute it and/or
-//  modify it under the terms of the GNU General Public License
-//  as published by the Free Software Foundation; either version 2
-//  of the License, or (at your option) any later version.
-//
-//  This program is distributed in the hope that it will be useful,
-//  but WITHOUT ANY WARRANTY; without even the implied warranty of
-//  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
-//  GNU General Public License for more details.
-// 
-//  You should have received a copy of the GNU General Public License
-//  along with this program; if not, write to the Free Software
-//  Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA.
+/*
+**  Windstille - A Sci-Fi Action-Adventure Game
+**  Copyright (C) 2005 Matthias Braun <matze at braunis.de>
+**
+**  This program is free software: you can redistribute it and/or modify
+**  it under the terms of the GNU General Public License as published by
+**  the Free Software Foundation, either version 3 of the License, or
+**  (at your option) any later version.
+**  
+**  This program is distributed in the hope that it will be useful,
+**  but WITHOUT ANY WARRANTY; without even the implied warranty of
+**  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+**  GNU General Public License for more details.
+**  
+**  You should have received a copy of the GNU General Public License
+**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
+*/
 
 #ifndef HEADER_SPRITE3D_HPP
 #define HEADER_SPRITE3D_HPP

Modified: trunk/windstille/src/tile_factory.hpp
===================================================================
--- trunk/windstille/src/tile_factory.hpp	2009-02-10 18:39:04 UTC (rev 2446)
+++ trunk/windstille/src/tile_factory.hpp	2009-02-10 18:53:13 UTC (rev 2447)
@@ -1,21 +1,20 @@
-//
-// 
-//  Windstille - A Jump'n Shoot Game
-//  Copyright (C) 2000 Ingo Ruhnke <grumbel at gmx.de>
-//
-//  This program is free software; you can redistribute it and/or
-//  modify it under the terms of the GNU General Public License
-//  as published by the Free Software Foundation; either version 2
-//  of the License, or (at your option) any later version.
-//
-//  This program is distributed in the hope that it will be useful,
-//  but WITHOUT ANY WARRANTY; without even the implied warranty of
-//  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
-//  GNU General Public License for more details.
-// 
-//  You should have received a copy of the GNU General Public License
-//  along with this program; if not, write to the Free Software
-//  Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA.
+/*
+**  Windstille - A Sci-Fi Action-Adventure Game
+**  Copyright (C) 2000 Ingo Ruhnke <grumbel at gmx.de>
+**
+**  This program is free software: you can redistribute it and/or modify
+**  it under the terms of the GNU General Public License as published by
+**  the Free Software Foundation, either version 3 of the License, or
+**  (at your option) any later version.
+**  
+**  This program is distributed in the hope that it will be useful,
+**  but WITHOUT ANY WARRANTY; without even the implied warranty of
+**  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+**  GNU General Public License for more details.
+**  
+**  You should have received a copy of the GNU General Public License
+**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
+*/
 
 #ifndef TILEFACTORY_HXX
 #define TILEFACTORY_HXX

Modified: trunk/windstille/src/tile_map.hpp
===================================================================
--- trunk/windstille/src/tile_map.hpp	2009-02-10 18:39:04 UTC (rev 2446)
+++ trunk/windstille/src/tile_map.hpp	2009-02-10 18:53:13 UTC (rev 2447)
@@ -1,21 +1,20 @@
-//
-// 
-//  Windstille - A Jump'n Shoot Game
-//  Copyright (C) 2000 Ingo Ruhnke <grumbel at gmx.de>
-//
-//  This program is free software; you can redistribute it and/or
-//  modify it under the terms of the GNU General Public License
-//  as published by the Free Software Foundation; either version 2
-//  of the License, or (at your option) any later version.
-//
-//  This program is distributed in the hope that it will be useful,
-//  but WITHOUT ANY WARRANTY; without even the implied warranty of
-//  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
-//  GNU General Public License for more details.
-// 
-//  You should have received a copy of the GNU General Public License
-//  along with this program; if not, write to the Free Software
-//  Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA.
+/*
+**  Windstille - A Sci-Fi Action-Adventure Game
+**  Copyright (C) 2000 Ingo Ruhnke <grumbel at gmx.de>
+**
+**  This program is free software: you can redistribute it and/or modify
+**  it under the terms of the GNU General Public License as published by
+**  the Free Software Foundation, either version 3 of the License, or
+**  (at your option) any later version.
+**  
+**  This program is distributed in the hope that it will be useful,
+**  but WITHOUT ANY WARRANTY; without even the implied warranty of
+**  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+**  GNU General Public License for more details.
+**  
+**  You should have received a copy of the GNU General Public License
+**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
+*/
 
 #ifndef HEADER_WINDSTILLE_TILEMAP_HXX
 #define HEADER_WINDSTILLE_TILEMAP_HXX

Modified: trunk/windstille/src/trigger.cpp
===================================================================
--- trunk/windstille/src/trigger.cpp	2009-02-10 18:39:04 UTC (rev 2446)
+++ trunk/windstille/src/trigger.cpp	2009-02-10 18:53:13 UTC (rev 2447)
@@ -1,21 +1,20 @@
-//
-// 
-//  Windstille - A Jump'n Shoot Game
-//  Copyright (C) 2000 Ingo Ruhnke <grumbel at gmx.de>
-//
-//  This program is free software; you can redistribute it and/or
-//  modify it under the terms of the GNU General Public License
-//  as published by the Free Software Foundation; either version 2
-//  of the License, or (at your option) any later version.
-//
-//  This program is distributed in the hope that it will be useful,
-//  but WITHOUT ANY WARRANTY; without even the implied warranty of
-//  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
-//  GNU General Public License for more details.
-// 
-//  You should have received a copy of the GNU General Public License
-//  along with this program; if not, write to the Free Software
-//  Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA.
+/*
+**  Windstille - A Sci-Fi Action-Adventure Game
+**  Copyright (C) 2000 Ingo Ruhnke <grumbel at gmx.de>
+**
+**  This program is free software: you can redistribute it and/or modify
+**  it under the terms of the GNU General Public License as published by
+**  the Free Software Foundation, either version 3 of the License, or
+**  (at your option) any later version.
+**  
+**  This program is distributed in the hope that it will be useful,
+**  but WITHOUT ANY WARRANTY; without even the implied warranty of
+**  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+**  GNU General Public License for more details.
+**  
+**  You should have received a copy of the GNU General Public License
+**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
+*/
 
 #include <stdexcept>
 #include <list>



From grumbel at mail.berlios.de  Tue Feb 10 20:00:43 2009
From: grumbel at mail.berlios.de (grumbel at BerliOS)
Date: Tue, 10 Feb 2009 20:00:43 +0100
Subject: [Windstille-commit] r2448 - in trunk/windstille/src: . display lisp
	math sprite3d
Message-ID: <200902101900.n1AJ0hej025441@sheep.berlios.de>

Author: grumbel
Date: 2009-02-10 20:00:41 +0100 (Tue, 10 Feb 2009)
New Revision: 2448

Modified:
   trunk/windstille/src/display/vertex_array_drawing_request.cpp
   trunk/windstille/src/display/vertex_array_drawing_request.hpp
   trunk/windstille/src/graphic_context_state.cpp
   trunk/windstille/src/graphic_context_state.hpp
   trunk/windstille/src/lisp/lexer.cpp
   trunk/windstille/src/lisp/lexer.hpp
   trunk/windstille/src/lisp/lisp.cpp
   trunk/windstille/src/lisp/lisp.hpp
   trunk/windstille/src/lisp/parser.cpp
   trunk/windstille/src/lisp/parser.hpp
   trunk/windstille/src/lisp/writer.cpp
   trunk/windstille/src/lisp/writer.hpp
   trunk/windstille/src/math/quaternion.cpp
   trunk/windstille/src/math/quaternion.hpp
   trunk/windstille/src/math/vector.cpp
   trunk/windstille/src/math/vector.hpp
   trunk/windstille/src/math/vector3.hpp
   trunk/windstille/src/pistol.cpp
   trunk/windstille/src/pistol.hpp
   trunk/windstille/src/player.cpp
   trunk/windstille/src/player.hpp
   trunk/windstille/src/sector.cpp
   trunk/windstille/src/sector.hpp
   trunk/windstille/src/sprite3d/data.cpp
   trunk/windstille/src/sprite3d/data.hpp
   trunk/windstille/src/tile.cpp
   trunk/windstille/src/tile.hpp
   trunk/windstille/src/tile_factory.cpp
   trunk/windstille/src/tile_map.cpp
   trunk/windstille/src/timer.cpp
   trunk/windstille/src/timer.hpp
   trunk/windstille/src/weapon.hpp
Log:
More copyright header updates

Modified: trunk/windstille/src/display/vertex_array_drawing_request.cpp
===================================================================
--- trunk/windstille/src/display/vertex_array_drawing_request.cpp	2009-02-10 18:53:13 UTC (rev 2447)
+++ trunk/windstille/src/display/vertex_array_drawing_request.cpp	2009-02-10 19:00:41 UTC (rev 2448)
@@ -16,7 +16,6 @@
 **  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
-
 #include <assert.h>
 
 #include "display/opengl_state.hpp"

Modified: trunk/windstille/src/display/vertex_array_drawing_request.hpp
===================================================================
--- trunk/windstille/src/display/vertex_array_drawing_request.hpp	2009-02-10 18:53:13 UTC (rev 2447)
+++ trunk/windstille/src/display/vertex_array_drawing_request.hpp	2009-02-10 19:00:41 UTC (rev 2448)
@@ -1,21 +1,20 @@
-//
-// 
-//  Windstille - A Jump'n Shoot Game
-//  Copyright (C) 2005 Ingo Ruhnke <grumbel at gmx.de>
-//
-//  This program is free software; you can redistribute it and/or
-//  modify it under the terms of the GNU General Public License
-//  as published by the Free Software Foundation; either version 2
-//  of the License, or (at your option) any later version.
-//
-//  This program is distributed in the hope that it will be useful,
-//  but WITHOUT ANY WARRANTY; without even the implied warranty of
-//  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
-//  GNU General Public License for more details.
-// 
-//  You should have received a copy of the GNU General Public License
-//  along with this program; if not, write to the Free Software
-//  Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA.
+/*
+**  Windstille - A Sci-Fi Action-Adventure Game
+**  Copyright (C) 2005 Ingo Ruhnke <grumbel at gmx.de>
+**
+**  This program is free software: you can redistribute it and/or modify
+**  it under the terms of the GNU General Public License as published by
+**  the Free Software Foundation, either version 3 of the License, or
+**  (at your option) any later version.
+**  
+**  This program is distributed in the hope that it will be useful,
+**  but WITHOUT ANY WARRANTY; without even the implied warranty of
+**  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+**  GNU General Public License for more details.
+**  
+**  You should have received a copy of the GNU General Public License
+**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
+*/
 
 #ifndef HEADER_VERTEX_ARRAY_DRAWING_REQUEST_HXX
 #define HEADER_VERTEX_ARRAY_DRAWING_REQUEST_HXX

Modified: trunk/windstille/src/graphic_context_state.cpp
===================================================================
--- trunk/windstille/src/graphic_context_state.cpp	2009-02-10 18:53:13 UTC (rev 2447)
+++ trunk/windstille/src/graphic_context_state.cpp	2009-02-10 19:00:41 UTC (rev 2448)
@@ -1,5 +1,3 @@
-//
-//
 //  Flexlay - A Generic 2D Game Editor
 //  Copyright (C) 2002 Ingo Ruhnke <grumbel at gmx.de>
 //

Modified: trunk/windstille/src/graphic_context_state.hpp
===================================================================
--- trunk/windstille/src/graphic_context_state.hpp	2009-02-10 18:53:13 UTC (rev 2447)
+++ trunk/windstille/src/graphic_context_state.hpp	2009-02-10 19:00:41 UTC (rev 2448)
@@ -1,5 +1,3 @@
-//
-// 
 //  Flexlay - A Generic 2D Game Editor
 //  Copyright (C) 2002 Ingo Ruhnke <grumbel at gmx.de>
 //

Modified: trunk/windstille/src/lisp/lexer.cpp
===================================================================
--- trunk/windstille/src/lisp/lexer.cpp	2009-02-10 18:53:13 UTC (rev 2447)
+++ trunk/windstille/src/lisp/lexer.cpp	2009-02-10 19:00:41 UTC (rev 2448)
@@ -1,5 +1,3 @@
-//
-//
 //  Copyright (C) 2004 Matthias Braun <matze at braunis.de>
 //  code in this file based on lispreader from Mark Probst
 //

Modified: trunk/windstille/src/lisp/lexer.hpp
===================================================================
--- trunk/windstille/src/lisp/lexer.hpp	2009-02-10 18:53:13 UTC (rev 2447)
+++ trunk/windstille/src/lisp/lexer.hpp	2009-02-10 19:00:41 UTC (rev 2448)
@@ -1,5 +1,3 @@
-//
-//
 //  Copyright (C) 2004 Matthias Braun <matze at braunis.de>
 //  code in this file based on lispreader from Mark Probst
 //

Modified: trunk/windstille/src/lisp/lisp.cpp
===================================================================
--- trunk/windstille/src/lisp/lisp.cpp	2009-02-10 18:53:13 UTC (rev 2447)
+++ trunk/windstille/src/lisp/lisp.cpp	2009-02-10 19:00:41 UTC (rev 2448)
@@ -1,5 +1,3 @@
-//
-//
 //  TuxKart - a fun racing game with go-kart
 //  Copyright (C) 2004 Matthias Braun <matze at braunis.de>
 //  code in this file based on lispreader from Mark Probst

Modified: trunk/windstille/src/lisp/lisp.hpp
===================================================================
--- trunk/windstille/src/lisp/lisp.hpp	2009-02-10 18:53:13 UTC (rev 2447)
+++ trunk/windstille/src/lisp/lisp.hpp	2009-02-10 19:00:41 UTC (rev 2448)
@@ -1,5 +1,3 @@
-//
-//
 //  Copyright (C) 2004 Matthias Braun <matze at braunis.de>
 //  code in this file based on lispreader from Mark Probst
 //

Modified: trunk/windstille/src/lisp/parser.cpp
===================================================================
--- trunk/windstille/src/lisp/parser.cpp	2009-02-10 18:53:13 UTC (rev 2447)
+++ trunk/windstille/src/lisp/parser.cpp	2009-02-10 19:00:41 UTC (rev 2448)
@@ -1,5 +1,3 @@
-//
-//
 //  TuxKart - a fun racing game with go-kart
 //  Copyright (C) 2004 Matthias Braun <matze at braunis.de>
 //  code in this file based on lispreader from Mark Probst

Modified: trunk/windstille/src/lisp/parser.hpp
===================================================================
--- trunk/windstille/src/lisp/parser.hpp	2009-02-10 18:53:13 UTC (rev 2447)
+++ trunk/windstille/src/lisp/parser.hpp	2009-02-10 19:00:41 UTC (rev 2448)
@@ -1,5 +1,3 @@
-//
-//
 //  TuxKart - a fun racing game with go-kart
 //  Copyright (C) 2004 Matthias Braun <matze at braunis.de>
 //

Modified: trunk/windstille/src/lisp/writer.cpp
===================================================================
--- trunk/windstille/src/lisp/writer.cpp	2009-02-10 18:53:13 UTC (rev 2447)
+++ trunk/windstille/src/lisp/writer.cpp	2009-02-10 19:00:41 UTC (rev 2448)
@@ -1,5 +1,3 @@
-//
-//
 //  SuperTux -  A Jump'n Run
 //  Copyright (C) 2004 Matthias Braun <matze at braunis.de
 //

Modified: trunk/windstille/src/lisp/writer.hpp
===================================================================
--- trunk/windstille/src/lisp/writer.hpp	2009-02-10 18:53:13 UTC (rev 2447)
+++ trunk/windstille/src/lisp/writer.hpp	2009-02-10 19:00:41 UTC (rev 2448)
@@ -1,5 +1,3 @@
-//
-//
 //  SuperTux -  A Jump'n Run
 //  Copyright (C) 2004 Matthias Braun <matze at braunis.de
 //

Modified: trunk/windstille/src/math/quaternion.cpp
===================================================================
--- trunk/windstille/src/math/quaternion.cpp	2009-02-10 18:53:13 UTC (rev 2447)
+++ trunk/windstille/src/math/quaternion.cpp	2009-02-10 19:00:41 UTC (rev 2448)
@@ -1,21 +1,21 @@
-//
-// 
-//  Windstille - A Jump'n Shoot Game
-//  Copyright (C) 2005 Matthias Braun <matze at braunis.de>
-//
-//  This program is free software; you can redistribute it and/or
-//  modify it under the terms of the GNU General Public License
-//  as published by the Free Software Foundation; either version 2
-//  of the License, or (at your option) any later version.
-//
-//  This program is distributed in the hope that it will be useful,
-//  but WITHOUT ANY WARRANTY; without even the implied warranty of
-//  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
-//  GNU General Public License for more details.
-// 
-//  You should have received a copy of the GNU General Public License
-//  along with this program; if not, write to the Free Software
-//  Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA.
+/*
+**  Windstille - A Sci-Fi Action-Adventure Game
+**  Copyright (C) 2005 Matthias Braun <matze at braunis.de>
+**
+**  This program is free software: you can redistribute it and/or modify
+**  it under the terms of the GNU General Public License as published by
+**  the Free Software Foundation, either version 3 of the License, or
+**  (at your option) any later version.
+**  
+**  This program is distributed in the hope that it will be useful,
+**  but WITHOUT ANY WARRANTY; without even the implied warranty of
+**  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+**  GNU General Public License for more details.
+**  
+**  You should have received a copy of the GNU General Public License
+**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
+*/
+
 #include <config.h>
 
 #include "quaternion.hpp"

Modified: trunk/windstille/src/math/quaternion.hpp
===================================================================
--- trunk/windstille/src/math/quaternion.hpp	2009-02-10 18:53:13 UTC (rev 2447)
+++ trunk/windstille/src/math/quaternion.hpp	2009-02-10 19:00:41 UTC (rev 2448)
@@ -1,21 +1,20 @@
-//
-// 
-//  Windstille - A Jump'n Shoot Game
-//  Copyright (C) 2005 Matthias Braun <matze at braunis.de>
-//
-//  This program is free software; you can redistribute it and/or
-//  modify it under the terms of the GNU General Public License
-//  as published by the Free Software Foundation; either version 2
-//  of the License, or (at your option) any later version.
-//
-//  This program is distributed in the hope that it will be useful,
-//  but WITHOUT ANY WARRANTY; without even the implied warranty of
-//  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
-//  GNU General Public License for more details.
-// 
-//  You should have received a copy of the GNU General Public License
-//  along with this program; if not, write to the Free Software
-//  Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA.
+/*
+**  Windstille - A Sci-Fi Action-Adventure Game
+**  Copyright (C) 2005 Matthias Braun <matze at braunis.de>
+**
+**  This program is free software: you can redistribute it and/or modify
+**  it under the terms of the GNU General Public License as published by
+**  the Free Software Foundation, either version 3 of the License, or
+**  (at your option) any later version.
+**  
+**  This program is distributed in the hope that it will be useful,
+**  but WITHOUT ANY WARRANTY; without even the implied warranty of
+**  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+**  GNU General Public License for more details.
+**  
+**  You should have received a copy of the GNU General Public License
+**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
+*/
 
 #ifndef __QUATERNION_HPP__
 #define __QUATERNION_HPP__

Modified: trunk/windstille/src/math/vector.cpp
===================================================================
--- trunk/windstille/src/math/vector.cpp	2009-02-10 18:53:13 UTC (rev 2447)
+++ trunk/windstille/src/math/vector.cpp	2009-02-10 19:00:41 UTC (rev 2448)
@@ -1,5 +1,3 @@
-//
-//
 //  SuperTux -  A Jump'n Run
 //  Copyright (C) 2004 Matthias Braun <matze at braunis.de
 //

Modified: trunk/windstille/src/math/vector.hpp
===================================================================
--- trunk/windstille/src/math/vector.hpp	2009-02-10 18:53:13 UTC (rev 2447)
+++ trunk/windstille/src/math/vector.hpp	2009-02-10 19:00:41 UTC (rev 2448)
@@ -1,5 +1,3 @@
-//
-//
 //  SuperTux -  A Jump'n Run
 //  Copyright (C) 2004 Matthias Braun <matze at braunis.de>
 //

Modified: trunk/windstille/src/math/vector3.hpp
===================================================================
--- trunk/windstille/src/math/vector3.hpp	2009-02-10 18:53:13 UTC (rev 2447)
+++ trunk/windstille/src/math/vector3.hpp	2009-02-10 19:00:41 UTC (rev 2448)
@@ -1,21 +1,21 @@
-//
-// 
-//  Windstille - A Jump'n Shoot Game
-//  Copyright (C) 2005 Matthias Braun <matze at braunis.de>
-//
-//  This program is free software; you can redistribute it and/or
-//  modify it under the terms of the GNU General Public License
-//  as published by the Free Software Foundation; either version 2
-//  of the License, or (at your option) any later version.
-//
-//  This program is distributed in the hope that it will be useful,
-//  but WITHOUT ANY WARRANTY; without even the implied warranty of
-//  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
-//  GNU General Public License for more details.
-// 
-//  You should have received a copy of the GNU General Public License
-//  along with this program; if not, write to the Free Software
-//  Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA.
+/*
+**  Windstille - A Sci-Fi Action-Adventure Game
+**  Copyright (C) 2005 Matthias Braun <matze at braunis.de>
+**
+**  This program is free software: you can redistribute it and/or modify
+**  it under the terms of the GNU General Public License as published by
+**  the Free Software Foundation, either version 3 of the License, or
+**  (at your option) any later version.
+**  
+**  This program is distributed in the hope that it will be useful,
+**  but WITHOUT ANY WARRANTY; without even the implied warranty of
+**  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+**  GNU General Public License for more details.
+**  
+**  You should have received a copy of the GNU General Public License
+**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
+*/
+
 #ifndef __VECTOR3_HPP__
 #define __VECTOR3_HPP__
 

Modified: trunk/windstille/src/pistol.cpp
===================================================================
--- trunk/windstille/src/pistol.cpp	2009-02-10 18:53:13 UTC (rev 2447)
+++ trunk/windstille/src/pistol.cpp	2009-02-10 19:00:41 UTC (rev 2448)
@@ -1,23 +1,21 @@
-//
-// 
-//  Windstille - A Jump'n Shoot Game
-//  Copyright (C) 2005 Matthias Braun <matze at braunis.de>
-//
-//  This program is free software; you can redistribute it and/or
-//  modify it under the terms of the GNU General Public License
-//  as published by the Free Software Foundation; either version 2
-//  of the License, or (at your option) any later version.
-//
-//  This program is distributed in the hope that it will be useful,
-//  but WITHOUT ANY WARRANTY; without even the implied warranty of
-//  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
-//  GNU General Public License for more details.
-// 
-//  You should have received a copy of the GNU General Public License
-//  along with this program; if not, write to the Free Software
-//  Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA.
+/*
+**  Windstille - A Sci-Fi Action-Adventure Game
+**  Copyright (C) 2005 Matthias Braun <matze at braunis.de>
+**
+**  This program is free software: you can redistribute it and/or modify
+**  it under the terms of the GNU General Public License as published by
+**  the Free Software Foundation, either version 3 of the License, or
+**  (at your option) any later version.
+**  
+**  This program is distributed in the hope that it will be useful,
+**  but WITHOUT ANY WARRANTY; without even the implied warranty of
+**  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+**  GNU General Public License for more details.
+**  
+**  You should have received a copy of the GNU General Public License
+**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
+*/
 
-
 #include "laser_pointer.hpp"
 #include "pistol.hpp"
 

Modified: trunk/windstille/src/pistol.hpp
===================================================================
--- trunk/windstille/src/pistol.hpp	2009-02-10 18:53:13 UTC (rev 2447)
+++ trunk/windstille/src/pistol.hpp	2009-02-10 19:00:41 UTC (rev 2448)
@@ -1,21 +1,20 @@
-//
-// 
-//  Windstille - A Jump'n Shoot Game
-//  Copyright (C) 2005 Matthias Braun <matze at braunis.de>
-//
-//  This program is free software; you can redistribute it and/or
-//  modify it under the terms of the GNU General Public License
-//  as published by the Free Software Foundation; either version 2
-//  of the License, or (at your option) any later version.
-//
-//  This program is distributed in the hope that it will be useful,
-//  but WITHOUT ANY WARRANTY; without even the implied warranty of
-//  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
-//  GNU General Public License for more details.
-// 
-//  You should have received a copy of the GNU General Public License
-//  along with this program; if not, write to the Free Software
-//  Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA.
+/*
+**  Windstille - A Sci-Fi Action-Adventure Game
+**  Copyright (C) 2005 Matthias Braun <matze at braunis.de>
+**
+**  This program is free software: you can redistribute it and/or modify
+**  it under the terms of the GNU General Public License as published by
+**  the Free Software Foundation, either version 3 of the License, or
+**  (at your option) any later version.
+**  
+**  This program is distributed in the hope that it will be useful,
+**  but WITHOUT ANY WARRANTY; without even the implied warranty of
+**  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+**  GNU General Public License for more details.
+**  
+**  You should have received a copy of the GNU General Public License
+**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
+*/
 
 #ifndef PISTOL_HPP
 #define PISTOL_HPP

Modified: trunk/windstille/src/player.cpp
===================================================================
--- trunk/windstille/src/player.cpp	2009-02-10 18:53:13 UTC (rev 2447)
+++ trunk/windstille/src/player.cpp	2009-02-10 19:00:41 UTC (rev 2448)
@@ -1,21 +1,20 @@
-//
-//
-//  Windstille - A Jump'n Shoot Game
-//  Copyright (C) 2000 Ingo Ruhnke <grumbel at gmx.de>
-//
-//  This program is free software; you can redistribute it and/or
-//  modify it under the terms of the GNU General Public License
-//  as published by the Free Software Foundation; either version 2
-//  of the License, or (at your option) any later version.
-//
-//  This program is distributed in the hope that it will be useful,
-//  but WITHOUT ANY WARRANTY; without even the implied warranty of
-//  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
-//  GNU General Public License for more details.
-//
-//  You should have received a copy of the GNU General Public License
-//  along with this program; if not, write to the Free Software
-//  Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA.
+/*
+**  Windstille - A Sci-Fi Action-Adventure Game
+**  Copyright (C) 2000 Ingo Ruhnke <grumbel at gmx.de>
+**
+**  This program is free software: you can redistribute it and/or modify
+**  it under the terms of the GNU General Public License as published by
+**  the Free Software Foundation, either version 3 of the License, or
+**  (at your option) any later version.
+**  
+**  This program is distributed in the hope that it will be useful,
+**  but WITHOUT ANY WARRANTY; without even the implied warranty of
+**  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+**  GNU General Public License for more details.
+**  
+**  You should have received a copy of the GNU General Public License
+**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
+*/
 
 #include <boost/bind.hpp>
 #include "tile_map.hpp"

Modified: trunk/windstille/src/player.hpp
===================================================================
--- trunk/windstille/src/player.hpp	2009-02-10 18:53:13 UTC (rev 2447)
+++ trunk/windstille/src/player.hpp	2009-02-10 19:00:41 UTC (rev 2448)
@@ -15,6 +15,7 @@
 **  You should have received a copy of the GNU General Public License
 **  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
+
 #ifndef PLAYER_HXX
 #define PLAYER_HXX
 

Modified: trunk/windstille/src/sector.cpp
===================================================================
--- trunk/windstille/src/sector.cpp	2009-02-10 18:53:13 UTC (rev 2447)
+++ trunk/windstille/src/sector.cpp	2009-02-10 19:00:41 UTC (rev 2448)
@@ -1,21 +1,20 @@
-//
-//
-//  Windstille - A Jump'n Shoot Game
-//  Copyright (C) 2005 Ingo Ruhnke <grumbel at gmx.de>
-//
-//  This program is free software; you can redistribute it and/or
-//  modify it under the terms of the GNU General Public License
-//  as published by the Free Software Foundation; either version 2
-//  of the License, or (at your option) any later version.
-//
-//  This program is distributed in the hope that it will be useful,
-//  but WITHOUT ANY WARRANTY; without even the implied warranty of
-//  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
-//  GNU General Public License for more details.
-//
-//  You should have received a copy of the GNU General Public License
-//  along with this program; if not, write to the Free Software
-//  Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA.
+/*
+**  Windstille - A Sci-Fi Action-Adventure Game
+**  Copyright (C) 2005 Ingo Ruhnke <grumbel at gmx.de>
+**
+**  This program is free software: you can redistribute it and/or modify
+**  it under the terms of the GNU General Public License as published by
+**  the Free Software Foundation, either version 3 of the License, or
+**  (at your option) any later version.
+**  
+**  This program is distributed in the hope that it will be useful,
+**  but WITHOUT ANY WARRANTY; without even the implied warranty of
+**  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+**  GNU General Public License for more details.
+**  
+**  You should have received a copy of the GNU General Public License
+**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
+*/
 
 #include <iostream>
 #include <sstream>

Modified: trunk/windstille/src/sector.hpp
===================================================================
--- trunk/windstille/src/sector.hpp	2009-02-10 18:53:13 UTC (rev 2447)
+++ trunk/windstille/src/sector.hpp	2009-02-10 19:00:41 UTC (rev 2448)
@@ -1,21 +1,20 @@
-//
-// 
-//  Windstille - A Jump'n Shoot Game
-//  Copyright (C) 2005 Ingo Ruhnke <grumbel at gmx.de>
-//
-//  This program is free software; you can redistribute it and/or
-//  modify it under the terms of the GNU General Public License
-//  as published by the Free Software Foundation; either version 2
-//  of the License, or (at your option) any later version.
-//
-//  This program is distributed in the hope that it will be useful,
-//  but WITHOUT ANY WARRANTY; without even the implied warranty of
-//  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
-//  GNU General Public License for more details.
-// 
-//  You should have received a copy of the GNU General Public License
-//  along with this program; if not, write to the Free Software
-//  Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA.
+/*
+**  Windstille - A Sci-Fi Action-Adventure Game
+**  Copyright (C) 2005 Ingo Ruhnke <grumbel at gmx.de>
+**
+**  This program is free software: you can redistribute it and/or modify
+**  it under the terms of the GNU General Public License as published by
+**  the Free Software Foundation, either version 3 of the License, or
+**  (at your option) any later version.
+**  
+**  This program is distributed in the hope that it will be useful,
+**  but WITHOUT ANY WARRANTY; without even the implied warranty of
+**  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+**  GNU General Public License for more details.
+**  
+**  You should have received a copy of the GNU General Public License
+**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
+*/
 
 #ifndef HEADER_SECTOR_HXX
 #define HEADER_SECTOR_HXX

Modified: trunk/windstille/src/sprite3d/data.cpp
===================================================================
--- trunk/windstille/src/sprite3d/data.cpp	2009-02-10 18:53:13 UTC (rev 2447)
+++ trunk/windstille/src/sprite3d/data.cpp	2009-02-10 19:00:41 UTC (rev 2448)
@@ -1,3 +1,20 @@
+/*
+**  Windstille - A Sci-Fi Action-Adventure Game
+**  Copyright (C) 2005 Matthias Braun <matze at braunis.de>
+**
+**  This program is free software: you can redistribute it and/or modify
+**  it under the terms of the GNU General Public License as published by
+**  the Free Software Foundation, either version 3 of the License, or
+**  (at your option) any later version.
+**  
+**  This program is distributed in the hope that it will be useful,
+**  but WITHOUT ANY WARRANTY; without even the implied warranty of
+**  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+**  GNU General Public License for more details.
+**  
+**  You should have received a copy of the GNU General Public License
+**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
+*/
 
 #include "sprite3d/data.hpp"
 

Modified: trunk/windstille/src/sprite3d/data.hpp
===================================================================
--- trunk/windstille/src/sprite3d/data.hpp	2009-02-10 18:53:13 UTC (rev 2447)
+++ trunk/windstille/src/sprite3d/data.hpp	2009-02-10 19:00:41 UTC (rev 2448)
@@ -1,20 +1,20 @@
-//
-// 
-//  Copyright (C) 2005 Matthias Braun <matze at braunis.de>
-//
-//  This program is free software; you can redistribute it and/or
-//  modify it under the terms of the GNU General Public License
-//  as published by the Free Software Foundation; either version 2
-//  of the License, or (at your option) any later version.
-//
-//  This program is distributed in the hope that it will be useful,
-//  but WITHOUT ANY WARRANTY; without even the implied warranty of
-//  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
-//  GNU General Public License for more details.
-// 
-//  You should have received a copy of the GNU General Public License
-//  along with this program; if not, write to the Free Software
-//  Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA.
+/*
+**  Windstille - A Sci-Fi Action-Adventure Game
+**  Copyright (C) 2005 Matthias Braun <matze at braunis.de>
+**
+**  This program is free software: you can redistribute it and/or modify
+**  it under the terms of the GNU General Public License as published by
+**  the Free Software Foundation, either version 3 of the License, or
+**  (at your option) any later version.
+**  
+**  This program is distributed in the hope that it will be useful,
+**  but WITHOUT ANY WARRANTY; without even the implied warranty of
+**  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+**  GNU General Public License for more details.
+**  
+**  You should have received a copy of the GNU General Public License
+**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
+*/
 
 #ifndef HEADER_SPRITE3D_DATA_HPP
 #define HEADER_SPRITE3D_DATA_HPP

Modified: trunk/windstille/src/tile.cpp
===================================================================
--- trunk/windstille/src/tile.cpp	2009-02-10 18:53:13 UTC (rev 2447)
+++ trunk/windstille/src/tile.cpp	2009-02-10 19:00:41 UTC (rev 2448)
@@ -1,21 +1,20 @@
-//
-//
-//  Windstille - A Jump'n Shoot Game
-//  Copyright (C) 2002 Ingo Ruhnke <grumbel at gmx.de>
-//
-//  This program is free software; you can redistribute it and/or
-//  modify it under the terms of the GNU General Public License
-//  as published by the Free Software Foundation; either version 2
-//  of the License, or (at your option) any later version.
-//
-//  This program is distributed in the hope that it will be useful,
-//  but WITHOUT ANY WARRANTY; without even the implied warranty of
-//  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
-//  GNU General Public License for more details.
-//
-//  You should have received a copy of the GNU General Public License
-//  along with this program; if not, write to the Free Software
-//  Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA.
+/*
+**  Windstille - A Sci-Fi Action-Adventure Game
+**  Copyright (C) 2002 Ingo Ruhnke <grumbel at gmx.de>
+**
+**  This program is free software: you can redistribute it and/or modify
+**  it under the terms of the GNU General Public License as published by
+**  the Free Software Foundation, either version 3 of the License, or
+**  (at your option) any later version.
+**  
+**  This program is distributed in the hope that it will be useful,
+**  but WITHOUT ANY WARRANTY; without even the implied warranty of
+**  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+**  GNU General Public License for more details.
+**  
+**  You should have received a copy of the GNU General Public License
+**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
+*/
 
 #include <iostream>
 #include "globals.hpp"

Modified: trunk/windstille/src/tile.hpp
===================================================================
--- trunk/windstille/src/tile.hpp	2009-02-10 18:53:13 UTC (rev 2447)
+++ trunk/windstille/src/tile.hpp	2009-02-10 19:00:41 UTC (rev 2448)
@@ -1,21 +1,20 @@
-//
-// 
-//  Windstille - A Jump'n Shoot Game
-//  Copyright (C) 2002 Ingo Ruhnke <grumbel at gmx.de>
-//
-//  This program is free software; you can redistribute it and/or
-//  modify it under the terms of the GNU General Public License
-//  as published by the Free Software Foundation; either version 2
-//  of the License, or (at your option) any later version.
-//
-//  This program is distributed in the hope that it will be useful,
-//  but WITHOUT ANY WARRANTY; without even the implied warranty of
-//  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
-//  GNU General Public License for more details.
-// 
-//  You should have received a copy of the GNU General Public License
-//  along with this program; if not, write to the Free Software
-//  Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA.
+/*
+**  Windstille - A Sci-Fi Action-Adventure Game
+**  Copyright (C) 2002 Ingo Ruhnke <grumbel at gmx.de>
+**
+**  This program is free software: you can redistribute it and/or modify
+**  it under the terms of the GNU General Public License as published by
+**  the Free Software Foundation, either version 3 of the License, or
+**  (at your option) any later version.
+**  
+**  This program is distributed in the hope that it will be useful,
+**  but WITHOUT ANY WARRANTY; without even the implied warranty of
+**  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+**  GNU General Public License for more details.
+**  
+**  You should have received a copy of the GNU General Public License
+**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
+*/
 
 #ifndef HEADER_TILE_HXX
 #define HEADER_TILE_HXX

Modified: trunk/windstille/src/tile_factory.cpp
===================================================================
--- trunk/windstille/src/tile_factory.cpp	2009-02-10 18:53:13 UTC (rev 2447)
+++ trunk/windstille/src/tile_factory.cpp	2009-02-10 19:00:41 UTC (rev 2448)
@@ -1,21 +1,20 @@
-//
-//
-//  Windstille - A Jump'n Shoot Game
-//  Copyright (C) 2000 Ingo Ruhnke <grumbel at gmx.de>
-//
-//  This program is free software; you can redistribute it and/or
-//  modify it under the terms of the GNU General Public License
-//  as published by the Free Software Foundation; either version 2
-//  of the License, or (at your option) any later version.
-//
-//  This program is distributed in the hope that it will be useful,
-//  but WITHOUT ANY WARRANTY; without even the implied warranty of
-//  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
-//  GNU General Public License for more details.
-//
-//  You should have received a copy of the GNU General Public License
-//  along with this program; if not, write to the Free Software
-//  Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA.
+/*
+**  Windstille - A Sci-Fi Action-Adventure Game
+**  Copyright (C) 2000 Ingo Ruhnke <grumbel at gmx.de>
+**
+**  This program is free software: you can redistribute it and/or modify
+**  it under the terms of the GNU General Public License as published by
+**  the Free Software Foundation, either version 3 of the License, or
+**  (at your option) any later version.
+**  
+**  This program is distributed in the hope that it will be useful,
+**  but WITHOUT ANY WARRANTY; without even the implied warranty of
+**  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+**  GNU General Public License for more details.
+**  
+**  You should have received a copy of the GNU General Public License
+**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
+*/
 
 #include <string>
 #include <sstream>

Modified: trunk/windstille/src/tile_map.cpp
===================================================================
--- trunk/windstille/src/tile_map.cpp	2009-02-10 18:53:13 UTC (rev 2447)
+++ trunk/windstille/src/tile_map.cpp	2009-02-10 19:00:41 UTC (rev 2448)
@@ -1,21 +1,20 @@
-//
-//
-//  Windstille - A Jump'n Shoot Game
-//  Copyright (C) 2000 Ingo Ruhnke <grumbel at gmx.de>
-//
-//  This program is free software; you can redistribute it and/or
-//  modify it under the terms of the GNU General Public License
-//  as published by the Free Software Foundation; either version 2
-//  of the License, or (at your option) any later version.
-//
-//  This program is distributed in the hope that it will be useful,
-//  but WITHOUT ANY WARRANTY; without even the implied warranty of
-//  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
-//  GNU General Public License for more details.
-//
-//  You should have received a copy of the GNU General Public License
-//  along with this program; if not, write to the Free Software
-//  Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA.
+/*
+**  Windstille - A Sci-Fi Action-Adventure Game
+**  Copyright (C) 2000 Ingo Ruhnke <grumbel at gmx.de>
+**
+**  This program is free software: you can redistribute it and/or modify
+**  it under the terms of the GNU General Public License as published by
+**  the Free Software Foundation, either version 3 of the License, or
+**  (at your option) any later version.
+**  
+**  This program is distributed in the hope that it will be useful,
+**  but WITHOUT ANY WARRANTY; without even the implied warranty of
+**  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+**  GNU General Public License for more details.
+**  
+**  You should have received a copy of the GNU General Public License
+**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
+*/
 
 #include <sstream>
 #include <stdexcept>

Modified: trunk/windstille/src/timer.cpp
===================================================================
--- trunk/windstille/src/timer.cpp	2009-02-10 18:53:13 UTC (rev 2447)
+++ trunk/windstille/src/timer.cpp	2009-02-10 19:00:41 UTC (rev 2448)
@@ -1,5 +1,3 @@
-//
-// 
 //  SuperTux
 //  Copyright (C) 2005 Matthias Braun <matze at braunis.de>
 //

Modified: trunk/windstille/src/timer.hpp
===================================================================
--- trunk/windstille/src/timer.hpp	2009-02-10 18:53:13 UTC (rev 2447)
+++ trunk/windstille/src/timer.hpp	2009-02-10 19:00:41 UTC (rev 2448)
@@ -1,5 +1,3 @@
-//
-// 
 //  SuperTux
 //  Copyright (C) 2005 Matthias Braun <matze at braunis.de>
 //

Modified: trunk/windstille/src/weapon.hpp
===================================================================
--- trunk/windstille/src/weapon.hpp	2009-02-10 18:53:13 UTC (rev 2447)
+++ trunk/windstille/src/weapon.hpp	2009-02-10 19:00:41 UTC (rev 2448)
@@ -1,21 +1,20 @@
-//
-// 
-//  Windstille - A Jump'n Shoot Game
-//  Copyright (C) 2005 Matthias Braun <matze at braunis.de>
-//
-//  This program is free software; you can redistribute it and/or
-//  modify it under the terms of the GNU General Public License
-//  as published by the Free Software Foundation; either version 2
-//  of the License, or (at your option) any later version.
-//
-//  This program is distributed in the hope that it will be useful,
-//  but WITHOUT ANY WARRANTY; without even the implied warranty of
-//  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
-//  GNU General Public License for more details.
-// 
-//  You should have received a copy of the GNU General Public License
-//  along with this program; if not, write to the Free Software
-//  Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA.
+/*
+**  Windstille - A Sci-Fi Action-Adventure Game
+**  Copyright (C) 2005 Ingo Ruhnke <grumbel at gmx.de>
+**
+**  This program is free software: you can redistribute it and/or modify
+**  it under the terms of the GNU General Public License as published by
+**  the Free Software Foundation, either version 3 of the License, or
+**  (at your option) any later version.
+**  
+**  This program is distributed in the hope that it will be useful,
+**  but WITHOUT ANY WARRANTY; without even the implied warranty of
+**  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+**  GNU General Public License for more details.
+**  
+**  You should have received a copy of the GNU General Public License
+**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
+*/
 
 #ifndef WEAPON_HPP
 #define WEAPON_HPP



From grumbel at mail.berlios.de  Tue Feb 10 20:15:24 2009
From: grumbel at mail.berlios.de (grumbel at BerliOS)
Date: Tue, 10 Feb 2009 20:15:24 +0100
Subject: [Windstille-commit] r2449 - in trunk: . collisiontest
Message-ID: <200902101915.n1AJFORt027714@sheep.berlios.de>

Author: grumbel
Date: 2009-02-10 20:15:23 +0100 (Tue, 10 Feb 2009)
New Revision: 2449

Added:
   trunk/collisiontest/
   trunk/collisiontest/Makefile
   trunk/collisiontest/README
   trunk/collisiontest/SConstruct
   trunk/collisiontest/collision.cxx
   trunk/collisiontest/collision.hxx
   trunk/collisiontest/colltest.cxx
   trunk/collisiontest/colltest.hxx
   trunk/collisiontest/main.cxx
Log:
Added collisiontest_050630_1418.tgz to SVN

Added: trunk/collisiontest/Makefile
===================================================================
--- trunk/collisiontest/Makefile	2009-02-10 19:00:41 UTC (rev 2448)
+++ trunk/collisiontest/Makefile	2009-02-10 19:15:23 UTC (rev 2449)
@@ -0,0 +1,2 @@
+all:
+	scons

Added: trunk/collisiontest/README
===================================================================
--- trunk/collisiontest/README	2009-02-10 19:00:41 UTC (rev 2448)
+++ trunk/collisiontest/README	2009-02-10 19:15:23 UTC (rev 2449)
@@ -0,0 +1,10 @@
+This example is able to do:
+1) Throw boxes by clicking and holding left-mouse-button.
+2) running and jumping around with cursor keys.
+
+Tests:
+- throw boxes
+- push boxes
+- fall off from elevator
+- run under elevator
+- let you push around from elevator
\ No newline at end of file

Added: trunk/collisiontest/SConstruct
===================================================================
--- trunk/collisiontest/SConstruct	2009-02-10 19:00:41 UTC (rev 2448)
+++ trunk/collisiontest/SConstruct	2009-02-10 19:15:23 UTC (rev 2449)
@@ -0,0 +1,18 @@
+import os
+import glob
+
+opts = Options('custom.py')
+opts.Add('CXXFLAGS', 'The C++ compiler flags.', '-g -O0 -Wall')
+
+env = Environment(SHLIBPREFIX='',
+                  ENV = os.environ,
+                  options=opts)
+Help(opts.GenerateHelpText(env))
+
+env.ParseConfig("pkg-config --cflags --libs clanCore-0.7 clanDisplay-0.7 clanGL-0.7 clanSignals-0.7")
+
+ptest = env.Program('main',
+                    ['main.cxx', 'colltest.cxx','collision.cxx'])
+
+# EOF #
+

Added: trunk/collisiontest/collision.cxx
===================================================================
--- trunk/collisiontest/collision.cxx	2009-02-10 19:00:41 UTC (rev 2448)
+++ trunk/collisiontest/collision.cxx	2009-02-10 19:15:23 UTC (rev 2449)
@@ -0,0 +1,925 @@
+#include "collision.hxx"
+#include "colltest.hxx"
+
+#include <assert.h>
+
+#include <ClanLib/display.h>
+
+/***********************************************************************
+ * CollisionResult
+ ***********************************************************************/
+
+CollisionData CollisionData::merge(const CollisionData &r)
+{
+  if(state==COLLISION)
+    {
+      if((r.state==COLLISION && r.col_time<col_time) || r.state==STUCK)
+	*this=r;
+    }
+  else if(state==NONE)
+    *this=r;
+
+  return *this;
+}
+
+
+/***********************************************************************
+ * CollPrimitive
+ ***********************************************************************/
+
+CollPrimitive::CollPrimitive(CollisionObject *object_):object(object_)
+{
+  assert (object_);
+}
+
+CollPrimitive::~CollPrimitive()
+{
+}
+
+inline float CollPrimitive::x_velocity() const
+{
+  return object->get_movement().x;
+}
+inline float CollPrimitive::y_velocity() const
+{
+  return object->get_movement().y;
+}
+
+CL_Vector2 CollPrimitive::get_velocity() const
+{
+  return object->get_movement();
+}
+
+/***********************************************************************
+ * CollRect
+ ***********************************************************************/
+
+CollRect::CollRect(const CL_Rectf &r_,CollisionObject *object_):
+  CollPrimitive(object_),rect(r_)
+  {
+  }
+
+CollPrimitive *CollRect::clone(CollisionObject *o) const
+{
+  return new CollRect(rect,o);
+}
+
+
+float CollRect::x_pos() const
+{
+  return rect.left+object->get_pos().x;
+}
+
+float CollRect::y_pos() const
+{
+  return rect.top+object->get_pos().y;
+}
+
+float CollRect::width() const
+{
+  return rect.get_width();
+}
+float CollRect::height() const
+{
+  return rect.get_height();
+}
+
+inline std::ostream& operator<<(std::ostream& out, const CollRect &b)
+{
+  out<<"("<<b.x_pos()<<","<<b.y_pos()<<","<<b.width()<<","<<b.height()<<","<<b.object->get_movement().x<<","<<b.object->get_movement().y<<")";
+  return out;
+}
+
+CL_Vector2 CollRect::get_vector0() const
+{
+  return CL_Vector2(x_pos(),y_pos());
+}
+CL_Vector2 CollRect::get_vector1() const
+{
+  return CL_Vector2(x_pos()+width(),y_pos());
+}
+CL_Vector2 CollRect::get_vector2() const
+{
+  return CL_Vector2(x_pos(),y_pos()+height());
+}
+CL_Vector2 CollRect::get_vector3() const
+{
+  return CL_Vector2(x_pos()+width(),y_pos()+height());
+}
+
+void CollRect::drawCollision() const
+{
+  CL_Gradient g(CL_Color(255, 255, 255),CL_Color(255, 255, 255),CL_Color(255, 255, 255),CL_Color(255, 255, 255));
+  CL_Gradient g2(CL_Color(0, 255, 255),CL_Color(0, 255, 255),CL_Color(0, 255, 255),CL_Color(0, 255, 255));
+
+  /*  if(object->collision)
+    CL_Display::fill_rect(CL_Rectff(CL_Pointf(i->x_pos(), i->y_pos()),
+				   CL_Sizef(i->width(), i->height())),g2);
+				   else*/
+
+  CL_Vector2 v=object->get_pos();
+  CL_Rectf r=rect;
+  r+=CL_Pointf(v.x,v.y);
+
+  CL_Display::fill_rect(r,g);
+  
+  CL_Display::draw_rect(r,
+			CL_Color(155, 155, 155));        
+  
+  CL_Display::draw_line(r.left + r.get_width()/2,
+			r.top  + r.get_height()/2,
+			r.left + r.get_width()/2 + object->get_movement().x,
+			r.top  + r.get_height()/2 + object->get_movement().y,
+			CL_Color(255, 0, 255));
+
+}
+
+/***********************************************************************
+ * CollTri
+ ***********************************************************************/
+
+CollTri::CollTri(CollisionObject *object_):
+  CollPrimitive (object_)
+{
+}
+
+CollTri::CollTri(const CL_Vector2 &base_, float dx_, float dy_,CollisionObject *object_):
+  CollPrimitive (object_),
+  base(base_),
+  dx(dx_),
+  dy(dy_)
+{
+}
+
+CollPrimitive *CollTri::clone(CollisionObject *o) const
+{
+  return new CollTri(base,dx,dy,o);
+}
+
+float CollTri::width() const
+{
+  return fabs(dx);
+}
+float CollTri::height() const
+{
+  return fabs(dy);
+}
+
+float CollTri::x_pos() const
+{
+  return std::min(base.x,base.x+dx)+object->get_pos().x;
+}
+float CollTri::y_pos() const
+{
+  return std::min(base.y,base.y+dy)+object->get_pos().y;
+}
+
+CL_Vector2 CollTri::normal() const
+{
+  CL_Vector2 v(dy,dx);
+  v/=v.length();
+  return v;
+}
+
+CL_Vector2 CollTri::get_vector0() const
+{
+  return CL_Vector2(x_pos(),y_pos());
+}
+CL_Vector2 CollTri::get_vector1() const
+{
+  return CL_Vector2(x_pos()+dx,y_pos());
+}
+CL_Vector2 CollTri::get_vector2() const
+{
+  return CL_Vector2(x_pos(),y_pos()+dy);
+}
+
+void CollTri::drawCollision() const
+{
+  CL_Vector2 act_pos=object->get_pos()+base;
+  CL_Gradient g(CL_Color(255, 255, 255),CL_Color(255, 255, 255),CL_Color(255, 255, 255),CL_Color(255, 255, 255));
+
+  CL_Display::fill_triangle(act_pos.x   , act_pos.y,
+			    act_pos.x+dx, act_pos.y,
+			    act_pos.x   , act_pos.y+dy,g);
+  
+  CL_Display::draw_triangle(act_pos.x   , act_pos.y,
+			    act_pos.x+dx, act_pos.y,
+			    act_pos.x   , act_pos.y+dy,
+			    CL_Color(155, 155, 155));        
+  
+  CL_Display::draw_line(act_pos.x + dx/4,
+			act_pos.y + dy/4,
+			act_pos.x + dx/4 + object->get_movement().x,
+			act_pos.y + dy/4 + object->get_movement().y,
+			CL_Color(255, 0, 255));
+}
+
+
+/***********************************************************************
+ * CollisionObject
+ ***********************************************************************/
+
+CollisionObject::CollisionObject()
+{
+  parent=0;
+}
+
+CollisionObject::~CollisionObject()
+{
+}
+
+void CollisionObject::insertCollPrimitive(CollPrimitive *primitive)
+{
+  colliders.push_back(primitive);
+}
+
+
+
+void CollisionObject::drawCollision()
+{
+  std::list<CollPrimitive*>::iterator j=colliders.begin();
+
+  for(;j!=colliders.end();j++)
+    {
+      (*j)->drawCollision();
+    }
+}
+
+void CollisionObject::move(float delta)
+{
+  //  position += get_movement() * delta;
+  position += movement * delta;
+  movement -= movement * coll_engine->get_friction() * delta;
+  
+  movement += coll_engine->get_graphity() * delta;
+  
+
+  if (fabsf(movement.x) < coll_engine->get_min_velocity())
+    movement.x = 0.0f;
+
+  if (fabsf(movement.y) < coll_engine->get_min_velocity())
+    movement.y = 0.0f;
+
+}
+
+void 
+CollisionObject::set_movement(const CL_Vector2 &m)
+{
+  movement=m;
+}
+
+
+
+/***********************************************************************
+ * helpers
+ ***********************************************************************/
+
+
+
+// LEFT means b1 is left of b2
+CollisionData collideBB(CollRect &b1,CollRect &b2,float delta)
+{
+  SweepResult result0 = simple_sweep_1d(b1.x_pos(), b1.width(), b1.x_velocity(),
+					b2.x_pos(), b2.width(), b2.x_velocity());
+  SweepResult result1 = simple_sweep_1d(b1.y_pos(), b1.height(), b1.y_velocity(),
+					b2.y_pos(), b2.height(), b2.y_velocity());
+
+  CollisionData result;
+  result.delta=delta;
+
+  if(result0.collision(delta) && result1.collision(delta))
+    {
+      if(result0.always() && result1.always())
+	result.state=CollisionData::STUCK;
+      else
+	{
+	  if(result0.begin(delta)<result1.begin(delta))
+	    {
+	      // x direction prior
+	      if(b1.x_pos()<b2.x_pos())
+		{
+		  result.state=CollisionData::COLLISION;
+		  result.direction=CL_Vector2(-1,0);
+		}
+	      else
+		{
+		  result.state=CollisionData::COLLISION;
+		  result.direction=CL_Vector2(1,0);
+		}
+	      result.col_time=result0.t0;
+	    }
+	  else
+	    {
+	      // x direction prior
+	      if(b1.y_pos()<b2.y_pos())
+		{
+		  result.state=CollisionData::COLLISION;
+		  result.direction=CL_Vector2(0,-1);
+		}
+	      else
+		{
+		  result.state=CollisionData::COLLISION;
+		  result.direction=CL_Vector2(0,1);
+		}
+	      result.col_time=result1.t0;
+	    }
+	}
+    }
+  return result;
+}
+
+CollisionData collideBT(CollRect &b1,CollTri &b2,float delta)
+{
+  // get normal of the triangle's diagonal
+  CL_Vector2 normal=b2.normal();
+
+  // get triangle's coordinates along this normal
+  float b2a=b2.get_vector0().dot(normal);
+  float b2b=b2.get_vector1().dot(normal);
+  
+  float b2max=std::max(b2a,b2b);
+  float b2min=std::min(b2a,b2b);
+
+  // get box's coordinates
+
+  float b1a=b1.get_vector0().dot(normal);
+  float b1b=b1.get_vector1().dot(normal);
+  float b1c=b1.get_vector2().dot(normal);
+  float b1d=b1.get_vector3().dot(normal);
+
+  float b1max=std::max(std::max(b1a,b1b),std::max(b1c,b1d));
+  float b1min=std::min(std::min(b1a,b1b),std::min(b1c,b1d));
+
+  // get velocity
+
+  float b1vel=b1.get_velocity().dot(normal);
+  float b2vel=b2.get_velocity().dot(normal);
+
+  SweepResult result0 = simple_sweep_1d(b1.x_pos(), b1.width(), b1.x_velocity(),
+					b2.x_pos(), b2.width(), b2.x_velocity());
+  SweepResult result1 = simple_sweep_1d(b1.y_pos(), b1.height(), b1.y_velocity(),
+					b2.y_pos(), b2.height(), b2.y_velocity());
+
+  SweepResult result2 = simple_sweep_1d(b1min, b1max-b1min, b1vel,
+					b2min, b2max-b2min, b2vel);
+
+  CollisionData result;
+
+  if(result0.collision(delta) && result1.collision(delta) && result2.collision(delta))
+    {
+      if(result0.always() && result1.always() && result2.always())
+	result.state=CollisionData::STUCK;
+      else
+	{
+	  if(result0.begin(delta)<result1.begin(delta))// && result0.begin(delta)<result2.begin(delta))
+	    {
+	      // x direction prior
+	      if(b1.x_pos()<b2.x_pos())
+		{
+		  result.state=CollisionData::COLLISION;
+		  result.direction=CL_Vector2(-1,0);
+		}
+	      else
+		{
+		  result.state=CollisionData::COLLISION;
+		  result.direction=CL_Vector2(1,0);
+		}
+	      result.col_time=result0.t0;
+	    }
+	  else
+	    {
+	      // y direction prior
+	      if(b1.y_pos()<b2.y_pos())
+		{
+		  result.state=CollisionData::COLLISION;
+		  result.direction=CL_Vector2(0,1);
+		}
+	      
+	      else
+		{
+		  result.state=CollisionData::COLLISION;
+		  result.direction=CL_Vector2(0,-1);
+		}
+	      result.col_time=result1.t0;
+	    }
+	}
+    }
+  //  if(result0.t0 < 0 || result1.t0 < 0)
+  //    result.before=true;
+  return result;
+}
+
+CollisionData collide(CollPrimitive *o1,CollPrimitive *o2,float delta)
+{
+  CollRect *b1=dynamic_cast<CollRect*>(o1);
+  CollRect *b2=dynamic_cast<CollRect*>(o2);
+  if(b1 && b2)
+    {
+      return collideBB(*b1,*b2,delta);
+    }
+  else if(b1)
+    return collideBT(*b1,*dynamic_cast<CollTri*>(o2),delta);
+  else if(b2)
+    return collideBT(*b2,*dynamic_cast<CollTri*>(o1),delta);
+  //  else
+  //    return collide(dynamic_cast<CollTri*>(o1),dynamic_cast<CollTri*>(o2));
+  
+  return CollisionData();
+}
+
+CollisionData collide(CollisionObject &a,CollisionObject &b,float delta)
+{
+  CollisionData r;
+
+  //  if(!(a.movable or b.movable))
+  //    return r;
+
+  bool first=true;
+  std::list<CollPrimitive*>::iterator i=a.colliders.begin();
+  for(;i!=a.colliders.end();i++)
+    {
+      std::list<CollPrimitive*>::iterator j=b.colliders.begin();
+      for(;j!=b.colliders.end();j++)
+	{
+	  if(first)
+	    {
+	      r=collide(*i,*j,delta);
+	      first=false;
+	    }
+	  else
+	    r.merge(collide(*i,*j,delta));
+	}
+    }
+  return r;
+}
+
+
+
+
+
+
+
+
+/***********************************************************************
+ * Collision
+ ***********************************************************************/
+
+CollisionEngine::CollisionEngine()
+{
+  friction       = 0.01f;
+  
+  x_acceleration = 0.0f;
+  y_acceleration = 5.0f;
+
+  unstuck_velocity = 50.0f;
+  minimum_velocity = .1f;
+}
+
+CollisionEngine::~CollisionEngine()
+{
+}
+
+void
+CollisionEngine::draw()
+{
+  for(Objects::iterator i = objects.begin(); i != objects.end(); ++i)
+    {
+      (*i)->drawCollision();
+    }
+}
+
+void
+CollisionEngine::collision(CollisionObject& a, CollisionObject& b, const CollisionData &result, float delta)
+{
+  CollisionData inv=result.invert();
+  a.prepare_collision(result,b);
+  b.prepare_collision(inv,a);
+
+  a.collision(result,b);
+  b.collision(inv,a);
+}
+
+
+
+void
+CollisionEngine::unstuck(CollisionObject& a, CollisionObject& b, float delta)
+{
+  // The distance A needs to unstuck from B in the given direction
+  float left   = fabsf(a.get_pos().x + a.bbox.get_width() - b.get_pos().x);
+  float right  = fabsf(b.get_pos().x + b.bbox.get_width() - a.get_pos().x);
+  float top    = fabsf(a.get_pos().y + a.bbox.get_height() - b.get_pos().y);
+  float bottom = fabsf(b.get_pos().y + b.bbox.get_height() - a.get_pos().y);
+
+  float grace =  0.05f;
+
+  float add= unstuck_velocity * delta;
+
+  add= 0.5;
+  add=50;
+  //  grace=0;
+
+  CL_Vector2 dir;
+
+  if (left < right && left < top && left < bottom)
+    {
+      dir = CL_Vector2(std::min(left/2 + grace,add),0);
+    }
+  else if (right < left && right < top && right < bottom)
+    {
+      dir = CL_Vector2(-std::min(right/2 + grace,add),0);
+    }
+  else if (top < left && top < right && top < bottom)
+    {
+      dir = CL_Vector2( 0, std::min(top/2 + grace,add));
+    }
+  else // (bottom < left && bottom < right && bottom < top)
+    {
+      dir = CL_Vector2( 0, -std::min(bottom/2 + grace,add));
+    }
+
+  if (a.unstuck_movable())
+    a.position -= dir;
+      
+  if (b.unstuck_movable())
+    b.position += dir;
+}
+
+void
+CollisionEngine::update(float delta)
+{
+  for(Objects::iterator i = objects.begin(); i != objects.end(); ++i)
+    {
+      bool moved=false;
+      Objects::iterator j = i/*objects.begin()*/;
+      j++;
+
+      for(; j != objects.end(); ++j)
+        {
+          if (i != j)
+            {
+	      CollisionData r=collide(**i,**j,delta);
+	      if(r.state!=CollisionData::NONE)//collision())
+		{
+		  collision(**i,**j,r,delta);
+		  //		  i->collision=true;
+		  //		  j->collision=true;
+
+		  if(r.col_time>0)
+		    moved=true;
+		}
+            }
+        }
+      
+      //      if (i->movable && !moved)
+      //      if ( !moved)
+        update(**i, delta);
+    }
+  //  return;
+  // check penetration and resolve
+  bool penetration=true;
+  int maxtries=15;
+  while(penetration)
+    {
+      penetration=false;
+      // FIXME: support this by some spatial container
+      for(Objects::iterator i = objects.begin(); i != objects.end(); ++i)
+	{
+	  if(!(*i)->unstuck())
+	    continue;
+	  Objects::iterator j = i/*objects.begin()*/;
+	  j++;
+	  
+	  for(; j != objects.end(); ++j)
+	    {
+	      if(!(*j)->unstuck())
+		continue;
+	      
+	      if (i != j && ((*i)->unstuck_movable() || ((*j)->unstuck_movable())))
+		{
+		  CollisionData r=collide(**i,**j,delta/1000.0f);
+		  if(r.state!=CollisionData::NONE)
+		    {
+		      //		      collision(**i,**j,r,delta);///30.0f);
+		      penetration=true;
+		      unstuck(**i,**j,delta/3.0f);
+		    }
+		}
+	    }
+	}
+      maxtries--;
+      if(maxtries==0)
+	break;
+    }
+  //  cout<<(15-maxtries)<<endl;
+
+}
+
+void
+CollisionEngine::update(CollisionObject& obj, float delta)
+{
+  obj.move(delta);
+}
+
+CollisionObject *
+CollisionEngine::add_object(CollisionObject *obj)
+{
+  objects.push_back(obj);
+  obj->coll_engine=this;
+
+  //  objects.back().id = objects.size();
+
+  return objects.back();
+}
+
+
+float CollisionEngine::get_min_velocity() const
+{
+  return minimum_velocity;
+}
+float CollisionEngine::get_friction() const
+{
+  return friction;
+}
+CL_Vector2 CollisionEngine::get_graphity() const
+{
+  return CL_Vector2(x_acceleration, y_acceleration);
+}
+
+
+/***********************************************************************
+ * PhysicalObject
+ ***********************************************************************/
+
+PhysicalObject::PhysicalObject(int x_, int y_, int w_, int h_)
+{
+  mass = 1.0f;
+  
+  friction=0.6;
+  adhesion=50.0;
+  
+  movement = CL_Vector2(0,0);
+  bbox=CL_Rectf(0,0,w_,h_);
+  position= CL_Vector2(x_,y_);
+
+  movable=true;
+
+  
+  insertCollPrimitive(new CollRect(CL_Rectf(0,0,w_,h_),this));
+
+  //  colliders.push_back(new CollRect(0,h_/2,w_,h_/2,this));
+  //  colliders.push_back(new CollTri(0,h_/2,w_,-h_/2,this));
+  
+
+  //colliders.push_back(new CollRect(0,h_/2,w_/2,h_/2,this));
+  //colliders.push_back(new CollTri(w_/2,0,w_/2,-h_/2,this));
+  //colliders.push_back(new CollTri(w_/3,-h_/2,2*w_/3,-h_/2,this));
+
+}
+
+void PhysicalObject::prepare_collision(const CollisionData &data,CollisionObject &other)
+{
+  if(!movable)
+    return;
+  PhysicalObject *po=dynamic_cast<PhysicalObject*>(&other);
+  if(!po)
+    return;
+
+  coll_impulse = get_impulse () + po->get_impulse ();
+  coll_impulse*=0.5f;
+}
+
+void 
+PhysicalObject::collision(const CollisionData &data,CollisionObject &other)
+{
+  PhysicalObject *po=dynamic_cast<PhysicalObject*>(&other);
+
+  if(!movable)
+    return;
+
+  if(!po)
+    {
+      if(data.direction.x!=0)
+	movement.x=0;
+      else
+	movement.y=0;
+      return;
+    }
+  if(po->movable)
+    {
+      // soft collision with impulses
+      
+      float c_fric=friction*data.delta; // current friction influence
+      
+      if (data.direction.x==0)
+	{
+	  set_impulse_y (coll_impulse.y);
+	  
+	  // apply friction in x direction
+	  set_impulse_x (coll_impulse.x * c_fric + get_impulse().x * (1.0f - c_fric));
+	}
+      else
+	{
+	  set_impulse_x (coll_impulse.x);
+	  
+	  // apply friction in y direction
+	  set_impulse_y (coll_impulse.y * c_fric + get_impulse().y * (1.0f - c_fric));
+	}
+      
+    }
+  else
+    {
+      // hard collision with wall
+      if(data.direction.x==0)
+	{
+	  if(data.direction.y==-1)
+	    movement.y*=-0.5;
+	  else
+	    movement.y*=0.0f;
+	  movement.x*=(1.0f-friction*data.delta);
+	  if(fabs(movement.x)<data.delta*adhesion)
+	    movement.x=0.0f;
+	}
+      if(data.direction.y==0)
+	{
+	  movement.x*=-0.7;
+	  movement.y*=(1.0f-friction*data.delta);
+	  if (fabs (movement.y) < data.delta * adhesion)
+	    movement.y=0.0f;
+	}
+    }
+}
+
+CL_Vector2 
+PhysicalObject::get_impulse() const
+{
+  return movement * mass;
+}
+
+void 
+PhysicalObject::set_impulse_x(float i)
+{
+  movement.x = i / mass;
+}
+
+void 
+PhysicalObject::set_impulse_y(float i)
+{
+  movement.y = i / mass;
+}
+
+void 
+PhysicalObject::set_movable(bool m)
+{
+  movable=m;
+}
+
+bool 
+PhysicalObject::unstuck() const
+{
+  return true;
+}
+
+bool 
+PhysicalObject::unstuck_movable() const
+{
+  return movable;
+}
+
+void 
+PhysicalObject::move(float delta)
+{
+  if(movable)
+    CollisionObject::move(delta);
+}
+
+/***********************************************************************
+ * Player
+ ***********************************************************************/
+
+Player::Player(int x_,int y_,int w_, int h_):
+  PhysicalObject(x_,y_,w_,h_)
+{
+  mass=0.2;
+  onGround=false;
+}
+
+void Player::collision(const CollisionData& data, CollisionObject& other)
+{
+  if(data.direction.y!=0)
+    movement.y=0;
+
+  Elevator *e=dynamic_cast<Elevator*>(&other);
+  PhysicalObject *o=dynamic_cast<PhysicalObject*>(&other);
+  if(e)
+    {
+      if(data.direction.y<0)
+	{
+	  if(!parent)
+	    {
+	      // attach
+	      CL_Vector2 v=get_pos()-e->get_pos();
+	      parent=e;
+	      position=v;
+	      lastTouch=0;
+	    }
+	}
+    }
+  else if(o)
+    {
+      if(!o->unstuck_movable())
+	{
+	  if(data.direction.y<0)
+	    {
+	      onGround=true;
+	      lastTouch=0;
+	    }
+	}
+    }
+}
+
+bool 
+Player::on_ground() const
+{
+  return onGround || parent;
+}
+
+
+void Player::set_movement(const CL_Vector2 &v)
+{
+  movement=v;
+}
+
+void 
+Player::move(float delta)
+{
+  lastTouch++;
+  if(lastTouch>5)
+    detachElevator();
+  PhysicalObject::move(delta);
+}
+
+void 
+Player::detachElevator()
+{
+  CL_Vector2 p=get_pos();
+  parent=0;
+  position=p;
+  onGround=false;
+}
+
+/***********************************************************************
+ * Elevator
+ ***********************************************************************/
+Elevator::Elevator()
+{
+  position=0;
+  speed=0.05;
+
+  insertCollPrimitive(new CollRect(CL_Rectf(0,0,60,8),this));
+  bbox=CL_Rectf(0,0,60,8);
+  //  mass=1000;
+  //  movement=CL_Vector2(0,0);
+}
+void 
+Elevator::move(float delta)
+{
+  position+=delta*speed;
+  if(position>points.size())
+    {
+      position-=points.size();
+    }
+
+  int p=(int)position;
+  int p2=p+1;
+  if(p2>=points.size())
+    p2=0;
+  CL_Vector2 p0=points[p];
+  CL_Vector2 p1=points[p2];
+
+  float a=position-p;
+  
+  CollisionObject::position=p0*(1.0f-a)+p1*a;
+}
+
+bool 
+Elevator::unstuck() const
+{
+  return true;
+}
+bool 
+Elevator::unstuck_movable() const
+{
+  return false;
+}
+
+void 
+Elevator::collision(const CollisionData& data, CollisionObject& other)
+{
+}
+
+void 
+Elevator::insertPoint(const CL_Vector2 &p)
+{
+  points.push_back(p);
+}


Property changes on: trunk/collisiontest/collision.cxx
___________________________________________________________________
Name: svn:keywords
   + Id
Name: svn:eol-style
   + native

Added: trunk/collisiontest/collision.hxx
===================================================================
--- trunk/collisiontest/collision.hxx	2009-02-10 19:00:41 UTC (rev 2448)
+++ trunk/collisiontest/collision.hxx	2009-02-10 19:15:23 UTC (rev 2449)
@@ -0,0 +1,328 @@
+#ifndef HEADER_COLLISION_HXX
+#define HEADER_COLLISION_HXX
+
+#include <iostream>
+#include <list>
+#include <vector>
+
+#include <ClanLib/Core/Math/vector2.h>
+#include <ClanLib/Core/Math/rect.h>
+
+using namespace std;
+
+class CollisionObject;
+class CollRect;
+
+struct CollPrimitive
+{
+protected:
+  CollisionObject *object;
+public:
+  CollPrimitive(CollisionObject *object_);
+  virtual ~CollPrimitive();
+  virtual CollPrimitive *clone(CollisionObject *o) const=0;
+
+  virtual float x_pos() const=0;
+  virtual float y_pos() const=0;
+  virtual float width() const=0;
+  virtual float height() const=0;
+
+  float x_velocity() const;
+  float y_velocity() const;
+  CL_Vector2 get_velocity() const;
+
+  virtual void drawCollision() const=0;
+
+  friend std::ostream& operator<<(std::ostream& out, const CollRect &b);
+
+};
+
+
+class CollRect:public CollPrimitive
+{
+  CL_Rectf rect;
+
+public:
+  CollRect(const CL_Rectf &r_,CollisionObject *object_);
+
+  virtual CollPrimitive *clone(CollisionObject *o) const;
+  float x_pos() const;
+  float y_pos() const;
+  float width() const;
+  float height() const;
+
+  CL_Vector2 get_vector0() const;
+  CL_Vector2 get_vector1() const;
+  CL_Vector2 get_vector2() const;
+  CL_Vector2 get_vector3() const;
+
+  virtual void drawCollision() const;
+};
+
+inline std::ostream& operator<<(std::ostream& out, const CollRect &b);
+
+class CollTri:public CollPrimitive
+{
+  CL_Vector2 base;
+
+  float dx;
+  float dy;
+
+public:
+  CollTri(CollisionObject *object_);
+  CollTri(const CL_Vector2 &base_, float w_, float h_,CollisionObject *object_);
+  virtual CollPrimitive *clone(CollisionObject *o) const;
+
+  float x_pos() const;
+  float y_pos() const;
+  float width() const;
+  float height() const;
+
+  // normal - normalized!
+  CL_Vector2 normal() const;
+
+  CL_Vector2 get_vector0() const;
+  CL_Vector2 get_vector1() const;
+  CL_Vector2 get_vector2() const;
+
+  virtual void drawCollision() const;
+};
+
+struct CollisionData
+{
+  enum State {NONE,STUCK,COLLISION};
+  // points into direction from where the other object came
+  CL_Vector2 direction;
+  
+  State state;
+
+  // size of time frame
+  float delta; 
+
+  // time of collision
+  float col_time;
+
+  CollisionData()
+  {
+    state=NONE;
+    col_time=0;
+  }
+
+  CollisionData merge(const CollisionData &r);
+
+  CollisionData invert() const
+  {
+    CollisionData r(*this);
+    r.direction*=-1;
+
+    return r;
+  }
+
+  
+};
+inline std::ostream &operator<<(std::ostream &o,const CollisionData &r)
+{
+  o<<"("<<r.direction.x<<","<<r.direction.y<<","<<r.col_time<<")";
+  return o;
+}
+
+class CollisionEngine;
+
+class CollisionObject
+{
+
+public:
+  /*  CollisionObject(const CollisionObject &o);
+  CollisionObject(float x_,float y_,float w_,float h_);
+
+
+  CL_Vector2 get_impulse() const;
+  void set_impulse_x(float i);
+  void set_impulse_y(float i);
+
+  void hard_collision(const CollisionData &result, float delta);
+  void soft_collision(const CollisionData &result, CL_Vector2 impulse_, float delta_);
+
+  friend CollisionData collide(CollisionObject &a,CollisionObject &b,float delta);
+  
+  void drawCollision();
+*/
+
+  CollisionObject();
+  virtual ~CollisionObject();
+
+  CL_Vector2 get_pos() const
+  {
+    if(parent != 0)
+      return parent->get_pos() + position;
+    
+    return position;
+  }
+
+  CL_Vector2 get_movement() const
+  {
+    if(parent != 0)
+      return parent->get_movement() + movement;
+
+    return movement;
+  }
+
+  void set_movement(const CL_Vector2 &m);
+
+  //  void attach(CollisionObject &o);
+  //  void detach(CollisionObject &o);
+
+
+  // this function is for preparing impulse collisions
+  // you have to calculate the resulting impulse for both object before changing,
+  // so this is called for both objects first and then collision() for both.
+  //
+  // this isn't really fast, because everything's done twice, maybe someone has a better idea?
+  virtual void prepare_collision(const CollisionData &data, CollisionObject &other)
+  {
+  }
+  virtual void collision(const CollisionData& data, CollisionObject& other) = 0; 
+
+  virtual void move(float delta);
+
+  void insertCollPrimitive(CollPrimitive *primitive);
+
+  // debugging helpers
+  void drawCollision();
+
+  // this functions support unstucking, which needs to be done, when more than 2 object stack over one another
+  // should this object be unstuck ??
+  virtual bool unstuck() const=0;
+  // is this object movable ?
+  virtual bool unstuck_movable() const=0;
+  
+  // is this object movable
+
+protected:
+  /// only rectangular objects for now
+  CL_Rectf bbox;
+ 
+  /// position of the object
+  CL_Vector2 position;
+  /// movement till next frame
+  CL_Vector2 movement;
+
+  CollisionObject* parent;
+  std::vector<CollisionObject*> children;
+
+
+private:
+  std::list<CollPrimitive*> colliders;
+  CollisionEngine *coll_engine;
+
+  friend class CollisionEngine;
+  friend CollisionData collide(CollisionObject &a,CollisionObject &b,float delta);
+};
+
+
+
+class CollisionEngine
+{
+  typedef std::list<CollisionObject*> Objects;
+
+public:
+
+  CollisionEngine();
+  ~CollisionEngine();
+
+  void draw();
+  void update(float delta);
+  void update(CollisionObject& obj, float delta);
+  void collision(CollisionObject& a, CollisionObject& b, const CollisionData &result, float delta);
+
+  CollisionObject* add_object(CollisionObject *obj);
+
+  float get_min_velocity() const;
+  float get_friction() const;
+  CL_Vector2 get_graphity() const;
+
+private:
+  Objects objects;
+
+  float friction;
+  float unstuck_velocity;
+
+  float x_acceleration;
+  float y_acceleration;
+
+  float minimum_velocity;
+
+  void unstuck(CollisionObject& a, CollisionObject& b, float delta);
+
+};
+
+class PhysicalObject:public CollisionObject
+{
+public:
+  PhysicalObject(int x_,int y_,int w_, int h_);
+
+
+  virtual void prepare_collision(const CollisionData &data, CollisionObject &other);
+
+  virtual void collision(const CollisionData& data, CollisionObject& other); 
+
+  void set_movable(bool m);
+
+  virtual bool unstuck() const;
+  virtual bool unstuck_movable() const;
+
+  virtual void move(float delta);
+
+protected:
+
+  CL_Vector2 get_impulse() const;
+  void set_impulse_x(float i);
+  void set_impulse_y(float i);
+
+  CL_Vector2 coll_impulse;
+
+  float mass;
+
+  bool movable;
+
+  float friction;
+  float adhesion;
+};
+
+class Player:public PhysicalObject
+{
+  int lastTouch;
+  bool onGround;
+public:
+  Player(int x_,int y_,int w_, int h_);
+
+  virtual void collision(const CollisionData& data, CollisionObject& other); 
+
+  void set_movement(const CL_Vector2 &v);
+  virtual void move(float delta);
+
+  bool on_ground() const;
+
+  void detachElevator();
+};
+
+class Elevator:public CollisionObject
+{
+  std::vector<CL_Vector2> points;
+  float position;
+  float speed;
+public:
+  Elevator();
+  void move(float delta);
+
+  virtual void collision(const CollisionData& data, CollisionObject& other);
+
+  virtual bool unstuck() const;
+  virtual bool unstuck_movable() const;
+
+
+  void insertPoint(const CL_Vector2 &p);
+};
+
+
+#endif


Property changes on: trunk/collisiontest/collision.hxx
___________________________________________________________________
Name: svn:keywords
   + Id
Name: svn:eol-style
   + native

Added: trunk/collisiontest/colltest.cxx
===================================================================
--- trunk/collisiontest/colltest.cxx	2009-02-10 19:00:41 UTC (rev 2448)
+++ trunk/collisiontest/colltest.cxx	2009-02-10 19:15:23 UTC (rev 2449)
@@ -0,0 +1,63 @@
+#include "colltest.hxx"
+#include "collision.hxx"
+#include <assert.h>
+
+SweepResult simple_sweep_1d(float a, float aw, float av,
+			    float b, float bw, float bv)
+{
+  SweepResult res;
+  // Normalize the calculation so that only A moves and B stands still
+  float v = av - bv;
+
+  if (v > 0)
+    {
+      res.t0 = (b - (a + aw)) / v;
+      res.t1 = (b + bw - a) / v;
+      res.state = SweepResult::COL_AT;
+
+      assert(res.t0 <= res.t1);
+    }
+  else if (v < 0)
+    {
+      res.t0 = (b + bw - a) / v;
+      res.t1 = (b - (a + aw)) / v;
+      res.state = SweepResult::COL_AT;
+
+      assert(res.t0 <= res.t1);
+    }
+  else // (v == 0)
+    {
+      if ((a + aw) < b || (a > b + bw))
+        res.state = SweepResult::COL_NEVER;
+      else
+        res.state = SweepResult::COL_ALWAYS;
+    }
+  return res;
+}
+
+
+
+bool overlap(float a,float aw,float b,float bw)
+{
+  float a2=a+aw;
+  float b2=b+bw;
+  return ((a>=b && a<b2) || (a2>=b && a2<b2) || (b>=a && b<a2) || (b2>=a && b2<=a2));
+}
+
+void collideRectRect(InstantCollisionResult &result,const CollRect &a,const CollRect &b)
+{
+  result.collision=overlap(a.x_pos(),a.width(),b.x_pos(),b.width()) &&  overlap(a.x_pos(),a.width(),b.x_pos(),b.width());
+  if(result.collision)
+    {
+      // FIXME: calculate unstuck direction and depth
+
+      
+    }
+}
+
+void collideRectTri(InstantCollisionResult &result,const CollRect &a,const CollTri &b)
+{
+}
+void collideTriTri(InstantCollisionResult &result,const CollTri &a,const CollTri &b)
+{
+}


Property changes on: trunk/collisiontest/colltest.cxx
___________________________________________________________________
Name: svn:keywords
   + Id
Name: svn:eol-style
   + native

Added: trunk/collisiontest/colltest.hxx
===================================================================
--- trunk/collisiontest/colltest.hxx	2009-02-10 19:00:41 UTC (rev 2448)
+++ trunk/collisiontest/colltest.hxx	2009-02-10 19:15:23 UTC (rev 2449)
@@ -0,0 +1,73 @@
+#ifndef HEADER_COLLTEST_HXX
+#define HEADER_COLLTEST_HXX
+
+#define MAXF 100000.0f
+
+#include <iostream>
+#include <ClanLib/Core/Math/vector2.h>
+
+struct SweepResult
+{
+  enum CollisionState { COL_AT, COL_ALWAYS, COL_NEVER };
+  CollisionState state;
+  float t0,t1;
+
+  SweepResult()
+  {
+    state=COL_NEVER;
+  }
+
+  bool collision(float delta) const
+  {
+    return state==COL_ALWAYS || (state==COL_AT && t1>0 && t0<delta);
+  }
+
+  float begin(float delta) const
+  {
+    if(state==COL_ALWAYS || state==COL_NEVER)
+      return MAXF;
+
+    if(t0>=0.0f && t0<delta)
+      return t0;
+    else
+      return MAXF;
+  }
+
+  bool always() const
+  {
+    return state==COL_ALWAYS;
+  }
+
+};
+
+inline std::ostream &operator<<(std::ostream &o,const SweepResult &r)
+{
+  o<<"("<<r.state<<","<<r.t0<<","<<r.t1<<")";
+  return o;
+}
+
+
+SweepResult simple_sweep_1d(float a, float aw, float av,
+			    float b, float bw, float bv);
+
+class CollRect;
+class CollTri;
+
+struct InstantCollisionResult
+{
+  float depth;
+  CL_Vector2 direction;
+  bool collision;
+
+  InstantCollisionResult()
+  {
+    collision=false;
+  }
+};
+
+void collideRectRect(InstantCollisionResult &result,const CollRect &a,const CollRect &b);
+void collideRectTri(InstantCollisionResult &result,const CollRect &a,const CollTri &b);
+void collideTriTri(InstantCollisionResult &result,const CollTri &a,const CollTri &b);
+
+
+#endif


Property changes on: trunk/collisiontest/colltest.hxx
___________________________________________________________________
Name: svn:keywords
   + Id
Name: svn:eol-style
   + native

Added: trunk/collisiontest/main.cxx
===================================================================
--- trunk/collisiontest/main.cxx	2009-02-10 19:00:41 UTC (rev 2448)
+++ trunk/collisiontest/main.cxx	2009-02-10 19:15:23 UTC (rev 2449)
@@ -0,0 +1,129 @@
+//  $Id$
+//
+//  Pingus - A free Lemmings clone
+//  Copyright (C) 2002 Ingo Ruhnke <grumbel at gmx.de>
+//
+//  This program is free software; you can redistribute it and/or
+//  modify it under the terms of the GNU General Public License
+//  as published by the Free Software Foundation; either version 2
+//  of the License, or (at your option) any later version.
+//
+//  This program is distributed in the hope that it will be useful,
+//  but WITHOUT ANY WARRANTY; without even the implied warranty of
+//  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+//  GNU General Public License for more details.
+//
+//  You should have received a copy of the GNU General Public License
+//  along with this program; if not, write to the Free Software
+//  Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA.
+
+#include <ClanLib/display.h>
+#include <ClanLib/core.h>
+#include <ClanLib/gl.h>
+#include "collision.hxx"
+
+int main()
+{
+  CL_SetupCore    core_setup;
+  CL_SetupGL      gl_setup;
+  CL_SetupDisplay display_setup;
+
+  // Init Display
+  CL_DisplayWindow window("Physic Test", 800, 600);
+  
+  // Init Physic Engine
+  CollisionEngine physics;
+
+  bool create_object = false;
+  int x_pos;
+  int y_pos;
+
+  PhysicalObject *o1,*o2,*o3,*o4,*o5;
+  // ground
+  physics.add_object(o1=new PhysicalObject(32, 600-32, 800-32, 32));
+  physics.add_object(o2=new PhysicalObject(0, 0, 32, 600));
+  physics.add_object(o3=new PhysicalObject(800-32, 0, 32, 600));
+  physics.add_object(o4=new PhysicalObject(32, 0, 800-32, 32));
+  physics.add_object(o5=new PhysicalObject(400, 300, 100, 100));
+  o1->set_movable(false);
+  o2->set_movable(false);
+  o3->set_movable(false);
+  o4->set_movable(false);
+  o5->set_movable(false);
+
+  Elevator *e=new Elevator;
+  e->insertPoint(CL_Vector2(200,500));
+  e->insertPoint(CL_Vector2(200,400));
+  physics.add_object(e);
+
+  Elevator *e2=new Elevator;
+  e2->insertPoint(CL_Vector2(500,530));
+  e2->insertPoint(CL_Vector2(700,530));
+  physics.add_object(e2);
+
+  Player *player=new Player(100,100,32,64);
+  physics.add_object(player);
+  
+
+  bool jump=false;
+
+  // Run Main Loop
+  while(!CL_Keyboard::get_keycode(CL_KEY_ESCAPE))
+    {
+      CL_Display::clear();
+
+      physics.update(0.033f);
+      //      physics.update(0.033f);
+      //for(int i=0;i<1000;i++)
+	physics.draw();
+
+      CL_Display::flip();
+
+      CL_System::keep_alive();
+
+      if (CL_Mouse::get_keycode(CL_MOUSE_LEFT) && !create_object)
+        {
+          create_object = true;
+          x_pos = CL_Mouse::get_x();
+          y_pos = CL_Mouse::get_y();
+        }
+      else if (create_object && !CL_Mouse::get_keycode(CL_MOUSE_LEFT))
+        {
+          create_object = false;
+
+          int n_x_pos = CL_Mouse::get_x();
+          int n_y_pos = CL_Mouse::get_y();
+
+          CollisionObject& obj = *physics.add_object(new PhysicalObject(x_pos, y_pos, 16, 32));
+          obj.set_movement (CL_Vector2 ( x_pos - n_x_pos, y_pos - n_y_pos));
+        }
+
+      if(CL_Keyboard::get_keycode(CL_KEY_RIGHT))
+	{
+	  player->set_movement(CL_Vector2(15,player->get_movement().y));
+	}
+      else if(CL_Keyboard::get_keycode(CL_KEY_LEFT))
+	{
+	  player->set_movement(CL_Vector2(-15,player->get_movement().y));
+	}
+      else
+	player->set_movement(CL_Vector2(0,player->get_movement().y));
+      if(CL_Keyboard::get_keycode(CL_KEY_UP))
+	{
+	  if(player->on_ground() && !jump)
+	    {
+	      player->set_movement(CL_Vector2(player->get_movement().x,-40));
+	      player->detachElevator();
+	      jump=true;
+	    }
+	}
+      else
+	jump=false;
+    }
+
+  // Deinit Collision Engine
+
+  // Deinit Display
+}
+
+/* EOF */


Property changes on: trunk/collisiontest/main.cxx
___________________________________________________________________
Name: svn:keywords
   + Id
Name: svn:eol-style
   + native



From grumbel at mail.berlios.de  Tue Feb 10 20:16:08 2009
From: grumbel at mail.berlios.de (grumbel at BerliOS)
Date: Tue, 10 Feb 2009 20:16:08 +0100
Subject: [Windstille-commit] r2450 - trunk/collisiontest
Message-ID: <200902101916.n1AJG87x027770@sheep.berlios.de>

Author: grumbel
Date: 2009-02-10 20:16:08 +0100 (Tue, 10 Feb 2009)
New Revision: 2450

Modified:
   trunk/collisiontest/SConstruct
Log:
Updated build files to ClanLib 0.8

Modified: trunk/collisiontest/SConstruct
===================================================================
--- trunk/collisiontest/SConstruct	2009-02-10 19:15:23 UTC (rev 2449)
+++ trunk/collisiontest/SConstruct	2009-02-10 19:16:08 UTC (rev 2450)
@@ -9,7 +9,7 @@
                   options=opts)
 Help(opts.GenerateHelpText(env))
 
-env.ParseConfig("pkg-config --cflags --libs clanCore-0.7 clanDisplay-0.7 clanGL-0.7 clanSignals-0.7")
+env.ParseConfig("pkg-config --cflags --libs clanCore-0.8 clanDisplay-0.8 clanGL-0.8 clanSignals-0.8")
 
 ptest = env.Program('main',
                     ['main.cxx', 'colltest.cxx','collision.cxx'])



From grumbel at mail.berlios.de  Tue Feb 10 20:21:26 2009
From: grumbel at mail.berlios.de (grumbel at BerliOS)
Date: Tue, 10 Feb 2009 20:21:26 +0100
Subject: [Windstille-commit] r2451 - trunk/collisiontest
Message-ID: <200902101921.n1AJLQm1028404@sheep.berlios.de>

Author: grumbel
Date: 2009-02-10 20:21:26 +0100 (Tue, 10 Feb 2009)
New Revision: 2451

Modified:
   trunk/collisiontest/
Log:
svn:ignore


Property changes on: trunk/collisiontest
___________________________________________________________________
Name: svn:ignore
   + main
.sconsign.dblite




From grumbel at mail.berlios.de  Tue Feb 10 21:07:40 2009
From: grumbel at mail.berlios.de (grumbel at BerliOS)
Date: Tue, 10 Feb 2009 21:07:40 +0100
Subject: [Windstille-commit] r2452 - trunk/windstille/src
Message-ID: <200902102007.n1AK7eAj032334@sheep.berlios.de>

Author: grumbel
Date: 2009-02-10 21:07:39 +0100 (Tue, 10 Feb 2009)
New Revision: 2452

Modified:
   trunk/windstille/src/baby_xml.cpp
Log:
Improved baby_xml test code a bit

Modified: trunk/windstille/src/baby_xml.cpp
===================================================================
--- trunk/windstille/src/baby_xml.cpp	2009-02-10 19:21:26 UTC (rev 2451)
+++ trunk/windstille/src/baby_xml.cpp	2009-02-10 20:07:39 UTC (rev 2452)
@@ -277,31 +277,39 @@
   nodes.push_back(node);
 }
 
-#ifdef TEST_BABY_XML
+#ifdef __TEST__
+// g++ -Wall -Werror -O2 -g -o baby_xml baby_xml.cpp -D__TEST__ 
 #include <iostream>
 
-int main()
+int main(int argc, char** argv)
 {
-  // BabyXML xml("<strong size='10'>Hello &lt; World&gt; <b>&quot;blabla&quot;</b> Blablub</strong>");
-  BabyXML xml("Hello ");
-
-  for(BabyXML::iterator i = xml.begin(); i != xml.end(); ++i)
+  if (argc != 2)
     {
-      if (i->type == BabyXML::Node::START_TAG)
-        std::cout << "STARTTAG: ";
-      else if (i->type == BabyXML::Node::END_TAG)
-        std::cout << "ENDTAG: ";
-      else if (i->type == BabyXML::Node::TEXT)
-        std::cout << "TEXT: ";
+      std::cout << "Usage: " << argv[0] << " STRING" << std::endl;
+    }
+  else
+    {
+      // BabyXML xml("<strong size='10'>Hello &lt; World&gt; <b>&quot;blabla&quot;</b> Blablub</strong>");
+      BabyXML xml(argv[1]);
 
-      std::cout << "'" << i->content << "'";
+      for(BabyXML::iterator i = xml.begin(); i != xml.end(); ++i)
+        {
+          if (i->type == BabyXML::Node::START_TAG)
+            std::cout << "STARTTAG: ";
+          else if (i->type == BabyXML::Node::END_TAG)
+            std::cout << "ENDTAG: ";
+          else if (i->type == BabyXML::Node::TEXT)
+            std::cout << "TEXT: ";
 
-      for(std::vector<BabyXML::Attribute>::iterator j = i->attributes.begin(); j != i->attributes.end(); ++j)
-        {
-          std::cout << " " << j->name << "=" << j->value;
+          std::cout << "'" << i->content << "'";
+
+          for(std::vector<BabyXML::Attribute>::iterator j = i->attributes.begin(); j != i->attributes.end(); ++j)
+            {
+              std::cout << " " << j->name << "=" << j->value;
+            }
+
+          std::cout << std::endl;
         }
-
-      std::cout << std::endl;
     }
 }
 #endif



From grumbel at mail.berlios.de  Tue Feb 10 21:29:06 2009
From: grumbel at mail.berlios.de (grumbel at BerliOS)
Date: Tue, 10 Feb 2009 21:29:06 +0100
Subject: [Windstille-commit] r2453 - trunk/windstille/src
Message-ID: <200902102029.n1AKT6Ar003042@sheep.berlios.de>

Author: grumbel
Date: 2009-02-10 21:29:06 +0100 (Tue, 10 Feb 2009)
New Revision: 2453

Modified:
   trunk/windstille/src/menu_manager.cpp
Log:
GPLv3 upgrade

Modified: trunk/windstille/src/menu_manager.cpp
===================================================================
--- trunk/windstille/src/menu_manager.cpp	2009-02-10 20:07:39 UTC (rev 2452)
+++ trunk/windstille/src/menu_manager.cpp	2009-02-10 20:29:06 UTC (rev 2453)
@@ -133,12 +133,13 @@
   TextView* text = new TextView(Rectf(), text_group);
   text_group->pack(text);
   text->set_font(Fonts::vera12);
-  text->set_text("Windstille 0.3.0 - Copyright (C) 2007 Ingo Ruhnke &lt;grumbel at gmx.de&gt;\n"
+  text->set_text("Windstille 0.4.0 - Copyright (C) 2009 Ingo Ruhnke &lt;grumbel at gmx.de&gt;\n"
                  "\n"
-                 "This program is free software; you can redistribute it and/or "
-                 "modify it under the terms of the GNU General Public License "
-                 "as published by the Free Software Foundation; either version 2 "
-                 "of the License, or (at your option) any later version.");
+                 "This program is free software: you can redistribute it and/or modify "
+                 "it under the terms of the GNU General Public License as published by "
+                 "the Free Software Foundation, either version 3 of the License, or "
+                 "(at your option) any later version.");
+
   manager->get_root()->add_child(text_group);
 
   GroupComponent* group = new GroupComponent(Rectf(Vector(400-25, 200), Sizef(250, 294)),



From grumbel at mail.berlios.de  Tue Feb 10 21:40:14 2009
From: grumbel at mail.berlios.de (grumbel at BerliOS)
Date: Tue, 10 Feb 2009 21:40:14 +0100
Subject: [Windstille-commit] r2454 - trunk/windstille/data
Message-ID: <200902102040.n1AKeEkR004491@sheep.berlios.de>

Author: grumbel
Date: 2009-02-10 21:40:14 +0100 (Tue, 10 Feb 2009)
New Revision: 2454

Removed:
   trunk/windstille/data/game.scm
   trunk/windstille/data/helper.scm
   trunk/windstille/data/windstille.scr
Log:
Obsolete files removed

Deleted: trunk/windstille/data/game.scm
===================================================================
--- trunk/windstille/data/game.scm	2009-02-10 20:29:06 UTC (rev 2453)
+++ trunk/windstille/data/game.scm	2009-02-10 20:40:14 UTC (rev 2454)
@@ -1,140 +0,0 @@
-(use-modules (ice-9 format))
-(load "helper.scm")
-
-(define (*key-down-handler* key)
-  (display "Keydown: ")
-  (display key)
-  (newline)
-  (cond ((string=? key "i")
-         (game-add-igel (+ (player-get-x) 0)
-                        (- (player-get-y) 300)))
-        ((string=? key "s")
-         (windstille:repl))
-
-        ((string=? key "p")
-         (toggle-pause))
-        
-        ((string=? key "d")
-         (dialog-show))
-
-        ((string=? key "1")
-         (set-game-speed 1.0))
-
-        ((string=? key "2")
-         (set-game-speed 2.0))
-
-        ((string=? key "3")
-         (set-game-speed .5))
-
-        ((string=? key "4")
-         (set-game-speed .25))
-
-        ((string=? key "5")
-         (set-game-speed .1))
-
-        ((string=? key "h")
-         (dialog-hide))
-        ))
-
-(define (*mouse-up-handler* x y)
-  #f)
-
-(define (*mouse-down-handler* x y)
-  (display (inexact->exact x))
-  (display " ")
-  (display (inexact->exact y))
-  (newline)
-
-  (cond (#t
-         (player-set-pos x y))
-        (else
-         (display "(game-add-igel ")
-         (display (inexact->exact x))
-         (display " ")
-         (display (inexact->exact y))
-         (display ")")
-         
-         (game-add-igel (inexact->exact x)
-                        (inexact->exact y))
-         (newline))))
-
-(define (toggle-pause)
-  (game-set-pause (not (game-get-pause))))
-
-(define (game-get-time-str)
-  (let* ((t (inexact->exact (game-get-time)))
-         (minutes (quotient  t 60))
-         (seconds (remainder t 60)))
-    (string-append (number->string minutes) 
-                   ":"
-                   (if (< seconds 10)
-                       "0" "")
-                   (number->string seconds))))
-
-
-;(define save-player-position #f)
-; (let ((x 10)
-;       (y 45)
-;       (buttons '())
-;       (window (gui-create-window 20 20 300 200 "Position Save GUI")))
-
-;   (gui-push-component (gui-window-get-client-area window))
-;   (gui-create-button-func 10 10 100 25 "Save Position"
-;                           (lambda () (save-player-position (inexact->exact (player-get-pos-x))
-;                                                            (inexact->exact (player-get-pos-y)))))
-;   (gui-create-button-func 115 10 100 25 "Clear"
-;                           (lambda () 
-;                             (for-each gui-remove-component buttons)
-;                             (set! buttons '())
-;                             (set! x 10)
-;                             (set! y 45)))
-;   (gui-pop-component)
-
-;   (set! save-player-position
-;         (lambda (player-x player-y)
-;           (gui-push-component (gui-window-get-client-area window))
-;           (set! buttons
-;                 (cons (gui-create-button-func x y 70 25 (format #f "~d, ~d" player-x player-y)
-;                                               (lambda ()
-;                                                 (player-set-pos player-x player-y)))
-;                       buttons))
-;           (set! x (+ x 75))
-;           (cond ((> x 220)
-;                  (set! y (+ y 30))
-;                  (set! x 10)))
-;           (gui-pop-component))))
-
-;(save-player-position 258 607)
-;(save-player-position 3989 703)
-;(save-player-position 7635 3391)
-;(save-player-position 969 3263)
-
-; (let ((window (gui-create-window 20 320 310 100 "Eval Scheme")))
-;   (gui-push-component (gui-window-get-client-area window))
-;   (let ((input  (gui-create-inputbox 10 10 240 30 ""))
-;         (button (gui-create-button 255 10 50 25 "eval")))
-;     (gui-component-on-click button
-;                             (lambda ()
-;                               (catch #t
-;                                      (lambda () 
-;                                        (eval-string (gui-inputbox-get-text input)))
-;                                      (lambda err
-;                                        (display "Error: ")(display err)(newline))))))
-;   (gui-pop-component))
-
-; (gui-create-button-func 0 0 100 25 "Hide Debug GUI"
-;                         (lambda () (gui-hide)))
-
-; ;; Default to non-debug mode
-; (gui-hide)
-
-;; (define array
-;;   (let ((data '(1 2 3 4 5)))
-;;     (make-procedure-with-setter 
-;;      (lambda (i)
-;;        (list-ref data i))
-;;      (lambda (i val)
-;;        (list-set! data i val))
-;;      )))
-
-;; EOF ;;

Deleted: trunk/windstille/data/helper.scm
===================================================================
--- trunk/windstille/data/helper.scm	2009-02-10 20:29:06 UTC (rev 2453)
+++ trunk/windstille/data/helper.scm	2009-02-10 20:40:14 UTC (rev 2454)
@@ -1,60 +0,0 @@
-(define (seq start end)
-  (let loop ((ret '())
-             (start start)
-             (end   end))
-    (cond ((< start end)
-           (set! ret (cons start ret))
-           (loop ret (+ start 1) end))
-          (else
-           (reverse ret)))))
-
-(cond (#f
-       (catch #t
-              (lambda () 
-                (eval
-                 '(begin (use-modules (ice-9 readline))
-                         (activate-readline))
-                 (current-module)))
-              (lambda args 
-                (display "Error: ")
-                (display args)
-                (newline)))))
-
-(define (windstille:repl)
-  (display "### Windstille repl, exit with (quit)\n")
-  (let ((old-prompt scm-repl-prompt))
-    (set-repl-prompt! "windstille> ")
-    (catch #t
-           (lambda ()
-             (top-repl)
-             (display "Windstille Readline exited nicly.\n"))
-           (lambda args
-             (display "Error: ")
-             (display args)(newline)))
-    (set-repl-prompt! old-prompt)))
-
-(define (filter pred? objects)
-  (let loop ((objs objects)
-	     (result '()))
-    (cond ((null? objs) (reverse! result))
-	  ((pred? (car objs)) (loop (cdr objs) (cons (car objs) result)))
-	  (else (loop (cdr objs) result)))))
-
-(define (get-value-from-tree pos lst default)
-  (cond ((null? pos)
-         lst)
-        ((null? lst)
-         default)
-        ((equal? pos '(_))
-         (car lst))
-        (else
-         (let ((el (assoc-ref lst (car pos))))
-           (cond (el
-                  (get-value-from-tree (cdr pos) el default))
-                 (else
-                  default
-                  ))))))
-
-;; (load "gui.scm")
-
-;; EOF ;;

Deleted: trunk/windstille/data/windstille.scr
===================================================================
--- trunk/windstille/data/windstille.scr	2009-02-10 20:29:06 UTC (rev 2453)
+++ trunk/windstille/data/windstille.scr	2009-02-10 20:40:14 UTC (rev 2454)
@@ -1,234 +0,0 @@
-section powerup {
-	flash   = (type=sprite, image1 = images/powerup/flash.png);
-	laser   = (type=sprite, image1 = images/powerup/laser.png);
-	powerup = (type=sprite,	image1 = images/powerup/powerup.png);
-	shild   = (type=sprite, image1 = images/powerup/shild.png);
-	spread  = (type=sprite, image1 = images/powerup/spread.png);
-}
-
-bonusflyer = (type=sprite,
-	image1 = images/bonusflyer.png);
-
-section lights {
-	light1 = (type=sprite, image1 = images/light1.png);
-	light2 = (type=sprite, image1 = images/light2.png);
-	light3 = (type=sprite, image1 = images/light3.png);
-}
-
-nebular = (type=sprite, image1 = images/nebular.png);
-
-dog = (type=sprite,
-	play_speed = 500,
-
-	translation_hotspot = (top_left, 24, 42),
-
-	image1 = images/dog/frame1.png,
-	image2 = images/dog/frame2.png,
-	image3 = images/dog/frame3.png,
-	image4 = images/dog/frame4.png);
-
-section turrican {
-	jump = (type=sprite,
-		translation_hotspot = (top_left, 29, 82),
-		image1 = images/sprite_jump_east.png);
-
-//		frame1 = images/turrican_jump_east.png (type=surface);
-
-	walk = (type=sprite,
-		translation_hotspot = (top_left, 29, 85),
-		image1 = images/turrican_jump_east.png);
-
-	shild = (type=sprite, 
-		play_speed = 50,
-		image1 = images/shild/frame1.png,
-		image2 = images/shild/frame2.png);
-
-	sit = (type=sprite,
-		translation_hotspot = (top_left, 29, 90),
-		image1 = images/turrican_sit.png);
-
-	roll = (type=sprite,
-		translation_hotspot = (top_left, 29, 82),
-
-		image1 = images/turrican_roll/frame1.png,
-		image2 = images/turrican_roll/frame2.png,
-		image3 = images/turrican_roll/frame3.png,
-		image4 = images/turrican_roll/frame4.png);
-
-	stand = (type=sprite,
-		translation_hotspot = (top_left, 29, 82),
-		image1 = images/turrican_stand_east.png);
-	
-	walk = (type=sprite,
-		translation_hotspot = (top_left, 32, 74),
-
-		image1 = images/turrican_walk/frame1.png,
-		image2 = images/turrican_walk/frame2.png,
-		image3 = images/turrican_walk/frame3.png,
-		image4 = images/turrican_walk/frame4.png,
-		image5 = images/turrican_walk/frame5.png,
-		image6 = images/turrican_walk/frame6.png,
-		image7 = images/turrican_walk/frame7.png,
-		image8 = images/turrican_walk/frame8.png,
-		image9 = images/turrican_walk/frame9.png,
-		image10 = images/turrican_walk/frame10.png,
-		image11 = images/turrican_walk/frame11.png,
-		image12 = images/turrican_walk/frame12.png,
-		image13 = images/turrican_walk/frame13.png,
-		image14 = images/turrican_walk/frame14.png);
-
-	surround = (type=sprite,
-		translation_hotspot = (top_left, 39, 86),
-
-		image1 = images/turrican_surround/frame1.png,
-		image2 = images/turrican_surround/frame2.png,
-		image3 = images/turrican_surround/frame3.png,
-		image4 = images/turrican_surround/frame4.png,
-		image5 = images/turrican_surround/frame5.png,
-		image6 = images/turrican_surround/frame6.png,
-		image7 = images/turrican_surround/frame7.png,
-		image8 = images/turrican_surround/frame8.png,
-		image9 = images/turrican_surround/frame9.png,
-
-		image10 = images/turrican_surround/frame10.png,
-		image11 = images/turrican_surround/frame11.png,
-		image12 = images/turrican_surround/frame12.png,
-		image13 = images/turrican_surround/frame13.png,
-		image14 = images/turrican_surround/frame14.png,
-		image15 = images/turrican_surround/frame15.png,
-		image16 = images/turrican_surround/frame16.png,
-		image17 = images/turrican_surround/frame17.png,
-		image18 = images/turrican_surround/frame18.png,
-		image19 = images/turrican_surround/frame19.png,
-
-		image20 = images/turrican_surround/frame20.png,
-		image21 = images/turrican_surround/frame21.png,
-		image22 = images/turrican_surround/frame22.png,
-		image23 = images/turrican_surround/frame23.png,
-		image24 = images/turrican_surround/frame24.png,
-		image25 = images/turrican_surround/frame25.png,
-		image26 = images/turrican_surround/frame26.png,
-		image27 = images/turrican_surround/frame27.png,
-		image28 = images/turrican_surround/frame28.png,
-		image29 = images/turrican_surround/frame29.png,
-
-		image30 = images/turrican_surround/frame30.png);
-}
-
-section shoot {
-	explosion = (
-		type=sprite,
-		image1 = images/shoot/explosion/frame1.png,
-		image2 = images/shoot/explosion/frame2.png,
-		image3 = images/shoot/explosion/frame3.png,
-		image4 = images/shoot/explosion/frame4.png,
-		image5 = images/shoot/explosion/frame5.png,
-		image6 = images/shoot/explosion/frame6.png,
-		image7 = images/shoot/explosion/frame7.png
-	);
-
-	default = (type=sprite,
-		   image1 = images/shoot_default.png);
-	
-	section laser {
-		stage1 = (type=sprite,image1 = images/shoot/laser/stage1.png);
-		stage2 = (type=sprite, image1 = images/shoot/laser/stage2.png);
-		stage3 = (type=sprite, image1 = images/shoot/laser/stage3.png);
-		stage4 = (type=sprite, image1 = images/shoot/laser/stage4.png);
-		stage5 = (type=sprite, image1 = images/shoot/laser/stage5.png);
-	}
-
-	bounce = (type=sprite, image1=images/shoot/bounce/stage2.png);
-}
-
-
-// for i in images/tiles/level1/*.png;
-// do     j=${i##images/tiles/level1/};
-// echo "section ${j%%.png} { image1 = $i);"; 
-//done > /tmp/tiles
-
-section tiles {
-green1 = (type=sprite, image1 = images/tiles/level1/green1.png);
-tile1 = (type=sprite, image1 = images/tiles/level1/tile1.png);
-tile10 = (type=sprite, image1 = images/tiles/level1/tile10.png);
-tile11 = (type=sprite, image1 = images/tiles/level1/tile11.png);
-tile12 = (type=sprite, image1 = images/tiles/level1/tile12.png);
-tile13 = (type=sprite, image1 = images/tiles/level1/tile13.png);
-tile14 = (type=sprite, image1 = images/tiles/level1/tile14.png);
-tile15 = (type=sprite, image1 = images/tiles/level1/tile15.png);
-tile16 = (type=sprite, image1 = images/tiles/level1/tile16.png);
-tile17 = (type=sprite, image1 = images/tiles/level1/tile17.png);
-tile18 = (type=sprite, image1 = images/tiles/level1/tile18.png);
-tile19 = (type=sprite, image1 = images/tiles/level1/tile19.png);
-tile2 = (type=sprite, image1 = images/tiles/level1/tile2.png);
-tile20 = (type=sprite, image1 = images/tiles/level1/tile20.png);
-tile21 = (type=sprite, image1 = images/tiles/level1/tile21.png);
-tile22 = (type=sprite, image1 = images/tiles/level1/tile22.png);
-tile23 = (type=sprite, image1 = images/tiles/level1/tile23.png);
-tile24 = (type=sprite, image1 = images/tiles/level1/tile24.png);
-tile25 = (type=sprite, image1 = images/tiles/level1/tile25.png);
-tile26 = (type=sprite, image1 = images/tiles/level1/tile26.png);
-tile27 = (type=sprite, image1 = images/tiles/level1/tile27.png);
-tile29 = (type=sprite, image1 = images/tiles/level1/tile29.png);
-tile3 = (type=sprite, image1 = images/tiles/level1/tile3.png);
-tile30 = (type=sprite, image1 = images/tiles/level1/tile30.png);
-tile31 = (type=sprite, image1 = images/tiles/level1/tile31.png);
-tile32 = (type=sprite, image1 = images/tiles/level1/tile32.png);
-tile33 = (type=sprite, image1 = images/tiles/level1/tile33.png);
-tile34 = (type=sprite, image1 = images/tiles/level1/tile34.png);
-tile35 = (type=sprite, image1 = images/tiles/level1/tile35.png);
-tile36 = (type=sprite, image1 = images/tiles/level1/tile36.png);
-tile38 = (type=sprite, image1 = images/tiles/level1/tile38.png);
-tile39 = (type=sprite, image1 = images/tiles/level1/tile39.png);
-tile4 = (type=sprite, image1 = images/tiles/level1/tile4.png);
-tile40 = (type=sprite, image1 = images/tiles/level1/tile40.png);
-tile41 = (type=sprite, image1 = images/tiles/level1/tile41.png);
-tile42 = (type=sprite, image1 = images/tiles/level1/tile42.png);
-tile43 = (type=sprite, image1 = images/tiles/level1/tile43.png);
-tile44 = (type=sprite, image1 = images/tiles/level1/tile44.png);
-tile45 = (type=sprite, image1 = images/tiles/level1/tile45.png);
-tile46 = (type=sprite, image1 = images/tiles/level1/tile46.png);
-tile47 = (type=sprite, image1 = images/tiles/level1/tile47.png);
-tile48 = (type=sprite, image1 = images/tiles/level1/tile48.png);
-tile49 = (type=sprite, image1 = images/tiles/level1/tile49.png);
-tile5 = (type=sprite, image1 = images/tiles/level1/tile5.png);
-tile50 = (type=sprite, image1 = images/tiles/level1/tile50.png);
-tile51 = (type=sprite, image1 = images/tiles/level1/tile51.png);
-tile52 = (type=sprite, image1 = images/tiles/level1/tile52.png);
-tile53 = (type=sprite, image1 = images/tiles/level1/tile53.png);
-tile54 = (type=sprite, image1 = images/tiles/level1/tile54.png);
-tile55 = (type=sprite, image1 = images/tiles/level1/tile55.png);
-tile56 = (type=sprite, image1 = images/tiles/level1/tile56.png);
-tile57 = (type=sprite, image1 = images/tiles/level1/tile57.png);
-tile58 = (type=sprite, image1 = images/tiles/level1/tile58.png);
-tile59 = (type=sprite, image1 = images/tiles/level1/tile59.png);
-tile6 = (type=sprite, image1 = images/tiles/level1/tile6.png);
-tile60 = (type=sprite, image1 = images/tiles/level1/tile60.png);
-tile61 = (type=sprite, image1 = images/tiles/level1/tile61.png);
-tile62 = (type=sprite, image1 = images/tiles/level1/tile62.png);
-tile63 = (type=sprite, image1 = images/tiles/level1/tile63.png);
-tile64 = (type=sprite, image1 = images/tiles/level1/tile64.png);
-tile65 = (type=sprite, image1 = images/tiles/level1/tile65.png);
-tile66 = (type=sprite, image1 = images/tiles/level1/tile66.png);
-tile67 = (type=sprite, image1 = images/tiles/level1/tile67.png);
-tile68 = (type=sprite, image1 = images/tiles/level1/tile68.png);
-tile69 = (type=sprite, image1 = images/tiles/level1/tile69.png);
-tile7 = (type=sprite, image1 = images/tiles/level1/tile7.png);
-tile71 = (type=sprite, image1 = images/tiles/level1/tile71.png);
-tile72 = (type=sprite, image1 = images/tiles/level1/tile72.png);
-tile73 = (type=sprite, image1 = images/tiles/level1/tile73.png);
-tile75 = (type=sprite, image1 = images/tiles/level1/tile75.png);
-tile76 = (type=sprite, image1 = images/tiles/level1/tile76.png);
-tile77 = (type=sprite, image1 = images/tiles/level1/tile77.png);
-tile8 = (type=sprite, image1 = images/tiles/level1/tile8.png);
-tile9 = (type=sprite, image1 = images/tiles/level1/tile9.png);
-water1 = (type=sprite, image1 = images/tiles/level1/water1.png);
-water2 = (type=sprite, image1 = images/tiles/level1/water2.png);
-water3 = (type=sprite, image1 = images/tiles/level1/water3.png);
-water4 = (type=sprite, image1 = images/tiles/level1/water4.png);
-waterfall = (type=sprite, image1 = images/tiles/level1/waterfall.png);
-waterfall2 = (type=sprite, image1 = images/tiles/level1/waterfall2.png);
-waterfall3 = (type=sprite, image1 = images/tiles/level1/waterfall3.png);
-}
-
-// EOF //
\ No newline at end of file



From grumbel at mail.berlios.de  Wed Feb 11 16:54:45 2009
From: grumbel at mail.berlios.de (grumbel at BerliOS)
Date: Wed, 11 Feb 2009 16:54:45 +0100
Subject: [Windstille-commit] r2455 - in trunk/windstille/src: . armature
	collision display font gui input math navigation objects
	particles scripting sound sprite2d sprite3d
Message-ID: <200902111554.n1BFsj7S011018@sheep.berlios.de>

Author: grumbel
Date: 2009-02-11 16:54:35 +0100 (Wed, 11 Feb 2009)
New Revision: 2455

Modified:
   trunk/windstille/src/armature/action.hpp
   trunk/windstille/src/armature/armature.hpp
   trunk/windstille/src/armature/bone.hpp
   trunk/windstille/src/armature/ipo_curve.hpp
   trunk/windstille/src/armature/mesh.hpp
   trunk/windstille/src/armature/model.hpp
   trunk/windstille/src/armature/pose.hpp
   trunk/windstille/src/armature/pose_bone.hpp
   trunk/windstille/src/armature_test.hpp
   trunk/windstille/src/baby_xml.hpp
   trunk/windstille/src/blitter.hpp
   trunk/windstille/src/box.hpp
   trunk/windstille/src/camera.hpp
   trunk/windstille/src/character.hpp
   trunk/windstille/src/collision/collision_data.hpp
   trunk/windstille/src/collision/collision_engine.hpp
   trunk/windstille/src/collision/collision_object.hpp
   trunk/windstille/src/collision/collision_test.hpp
   trunk/windstille/src/collision/stair_contact.hpp
   trunk/windstille/src/color.hpp
   trunk/windstille/src/console.hpp
   trunk/windstille/src/controller_def.hpp
   trunk/windstille/src/controller_help_window.hpp
   trunk/windstille/src/conversation.hpp
   trunk/windstille/src/dialog_manager.hpp
   trunk/windstille/src/display/display.hpp
   trunk/windstille/src/display/drawing_context.hpp
   trunk/windstille/src/display/drawing_request.hpp
   trunk/windstille/src/display/framebuffer.hpp
   trunk/windstille/src/display/opengl_state.hpp
   trunk/windstille/src/display/render_buffer.hpp
   trunk/windstille/src/display/scene_context.hpp
   trunk/windstille/src/display/shader_object.hpp
   trunk/windstille/src/display/shader_program.hpp
   trunk/windstille/src/display/surface.hpp
   trunk/windstille/src/display/surface_drawing_parameters.hpp
   trunk/windstille/src/display/surface_manager.cpp
   trunk/windstille/src/display/surface_manager.hpp
   trunk/windstille/src/display/texture.hpp
   trunk/windstille/src/display/texture_manager.cpp
   trunk/windstille/src/display/texture_manager.hpp
   trunk/windstille/src/display/vertex_array_drawing_request.hpp
   trunk/windstille/src/elevator.hpp
   trunk/windstille/src/energy_bar.hpp
   trunk/windstille/src/entity.hpp
   trunk/windstille/src/field.hpp
   trunk/windstille/src/file_reader.cpp
   trunk/windstille/src/file_reader.hpp
   trunk/windstille/src/file_reader_impl.hpp
   trunk/windstille/src/font/border_font_effect.hpp
   trunk/windstille/src/font/font_effect.hpp
   trunk/windstille/src/font/fonts.hpp
   trunk/windstille/src/font/ttf_font.hpp
   trunk/windstille/src/game_object.hpp
   trunk/windstille/src/game_session.hpp
   trunk/windstille/src/geometry_test.hpp
   trunk/windstille/src/globals.hpp
   trunk/windstille/src/graphic_context_state.hpp
   trunk/windstille/src/grenade.hpp
   trunk/windstille/src/gui/component_factory.hpp
   trunk/windstille/src/gui/group_component.hpp
   trunk/windstille/src/gui/label.hpp
   trunk/windstille/src/gui/slider.hpp
   trunk/windstille/src/handle.hpp
   trunk/windstille/src/input/controller.hpp
   trunk/windstille/src/input/controller_description.hpp
   trunk/windstille/src/input/input_configurator.hpp
   trunk/windstille/src/input/input_event.hpp
   trunk/windstille/src/input/input_manager.hpp
   trunk/windstille/src/input/input_manager_impl.hpp
   trunk/windstille/src/input/input_manager_sdl.hpp
   trunk/windstille/src/input/wiimote.hpp
   trunk/windstille/src/math.hpp
   trunk/windstille/src/math/line.hpp
   trunk/windstille/src/navigation/navigation_graph.hpp
   trunk/windstille/src/navigation/node.hpp
   trunk/windstille/src/navigation/properties.hpp
   trunk/windstille/src/navigation/segment.hpp
   trunk/windstille/src/navigation/segment_position.hpp
   trunk/windstille/src/navigation_test.hpp
   trunk/windstille/src/objects/background_gradient.hpp
   trunk/windstille/src/objects/bomb.hpp
   trunk/windstille/src/objects/hedgehog.hpp
   trunk/windstille/src/objects/nightvision.hpp
   trunk/windstille/src/objects/shockwave.hpp
   trunk/windstille/src/objects/spider_mine.hpp
   trunk/windstille/src/objects/swarm.hpp
   trunk/windstille/src/objects/test_object.cpp
   trunk/windstille/src/objects/test_object.hpp
   trunk/windstille/src/objects/vrdummy.hpp
   trunk/windstille/src/particle_viewer.hpp
   trunk/windstille/src/particles/deform_drawer.hpp
   trunk/windstille/src/particles/drawer.hpp
   trunk/windstille/src/particles/particle_system.hpp
   trunk/windstille/src/particles/randomizer.hpp
   trunk/windstille/src/particles/spark_drawer.hpp
   trunk/windstille/src/particles/surface_drawer.hpp
   trunk/windstille/src/pda.hpp
   trunk/windstille/src/physics.cpp
   trunk/windstille/src/physics.hpp
   trunk/windstille/src/pistol.hpp
   trunk/windstille/src/player.hpp
   trunk/windstille/src/random.hpp
   trunk/windstille/src/ref.hpp
   trunk/windstille/src/refcounter.hpp
   trunk/windstille/src/response_curve.hpp
   trunk/windstille/src/screen.hpp
   trunk/windstille/src/screen_manager.cpp
   trunk/windstille/src/screen_manager.hpp
   trunk/windstille/src/script_manager.hpp
   trunk/windstille/src/scriptable_object.hpp
   trunk/windstille/src/scripting/game_objects.cpp
   trunk/windstille/src/scripting/game_objects.hpp
   trunk/windstille/src/scripting/interface.hpp
   trunk/windstille/src/scripting/squirrel_error.hpp
   trunk/windstille/src/sector.hpp
   trunk/windstille/src/sexpr_file_reader.hpp
   trunk/windstille/src/sound/sound_file.cpp
   trunk/windstille/src/sound/sound_file.hpp
   trunk/windstille/src/sound/sound_manager.hpp
   trunk/windstille/src/sound/sound_source.cpp
   trunk/windstille/src/sound/sound_source.hpp
   trunk/windstille/src/sound/stream_sound_source.cpp
   trunk/windstille/src/sound/stream_sound_source.hpp
   trunk/windstille/src/sprite2d/data.hpp
   trunk/windstille/src/sprite2d/manager.hpp
   trunk/windstille/src/sprite2d/sprite.hpp
   trunk/windstille/src/sprite2dview.hpp
   trunk/windstille/src/sprite3d/data.hpp
   trunk/windstille/src/sprite3d/manager.cpp
   trunk/windstille/src/sprite3d/manager.hpp
   trunk/windstille/src/sprite3d/sprite3d.hpp
   trunk/windstille/src/sprite3dview.hpp
   trunk/windstille/src/text_area.hpp
   trunk/windstille/src/tile.hpp
   trunk/windstille/src/tile_description.hpp
   trunk/windstille/src/tile_factory.hpp
   trunk/windstille/src/tile_map.hpp
   trunk/windstille/src/tile_packer.hpp
   trunk/windstille/src/timer.hpp
   trunk/windstille/src/title_screen.hpp
   trunk/windstille/src/trigger.hpp
   trunk/windstille/src/util.hpp
   trunk/windstille/src/view.hpp
   trunk/windstille/src/weapon.hpp
   trunk/windstille/src/windstille.hpp
Log:
Added some more missing copyright headers, fixed some include guards

Modified: trunk/windstille/src/armature/action.hpp
===================================================================
--- trunk/windstille/src/armature/action.hpp	2009-02-10 20:40:14 UTC (rev 2454)
+++ trunk/windstille/src/armature/action.hpp	2009-02-11 15:54:35 UTC (rev 2455)
@@ -16,8 +16,8 @@
 **  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
-#ifndef HEADER_ACTION_HPP
-#define HEADER_ACTION_HPP
+#ifndef HEADER_WINDSTILLE_ARMATURE_ACTION_HPP
+#define HEADER_WINDSTILLE_ARMATURE_ACTION_HPP
 
 /** */
 class Action

Modified: trunk/windstille/src/armature/armature.hpp
===================================================================
--- trunk/windstille/src/armature/armature.hpp	2009-02-10 20:40:14 UTC (rev 2454)
+++ trunk/windstille/src/armature/armature.hpp	2009-02-11 15:54:35 UTC (rev 2455)
@@ -16,8 +16,8 @@
 **  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
-#ifndef HEADER_ARMATURE_HPP
-#define HEADER_ARMATURE_HPP
+#ifndef HEADER_WINDSTILLE_ARMATURE_ARMATURE_HPP
+#define HEADER_WINDSTILLE_ARMATURE_ARMATURE_HPP
 
 #include <vector>
 #include "bone.hpp"

Modified: trunk/windstille/src/armature/bone.hpp
===================================================================
--- trunk/windstille/src/armature/bone.hpp	2009-02-10 20:40:14 UTC (rev 2454)
+++ trunk/windstille/src/armature/bone.hpp	2009-02-11 15:54:35 UTC (rev 2455)
@@ -16,8 +16,8 @@
 **  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
-#ifndef HEADER_SKELETON_BONE_HPP
-#define HEADER_SKELETON_BONE_HPP
+#ifndef HEADER_WINDSTILLE_ARMATURE_SKELETON_BONE_HPP
+#define HEADER_WINDSTILLE_ARMATURE_SKELETON_BONE_HPP
 
 #include <string>
 #include <vector>

Modified: trunk/windstille/src/armature/ipo_curve.hpp
===================================================================
--- trunk/windstille/src/armature/ipo_curve.hpp	2009-02-10 20:40:14 UTC (rev 2454)
+++ trunk/windstille/src/armature/ipo_curve.hpp	2009-02-11 15:54:35 UTC (rev 2455)
@@ -16,8 +16,8 @@
 **  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
-#ifndef HEADER_IPO_CURVE_HPP
-#define HEADER_IPO_CURVE_HPP
+#ifndef HEADER_WINDSTILLE_ARMATURE_IPO_CURVE_HPP
+#define HEADER_WINDSTILLE_ARMATURE_IPO_CURVE_HPP
 
 struct BezierPoint
 {

Modified: trunk/windstille/src/armature/mesh.hpp
===================================================================
--- trunk/windstille/src/armature/mesh.hpp	2009-02-10 20:40:14 UTC (rev 2454)
+++ trunk/windstille/src/armature/mesh.hpp	2009-02-11 15:54:35 UTC (rev 2455)
@@ -16,8 +16,8 @@
 **  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
-#ifndef HEADER_MESH_HPP
-#define HEADER_MESH_HPP
+#ifndef HEADER_WINDSTILLE_ARMATURE_MESH_HPP
+#define HEADER_WINDSTILLE_ARMATURE_MESH_HPP
 
 #include <GL/glew.h>
 #include <GL/gl.h>

Modified: trunk/windstille/src/armature/model.hpp
===================================================================
--- trunk/windstille/src/armature/model.hpp	2009-02-10 20:40:14 UTC (rev 2454)
+++ trunk/windstille/src/armature/model.hpp	2009-02-11 15:54:35 UTC (rev 2455)
@@ -16,8 +16,8 @@
 **  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
-#ifndef HEADER_MODEL_HPP
-#define HEADER_MODEL_HPP
+#ifndef HEADER_WINDSTILLE_ARMATURE_MODEL_HPP
+#define HEADER_WINDSTILLE_ARMATURE_MODEL_HPP
 
 #include <string>
 #include <vector>

Modified: trunk/windstille/src/armature/pose.hpp
===================================================================
--- trunk/windstille/src/armature/pose.hpp	2009-02-10 20:40:14 UTC (rev 2454)
+++ trunk/windstille/src/armature/pose.hpp	2009-02-11 15:54:35 UTC (rev 2455)
@@ -16,8 +16,8 @@
 **  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
-#ifndef HEADER_POSE_HPP
-#define HEADER_POSE_HPP
+#ifndef HEADER_WINDSTILLE_ARMATURE_POSE_HPP
+#define HEADER_WINDSTILLE_ARMATURE_POSE_HPP
 
 #include <string>
 #include <vector>

Modified: trunk/windstille/src/armature/pose_bone.hpp
===================================================================
--- trunk/windstille/src/armature/pose_bone.hpp	2009-02-10 20:40:14 UTC (rev 2454)
+++ trunk/windstille/src/armature/pose_bone.hpp	2009-02-11 15:54:35 UTC (rev 2455)
@@ -16,8 +16,8 @@
 **  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
-#ifndef HEADER_POSE_BONE_HPP
-#define HEADER_POSE_BONE_HPP
+#ifndef HEADER_WINDSTILLE_ARMATURE_POSE_BONE_HPP
+#define HEADER_WINDSTILLE_ARMATURE_POSE_BONE_HPP
 
 #include <string>
 #include "math/quaternion.hpp"

Modified: trunk/windstille/src/armature_test.hpp
===================================================================
--- trunk/windstille/src/armature_test.hpp	2009-02-10 20:40:14 UTC (rev 2454)
+++ trunk/windstille/src/armature_test.hpp	2009-02-11 15:54:35 UTC (rev 2455)
@@ -16,8 +16,8 @@
 **  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
-#ifndef HEADER_ARMATURE_TEST_HPP
-#define HEADER_ARMATURE_TEST_HPP
+#ifndef HEADER_WINDSTILLE_ARMATURE_TEST_HPP
+#define HEADER_WINDSTILLE_ARMATURE_TEST_HPP
 
 #include "armature/armature.hpp"
 #include "armature/model.hpp"

Modified: trunk/windstille/src/baby_xml.hpp
===================================================================
--- trunk/windstille/src/baby_xml.hpp	2009-02-10 20:40:14 UTC (rev 2454)
+++ trunk/windstille/src/baby_xml.hpp	2009-02-11 15:54:35 UTC (rev 2455)
@@ -16,8 +16,8 @@
 **  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
-#ifndef HEADER_WINDSTILLE_BABY_XML_HXX
-#define HEADER_WINDSTILLE_BABY_XML_HXX
+#ifndef HEADER_WINDSTILLE_BABY_XML_HPP
+#define HEADER_WINDSTILLE_BABY_XML_HPP
 
 #include <string>
 #include <vector>

Modified: trunk/windstille/src/blitter.hpp
===================================================================
--- trunk/windstille/src/blitter.hpp	2009-02-10 20:40:14 UTC (rev 2454)
+++ trunk/windstille/src/blitter.hpp	2009-02-11 15:54:35 UTC (rev 2455)
@@ -1,5 +1,3 @@
-//
-// 
 //  Flexlay - A Generic 2D Game Editor
 //  Copyright (C) 2002 Ingo Ruhnke <grumbel at gmx.de>
 //
@@ -17,8 +15,8 @@
 //  along with this program; if not, write to the Free Software
 //  Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA.
 
-#ifndef HEADER_BLITTER_HXX
-#define HEADER_BLITTER_HXX
+#ifndef HEADER_BLITTER_HPP
+#define HEADER_BLITTER_HPP
 
 #include <SDL.h>
 

Modified: trunk/windstille/src/box.hpp
===================================================================
--- trunk/windstille/src/box.hpp	2009-02-10 20:40:14 UTC (rev 2454)
+++ trunk/windstille/src/box.hpp	2009-02-11 15:54:35 UTC (rev 2455)
@@ -16,8 +16,8 @@
 **  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
-#ifndef HEADER_WINDSTILLE_BOX_HXX
-#define HEADER_WINDSTILLE_BOX_HXX
+#ifndef HEADER_WINDSTILLE_BOX_HPP
+#define HEADER_WINDSTILLE_BOX_HPP
 
 #include "entity.hpp"
 #include "collision/collision_object.hpp"

Modified: trunk/windstille/src/camera.hpp
===================================================================
--- trunk/windstille/src/camera.hpp	2009-02-10 20:40:14 UTC (rev 2454)
+++ trunk/windstille/src/camera.hpp	2009-02-11 15:54:35 UTC (rev 2455)
@@ -16,8 +16,8 @@
 **  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
-#ifndef HEADER_CAMERA_HXX
-#define HEADER_CAMERA_HXX
+#ifndef HEADER_WINDSTILLE_CAMERA_HPP
+#define HEADER_WINDSTILLE_CAMERA_HPP
 
 /** 
  * This class manages the virtual camera movement, it follows the

Modified: trunk/windstille/src/character.hpp
===================================================================
--- trunk/windstille/src/character.hpp	2009-02-10 20:40:14 UTC (rev 2454)
+++ trunk/windstille/src/character.hpp	2009-02-11 15:54:35 UTC (rev 2455)
@@ -16,8 +16,8 @@
 **  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
-#ifndef HEADER_CHARACTER_HPP
-#define HEADER_CHARACTER_HPP
+#ifndef HEADER_WINDSTILLE_CHARACTER_HPP
+#define HEADER_WINDSTILLE_CHARACTER_HPP
 
 #include "entity.hpp"
 #include "sprite3d/sprite3d.hpp"

Modified: trunk/windstille/src/collision/collision_data.hpp
===================================================================
--- trunk/windstille/src/collision/collision_data.hpp	2009-02-10 20:40:14 UTC (rev 2454)
+++ trunk/windstille/src/collision/collision_data.hpp	2009-02-11 15:54:35 UTC (rev 2455)
@@ -17,8 +17,8 @@
 **  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
-#ifndef HEADER_COLLISION_DATA_HXX
-#define HEADER_COLLISION_DATA_HXX
+#ifndef HEADER_WINDSTILLE_COLLISION_COLLISION_DATA_HPP
+#define HEADER_WINDSTILLE_COLLISION_COLLISION_DATA_HPP
 
 #include <iostream>
 #include "math/vector.hpp"

Modified: trunk/windstille/src/collision/collision_engine.hpp
===================================================================
--- trunk/windstille/src/collision/collision_engine.hpp	2009-02-10 20:40:14 UTC (rev 2454)
+++ trunk/windstille/src/collision/collision_engine.hpp	2009-02-11 15:54:35 UTC (rev 2455)
@@ -17,8 +17,8 @@
 **  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
-#ifndef HEADER_COLLISION_ENGINE_HPP
-#define HEADER_COLLISION_ENGINE_HPP
+#ifndef HEADER_WINDSTILLE_COLLISION_COLLISION_ENGINE_HPP
+#define HEADER_WINDSTILLE_COLLISION_COLLISION_ENGINE_HPP
 
 #include "collision_object.hpp"
 

Modified: trunk/windstille/src/collision/collision_object.hpp
===================================================================
--- trunk/windstille/src/collision/collision_object.hpp	2009-02-10 20:40:14 UTC (rev 2454)
+++ trunk/windstille/src/collision/collision_object.hpp	2009-02-11 15:54:35 UTC (rev 2455)
@@ -17,8 +17,8 @@
 **  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
-#ifndef HEADER_COLLISION_OBJECT_HPP
-#define HEADER_COLLISION_OBJECT_HPP
+#ifndef HEADER_WINDSTILLE_COLLISION_COLLISION_OBJECT_HPP
+#define HEADER_WINDSTILLE_COLLISION_COLLISION_OBJECT_HPP
 
 #include <boost/signals.hpp>
 #include "math/vector.hpp"

Modified: trunk/windstille/src/collision/collision_test.hpp
===================================================================
--- trunk/windstille/src/collision/collision_test.hpp	2009-02-10 20:40:14 UTC (rev 2454)
+++ trunk/windstille/src/collision/collision_test.hpp	2009-02-11 15:54:35 UTC (rev 2455)
@@ -17,8 +17,8 @@
 **  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
-#ifndef HEADER_COLLTEST_HXX
-#define HEADER_COLLTEST_HXX
+#ifndef HEADER_WINDSTILLE_COLLISION_COLLTEST_HPP
+#define HEADER_WINDSTILLE_COLLISION_COLLTEST_HPP
 
 #define MAXF 100000.0f
 

Modified: trunk/windstille/src/collision/stair_contact.hpp
===================================================================
--- trunk/windstille/src/collision/stair_contact.hpp	2009-02-10 20:40:14 UTC (rev 2454)
+++ trunk/windstille/src/collision/stair_contact.hpp	2009-02-11 15:54:35 UTC (rev 2455)
@@ -16,8 +16,8 @@
 **  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
-#ifndef HEADER_STAIR_CONTACT_HPP
-#define HEADER_STAIR_CONTACT_HPP
+#ifndef HEADER_WINDSTILLE_COLLISION_STAIR_CONTACT_HPP
+#define HEADER_WINDSTILLE_COLLISION_STAIR_CONTACT_HPP
 
 #include "contact.hpp"
 

Modified: trunk/windstille/src/color.hpp
===================================================================
--- trunk/windstille/src/color.hpp	2009-02-10 20:40:14 UTC (rev 2454)
+++ trunk/windstille/src/color.hpp	2009-02-11 15:54:35 UTC (rev 2455)
@@ -1,6 +1,24 @@
-#ifndef __COLOR_HPP__
-#define __COLOR_HPP__
+/*
+**  Windstille - A Sci-Fi Action-Adventure Game
+**  Copyright (C) 2000 Ingo Ruhnke <grumbel at gmx.de>
+**
+**  This program is free software: you can redistribute it and/or modify
+**  it under the terms of the GNU General Public License as published by
+**  the Free Software Foundation, either version 3 of the License, or
+**  (at your option) any later version.
+**  
+**  This program is distributed in the hope that it will be useful,
+**  but WITHOUT ANY WARRANTY; without even the implied warranty of
+**  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+**  GNU General Public License for more details.
+**  
+**  You should have received a copy of the GNU General Public License
+**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
+*/
 
+#ifndef HEADER_WINDSTILLE_COLOR_HPP
+#define HEADER_WINDSTILLE_COLOR_HPP
+
 class Color
 {
 public:
@@ -16,3 +34,4 @@
 
 #endif
 
+/* EOF */

Modified: trunk/windstille/src/console.hpp
===================================================================
--- trunk/windstille/src/console.hpp	2009-02-10 20:40:14 UTC (rev 2454)
+++ trunk/windstille/src/console.hpp	2009-02-11 15:54:35 UTC (rev 2455)
@@ -16,8 +16,8 @@
 **  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
-#ifndef CONSOLE_HXX
-#define CONSOLE_HXX
+#ifndef HEADER_WINDSTILLE_CONSOLE_HPP
+#define HEADER_WINDSTILLE_CONSOLE_HPP
 
 #include <vector>
 #include <sstream>

Modified: trunk/windstille/src/controller_def.hpp
===================================================================
--- trunk/windstille/src/controller_def.hpp	2009-02-10 20:40:14 UTC (rev 2454)
+++ trunk/windstille/src/controller_def.hpp	2009-02-11 15:54:35 UTC (rev 2455)
@@ -16,8 +16,8 @@
 **  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
-#ifndef HEADER_CONTROLLER_DEF_HXX
-#define HEADER_CONTROLLER_DEF_HXX
+#ifndef HEADER_WINDSTILLE_CONTROLLER_DEF_HPP
+#define HEADER_WINDSTILLE_CONTROLLER_DEF_HPP
 
 #include <map>
 #include <string>

Modified: trunk/windstille/src/controller_help_window.hpp
===================================================================
--- trunk/windstille/src/controller_help_window.hpp	2009-02-10 20:40:14 UTC (rev 2454)
+++ trunk/windstille/src/controller_help_window.hpp	2009-02-11 15:54:35 UTC (rev 2455)
@@ -16,8 +16,8 @@
 **  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
-#ifndef HEADER_CONTROLLER_HELP_WINDOW_HPP
-#define HEADER_CONTROLLER_HELP_WINDOW_HPP
+#ifndef HEADER_WINDSTILLE_CONTROLLER_HELP_WINDOW_HPP
+#define HEADER_WINDSTILLE_CONTROLLER_HELP_WINDOW_HPP
 
 #include "screen.hpp"
 #include <boost/shared_ptr.hpp>

Modified: trunk/windstille/src/conversation.hpp
===================================================================
--- trunk/windstille/src/conversation.hpp	2009-02-10 20:40:14 UTC (rev 2454)
+++ trunk/windstille/src/conversation.hpp	2009-02-11 15:54:35 UTC (rev 2455)
@@ -16,8 +16,8 @@
 **  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
-#ifndef HEADER_CONVERSATION_HXX
-#define HEADER_CONVERSATION_HXX
+#ifndef HEADER_WINDSTILLE_CONVERSATION_HPP
+#define HEADER_WINDSTILLE_CONVERSATION_HPP
 
 #include <vector>
 #include <string>

Modified: trunk/windstille/src/dialog_manager.hpp
===================================================================
--- trunk/windstille/src/dialog_manager.hpp	2009-02-10 20:40:14 UTC (rev 2454)
+++ trunk/windstille/src/dialog_manager.hpp	2009-02-11 15:54:35 UTC (rev 2455)
@@ -16,8 +16,8 @@
 **  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
-#ifndef HEADER_DIALOG_MANAGER_HXX
-#define HEADER_DIALOG_MANAGER_HXX
+#ifndef HEADER_WINDSTILLE_DIALOG_MANAGER_HPP
+#define HEADER_WINDSTILLE_DIALOG_MANAGER_HPP
 
 #include <vector>
 #include <string>

Modified: trunk/windstille/src/display/display.hpp
===================================================================
--- trunk/windstille/src/display/display.hpp	2009-02-10 20:40:14 UTC (rev 2454)
+++ trunk/windstille/src/display/display.hpp	2009-02-11 15:54:35 UTC (rev 2455)
@@ -16,8 +16,8 @@
 **  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
-#ifndef HEADER_DISPLAY_DISPLAY_HPP
-#define HEADER_DISPLAY_DISPLAY_HPP
+#ifndef HEADER_WINDSTILLE_COLLISION_DISPLAY_DISPLAY_HPP
+#define HEADER_WINDSTILLE_COLLISION_DISPLAY_DISPLAY_HPP
 
 #include <vector>
 #include <SDL.h>

Modified: trunk/windstille/src/display/drawing_context.hpp
===================================================================
--- trunk/windstille/src/display/drawing_context.hpp	2009-02-10 20:40:14 UTC (rev 2454)
+++ trunk/windstille/src/display/drawing_context.hpp	2009-02-11 15:54:35 UTC (rev 2455)
@@ -16,8 +16,8 @@
 **  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
-#ifndef HEADER_DRAWING_CONTEXT_HXX
-#define HEADER_DRAWING_CONTEXT_HXX
+#ifndef HEADER_WINDSTILLE_DISPLAY_DRAWING_CONTEXT_HPP
+#define HEADER_WINDSTILLE_DISPLAY_DRAWING_CONTEXT_HPP
 
 #include "math/vector.hpp"
 #include "math/matrix.hpp"

Modified: trunk/windstille/src/display/drawing_request.hpp
===================================================================
--- trunk/windstille/src/display/drawing_request.hpp	2009-02-10 20:40:14 UTC (rev 2454)
+++ trunk/windstille/src/display/drawing_request.hpp	2009-02-11 15:54:35 UTC (rev 2455)
@@ -16,8 +16,8 @@
 **  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
-#ifndef HEADER_DRAWING_REQUEST_HXX
-#define HEADER_DRAWING_REQUEST_HXX
+#ifndef HEADER_WINDSTILLE_DISPLAY_DRAWING_REQUEST_HPP
+#define HEADER_WINDSTILLE_DISPLAY_DRAWING_REQUEST_HPP
 
 #include "math/vector.hpp"
 #include "math/rect.hpp"

Modified: trunk/windstille/src/display/framebuffer.hpp
===================================================================
--- trunk/windstille/src/display/framebuffer.hpp	2009-02-10 20:40:14 UTC (rev 2454)
+++ trunk/windstille/src/display/framebuffer.hpp	2009-02-11 15:54:35 UTC (rev 2455)
@@ -16,8 +16,8 @@
 **  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
-#ifndef HEADER_FRAMEBUFFER_HPP
-#define HEADER_FRAMEBUFFER_HPP
+#ifndef HEADER_WINDSTILLE_DISPLAY_FRAMEBUFFER_HPP
+#define HEADER_WINDSTILLE_DISPLAY_FRAMEBUFFER_HPP
 
 #include "texture.hpp"
 

Modified: trunk/windstille/src/display/opengl_state.hpp
===================================================================
--- trunk/windstille/src/display/opengl_state.hpp	2009-02-10 20:40:14 UTC (rev 2454)
+++ trunk/windstille/src/display/opengl_state.hpp	2009-02-11 15:54:35 UTC (rev 2455)
@@ -16,8 +16,8 @@
 **  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
-#ifndef HEADER_DISPLAY_OPENGL_STATE_HPP
-#define HEADER_DISPLAY_OPENGL_STATE_HPP
+#ifndef HEADER_WINDSTILLE_DISPLAY_OPENGL_STATE_HPP
+#define HEADER_WINDSTILLE_DISPLAY_OPENGL_STATE_HPP
 
 #include <GL/glew.h>
 #include <GL/gl.h>

Modified: trunk/windstille/src/display/render_buffer.hpp
===================================================================
--- trunk/windstille/src/display/render_buffer.hpp	2009-02-10 20:40:14 UTC (rev 2454)
+++ trunk/windstille/src/display/render_buffer.hpp	2009-02-11 15:54:35 UTC (rev 2455)
@@ -16,8 +16,8 @@
 **  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
-#ifndef HEADER_RENDER_BUFFER_HPP
-#define HEADER_RENDER_BUFFER_HPP
+#ifndef HEADER_WINDSTILLE_DISPLAY_RENDER_BUFFER_HPP
+#define HEADER_WINDSTILLE_DISPLAY_RENDER_BUFFER_HPP
 
 #include <GL/gl.h>
 #include <boost/shared_ptr.hpp>

Modified: trunk/windstille/src/display/scene_context.hpp
===================================================================
--- trunk/windstille/src/display/scene_context.hpp	2009-02-10 20:40:14 UTC (rev 2454)
+++ trunk/windstille/src/display/scene_context.hpp	2009-02-11 15:54:35 UTC (rev 2455)
@@ -16,8 +16,8 @@
 **  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
-#ifndef HEADER_SCENE_CONTEXT_HXX
-#define HEADER_SCENE_CONTEXT_HXX
+#ifndef HEADER_WINDSTILLE_DISPLAY_SCENE_CONTEXT_HPP
+#define HEADER_WINDSTILLE_DISPLAY_SCENE_CONTEXT_HPP
 
 #include "drawing_context.hpp"
 

Modified: trunk/windstille/src/display/shader_object.hpp
===================================================================
--- trunk/windstille/src/display/shader_object.hpp	2009-02-10 20:40:14 UTC (rev 2454)
+++ trunk/windstille/src/display/shader_object.hpp	2009-02-11 15:54:35 UTC (rev 2455)
@@ -16,8 +16,8 @@
 **  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
-#ifndef HEADER_SHADER_OBJECT_HPP
-#define HEADER_SHADER_OBJECT_HPP
+#ifndef HEADER_WINDSTILLE_DISPLAY_SHADER_OBJECT_HPP
+#define HEADER_WINDSTILLE_DISPLAY_SHADER_OBJECT_HPP
 
 #include <GL/glew.h>
 #include <GL/gl.h>

Modified: trunk/windstille/src/display/shader_program.hpp
===================================================================
--- trunk/windstille/src/display/shader_program.hpp	2009-02-10 20:40:14 UTC (rev 2454)
+++ trunk/windstille/src/display/shader_program.hpp	2009-02-11 15:54:35 UTC (rev 2455)
@@ -16,8 +16,8 @@
 **  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
-#ifndef HEADER_SHADER_PROGRAM_HPP
-#define HEADER_SHADER_PROGRAM_HPP
+#ifndef HEADER_WINDSTILLE_DISPLAY_SHADER_PROGRAM_HPP
+#define HEADER_WINDSTILLE_DISPLAY_SHADER_PROGRAM_HPP
 
 #include <GL/glew.h>
 #include <GL/gl.h>

Modified: trunk/windstille/src/display/surface.hpp
===================================================================
--- trunk/windstille/src/display/surface.hpp	2009-02-10 20:40:14 UTC (rev 2454)
+++ trunk/windstille/src/display/surface.hpp	2009-02-11 15:54:35 UTC (rev 2455)
@@ -16,8 +16,8 @@
 **  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
-#ifndef HEADER_SURFACE_HPP
-#define HEADER_SURFACE_HPP
+#ifndef HEADER_WINDSTILLE_DISPLAY_SURFACE_HPP
+#define HEADER_WINDSTILLE_DISPLAY_SURFACE_HPP
 
 #include <string>
 #include <boost/shared_ptr.hpp>

Modified: trunk/windstille/src/display/surface_drawing_parameters.hpp
===================================================================
--- trunk/windstille/src/display/surface_drawing_parameters.hpp	2009-02-10 20:40:14 UTC (rev 2454)
+++ trunk/windstille/src/display/surface_drawing_parameters.hpp	2009-02-11 15:54:35 UTC (rev 2455)
@@ -16,8 +16,8 @@
 **  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
-#ifndef HEADER_GLUTIL_SURFACE_DRAWING_PARAMETERS_HPP
-#define HEADER_GLUTIL_SURFACE_DRAWING_PARAMETERS_HPP
+#ifndef HEADER_WINDSTILLE_DISPLAY_SURFACE_DRAWING_PARAMETERS_HPP
+#define HEADER_WINDSTILLE_DISPLAY_SURFACE_DRAWING_PARAMETERS_HPP
 
 #include <GL/glew.h>
 #include <GL/gl.h>

Modified: trunk/windstille/src/display/surface_manager.cpp
===================================================================
--- trunk/windstille/src/display/surface_manager.cpp	2009-02-10 20:40:14 UTC (rev 2454)
+++ trunk/windstille/src/display/surface_manager.cpp	2009-02-11 15:54:35 UTC (rev 2455)
@@ -1,3 +1,20 @@
+/*
+**  Windstille - A Sci-Fi Action-Adventure Game
+**  Copyright (C) 2005 Matthias Braun <matze at braunis.de>
+**
+**  This program is free software: you can redistribute it and/or modify
+**  it under the terms of the GNU General Public License as published by
+**  the Free Software Foundation, either version 3 of the License, or
+**  (at your option) any later version.
+**  
+**  This program is distributed in the hope that it will be useful,
+**  but WITHOUT ANY WARRANTY; without even the implied warranty of
+**  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+**  GNU General Public License for more details.
+**  
+**  You should have received a copy of the GNU General Public License
+**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
+*/
 
 #include "surface_manager.hpp"
 

Modified: trunk/windstille/src/display/surface_manager.hpp
===================================================================
--- trunk/windstille/src/display/surface_manager.hpp	2009-02-10 20:40:14 UTC (rev 2454)
+++ trunk/windstille/src/display/surface_manager.hpp	2009-02-11 15:54:35 UTC (rev 2455)
@@ -1,6 +1,24 @@
-#ifndef __SURFACE_MANAGER_H__
-#define __SURFACE_MANAGER_H__
+/*
+**  Windstille - A Sci-Fi Action-Adventure Game
+**  Copyright (C) 2005 Matthias Braun <matze at braunis.de>
+**
+**  This program is free software: you can redistribute it and/or modify
+**  it under the terms of the GNU General Public License as published by
+**  the Free Software Foundation, either version 3 of the License, or
+**  (at your option) any later version.
+**  
+**  This program is distributed in the hope that it will be useful,
+**  but WITHOUT ANY WARRANTY; without even the implied warranty of
+**  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+**  GNU General Public License for more details.
+**  
+**  You should have received a copy of the GNU General Public License
+**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
+*/
 
+#ifndef HEADER_WINDSTILLE_DISPLAY_SURFACE_MANAGER_HPP
+#define HEADER_WINDSTILLE_DISPLAY_SURFACE_MANAGER_HPP
+
 #include <string>
 #include <vector>
 #include <map>
@@ -45,3 +63,4 @@
 
 #endif
 
+/* EOF */

Modified: trunk/windstille/src/display/texture.hpp
===================================================================
--- trunk/windstille/src/display/texture.hpp	2009-02-10 20:40:14 UTC (rev 2454)
+++ trunk/windstille/src/display/texture.hpp	2009-02-11 15:54:35 UTC (rev 2455)
@@ -17,8 +17,8 @@
 **  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
-#ifndef __TEXTURE_HPP__
-#define __TEXTURE_HPP__
+#ifndef HEADER_WINDSTILLE_DISPLAY_TEXTURE_HPP
+#define HEADER_WINDSTILLE_DISPLAY_TEXTURE_HPP
 
 #include <string>
 #include <GL/glew.h>

Modified: trunk/windstille/src/display/texture_manager.cpp
===================================================================
--- trunk/windstille/src/display/texture_manager.cpp	2009-02-10 20:40:14 UTC (rev 2454)
+++ trunk/windstille/src/display/texture_manager.cpp	2009-02-11 15:54:35 UTC (rev 2455)
@@ -1,3 +1,20 @@
+/*
+**  Windstille - A Sci-Fi Action-Adventure Game
+**  Copyright (C) 2005 Matthias Braun <matze at braunis.de>
+**
+**  This program is free software: you can redistribute it and/or modify
+**  it under the terms of the GNU General Public License as published by
+**  the Free Software Foundation, either version 3 of the License, or
+**  (at your option) any later version.
+**  
+**  This program is distributed in the hope that it will be useful,
+**  but WITHOUT ANY WARRANTY; without even the implied warranty of
+**  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+**  GNU General Public License for more details.
+**  
+**  You should have received a copy of the GNU General Public License
+**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
+*/
 
 #include "texture_manager.hpp"
 

Modified: trunk/windstille/src/display/texture_manager.hpp
===================================================================
--- trunk/windstille/src/display/texture_manager.hpp	2009-02-10 20:40:14 UTC (rev 2454)
+++ trunk/windstille/src/display/texture_manager.hpp	2009-02-11 15:54:35 UTC (rev 2455)
@@ -1,6 +1,24 @@
-#ifndef __TEXTURE_MANAGER_H__
-#define __TEXTURE_MANAGER_H__
+/*
+**  Windstille - A Sci-Fi Action-Adventure Game
+**  Copyright (C) 2000,2005 Ingo Ruhnke <grumbel at gmx.de>
+**
+**  This program is free software: you can redistribute it and/or modify
+**  it under the terms of the GNU General Public License as published by
+**  the Free Software Foundation, either version 3 of the License, or
+**  (at your option) any later version.
+**  
+**  This program is distributed in the hope that it will be useful,
+**  but WITHOUT ANY WARRANTY; without even the implied warranty of
+**  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+**  GNU General Public License for more details.
+**  
+**  You should have received a copy of the GNU General Public License
+**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
+*/
 
+#ifndef HEADER_WINDSTILLE_TEXTURE_MANAGER_HPP
+#define HEADER_WINDSTILLE_TEXTURE_MANAGER_HPP
+
 #include <string>
 #include <map>
 #include <SDL.h>
@@ -37,3 +55,4 @@
 
 #endif
 
+/* EOF */

Modified: trunk/windstille/src/display/vertex_array_drawing_request.hpp
===================================================================
--- trunk/windstille/src/display/vertex_array_drawing_request.hpp	2009-02-10 20:40:14 UTC (rev 2454)
+++ trunk/windstille/src/display/vertex_array_drawing_request.hpp	2009-02-11 15:54:35 UTC (rev 2455)
@@ -16,8 +16,8 @@
 **  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
-#ifndef HEADER_VERTEX_ARRAY_DRAWING_REQUEST_HXX
-#define HEADER_VERTEX_ARRAY_DRAWING_REQUEST_HXX
+#ifndef HEADER_WINDSTILLE_DISPLAY_VERTEX_ARRAY_DRAWING_REQUEST_HPP
+#define HEADER_WINDSTILLE_DISPLAY_VERTEX_ARRAY_DRAWING_REQUEST_HPP
 
 #include <vector>
 #include "color.hpp"

Modified: trunk/windstille/src/elevator.hpp
===================================================================
--- trunk/windstille/src/elevator.hpp	2009-02-10 20:40:14 UTC (rev 2454)
+++ trunk/windstille/src/elevator.hpp	2009-02-11 15:54:35 UTC (rev 2455)
@@ -16,8 +16,8 @@
 **  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
-#ifndef HEADER_ELEVATOR_HXX
-#define HEADER_ELEVATOR_HXX
+#ifndef HEADER_WINDSTILLE_ELEVATOR_HPP
+#define HEADER_WINDSTILLE_ELEVATOR_HPP
 
 #include "entity.hpp"
 #include "sprite2d/sprite.hpp"

Modified: trunk/windstille/src/energy_bar.hpp
===================================================================
--- trunk/windstille/src/energy_bar.hpp	2009-02-10 20:40:14 UTC (rev 2454)
+++ trunk/windstille/src/energy_bar.hpp	2009-02-11 15:54:35 UTC (rev 2455)
@@ -16,8 +16,8 @@
 **  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
-#ifndef HEADER_ENERGYBAR_HXX
-#define HEADER_ENERGYBAR_HXX
+#ifndef HEADER_WINDSTILLE_ENERGYBAR_HPP
+#define HEADER_WINDSTILLE_ENERGYBAR_HPP
 
 #include "screen.hpp"
 #include "sprite2d/sprite.hpp"

Modified: trunk/windstille/src/entity.hpp
===================================================================
--- trunk/windstille/src/entity.hpp	2009-02-10 20:40:14 UTC (rev 2454)
+++ trunk/windstille/src/entity.hpp	2009-02-11 15:54:35 UTC (rev 2455)
@@ -16,8 +16,8 @@
 **  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
-#ifndef HEADER_ENTITY_HXX
-#define HEADER_ENTITY_HXX
+#ifndef HEADER_WINDSTILLE_ENTITY_HPP
+#define HEADER_WINDSTILLE_ENTITY_HPP
 
 #include <boost/signal.hpp>
 #include "math/vector.hpp"

Modified: trunk/windstille/src/field.hpp
===================================================================
--- trunk/windstille/src/field.hpp	2009-02-10 20:40:14 UTC (rev 2454)
+++ trunk/windstille/src/field.hpp	2009-02-11 15:54:35 UTC (rev 2455)
@@ -16,8 +16,8 @@
 **  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
-#ifndef FIELD_HXX
-#define FIELD_HXX
+#ifndef HEADER_WINDSTILLE_FIELD_HPP
+#define HEADER_WINDSTILLE_FIELD_HPP
 
 #include <vector>
 #include <assert.h>

Modified: trunk/windstille/src/file_reader.cpp
===================================================================
--- trunk/windstille/src/file_reader.cpp	2009-02-10 20:40:14 UTC (rev 2454)
+++ trunk/windstille/src/file_reader.cpp	2009-02-11 15:54:35 UTC (rev 2455)
@@ -1,5 +1,3 @@
-//
-//
 //  Pingus - A free Lemmings clone
 //  Copyright (C) 2002 Ingo Ruhnke <grumbel at gmx.de>
 //

Modified: trunk/windstille/src/file_reader.hpp
===================================================================
--- trunk/windstille/src/file_reader.hpp	2009-02-10 20:40:14 UTC (rev 2454)
+++ trunk/windstille/src/file_reader.hpp	2009-02-11 15:54:35 UTC (rev 2455)
@@ -1,5 +1,3 @@
-//
-//
 //  Pingus - A free Lemmings clone
 //  Copyright (C) 2002 Ingo Ruhnke <grumbel at gmx.de>
 //
@@ -17,8 +15,8 @@
 //  along with this program; if not, write to the Free Software
 //  Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA.
 
-#ifndef HEADER_PINGUS_FILE_READER_HXX
-#define HEADER_PINGUS_FILE_READER_HXX
+#ifndef HEADER_PINGUS_FILE_READER_HPP
+#define HEADER_PINGUS_FILE_READER_HPP
 
 #include <string>
 #include <vector>

Modified: trunk/windstille/src/file_reader_impl.hpp
===================================================================
--- trunk/windstille/src/file_reader_impl.hpp	2009-02-10 20:40:14 UTC (rev 2454)
+++ trunk/windstille/src/file_reader_impl.hpp	2009-02-11 15:54:35 UTC (rev 2455)
@@ -1,5 +1,3 @@
-//
-// 
 //  Pingus - A free Lemmings clone
 //  Copyright (C) 2002 Ingo Ruhnke <grumbel at gmx.de>
 //
@@ -17,8 +15,8 @@
 //  along with this program; if not, write to the Free Software
 //  Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA.
 
-#ifndef HEADER_FILE_READER_IMPL_HXX
-#define HEADER_FILE_READER_IMPL_HXX
+#ifndef HEADER_FILE_READER_IMPL_HPP
+#define HEADER_FILE_READER_IMPL_HPP
 
 #include <vector>
 #include <string>

Modified: trunk/windstille/src/font/border_font_effect.hpp
===================================================================
--- trunk/windstille/src/font/border_font_effect.hpp	2009-02-10 20:40:14 UTC (rev 2454)
+++ trunk/windstille/src/font/border_font_effect.hpp	2009-02-11 15:54:35 UTC (rev 2455)
@@ -16,8 +16,8 @@
 **  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
-#ifndef HEADER_WINDSTILLE_BORDER_FONT_EFFECT_HPP
-#define HEADER_WINDSTILLE_BORDER_FONT_EFFECT_HPP
+#ifndef HEADER_WINDSTILLE_FONT_BORDER_FONT_EFFECT_HPP
+#define HEADER_WINDSTILLE_FONT_BORDER_FONT_EFFECT_HPP
 
 #include "font_effect.hpp"
 

Modified: trunk/windstille/src/font/font_effect.hpp
===================================================================
--- trunk/windstille/src/font/font_effect.hpp	2009-02-10 20:40:14 UTC (rev 2454)
+++ trunk/windstille/src/font/font_effect.hpp	2009-02-11 15:54:35 UTC (rev 2455)
@@ -16,8 +16,8 @@
 **  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
-#ifndef HEADER_WINDSTILLE_FONT_EFFECT_HPP
-#define HEADER_WINDSTILLE_FONT_EFFECT_HPP
+#ifndef HEADER_WINDSTILLE_FONT_FONT_EFFECT_HPP
+#define HEADER_WINDSTILLE_FONT_FONT_EFFECT_HPP
 
 #include <SDL.h>
 #include <ft2build.h>

Modified: trunk/windstille/src/font/fonts.hpp
===================================================================
--- trunk/windstille/src/font/fonts.hpp	2009-02-10 20:40:14 UTC (rev 2454)
+++ trunk/windstille/src/font/fonts.hpp	2009-02-11 15:54:35 UTC (rev 2455)
@@ -16,8 +16,8 @@
 **  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
-#ifndef HEADER_FONTS_HXX
-#define HEADER_FONTS_HXX
+#ifndef HEADER_WINDSTILLE_FONT_FONTS_HPP
+#define HEADER_WINDSTILLE_FONT_FONTS_HPP
 
 #include "ttf_font.hpp"
 

Modified: trunk/windstille/src/font/ttf_font.hpp
===================================================================
--- trunk/windstille/src/font/ttf_font.hpp	2009-02-10 20:40:14 UTC (rev 2454)
+++ trunk/windstille/src/font/ttf_font.hpp	2009-02-11 15:54:35 UTC (rev 2455)
@@ -16,8 +16,8 @@
 **  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
-#ifndef HEADER_TTF_FONT_HXX
-#define HEADER_TTF_FONT_HXX
+#ifndef HEADER_WINDSTILLE_FONT_TTF_FONT_HPP
+#define HEADER_WINDSTILLE_FONT_TTF_FONT_HPP
 
 #include <string>
 #include <GL/glew.h>

Modified: trunk/windstille/src/game_object.hpp
===================================================================
--- trunk/windstille/src/game_object.hpp	2009-02-10 20:40:14 UTC (rev 2454)
+++ trunk/windstille/src/game_object.hpp	2009-02-11 15:54:35 UTC (rev 2455)
@@ -16,8 +16,8 @@
 **  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
-#ifndef WINDSTILLE_GAME_OBJECT_HXX
-#define WINDSTILLE_GAME_OBJECT_HXX
+#ifndef HEADER_WINDSTILLE_GAME_OBJECT_HPP
+#define HEADER_WINDSTILLE_GAME_OBJECT_HPP
 
 #include <string>
 #include "file_reader.hpp"

Modified: trunk/windstille/src/game_session.hpp
===================================================================
--- trunk/windstille/src/game_session.hpp	2009-02-10 20:40:14 UTC (rev 2454)
+++ trunk/windstille/src/game_session.hpp	2009-02-11 15:54:35 UTC (rev 2455)
@@ -16,8 +16,8 @@
 **  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
-#ifndef GAME_SESSION_HXX
-#define GAME_SESSION_HXX
+#ifndef HEADER_WINDSTILLE_GAME_SESSION_HPP
+#define HEADER_WINDSTILLE_GAME_SESSION_HPP
 
 #include <string>
 #include <squirrel.h>

Modified: trunk/windstille/src/geometry_test.hpp
===================================================================
--- trunk/windstille/src/geometry_test.hpp	2009-02-10 20:40:14 UTC (rev 2454)
+++ trunk/windstille/src/geometry_test.hpp	2009-02-11 15:54:35 UTC (rev 2455)
@@ -16,8 +16,8 @@
 **  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
-#ifndef HEADER_GEOMETRY_TEST_HPP
-#define HEADER_GEOMETRY_TEST_HPP
+#ifndef HEADER_WINDSTILLE_GEOMETRY_TEST_HPP
+#define HEADER_WINDSTILLE_GEOMETRY_TEST_HPP
 
 #include "screen.hpp"
 #include "math/vector.hpp"

Modified: trunk/windstille/src/globals.hpp
===================================================================
--- trunk/windstille/src/globals.hpp	2009-02-10 20:40:14 UTC (rev 2454)
+++ trunk/windstille/src/globals.hpp	2009-02-11 15:54:35 UTC (rev 2455)
@@ -16,8 +16,8 @@
 **  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
-#ifndef GLOBALS_HXX
-#define GLOBALS_HXX
+#ifndef HEADER_WINDSTILLE_GLOBALS_HPP
+#define HEADER_WINDSTILLE_GLOBALS_HPP
 
 #include <string>
 

Modified: trunk/windstille/src/graphic_context_state.hpp
===================================================================
--- trunk/windstille/src/graphic_context_state.hpp	2009-02-10 20:40:14 UTC (rev 2454)
+++ trunk/windstille/src/graphic_context_state.hpp	2009-02-11 15:54:35 UTC (rev 2455)
@@ -15,8 +15,8 @@
 //  along with this program; if not, write to the Free Software
 //  Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA.
 
-#ifndef HEADER_GRAPHIC_CONTEXT_STATE_HXX
-#define HEADER_GRAPHIC_CONTEXT_STATE_HXX
+#ifndef HEADER_WINDSTILLE_GRAPHIC_CONTEXT_STATE_HPP
+#define HEADER_WINDSTILLE_GRAPHIC_CONTEXT_STATE_HPP
 
 #include "math/rect.hpp"
 #include "math/vector.hpp"

Modified: trunk/windstille/src/grenade.hpp
===================================================================
--- trunk/windstille/src/grenade.hpp	2009-02-10 20:40:14 UTC (rev 2454)
+++ trunk/windstille/src/grenade.hpp	2009-02-11 15:54:35 UTC (rev 2455)
@@ -15,8 +15,8 @@
 **  You should have received a copy of the GNU General Public License
 **  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
-#ifndef __GRENADE_HPP__
-#define __GRENADE_HPP__
+#ifndef HEADER_WINDSTILLE_GRENADE_HPP
+#define HEADER_WINDSTILLE_GRENADE_HPP
 
 #include "entity.hpp"
 #include "physics.hpp"

Modified: trunk/windstille/src/gui/component_factory.hpp
===================================================================
--- trunk/windstille/src/gui/component_factory.hpp	2009-02-10 20:40:14 UTC (rev 2454)
+++ trunk/windstille/src/gui/component_factory.hpp	2009-02-11 15:54:35 UTC (rev 2455)
@@ -16,8 +16,8 @@
 **  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
-#ifndef HEADER_COMPONENT_FACTORY_HPP
-#define HEADER_COMPONENT_FACTORY_HPP
+#ifndef HEADER_WINDSTILLE_GUI_COMPONENT_FACTORY_HPP
+#define HEADER_WINDSTILLE_GUI_COMPONENT_FACTORY_HPP
 
 #include <string>
 

Modified: trunk/windstille/src/gui/group_component.hpp
===================================================================
--- trunk/windstille/src/gui/group_component.hpp	2009-02-10 20:40:14 UTC (rev 2454)
+++ trunk/windstille/src/gui/group_component.hpp	2009-02-11 15:54:35 UTC (rev 2455)
@@ -16,8 +16,8 @@
 **  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
-#ifndef HEADER_GROUP_COMPONENT_HPP
-#define HEADER_GROUP_COMPONENT_HPP
+#ifndef HEADER_WINDSTILLE_GUI_GROUP_COMPONENT_HPP
+#define HEADER_WINDSTILLE_GUI_GROUP_COMPONENT_HPP
 
 #include <string>
 #include "component.hpp"

Modified: trunk/windstille/src/gui/label.hpp
===================================================================
--- trunk/windstille/src/gui/label.hpp	2009-02-10 20:40:14 UTC (rev 2454)
+++ trunk/windstille/src/gui/label.hpp	2009-02-11 15:54:35 UTC (rev 2455)
@@ -16,8 +16,8 @@
 **  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
-#ifndef HEADER_LABEL_HPP
-#define HEADER_LABEL_HPP
+#ifndef HEADER_WINDSTILLE_GUI_LABEL_HPP
+#define HEADER_WINDSTILLE_GUI_LABEL_HPP
 
 #include <string>
 #include "component.hpp"

Modified: trunk/windstille/src/gui/slider.hpp
===================================================================
--- trunk/windstille/src/gui/slider.hpp	2009-02-10 20:40:14 UTC (rev 2454)
+++ trunk/windstille/src/gui/slider.hpp	2009-02-11 15:54:35 UTC (rev 2455)
@@ -16,8 +16,8 @@
 **  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
-#ifndef HEADER_SLIDER_HPP
-#define HEADER_SLIDER_HPP
+#ifndef HEADER_WINDSTILLE_GUI_SLIDER_HPP
+#define HEADER_WINDSTILLE_GUI_SLIDER_HPP
 
 #include "component.hpp"
 

Modified: trunk/windstille/src/handle.hpp
===================================================================
--- trunk/windstille/src/handle.hpp	2009-02-10 20:40:14 UTC (rev 2454)
+++ trunk/windstille/src/handle.hpp	2009-02-11 15:54:35 UTC (rev 2455)
@@ -16,8 +16,8 @@
 **  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
-#ifndef HEADER_HANDLE_HPP
-#define HEADER_HANDLE_HPP
+#ifndef HEADER_WINDSTILLE_HANDLE_HPP
+#define HEADER_WINDSTILLE_HANDLE_HPP
 
 #include <vector>
 

Modified: trunk/windstille/src/input/controller.hpp
===================================================================
--- trunk/windstille/src/input/controller.hpp	2009-02-10 20:40:14 UTC (rev 2454)
+++ trunk/windstille/src/input/controller.hpp	2009-02-11 15:54:35 UTC (rev 2455)
@@ -16,8 +16,8 @@
 **  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
-#ifndef HEADER_CONTROLLER_HXX
-#define HEADER_CONTROLLER_HXX
+#ifndef HEADER_WINDSTILLE_INPUT_CONTROLLER_HPP
+#define HEADER_WINDSTILLE_INPUT_CONTROLLER_HPP
 
 #include <vector>
 #include "controller_def.hpp"

Modified: trunk/windstille/src/input/controller_description.hpp
===================================================================
--- trunk/windstille/src/input/controller_description.hpp	2009-02-10 20:40:14 UTC (rev 2454)
+++ trunk/windstille/src/input/controller_description.hpp	2009-02-11 15:54:35 UTC (rev 2455)
@@ -16,8 +16,8 @@
 **  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
-#ifndef HEADER_CONTROLLER_DESCRIPTION_HPP
-#define HEADER_CONTROLLER_DESCRIPTION_HPP
+#ifndef HEADER_WINDSTILLE_INPUT_CONTROLLER_DESCRIPTION_HPP
+#define HEADER_WINDSTILLE_INPUT_CONTROLLER_DESCRIPTION_HPP
 
 #include <map>
 #include <string>

Modified: trunk/windstille/src/input/input_configurator.hpp
===================================================================
--- trunk/windstille/src/input/input_configurator.hpp	2009-02-10 20:40:14 UTC (rev 2454)
+++ trunk/windstille/src/input/input_configurator.hpp	2009-02-11 15:54:35 UTC (rev 2455)
@@ -16,8 +16,8 @@
 **  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
-#ifndef HEADER_INPUT_CONFIGURATOR_HPP
-#define HEADER_INPUT_CONFIGURATOR_HPP
+#ifndef HEADER_WINDSTILLE_INPUT_INPUT_CONFIGURATOR_HPP
+#define HEADER_WINDSTILLE_INPUT_INPUT_CONFIGURATOR_HPP
 
 #include <sstream>
 #include "screen.hpp"

Modified: trunk/windstille/src/input/input_event.hpp
===================================================================
--- trunk/windstille/src/input/input_event.hpp	2009-02-10 20:40:14 UTC (rev 2454)
+++ trunk/windstille/src/input/input_event.hpp	2009-02-11 15:54:35 UTC (rev 2455)
@@ -16,8 +16,8 @@
 **  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
-#ifndef HEADER_INPUT_EVENT_HXX
-#define HEADER_INPUT_EVENT_HXX
+#ifndef HEADER_WINDSTILLE_INPUT_INPUT_EVENT_HPP
+#define HEADER_WINDSTILLE_INPUT_INPUT_EVENT_HPP
 
 #include <vector>
 

Modified: trunk/windstille/src/input/input_manager.hpp
===================================================================
--- trunk/windstille/src/input/input_manager.hpp	2009-02-10 20:40:14 UTC (rev 2454)
+++ trunk/windstille/src/input/input_manager.hpp	2009-02-11 15:54:35 UTC (rev 2455)
@@ -16,8 +16,8 @@
 **  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
-#ifndef HEADER_INPUT_MANAGER_HXX
-#define HEADER_INPUT_MANAGER_HXX
+#ifndef HEADER_WINDSTILLE_INPUT_INPUT_MANAGER_HPP
+#define HEADER_WINDSTILLE_INPUT_INPUT_MANAGER_HPP
 
 #include <string>
 #include <vector>

Modified: trunk/windstille/src/input/input_manager_impl.hpp
===================================================================
--- trunk/windstille/src/input/input_manager_impl.hpp	2009-02-10 20:40:14 UTC (rev 2454)
+++ trunk/windstille/src/input/input_manager_impl.hpp	2009-02-11 15:54:35 UTC (rev 2455)
@@ -16,8 +16,8 @@
 **  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
-#ifndef HEADER_INPUT_MANAGER_IMPL_HXX
-#define HEADER_INPUT_MANAGER_IMPL_HXX
+#ifndef HEADER_WINDSTILLE_INPUT_INPUT_MANAGER_IMPL_HPP
+#define HEADER_WINDSTILLE_INPUT_INPUT_MANAGER_IMPL_HPP
 
 #include "controller.hpp"
 #include "input_event.hpp"

Modified: trunk/windstille/src/input/input_manager_sdl.hpp
===================================================================
--- trunk/windstille/src/input/input_manager_sdl.hpp	2009-02-10 20:40:14 UTC (rev 2454)
+++ trunk/windstille/src/input/input_manager_sdl.hpp	2009-02-11 15:54:35 UTC (rev 2455)
@@ -16,8 +16,8 @@
 **  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
-#ifndef HEADER_INPUT_MANAGER_SDL_HPP
-#define HEADER_INPUT_MANAGER_SDL_HPP
+#ifndef HEADER_WINDSTILLE_INPUT_INPUT_MANAGER_SDL_HPP
+#define HEADER_WINDSTILLE_INPUT_INPUT_MANAGER_SDL_HPP
 
 #include <SDL.h>
 #include <memory>

Modified: trunk/windstille/src/input/wiimote.hpp
===================================================================
--- trunk/windstille/src/input/wiimote.hpp	2009-02-10 20:40:14 UTC (rev 2454)
+++ trunk/windstille/src/input/wiimote.hpp	2009-02-11 15:54:35 UTC (rev 2455)
@@ -16,8 +16,8 @@
 **  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
-#ifndef HEADER_WIIMOTE_HPP
-#define HEADER_WIIMOTE_HPP
+#ifndef HEADER_WINDSTILLE_INPUT_WIIMOTE_HPP
+#define HEADER_WINDSTILLE_INPUT_WIIMOTE_HPP
 
 #ifdef HAVE_CWIID
 

Modified: trunk/windstille/src/math/line.hpp
===================================================================
--- trunk/windstille/src/math/line.hpp	2009-02-10 20:40:14 UTC (rev 2454)
+++ trunk/windstille/src/math/line.hpp	2009-02-11 15:54:35 UTC (rev 2455)
@@ -16,8 +16,8 @@
 **  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
-#ifndef HEADER_LINE_HPP
-#define HEADER_LINE_HPP
+#ifndef HEADER_WINDSTILLE_MATH_LINE_HPP
+#define HEADER_WINDSTILLE_MATH_LINE_HPP
 
 #include "math/vector.hpp"
 

Modified: trunk/windstille/src/math.hpp
===================================================================
--- trunk/windstille/src/math.hpp	2009-02-10 20:40:14 UTC (rev 2454)
+++ trunk/windstille/src/math.hpp	2009-02-11 15:54:35 UTC (rev 2455)
@@ -16,8 +16,8 @@
 **  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
-#ifndef HEADER_MATH_HXX
-#define HEADER_MATH_HXX
+#ifndef HEADER_WINDSTILLE_MATH_HPP
+#define HEADER_WINDSTILLE_MATH_HPP
 
 #include <assert.h>
 #include <math.h>

Modified: trunk/windstille/src/navigation/navigation_graph.hpp
===================================================================
--- trunk/windstille/src/navigation/navigation_graph.hpp	2009-02-10 20:40:14 UTC (rev 2454)
+++ trunk/windstille/src/navigation/navigation_graph.hpp	2009-02-11 15:54:35 UTC (rev 2455)
@@ -16,8 +16,8 @@
 **  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
-#ifndef HEADER_NAVIGATION_GRAPH_HPP
-#define HEADER_NAVIGATION_GRAPH_HPP
+#ifndef HEADER_WINDSTILLE_NAVIGATION_NAVIGATION_GRAPH_HPP
+#define HEADER_WINDSTILLE_NAVIGATION_NAVIGATION_GRAPH_HPP
 
 #include <iosfwd>
 #include <vector>

Modified: trunk/windstille/src/navigation/node.hpp
===================================================================
--- trunk/windstille/src/navigation/node.hpp	2009-02-10 20:40:14 UTC (rev 2454)
+++ trunk/windstille/src/navigation/node.hpp	2009-02-11 15:54:35 UTC (rev 2455)
@@ -16,8 +16,8 @@
 **  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
-#ifndef HEADER_NAVIGATION_NODE_HPP
-#define HEADER_NAVIGATION_NODE_HPP
+#ifndef HEADER_WINDSTILLE_NAVIGATION_NAVIGATION_NODE_HPP
+#define HEADER_WINDSTILLE_NAVIGATION_NAVIGATION_NODE_HPP
 
 #include <vector>
 #include "math/vector.hpp"

Modified: trunk/windstille/src/navigation/properties.hpp
===================================================================
--- trunk/windstille/src/navigation/properties.hpp	2009-02-10 20:40:14 UTC (rev 2454)
+++ trunk/windstille/src/navigation/properties.hpp	2009-02-11 15:54:35 UTC (rev 2455)
@@ -16,8 +16,8 @@
 **  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
-#ifndef HEADER_COLLISION_PROPERTIES_HPP
-#define HEADER_COLLISION_PROPERTIES_HPP
+#ifndef HEADER_WINDSTILLE_NAVIGATION_COLLISION_PROPERTIES_HPP
+#define HEADER_WINDSTILLE_NAVIGATION_COLLISION_PROPERTIES_HPP
 
 #include <inttypes.h>
 

Modified: trunk/windstille/src/navigation/segment.hpp
===================================================================
--- trunk/windstille/src/navigation/segment.hpp	2009-02-10 20:40:14 UTC (rev 2454)
+++ trunk/windstille/src/navigation/segment.hpp	2009-02-11 15:54:35 UTC (rev 2455)
@@ -16,8 +16,8 @@
 **  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
-#ifndef HEADER_SEGMENT_HPP
-#define HEADER_SEGMENT_HPP
+#ifndef HEADER_WINDSTILLE_NAVIGATION_SEGMENT_HPP
+#define HEADER_WINDSTILLE_NAVIGATION_SEGMENT_HPP
 
 #include "math/line.hpp"
 #include "math/vector.hpp"

Modified: trunk/windstille/src/navigation/segment_position.hpp
===================================================================
--- trunk/windstille/src/navigation/segment_position.hpp	2009-02-10 20:40:14 UTC (rev 2454)
+++ trunk/windstille/src/navigation/segment_position.hpp	2009-02-11 15:54:35 UTC (rev 2455)
@@ -16,8 +16,8 @@
 **  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
-#ifndef HEADER_CONNECTION_HPP
-#define HEADER_CONNECTION_HPP
+#ifndef HEADER_WINDSTILLE_NAVIGATION_CONNECTION_HPP
+#define HEADER_WINDSTILLE_NAVIGATION_CONNECTION_HPP
 
 #include "math/vector.hpp"
 

Modified: trunk/windstille/src/navigation_test.hpp
===================================================================
--- trunk/windstille/src/navigation_test.hpp	2009-02-10 20:40:14 UTC (rev 2454)
+++ trunk/windstille/src/navigation_test.hpp	2009-02-11 15:54:35 UTC (rev 2455)
@@ -16,8 +16,8 @@
 **  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
-#ifndef HEADER_NAVIGATION_TEST_HPP
-#define HEADER_NAVIGATION_TEST_HPP
+#ifndef HEADER_WINDSTILLE_NAVIGATION_TEST_HPP
+#define HEADER_WINDSTILLE_NAVIGATION_TEST_HPP
 
 #include "navigation/navigation_graph.hpp"
 #include "screen.hpp"

Modified: trunk/windstille/src/objects/background_gradient.hpp
===================================================================
--- trunk/windstille/src/objects/background_gradient.hpp	2009-02-10 20:40:14 UTC (rev 2454)
+++ trunk/windstille/src/objects/background_gradient.hpp	2009-02-11 15:54:35 UTC (rev 2455)
@@ -16,8 +16,8 @@
 **  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
-#ifndef HEADER_BACKGROUND_GRADIENT_HPP
-#define HEADER_BACKGROUND_GRADIENT_HPP
+#ifndef HEADER_WINDSTILLE_OBJECTS_BACKGROUND_GRADIENT_HPP
+#define HEADER_WINDSTILLE_OBJECTS_BACKGROUND_GRADIENT_HPP
 
 #include "game_object.hpp"
 

Modified: trunk/windstille/src/objects/bomb.hpp
===================================================================
--- trunk/windstille/src/objects/bomb.hpp	2009-02-10 20:40:14 UTC (rev 2454)
+++ trunk/windstille/src/objects/bomb.hpp	2009-02-11 15:54:35 UTC (rev 2455)
@@ -16,8 +16,8 @@
 **  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
-#ifndef HEADER_BOMB_HXX
-#define HEADER_BOMB_HXX
+#ifndef HEADER_WINDSTILLE_OBJECTS_BOMB_HPP
+#define HEADER_WINDSTILLE_OBJECTS_BOMB_HPP
 
 #include "sprite2d/sprite.hpp"
 #include "game_object.hpp"

Modified: trunk/windstille/src/objects/hedgehog.hpp
===================================================================
--- trunk/windstille/src/objects/hedgehog.hpp	2009-02-10 20:40:14 UTC (rev 2454)
+++ trunk/windstille/src/objects/hedgehog.hpp	2009-02-11 15:54:35 UTC (rev 2455)
@@ -16,8 +16,8 @@
 **  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
-#ifndef HEADER_HEDGEHOG_HXX
-#define HEADER_HEDGEHOG_HXX
+#ifndef HEADER_WINDSTILLE_OBJECTS_HEDGEHOG_HPP
+#define HEADER_WINDSTILLE_OBJECTS_HEDGEHOG_HPP
 
 #include "game_object.hpp"
 

Modified: trunk/windstille/src/objects/nightvision.hpp
===================================================================
--- trunk/windstille/src/objects/nightvision.hpp	2009-02-10 20:40:14 UTC (rev 2454)
+++ trunk/windstille/src/objects/nightvision.hpp	2009-02-11 15:54:35 UTC (rev 2455)
@@ -16,8 +16,8 @@
 **  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
-#ifndef HEADER_NIGHTVISION_HPP
-#define HEADER_NIGHTVISION_HPP
+#ifndef HEADER_WINDSTILLE_OBJECTS_NIGHTVISION_HPP
+#define HEADER_WINDSTILLE_OBJECTS_NIGHTVISION_HPP
 
 #include "display/texture.hpp"
 #include "sprite2d/sprite.hpp"

Modified: trunk/windstille/src/objects/shockwave.hpp
===================================================================
--- trunk/windstille/src/objects/shockwave.hpp	2009-02-10 20:40:14 UTC (rev 2454)
+++ trunk/windstille/src/objects/shockwave.hpp	2009-02-11 15:54:35 UTC (rev 2455)
@@ -16,8 +16,8 @@
 **  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
-#ifndef HEADER_SHOCKWAVE_HPP
-#define HEADER_SHOCKWAVE_HPP
+#ifndef HEADER_WINDSTILLE_OBJECTS_SHOCKWAVE_HPP
+#define HEADER_WINDSTILLE_OBJECTS_SHOCKWAVE_HPP
 
 #include "display/shader_program.hpp"
 #include "display/texture.hpp"

Modified: trunk/windstille/src/objects/spider_mine.hpp
===================================================================
--- trunk/windstille/src/objects/spider_mine.hpp	2009-02-10 20:40:14 UTC (rev 2454)
+++ trunk/windstille/src/objects/spider_mine.hpp	2009-02-11 15:54:35 UTC (rev 2455)
@@ -16,8 +16,8 @@
 **  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
-#ifndef HEADER_SPIDER_HPP
-#define HEADER_SPIDER_HPP
+#ifndef HEADER_WINDSTILLE_OBJECTS_SPIDER_HPP
+#define HEADER_WINDSTILLE_OBJECTS_SPIDER_HPP
 
 #include "entity.hpp"
 #include "sprite2d/sprite.hpp"

Modified: trunk/windstille/src/objects/swarm.hpp
===================================================================
--- trunk/windstille/src/objects/swarm.hpp	2009-02-10 20:40:14 UTC (rev 2454)
+++ trunk/windstille/src/objects/swarm.hpp	2009-02-11 15:54:35 UTC (rev 2455)
@@ -16,8 +16,8 @@
 **  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
-#ifndef HEADER_SWARM_HPP
-#define HEADER_SWARM_HPP
+#ifndef HEADER_WINDSTILLE_OBJECTS_SWARM_HPP
+#define HEADER_WINDSTILLE_OBJECTS_SWARM_HPP
 
 #include "entity.hpp"
 

Modified: trunk/windstille/src/objects/test_object.cpp
===================================================================
--- trunk/windstille/src/objects/test_object.cpp	2009-02-10 20:40:14 UTC (rev 2454)
+++ trunk/windstille/src/objects/test_object.cpp	2009-02-11 15:54:35 UTC (rev 2455)
@@ -1,3 +1,21 @@
+/*
+**  Windstille - A Sci-Fi Action-Adventure Game
+**  Copyright (C) 2005 Matthias Braun <matze at braunis.de>
+**
+**  This program is free software: you can redistribute it and/or modify
+**  it under the terms of the GNU General Public License as published by
+**  the Free Software Foundation, either version 3 of the License, or
+**  (at your option) any later version.
+**  
+**  This program is distributed in the hope that it will be useful,
+**  but WITHOUT ANY WARRANTY; without even the implied warranty of
+**  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+**  GNU General Public License for more details.
+**  
+**  You should have received a copy of the GNU General Public License
+**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
+*/
+
 #include <iostream>
 #include <stdexcept>
 #include <config.h>

Modified: trunk/windstille/src/objects/test_object.hpp
===================================================================
--- trunk/windstille/src/objects/test_object.hpp	2009-02-10 20:40:14 UTC (rev 2454)
+++ trunk/windstille/src/objects/test_object.hpp	2009-02-11 15:54:35 UTC (rev 2455)
@@ -1,6 +1,24 @@
-#ifndef __TEST_OBJECT_HPP__
-#define __TEST_OBJECT_HPP__
+/*
+**  Windstille - A Sci-Fi Action-Adventure Game
+**  Copyright (C) 2005 Matthias Braun <matze at braunis.de>
+**
+**  This program is free software: you can redistribute it and/or modify
+**  it under the terms of the GNU General Public License as published by
+**  the Free Software Foundation, either version 3 of the License, or
+**  (at your option) any later version.
+**  
+**  This program is distributed in the hope that it will be useful,
+**  but WITHOUT ANY WARRANTY; without even the implied warranty of
+**  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+**  GNU General Public License for more details.
+**  
+**  You should have received a copy of the GNU General Public License
+**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
+*/
 
+#ifndef HEADER_WINDSTILLE_OBJECTS_TEST_OBJECT_HPP
+#define HEADER_WINDSTILLE_OBJECTS_TEST_OBJECT_HPP
+
 #include <vector>
 #include "game_object.hpp"
 #include "sprite3d/sprite3d.hpp"
@@ -34,3 +52,4 @@
 
 #endif
 
+/* EOF */

Modified: trunk/windstille/src/objects/vrdummy.hpp
===================================================================
--- trunk/windstille/src/objects/vrdummy.hpp	2009-02-10 20:40:14 UTC (rev 2454)
+++ trunk/windstille/src/objects/vrdummy.hpp	2009-02-11 15:54:35 UTC (rev 2455)
@@ -16,8 +16,8 @@
 **  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
-#ifndef HEADER_BADYGUY_VRDUMMY_HPP
-#define HEADER_BADYGUY_VRDUMMY_HPP
+#ifndef HEADER_WINDSTILLE_OBJECTS_VRDUMMY_HPP
+#define HEADER_WINDSTILLE_OBJECTS_VRDUMMY_HPP
 
 #include "sprite3d/sprite3d.hpp"
 #include "sprite2d/sprite.hpp"

Modified: trunk/windstille/src/particle_viewer.hpp
===================================================================
--- trunk/windstille/src/particle_viewer.hpp	2009-02-10 20:40:14 UTC (rev 2454)
+++ trunk/windstille/src/particle_viewer.hpp	2009-02-11 15:54:35 UTC (rev 2455)
@@ -16,8 +16,8 @@
 **  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
-#ifndef HEADER_PARTICLE_VIEWER_HPP
-#define HEADER_PARTICLE_VIEWER_HPP
+#ifndef HEADER_WINDSTILLE_PARTICLE_VIEWER_HPP
+#define HEADER_WINDSTILLE_PARTICLE_VIEWER_HPP
 
 #include "screen.hpp"
 #include "sprite2d/sprite.hpp"

Modified: trunk/windstille/src/particles/deform_drawer.hpp
===================================================================
--- trunk/windstille/src/particles/deform_drawer.hpp	2009-02-10 20:40:14 UTC (rev 2454)
+++ trunk/windstille/src/particles/deform_drawer.hpp	2009-02-11 15:54:35 UTC (rev 2455)
@@ -16,8 +16,8 @@
 **  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
-#ifndef HEADER_DEFORM_DRAWER_HPP
-#define HEADER_DEFORM_DRAWER_HPP
+#ifndef HEADER_WINDSTILLE_PARTICLES_DEFORM_DRAWER_HPP
+#define HEADER_WINDSTILLE_PARTICLES_DEFORM_DRAWER_HPP
 
 #include "display/surface.hpp"
 #include "display/shader_program.hpp"

Modified: trunk/windstille/src/particles/drawer.hpp
===================================================================
--- trunk/windstille/src/particles/drawer.hpp	2009-02-10 20:40:14 UTC (rev 2454)
+++ trunk/windstille/src/particles/drawer.hpp	2009-02-11 15:54:35 UTC (rev 2455)
@@ -16,8 +16,8 @@
 **  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
-#ifndef HEADER_PARTICLES_DRAWER_HXX
-#define HEADER_PARTICLES_DRAWER_HXX
+#ifndef HEADER_WINDSTILLE_PARTICLES_DRAWER_HPP
+#define HEADER_WINDSTILLE_PARTICLES_DRAWER_HPP
 
 class DrawingContext;
 class ParticleSystem;

Modified: trunk/windstille/src/particles/particle_system.hpp
===================================================================
--- trunk/windstille/src/particles/particle_system.hpp	2009-02-10 20:40:14 UTC (rev 2454)
+++ trunk/windstille/src/particles/particle_system.hpp	2009-02-11 15:54:35 UTC (rev 2455)
@@ -16,8 +16,8 @@
 **  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
-#ifndef HEADER_PARTICLE_SYSTEM_HXX
-#define HEADER_PARTICLE_SYSTEM_HXX
+#ifndef HEADER_WINDSTILLE_PARTICLES_PARTICLE_SYSTEM_HPP
+#define HEADER_WINDSTILLE_PARTICLES_PARTICLE_SYSTEM_HPP
 
 #include <vector>
 

Modified: trunk/windstille/src/particles/randomizer.hpp
===================================================================
--- trunk/windstille/src/particles/randomizer.hpp	2009-02-10 20:40:14 UTC (rev 2454)
+++ trunk/windstille/src/particles/randomizer.hpp	2009-02-11 15:54:35 UTC (rev 2455)
@@ -16,8 +16,8 @@
 **  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
-#ifndef HEADER_RANDOMIZER_HXX
-#define HEADER_RANDOMIZER_HXX
+#ifndef HEADER_WINDSTILLE_PARTICLES_RANDOMIZER_HPP
+#define HEADER_WINDSTILLE_PARTICLES_RANDOMIZER_HPP
 
 #include "random.hpp"
 

Modified: trunk/windstille/src/particles/spark_drawer.hpp
===================================================================
--- trunk/windstille/src/particles/spark_drawer.hpp	2009-02-10 20:40:14 UTC (rev 2454)
+++ trunk/windstille/src/particles/spark_drawer.hpp	2009-02-11 15:54:35 UTC (rev 2455)
@@ -16,8 +16,8 @@
 **  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
-#ifndef HEADER_PARTICLES_SPARK_DRAWER_HXX
-#define HEADER_PARTICLES_SPARK_DRAWER_HXX
+#ifndef HEADER_WINDSTILLE_PARTICLES_SPARK_DRAWER_HPP
+#define HEADER_WINDSTILLE_PARTICLES_SPARK_DRAWER_HPP
 
 #include "drawer.hpp"
 

Modified: trunk/windstille/src/particles/surface_drawer.hpp
===================================================================
--- trunk/windstille/src/particles/surface_drawer.hpp	2009-02-10 20:40:14 UTC (rev 2454)
+++ trunk/windstille/src/particles/surface_drawer.hpp	2009-02-11 15:54:35 UTC (rev 2455)
@@ -16,8 +16,8 @@
 **  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
-#ifndef HEADER_SURFACE_DRAWER_HXX
-#define HEADER_SURFACE_DRAWER_HXX
+#ifndef HEADER_WINDSTILLE_PARTICLES_SURFACE_DRAWER_HPP
+#define HEADER_WINDSTILLE_PARTICLES_SURFACE_DRAWER_HPP
 
 #include "display/surface.hpp"
 #include "ref.hpp"

Modified: trunk/windstille/src/pda.hpp
===================================================================
--- trunk/windstille/src/pda.hpp	2009-02-10 20:40:14 UTC (rev 2454)
+++ trunk/windstille/src/pda.hpp	2009-02-11 15:54:35 UTC (rev 2455)
@@ -16,8 +16,8 @@
 **  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
-#ifndef HEADER_PDA_HPP
-#define HEADER_PDA_HPP
+#ifndef HEADER_WINDSTILLE_PDA_HPP
+#define HEADER_WINDSTILLE_PDA_HPP
 
 #include "sprite2d/sprite.hpp"
 #include "screen.hpp"

Modified: trunk/windstille/src/physics.cpp
===================================================================
--- trunk/windstille/src/physics.cpp	2009-02-10 20:40:14 UTC (rev 2454)
+++ trunk/windstille/src/physics.cpp	2009-02-11 15:54:35 UTC (rev 2455)
@@ -1,3 +1,20 @@
+/*
+**  Windstille - A Sci-Fi Action-Adventure Game
+**  Copyright (C) 2005 Matthias Braun <matze at braunis.de>
+**
+**  This program is free software: you can redistribute it and/or modify
+**  it under the terms of the GNU General Public License as published by
+**  the Free Software Foundation, either version 3 of the License, or
+**  (at your option) any later version.
+**  
+**  This program is distributed in the hope that it will be useful,
+**  but WITHOUT ANY WARRANTY; without even the implied warranty of
+**  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+**  GNU General Public License for more details.
+**  
+**  You should have received a copy of the GNU General Public License
+**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
+*/
 
 #include <boost/bind.hpp>
 #include "physics.hpp"
@@ -88,3 +105,4 @@
   force = Vector(0, 0);
 }
 
+/* EOF */

Modified: trunk/windstille/src/physics.hpp
===================================================================
--- trunk/windstille/src/physics.hpp	2009-02-10 20:40:14 UTC (rev 2454)
+++ trunk/windstille/src/physics.hpp	2009-02-11 15:54:35 UTC (rev 2455)
@@ -1,6 +1,24 @@
-#ifndef __PHYSICS_HPP__
-#define __PHYSICS_HPP__
+/*
+**  Windstille - A Sci-Fi Action-Adventure Game
+**  Copyright (C) 2005 Matthias Braun <matze at braunis.de>
+**
+**  This program is free software: you can redistribute it and/or modify
+**  it under the terms of the GNU General Public License as published by
+**  the Free Software Foundation, either version 3 of the License, or
+**  (at your option) any later version.
+**  
+**  This program is distributed in the hope that it will be useful,
+**  but WITHOUT ANY WARRANTY; without even the implied warranty of
+**  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+**  GNU General Public License for more details.
+**  
+**  You should have received a copy of the GNU General Public License
+**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
+*/
 
+#ifndef HEADER_WINDSTILLE_PHYSICS_HPP
+#define HEADER_WINDSTILLE_PHYSICS_HPP
+
 #include "collision/collision_data.hpp"
 #include "entity.hpp"
 
@@ -34,3 +52,4 @@
 
 #endif
 
+/* EOF */

Modified: trunk/windstille/src/pistol.hpp
===================================================================
--- trunk/windstille/src/pistol.hpp	2009-02-10 20:40:14 UTC (rev 2454)
+++ trunk/windstille/src/pistol.hpp	2009-02-11 15:54:35 UTC (rev 2455)
@@ -16,8 +16,8 @@
 **  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
-#ifndef PISTOL_HPP
-#define PISTOL_HPP
+#ifndef HEADER_WINDSTILLE_PISTOL_HPP
+#define HEADER_WINDSTILLE_PISTOL_HPP
 
 #include "sprite3d/sprite3d.hpp"
 #include "weapon.hpp"

Modified: trunk/windstille/src/player.hpp
===================================================================
--- trunk/windstille/src/player.hpp	2009-02-10 20:40:14 UTC (rev 2454)
+++ trunk/windstille/src/player.hpp	2009-02-11 15:54:35 UTC (rev 2455)
@@ -16,8 +16,8 @@
 **  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
-#ifndef PLAYER_HXX
-#define PLAYER_HXX
+#ifndef HEADER_WINDSTILLE_PLAYER_HPP
+#define HEADER_WINDSTILLE_PLAYER_HPP
 
 #include <memory>
 #include "sprite2d/sprite.hpp"

Modified: trunk/windstille/src/random.hpp
===================================================================
--- trunk/windstille/src/random.hpp	2009-02-10 20:40:14 UTC (rev 2454)
+++ trunk/windstille/src/random.hpp	2009-02-11 15:54:35 UTC (rev 2455)
@@ -16,8 +16,8 @@
 **  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
-#ifndef HEADER_RANDOM_HXX
-#define HEADER_RANDOM_HXX
+#ifndef HEADER_WINDSTILLE_RANDOM_HPP
+#define HEADER_WINDSTILLE_RANDOM_HPP
 
 /** */
 class Random

Modified: trunk/windstille/src/ref.hpp
===================================================================
--- trunk/windstille/src/ref.hpp	2009-02-10 20:40:14 UTC (rev 2454)
+++ trunk/windstille/src/ref.hpp	2009-02-11 15:54:35 UTC (rev 2455)
@@ -1,6 +1,24 @@
-#ifndef __REF_HPP__
-#define __REF_HPP__
+/*
+**  Windstille - A Sci-Fi Action-Adventure Game
+**  Copyright (C) 2005 Matthias Braun <matze at braunis.de>
+**
+**  This program is free software: you can redistribute it and/or modify
+**  it under the terms of the GNU General Public License as published by
+**  the Free Software Foundation, either version 3 of the License, or
+**  (at your option) any later version.
+**  
+**  This program is distributed in the hope that it will be useful,
+**  but WITHOUT ANY WARRANTY; without even the implied warranty of
+**  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+**  GNU General Public License for more details.
+**  
+**  You should have received a copy of the GNU General Public License
+**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
+*/
 
+#ifndef HEADER_WINDSTILLE_REF_HPP
+#define HEADER_WINDSTILLE_REF_HPP
+
 /** This class behaves like a pointer to a refcounted object, but increments the
  * reference count when new objects are assigned and decrements the refcounter
  * when it's lifetime has experied. (similar to std::auto_ptr)
@@ -67,3 +85,4 @@
 
 #endif
 
+/* EOF */

Modified: trunk/windstille/src/refcounter.hpp
===================================================================
--- trunk/windstille/src/refcounter.hpp	2009-02-10 20:40:14 UTC (rev 2454)
+++ trunk/windstille/src/refcounter.hpp	2009-02-11 15:54:35 UTC (rev 2455)
@@ -16,8 +16,8 @@
 **  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
-#ifndef __REFCOUNTER_HPP__
-#define __REFCOUNTER_HPP__
+#ifndef HEADER_WINDSTILLE_REFCOUNTER_HPP
+#define HEADER_WINDSTILLE_REFCOUNTER_HPP
 
 #include <assert.h>
 

Modified: trunk/windstille/src/response_curve.hpp
===================================================================
--- trunk/windstille/src/response_curve.hpp	2009-02-10 20:40:14 UTC (rev 2454)
+++ trunk/windstille/src/response_curve.hpp	2009-02-11 15:54:35 UTC (rev 2455)
@@ -16,8 +16,8 @@
 **  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
-#ifndef HEADER_RESPONSE_CURVE_HPP
-#define HEADER_RESPONSE_CURVE_HPP
+#ifndef HEADER_WINDSTILLE_RESPONSE_CURVE_HPP
+#define HEADER_WINDSTILLE_RESPONSE_CURVE_HPP
 
 #include <vector>
 

Modified: trunk/windstille/src/screen.hpp
===================================================================
--- trunk/windstille/src/screen.hpp	2009-02-10 20:40:14 UTC (rev 2454)
+++ trunk/windstille/src/screen.hpp	2009-02-11 15:54:35 UTC (rev 2455)
@@ -16,8 +16,8 @@
 **  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
-#ifndef HEADER_SCREEN_HXX
-#define HEADER_SCREEN_HXX
+#ifndef HEADER_WINDSTILLE_SCREEN_HPP
+#define HEADER_WINDSTILLE_SCREEN_HPP
 
 #include <SDL.h>
 

Modified: trunk/windstille/src/screen_manager.cpp
===================================================================
--- trunk/windstille/src/screen_manager.cpp	2009-02-10 20:40:14 UTC (rev 2454)
+++ trunk/windstille/src/screen_manager.cpp	2009-02-11 15:54:35 UTC (rev 2455)
@@ -243,7 +243,7 @@
                   Display::set_fullscreen(config.get_bool("fullscreen"));
                   break;
               
-	            #ifndef WIN32
+#ifndef WIN32
                 case SDLK_F12:
                   {
                     // FIXME: Replace this with Physfs stuff
@@ -258,7 +258,7 @@
                     console << "Writing screenshot to: '" << filename << "'" << std::endl;
                   }
                   break;
-				  #endif
+#endif
               
                 default:
                   if (!console.is_active())

Modified: trunk/windstille/src/screen_manager.hpp
===================================================================
--- trunk/windstille/src/screen_manager.hpp	2009-02-10 20:40:14 UTC (rev 2454)
+++ trunk/windstille/src/screen_manager.hpp	2009-02-11 15:54:35 UTC (rev 2455)
@@ -16,8 +16,8 @@
 **  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
-#ifndef HEADER_SCREEN_MANAGER_HPP
-#define HEADER_SCREEN_MANAGER_HPP
+#ifndef HEADER_WINDSTILLE_SCREEN_MANAGER_HPP
+#define HEADER_WINDSTILLE_SCREEN_MANAGER_HPP
 
 class Screen;
 

Modified: trunk/windstille/src/script_manager.hpp
===================================================================
--- trunk/windstille/src/script_manager.hpp	2009-02-10 20:40:14 UTC (rev 2454)
+++ trunk/windstille/src/script_manager.hpp	2009-02-11 15:54:35 UTC (rev 2455)
@@ -1,6 +1,24 @@
-#ifndef __SCRIPT_INTERPRETER_H__
-#define __SCRIPT_INTERPRETER_H__
+/*
+**  Windstille - A Sci-Fi Action-Adventure Game
+**  Copyright (C) 2005 Matthias Braun <matze at braunis.de>
+**
+**  This program is free software: you can redistribute it and/or modify
+**  it under the terms of the GNU General Public License as published by
+**  the Free Software Foundation, either version 3 of the License, or
+**  (at your option) any later version.
+**  
+**  This program is distributed in the hope that it will be useful,
+**  but WITHOUT ANY WARRANTY; without even the implied warranty of
+**  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+**  GNU General Public License for more details.
+**  
+**  You should have received a copy of the GNU General Public License
+**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
+*/
 
+#ifndef HEADER_WINDSTILLE_SCRIPT_INTERPRETER_HPP
+#define HEADER_WINDSTILLE_SCRIPT_INTERPRETER_HPP
+
 #include <vector>
 #include <list>
 #include <map>

Modified: trunk/windstille/src/scriptable_object.hpp
===================================================================
--- trunk/windstille/src/scriptable_object.hpp	2009-02-10 20:40:14 UTC (rev 2454)
+++ trunk/windstille/src/scriptable_object.hpp	2009-02-11 15:54:35 UTC (rev 2455)
@@ -17,8 +17,8 @@
 */
 
 
-#ifndef HEADER_SCRIPTABLEOBJECT_HXX
-#define HEADER_SCRIPTABLEOBJECT_HXX
+#ifndef HEADER_WINDSTILLE_SCRIPTABLE_OBJECT_HPP
+#define HEADER_WINDSTILLE_SCRIPTABLE_OBJECT_HPP
 
 #include <string>
 #include "entity.hpp"

Modified: trunk/windstille/src/scripting/game_objects.cpp
===================================================================
--- trunk/windstille/src/scripting/game_objects.cpp	2009-02-10 20:40:14 UTC (rev 2454)
+++ trunk/windstille/src/scripting/game_objects.cpp	2009-02-11 15:54:35 UTC (rev 2455)
@@ -1,3 +1,21 @@
+/*
+**  Windstille - A Sci-Fi Action-Adventure Game
+**  Copyright (C) 2005 Matthias Braun <matze at braunis.de>
+**
+**  This program is free software: you can redistribute it and/or modify
+**  it under the terms of the GNU General Public License as published by
+**  the Free Software Foundation, either version 3 of the License, or
+**  (at your option) any later version.
+**  
+**  This program is distributed in the hope that it will be useful,
+**  but WITHOUT ANY WARRANTY; without even the implied warranty of
+**  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+**  GNU General Public License for more details.
+**  
+**  You should have received a copy of the GNU General Public License
+**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
+*/
+
 #include "wrapper.interface.hpp"
 #include "entity.hpp"
 #include "sector.hpp"
@@ -3,6 +21,5 @@
 #include "game_objects.hpp"
 
-namespace Scripting
-{
+namespace Scripting {
 
 const std::string&
@@ -91,5 +108,8 @@
   obj()->start_flash(speed);
 }
 
-}
+} // namespace Scripting
 
+/* EOF */
+
+

Modified: trunk/windstille/src/scripting/game_objects.hpp
===================================================================
--- trunk/windstille/src/scripting/game_objects.hpp	2009-02-10 20:40:14 UTC (rev 2454)
+++ trunk/windstille/src/scripting/game_objects.hpp	2009-02-11 15:54:35 UTC (rev 2455)
@@ -1,6 +1,24 @@
-#ifndef __GAMEOBJECTS_HPP__
-#define __GAMEOBJECTS_HPP__
+/*
+**  Windstille - A Sci-Fi Action-Adventure Game
+**  Copyright (C) 2005 Matthias Braun <matze at braunis.de>
+**
+**  This program is free software: you can redistribute it and/or modify
+**  it under the terms of the GNU General Public License as published by
+**  the Free Software Foundation, either version 3 of the License, or
+**  (at your option) any later version.
+**  
+**  This program is distributed in the hope that it will be useful,
+**  but WITHOUT ANY WARRANTY; without even the implied warranty of
+**  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+**  GNU General Public License for more details.
+**  
+**  You should have received a copy of the GNU General Public License
+**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
+*/
 
+#ifndef WINDSTILLE_SCRIPTING_GAME_OBJECTS_HPP
+#define WINDSTILLE_SCRIPTING_GAME_OBJECTS_HPP
+
 #ifndef SCRIPTING_API
 #include "game_object.hpp"
 #include "objects/test_object.hpp"
@@ -110,3 +128,4 @@
 
 #endif
 
+/* EOF */

Modified: trunk/windstille/src/scripting/interface.hpp
===================================================================
--- trunk/windstille/src/scripting/interface.hpp	2009-02-10 20:40:14 UTC (rev 2454)
+++ trunk/windstille/src/scripting/interface.hpp	2009-02-11 15:54:35 UTC (rev 2455)
@@ -16,8 +16,8 @@
 **  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
-#ifndef __INTERFACE_HPP__
-#define __INTERFACE_HPP__
+#ifndef HEADER_WINDSTILLE_SCRIPTING_INTERFACE_HPP
+#define HEADER_WINDSTILLE_SCRIPTING_INTERFACE_HPP
 
 #ifndef SCRIPTING_API
 #include <string>

Modified: trunk/windstille/src/scripting/squirrel_error.hpp
===================================================================
--- trunk/windstille/src/scripting/squirrel_error.hpp	2009-02-10 20:40:14 UTC (rev 2454)
+++ trunk/windstille/src/scripting/squirrel_error.hpp	2009-02-11 15:54:35 UTC (rev 2455)
@@ -1,6 +1,24 @@
-#ifndef __SQUIRREL_ERROR_HPP__
-#define __SQUIRREL_ERROR_HPP__
+/*
+**  Windstille - A Sci-Fi Action-Adventure Game
+**  Copyright (C) 2005 Matthias Braun <matze at braunis.de>
+**
+**  This program is free software: you can redistribute it and/or modify
+**  it under the terms of the GNU General Public License as published by
+**  the Free Software Foundation, either version 3 of the License, or
+**  (at your option) any later version.
+**  
+**  This program is distributed in the hope that it will be useful,
+**  but WITHOUT ANY WARRANTY; without even the implied warranty of
+**  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+**  GNU General Public License for more details.
+**  
+**  You should have received a copy of the GNU General Public License
+**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
+*/
 
+#ifndef HEADER_WINDSTILLE_SCRIPTING_SQUIRREL_ERROR_HPP
+#define HEADER_WINDSTILLE_SCRIPTING_SQUIRREL_ERROR_HPP
+
 #include <squirrel.h>
 #include <stdexcept>
 

Modified: trunk/windstille/src/sector.hpp
===================================================================
--- trunk/windstille/src/sector.hpp	2009-02-10 20:40:14 UTC (rev 2454)
+++ trunk/windstille/src/sector.hpp	2009-02-11 15:54:35 UTC (rev 2455)
@@ -16,8 +16,8 @@
 **  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
-#ifndef HEADER_SECTOR_HXX
-#define HEADER_SECTOR_HXX
+#ifndef HEADER_WINDSTILLE_SECTOR_HPP
+#define HEADER_WINDSTILLE_SECTOR_HPP
 
 #include <string>
 #include <vector>

Modified: trunk/windstille/src/sexpr_file_reader.hpp
===================================================================
--- trunk/windstille/src/sexpr_file_reader.hpp	2009-02-10 20:40:14 UTC (rev 2454)
+++ trunk/windstille/src/sexpr_file_reader.hpp	2009-02-11 15:54:35 UTC (rev 2455)
@@ -16,8 +16,8 @@
 **  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
-#ifndef HEADER_SEXPR_FILE_READER_HPP
-#define HEADER_SEXPR_FILE_READER_HPP
+#ifndef HEADER_WINDSTILLE_SEXPR_FILE_READER_HPP
+#define HEADER_WINDSTILLE_SEXPR_FILE_READER_HPP
 
 #include "file_reader.hpp"
 #include "lisp/lisp.hpp"

Modified: trunk/windstille/src/sound/sound_file.cpp
===================================================================
--- trunk/windstille/src/sound/sound_file.cpp	2009-02-10 20:40:14 UTC (rev 2454)
+++ trunk/windstille/src/sound/sound_file.cpp	2009-02-11 15:54:35 UTC (rev 2455)
@@ -1,3 +1,21 @@
+/*
+**  Windstille - A Sci-Fi Action-Adventure Game
+**  Copyright (C) 2005 Matthias Braun <matze at braunis.de>
+**
+**  This program is free software: you can redistribute it and/or modify
+**  it under the terms of the GNU General Public License as published by
+**  the Free Software Foundation, either version 3 of the License, or
+**  (at your option) any later version.
+**  
+**  This program is distributed in the hope that it will be useful,
+**  but WITHOUT ANY WARRANTY; without even the implied warranty of
+**  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+**  GNU General Public License for more details.
+**  
+**  You should have received a copy of the GNU General Public License
+**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
+*/
+
 /** Used SDL_mixer and glest source as reference */
 #include <config.h>
 
@@ -309,3 +327,4 @@
   }
 }
 
+/* EOF */

Modified: trunk/windstille/src/sound/sound_file.hpp
===================================================================
--- trunk/windstille/src/sound/sound_file.hpp	2009-02-10 20:40:14 UTC (rev 2454)
+++ trunk/windstille/src/sound/sound_file.hpp	2009-02-11 15:54:35 UTC (rev 2455)
@@ -1,6 +1,24 @@
-#ifndef __SOUND_FILE_H__
-#define __SOUND_FILE_H__
+/*
+**  Windstille - A Sci-Fi Action-Adventure Game
+**  Copyright (C) 2005 Matthias Braun <matze at braunis.de>
+**
+**  This program is free software: you can redistribute it and/or modify
+**  it under the terms of the GNU General Public License as published by
+**  the Free Software Foundation, either version 3 of the License, or
+**  (at your option) any later version.
+**  
+**  This program is distributed in the hope that it will be useful,
+**  but WITHOUT ANY WARRANTY; without even the implied warranty of
+**  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+**  GNU General Public License for more details.
+**  
+**  You should have received a copy of the GNU General Public License
+**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
+*/
 
+#ifndef HEADER_WINDSTILLE_SOUND_SOUND_FILE_HPP
+#define HEADER_WINDSTILLE_SOUND_SOUND_FILE_HPP
+
 #include <stdio.h>
 #include <iostream>
 

Modified: trunk/windstille/src/sound/sound_manager.hpp
===================================================================
--- trunk/windstille/src/sound/sound_manager.hpp	2009-02-10 20:40:14 UTC (rev 2454)
+++ trunk/windstille/src/sound/sound_manager.hpp	2009-02-11 15:54:35 UTC (rev 2455)
@@ -1,6 +1,24 @@
-#ifndef __SOUND_MANAGER_H__
-#define __SOUND_MANAGER_H__
+/*
+**  Windstille - A Sci-Fi Action-Adventure Game
+**  Copyright (C) 2005 Matthias Braun <matze at braunis.de>
+**
+**  This program is free software: you can redistribute it and/or modify
+**  it under the terms of the GNU General Public License as published by
+**  the Free Software Foundation, either version 3 of the License, or
+**  (at your option) any later version.
+**  
+**  This program is distributed in the hope that it will be useful,
+**  but WITHOUT ANY WARRANTY; without even the implied warranty of
+**  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+**  GNU General Public License for more details.
+**  
+**  You should have received a copy of the GNU General Public License
+**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
+*/
 
+#ifndef HEADER_WINDSTILLE_SOUND_SOUND_MANAGER_HPP
+#define HEADER_WINDSTILLE_SOUND_SOUND_MANAGER_HPP
+
 #include <string>
 #include <vector>
 #include <map>

Modified: trunk/windstille/src/sound/sound_source.cpp
===================================================================
--- trunk/windstille/src/sound/sound_source.cpp	2009-02-10 20:40:14 UTC (rev 2454)
+++ trunk/windstille/src/sound/sound_source.cpp	2009-02-11 15:54:35 UTC (rev 2455)
@@ -1,3 +1,21 @@
+/*
+**  Windstille - A Sci-Fi Action-Adventure Game
+**  Copyright (C) 2005 Matthias Braun <matze at braunis.de>
+**
+**  This program is free software: you can redistribute it and/or modify
+**  it under the terms of the GNU General Public License as published by
+**  the Free Software Foundation, either version 3 of the License, or
+**  (at your option) any later version.
+**  
+**  This program is distributed in the hope that it will be useful,
+**  but WITHOUT ANY WARRANTY; without even the implied warranty of
+**  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+**  GNU General Public License for more details.
+**  
+**  You should have received a copy of the GNU General Public License
+**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
+*/
+
 #include <config.h>
 
 #include "sound_source.hpp"
@@ -68,3 +86,5 @@
 {
   alSourcef(source, AL_REFERENCE_DISTANCE, distance);
 }
+
+/* EOF */

Modified: trunk/windstille/src/sound/sound_source.hpp
===================================================================
--- trunk/windstille/src/sound/sound_source.hpp	2009-02-10 20:40:14 UTC (rev 2454)
+++ trunk/windstille/src/sound/sound_source.hpp	2009-02-11 15:54:35 UTC (rev 2455)
@@ -1,6 +1,24 @@
-#ifndef __SOUND_SOURCE_H__
-#define __SOUND_SOURCE_H__
+/*
+**  Windstille - A Sci-Fi Action-Adventure Game
+**  Copyright (C) 2005 Matthias Braun <matze at braunis.de>
+**
+**  This program is free software: you can redistribute it and/or modify
+**  it under the terms of the GNU General Public License as published by
+**  the Free Software Foundation, either version 3 of the License, or
+**  (at your option) any later version.
+**  
+**  This program is distributed in the hope that it will be useful,
+**  but WITHOUT ANY WARRANTY; without even the implied warranty of
+**  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+**  GNU General Public License for more details.
+**  
+**  You should have received a copy of the GNU General Public License
+**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
+*/
 
+#ifndef HEADER_WINDSTILLE_SOUND_SOUND_SOURCE_HPP
+#define HEADER_WINDSTILLE_SOUND_SOUND_SOURCE_HPP
+
 #include <AL/al.h>
 #include "math/vector.hpp"
 
@@ -29,3 +47,4 @@
 
 #endif
 
+/* EOF */

Modified: trunk/windstille/src/sound/stream_sound_source.cpp
===================================================================
--- trunk/windstille/src/sound/stream_sound_source.cpp	2009-02-10 20:40:14 UTC (rev 2454)
+++ trunk/windstille/src/sound/stream_sound_source.cpp	2009-02-11 15:54:35 UTC (rev 2455)
@@ -1,3 +1,21 @@
+/*
+**  Windstille - A Sci-Fi Action-Adventure Game
+**  Copyright (C) 2005 Matthias Braun <matze at braunis.de>
+**
+**  This program is free software: you can redistribute it and/or modify
+**  it under the terms of the GNU General Public License as published by
+**  the Free Software Foundation, either version 3 of the License, or
+**  (at your option) any later version.
+**  
+**  This program is distributed in the hope that it will be useful,
+**  but WITHOUT ANY WARRANTY; without even the implied warranty of
+**  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+**  GNU General Public License for more details.
+**  
+**  You should have received a copy of the GNU General Public License
+**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
+*/
+
 #include <config.h>
 
 #include <SDL.h>
@@ -101,3 +119,5 @@
   alSourceQueueBuffers(source, 1, &buffer);
   SoundManager::check_al_error("Couldn't queue audio buffer: ");
 }
+
+/* EOF */

Modified: trunk/windstille/src/sound/stream_sound_source.hpp
===================================================================
--- trunk/windstille/src/sound/stream_sound_source.hpp	2009-02-10 20:40:14 UTC (rev 2454)
+++ trunk/windstille/src/sound/stream_sound_source.hpp	2009-02-11 15:54:35 UTC (rev 2455)
@@ -1,6 +1,24 @@
-#ifndef __STREAM_SOUND_SOURCE_H__
-#define __STREAM_SOUND_SOURCE_H__
+/*
+**  Windstille - A Sci-Fi Action-Adventure Game
+**  Copyright (C) 2005 Matthias Braun <matze at braunis.de>
+**
+**  This program is free software: you can redistribute it and/or modify
+**  it under the terms of the GNU General Public License as published by
+**  the Free Software Foundation, either version 3 of the License, or
+**  (at your option) any later version.
+**  
+**  This program is distributed in the hope that it will be useful,
+**  but WITHOUT ANY WARRANTY; without even the implied warranty of
+**  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+**  GNU General Public License for more details.
+**  
+**  You should have received a copy of the GNU General Public License
+**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
+*/
 
+#ifndef HEADER_WINDSTILLE_SOUND_STREAM_SOUND_SOURCE_HPP
+#define HEADER_WINDSTILLE_SOUND_STREAM_SOUND_SOURCE_HPP
+
 #include <stdio.h>
 #include "sound_source.hpp"
 
@@ -39,3 +57,4 @@
 
 #endif
 
+/* EOF */

Modified: trunk/windstille/src/sprite2d/data.hpp
===================================================================
--- trunk/windstille/src/sprite2d/data.hpp	2009-02-10 20:40:14 UTC (rev 2454)
+++ trunk/windstille/src/sprite2d/data.hpp	2009-02-11 15:54:35 UTC (rev 2455)
@@ -17,8 +17,8 @@
 **  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
-#ifndef __SPRITE_DATA_HPP__
-#define __SPRITE_DATA_HPP__
+#ifndef HEADER_WINDSTILLE_SPRITE2D_DATA_HPP
+#define HEADER_WINDSTILLE_SPRITE2D_DATA_HPP
 
 #include <string>
 #include <vector>

Modified: trunk/windstille/src/sprite2d/manager.hpp
===================================================================
--- trunk/windstille/src/sprite2d/manager.hpp	2009-02-10 20:40:14 UTC (rev 2454)
+++ trunk/windstille/src/sprite2d/manager.hpp	2009-02-11 15:54:35 UTC (rev 2455)
@@ -17,8 +17,8 @@
 **  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
-#ifndef __SPRITE2D_MANAGER_HPP__
-#define __SPRITE2D_MANAGER_HPP__
+#ifndef HEADER_WINDSTILLE_SPRITE2D_MANAGER_HPP
+#define HEADER_WINDSTILLE_SPRITE2D_MANAGER_HPP
 
 #include <string>
 #include <map>

Modified: trunk/windstille/src/sprite2d/sprite.hpp
===================================================================
--- trunk/windstille/src/sprite2d/sprite.hpp	2009-02-10 20:40:14 UTC (rev 2454)
+++ trunk/windstille/src/sprite2d/sprite.hpp	2009-02-11 15:54:35 UTC (rev 2455)
@@ -17,8 +17,8 @@
 **  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
-#ifndef __SPRITE2D_SPRITE_HPP__
-#define __SPRITE2D_SPRITE_HPP__
+#ifndef HEADER_WINDSTILLE_SPRITE2D_SPRITE_HPP
+#define HEADER_WINDSTILLE_SPRITE2D_SPRITE_HPP
 
 #include <string>
 #include <GL/glew.h>

Modified: trunk/windstille/src/sprite2dview.hpp
===================================================================
--- trunk/windstille/src/sprite2dview.hpp	2009-02-10 20:40:14 UTC (rev 2454)
+++ trunk/windstille/src/sprite2dview.hpp	2009-02-11 15:54:35 UTC (rev 2455)
@@ -16,8 +16,8 @@
 **  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
-#ifndef HEADER_SPRITE2DVIEW_HPP
-#define HEADER_SPRITE2DVIEW_HPP
+#ifndef HEADER_WINDSTILLE_SPRITE2DVIEW_HPP
+#define HEADER_WINDSTILLE_SPRITE2DVIEW_HPP
 
 #include "display/scene_context.hpp"
 #include "sprite2d/sprite.hpp"

Modified: trunk/windstille/src/sprite3d/data.hpp
===================================================================
--- trunk/windstille/src/sprite3d/data.hpp	2009-02-10 20:40:14 UTC (rev 2454)
+++ trunk/windstille/src/sprite3d/data.hpp	2009-02-11 15:54:35 UTC (rev 2455)
@@ -16,8 +16,8 @@
 **  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
-#ifndef HEADER_SPRITE3D_DATA_HPP
-#define HEADER_SPRITE3D_DATA_HPP
+#ifndef HEADER_WINDSTILLE_SPRITE3D_DATA_HPP
+#define HEADER_WINDSTILLE_SPRITE3D_DATA_HPP
 
 #include <stdint.h>
 #include <string>

Modified: trunk/windstille/src/sprite3d/manager.cpp
===================================================================
--- trunk/windstille/src/sprite3d/manager.cpp	2009-02-10 20:40:14 UTC (rev 2454)
+++ trunk/windstille/src/sprite3d/manager.cpp	2009-02-11 15:54:35 UTC (rev 2455)
@@ -1,3 +1,21 @@
+/*
+**  Windstille - A Sci-Fi Action-Adventure Game
+**  Copyright (C) 2005 Matthias Braun <matze at braunis.de>
+**
+**  This program is free software: you can redistribute it and/or modify
+**  it under the terms of the GNU General Public License as published by
+**  the Free Software Foundation, either version 3 of the License, or
+**  (at your option) any later version.
+**  
+**  This program is distributed in the hope that it will be useful,
+**  but WITHOUT ANY WARRANTY; without even the implied warranty of
+**  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+**  GNU General Public License for more details.
+**  
+**  You should have received a copy of the GNU General Public License
+**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
+*/
+
 #include <config.h>
 
 #include "sprite3d/manager.hpp"
@@ -31,4 +49,7 @@
   return data;
 }
 
-}
+} // namespace sprite3d
+
+/* EOF */
+

Modified: trunk/windstille/src/sprite3d/manager.hpp
===================================================================
--- trunk/windstille/src/sprite3d/manager.hpp	2009-02-10 20:40:14 UTC (rev 2454)
+++ trunk/windstille/src/sprite3d/manager.hpp	2009-02-11 15:54:35 UTC (rev 2455)
@@ -1,11 +1,28 @@
-#ifndef __SPRITE3D_MANAGER_HPP__
-#define __SPRITE3D_MANAGER_HPP__
+/*
+**  Windstille - A Sci-Fi Action-Adventure Game
+**  Copyright (C) 2005 Matthias Braun <matze at braunis.de>
+**
+**  This program is free software: you can redistribute it and/or modify
+**  it under the terms of the GNU General Public License as published by
+**  the Free Software Foundation, either version 3 of the License, or
+**  (at your option) any later version.
+**  
+**  This program is distributed in the hope that it will be useful,
+**  but WITHOUT ANY WARRANTY; without even the implied warranty of
+**  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+**  GNU General Public License for more details.
+**  
+**  You should have received a copy of the GNU General Public License
+**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
+*/
 
+#ifndef HEADER_WINDSTILLE_SPRITE3D_MANAGER_HPP
+#define HEADER_WINDSTILLE_SPRITE3D_MANAGER_HPP
+
 #include <string>
 #include <map>
 
-namespace sprite3d
-{
+namespace sprite3d {
 
 class Data;
 

Modified: trunk/windstille/src/sprite3d/sprite3d.hpp
===================================================================
--- trunk/windstille/src/sprite3d/sprite3d.hpp	2009-02-10 20:40:14 UTC (rev 2454)
+++ trunk/windstille/src/sprite3d/sprite3d.hpp	2009-02-11 15:54:35 UTC (rev 2455)
@@ -16,8 +16,8 @@
 **  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
-#ifndef HEADER_SPRITE3D_HPP
-#define HEADER_SPRITE3D_HPP
+#ifndef HEADER_WINDSTILLE_SPRITE3D_SPRITE3D_HPP
+#define HEADER_WINDSTILLE_SPRITE3D_SPRITE3D_HPP
 
 #include <string>
 #include <stdint.h>
@@ -156,3 +156,5 @@
 };
 
 #endif
+
+/* EOF */

Modified: trunk/windstille/src/sprite3dview.hpp
===================================================================
--- trunk/windstille/src/sprite3dview.hpp	2009-02-10 20:40:14 UTC (rev 2454)
+++ trunk/windstille/src/sprite3dview.hpp	2009-02-11 15:54:35 UTC (rev 2455)
@@ -16,8 +16,8 @@
 **  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
-#ifndef HEADER_SPRITE3DVIEW_HPP
-#define HEADER_SPRITE3DVIEW_HPP
+#ifndef HEADER_WINDSTILLE_SPRITE3DVIEW_HPP
+#define HEADER_WINDSTILLE_SPRITE3DVIEW_HPP
 
 #include "display/scene_context.hpp"
 #include "sprite3d/sprite3d.hpp"

Modified: trunk/windstille/src/text_area.hpp
===================================================================
--- trunk/windstille/src/text_area.hpp	2009-02-10 20:40:14 UTC (rev 2454)
+++ trunk/windstille/src/text_area.hpp	2009-02-11 15:54:35 UTC (rev 2455)
@@ -16,8 +16,8 @@
 **  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
-#ifndef HEADER_TEXT_AREA_HPP
-#define HEADER_TEXT_AREA_HPP
+#ifndef HEADER_WINDSTILLE_TEXT_AREA_HPP
+#define HEADER_WINDSTILLE_TEXT_AREA_HPP
 
 #include "math/rect.hpp"
 #include <string>

Modified: trunk/windstille/src/tile.hpp
===================================================================
--- trunk/windstille/src/tile.hpp	2009-02-10 20:40:14 UTC (rev 2454)
+++ trunk/windstille/src/tile.hpp	2009-02-11 15:54:35 UTC (rev 2455)
@@ -16,8 +16,8 @@
 **  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
-#ifndef HEADER_TILE_HXX
-#define HEADER_TILE_HXX
+#ifndef HEADER_WINDSTILLE_TILE_HPP
+#define HEADER_WINDSTILLE_TILE_HPP
 
 #include <assert.h>
 #include <GL/glew.h>

Modified: trunk/windstille/src/tile_description.hpp
===================================================================
--- trunk/windstille/src/tile_description.hpp	2009-02-10 20:40:14 UTC (rev 2454)
+++ trunk/windstille/src/tile_description.hpp	2009-02-11 15:54:35 UTC (rev 2455)
@@ -16,8 +16,8 @@
 **  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
-#ifndef HEADER_TILE_DESCRIPTION_HPP
-#define HEADER_TILE_DESCRIPTION_HPP
+#ifndef HEADER_WINDSTILLE_TILE_DESCRIPTION_HPP
+#define HEADER_WINDSTILLE_TILE_DESCRIPTION_HPP
 
 #include <vector>
 #include <string>

Modified: trunk/windstille/src/tile_factory.hpp
===================================================================
--- trunk/windstille/src/tile_factory.hpp	2009-02-10 20:40:14 UTC (rev 2454)
+++ trunk/windstille/src/tile_factory.hpp	2009-02-11 15:54:35 UTC (rev 2455)
@@ -16,8 +16,8 @@
 **  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
-#ifndef TILEFACTORY_HXX
-#define TILEFACTORY_HXX
+#ifndef HEADER_WINDSTILLE_TILEFACTORY_HPP
+#define HEADER_WINDSTILLE_TILEFACTORY_HPP
 
 #include <map>
 #include <string>

Modified: trunk/windstille/src/tile_map.hpp
===================================================================
--- trunk/windstille/src/tile_map.hpp	2009-02-10 20:40:14 UTC (rev 2454)
+++ trunk/windstille/src/tile_map.hpp	2009-02-11 15:54:35 UTC (rev 2455)
@@ -16,8 +16,8 @@
 **  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
-#ifndef HEADER_WINDSTILLE_TILEMAP_HXX
-#define HEADER_WINDSTILLE_TILEMAP_HXX
+#ifndef HEADER_WINDSTILLE_TILEMAP_HPP
+#define HEADER_WINDSTILLE_TILEMAP_HPP
 
 #include <string>
 

Modified: trunk/windstille/src/tile_packer.hpp
===================================================================
--- trunk/windstille/src/tile_packer.hpp	2009-02-10 20:40:14 UTC (rev 2454)
+++ trunk/windstille/src/tile_packer.hpp	2009-02-11 15:54:35 UTC (rev 2455)
@@ -16,8 +16,8 @@
 **  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
-#ifndef HEADER_TILE_PACKER_HXX
-#define HEADER_TILE_PACKER_HXX
+#ifndef HEADER_WINDSTILLE_TILE_PACKER_HPP
+#define HEADER_WINDSTILLE_TILE_PACKER_HPP
 
 #include <SDL.h>
 #include <GL/glew.h>

Modified: trunk/windstille/src/timer.hpp
===================================================================
--- trunk/windstille/src/timer.hpp	2009-02-10 20:40:14 UTC (rev 2454)
+++ trunk/windstille/src/timer.hpp	2009-02-11 15:54:35 UTC (rev 2455)
@@ -15,6 +15,7 @@
 //  along with this program; if not, write to the Free Software
 //  Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA
 //  02111-1307, USA.
+
 #ifndef __SUPERTUX_TIMER_HPP__
 #define __SUPERTUX_TIMER_HPP__
 

Modified: trunk/windstille/src/title_screen.hpp
===================================================================
--- trunk/windstille/src/title_screen.hpp	2009-02-10 20:40:14 UTC (rev 2454)
+++ trunk/windstille/src/title_screen.hpp	2009-02-11 15:54:35 UTC (rev 2455)
@@ -16,8 +16,8 @@
 **  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
-#ifndef HEADER_TITLE_SCREEN_HPP
-#define HEADER_TITLE_SCREEN_HPP
+#ifndef HEADER_WINDSTILLE_TITLE_SCREEN_HPP
+#define HEADER_WINDSTILLE_TITLE_SCREEN_HPP
 
 #include "sprite2d/sprite.hpp"
 #include "screen.hpp"

Modified: trunk/windstille/src/trigger.hpp
===================================================================
--- trunk/windstille/src/trigger.hpp	2009-02-10 20:40:14 UTC (rev 2454)
+++ trunk/windstille/src/trigger.hpp	2009-02-11 15:54:35 UTC (rev 2455)
@@ -16,8 +16,8 @@
 **  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
-#ifndef HEADER_TRIGGER_HXX
-#define HEADER_TRIGGER_HXX
+#ifndef HEADER_WINDSTILLE_TRIGGER_HPP
+#define HEADER_WINDSTILLE_TRIGGER_HPP
 
 #include <vector>
 #include "game_object.hpp"

Modified: trunk/windstille/src/util.hpp
===================================================================
--- trunk/windstille/src/util.hpp	2009-02-10 20:40:14 UTC (rev 2454)
+++ trunk/windstille/src/util.hpp	2009-02-11 15:54:35 UTC (rev 2455)
@@ -1,6 +1,24 @@
-#ifndef __UTIL_HPP__
-#define __UTIL_HPP__
+/*
+**  Windstille - A Sci-Fi Action-Adventure Game
+**  Copyright (C) 2005 Matthias Braun <matze at braunis.de>
+**
+**  This program is free software: you can redistribute it and/or modify
+**  it under the terms of the GNU General Public License as published by
+**  the Free Software Foundation, either version 3 of the License, or
+**  (at your option) any later version.
+**  
+**  This program is distributed in the hope that it will be useful,
+**  but WITHOUT ANY WARRANTY; without even the implied warranty of
+**  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+**  GNU General Public License for more details.
+**  
+**  You should have received a copy of the GNU General Public License
+**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
+*/
 
+#ifndef HEADER_WINDSTILLE_UTIL_HPP
+#define HEADER_WINDSTILLE_UTIL_HPP
+
 #include <string>
 #include <stdexcept>
 #include <sstream>
@@ -41,3 +59,4 @@
 
 #endif
 
+/* EOF */

Modified: trunk/windstille/src/view.hpp
===================================================================
--- trunk/windstille/src/view.hpp	2009-02-10 20:40:14 UTC (rev 2454)
+++ trunk/windstille/src/view.hpp	2009-02-11 15:54:35 UTC (rev 2455)
@@ -16,8 +16,8 @@
 **  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
-#ifndef HEADER_VIEW_HXX
-#define HEADER_VIEW_HXX
+#ifndef HEADER_WINDSTILLE_VIEW_HPP
+#define HEADER_WINDSTILLE_VIEW_HPP
 
 #include "camera.hpp"
 #include "graphic_context_state.hpp"

Modified: trunk/windstille/src/weapon.hpp
===================================================================
--- trunk/windstille/src/weapon.hpp	2009-02-10 20:40:14 UTC (rev 2454)
+++ trunk/windstille/src/weapon.hpp	2009-02-11 15:54:35 UTC (rev 2455)
@@ -16,8 +16,8 @@
 **  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
-#ifndef WEAPON_HPP
-#define WEAPON_HPP
+#ifndef HEADER_WINDSTILLE_WEAPON_HPP
+#define HEADER_WINDSTILLE_WEAPON_HPP
 
 /**
  * Base class for all weapons. This is not a GameObject because it will be

Modified: trunk/windstille/src/windstille.hpp
===================================================================
--- trunk/windstille/src/windstille.hpp	2009-02-10 20:40:14 UTC (rev 2454)
+++ trunk/windstille/src/windstille.hpp	2009-02-11 15:54:35 UTC (rev 2455)
@@ -19,7 +19,7 @@
 #ifndef HEADER_WINDSTILLE_HPP
 #define HEADER_WINDSTILLE_HPP
 
-#define WINDSTILLE_VERSION "0.3.1"
+#define WINDSTILLE_VERSION "0.4.0"
 
 #endif
 



From grumbel at mail.berlios.de  Wed Feb 11 17:08:16 2009
From: grumbel at mail.berlios.de (grumbel at BerliOS)
Date: Wed, 11 Feb 2009 17:08:16 +0100
Subject: [Windstille-commit] r2456 - in trunk/windstille/src: . armature
	collision display navigation objects scripting
Message-ID: <200902111608.n1BG8G46012666@sheep.berlios.de>

Author: grumbel
Date: 2009-02-11 17:08:14 +0100 (Wed, 11 Feb 2009)
New Revision: 2456

Modified:
   trunk/windstille/src/armature/bone.hpp
   trunk/windstille/src/collision/collision_test.hpp
   trunk/windstille/src/display/display.hpp
   trunk/windstille/src/display/texture_manager.hpp
   trunk/windstille/src/energy_bar.hpp
   trunk/windstille/src/file_reader.cpp
   trunk/windstille/src/file_reader.hpp
   trunk/windstille/src/file_reader_impl.hpp
   trunk/windstille/src/navigation/node.hpp
   trunk/windstille/src/navigation/properties.hpp
   trunk/windstille/src/navigation/segment_position.hpp
   trunk/windstille/src/objects/spider_mine.hpp
   trunk/windstille/src/script_manager.hpp
   trunk/windstille/src/scripting/game_objects.hpp
   trunk/windstille/src/tile_factory.hpp
   trunk/windstille/src/tile_map.hpp
   trunk/windstille/src/windstille.hpp
Log:
Added some more missing copyright headers, fixed some include guards

Modified: trunk/windstille/src/armature/bone.hpp
===================================================================
--- trunk/windstille/src/armature/bone.hpp	2009-02-11 15:54:35 UTC (rev 2455)
+++ trunk/windstille/src/armature/bone.hpp	2009-02-11 16:08:14 UTC (rev 2456)
@@ -16,8 +16,8 @@
 **  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
-#ifndef HEADER_WINDSTILLE_ARMATURE_SKELETON_BONE_HPP
-#define HEADER_WINDSTILLE_ARMATURE_SKELETON_BONE_HPP
+#ifndef HEADER_WINDSTILLE_ARMATURE_BONE_HPP
+#define HEADER_WINDSTILLE_ARMATURE_BONE_HPP
 
 #include <string>
 #include <vector>

Modified: trunk/windstille/src/collision/collision_test.hpp
===================================================================
--- trunk/windstille/src/collision/collision_test.hpp	2009-02-11 15:54:35 UTC (rev 2455)
+++ trunk/windstille/src/collision/collision_test.hpp	2009-02-11 16:08:14 UTC (rev 2456)
@@ -17,8 +17,8 @@
 **  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
-#ifndef HEADER_WINDSTILLE_COLLISION_COLLTEST_HPP
-#define HEADER_WINDSTILLE_COLLISION_COLLTEST_HPP
+#ifndef HEADER_WINDSTILLE_COLLISION_COLLISION_TEST_HPP
+#define HEADER_WINDSTILLE_COLLISION_COLLISION_TEST_HPP
 
 #define MAXF 100000.0f
 

Modified: trunk/windstille/src/display/display.hpp
===================================================================
--- trunk/windstille/src/display/display.hpp	2009-02-11 15:54:35 UTC (rev 2455)
+++ trunk/windstille/src/display/display.hpp	2009-02-11 16:08:14 UTC (rev 2456)
@@ -16,8 +16,8 @@
 **  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
-#ifndef HEADER_WINDSTILLE_COLLISION_DISPLAY_DISPLAY_HPP
-#define HEADER_WINDSTILLE_COLLISION_DISPLAY_DISPLAY_HPP
+#ifndef HEADER_WINDSTILLE_DISPLAY_DISPLAY_HPP
+#define HEADER_WINDSTILLE_DISPLAY_DISPLAY_HPP
 
 #include <vector>
 #include <SDL.h>

Modified: trunk/windstille/src/display/texture_manager.hpp
===================================================================
--- trunk/windstille/src/display/texture_manager.hpp	2009-02-11 15:54:35 UTC (rev 2455)
+++ trunk/windstille/src/display/texture_manager.hpp	2009-02-11 16:08:14 UTC (rev 2456)
@@ -16,8 +16,8 @@
 **  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
-#ifndef HEADER_WINDSTILLE_TEXTURE_MANAGER_HPP
-#define HEADER_WINDSTILLE_TEXTURE_MANAGER_HPP
+#ifndef HEADER_WINDSTILLE_DISPLAY_TEXTURE_MANAGER_HPP
+#define HEADER_WINDSTILLE_DISPLAY_TEXTURE_MANAGER_HPP
 
 #include <string>
 #include <map>

Modified: trunk/windstille/src/energy_bar.hpp
===================================================================
--- trunk/windstille/src/energy_bar.hpp	2009-02-11 15:54:35 UTC (rev 2455)
+++ trunk/windstille/src/energy_bar.hpp	2009-02-11 16:08:14 UTC (rev 2456)
@@ -16,8 +16,8 @@
 **  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
-#ifndef HEADER_WINDSTILLE_ENERGYBAR_HPP
-#define HEADER_WINDSTILLE_ENERGYBAR_HPP
+#ifndef HEADER_WINDSTILLE_ENERGY_BAR_HPP
+#define HEADER_WINDSTILLE_ENERGY_BAR_HPP
 
 #include "screen.hpp"
 #include "sprite2d/sprite.hpp"

Modified: trunk/windstille/src/file_reader.cpp
===================================================================
--- trunk/windstille/src/file_reader.cpp	2009-02-11 15:54:35 UTC (rev 2455)
+++ trunk/windstille/src/file_reader.cpp	2009-02-11 16:08:14 UTC (rev 2456)
@@ -1,19 +1,20 @@
-//  Pingus - A free Lemmings clone
-//  Copyright (C) 2002 Ingo Ruhnke <grumbel at gmx.de>
-//
-//  This program is free software; you can redistribute it and/or
-//  modify it under the terms of the GNU General Public License
-//  as published by the Free Software Foundation; either version 2
-//  of the License, or (at your option) any later version.
-//
-//  This program is distributed in the hope that it will be useful,
-//  but WITHOUT ANY WARRANTY; without even the implied warranty of
-//  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
-//  GNU General Public License for more details.
-//
-//  You should have received a copy of the GNU General Public License
-//  along with this program; if not, write to the Free Software
-//  Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA.
+/*
+**  Windstille - A Sci-Fi Action-Adventure Game
+**  Copyright (C) 2002 Ingo Ruhnke <grumbel at gmx.de>
+**
+**  This program is free software: you can redistribute it and/or modify
+**  it under the terms of the GNU General Public License as published by
+**  the Free Software Foundation, either version 3 of the License, or
+**  (at your option) any later version.
+**  
+**  This program is distributed in the hope that it will be useful,
+**  but WITHOUT ANY WARRANTY; without even the implied warranty of
+**  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+**  GNU General Public License for more details.
+**  
+**  You should have received a copy of the GNU General Public License
+**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
+*/
 
 #include "lisp/parser.hpp"
 #include "sexpr_file_reader.hpp"

Modified: trunk/windstille/src/file_reader.hpp
===================================================================
--- trunk/windstille/src/file_reader.hpp	2009-02-11 15:54:35 UTC (rev 2455)
+++ trunk/windstille/src/file_reader.hpp	2009-02-11 16:08:14 UTC (rev 2456)
@@ -1,22 +1,23 @@
-//  Pingus - A free Lemmings clone
-//  Copyright (C) 2002 Ingo Ruhnke <grumbel at gmx.de>
-//
-//  This program is free software; you can redistribute it and/or
-//  modify it under the terms of the GNU General Public License
-//  as published by the Free Software Foundation; either version 2
-//  of the License, or (at your option) any later version.
-//
-//  This program is distributed in the hope that it will be useful,
-//  but WITHOUT ANY WARRANTY; without even the implied warranty of
-//  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
-//  GNU General Public License for more details.
-//
-//  You should have received a copy of the GNU General Public License
-//  along with this program; if not, write to the Free Software
-//  Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA.
+/*
+**  Windstille - A Sci-Fi Action-Adventure Game
+**  Copyright (C) 2002 Ingo Ruhnke <grumbel at gmx.de>
+**
+**  This program is free software: you can redistribute it and/or modify
+**  it under the terms of the GNU General Public License as published by
+**  the Free Software Foundation, either version 3 of the License, or
+**  (at your option) any later version.
+**  
+**  This program is distributed in the hope that it will be useful,
+**  but WITHOUT ANY WARRANTY; without even the implied warranty of
+**  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+**  GNU General Public License for more details.
+**  
+**  You should have received a copy of the GNU General Public License
+**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
+*/
 
-#ifndef HEADER_PINGUS_FILE_READER_HPP
-#define HEADER_PINGUS_FILE_READER_HPP
+#ifndef HEADER_WINDSTILLE_FILE_READER_HPP
+#define HEADER_WINDSTILLE_FILE_READER_HPP
 
 #include <string>
 #include <vector>

Modified: trunk/windstille/src/file_reader_impl.hpp
===================================================================
--- trunk/windstille/src/file_reader_impl.hpp	2009-02-11 15:54:35 UTC (rev 2455)
+++ trunk/windstille/src/file_reader_impl.hpp	2009-02-11 16:08:14 UTC (rev 2456)
@@ -1,22 +1,23 @@
-//  Pingus - A free Lemmings clone
-//  Copyright (C) 2002 Ingo Ruhnke <grumbel at gmx.de>
-//
-//  This program is free software; you can redistribute it and/or
-//  modify it under the terms of the GNU General Public License
-//  as published by the Free Software Foundation; either version 2
-//  of the License, or (at your option) any later version.
-//
-//  This program is distributed in the hope that it will be useful,
-//  but WITHOUT ANY WARRANTY; without even the implied warranty of
-//  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
-//  GNU General Public License for more details.
-// 
-//  You should have received a copy of the GNU General Public License
-//  along with this program; if not, write to the Free Software
-//  Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA.
+/*
+**  Windstille - A Sci-Fi Action-Adventure Game
+**  Copyright (C) 2002 Ingo Ruhnke <grumbel at gmx.de>
+**
+**  This program is free software: you can redistribute it and/or modify
+**  it under the terms of the GNU General Public License as published by
+**  the Free Software Foundation, either version 3 of the License, or
+**  (at your option) any later version.
+**  
+**  This program is distributed in the hope that it will be useful,
+**  but WITHOUT ANY WARRANTY; without even the implied warranty of
+**  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+**  GNU General Public License for more details.
+**  
+**  You should have received a copy of the GNU General Public License
+**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
+*/
 
-#ifndef HEADER_FILE_READER_IMPL_HPP
-#define HEADER_FILE_READER_IMPL_HPP
+#ifndef HEADER_WINDSTILLE_FILE_READER_IMPL_HPP
+#define HEADER_WINDSTILLE_FILE_READER_IMPL_HPP
 
 #include <vector>
 #include <string>

Modified: trunk/windstille/src/navigation/node.hpp
===================================================================
--- trunk/windstille/src/navigation/node.hpp	2009-02-11 15:54:35 UTC (rev 2455)
+++ trunk/windstille/src/navigation/node.hpp	2009-02-11 16:08:14 UTC (rev 2456)
@@ -16,8 +16,8 @@
 **  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
-#ifndef HEADER_WINDSTILLE_NAVIGATION_NAVIGATION_NODE_HPP
-#define HEADER_WINDSTILLE_NAVIGATION_NAVIGATION_NODE_HPP
+#ifndef HEADER_WINDSTILLE_NAVIGATION_NODE_HPP
+#define HEADER_WINDSTILLE_NAVIGATION_NODE_HPP
 
 #include <vector>
 #include "math/vector.hpp"

Modified: trunk/windstille/src/navigation/properties.hpp
===================================================================
--- trunk/windstille/src/navigation/properties.hpp	2009-02-11 15:54:35 UTC (rev 2455)
+++ trunk/windstille/src/navigation/properties.hpp	2009-02-11 16:08:14 UTC (rev 2456)
@@ -16,8 +16,8 @@
 **  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
-#ifndef HEADER_WINDSTILLE_NAVIGATION_COLLISION_PROPERTIES_HPP
-#define HEADER_WINDSTILLE_NAVIGATION_COLLISION_PROPERTIES_HPP
+#ifndef HEADER_WINDSTILLE_NAVIGATION_PROPERTIES_HPP
+#define HEADER_WINDSTILLE_NAVIGATION_PROPERTIES_HPP
 
 #include <inttypes.h>
 

Modified: trunk/windstille/src/navigation/segment_position.hpp
===================================================================
--- trunk/windstille/src/navigation/segment_position.hpp	2009-02-11 15:54:35 UTC (rev 2455)
+++ trunk/windstille/src/navigation/segment_position.hpp	2009-02-11 16:08:14 UTC (rev 2456)
@@ -16,8 +16,8 @@
 **  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
-#ifndef HEADER_WINDSTILLE_NAVIGATION_CONNECTION_HPP
-#define HEADER_WINDSTILLE_NAVIGATION_CONNECTION_HPP
+#ifndef HEADER_WINDSTILLE_NAVIGATION_SEGMENT_POSITION_HPP
+#define HEADER_WINDSTILLE_NAVIGATION_SEGMENT_POSITION_HPP
 
 #include "math/vector.hpp"
 

Modified: trunk/windstille/src/objects/spider_mine.hpp
===================================================================
--- trunk/windstille/src/objects/spider_mine.hpp	2009-02-11 15:54:35 UTC (rev 2455)
+++ trunk/windstille/src/objects/spider_mine.hpp	2009-02-11 16:08:14 UTC (rev 2456)
@@ -16,8 +16,8 @@
 **  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
-#ifndef HEADER_WINDSTILLE_OBJECTS_SPIDER_HPP
-#define HEADER_WINDSTILLE_OBJECTS_SPIDER_HPP
+#ifndef HEADER_WINDSTILLE_OBJECTS_SPIDER_MINE_HPP
+#define HEADER_WINDSTILLE_OBJECTS_SPIDER_MINE_HPP
 
 #include "entity.hpp"
 #include "sprite2d/sprite.hpp"

Modified: trunk/windstille/src/script_manager.hpp
===================================================================
--- trunk/windstille/src/script_manager.hpp	2009-02-11 15:54:35 UTC (rev 2455)
+++ trunk/windstille/src/script_manager.hpp	2009-02-11 16:08:14 UTC (rev 2456)
@@ -16,8 +16,8 @@
 **  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
-#ifndef HEADER_WINDSTILLE_SCRIPT_INTERPRETER_HPP
-#define HEADER_WINDSTILLE_SCRIPT_INTERPRETER_HPP
+#ifndef HEADER_WINDSTILLE_SCRIPT_MANAGER_HPP
+#define HEADER_WINDSTILLE_SCRIPT_MANAGER_HPP
 
 #include <vector>
 #include <list>

Modified: trunk/windstille/src/scripting/game_objects.hpp
===================================================================
--- trunk/windstille/src/scripting/game_objects.hpp	2009-02-11 15:54:35 UTC (rev 2455)
+++ trunk/windstille/src/scripting/game_objects.hpp	2009-02-11 16:08:14 UTC (rev 2456)
@@ -16,8 +16,8 @@
 **  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
-#ifndef WINDSTILLE_SCRIPTING_GAME_OBJECTS_HPP
-#define WINDSTILLE_SCRIPTING_GAME_OBJECTS_HPP
+#ifndef HEADER_WINDSTILLE_SCRIPTING_GAME_OBJECTS_HPP
+#define HEADER_WINDSTILLE_SCRIPTING_GAME_OBJECTS_HPP
 
 #ifndef SCRIPTING_API
 #include "game_object.hpp"

Modified: trunk/windstille/src/tile_factory.hpp
===================================================================
--- trunk/windstille/src/tile_factory.hpp	2009-02-11 15:54:35 UTC (rev 2455)
+++ trunk/windstille/src/tile_factory.hpp	2009-02-11 16:08:14 UTC (rev 2456)
@@ -16,8 +16,8 @@
 **  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
-#ifndef HEADER_WINDSTILLE_TILEFACTORY_HPP
-#define HEADER_WINDSTILLE_TILEFACTORY_HPP
+#ifndef HEADER_WINDSTILLE_TILE_FACTORY_HPP
+#define HEADER_WINDSTILLE_TILE_FACTORY_HPP
 
 #include <map>
 #include <string>

Modified: trunk/windstille/src/tile_map.hpp
===================================================================
--- trunk/windstille/src/tile_map.hpp	2009-02-11 15:54:35 UTC (rev 2455)
+++ trunk/windstille/src/tile_map.hpp	2009-02-11 16:08:14 UTC (rev 2456)
@@ -16,8 +16,8 @@
 **  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
-#ifndef HEADER_WINDSTILLE_TILEMAP_HPP
-#define HEADER_WINDSTILLE_TILEMAP_HPP
+#ifndef HEADER_WINDSTILLE_TILE_MAP_HPP
+#define HEADER_WINDSTILLE_TILE_MAP_HPP
 
 #include <string>
 

Modified: trunk/windstille/src/windstille.hpp
===================================================================
--- trunk/windstille/src/windstille.hpp	2009-02-11 15:54:35 UTC (rev 2455)
+++ trunk/windstille/src/windstille.hpp	2009-02-11 16:08:14 UTC (rev 2456)
@@ -16,8 +16,8 @@
 **  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
-#ifndef HEADER_WINDSTILLE_HPP
-#define HEADER_WINDSTILLE_HPP
+#ifndef HEADER_WINDSTILLE_WINDSTILLE_HPP
+#define HEADER_WINDSTILLE_WINDSTILLE_HPP
 
 #define WINDSTILLE_VERSION "0.4.0"
 



From grumbel at mail.berlios.de  Wed Feb 11 17:25:57 2009
From: grumbel at mail.berlios.de (grumbel at BerliOS)
Date: Wed, 11 Feb 2009 17:25:57 +0100
Subject: [Windstille-commit] r2457 - in trunk/windstille/src: . collision
	scripting sound sprite2d sprite3d
Message-ID: <200902111625.n1BGPvw1014335@sheep.berlios.de>

Author: grumbel
Date: 2009-02-11 17:25:56 +0100 (Wed, 11 Feb 2009)
New Revision: 2457

Modified:
   trunk/windstille/src/collision/collision_engine.cpp
   trunk/windstille/src/collision/collision_engine.hpp
   trunk/windstille/src/grenade.cpp
   trunk/windstille/src/grenade.hpp
   trunk/windstille/src/script_manager.hpp
   trunk/windstille/src/scripting/squirrel_error.cpp
   trunk/windstille/src/scripting/squirrel_error.hpp
   trunk/windstille/src/scripting/wrapper.interface.hpp
   trunk/windstille/src/sound/sound_file.hpp
   trunk/windstille/src/sound/sound_manager.cpp
   trunk/windstille/src/sound/sound_manager.hpp
   trunk/windstille/src/sprite2d/data.hpp
   trunk/windstille/src/sprite2d/manager.hpp
   trunk/windstille/src/sprite2d/sprite.hpp
   trunk/windstille/src/sprite3d/data.hpp
   trunk/windstille/src/sprite3d/manager.cpp
   trunk/windstille/src/sprite3d/manager.hpp
Log:
Added missing EOF markers

Modified: trunk/windstille/src/collision/collision_engine.cpp
===================================================================
--- trunk/windstille/src/collision/collision_engine.cpp	2009-02-11 16:08:14 UTC (rev 2456)
+++ trunk/windstille/src/collision/collision_engine.cpp	2009-02-11 16:25:56 UTC (rev 2457)
@@ -745,4 +745,3 @@
 }
 
 /* EOF */
-

Modified: trunk/windstille/src/collision/collision_engine.hpp
===================================================================
--- trunk/windstille/src/collision/collision_engine.hpp	2009-02-11 16:08:14 UTC (rev 2456)
+++ trunk/windstille/src/collision/collision_engine.hpp	2009-02-11 16:25:56 UTC (rev 2457)
@@ -60,3 +60,5 @@
 };
 
 #endif
+
+/* EOF */

Modified: trunk/windstille/src/grenade.cpp
===================================================================
--- trunk/windstille/src/grenade.cpp	2009-02-11 16:08:14 UTC (rev 2456)
+++ trunk/windstille/src/grenade.cpp	2009-02-11 16:25:56 UTC (rev 2457)
@@ -53,3 +53,5 @@
 {
   this->velocity = velocity;
 }
+
+/* EOF */

Modified: trunk/windstille/src/grenade.hpp
===================================================================
--- trunk/windstille/src/grenade.hpp	2009-02-11 16:08:14 UTC (rev 2456)
+++ trunk/windstille/src/grenade.hpp	2009-02-11 16:25:56 UTC (rev 2457)
@@ -41,3 +41,4 @@
 
 #endif
 
+/* EOF */

Modified: trunk/windstille/src/script_manager.hpp
===================================================================
--- trunk/windstille/src/script_manager.hpp	2009-02-11 16:08:14 UTC (rev 2456)
+++ trunk/windstille/src/script_manager.hpp	2009-02-11 16:25:56 UTC (rev 2457)
@@ -104,3 +104,4 @@
 
 #endif
 
+/* EOF */

Modified: trunk/windstille/src/scripting/squirrel_error.cpp
===================================================================
--- trunk/windstille/src/scripting/squirrel_error.cpp	2009-02-11 16:08:14 UTC (rev 2456)
+++ trunk/windstille/src/scripting/squirrel_error.cpp	2009-02-11 16:25:56 UTC (rev 2457)
@@ -35,3 +35,5 @@
 }
 
 }
+
+/* EOF */

Modified: trunk/windstille/src/scripting/squirrel_error.hpp
===================================================================
--- trunk/windstille/src/scripting/squirrel_error.hpp	2009-02-11 16:08:14 UTC (rev 2456)
+++ trunk/windstille/src/scripting/squirrel_error.hpp	2009-02-11 16:25:56 UTC (rev 2457)
@@ -44,3 +44,4 @@
 
 #endif
 
+/* EOF */

Modified: trunk/windstille/src/scripting/wrapper.interface.hpp
===================================================================
--- trunk/windstille/src/scripting/wrapper.interface.hpp	2009-02-11 16:08:14 UTC (rev 2456)
+++ trunk/windstille/src/scripting/wrapper.interface.hpp	2009-02-11 16:25:56 UTC (rev 2457)
@@ -5,3 +5,5 @@
 
 #include "interface.hpp"
 #include "game_objects.hpp"
+
+/* EOF */

Modified: trunk/windstille/src/sound/sound_file.hpp
===================================================================
--- trunk/windstille/src/sound/sound_file.hpp	2009-02-11 16:08:14 UTC (rev 2456)
+++ trunk/windstille/src/sound/sound_file.hpp	2009-02-11 16:25:56 UTC (rev 2457)
@@ -42,3 +42,5 @@
 
 #endif
 
+/* EOF */
+

Modified: trunk/windstille/src/sound/sound_manager.cpp
===================================================================
--- trunk/windstille/src/sound/sound_manager.cpp	2009-02-11 16:08:14 UTC (rev 2456)
+++ trunk/windstille/src/sound/sound_manager.cpp	2009-02-11 16:25:56 UTC (rev 2457)
@@ -307,3 +307,4 @@
   }  
 }
 
+/* EOF */

Modified: trunk/windstille/src/sound/sound_manager.hpp
===================================================================
--- trunk/windstille/src/sound/sound_manager.hpp	2009-02-11 16:08:14 UTC (rev 2456)
+++ trunk/windstille/src/sound/sound_manager.hpp	2009-02-11 16:25:56 UTC (rev 2457)
@@ -95,3 +95,4 @@
 
 #endif
 
+/* EOF */

Modified: trunk/windstille/src/sprite2d/data.hpp
===================================================================
--- trunk/windstille/src/sprite2d/data.hpp	2009-02-11 16:08:14 UTC (rev 2456)
+++ trunk/windstille/src/sprite2d/data.hpp	2009-02-11 16:25:56 UTC (rev 2457)
@@ -57,3 +57,4 @@
 
 #endif
 
+/* EOF */

Modified: trunk/windstille/src/sprite2d/manager.hpp
===================================================================
--- trunk/windstille/src/sprite2d/manager.hpp	2009-02-11 16:08:14 UTC (rev 2456)
+++ trunk/windstille/src/sprite2d/manager.hpp	2009-02-11 16:25:56 UTC (rev 2457)
@@ -46,3 +46,4 @@
 
 #endif
 
+/* EOF */

Modified: trunk/windstille/src/sprite2d/sprite.hpp
===================================================================
--- trunk/windstille/src/sprite2d/sprite.hpp	2009-02-11 16:08:14 UTC (rev 2456)
+++ trunk/windstille/src/sprite2d/sprite.hpp	2009-02-11 16:25:56 UTC (rev 2457)
@@ -107,3 +107,4 @@
 
 #endif
 
+/* EOF */

Modified: trunk/windstille/src/sprite3d/data.hpp
===================================================================
--- trunk/windstille/src/sprite3d/data.hpp	2009-02-11 16:08:14 UTC (rev 2456)
+++ trunk/windstille/src/sprite3d/data.hpp	2009-02-11 16:25:56 UTC (rev 2457)
@@ -135,6 +135,8 @@
   std::vector<ActionFrame> frames;
 };
 
-}
+} // namespace sprite3d
 
 #endif
+
+/* EOF */

Modified: trunk/windstille/src/sprite3d/manager.cpp
===================================================================
--- trunk/windstille/src/sprite3d/manager.cpp	2009-02-11 16:08:14 UTC (rev 2456)
+++ trunk/windstille/src/sprite3d/manager.cpp	2009-02-11 16:25:56 UTC (rev 2457)
@@ -52,4 +52,3 @@
 } // namespace sprite3d
 
 /* EOF */
-

Modified: trunk/windstille/src/sprite3d/manager.hpp
===================================================================
--- trunk/windstille/src/sprite3d/manager.hpp	2009-02-11 16:08:14 UTC (rev 2456)
+++ trunk/windstille/src/sprite3d/manager.hpp	2009-02-11 16:25:56 UTC (rev 2457)
@@ -39,9 +39,10 @@
   Datas datas;
 };
 
-}
+} // namespace sprite3d
 
 extern sprite3d::Manager* sprite3d_manager;
 
 #endif
 
+/* EOF */



From grumbel at mail.berlios.de  Wed Feb 11 18:48:09 2009
From: grumbel at mail.berlios.de (grumbel at BerliOS)
Date: Wed, 11 Feb 2009 18:48:09 +0100
Subject: [Windstille-commit] r2458 - in trunk/windstille/src: . objects
	scripting
Message-ID: <200902111748.n1BHm9ou001296@sheep.berlios.de>

Author: grumbel
Date: 2009-02-11 18:47:58 +0100 (Wed, 11 Feb 2009)
New Revision: 2458

Added:
   trunk/windstille/src/objects/box.cpp
   trunk/windstille/src/objects/box.hpp
   trunk/windstille/src/objects/character.cpp
   trunk/windstille/src/objects/character.hpp
   trunk/windstille/src/objects/elevator.cpp
   trunk/windstille/src/objects/elevator.hpp
   trunk/windstille/src/objects/grenade.cpp
   trunk/windstille/src/objects/grenade.hpp
   trunk/windstille/src/objects/liquid.cpp
   trunk/windstille/src/objects/liquid.hpp
   trunk/windstille/src/objects/player.cpp
   trunk/windstille/src/objects/player.hpp
   trunk/windstille/src/objects/scriptable_object.cpp
   trunk/windstille/src/objects/scriptable_object.hpp
Removed:
   trunk/windstille/src/box.cpp
   trunk/windstille/src/box.hpp
   trunk/windstille/src/character.cpp
   trunk/windstille/src/character.hpp
   trunk/windstille/src/elevator.cpp
   trunk/windstille/src/elevator.hpp
   trunk/windstille/src/grenade.cpp
   trunk/windstille/src/grenade.hpp
   trunk/windstille/src/liquid.cpp
   trunk/windstille/src/liquid.hpp
   trunk/windstille/src/player.cpp
   trunk/windstille/src/player.hpp
   trunk/windstille/src/scriptable_object.cpp
   trunk/windstille/src/scriptable_object.hpp
Modified:
   trunk/windstille/src/SConscript
   trunk/windstille/src/camera.cpp
   trunk/windstille/src/energy_bar.cpp
   trunk/windstille/src/game_session.cpp
   trunk/windstille/src/laser_pointer.cpp
   trunk/windstille/src/scripting/game_objects.hpp
   trunk/windstille/src/sector.cpp
   trunk/windstille/src/trigger.cpp
   trunk/windstille/src/view.cpp
Log:
Moved all Entity objects into objects/

Modified: trunk/windstille/src/SConscript
===================================================================
--- trunk/windstille/src/SConscript	2009-02-11 16:25:56 UTC (rev 2457)
+++ trunk/windstille/src/SConscript	2009-02-11 17:47:58 UTC (rev 2458)
@@ -40,149 +40,135 @@
 # env['ENV']['LSBCC_SHAREDLIBS'] = 'png2:SDL:SDL_image:vorbis:ogg:openal:physfs'
 
 env.Program('../windstille', [
-'armature_test.cpp',
 'armature/armature.cpp',
+'armature/bone.cpp',
 'armature/mesh.cpp',
 'armature/model.cpp',
 'armature/pose.cpp',
-'armature/bone.cpp',
+'armature_test.cpp',
 'baby_xml.cpp',
 'blitter.cpp',
-'box.cpp',
 'camera.cpp',
-'character.cpp',
+'collision/collision_data.cpp',
+'collision/collision_engine.cpp',
+'collision/collision_object.cpp',
+'collision/collision_test.cpp',
+'collision/ladder_contact.cpp',
+'collision/stair_contact.cpp',
 'command_line.cpp',
 'command_line_generic.cpp',
+'config.cpp',
 'console.cpp',
 'controller_def.cpp',
 'controller_help_window.cpp',
 'conversation.cpp',
 'dialog_manager.cpp',
-'elevator.cpp',
-'energy_bar.cpp',
-'entity.cpp',
-'file_reader.cpp',
-'sexpr_file_reader.cpp',
-'config.cpp',
-'game_object.cpp',
-'game_session.cpp',
-'globals.cpp',
-'getter.cpp',
-'geometry_test.cpp',
-'graphic_context_state.cpp',
-'grenade.cpp',
-'inventory.cpp',
-'laser_pointer.cpp',
-'liquid.cpp',
-'navigation_test.cpp',
-'pda.cpp',
-'physics.cpp',
-'pistol.cpp',
-'response_curve.cpp',
-'player.cpp',
-'random.cpp',
-'display/render_buffer.cpp',
-'screen.cpp',
-'screen_manager.cpp',
-'scriptable_object.cpp',
-'script_manager.cpp',
-'sector.cpp',
-'sprite3dview.cpp',
-'sprite2dview.cpp',
-'text_area.cpp',
-'tile.cpp',
-'tile_factory.cpp',
-'tile_map.cpp',
-'tile_packer.cpp',
-'tile_description.cpp',
-'timer.cpp',
-'trigger.cpp',
-'title_screen.cpp',
-'util.cpp',
-'view.cpp',
-'windstille_main.cpp',
-'objects/shockwave.cpp',
-'objects/test_object.cpp',
-'objects/bomb.cpp',
-'objects/background_gradient.cpp',
-'objects/hedgehog.cpp',
-'objects/spider_mine.cpp',
-'objects/swarm.cpp',
-'objects/vrdummy.cpp',
-'objects/nightvision.cpp',
-'collision/collision_data.cpp',
-'collision/collision_engine.cpp',
-'collision/collision_object.cpp',
-'collision/collision_test.cpp',
-'collision/ladder_contact.cpp',
-'collision/stair_contact.cpp',
 'display/display.cpp',
 'display/drawing_context.cpp',
 'display/framebuffer.cpp',
+'display/opengl_state.cpp',
+'display/render_buffer.cpp',
 'display/scene_context.cpp',
-'display/vertex_array_drawing_request.cpp',
-'display/opengl_state.cpp',
+'display/shader_object.cpp',
+'display/shader_program.cpp',
 'display/surface.cpp',
 'display/surface_manager.cpp',
 'display/texture.cpp',
 'display/texture_manager.cpp',
-'display/shader_program.cpp',
-'display/shader_object.cpp',
+'display/vertex_array_drawing_request.cpp',
+'energy_bar.cpp',
+'entity.cpp',
+'file_reader.cpp',
 'font/border_font_effect.cpp',
 'font/fonts.cpp',
 'font/ttf_font.cpp',
+'game_object.cpp',
+'game_session.cpp',
+'geometry_test.cpp',
+'getter.cpp',
+'globals.cpp',
+'graphic_context_state.cpp',
 'gui/automap.cpp',
 'gui/button.cpp',
-'gui/menu_component.cpp',
-'gui/menu_item.cpp',
-'gui/label.cpp',
 'gui/component.cpp',
 'gui/component_factory.cpp',
 'gui/grid_component.cpp',
 'gui/group_component.cpp',
 'gui/gui_manager.cpp',
+'gui/label.cpp',
 'gui/list_view.cpp',
+'gui/menu_component.cpp',
+'gui/menu_item.cpp',
 'gui/root_component.cpp',
 'gui/slider.cpp',
 'gui/tab_component.cpp',
 'gui/text_view.cpp',
 'input/controller.cpp',
-'input/wiimote.cpp',
 'input/controller_description.cpp',
 'input/input_configurator.cpp',
 'input/input_manager.cpp',
 'input/input_manager_impl.cpp',
 'input/input_manager_sdl.cpp',
+'input/wiimote.cpp',
+'inventory.cpp',
+'laser_pointer.cpp',
 'lisp/getters.cpp',
 'lisp/lexer.cpp',
 'lisp/lisp.cpp',
 'lisp/parser.cpp',
 'lisp/properties.cpp',
 'lisp/writer.cpp',
-'navigation/segment_position.cpp',
-'navigation/navigation_graph.cpp',
-'navigation/node.cpp',
-'navigation/segment.cpp',
-'navigation/properties.cpp',
+'math/line.cpp',
 'math/matrix.cpp',
 'math/origin.cpp',
 'math/quaternion.cpp',
 'math/rect.cpp',
 'math/vector.cpp',
-'math/line.cpp',
 'menu_manager.cpp',
+'navigation/navigation_graph.cpp',
+'navigation/node.cpp',
+'navigation/properties.cpp',
+'navigation/segment.cpp',
+'navigation/segment_position.cpp',
+'navigation_test.cpp',
+'objects/background_gradient.cpp',
+'objects/bomb.cpp',
+'objects/box.cpp',
+'objects/character.cpp',
+'objects/elevator.cpp',
+'objects/grenade.cpp',
+'objects/hedgehog.cpp',
+'objects/liquid.cpp',
+'objects/nightvision.cpp',
+'objects/player.cpp',
+'objects/scriptable_object.cpp',
+'objects/shockwave.cpp',
+'objects/spider_mine.cpp',
+'objects/swarm.cpp',
+'objects/test_object.cpp',
+'objects/vrdummy.cpp',
 'particle_viewer.cpp',
+'particles/deform_drawer.cpp',
 'particles/particle_system.cpp',
 'particles/spark_drawer.cpp',
-'particles/deform_drawer.cpp',
 'particles/surface_drawer.cpp',
+'pda.cpp',
 'physfs/physfs_sdl.cpp',
 'physfs/physfs_stream.cpp',
+'physics.cpp',
+'pistol.cpp',
+'random.cpp',
+'response_curve.cpp',
+'screen.cpp',
+'screen_manager.cpp',
+'script_manager.cpp',
 'scripting/game_objects.cpp',
 'scripting/interface.cpp',
 'scripting/squirrel_error.cpp',
+'scripting/util.cpp',
 'scripting/wrapper.cpp',
-'scripting/util.cpp',
+'sector.cpp',
+'sexpr_file_reader.cpp',
 'sound/sound_file.cpp',
 'sound/sound_manager.cpp',
 'sound/sound_source.cpp',
@@ -190,9 +176,23 @@
 'sprite2d/data.cpp',
 'sprite2d/manager.cpp',
 'sprite2d/sprite.cpp',
+'sprite2dview.cpp',
 'sprite3d/data.cpp',
 'sprite3d/manager.cpp',
-'sprite3d/sprite3d.cpp'
+'sprite3d/sprite3d.cpp',
+'sprite3dview.cpp',
+'text_area.cpp',
+'tile.cpp',
+'tile_description.cpp',
+'tile_factory.cpp',
+'tile_map.cpp',
+'tile_packer.cpp',
+'timer.cpp',
+'title_screen.cpp',
+'trigger.cpp',
+'util.cpp',
+'view.cpp',
+'windstille_main.cpp',
 ])
 
 # EOF #

Deleted: trunk/windstille/src/box.cpp
===================================================================
--- trunk/windstille/src/box.cpp	2009-02-11 16:25:56 UTC (rev 2457)
+++ trunk/windstille/src/box.cpp	2009-02-11 17:47:58 UTC (rev 2458)
@@ -1,98 +0,0 @@
-/*
-**  Windstille - A Sci-Fi Action-Adventure Game
-**  Copyright (C) 2005 David Kamphausen <david.kamphausen at web.de>
-**
-**  This program is free software: you can redistribute it and/or modify
-**  it under the terms of the GNU General Public License as published by
-**  the Free Software Foundation, either version 3 of the License, or
-**  (at your option) any later version.
-**  
-**  This program is distributed in the hope that it will be useful,
-**  but WITHOUT ANY WARRANTY; without even the implied warranty of
-**  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
-**  GNU General Public License for more details.
-**  
-**  You should have received a copy of the GNU General Public License
-**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
-*/
-
-#include <stdexcept>
-#include <boost/bind.hpp>
-#include "box.hpp"
-#include "globals.hpp"
-#include "collision/collision_engine.hpp"
-#include "math/vector.hpp"
-#include "tile_map.hpp"
-#include "random.hpp"
-#include "sprite2d/manager.hpp"
-
-Box::Box(FileReader& props)
-{
-  gravity = 0.0f;
-  float width  = 64.0f;
-  float height = 64.0f;
-  std::string spritename;
-  Vector vel;
-
-  props.get("sprite", spritename);
-  props.get("pos", pos);
-  props.get("width", width);
-  props.get("height", height);
-  props.get("vel", vel);
-  props.get("name", name);
-  props.get("gravity", gravity);
-  props.print_unused_warnings("box object");
-  
-  if(spritename == "")
-    throw std::runtime_error("No sprite name specified in Box");
-  
-  sprite = Sprite(spritename);
-  
-  colobj = new CollisionObject(this, Rectf(0, 0, width, height));
-  colobj->set_velocity(vel);
-  colobj->set_pos(Vector(pos.x, pos.y));
-
-  Sector::current()->get_collision_engine()->add(colobj);
-
-  colobj->sig_collision().connect(boost::bind(&Box::collision, this, _1));
-}
-
-Box::~Box()
-{
-  Sector::current()->get_collision_engine()->remove(colobj);
-}
-
-void 
-Box::collision(const CollisionData& data)
-{
-  //std::cout << this << ": Collision Event" << std::endl;
-  if ((data.direction.x > 0 && colobj->get_velocity().x < 0) ||
-      (data.direction.x < 0 && colobj->get_velocity().x > 0))
-    {
-      colobj->set_velocity(Vector(-colobj->get_velocity().x, colobj->get_velocity().y));
-    }
-  
-  if ((data.direction.y > 0 && colobj->get_velocity().y < 0) ||
-      (data.direction.y < 0 && colobj->get_velocity().y > 0))
-    {
-      colobj->set_velocity(Vector(colobj->get_velocity().x, -colobj->get_velocity().y));
-    }
-}
-
-void 
-Box::update(float delta)
-{
-  colobj->set_velocity(Vector(colobj->get_velocity().x, 
-                              colobj->get_velocity().y + gravity * delta));
-
-  sprite.update(delta);
-  pos = colobj->get_pos();
-}
-
-void 
-Box::draw(SceneContext& sc)
-{
-  sc.color().draw(sprite, pos, 10.0f);
-}
-
-/* EOF */

Deleted: trunk/windstille/src/box.hpp
===================================================================
--- trunk/windstille/src/box.hpp	2009-02-11 16:25:56 UTC (rev 2457)
+++ trunk/windstille/src/box.hpp	2009-02-11 17:47:58 UTC (rev 2458)
@@ -1,48 +0,0 @@
-/*
-**  Windstille - A Sci-Fi Action-Adventure Game
-**  Copyright (C) 2005 David Kamphausen <david.kamphausen at web.de>
-**
-**  This program is free software: you can redistribute it and/or modify
-**  it under the terms of the GNU General Public License as published by
-**  the Free Software Foundation, either version 3 of the License, or
-**  (at your option) any later version.
-**  
-**  This program is distributed in the hope that it will be useful,
-**  but WITHOUT ANY WARRANTY; without even the implied warranty of
-**  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
-**  GNU General Public License for more details.
-**  
-**  You should have received a copy of the GNU General Public License
-**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
-*/
-
-#ifndef HEADER_WINDSTILLE_BOX_HPP
-#define HEADER_WINDSTILLE_BOX_HPP
-
-#include "entity.hpp"
-#include "collision/collision_object.hpp"
-#include "sector.hpp"
-#include "particles/particle_system.hpp"
-#include "sprite2d/sprite.hpp"
-
-class Box : public Entity
-{
-private:
-  Sprite sprite;
-  CollisionObject* colobj;
-  float gravity;
-
-public:
-  Box(FileReader& props);
-  virtual ~Box();
-
-  void collision(const CollisionData& data); 
-
-  void update(float delta);
-
-  void draw(SceneContext& gc);
-};
-
-#endif
-
-/* EOF */

Modified: trunk/windstille/src/camera.cpp
===================================================================
--- trunk/windstille/src/camera.cpp	2009-02-11 16:25:56 UTC (rev 2457)
+++ trunk/windstille/src/camera.cpp	2009-02-11 17:47:58 UTC (rev 2458)
@@ -16,7 +16,7 @@
 **  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
-#include "player.hpp"
+#include "objects/player.hpp"
 #include "sector.hpp"
 #include "script_manager.hpp"
 #include "display/display.hpp"

Deleted: trunk/windstille/src/character.cpp
===================================================================
--- trunk/windstille/src/character.cpp	2009-02-11 16:25:56 UTC (rev 2457)
+++ trunk/windstille/src/character.cpp	2009-02-11 17:47:58 UTC (rev 2458)
@@ -1,85 +0,0 @@
-/*
-**  Windstille - A Sci-Fi Action-Adventure Game
-**  Copyright (C) 2000 Ingo Ruhnke <grumbel at gmx.de>
-**
-**  This program is free software: you can redistribute it and/or modify
-**  it under the terms of the GNU General Public License as published by
-**  the Free Software Foundation, either version 3 of the License, or
-**  (at your option) any later version.
-**  
-**  This program is distributed in the hope that it will be useful,
-**  but WITHOUT ANY WARRANTY; without even the implied warranty of
-**  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
-**  GNU General Public License for more details.
-**  
-**  You should have received a copy of the GNU General Public License
-**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
-*/
-
-#include "character.hpp"
-#include "sector.hpp"
-#include "game_session.hpp"
-#include "scripting/wrapper.interface.hpp"
-#include "dialog_manager.hpp"
-#include "script_manager.hpp"
-#include "physfs/physfs_stream.hpp"
-#include "console.hpp"
-#include "sprite3d/manager.hpp"
-#include "util.hpp"
-
-#include <exception>
-
-Character::Character(FileReader& props)
-{
-  set_useable(true);
-  use_verb = "Talk";
-  z_pos = 100.0f;
-
-  std::string sprite3d_filename = "models/characters/jane/jane.wsprite";
-  std::string action_name;
-
-  props.get("name", name);
-  props.get("pos", pos);
-  props.get("z-pos", z_pos);
-  props.get("sprite3d", sprite3d_filename);
-  props.get("action", action_name);
-  props.print_unused_warnings("character");
-  
-  sprite = Sprite3D(sprite3d_filename);
-
-  if (!action_name.empty())
-    sprite.set_action(action_name);
-}
-
-Character::~Character()
-{
-}
-
-void
-Character::update(float delta)
-{   
-  sprite.update(delta);
-}
-
-void
-Character::draw (SceneContext& sc)
-{
-  sprite.draw(sc.color(), pos, z_pos);
-}
-
-void
-Character::use()
-{
-  std::string filename = basename(Sector::current()->get_filename());
-  filename.erase(filename.find('.'));
-  filename = "scripts/" + filename + "/" + name + ".nut";
-
-  try 
-    {
-      script_manager->run_script_file(filename);
-    } catch (std::exception& e) {
-      console << e.what() << std::endl;
-    }
-}
-
-/* EOF */

Deleted: trunk/windstille/src/character.hpp
===================================================================
--- trunk/windstille/src/character.hpp	2009-02-11 16:25:56 UTC (rev 2457)
+++ trunk/windstille/src/character.hpp	2009-02-11 17:47:58 UTC (rev 2458)
@@ -1,42 +0,0 @@
-/*
-**  Windstille - A Sci-Fi Action-Adventure Game
-**  Copyright (C) 2000 Ingo Ruhnke <grumbel at gmx.de>
-**
-**  This program is free software: you can redistribute it and/or modify
-**  it under the terms of the GNU General Public License as published by
-**  the Free Software Foundation, either version 3 of the License, or
-**  (at your option) any later version.
-**  
-**  This program is distributed in the hope that it will be useful,
-**  but WITHOUT ANY WARRANTY; without even the implied warranty of
-**  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
-**  GNU General Public License for more details.
-**  
-**  You should have received a copy of the GNU General Public License
-**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
-*/
-
-#ifndef HEADER_WINDSTILLE_CHARACTER_HPP
-#define HEADER_WINDSTILLE_CHARACTER_HPP
-
-#include "entity.hpp"
-#include "sprite3d/sprite3d.hpp"
-
-class Character : public Entity
-{
-private:
-  Sprite3D sprite;
-  float z_pos;
-    
-public:
-  Character(FileReader& props);
-  ~Character();
-  
-  void update(float delta);
-  void draw (SceneContext& gc);
-  void use();
-};
-
-#endif
-
-/* EOF */

Deleted: trunk/windstille/src/elevator.cpp
===================================================================
--- trunk/windstille/src/elevator.cpp	2009-02-11 16:25:56 UTC (rev 2457)
+++ trunk/windstille/src/elevator.cpp	2009-02-11 17:47:58 UTC (rev 2458)
@@ -1,63 +0,0 @@
-/*
-**  Windstille - A Sci-Fi Action-Adventure Game
-**  Copyright (C) 2005 Ingo Ruhnke <grumbel at gmx.de>
-**
-**  This program is free software: you can redistribute it and/or modify
-**  it under the terms of the GNU General Public License as published by
-**  the Free Software Foundation, either version 3 of the License, or
-**  (at your option) any later version.
-**  
-**  This program is distributed in the hope that it will be useful,
-**  but WITHOUT ANY WARRANTY; without even the implied warranty of
-**  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
-**  GNU General Public License for more details.
-**  
-**  You should have received a copy of the GNU General Public License
-**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
-*/
-
-#include <stdexcept>
-#include "elevator.hpp"
-#include "sector.hpp"
-#include "collision/collision_engine.hpp"
-#include "sprite2d/manager.hpp"
-
-Elevator::Elevator(FileReader& props)
-{
-  std::string spritename;
-
-  props.get("sprite", spritename);
-  props.get("pos", pos);
-  props.get("name", name);
-  props.print_unused_warnings("elevator");
-
-  if(spritename == "")
-    throw std::runtime_error("No sprite name specified in Elevator");
-
-  sprite = Sprite(spritename);
-  size  = Size(128, 64);
-  colobject = new CollisionObject(this, Rectf(Vector(0,0), size));
-  Sector::current()->get_collision_engine()->add(colobject);
-  colobject->set_pos(pos);
-}
-
-Elevator::~Elevator()
-{
-  if(Sector::current()->get_collision_engine())
-    Sector::current()->get_collision_engine()->remove(colobject);
-}
-
-void
-Elevator::draw(SceneContext& sc)
-{
-  sc.color().draw(sprite, pos, 10.0f);
-}
-
-void
-Elevator::update(float delta)
-{
-  sprite.update(delta);
-  pos = colobject->get_pos();
-}
-
-/* EOF */

Deleted: trunk/windstille/src/elevator.hpp
===================================================================
--- trunk/windstille/src/elevator.hpp	2009-02-11 16:25:56 UTC (rev 2457)
+++ trunk/windstille/src/elevator.hpp	2009-02-11 17:47:58 UTC (rev 2458)
@@ -1,42 +0,0 @@
-/*
-**  Windstille - A Sci-Fi Action-Adventure Game
-**  Copyright (C) 2005 Ingo Ruhnke <grumbel at gmx.de>
-**
-**  This program is free software: you can redistribute it and/or modify
-**  it under the terms of the GNU General Public License as published by
-**  the Free Software Foundation, either version 3 of the License, or
-**  (at your option) any later version.
-**  
-**  This program is distributed in the hope that it will be useful,
-**  but WITHOUT ANY WARRANTY; without even the implied warranty of
-**  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
-**  GNU General Public License for more details.
-**  
-**  You should have received a copy of the GNU General Public License
-**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
-*/
-
-#ifndef HEADER_WINDSTILLE_ELEVATOR_HPP
-#define HEADER_WINDSTILLE_ELEVATOR_HPP
-
-#include "entity.hpp"
-#include "sprite2d/sprite.hpp"
-
-/** */
-class Elevator : public Entity
-{
-private:
-  Sizef size;
-  CollisionObject* colobject;
-  Sprite sprite;
-public:
-  Elevator(FileReader& props);
-  ~Elevator();
-
-  void draw(SceneContext& sc);
-  void update(float delta);
-};
-
-#endif
-
-/* EOF */

Modified: trunk/windstille/src/energy_bar.cpp
===================================================================
--- trunk/windstille/src/energy_bar.cpp	2009-02-11 16:25:56 UTC (rev 2457)
+++ trunk/windstille/src/energy_bar.cpp	2009-02-11 17:47:58 UTC (rev 2458)
@@ -17,7 +17,7 @@
 */
 
 #include "globals.hpp"
-#include "player.hpp"
+#include "objects/player.hpp"
 #include "energy_bar.hpp"
 
 EnergyBar::EnergyBar()

Modified: trunk/windstille/src/game_session.cpp
===================================================================
--- trunk/windstille/src/game_session.cpp	2009-02-11 16:25:56 UTC (rev 2457)
+++ trunk/windstille/src/game_session.cpp	2009-02-11 17:47:58 UTC (rev 2458)
@@ -29,7 +29,7 @@
 #include "sector.hpp"
 #include "console.hpp"
 #include "game_object.hpp"
-#include "player.hpp"
+#include "objects/player.hpp"
 #include "tile_map.hpp"
 #include "screen_manager.hpp"
 #include "view.hpp"

Deleted: trunk/windstille/src/grenade.cpp
===================================================================
--- trunk/windstille/src/grenade.cpp	2009-02-11 16:25:56 UTC (rev 2457)
+++ trunk/windstille/src/grenade.cpp	2009-02-11 17:47:58 UTC (rev 2458)
@@ -1,57 +0,0 @@
-/*
-**  Windstille - A Sci-Fi Action-Adventure Game
-**  Copyright (C) 2005 Ingo Ruhnke <grumbel at gmx.de>
-**
-**  This program is free software: you can redistribute it and/or modify
-**  it under the terms of the GNU General Public License as published by
-**  the Free Software Foundation, either version 3 of the License, or
-**  (at your option) any later version.
-**  
-**  This program is distributed in the hope that it will be useful,
-**  but WITHOUT ANY WARRANTY; without even the implied warranty of
-**  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
-**  GNU General Public License for more details.
-**  
-**  You should have received a copy of the GNU General Public License
-**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
-*/
-
-#include "grenade.hpp"
-#include "sector.hpp"
-#include "collision/collision_engine.hpp"
-
-Grenade::Grenade()
-  : sprite("models/objects/grenade/grenade.wsprite"), physics(this)
-{
-  c_object.reset(new CollisionObject(this, Rectf(0, 0, 32, 32)));
-  physics.register_collobj(*c_object);
-
-  Sector::current()->get_collision_engine()->add(c_object.get());
-}
-
-Grenade::~Grenade()
-{
-}
-
-void
-Grenade::draw(SceneContext& sc)
-{
-  sprite.draw(sc.color(), pos, 0);
-}
-
-void
-Grenade::update(float delta)
-{
-  sprite.update(delta);
-  physics.update(delta);
-  c_object->set_pos(pos);
-  c_object->set_velocity(velocity);
-}
-
-void
-Grenade::set_velocity(const Vector& velocity)
-{
-  this->velocity = velocity;
-}
-
-/* EOF */

Deleted: trunk/windstille/src/grenade.hpp
===================================================================
--- trunk/windstille/src/grenade.hpp	2009-02-11 16:25:56 UTC (rev 2457)
+++ trunk/windstille/src/grenade.hpp	2009-02-11 17:47:58 UTC (rev 2458)
@@ -1,44 +0,0 @@
-/*
-**  Windstille - A Sci-Fi Action-Adventure Game
-**  Copyright (C) 2005 Matthias Braun <matze at braunis.de>
-**
-**  This program is free software: you can redistribute it and/or modify
-**  it under the terms of the GNU General Public License as published by
-**  the Free Software Foundation, either version 3 of the License, or
-**  (at your option) any later version.
-**  
-**  This program is distributed in the hope that it will be useful,
-**  but WITHOUT ANY WARRANTY; without even the implied warranty of
-**  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
-**  GNU General Public License for more details.
-**  
-**  You should have received a copy of the GNU General Public License
-**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
-*/
-#ifndef HEADER_WINDSTILLE_GRENADE_HPP
-#define HEADER_WINDSTILLE_GRENADE_HPP
-
-#include "entity.hpp"
-#include "physics.hpp"
-#include "sprite3d/sprite3d.hpp"
-#include <memory>
-
-class Grenade : public Entity
-{
-public:
-  Grenade();
-  virtual ~Grenade();
-
-  void draw(SceneContext& sc);
-  void update(float delta);
-  void set_velocity(const Vector& vel);
-
-private:
-  Sprite3D sprite;
-  Physics physics;
-  std::auto_ptr<CollisionObject> c_object;
-};
-
-#endif
-
-/* EOF */

Modified: trunk/windstille/src/laser_pointer.cpp
===================================================================
--- trunk/windstille/src/laser_pointer.cpp	2009-02-11 16:25:56 UTC (rev 2457)
+++ trunk/windstille/src/laser_pointer.cpp	2009-02-11 17:47:58 UTC (rev 2458)
@@ -18,7 +18,7 @@
 #include <config.h>
 
 #include "display/vertex_array_drawing_request.hpp"
-#include "player.hpp"
+#include "objects/player.hpp"
 #include "collision/collision_engine.hpp"
 #include "sector.hpp"
 #include "tile_map.hpp"

Deleted: trunk/windstille/src/liquid.cpp
===================================================================
--- trunk/windstille/src/liquid.cpp	2009-02-11 16:25:56 UTC (rev 2457)
+++ trunk/windstille/src/liquid.cpp	2009-02-11 17:47:58 UTC (rev 2458)
@@ -1,140 +0,0 @@
-/*
-**  Windstille - A Sci-Fi Action-Adventure Game
-**  Copyright (C) 2005 Ingo Ruhnke <grumbel at gmx.de>
-**
-**  This program is free software: you can redistribute it and/or modify
-**  it under the terms of the GNU General Public License as published by
-**  the Free Software Foundation, either version 3 of the License, or
-**  (at your option) any later version.
-**  
-**  This program is distributed in the hope that it will be useful,
-**  but WITHOUT ANY WARRANTY; without even the implied warranty of
-**  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
-**  GNU General Public License for more details.
-**  
-**  You should have received a copy of the GNU General Public License
-**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
-*/
-
-#include "display/vertex_array_drawing_request.hpp"
-#include "random.hpp"
-#include "liquid.hpp"
-
-#define SAMPLES 5
-
-Liquid::Liquid(FileReader& props)
-{
-  int width = 10;
-  t = 0;
-
-  props.get("pos",    pos);
-  props.get("width",  width);
-  props.print_unused_warnings("Liquid");
-
-  heightfield1 = &heightfield_store1;
-  heightfield2 = &heightfield_store2;
-
-  heightfield1->resize(width * SAMPLES, 0);
-  heightfield2->resize(width * SAMPLES, 0);
-  
-  for(std::vector<float>::size_type i = 2; i < heightfield1->size()-2; ++i)
-    {
-      (*heightfield1)[i] = sin(i/float(heightfield1->size()) * 10.0f) * 0.5f
-        + sin(i/float(heightfield1->size()) * 5.0f) * .5f;
-      (*heightfield2)[i] = (*heightfield1)[i];
-    }
-
-  for(int i = 50; i < 70 && i < int(heightfield1->size()); ++i)
-    (*heightfield1)[i] += 0.0025f;
-
-  texture = Texture("images/textures/water.png");
-  texture.set_wrap(GL_REPEAT);
-}
-
-Liquid::~Liquid()
-{
-}
-
-void
-Liquid::draw(SceneContext& sc)
-{
-  float texscale = 1.0f/128.0f;
-  {
-    VertexArrayDrawingRequest* array = new VertexArrayDrawingRequest(Vector(pos.x, pos.y), 10000,
-                                                                     sc.light().get_modelview());
-    array->set_texture(texture);
-    array->set_mode(GL_QUAD_STRIP);
-    array->set_blend_func(GL_SRC_ALPHA, GL_ONE_MINUS_SRC_ALPHA);
-
-    for(std::vector<float>::size_type i = 0; i < heightfield1->size(); ++i)
-      {
-        float c = 0.5f;
-        if (i > 0)
-          {
-            float angle = atan2(32.0f* ((*heightfield1)[i] - (*heightfield1)[i-1]), 3.2f);
-            c = std::min(1.0f, std::max(0.5f, 8.0f * (angle/float(M_PI)) + 0.5f));
-          }
-
-        array->color(Color(0.5f, 0.5f, 1.0f, 0.7f));
-        array->texcoord((i * 32.0f/SAMPLES) * texscale + sin(t + i/10.0f)*0.2f,
-                        (-32.0f * (*heightfield1)[i] + 8.0f) * texscale + sin(t+i/10.0f)*0.2f);
-        array->vertex(i * 32.0f/SAMPLES, -32.0f * (*heightfield1)[i] + 8.0f);
-
-        array->color(Color(c, c, 1.0f, 1.0f));
-        array->texcoord((i * 32.0f/SAMPLES) * texscale + sin(t + i/10.0f)*0.2f,
-                        (-32.0f * (*heightfield1)[i]) * texscale + sin(t+i/10.0f)*0.2f);
-        array->vertex(i * 32.0f/SAMPLES, -32.0f * (*heightfield1)[i]);
-      }
-
-    sc.color().draw(array);
-  }
-  {
-    VertexArrayDrawingRequest* array = new VertexArrayDrawingRequest(Vector(pos.x, pos.y), 10000,
-                                                                     sc.light().get_modelview());
-    array->set_texture(texture);
-    array->set_mode(GL_QUAD_STRIP);
-    array->set_blend_func(GL_SRC_ALPHA, GL_ONE_MINUS_SRC_ALPHA);
-
-    for(std::vector<float>::size_type i = 0; i < heightfield1->size(); ++i)
-      {
-        array->color(Color(0.0f, 0.0f, 0.5f, 0.7f));
-        array->texcoord((i * 32.0f/SAMPLES) * texscale + sin(t + i/10.0f)*0.2f,
-                        (64.0f) * texscale + sin(t+i/10.0f)*0.2f);
-        array->vertex(i * 32.0f/SAMPLES, 64.0f);
-
-        array->color(Color(0.5f, 0.5f, 1.0f, 0.7f));
-        array->texcoord((i * 32.0f/SAMPLES) * texscale + sin(t + i/10.0f)*0.2f,
-                        (-32.0f * (*heightfield1)[i] + 8.0f) * texscale + sin(t+i/10.0f)*0.2f);
-        array->vertex(i * 32.0f/SAMPLES, -32.0f * (*heightfield1)[i] + 8.0f);
-      }
-
-    sc.color().draw(array);
-  }
-}
-
-void
-Liquid::update(float delta)
-{
-  t += delta * 1.0f;
-  float factor = 0.1f * delta;
-
-  for(int samples = 0; samples < 3; ++samples)
-    {
-      for(std::vector<float>::size_type i = 2; i < heightfield1->size()-2; ++i)
-        {
-          float value = 
-            factor * ((*heightfield1)[i-2] +
-                      (*heightfield1)[i-1] +
-                      (*heightfield1)[i+1] +
-                      (*heightfield1)[i+2])                      
-            - (factor * 4 * (*heightfield1)[i])
-            + (2*(*heightfield1)[i])
-            - (*heightfield2)[i];
-      
-          (*heightfield2)[i] = value * 0.99999f;
-        }
-      std::swap(heightfield2, heightfield1);
-    }
-}
-
-/* EOF */

Deleted: trunk/windstille/src/liquid.hpp
===================================================================
--- trunk/windstille/src/liquid.hpp	2009-02-11 16:25:56 UTC (rev 2457)
+++ trunk/windstille/src/liquid.hpp	2009-02-11 17:47:58 UTC (rev 2458)
@@ -1,52 +0,0 @@
-/*
-**  Windstille - A Sci-Fi Action-Adventure Game
-**  Copyright (C) 2005 Ingo Ruhnke <grumbel at gmx.de>
-**
-**  This program is free software: you can redistribute it and/or modify
-**  it under the terms of the GNU General Public License as published by
-**  the Free Software Foundation, either version 3 of the License, or
-**  (at your option) any later version.
-**  
-**  This program is distributed in the hope that it will be useful,
-**  but WITHOUT ANY WARRANTY; without even the implied warranty of
-**  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
-**  GNU General Public License for more details.
-**  
-**  You should have received a copy of the GNU General Public License
-**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
-*/
-
-#ifndef HEADER_WINDSTILLE_LIQUID_HPP
-#define HEADER_WINDSTILLE_LIQUID_HPP
-
-#include <vector>
-#include "entity.hpp"
-
-/** */
-class Liquid : public Entity
-{
-private:
-  Texture texture;
-  float t;
-
-  std::vector<float> heightfield_store1;
-  std::vector<float> heightfield_store2;
-
-  std::vector<float>* heightfield1;
-  std::vector<float>* heightfield2;
-
-public:
-  Liquid(FileReader& props);
-  ~Liquid();
-
-  void draw(SceneContext& sc);
-  void update(float delta);
-
-private:
-  Liquid (const Liquid&);
-  Liquid& operator= (const Liquid&);
-};
-
-#endif
-
-/* EOF */

Copied: trunk/windstille/src/objects/box.cpp (from rev 2456, trunk/windstille/src/box.cpp)


Property changes on: trunk/windstille/src/objects/box.cpp
___________________________________________________________________
Name: svn:keywords
   + Id
Name: svn:mergeinfo
   + 
Name: svn:eol-style
   + native

Copied: trunk/windstille/src/objects/box.hpp (from rev 2456, trunk/windstille/src/box.hpp)


Property changes on: trunk/windstille/src/objects/box.hpp
___________________________________________________________________
Name: svn:keywords
   + Id
Name: svn:mergeinfo
   + 
Name: svn:eol-style
   + native

Copied: trunk/windstille/src/objects/character.cpp (from rev 2456, trunk/windstille/src/character.cpp)


Property changes on: trunk/windstille/src/objects/character.cpp
___________________________________________________________________
Name: svn:keywords
   + Id
Name: svn:mergeinfo
   + 
Name: svn:eol-style
   + native

Copied: trunk/windstille/src/objects/character.hpp (from rev 2456, trunk/windstille/src/character.hpp)


Property changes on: trunk/windstille/src/objects/character.hpp
___________________________________________________________________
Name: svn:keywords
   + Id
Name: svn:mergeinfo
   + 
Name: svn:eol-style
   + native

Copied: trunk/windstille/src/objects/elevator.cpp (from rev 2456, trunk/windstille/src/elevator.cpp)


Property changes on: trunk/windstille/src/objects/elevator.cpp
___________________________________________________________________
Name: svn:keywords
   + Id
Name: svn:mergeinfo
   + 

Copied: trunk/windstille/src/objects/elevator.hpp (from rev 2456, trunk/windstille/src/elevator.hpp)


Property changes on: trunk/windstille/src/objects/elevator.hpp
___________________________________________________________________
Name: svn:keywords
   + Id
Name: svn:mergeinfo
   + 

Copied: trunk/windstille/src/objects/grenade.cpp (from rev 2457, trunk/windstille/src/grenade.cpp)


Property changes on: trunk/windstille/src/objects/grenade.cpp
___________________________________________________________________
Name: svn:mergeinfo
   + 

Copied: trunk/windstille/src/objects/grenade.hpp (from rev 2457, trunk/windstille/src/grenade.hpp)


Property changes on: trunk/windstille/src/objects/grenade.hpp
___________________________________________________________________
Name: svn:mergeinfo
   + 

Copied: trunk/windstille/src/objects/liquid.cpp (from rev 2456, trunk/windstille/src/liquid.cpp)


Property changes on: trunk/windstille/src/objects/liquid.cpp
___________________________________________________________________
Name: svn:mergeinfo
   + 

Copied: trunk/windstille/src/objects/liquid.hpp (from rev 2456, trunk/windstille/src/liquid.hpp)


Property changes on: trunk/windstille/src/objects/liquid.hpp
___________________________________________________________________
Name: svn:mergeinfo
   + 

Copied: trunk/windstille/src/objects/player.cpp (from rev 2456, trunk/windstille/src/player.cpp)


Property changes on: trunk/windstille/src/objects/player.cpp
___________________________________________________________________
Name: svn:keywords
   + Id
Name: svn:mergeinfo
   + 
Name: svn:eol-style
   + native

Copied: trunk/windstille/src/objects/player.hpp (from rev 2456, trunk/windstille/src/player.hpp)


Property changes on: trunk/windstille/src/objects/player.hpp
___________________________________________________________________
Name: svn:keywords
   + Id
Name: svn:mergeinfo
   + 
Name: svn:eol-style
   + native

Copied: trunk/windstille/src/objects/scriptable_object.cpp (from rev 2456, trunk/windstille/src/scriptable_object.cpp)


Property changes on: trunk/windstille/src/objects/scriptable_object.cpp
___________________________________________________________________
Name: svn:keywords
   + Id
Name: svn:mergeinfo
   + 
Name: svn:eol-style
   + native

Copied: trunk/windstille/src/objects/scriptable_object.hpp (from rev 2456, trunk/windstille/src/scriptable_object.hpp)


Property changes on: trunk/windstille/src/objects/scriptable_object.hpp
___________________________________________________________________
Name: svn:keywords
   + Id
Name: svn:mergeinfo
   + 
Name: svn:eol-style
   + native

Deleted: trunk/windstille/src/player.cpp
===================================================================
--- trunk/windstille/src/player.cpp	2009-02-11 16:25:56 UTC (rev 2457)
+++ trunk/windstille/src/player.cpp	2009-02-11 17:47:58 UTC (rev 2458)
@@ -1,775 +0,0 @@
-/*
-**  Windstille - A Sci-Fi Action-Adventure Game
-**  Copyright (C) 2000 Ingo Ruhnke <grumbel at gmx.de>
-**
-**  This program is free software: you can redistribute it and/or modify
-**  it under the terms of the GNU General Public License as published by
-**  the Free Software Foundation, either version 3 of the License, or
-**  (at your option) any later version.
-**  
-**  This program is distributed in the hope that it will be useful,
-**  but WITHOUT ANY WARRANTY; without even the implied warranty of
-**  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
-**  GNU General Public License for more details.
-**  
-**  You should have received a copy of the GNU General Public License
-**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
-*/
-
-#include <boost/bind.hpp>
-#include "tile_map.hpp"
-#include "sector.hpp"
-#include "input/controller.hpp"
-#include "input/input_manager.hpp"
-#include "controller_def.hpp"
-#include "player.hpp"
-#include "objects/bomb.hpp"
-#include "globals.hpp"
-#include "pda.hpp"
-#include "tile.hpp"
-#include "sprite3d/manager.hpp"
-#include "display/surface_manager.hpp"
-#include "particles/particle_system.hpp"
-#include "sound/sound_manager.hpp"
-#include "collision/collision_engine.hpp"
-#include "laser_pointer.hpp"
-#include "collision/stair_contact.hpp"
-#include "game_session.hpp"
-#include "console.hpp"
-#include "grenade.hpp"
-#include "pistol.hpp"
-
-static const int MAX_ENERGY = 16;
-static const float WALK_SPEED = 128.0;
-static const float RUN_SPEED = 256.0;
-
-Player* Player::current_ = 0;
-
-Player::Player () :
-  light("images/light3.sprite"),
-  flashlight("images/flashlightlight.sprite"),
-  flashlighthighlight("images/flashlighthighlight.sprite"),
-  state(STAND)
-{
-  //laser_pointer = new LaserPointer();
-  sprite = Sprite3D("models/characters/jane/jane.wsprite");
-  pos.x = 320;
-  pos.y = 200;
-  name = "player";
-
-  jumping = false;
-  energy = MAX_ENERGY;
-  current_ = this;
-
-  hit_count = 0.0f;
-  sprite.set_action("Stand");
-
-  // collision detection init
-  c_object = new CollisionObject(this, Rectf(-15, -120, 15, 0));
-
-  c_object->set_pos(pos);
-  c_object->set_velocity(velocity);
-  
-  c_object->sig_collision().connect(boost::bind(&Player::collision, this, _1));
-
-  Sector::current()->get_collision_engine()->add(c_object);
-
-  z_pos = 100.0f;
-
-  contact = 0;
-  weapon = new Pistol();
-  laser_pointer = ((Pistol*) weapon)->laser_pointer;
-}
-
-Player::~Player()
-{
-  //delete laser_pointer;
-}
-
-void
-Player::draw (SceneContext& sc)
-{
-  //light.set_blend_func(GL_SRC_ALPHA, GL_ONE);
-  //light.set_scale(4.0f);
-
-  flashlight.set_blend_func(GL_SRC_ALPHA, GL_ONE);
-  flashlight.set_scale(2.0f);
-
-  flashlighthighlight.set_blend_func(GL_SRC_ALPHA, GL_ONE);
-  flashlighthighlight.set_scale(2.0f);
-
-  if (1)
-    { // draw the 'stand-on' tile
-      sc.highlight().fill_rect(Rect(Point(int(pos.x)/32 * 32, (int(pos.y)/32 + 1) * 32),
-                                    Size(32, 32)),
-                               Color(1.0f, 0.0f, 0.0f, 0.5f), 10000.0f);
-    }
-
-  //sc.highlight().draw(flashlighthighlight, pos - Vector(40, 80), 100.0f);
-  //sc.light().draw(flashlight, pos - Vector(40, 80), 100.0f);
-  sprite.draw(sc.color(), pos, z_pos);
-
-  Entity* obj = find_useable_entity();
-  if (obj)
-    {
-      std::string use_str = "[" + obj->get_use_verb() + "]";
-      sc.highlight().draw(use_str, obj->get_pos().x, obj->get_pos().y - 150, 1000);
-    }
-  
-  // Draw weapon at the 'Weapon' attachment point
-  Sprite3D::PointID id = sprite.get_attachment_point_id("Weapon");
-  sc.push_modelview();
-  sc.translate(pos.x, pos.y);
-  sc.mult_modelview(sprite.get_attachment_point_matrix(id));
-  weapon->draw(sc);
-  sc.pop_modelview();
-
-
-  sc.push_modelview();
-  sc.translate(pos.x, pos.y - 80);
-  laser_pointer->draw(sc);
-  sc.pop_modelview();
-}
-
-void
-Player::start_listening()
-{
-  if(state == STAND_TO_LISTEN || state == LISTEN)
-    return;
-
-  set_stand_to_listen(false);
-}
-
-void
-Player::stop_listening()
-{
-  if(state != LISTEN && state != STAND_TO_LISTEN)
-    return;
-  
-  set_stand_to_listen(true);
-}
-
-void 
-Player::update(float delta)
-{
-  weapon->update(delta);
-  laser_pointer->update(delta);
-
-  controller = InputManager::get_controller();
-
-  laser_pointer->set_angle(laser_pointer->get_angle() + controller.get_axis_state(Y_AXIS) * delta);
-  //laser_pointer->set_angle(controller.get_axis_state(Y2_AXIS) * M_PI);
-
-  //std::cout << controller.get_axis_state(Y2_AXIS) * M_PI << std::endl;
-
-  if (GameSession::current()->is_active())
-    {
-      switch(state) {
-        case STAND:
-        case WALK:
-          update_walk_stand();
-          break;
-        case RUN:
-          update_run();
-          break;
-        case DUCKING:
-          update_ducking();
-          break;
-        case DUCKED:
-          update_ducked();
-          break;
-        case TURNAROUND:
-          update_turnaround();
-          break;
-        case STAND_TO_LISTEN:
-          update_stand_to_listen();
-          break;
-        case LISTEN:
-          update_listen();
-          break;
-        case JUMP_BEGIN:
-          update_jump_begin();
-          break;
-        case JUMP_AIR:
-          update_jump_air();
-          break;
-        case JUMP_LAND:
-          update_jump_land();
-          break;
-        case JUMP_UP_BEGIN:
-          update_jump_up_begin();
-          break;
-        case JUMP_UP_AIR:
-          update_jump_up_air();
-          break;
-        case JUMP_UP_LAND:
-          update_jump_up_land();
-          break;
-        case PULL_GUN:
-          update_pull_gun();
-          break;
-        case STAIRS_DOWN:
-        case STAIRS_UP:
-          update_stairs(delta);
-          break;
-        default:
-          assert(false);
-          break;
-      }
-    }
-
-  // fall down
-  velocity.y += GRAVITY * delta;
-
-  sprite.update(delta);
-
-  c_object->set_velocity (velocity);
-
-  pos = c_object->get_pos();
-}
-
-void
-Player::set_stand()
-{
-  try_set_action("Stand");
-  velocity = Vector(0, 0);
-  state = STAND;
-}
-
-void
-Player::update_walk_stand()
-{
-  if (controller.get_axis_state(Y_AXIS) > 0.5f) {
-    TileMap* tilemap = Sector::current()->get_tilemap2();
-    if (tilemap)
-      {
-        Point p(int(pos.x)/32, (int(pos.y)/32 + 1));
-        unsigned int col = tilemap->get_pixel(p.x, p.y);
-
-        if ((col & TILE_STAIRS) && (get_direction() == WEST && (col & TILE_LEFT) ||
-                                    get_direction() == EAST && (col & TILE_RIGHT)))
-          {
-            delete contact;
-            contact = new StairContact(tilemap, p);
-
-            std::cout << "Stair mode" << std::endl;
-            state = STAIRS_DOWN;
-            //c_object->get_check_domains() & (~CollisionObject::DOMAIN_TILEMAP));
-            Sector::current()->get_collision_engine()->remove(c_object);
-            z_pos = -10.0f;
-            return;
-          }
-        else
-          {
-            set_ducking();
-            return;
-          }
-      }
-  } else if (controller.get_axis_state(Y_AXIS) < -0.5f) {
-    TileMap* tilemap = Sector::current()->get_tilemap2();
-    if (tilemap)
-      {
-        Point p(int(pos.x)/32 + ((get_direction() == WEST) ? -1 : +1), (int(pos.y)/32));
-        unsigned int col = tilemap->get_pixel(p.x, p.y);
-
-        if ((col & TILE_STAIRS) && (get_direction() == EAST && (col & TILE_LEFT) ||
-                                    get_direction() == WEST && (col & TILE_RIGHT)))
-          {
-            delete contact;
-            contact = new StairContact(tilemap, p);
-
-            state = STAIRS_UP;
-            //c_object->get_check_domains() & (~CollisionObject::DOMAIN_TILEMAP));
-            Sector::current()->get_collision_engine()->remove(c_object);
-            z_pos = -10.0f;
-            return;
-          }
-      }    
-  }
-
-  if(state == STAND)
-    update_stand();
-  else
-    update_walk();
-}
-
-void
-Player::update_stairs(float delta)
-{
-  assert(contact);
-
-  if (controller.get_axis_state(X_AXIS) < -0.5f ||
-      controller.get_axis_state(Y_AXIS) > 0.5f)
-    contact->advance(-WALK_SPEED * delta * 0.7f);
-  else if (controller.get_axis_state(X_AXIS) > 0.5f ||
-           controller.get_axis_state(Y_AXIS) < -0.5f)
-    contact->advance(WALK_SPEED * delta * 0.7f);
-
-  velocity = Vector(0, 0);
-  c_object->set_pos(contact->get_pos());
-
-  if (!contact->is_active())
-    {
-      Sector::current()->get_collision_engine()->add(c_object);
-      state = STAND;
-    }
-}
-
-Entity*
-Player::find_useable_entity()
-{
-  std::vector<GameObject*>* objects = Sector::current()->get_objects();
-  for (std::vector<GameObject*>::iterator i = objects->begin(); i != objects->end(); ++i)
-    {
-      Entity* object = dynamic_cast<Entity*>(*i);
-      if (object && object != this && object->is_useable())
-        {
-          //FIXME use proper collision detection
-          if (object->get_pos().x > pos.x - 32 && object->get_pos().x < pos.x + 32
-              && object->get_pos().y > pos.y - 256 && object->get_pos().y < pos.y + 256)
-            {
-              return object;
-            }
-        }
-    }
-  return 0;  
-}
-
-
-void
-Player::update_stand()
-{ 
-  if(controller.button_was_pressed(USE_BUTTON))
-    {
-      Entity* obj = find_useable_entity();
-      if (obj)
-        obj->use();
-      return;
-    }
-    
-  if(controller.button_was_pressed(JUMP_BUTTON)
-     && controller.get_axis_state(Y_AXIS) > 0.5f) 
-    {
-      set_jump_up_begin();
-    } 
-  else if (controller.button_was_pressed(AIM_BUTTON))
-    {
-      // TODO remove me later, just here for testing
-      Grenade* grenade = new Grenade();
-      grenade->set_pos(get_pos() + Vector(50, -300));
-      grenade->set_velocity(Vector(20, -10));
-      Sector::current()->add(grenade);
-      
-      sprite.set_action("PullGun");
-      state = PULL_GUN;
-    }
-  else if (controller.get_axis_state(X_AXIS) < -0.5f) 
-    {
-      if(get_direction() == WEST)
-        set_walk(WEST);
-      else
-        set_turnaround();
-    }
-  else if (controller.get_axis_state(X_AXIS) > 0.5f) 
-    {
-      if(get_direction() == EAST)
-        set_walk(EAST);
-      else
-        set_turnaround();
-    }
-}
-
-void
-Player::set_walk(Direction direction)
-{
-  try_set_action("Walk");
-  sprite.set_rot(direction == EAST);
-  state = WALK;
-  if(direction == EAST)
-    velocity.x = WALK_SPEED;
-  else
-    velocity.x = -WALK_SPEED;
-
-  // start walking sound
-  // sound_source.reset(sound_manager->create_sound_source("sounds/steps_dirt.ogg"));
-  // sound_source->set_looping(true);
-  // sound_source->play();
-}
-
-void
-Player::update_walk()
-{
-  if (controller.get_axis_state(X_AXIS) == 0) {
-    leave_walk();
-    set_stand();
-    return;
-  }
-
-  if(get_direction() == WEST && controller.get_axis_state(X_AXIS) > 0.5f
-     || get_direction() == EAST && controller.get_axis_state(X_AXIS) < -0.5f) {
-    leave_walk();
-    set_turnaround();
-    return;
-  }
-  
-  if(controller.get_button_state(RUN_BUTTON)) {
-    leave_walk();
-    set_run();
-    return;
-  }
-}
-
-void
-Player::leave_walk()
-{
-  // stop walking sound
-  // sound_source->stop();
-}
-
-void
-Player::set_ducking()
-{
-  try_set_action("StandToDuck");
-  sprite.set_next_action("Ducking");
-  state = DUCKING;
-  velocity.x = 0;
-}
-
-void
-Player::update_ducking()
-{
-  // ducking
-  if(sprite.switched_actions()) {
-    if(sprite.get_action() == "Ducking")
-      set_ducked();
-    else
-      set_stand();
-    return;
-  }
-  
-  if(!(controller.get_axis_state(Y_AXIS) > 0.5f) && sprite.get_speed() > 0) {
-    sprite.set_speed(-1.0);
-    sprite.set_next_action("Stand");
-    state = STAND;
-  } else if(controller.get_axis_state(Y_AXIS) > 0.5f && sprite.get_speed() < 0) {
-    sprite.set_speed(1.0);
-    sprite.set_next_action("Ducking");
-  }
-}
-
-void
-Player::set_ducked()
-{
-  assert(sprite.get_action() == "Ducking");
-  state = DUCKED;
-}
-
-void
-Player::update_ducked()
-{
-  if(!controller.get_axis_state(Y_AXIS) > 0.5f) {
-    state = DUCKING;
-    sprite.set_action("StandToDuck", -1.0);
-    sprite.set_next_action("Stand");
-  }  
-}
-
-void
-Player::set_turnaround()
-{
-  velocity.x = 0;
-  try_set_action("Turn");
-  sprite.set_next_action("Walk");
-  sprite.set_next_rot(! sprite.get_rot());
-  state = TURNAROUND;
-}
-
-void
-Player::update_turnaround()
-{
-  if(sprite.switched_actions()) {
-    if(sprite.get_rot()) {
-      set_walk(EAST);
-    } else {
-      set_walk(WEST);
-    }
-  } 
-  if(sprite.get_rot() && controller.get_axis_state(X_AXIS) > 0.5f
-     || !sprite.get_rot() && controller.get_axis_state(X_AXIS) < -0.5f) {
-    sprite.set_speed(-1.0);
-    sprite.set_next_action("Walk");
-    state = WALK;
-  }
-}
-
-void
-Player::set_stand_to_listen(bool backwards)
-{
-  try_set_action("StandtoListen", backwards ? -1.0 : 1.0);
-  if(!backwards) {
-    sprite.set_next_action("Listen");
-    velocity = Vector(0, 0);
-  } else {
-    sprite.set_next_action("Stand");
-  }
-  state = STAND_TO_LISTEN;
-}
-
-void
-Player::update_stand_to_listen()
-{
-  if(sprite.switched_actions()) {
-    if(sprite.get_action() == "Stand")
-      set_stand();
-    else
-      set_listen();
-  }
-}
-
-void
-Player::set_listen()
-{
-  try_set_action("Listen");
-  state = LISTEN;
-}
-
-void
-Player::update_listen()
-{
-  // nothing
-}
-
-void
-Player::set_run()
-{
-  try_set_action("Run");
-  if(get_direction() == EAST)
-    velocity.x = RUN_SPEED;
-  else
-    velocity.x = -RUN_SPEED;  
-  state = RUN;
-
-  // start running sound
-  // sound_source.reset(sound_manager->create_sound_source("sounds/steps_dirt.ogg"));
-  // sound_source->set_looping(true);
-  // sound_source->play();
-}
-
-void
-Player::update_run()
-{
-  if(!controller.get_button_state(RUN_BUTTON)) {
-    leave_run();
-    set_walk(get_direction());
-    return;
-  }
-  if(controller.get_button_state(JUMP_BUTTON)) {
-    leave_run();
-    set_jump_begin();
-    return;
-  }
-}
-
-void
-Player::leave_run()
-{
-  // sound_source->stop();
-}
-
-void
-Player::set_jump_begin()
-{
-  if(sprite.before_marker("RightFoot")) {
-    sprite.set_next_action("JumpRightFoot");
-    sprite.abort_at_marker("RightFoot");
-    jump_foot = LEFT_FOOT;
-  } else if(sprite.before_marker("LeftFoot")) {
-    sprite.set_next_action("JumpLeftFoot");
-    sprite.abort_at_marker("LeftFoot");
-    jump_foot = RIGHT_FOOT;
-  } else {
-    sprite.set_next_action("JumpRightFoot");
-    sprite.abort_at_marker("RightFoot");
-    jump_foot = LEFT_FOOT;
-  }
-  state = JUMP_BEGIN;
-}
-
-void
-Player::update_jump_begin()
-{
-  if(sprite.switched_actions()) {
-    if(sprite.get_action() == "JumpLeftFoot") {
-      sprite.set_next_action("JumpLeftFootAir");
-    } else if(sprite.get_action() == "JumpRightFoot") {
-      sprite.set_next_action("JumpRightFootAir");
-    } else {
-      set_jump_air();
-      return;
-    }
-  }
-}
-
-void
-Player::set_jump_air()
-{
-  velocity.y = -450;
-  sprite.set_next_action("JumpLandSofttoRun");
-  state = JUMP_AIR;
-}
-
-void
-Player::update_jump_air()
-{
-  if(sprite.switched_actions()) {
-    set_jump_land();
-    return;
-  }
-}
-
-void
-Player::set_jump_land()
-{
-  sprite.set_next_action("Run");
-  state = JUMP_LAND;
-}
-
-void
-Player::update_jump_land()
-{
-  if(sprite.switched_actions()) {
-    set_run();
-    return;
-  }
-}
-
-void
-Player::set_jump_up_begin()
-{
-  sprite.set_next_action("JumpUp");
-  state = JUMP_UP_BEGIN;
-}
-
-void
-Player::update_jump_up_begin()
-{
-  if(sprite.switched_actions()) {
-    set_jump_up_air();
-    return;
-  }
-}
-
-void
-Player::set_jump_up_air()
-{
-  velocity.y = -400;
-  sprite.set_next_action("JumpLandSofttoRun");
-  state = JUMP_UP_AIR;
-}
-
-void
-Player::update_jump_up_air()
-{
-  if(sprite.switched_actions()) {
-    set_jump_up_land();
-    return;
-  }
-}
-
-void
-Player::set_jump_up_land()
-{
-  sprite.set_next_action("Stand");
-  state = JUMP_UP_LAND;
-}
-
-void
-Player::update_jump_up_land()
-{
-  if(sprite.switched_actions()) {
-    set_stand();
-    return;
-  }
-}
-
-void
-Player::update_pull_gun()
-{
-  if (!controller.get_button_state(AIM_BUTTON))
-    {
-      sprite.set_next_action("Stand");      
-      state = STAND;
-    }
-}
-
-Direction
-Player::get_direction() const
-{
-  return sprite.get_rot() ? EAST : WEST;
-}
-
-void
-Player::try_set_action(const std::string& name, float speed)
-{
-  if(sprite.get_action() == name)
-    return;
-  
-  sprite.set_action(name, speed);
-}
-
-int
-Player::get_energy() const
-{
-  return energy;
-}
-
-int
-Player::get_max_energy() const
-{
-  return MAX_ENERGY;
-}
-
-void
-Player::hit(int points)
-{
-  if (energy > 0 && hit_count <= 0)
-    {
-      energy -= points;
-      //hit_count = 1.0f;
-
-      if (energy <= 0)
-        {
-          //switch_movement_state(KILLED);
-          hit_count = 0;
-        }
-    }
-}
-
-void
-Player::collision(const CollisionData& data)
-{
-  // copy velocity, as "velocity" is the wanted velocity, whereas
-  // cur_vel is the velocity in the current delta-frame
-  Vector cur_vel = c_object->get_velocity(); 
-  if (data.direction.y != 0)
-    {
-      cur_vel.y = 0;
-      velocity.y = 0; // also reset vertical velocity
-    }
-  else
-    {
-      // do not reset horizontal velocity, as it's only set, when starting to go/run
-      cur_vel.x = 0;
-    }
-  c_object->set_velocity (cur_vel);
-  
-}
-
-void 
-Player::set_pos(Vector pos)
-{
-  Entity::set_pos(pos);
-  c_object->set_pos(pos);
-}
-
-/* EOF */

Deleted: trunk/windstille/src/player.hpp
===================================================================
--- trunk/windstille/src/player.hpp	2009-02-11 16:25:56 UTC (rev 2457)
+++ trunk/windstille/src/player.hpp	2009-02-11 17:47:58 UTC (rev 2458)
@@ -1,179 +0,0 @@
-/*
-**  Windstille - A Sci-Fi Action-Adventure Game
-**  Copyright (C) 2000 Ingo Ruhnke <grumbel at gmx.de>
-**
-**  This program is free software: you can redistribute it and/or modify
-**  it under the terms of the GNU General Public License as published by
-**  the Free Software Foundation, either version 3 of the License, or
-**  (at your option) any later version.
-**  
-**  This program is distributed in the hope that it will be useful,
-**  but WITHOUT ANY WARRANTY; without even the implied warranty of
-**  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
-**  GNU General Public License for more details.
-**  
-**  You should have received a copy of the GNU General Public License
-**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
-*/
-
-#ifndef HEADER_WINDSTILLE_PLAYER_HPP
-#define HEADER_WINDSTILLE_PLAYER_HPP
-
-#include <memory>
-#include "sprite2d/sprite.hpp"
-#include "input/controller.hpp"
-#include "sprite3d/sprite3d.hpp"
-#include "sound/sound_source.hpp"
-#include "math/vector.hpp"
-#include "globals.hpp"
-#include "entity.hpp"
-#include "ref.hpp"
-#include "display/surface.hpp"
-
-class Controller;
-class Contact;
-class LaserPointer;
-class Weapon;
-
-class Player : public Entity
-{
-private:
-  Controller controller;
-
-  Sprite   light;
-  Sprite   flashlight;
-  Sprite   flashlighthighlight;
-  Sprite3D sprite;
-  std::auto_ptr<SoundSource> sound_source;
-
-  bool jumping;
-  bool bomb_placed;
-  float hit_count;
-  int energy;
-
-  CollisionObject* c_object;
-
-  LaserPointer* laser_pointer;
-  Contact* contact;
-  Weapon* weapon;
-
-public:
-  enum State
-  {
-    STAND,
-    WALK,
-    TURNAROUND,
-    DUCKING,
-    DUCKED,
-    ACCELERATE,
-    RUN,
-    PULL_GUN,
-    SLOWDOWN,
-    STAND_TO_LISTEN,
-    LISTEN,
-    JUMP_BEGIN,
-    JUMP_AIR,
-    JUMP_LAND,
-    JUMP_UP_BEGIN,
-    JUMP_UP_AIR,
-    JUMP_UP_LAND,
-    STAIRS_UP,
-    STAIRS_DOWN
-  };
-
-private:
-  State state;
-
-  // jump state info
-  enum Foot {
-    LEFT_FOOT, RIGHT_FOOT
-  };
-  Foot jump_foot;
-  
-  double reload_time;
-  float  z_pos;
-  static Player* current_;
-public:
-  Player ();
-  virtual ~Player ();
-
-  static Player* current() { return current_; }
-
-  int get_movement_state() { return state; }
-
-  void draw (SceneContext& gc);
-  void update (float delta);
-
-  void start_listening();
-  void stop_listening();
-  
-  int get_energy() const;
-  int get_max_energy() const;
-  void hit(int points);
-  
-  void collision(const CollisionData& data);
-
-  Entity* find_useable_entity();
-
-  virtual void set_pos(Vector pos);
-
-private:
-  /*
-   * Following is a set of functions that manage the players state
-   * the set_ function is called to enter a new state, the update function is
-   * called each frame when a state is active, the leave function is called
-   * right before we enter a new state.
-   *
-   * TODO: can we generalize this mechanism? Or create a small specification
-   * language for this?
-   */
-  
-  void update_walk_stand();
-  void set_stand();
-  void update_stand();
-  void set_walk(Direction direction);
-  void update_walk();
-  void leave_walk();
-  void set_ducking();
-  void update_ducking();
-  void set_ducked();
-  void update_ducked();
-  void set_turnaround();
-  void update_turnaround();
-  void set_stand_to_listen(bool backwards);
-  void update_stand_to_listen();
-  void set_listen();
-  void update_listen();
-  void set_run();
-  void update_run();
-  void leave_run();
-  
-  void set_jump_begin();
-  void update_jump_begin();
-  void set_jump_air();
-  void update_jump_air();
-  void set_jump_land();
-  void update_jump_land();
-  
-  void set_jump_up_begin();
-  void update_jump_up_begin();
-  void set_jump_up_air();
-  void update_jump_up_air();
-  void set_jump_up_land();
-  void update_jump_up_land();
-
-  void update_pull_gun();
-  void update_stairs(float delta);
-
-  /**
-   * Sets an action for the sprite. In contrast to sprite->set_action this
-   * function will not restart the action if it was already running
-   */
-  void try_set_action(const std::string& name, float speed = 1.0);
-
-  Direction get_direction() const;
-};
-
-#endif
-
-/* EOF */

Deleted: trunk/windstille/src/scriptable_object.cpp
===================================================================
--- trunk/windstille/src/scriptable_object.cpp	2009-02-11 16:25:56 UTC (rev 2457)
+++ trunk/windstille/src/scriptable_object.cpp	2009-02-11 17:47:58 UTC (rev 2458)
@@ -1,215 +0,0 @@
-/*
-**  Windstille - A Sci-Fi Action-Adventure Game
-**  Copyright (C) 2005 Ingo Ruhnke <grumbel at gmx.de>
-**
-**  This program is free software: you can redistribute it and/or modify
-**  it under the terms of the GNU General Public License as published by
-**  the Free Software Foundation, either version 3 of the License, or
-**  (at your option) any later version.
-**  
-**  This program is distributed in the hope that it will be useful,
-**  but WITHOUT ANY WARRANTY; without even the implied warranty of
-**  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
-**  GNU General Public License for more details.
-**  
-**  You should have received a copy of the GNU General Public License
-**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
-*/
-
-
-#include "globals.hpp"
-#include "scriptable_object.hpp"
-#include "sprite2d/manager.hpp"
-#include "script_manager.hpp"
-
-ScriptableObject::ScriptableObject(FileReader& props)
-  : z_pos(50),
-    target_speed(0),
-    acceleration(0),
-    flash_speed(0)
-{ 
-  std::string spritename;
-  std::string highlightname;
-  std::string lightname;
-  
-  props.get("name", name);
-  props.get("sprite", spritename);
-  props.get("highlight", highlightname);
-  props.get("light",   lightname);
-  props.get("pos", pos);
-  props.get("script", use_script);
-  props.get("use-verb", use_verb);
-  props.get("active", active);
-  props.get("flash-speed", flash_speed); // FIXME: bad name, should be something more generic
-  props.get("z-pos", z_pos);
-  props.print_unused_warnings("scriptable-object");
-  
-  if (use_verb != "")
-    set_useable(true);
-  
-  if(spritename != "")
-    sprite = Sprite(spritename);
-  
-  if (highlightname != "")
-    {
-      highlight = Sprite(highlightname);
-      highlight.set_blend_func(GL_SRC_ALPHA, GL_ONE);
-    }
-
-  if (lightname != "")
-    {
-      light = Sprite(lightname);
-      light.set_blend_func(GL_SRC_ALPHA, GL_ONE);
-    }
-    
-  flash_delta = game_time;
-  target_x = pos.x;
-  target_y = pos.y;
-}
-
-ScriptableObject::~ScriptableObject()
-{
-}
-
-void
-ScriptableObject::draw(SceneContext& sc)
-{
-  Vector tmp_pos = pos;
-
-  if (parent)
-    tmp_pos += parent->get_pos();
-
-  if (flash_speed != 0)
-    flash();
-
-  if (sprite)
-    sc.color().draw(sprite, tmp_pos, z_pos);
-  
-  if (highlight) 
-    sc.highlight().draw(highlight, tmp_pos, z_pos);
-
-  if (light) 
-    {
-      sc.light().draw(light, tmp_pos, z_pos);
-    }
-}
-
-void
-ScriptableObject::update(float delta)
-{
-  if (sprite)
-    sprite.update(delta);
-
-  if (highlight)
-    highlight.update(delta);
-
-  if (light)
-    light.update(delta);
-    
-  if (target_speed > 0)
-    move(delta);
-}
-
-void
-ScriptableObject::use()
-{
-  script_manager->run_script(use_script, "ScriptableObject");
-}
-
-void
-ScriptableObject::move_to(float x, float y, float arg_target_speed, float arg_acceleration)
-{
-  target_x = x;
-  target_y = y;
-  target_speed = arg_target_speed;
-  acceleration = arg_acceleration;
-}
-
-void
-ScriptableObject::start_flash(float speed)
-{
-  active = true;
-  flash_speed = speed;
-  flash_delta = game_time;
-}
-
-void
-ScriptableObject::move(float delta)
-{
-  float dx = target_x - pos.x;
-  float dy = target_y - pos.y;
-  
-  if (!dx && !dy) {
-    target_speed = 0;
-    return;
-  }
-  
-  //Work out proportion of x/y in direction vector
-  float propx = 0;
-  float propy = 0;
-  
-  float adx = fabs(dx);
-  float ady = fabs(dy);
-  
-  //we can't divide by 0 because we return above if !dx and !dy
-  if (dx < 0)
-    propx = -(adx / (adx + ady));
-  else
-    propx = adx / (adx + ady);
-  
-  if (dy < 0)
-    propy = -(ady / (adx + ady));
-  else
-    propy = ady / (adx + ady);
-  
-  //accelerate
-  float dvx = acceleration * delta * propx;
-  float dvy = acceleration * delta * propy;  
-  velocity.x += dvx;
-  velocity.y += dvy;
-    
-  //don't accelerate past max speed
-  float max_vx = fabs(target_speed * propx);
-  float max_vy = fabs(target_speed * propy);
-  
-  if (velocity.x > max_vx)
-    velocity.x = max_vx;
-  else if (velocity.x < -max_vx)
-    velocity.x = -max_vx;
-  
-  if (velocity.y > max_vy)
-    velocity.y = max_vy;
-  else if (velocity.y < -max_vy)
-    velocity.y = -max_vy;
-  
-  //don't move past the target
-  float distx = velocity.x * delta;
-  float disty = velocity.y * delta;
-  
-  if (adx - fabs(distx) < 0)
-    distx = dx;
-  if (ady - fabs(disty) < 0)
-    disty = dy;
-    
-  pos.x += distx;
-  pos.y += disty;
-}
-
-void
-ScriptableObject::flash()
-{
-  float time = game_time - flash_delta;
-  if(static_cast<int>(time/flash_speed) % 2 == 0) {    
-    float alpha = fmodf(time, flash_speed) / flash_speed;
-    // fade on
-    highlight.set_alpha(alpha);
-    light.set_alpha(alpha);
-  } else {
-    float alpha = 1.0 - (fmodf(time, flash_speed) / flash_speed);
-    // fade off
-    highlight.set_alpha(alpha);
-    light.set_alpha(alpha);
-  }
-}
-
-/* EOF */

Deleted: trunk/windstille/src/scriptable_object.hpp
===================================================================
--- trunk/windstille/src/scriptable_object.hpp	2009-02-11 16:25:56 UTC (rev 2457)
+++ trunk/windstille/src/scriptable_object.hpp	2009-02-11 17:47:58 UTC (rev 2458)
@@ -1,73 +0,0 @@
-/*
-**  Windstille - A Sci-Fi Action-Adventure Game
-**  Copyright (C) 2005 Ingo Ruhnke <grumbel at gmx.de>
-**
-**  This program is free software: you can redistribute it and/or modify
-**  it under the terms of the GNU General Public License as published by
-**  the Free Software Foundation, either version 3 of the License, or
-**  (at your option) any later version.
-**  
-**  This program is distributed in the hope that it will be useful,
-**  but WITHOUT ANY WARRANTY; without even the implied warranty of
-**  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
-**  GNU General Public License for more details.
-**  
-**  You should have received a copy of the GNU General Public License
-**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
-*/
-
-
-#ifndef HEADER_WINDSTILLE_SCRIPTABLE_OBJECT_HPP
-#define HEADER_WINDSTILLE_SCRIPTABLE_OBJECT_HPP
-
-#include <string>
-#include "entity.hpp"
-#include "sprite2d/sprite.hpp"
-
-/** Can represent any generic object that the player may see or interact with that
-does not require collision physics or specialized C++ code. For example doors, trains,
-signs, objects you can pick up, and animations.
-
-TODO: should this provide optional collision detection such that you can use it to make
-crates etc? Or perhaps another object should derive from this which adds collision
-detection?
-*/
-class ScriptableObject : public Entity
-{
-private:
-  Sprite sprite;
-  Sprite light;
-  Sprite highlight;
-  float z_pos;
-  
-  //useable stuff
-  std::string use_script;
-  
-  //movement stuff
-  float target_x;
-  float target_y;
-  float target_speed;
-  float acceleration;
-  
-  //flashing stuff
-  float flash_speed;
-  float flash_delta;
-  
-protected:
-  void move(float delta);
-  void flash();
-
-public:
-  ScriptableObject(FileReader& reader);
-  virtual ~ScriptableObject();
-
-  void draw (SceneContext& sc);
-  void update (float delta);
-  void use();
-  void move_to(float x, float y, float arg_target_speed, float arg_acceleration);
-  void start_flash(float speed);
-};
-
-#endif
-
-/* EOF */

Modified: trunk/windstille/src/scripting/game_objects.hpp
===================================================================
--- trunk/windstille/src/scripting/game_objects.hpp	2009-02-11 16:25:56 UTC (rev 2457)
+++ trunk/windstille/src/scripting/game_objects.hpp	2009-02-11 17:47:58 UTC (rev 2458)
@@ -22,8 +22,8 @@
 #ifndef SCRIPTING_API
 #include "game_object.hpp"
 #include "objects/test_object.hpp"
-#include "player.hpp"
-#include "scriptable_object.hpp"
+#include "objects/player.hpp"
+#include "objects/scriptable_object.hpp"
 #include "ref.hpp"
 
 typedef GameObject _GameObject;

Modified: trunk/windstille/src/sector.cpp
===================================================================
--- trunk/windstille/src/sector.cpp	2009-02-11 16:25:56 UTC (rev 2457)
+++ trunk/windstille/src/sector.cpp	2009-02-11 17:47:58 UTC (rev 2458)
@@ -25,7 +25,7 @@
 #include "objects/background_gradient.hpp"
 #include "tile_map.hpp"
 #include "game_object.hpp"
-#include "player.hpp"
+#include "objects/player.hpp"
 #include "trigger.hpp"
 #include "objects/test_object.hpp"
 #include "sector.hpp"
@@ -35,17 +35,17 @@
 #include "collision/collision_engine.hpp"
 #include "particles/particle_system.hpp"
 #include "objects/test_object.hpp"
-#include "elevator.hpp"
+#include "objects/elevator.hpp"
 #include "objects/nightvision.hpp"
-#include "character.hpp"
+#include "objects/character.hpp"
 #include "laser_pointer.hpp"
 #include "objects/swarm.hpp"
-#include "liquid.hpp"
+#include "objects/liquid.hpp"
 #include "objects/shockwave.hpp"
 #include "objects/hedgehog.hpp"
 #include "objects/spider_mine.hpp"
-#include "box.hpp"
-#include "scriptable_object.hpp"
+#include "objects/box.hpp"
+#include "objects/scriptable_object.hpp"
 #include "navigation/navigation_graph.hpp"
 #include "scripting/squirrel_error.hpp"
 

Modified: trunk/windstille/src/trigger.cpp
===================================================================
--- trunk/windstille/src/trigger.cpp	2009-02-11 16:25:56 UTC (rev 2457)
+++ trunk/windstille/src/trigger.cpp	2009-02-11 17:47:58 UTC (rev 2458)
@@ -20,7 +20,7 @@
 #include <list>
 #include "sector.hpp"
 #include "trigger.hpp"
-#include "player.hpp"
+#include "objects/player.hpp"
 #include "script_manager.hpp"
 
 Trigger::Trigger(FileReader& props)

Modified: trunk/windstille/src/view.cpp
===================================================================
--- trunk/windstille/src/view.cpp	2009-02-11 16:25:56 UTC (rev 2457)
+++ trunk/windstille/src/view.cpp	2009-02-11 17:47:58 UTC (rev 2458)
@@ -19,7 +19,7 @@
 #include <SDL.h>
 #include "display/display.hpp"
 #include "collision/collision_engine.hpp"
-#include "player.hpp"
+#include "objects/player.hpp"
 #include "sector.hpp"
 #include "view.hpp"
 



From grumbel at mail.berlios.de  Wed Feb 11 20:41:40 2009
From: grumbel at mail.berlios.de (grumbel at BerliOS)
Date: Wed, 11 Feb 2009 20:41:40 +0100
Subject: [Windstille-commit] r2459 - in trunk/windstille: doc src src/math
	src/navigation
Message-ID: <200902111941.n1BJfeWj017707@sheep.berlios.de>

Author: grumbel
Date: 2009-02-11 20:41:39 +0100 (Wed, 11 Feb 2009)
New Revision: 2459

Modified:
   trunk/windstille/doc/Doxyfile
   trunk/windstille/src/
   trunk/windstille/src/camera.cpp
   trunk/windstille/src/field.hpp
   trunk/windstille/src/file_reader.hpp
   trunk/windstille/src/math/line.hpp
   trunk/windstille/src/navigation/segment_position.hpp
Log:
Updated Doxyfile and fixes a few doxygen issues in the code

Modified: trunk/windstille/doc/Doxyfile
===================================================================
--- trunk/windstille/doc/Doxyfile	2009-02-11 17:47:58 UTC (rev 2458)
+++ trunk/windstille/doc/Doxyfile	2009-02-11 19:41:39 UTC (rev 2459)
@@ -1,16 +1,91 @@
-# Doxyfile 1.5.1
+# Doxyfile 1.5.6
 
+# This file describes the settings to be used by the documentation system
+# doxygen (www.doxygen.org) for a project
+#
+# All text after a hash (#) is considered a comment and will be ignored
+# The format is:
+#       TAG = value [value, ...]
+# For lists items can also be appended using:
+#       TAG += value [value, ...]
+# Values that contain spaces should be placed between quotes (" ")
+
 #---------------------------------------------------------------------------
 # Project related configuration options
 #---------------------------------------------------------------------------
+
+# This tag specifies the encoding used for all characters in the config file 
+# that follow. The default is UTF-8 which is also the encoding used for all 
+# text before the first occurrence of this tag. Doxygen uses libiconv (or the 
+# iconv built into libc) for the transcoding. See 
+# http://www.gnu.org/software/libiconv for the list of possible encodings.
+
+DOXYFILE_ENCODING      = UTF-8
+
+# The PROJECT_NAME tag is a single word (or a sequence of words surrounded 
+# by quotes) that should identify the project.
+
 PROJECT_NAME           = Windstille
+
+# The PROJECT_NUMBER tag can be used to enter a project or revision number. 
+# This could be handy for archiving the generated documentation or 
+# if some version control system is used.
+
 PROJECT_NUMBER         = 
+
+# The OUTPUT_DIRECTORY tag is used to specify the (relative or absolute) 
+# base path where the generated documentation will be put. 
+# If a relative path is entered, it will be relative to the location 
+# where doxygen was started. If left blank the current directory will be used.
+
 OUTPUT_DIRECTORY       = 
+
+# If the CREATE_SUBDIRS tag is set to YES, then doxygen will create 
+# 4096 sub-directories (in 2 levels) under the output directory of each output 
+# format and will distribute the generated files over these directories. 
+# Enabling this option can be useful when feeding doxygen a huge amount of 
+# source files, where putting all generated files in the same directory would 
+# otherwise cause performance problems for the file system.
+
 CREATE_SUBDIRS         = NO
+
+# The OUTPUT_LANGUAGE tag is used to specify the language in which all 
+# documentation generated by doxygen is written. Doxygen will use this 
+# information to generate all constant output in the proper language. 
+# The default language is English, other supported languages are: 
+# Afrikaans, Arabic, Brazilian, Catalan, Chinese, Chinese-Traditional, 
+# Croatian, Czech, Danish, Dutch, Farsi, Finnish, French, German, Greek, 
+# Hungarian, Italian, Japanese, Japanese-en (Japanese with English messages), 
+# Korean, Korean-en, Lithuanian, Norwegian, Macedonian, Persian, Polish, 
+# Portuguese, Romanian, Russian, Serbian, Slovak, Slovene, Spanish, Swedish, 
+# and Ukrainian.
+
 OUTPUT_LANGUAGE        = English
-USE_WINDOWS_ENCODING   = NO
+
+# If the BRIEF_MEMBER_DESC tag is set to YES (the default) Doxygen will 
+# include brief member descriptions after the members that are listed in 
+# the file and class documentation (similar to JavaDoc). 
+# Set to NO to disable this.
+
 BRIEF_MEMBER_DESC      = YES
+
+# If the REPEAT_BRIEF tag is set to YES (the default) Doxygen will prepend 
+# the brief description of a member or function before the detailed description. 
+# Note: if both HIDE_UNDOC_MEMBERS and BRIEF_MEMBER_DESC are set to NO, the 
+# brief descriptions will be completely suppressed.
+
 REPEAT_BRIEF           = YES
+
+# This tag implements a quasi-intelligent brief description abbreviator 
+# that is used to form the text in various listings. Each string 
+# in this list, if found as the leading text of the brief description, will be 
+# stripped from the text and the result after processing the whole list, is 
+# used as the annotated text. Otherwise, the brief description is used as-is. 
+# If left blank, the following values are used ("$name" is automatically 
+# replaced with the name of the entity): "The $name class" "The $name widget" 
+# "The $name file" "is" "provides" "specifies" "contains" 
+# "represents" "a" "an" "the"
+
 ABBREVIATE_BRIEF       = "The $name class" \
                          "The $name widget" \
                          "The $name file" \
@@ -22,217 +97,1334 @@
                          a \
                          an \
                          the
+
+# If the ALWAYS_DETAILED_SEC and REPEAT_BRIEF tags are both set to YES then 
+# Doxygen will generate a detailed section even if there is only a brief 
+# description.
+
 ALWAYS_DETAILED_SEC    = NO
+
+# If the INLINE_INHERITED_MEMB tag is set to YES, doxygen will show all 
+# inherited members of a class in the documentation of that class as if those 
+# members were ordinary class members. Constructors, destructors and assignment 
+# operators of the base classes will not be shown.
+
 INLINE_INHERITED_MEMB  = NO
+
+# If the FULL_PATH_NAMES tag is set to YES then Doxygen will prepend the full 
+# path before files name in the file list and in the header files. If set 
+# to NO the shortest path that makes the file name unique will be used.
+
 FULL_PATH_NAMES        = YES
+
+# If the FULL_PATH_NAMES tag is set to YES then the STRIP_FROM_PATH tag 
+# can be used to strip a user-defined part of the path. Stripping is 
+# only done if one of the specified strings matches the left-hand part of 
+# the path. The tag can be used to show relative paths in the file list. 
+# If left blank the directory from which doxygen is run is used as the 
+# path to strip.
+
 STRIP_FROM_PATH        = 
+
+# The STRIP_FROM_INC_PATH tag can be used to strip a user-defined part of 
+# the path mentioned in the documentation of a class, which tells 
+# the reader which header file to include in order to use a class. 
+# If left blank only the name of the header file containing the class 
+# definition is used. Otherwise one should specify the include paths that 
+# are normally passed to the compiler using the -I flag.
+
 STRIP_FROM_INC_PATH    = 
+
+# If the SHORT_NAMES tag is set to YES, doxygen will generate much shorter 
+# (but less readable) file names. This can be useful is your file systems 
+# doesn't support long names like on DOS, Mac, or CD-ROM.
+
 SHORT_NAMES            = NO
+
+# If the JAVADOC_AUTOBRIEF tag is set to YES then Doxygen 
+# will interpret the first line (until the first dot) of a JavaDoc-style 
+# comment as the brief description. If set to NO, the JavaDoc 
+# comments will behave just like regular Qt-style comments 
+# (thus requiring an explicit @brief command for a brief description.)
+
 JAVADOC_AUTOBRIEF      = NO
+
+# If the QT_AUTOBRIEF tag is set to YES then Doxygen will 
+# interpret the first line (until the first dot) of a Qt-style 
+# comment as the brief description. If set to NO, the comments 
+# will behave just like regular Qt-style comments (thus requiring 
+# an explicit \brief command for a brief description.)
+
+QT_AUTOBRIEF           = NO
+
+# The MULTILINE_CPP_IS_BRIEF tag can be set to YES to make Doxygen 
+# treat a multi-line C++ special comment block (i.e. a block of //! or /// 
+# comments) as a brief description. This used to be the default behaviour. 
+# The new default is to treat a multi-line C++ comment block as a detailed 
+# description. Set this tag to YES if you prefer the old behaviour instead.
+
 MULTILINE_CPP_IS_BRIEF = NO
+
+# If the DETAILS_AT_TOP tag is set to YES then Doxygen 
+# will output the detailed description near the top, like JavaDoc.
+# If set to NO, the detailed description appears after the member 
+# documentation.
+
 DETAILS_AT_TOP         = NO
+
+# If the INHERIT_DOCS tag is set to YES (the default) then an undocumented 
+# member inherits the documentation from any documented member that it 
+# re-implements.
+
 INHERIT_DOCS           = YES
+
+# If the SEPARATE_MEMBER_PAGES tag is set to YES, then doxygen will produce 
+# a new page for each member. If set to NO, the documentation of a member will 
+# be part of the file/class/namespace that contains it.
+
 SEPARATE_MEMBER_PAGES  = NO
+
+# The TAB_SIZE tag can be used to set the number of spaces in a tab. 
+# Doxygen uses this value to replace tabs by spaces in code fragments.
+
 TAB_SIZE               = 8
+
+# This tag can be used to specify a number of aliases that acts 
+# as commands in the documentation. An alias has the form "name=value". 
+# For example adding "sideeffect=\par Side Effects:\n" will allow you to 
+# put the command \sideeffect (or @sideeffect) in the documentation, which 
+# will result in a user-defined paragraph with heading "Side Effects:". 
+# You can put \n's in the value part of an alias to insert newlines.
+
 ALIASES                = 
+
+# Set the OPTIMIZE_OUTPUT_FOR_C tag to YES if your project consists of C 
+# sources only. Doxygen will then generate output that is more tailored for C. 
+# For instance, some of the names that are used will be different. The list 
+# of all members will be omitted, etc.
+
 OPTIMIZE_OUTPUT_FOR_C  = NO
+
+# Set the OPTIMIZE_OUTPUT_JAVA tag to YES if your project consists of Java 
+# sources only. Doxygen will then generate output that is more tailored for 
+# Java. For instance, namespaces will be presented as packages, qualified 
+# scopes will look different, etc.
+
 OPTIMIZE_OUTPUT_JAVA   = NO
+
+# Set the OPTIMIZE_FOR_FORTRAN tag to YES if your project consists of Fortran 
+# sources only. Doxygen will then generate output that is more tailored for 
+# Fortran.
+
+OPTIMIZE_FOR_FORTRAN   = NO
+
+# Set the OPTIMIZE_OUTPUT_VHDL tag to YES if your project consists of VHDL 
+# sources. Doxygen will then generate output that is tailored for 
+# VHDL.
+
+OPTIMIZE_OUTPUT_VHDL   = NO
+
+# If you use STL classes (i.e. std::string, std::vector, etc.) but do not want 
+# to include (a tag file for) the STL sources as input, then you should 
+# set this tag to YES in order to let doxygen match functions declarations and 
+# definitions whose arguments contain STL classes (e.g. func(std::string); v.s. 
+# func(std::string) {}). This also make the inheritance and collaboration 
+# diagrams that involve STL classes more complete and accurate.
+
 BUILTIN_STL_SUPPORT    = NO
+
+# If you use Microsoft's C++/CLI language, you should set this option to YES to
+# enable parsing support.
+
+CPP_CLI_SUPPORT        = NO
+
+# Set the SIP_SUPPORT tag to YES if your project consists of sip sources only. 
+# Doxygen will parse them like normal C++ but will assume all classes use public 
+# instead of private inheritance when no explicit protection keyword is present.
+
+SIP_SUPPORT            = NO
+
+# For Microsoft's IDL there are propget and propput attributes to indicate getter 
+# and setter methods for a property. Setting this option to YES (the default) 
+# will make doxygen to replace the get and set methods by a property in the 
+# documentation. This will only work if the methods are indeed getting or 
+# setting a simple type. If this is not the case, or you want to show the 
+# methods anyway, you should set this option to NO.
+
+IDL_PROPERTY_SUPPORT   = YES
+
+# If member grouping is used in the documentation and the DISTRIBUTE_GROUP_DOC 
+# tag is set to YES, then doxygen will reuse the documentation of the first 
+# member in the group (if any) for the other members of the group. By default 
+# all members of a group must be documented explicitly.
+
 DISTRIBUTE_GROUP_DOC   = NO
+
+# Set the SUBGROUPING tag to YES (the default) to allow class member groups of 
+# the same type (for instance a group of public functions) to be put as a 
+# subgroup of that type (e.g. under the Public Functions section). Set it to 
+# NO to prevent subgrouping. Alternatively, this can be done per class using 
+# the \nosubgrouping command.
+
 SUBGROUPING            = YES
+
+# When TYPEDEF_HIDES_STRUCT is enabled, a typedef of a struct, union, or enum 
+# is documented as struct, union, or enum with the name of the typedef. So 
+# typedef struct TypeS {} TypeT, will appear in the documentation as a struct 
+# with name TypeT. When disabled the typedef will appear as a member of a file, 
+# namespace, or class. And the struct will be named TypeS. This can typically 
+# be useful for C code in case the coding convention dictates that all compound 
+# types are typedef'ed and only the typedef is referenced, never the tag name.
+
+TYPEDEF_HIDES_STRUCT   = NO
+
 #---------------------------------------------------------------------------
 # Build related configuration options
 #---------------------------------------------------------------------------
+
+# If the EXTRACT_ALL tag is set to YES doxygen will assume all entities in 
+# documentation are documented, even if no documentation was available. 
+# Private class members and static file members will be hidden unless 
+# the EXTRACT_PRIVATE and EXTRACT_STATIC tags are set to YES
+
 EXTRACT_ALL            = YES
+
+# If the EXTRACT_PRIVATE tag is set to YES all private members of a class 
+# will be included in the documentation.
+
 EXTRACT_PRIVATE        = YES
+
+# If the EXTRACT_STATIC tag is set to YES all static members of a file 
+# will be included in the documentation.
+
 EXTRACT_STATIC         = YES
+
+# If the EXTRACT_LOCAL_CLASSES tag is set to YES classes (and structs) 
+# defined locally in source files will be included in the documentation. 
+# If set to NO only classes defined in header files are included.
+
 EXTRACT_LOCAL_CLASSES  = YES
+
+# This flag is only useful for Objective-C code. When set to YES local 
+# methods, which are defined in the implementation section but not in 
+# the interface are included in the documentation. 
+# If set to NO (the default) only methods in the interface are included.
+
 EXTRACT_LOCAL_METHODS  = NO
+
+# If this flag is set to YES, the members of anonymous namespaces will be 
+# extracted and appear in the documentation as a namespace called 
+# 'anonymous_namespace{file}', where file will be replaced with the base 
+# name of the file that contains the anonymous namespace. By default 
+# anonymous namespace are hidden.
+
+EXTRACT_ANON_NSPACES   = NO
+
+# If the HIDE_UNDOC_MEMBERS tag is set to YES, Doxygen will hide all 
+# undocumented members of documented classes, files or namespaces. 
+# If set to NO (the default) these members will be included in the 
+# various overviews, but no documentation section is generated. 
+# This option has no effect if EXTRACT_ALL is enabled.
+
 HIDE_UNDOC_MEMBERS     = NO
+
+# If the HIDE_UNDOC_CLASSES tag is set to YES, Doxygen will hide all 
+# undocumented classes that are normally visible in the class hierarchy. 
+# If set to NO (the default) these classes will be included in the various 
+# overviews. This option has no effect if EXTRACT_ALL is enabled.
+
 HIDE_UNDOC_CLASSES     = NO
+
+# If the HIDE_FRIEND_COMPOUNDS tag is set to YES, Doxygen will hide all 
+# friend (class|struct|union) declarations. 
+# If set to NO (the default) these declarations will be included in the 
+# documentation.
+
 HIDE_FRIEND_COMPOUNDS  = NO
+
+# If the HIDE_IN_BODY_DOCS tag is set to YES, Doxygen will hide any 
+# documentation blocks found inside the body of a function. 
+# If set to NO (the default) these blocks will be appended to the 
+# function's detailed documentation block.
+
 HIDE_IN_BODY_DOCS      = NO
+
+# The INTERNAL_DOCS tag determines if documentation 
+# that is typed after a \internal command is included. If the tag is set 
+# to NO (the default) then the documentation will be excluded. 
+# Set it to YES to include the internal documentation.
+
 INTERNAL_DOCS          = NO
+
+# If the CASE_SENSE_NAMES tag is set to NO then Doxygen will only generate 
+# file names in lower-case letters. If set to YES upper-case letters are also 
+# allowed. This is useful if you have classes or files whose names only differ 
+# in case and if your file system supports case sensitive file names. Windows 
+# and Mac users are advised to set this option to NO.
+
 CASE_SENSE_NAMES       = YES
+
+# If the HIDE_SCOPE_NAMES tag is set to NO (the default) then Doxygen 
+# will show members with their full class and namespace scopes in the 
+# documentation. If set to YES the scope will be hidden.
+
 HIDE_SCOPE_NAMES       = NO
+
+# If the SHOW_INCLUDE_FILES tag is set to YES (the default) then Doxygen 
+# will put a list of the files that are included by a file in the documentation 
+# of that file.
+
 SHOW_INCLUDE_FILES     = YES
+
+# If the INLINE_INFO tag is set to YES (the default) then a tag [inline] 
+# is inserted in the documentation for inline members.
+
 INLINE_INFO            = YES
+
+# If the SORT_MEMBER_DOCS tag is set to YES (the default) then doxygen 
+# will sort the (detailed) documentation of file and class members 
+# alphabetically by member name. If set to NO the members will appear in 
+# declaration order.
+
 SORT_MEMBER_DOCS       = YES
+
+# If the SORT_BRIEF_DOCS tag is set to YES then doxygen will sort the 
+# brief documentation of file, namespace and class members alphabetically 
+# by member name. If set to NO (the default) the members will appear in 
+# declaration order.
+
 SORT_BRIEF_DOCS        = NO
+
+# If the SORT_GROUP_NAMES tag is set to YES then doxygen will sort the 
+# hierarchy of group names into alphabetical order. If set to NO (the default) 
+# the group names will appear in their defined order.
+
+SORT_GROUP_NAMES       = NO
+
+# If the SORT_BY_SCOPE_NAME tag is set to YES, the class list will be 
+# sorted by fully-qualified names, including namespaces. If set to 
+# NO (the default), the class list will be sorted only by class name, 
+# not including the namespace part. 
+# Note: This option is not very useful if HIDE_SCOPE_NAMES is set to YES.
+# Note: This option applies only to the class list, not to the 
+# alphabetical list.
+
 SORT_BY_SCOPE_NAME     = NO
+
+# The GENERATE_TODOLIST tag can be used to enable (YES) or 
+# disable (NO) the todo list. This list is created by putting \todo 
+# commands in the documentation.
+
 GENERATE_TODOLIST      = YES
+
+# The GENERATE_TESTLIST tag can be used to enable (YES) or 
+# disable (NO) the test list. This list is created by putting \test 
+# commands in the documentation.
+
 GENERATE_TESTLIST      = YES
+
+# The GENERATE_BUGLIST tag can be used to enable (YES) or 
+# disable (NO) the bug list. This list is created by putting \bug 
+# commands in the documentation.
+
 GENERATE_BUGLIST       = YES
+
+# The GENERATE_DEPRECATEDLIST tag can be used to enable (YES) or 
+# disable (NO) the deprecated list. This list is created by putting 
+# \deprecated commands in the documentation.
+
 GENERATE_DEPRECATEDLIST= YES
+
+# The ENABLED_SECTIONS tag can be used to enable conditional 
+# documentation sections, marked by \if sectionname ... \endif.
+
 ENABLED_SECTIONS       = 
+
+# The MAX_INITIALIZER_LINES tag determines the maximum number of lines 
+# the initial value of a variable or define consists of for it to appear in 
+# the documentation. If the initializer consists of more lines than specified 
+# here it will be hidden. Use a value of 0 to hide initializers completely. 
+# The appearance of the initializer of individual variables and defines in the 
+# documentation can be controlled using \showinitializer or \hideinitializer 
+# command in the documentation regardless of this setting.
+
 MAX_INITIALIZER_LINES  = 30
+
+# Set the SHOW_USED_FILES tag to NO to disable the list of files generated 
+# at the bottom of the documentation of classes and structs. If set to YES the 
+# list will mention the files that were used to generate the documentation.
+
 SHOW_USED_FILES        = YES
+
+# If the sources in your project are distributed over multiple directories 
+# then setting the SHOW_DIRECTORIES tag to YES will show the directory hierarchy 
+# in the documentation. The default is NO.
+
 SHOW_DIRECTORIES       = NO
+
+# Set the SHOW_FILES tag to NO to disable the generation of the Files page.
+# This will remove the Files entry from the Quick Index and from the 
+# Folder Tree View (if specified). The default is YES.
+
+SHOW_FILES             = YES
+
+# Set the SHOW_NAMESPACES tag to NO to disable the generation of the 
+# Namespaces page.  This will remove the Namespaces entry from the Quick Index
+# and from the Folder Tree View (if specified). The default is YES.
+
+SHOW_NAMESPACES        = YES
+
+# The FILE_VERSION_FILTER tag can be used to specify a program or script that 
+# doxygen should invoke to get the current version for each file (typically from 
+# the version control system). Doxygen will invoke the program by executing (via 
+# popen()) the command <command> <input-file>, where <command> is the value of 
+# the FILE_VERSION_FILTER tag, and <input-file> is the name of an input file 
+# provided by doxygen. Whatever the program writes to standard output 
+# is used as the file version. See the manual for examples.
+
 FILE_VERSION_FILTER    = 
+
 #---------------------------------------------------------------------------
 # configuration options related to warning and progress messages
 #---------------------------------------------------------------------------
+
+# The QUIET tag can be used to turn on/off the messages that are generated 
+# by doxygen. Possible values are YES and NO. If left blank NO is used.
+
 QUIET                  = NO
+
+# The WARNINGS tag can be used to turn on/off the warning messages that are 
+# generated by doxygen. Possible values are YES and NO. If left blank 
+# NO is used.
+
 WARNINGS               = YES
+
+# If WARN_IF_UNDOCUMENTED is set to YES, then doxygen will generate warnings 
+# for undocumented members. If EXTRACT_ALL is set to YES then this flag will 
+# automatically be disabled.
+
 WARN_IF_UNDOCUMENTED   = YES
+
+# If WARN_IF_DOC_ERROR is set to YES, doxygen will generate warnings for 
+# potential errors in the documentation, such as not documenting some 
+# parameters in a documented function, or documenting parameters that 
+# don't exist or using markup commands wrongly.
+
 WARN_IF_DOC_ERROR      = YES
+
+# This WARN_NO_PARAMDOC option can be abled to get warnings for 
+# functions that are documented, but have no documentation for their parameters 
+# or return value. If set to NO (the default) doxygen will only warn about 
+# wrong or incomplete parameter documentation, but not about the absence of 
+# documentation.
+
 WARN_NO_PARAMDOC       = NO
+
+# The WARN_FORMAT tag determines the format of the warning messages that 
+# doxygen can produce. The string should contain the $file, $line, and $text 
+# tags, which will be replaced by the file and line number from which the 
+# warning originated and the warning text. Optionally the format may contain 
+# $version, which will be replaced by the version of the file (if it could 
+# be obtained via FILE_VERSION_FILTER)
+
 WARN_FORMAT            = "$file:$line: $text"
+
+# The WARN_LOGFILE tag can be used to specify a file to which warning 
+# and error messages should be written. If left blank the output is written 
+# to stderr.
+
 WARN_LOGFILE           = 
+
 #---------------------------------------------------------------------------
 # configuration options related to the input files
 #---------------------------------------------------------------------------
+
+# The INPUT tag can be used to specify the files and/or directories that contain 
+# documented source files. You may enter file names like "myfile.cpp" or 
+# directories like "/usr/src/myproject". Separate the files or directories 
+# with spaces.
+
 INPUT                  = ../src/
+
+# This tag can be used to specify the character encoding of the source files 
+# that doxygen parses. Internally doxygen uses the UTF-8 encoding, which is 
+# also the default input encoding. Doxygen uses libiconv (or the iconv built 
+# into libc) for the transcoding. See http://www.gnu.org/software/libiconv for 
+# the list of possible encodings.
+
+INPUT_ENCODING         = UTF-8
+
+# If the value of the INPUT tag contains directories, you can use the 
+# FILE_PATTERNS tag to specify one or more wildcard pattern (like *.cpp 
+# and *.h) to filter out the source-files in the directories. If left 
+# blank the following patterns are tested: 
+# *.c *.cc *.cxx *.cpp *.c++ *.java *.ii *.ixx *.ipp *.i++ *.inl *.h *.hh *.hxx 
+# *.hpp *.h++ *.idl *.odl *.cs *.php *.php3 *.inc *.m *.mm *.py *.f90
+
 FILE_PATTERNS          = *.c \
                          *.h \
                          *.cpp \
                          *.hpp
+
+# The RECURSIVE tag can be used to turn specify whether or not subdirectories 
+# should be searched for input files as well. Possible values are YES and NO. 
+# If left blank NO is used.
+
 RECURSIVE              = YES
+
+# The EXCLUDE tag can be used to specify files and/or directories that should 
+# excluded from the INPUT source files. This way you can easily exclude a 
+# subdirectory from a directory tree whose root is specified with the INPUT tag.
+
 EXCLUDE                = 
+
+# The EXCLUDE_SYMLINKS tag can be used select whether or not files or 
+# directories that are symbolic links (a Unix filesystem feature) are excluded 
+# from the input.
+
 EXCLUDE_SYMLINKS       = NO
+
+# If the value of the INPUT tag contains directories, you can use the 
+# EXCLUDE_PATTERNS tag to specify one or more wildcard patterns to exclude 
+# certain files from those directories. Note that the wildcards are matched 
+# against the file with absolute path, so to exclude all test directories 
+# for example use the pattern */test/*
+
 EXCLUDE_PATTERNS       = 
+
+# The EXCLUDE_SYMBOLS tag can be used to specify one or more symbol names 
+# (namespaces, classes, functions, etc.) that should be excluded from the 
+# output. The symbol name can be a fully qualified name, a word, or if the 
+# wildcard * is used, a substring. Examples: ANamespace, AClass, 
+# AClass::ANamespace, ANamespace::*Test
+
+EXCLUDE_SYMBOLS        = 
+
+# The EXAMPLE_PATH tag can be used to specify one or more files or 
+# directories that contain example code fragments that are included (see 
+# the \include command).
+
 EXAMPLE_PATH           = 
+
+# If the value of the EXAMPLE_PATH tag contains directories, you can use the 
+# EXAMPLE_PATTERNS tag to specify one or more wildcard pattern (like *.cpp 
+# and *.h) to filter out the source-files in the directories. If left 
+# blank all files are included.
+
 EXAMPLE_PATTERNS       = *
+
+# If the EXAMPLE_RECURSIVE tag is set to YES then subdirectories will be 
+# searched for input files to be used with the \include or \dontinclude 
+# commands irrespective of the value of the RECURSIVE tag. 
+# Possible values are YES and NO. If left blank NO is used.
+
 EXAMPLE_RECURSIVE      = NO
+
+# The IMAGE_PATH tag can be used to specify one or more files or 
+# directories that contain image that are included in the documentation (see 
+# the \image command).
+
 IMAGE_PATH             = 
+
+# The INPUT_FILTER tag can be used to specify a program that doxygen should 
+# invoke to filter for each input file. Doxygen will invoke the filter program 
+# by executing (via popen()) the command <filter> <input-file>, where <filter> 
+# is the value of the INPUT_FILTER tag, and <input-file> is the name of an 
+# input file. Doxygen will then use the output that the filter program writes 
+# to standard output.  If FILTER_PATTERNS is specified, this tag will be 
+# ignored.
+
 INPUT_FILTER           = 
+
+# The FILTER_PATTERNS tag can be used to specify filters on a per file pattern 
+# basis.  Doxygen will compare the file name with each pattern and apply the 
+# filter if there is a match.  The filters are a list of the form: 
+# pattern=filter (like *.cpp=my_cpp_filter). See INPUT_FILTER for further 
+# info on how filters are used. If FILTER_PATTERNS is empty, INPUT_FILTER 
+# is applied to all files.
+
 FILTER_PATTERNS        = 
+
+# If the FILTER_SOURCE_FILES tag is set to YES, the input filter (if set using 
+# INPUT_FILTER) will be used to filter the input files when producing source 
+# files to browse (i.e. when SOURCE_BROWSER is set to YES).
+
 FILTER_SOURCE_FILES    = NO
+
 #---------------------------------------------------------------------------
 # configuration options related to source browsing
 #---------------------------------------------------------------------------
+
+# If the SOURCE_BROWSER tag is set to YES then a list of source files will 
+# be generated. Documented entities will be cross-referenced with these sources. 
+# Note: To get rid of all source code in the generated output, make sure also 
+# VERBATIM_HEADERS is set to NO.
+
 SOURCE_BROWSER         = YES
+
+# Setting the INLINE_SOURCES tag to YES will include the body 
+# of functions and classes directly in the documentation.
+
 INLINE_SOURCES         = NO
+
+# Setting the STRIP_CODE_COMMENTS tag to YES (the default) will instruct 
+# doxygen to hide any special comment blocks from generated source code 
+# fragments. Normal C and C++ comments will always remain visible.
+
 STRIP_CODE_COMMENTS    = YES
+
+# If the REFERENCED_BY_RELATION tag is set to YES 
+# then for each documented function all documented 
+# functions referencing it will be listed.
+
 REFERENCED_BY_RELATION = YES
+
+# If the REFERENCES_RELATION tag is set to YES 
+# then for each documented function all documented entities 
+# called/used by that function will be listed.
+
 REFERENCES_RELATION    = YES
+
+# If the REFERENCES_LINK_SOURCE tag is set to YES (the default)
+# and SOURCE_BROWSER tag is set to YES, then the hyperlinks from
+# functions in REFERENCES_RELATION and REFERENCED_BY_RELATION lists will
+# link to the source code.  Otherwise they will link to the documentstion.
+
 REFERENCES_LINK_SOURCE = YES
+
+# If the USE_HTAGS tag is set to YES then the references to source code 
+# will point to the HTML generated by the htags(1) tool instead of doxygen 
+# built-in source browser. The htags tool is part of GNU's global source 
+# tagging system (see http://www.gnu.org/software/global/global.html). You 
+# will need version 4.8.6 or higher.
+
 USE_HTAGS              = NO
+
+# If the VERBATIM_HEADERS tag is set to YES (the default) then Doxygen 
+# will generate a verbatim copy of the header file for each class for 
+# which an include is specified. Set to NO to disable this.
+
 VERBATIM_HEADERS       = YES
+
 #---------------------------------------------------------------------------
 # configuration options related to the alphabetical class index
 #---------------------------------------------------------------------------
+
+# If the ALPHABETICAL_INDEX tag is set to YES, an alphabetical index 
+# of all compounds will be generated. Enable this if the project 
+# contains a lot of classes, structs, unions or interfaces.
+
 ALPHABETICAL_INDEX     = YES
+
+# If the alphabetical index is enabled (see ALPHABETICAL_INDEX) then 
+# the COLS_IN_ALPHA_INDEX tag can be used to specify the number of columns 
+# in which this list will be split (can be a number in the range [1..20])
+
 COLS_IN_ALPHA_INDEX    = 5
+
+# In case all classes in a project start with a common prefix, all 
+# classes will be put under the same header in the alphabetical index. 
+# The IGNORE_PREFIX tag can be used to specify one or more prefixes that 
+# should be ignored while generating the index headers.
+
 IGNORE_PREFIX          = 
+
 #---------------------------------------------------------------------------
 # configuration options related to the HTML output
 #---------------------------------------------------------------------------
+
+# If the GENERATE_HTML tag is set to YES (the default) Doxygen will 
+# generate HTML output.
+
 GENERATE_HTML          = YES
+
+# The HTML_OUTPUT tag is used to specify where the HTML docs will be put. 
+# If a relative path is entered the value of OUTPUT_DIRECTORY will be 
+# put in front of it. If left blank `html' will be used as the default path.
+
 HTML_OUTPUT            = api
+
+# The HTML_FILE_EXTENSION tag can be used to specify the file extension for 
+# each generated HTML page (for example: .htm,.php,.asp). If it is left blank 
+# doxygen will generate files with .html extension.
+
 HTML_FILE_EXTENSION    = .html
+
+# The HTML_HEADER tag can be used to specify a personal HTML header for 
+# each generated HTML page. If it is left blank doxygen will generate a 
+# standard header.
+
 HTML_HEADER            = 
+
+# The HTML_FOOTER tag can be used to specify a personal HTML footer for 
+# each generated HTML page. If it is left blank doxygen will generate a 
+# standard footer.
+
 HTML_FOOTER            = 
+
+# The HTML_STYLESHEET tag can be used to specify a user-defined cascading 
+# style sheet that is used by each HTML page. It can be used to 
+# fine-tune the look of the HTML output. If the tag is left blank doxygen 
+# will generate a default style sheet. Note that doxygen will try to copy 
+# the style sheet file to the HTML output directory, so don't put your own 
+# stylesheet in the HTML output directory as well, or it will be erased!
+
 HTML_STYLESHEET        = 
+
+# If the HTML_ALIGN_MEMBERS tag is set to YES, the members of classes, 
+# files or namespaces will be aligned in HTML using tables. If set to 
+# NO a bullet list will be used.
+
 HTML_ALIGN_MEMBERS     = YES
+
+# If the GENERATE_HTMLHELP tag is set to YES, additional index files 
+# will be generated that can be used as input for tools like the 
+# Microsoft HTML help workshop to generate a compiled HTML help file (.chm) 
+# of the generated HTML documentation.
+
 GENERATE_HTMLHELP      = NO
+
+# If the GENERATE_DOCSET tag is set to YES, additional index files 
+# will be generated that can be used as input for Apple's Xcode 3 
+# integrated development environment, introduced with OSX 10.5 (Leopard). 
+# To create a documentation set, doxygen will generate a Makefile in the 
+# HTML output directory. Running make will produce the docset in that 
+# directory and running "make install" will install the docset in 
+# ~/Library/Developer/Shared/Documentation/DocSets so that Xcode will find 
+# it at startup.
+
+GENERATE_DOCSET        = NO
+
+# When GENERATE_DOCSET tag is set to YES, this tag determines the name of the 
+# feed. A documentation feed provides an umbrella under which multiple 
+# documentation sets from a single provider (such as a company or product suite) 
+# can be grouped.
+
+DOCSET_FEEDNAME        = "Doxygen generated docs"
+
+# When GENERATE_DOCSET tag is set to YES, this tag specifies a string that 
+# should uniquely identify the documentation set bundle. This should be a 
+# reverse domain-name style string, e.g. com.mycompany.MyDocSet. Doxygen 
+# will append .docset to the name.
+
+DOCSET_BUNDLE_ID       = org.doxygen.Project
+
+# If the HTML_DYNAMIC_SECTIONS tag is set to YES then the generated HTML 
+# documentation will contain sections that can be hidden and shown after the 
+# page has loaded. For this to work a browser that supports 
+# JavaScript and DHTML is required (for instance Mozilla 1.0+, Firefox 
+# Netscape 6.0+, Internet explorer 5.0+, Konqueror, or Safari).
+
+HTML_DYNAMIC_SECTIONS  = NO
+
+# If the GENERATE_HTMLHELP tag is set to YES, the CHM_FILE tag can 
+# be used to specify the file name of the resulting .chm file. You 
+# can add a path in front of the file if the result should not be 
+# written to the html output directory.
+
 CHM_FILE               = 
+
+# If the GENERATE_HTMLHELP tag is set to YES, the HHC_LOCATION tag can 
+# be used to specify the location (absolute path including file name) of 
+# the HTML help compiler (hhc.exe). If non-empty doxygen will try to run 
+# the HTML help compiler on the generated index.hhp.
+
 HHC_LOCATION           = 
+
+# If the GENERATE_HTMLHELP tag is set to YES, the GENERATE_CHI flag 
+# controls if a separate .chi index file is generated (YES) or that 
+# it should be included in the master .chm file (NO).
+
 GENERATE_CHI           = NO
+
+# If the GENERATE_HTMLHELP tag is set to YES, the CHM_INDEX_ENCODING
+# is used to encode HtmlHelp index (hhk), content (hhc) and project file
+# content.
+
+CHM_INDEX_ENCODING     = 
+
+# If the GENERATE_HTMLHELP tag is set to YES, the BINARY_TOC flag 
+# controls whether a binary table of contents is generated (YES) or a 
+# normal table of contents (NO) in the .chm file.
+
 BINARY_TOC             = NO
+
+# The TOC_EXPAND flag can be set to YES to add extra items for group members 
+# to the contents of the HTML help documentation and to the tree view.
+
 TOC_EXPAND             = NO
+
+# The DISABLE_INDEX tag can be used to turn on/off the condensed index at 
+# top of each HTML page. The value NO (the default) enables the index and 
+# the value YES disables it.
+
 DISABLE_INDEX          = NO
+
+# This tag can be used to set the number of enum values (range [1..20]) 
+# that doxygen will group on one line in the generated HTML documentation.
+
 ENUM_VALUES_PER_LINE   = 4
+
+# The GENERATE_TREEVIEW tag is used to specify whether a tree-like index
+# structure should be generated to display hierarchical information.
+# If the tag value is set to FRAME, a side panel will be generated
+# containing a tree-like index structure (just like the one that 
+# is generated for HTML Help). For this to work a browser that supports 
+# JavaScript, DHTML, CSS and frames is required (for instance Mozilla 1.0+, 
+# Netscape 6.0+, Internet explorer 5.0+, or Konqueror). Windows users are 
+# probably better off using the HTML help feature. Other possible values 
+# for this tag are: HIERARCHIES, which will generate the Groups, Directories,
+# and Class Hiererachy pages using a tree view instead of an ordered list;
+# ALL, which combines the behavior of FRAME and HIERARCHIES; and NONE, which
+# disables this behavior completely. For backwards compatibility with previous
+# releases of Doxygen, the values YES and NO are equivalent to FRAME and NONE
+# respectively.
+
 GENERATE_TREEVIEW      = NO
+
+# If the treeview is enabled (see GENERATE_TREEVIEW) then this tag can be 
+# used to set the initial width (in pixels) of the frame in which the tree 
+# is shown.
+
 TREEVIEW_WIDTH         = 250
+
+# Use this tag to change the font size of Latex formulas included 
+# as images in the HTML documentation. The default is 10. Note that 
+# when you change the font size after a successful doxygen run you need 
+# to manually remove any form_*.png images from the HTML output directory 
+# to force them to be regenerated.
+
+FORMULA_FONTSIZE       = 10
+
 #---------------------------------------------------------------------------
 # configuration options related to the LaTeX output
 #---------------------------------------------------------------------------
+
+# If the GENERATE_LATEX tag is set to YES (the default) Doxygen will 
+# generate Latex output.
+
 GENERATE_LATEX         = NO
+
+# The LATEX_OUTPUT tag is used to specify where the LaTeX docs will be put. 
+# If a relative path is entered the value of OUTPUT_DIRECTORY will be 
+# put in front of it. If left blank `latex' will be used as the default path.
+
 LATEX_OUTPUT           = latex
+
+# The LATEX_CMD_NAME tag can be used to specify the LaTeX command name to be 
+# invoked. If left blank `latex' will be used as the default command name.
+
 LATEX_CMD_NAME         = latex
+
+# The MAKEINDEX_CMD_NAME tag can be used to specify the command name to 
+# generate index for LaTeX. If left blank `makeindex' will be used as the 
+# default command name.
+
 MAKEINDEX_CMD_NAME     = makeindex
+
+# If the COMPACT_LATEX tag is set to YES Doxygen generates more compact 
+# LaTeX documents. This may be useful for small projects and may help to 
+# save some trees in general.
+
 COMPACT_LATEX          = NO
+
+# The PAPER_TYPE tag can be used to set the paper type that is used 
+# by the printer. Possible values are: a4, a4wide, letter, legal and 
+# executive. If left blank a4wide will be used.
+
 PAPER_TYPE             = a4wide
+
+# The EXTRA_PACKAGES tag can be to specify one or more names of LaTeX 
+# packages that should be included in the LaTeX output.
+
 EXTRA_PACKAGES         = 
+
+# The LATEX_HEADER tag can be used to specify a personal LaTeX header for 
+# the generated latex document. The header should contain everything until 
+# the first chapter. If it is left blank doxygen will generate a 
+# standard header. Notice: only use this tag if you know what you are doing!
+
 LATEX_HEADER           = 
+
+# If the PDF_HYPERLINKS tag is set to YES, the LaTeX that is generated 
+# is prepared for conversion to pdf (using ps2pdf). The pdf file will 
+# contain links (just like the HTML output) instead of page references 
+# This makes the output suitable for online browsing using a pdf viewer.
+
 PDF_HYPERLINKS         = NO
+
+# If the USE_PDFLATEX tag is set to YES, pdflatex will be used instead of 
+# plain latex in the generated Makefile. Set this option to YES to get a 
+# higher quality PDF documentation.
+
 USE_PDFLATEX           = NO
+
+# If the LATEX_BATCHMODE tag is set to YES, doxygen will add the \\batchmode. 
+# command to the generated LaTeX files. This will instruct LaTeX to keep 
+# running if errors occur, instead of asking the user for help. 
+# This option is also used when generating formulas in HTML.
+
 LATEX_BATCHMODE        = NO
+
+# If LATEX_HIDE_INDICES is set to YES then doxygen will not 
+# include the index chapters (such as File Index, Compound Index, etc.) 
+# in the output.
+
 LATEX_HIDE_INDICES     = NO
+
 #---------------------------------------------------------------------------
 # configuration options related to the RTF output
 #---------------------------------------------------------------------------
+
+# If the GENERATE_RTF tag is set to YES Doxygen will generate RTF output 
+# The RTF output is optimized for Word 97 and may not look very pretty with 
+# other RTF readers or editors.
+
 GENERATE_RTF           = NO
+
+# The RTF_OUTPUT tag is used to specify where the RTF docs will be put. 
+# If a relative path is entered the value of OUTPUT_DIRECTORY will be 
+# put in front of it. If left blank `rtf' will be used as the default path.
+
 RTF_OUTPUT             = rtf
+
+# If the COMPACT_RTF tag is set to YES Doxygen generates more compact 
+# RTF documents. This may be useful for small projects and may help to 
+# save some trees in general.
+
 COMPACT_RTF            = NO
+
+# If the RTF_HYPERLINKS tag is set to YES, the RTF that is generated 
+# will contain hyperlink fields. The RTF file will 
+# contain links (just like the HTML output) instead of page references. 
+# This makes the output suitable for online browsing using WORD or other 
+# programs which support those fields. 
+# Note: wordpad (write) and others do not support links.
+
 RTF_HYPERLINKS         = NO
+
+# Load stylesheet definitions from file. Syntax is similar to doxygen's 
+# config file, i.e. a series of assignments. You only have to provide 
+# replacements, missing definitions are set to their default value.
+
 RTF_STYLESHEET_FILE    = 
+
+# Set optional variables used in the generation of an rtf document. 
+# Syntax is similar to doxygen's config file.
+
 RTF_EXTENSIONS_FILE    = 
+
 #---------------------------------------------------------------------------
 # configuration options related to the man page output
 #---------------------------------------------------------------------------
+
+# If the GENERATE_MAN tag is set to YES (the default) Doxygen will 
+# generate man pages
+
 GENERATE_MAN           = NO
+
+# The MAN_OUTPUT tag is used to specify where the man pages will be put. 
+# If a relative path is entered the value of OUTPUT_DIRECTORY will be 
+# put in front of it. If left blank `man' will be used as the default path.
+
 MAN_OUTPUT             = man
+
+# The MAN_EXTENSION tag determines the extension that is added to 
+# the generated man pages (default is the subroutine's section .3)
+
 MAN_EXTENSION          = .3
+
+# If the MAN_LINKS tag is set to YES and Doxygen generates man output, 
+# then it will generate one additional man file for each entity 
+# documented in the real man page(s). These additional files 
+# only source the real man page, but without them the man command 
+# would be unable to find the correct page. The default is NO.
+
 MAN_LINKS              = NO
+
 #---------------------------------------------------------------------------
 # configuration options related to the XML output
 #---------------------------------------------------------------------------
+
+# If the GENERATE_XML tag is set to YES Doxygen will 
+# generate an XML file that captures the structure of 
+# the code including all documentation.
+
 GENERATE_XML           = NO
+
+# The XML_OUTPUT tag is used to specify where the XML pages will be put. 
+# If a relative path is entered the value of OUTPUT_DIRECTORY will be 
+# put in front of it. If left blank `xml' will be used as the default path.
+
 XML_OUTPUT             = xml
+
+# The XML_SCHEMA tag can be used to specify an XML schema, 
+# which can be used by a validating XML parser to check the 
+# syntax of the XML files.
+
 XML_SCHEMA             = 
+
+# The XML_DTD tag can be used to specify an XML DTD, 
+# which can be used by a validating XML parser to check the 
+# syntax of the XML files.
+
 XML_DTD                = 
+
+# If the XML_PROGRAMLISTING tag is set to YES Doxygen will 
+# dump the program listings (including syntax highlighting 
+# and cross-referencing information) to the XML output. Note that 
+# enabling this will significantly increase the size of the XML output.
+
 XML_PROGRAMLISTING     = YES
+
 #---------------------------------------------------------------------------
 # configuration options for the AutoGen Definitions output
 #---------------------------------------------------------------------------
+
+# If the GENERATE_AUTOGEN_DEF tag is set to YES Doxygen will 
+# generate an AutoGen Definitions (see autogen.sf.net) file 
+# that captures the structure of the code including all 
+# documentation. Note that this feature is still experimental 
+# and incomplete at the moment.
+
 GENERATE_AUTOGEN_DEF   = NO
+
 #---------------------------------------------------------------------------
 # configuration options related to the Perl module output
 #---------------------------------------------------------------------------
+
+# If the GENERATE_PERLMOD tag is set to YES Doxygen will 
+# generate a Perl module file that captures the structure of 
+# the code including all documentation. Note that this 
+# feature is still experimental and incomplete at the 
+# moment.
+
 GENERATE_PERLMOD       = NO
+
+# If the PERLMOD_LATEX tag is set to YES Doxygen will generate 
+# the necessary Makefile rules, Perl scripts and LaTeX code to be able 
+# to generate PDF and DVI output from the Perl module output.
+
 PERLMOD_LATEX          = NO
+
+# If the PERLMOD_PRETTY tag is set to YES the Perl module output will be 
+# nicely formatted so it can be parsed by a human reader.  This is useful 
+# if you want to understand what is going on.  On the other hand, if this 
+# tag is set to NO the size of the Perl module output will be much smaller 
+# and Perl will parse it just the same.
+
 PERLMOD_PRETTY         = YES
+
+# The names of the make variables in the generated doxyrules.make file 
+# are prefixed with the string contained in PERLMOD_MAKEVAR_PREFIX. 
+# This is useful so different doxyrules.make files included by the same 
+# Makefile don't overwrite each other's variables.
+
 PERLMOD_MAKEVAR_PREFIX = 
+
 #---------------------------------------------------------------------------
 # Configuration options related to the preprocessor   
 #---------------------------------------------------------------------------
+
+# If the ENABLE_PREPROCESSING tag is set to YES (the default) Doxygen will 
+# evaluate all C-preprocessor directives found in the sources and include 
+# files.
+
 ENABLE_PREPROCESSING   = YES
+
+# If the MACRO_EXPANSION tag is set to YES Doxygen will expand all macro 
+# names in the source code. If set to NO (the default) only conditional 
+# compilation will be performed. Macro expansion can be done in a controlled 
+# way by setting EXPAND_ONLY_PREDEF to YES.
+
 MACRO_EXPANSION        = NO
+
+# If the EXPAND_ONLY_PREDEF and MACRO_EXPANSION tags are both set to YES 
+# then the macro expansion is limited to the macros specified with the 
+# PREDEFINED and EXPAND_AS_DEFINED tags.
+
 EXPAND_ONLY_PREDEF     = NO
+
+# If the SEARCH_INCLUDES tag is set to YES (the default) the includes files 
+# in the INCLUDE_PATH (see below) will be search if a #include is found.
+
 SEARCH_INCLUDES        = YES
+
+# The INCLUDE_PATH tag can be used to specify one or more directories that 
+# contain include files that are not input files but should be processed by 
+# the preprocessor.
+
 INCLUDE_PATH           = 
+
+# You can use the INCLUDE_FILE_PATTERNS tag to specify one or more wildcard 
+# patterns (like *.h and *.hpp) to filter out the header-files in the 
+# directories. If left blank, the patterns specified with FILE_PATTERNS will 
+# be used.
+
 INCLUDE_FILE_PATTERNS  = 
+
+# The PREDEFINED tag can be used to specify one or more macro names that 
+# are defined before the preprocessor is started (similar to the -D option of 
+# gcc). The argument of the tag is a list of macros of the form: name 
+# or name=definition (no spaces). If the definition and the = are 
+# omitted =1 is assumed. To prevent a macro definition from being 
+# undefined via #undef or recursively expanded use the := operator 
+# instead of the = operator.
+
 PREDEFINED             = 
+
+# If the MACRO_EXPANSION and EXPAND_ONLY_PREDEF tags are set to YES then 
+# this tag can be used to specify a list of macro names that should be expanded. 
+# The macro definition that is found in the sources will be used. 
+# Use the PREDEFINED tag if you want to use a different macro definition.
+
 EXPAND_AS_DEFINED      = 
+
+# If the SKIP_FUNCTION_MACROS tag is set to YES (the default) then 
+# doxygen's preprocessor will remove all function-like macros that are alone 
+# on a line, have an all uppercase name, and do not end with a semicolon. Such 
+# function macros are typically used for boiler-plate code, and will confuse 
+# the parser if not removed.
+
 SKIP_FUNCTION_MACROS   = YES
+
 #---------------------------------------------------------------------------
 # Configuration::additions related to external references   
 #---------------------------------------------------------------------------
+
+# The TAGFILES option can be used to specify one or more tagfiles. 
+# Optionally an initial location of the external documentation 
+# can be added for each tagfile. The format of a tag file without 
+# this location is as follows: 
+#   TAGFILES = file1 file2 ... 
+# Adding location for the tag files is done as follows: 
+#   TAGFILES = file1=loc1 "file2 = loc2" ... 
+# where "loc1" and "loc2" can be relative or absolute paths or 
+# URLs. If a location is present for each tag, the installdox tool 
+# does not have to be run to correct the links.
+# Note that each tag file must have a unique name
+# (where the name does NOT include the path)
+# If a tag file is not located in the directory in which doxygen 
+# is run, you must also specify the path to the tagfile here.
+
 TAGFILES               = 
+
+# When a file name is specified after GENERATE_TAGFILE, doxygen will create 
+# a tag file that is based on the input files it reads.
+
 GENERATE_TAGFILE       = 
+
+# If the ALLEXTERNALS tag is set to YES all external classes will be listed 
+# in the class index. If set to NO only the inherited external classes 
+# will be listed.
+
 ALLEXTERNALS           = NO
+
+# If the EXTERNAL_GROUPS tag is set to YES all external groups will be listed 
+# in the modules index. If set to NO, only the current project's groups will 
+# be listed.
+
 EXTERNAL_GROUPS        = YES
+
+# The PERL_PATH should be the absolute path and name of the perl script 
+# interpreter (i.e. the result of `which perl').
+
 PERL_PATH              = /usr/bin/perl
+
 #---------------------------------------------------------------------------
 # Configuration options related to the dot tool   
 #---------------------------------------------------------------------------
+
+# If the CLASS_DIAGRAMS tag is set to YES (the default) Doxygen will 
+# generate a inheritance diagram (in HTML, RTF and LaTeX) for classes with base 
+# or super classes. Setting the tag to NO turns the diagrams off. Note that 
+# this option is superseded by the HAVE_DOT option below. This is only a 
+# fallback. It is recommended to install and use dot, since it yields more 
+# powerful graphs.
+
 CLASS_DIAGRAMS         = NO
+
+# You can define message sequence charts within doxygen comments using the \msc 
+# command. Doxygen will then run the mscgen tool (see 
+# http://www.mcternan.me.uk/mscgen/) to produce the chart and insert it in the 
+# documentation. The MSCGEN_PATH tag allows you to specify the directory where 
+# the mscgen tool resides. If left empty the tool is assumed to be found in the 
+# default search path.
+
+MSCGEN_PATH            = 
+
+# If set to YES, the inheritance and collaboration graphs will hide 
+# inheritance and usage relations if the target is undocumented 
+# or is not a class.
+
 HIDE_UNDOC_RELATIONS   = YES
+
+# If you set the HAVE_DOT tag to YES then doxygen will assume the dot tool is 
+# available from the path. This tool is part of Graphviz, a graph visualization 
+# toolkit from AT&T and Lucent Bell Labs. The other options in this section 
+# have no effect if this option is set to NO (the default)
+
 HAVE_DOT               = YES
+
+# By default doxygen will write a font called FreeSans.ttf to the output 
+# directory and reference it in all dot files that doxygen generates. This 
+# font does not include all possible unicode characters however, so when you need 
+# these (or just want a differently looking font) you can specify the font name 
+# using DOT_FONTNAME. You need need to make sure dot is able to find the font, 
+# which can be done by putting it in a standard location or by setting the 
+# DOTFONTPATH environment variable or by setting DOT_FONTPATH to the directory 
+# containing the font.
+
+DOT_FONTNAME           = FreeSans
+
+# By default doxygen will tell dot to use the output directory to look for the 
+# FreeSans.ttf font (which doxygen will put there itself). If you specify a 
+# different font using DOT_FONTNAME you can set the path where dot 
+# can find it using this tag.
+
+DOT_FONTPATH           = 
+
+# If the CLASS_GRAPH and HAVE_DOT tags are set to YES then doxygen 
+# will generate a graph for each documented class showing the direct and 
+# indirect inheritance relations. Setting this tag to YES will force the 
+# the CLASS_DIAGRAMS tag to NO.
+
 CLASS_GRAPH            = YES
+
+# If the COLLABORATION_GRAPH and HAVE_DOT tags are set to YES then doxygen 
+# will generate a graph for each documented class showing the direct and 
+# indirect implementation dependencies (inheritance, containment, and 
+# class references variables) of the class with other documented classes.
+
 COLLABORATION_GRAPH    = YES
+
+# If the GROUP_GRAPHS and HAVE_DOT tags are set to YES then doxygen 
+# will generate a graph for groups, showing the direct groups dependencies
+
 GROUP_GRAPHS           = YES
+
+# If the UML_LOOK tag is set to YES doxygen will generate inheritance and 
+# collaboration diagrams in a style similar to the OMG's Unified Modeling 
+# Language.
+
 UML_LOOK               = NO
+
+# If set to YES, the inheritance and collaboration graphs will show the 
+# relations between templates and their instances.
+
 TEMPLATE_RELATIONS     = NO
+
+# If the ENABLE_PREPROCESSING, SEARCH_INCLUDES, INCLUDE_GRAPH, and HAVE_DOT 
+# tags are set to YES then doxygen will generate a graph for each documented 
+# file showing the direct and indirect include dependencies of the file with 
+# other documented files.
+
 INCLUDE_GRAPH          = YES
+
+# If the ENABLE_PREPROCESSING, SEARCH_INCLUDES, INCLUDED_BY_GRAPH, and 
+# HAVE_DOT tags are set to YES then doxygen will generate a graph for each 
+# documented header file showing the documented files that directly or 
+# indirectly include this file.
+
 INCLUDED_BY_GRAPH      = YES
+
+# If the CALL_GRAPH and HAVE_DOT options are set to YES then 
+# doxygen will generate a call dependency graph for every global function 
+# or class method. Note that enabling this option will significantly increase 
+# the time of a run. So in most cases it will be better to enable call graphs 
+# for selected functions only using the \callgraph command.
+
 CALL_GRAPH             = YES
+
+# If the CALLER_GRAPH and HAVE_DOT tags are set to YES then 
+# doxygen will generate a caller dependency graph for every global function 
+# or class method. Note that enabling this option will significantly increase 
+# the time of a run. So in most cases it will be better to enable caller 
+# graphs for selected functions only using the \callergraph command.
+
 CALLER_GRAPH           = NO
+
+# If the GRAPHICAL_HIERARCHY and HAVE_DOT tags are set to YES then doxygen 
+# will graphical hierarchy of all classes instead of a textual one.
+
 GRAPHICAL_HIERARCHY    = YES
+
+# If the DIRECTORY_GRAPH, SHOW_DIRECTORIES and HAVE_DOT tags are set to YES 
+# then doxygen will show the dependencies a directory has on other directories 
+# in a graphical way. The dependency relations are determined by the #include
+# relations between the files in the directories.
+
 DIRECTORY_GRAPH        = YES
+
+# The DOT_IMAGE_FORMAT tag can be used to set the image format of the images 
+# generated by dot. Possible values are png, jpg, or gif
+# If left blank png will be used.
+
 DOT_IMAGE_FORMAT       = png
+
+# The tag DOT_PATH can be used to specify the path where the dot tool can be 
+# found. If left blank, it is assumed the dot tool can be found in the path.
+
 DOT_PATH               = 
+
+# The DOTFILE_DIRS tag can be used to specify one or more directories that 
+# contain dot files that are included in the documentation (see the 
+# \dotfile command).
+
 DOTFILE_DIRS           = 
-MAX_DOT_GRAPH_WIDTH    = 1024
-MAX_DOT_GRAPH_HEIGHT   = 1024
+
+# The DOT_GRAPH_MAX_NODES tag can be used to set the maximum number of 
+# nodes that will be shown in the graph. If the number of nodes in a graph 
+# becomes larger than this value, doxygen will truncate the graph, which is 
+# visualized by representing a node as a red box. Note that doxygen if the 
+# number of direct children of the root node in a graph is already larger than 
+# DOT_GRAPH_MAX_NODES then the graph will not be shown at all. Also note 
+# that the size of a graph can be further restricted by MAX_DOT_GRAPH_DEPTH.
+
+DOT_GRAPH_MAX_NODES    = 50
+
+# The MAX_DOT_GRAPH_DEPTH tag can be used to set the maximum depth of the 
+# graphs generated by dot. A depth value of 3 means that only nodes reachable 
+# from the root by following a path via at most 3 edges will be shown. Nodes 
+# that lay further from the root node will be omitted. Note that setting this 
+# option to 1 or 2 may greatly reduce the computation time needed for large 
+# code bases. Also note that the size of a graph can be further restricted by 
+# DOT_GRAPH_MAX_NODES. Using a depth of 0 means no depth restriction.
+
 MAX_DOT_GRAPH_DEPTH    = 1000
+
+# Set the DOT_TRANSPARENT tag to YES to generate images with a transparent 
+# background. This is enabled by default, which results in a transparent 
+# background. Warning: Depending on the platform used, enabling this option 
+# may lead to badly anti-aliased labels on the edges of a graph (i.e. they 
+# become hard to read).
+
 DOT_TRANSPARENT        = NO
+
+# Set the DOT_MULTI_TARGETS tag to YES allow dot to generate multiple output 
+# files in one run (i.e. multiple -o and -T options on the command line). This 
+# makes dot run faster, but since only newer versions of dot (>1.8.10) 
+# support this, this feature is disabled by default.
+
 DOT_MULTI_TARGETS      = NO
+
+# If the GENERATE_LEGEND tag is set to YES (the default) Doxygen will 
+# generate a legend page explaining the meaning of the various boxes and 
+# arrows in the dot generated graphs.
+
 GENERATE_LEGEND        = YES
+
+# If the DOT_CLEANUP tag is set to YES (the default) Doxygen will 
+# remove the intermediate dot files that are used to generate 
+# the various graphs.
+
 DOT_CLEANUP            = YES
+
 #---------------------------------------------------------------------------
 # Configuration::additions related to the search engine   
 #---------------------------------------------------------------------------
+
+# The SEARCHENGINE tag specifies whether or not a search engine should be 
+# used. If set to NO the values of all tags below this one will be ignored.
+
 SEARCHENGINE           = NO


Property changes on: trunk/windstille/src
___________________________________________________________________
Name: svn:ignore
   - 
baby_xml
BROWSE
ctest
.deps
editor
Makefile
Makefile.in
old/
ptest
random
response_curve
.sconsign
semantic.cache
windstille

   + baby_xml
BROWSE
ctest
.deps
editor
Makefile
Makefile.in
old
old/
ptest
random
response_curve
.sconsign
semantic.cache
windstille


Modified: trunk/windstille/src/camera.cpp
===================================================================
--- trunk/windstille/src/camera.cpp	2009-02-11 17:47:58 UTC (rev 2458)
+++ trunk/windstille/src/camera.cpp	2009-02-11 19:41:39 UTC (rev 2459)
@@ -157,7 +157,7 @@
 }
 
 void
-Camera::set_path(const std::vector<Camera::PathPoint>& path_, bool cont)
+Camera::set_path(const std::vector<PathPoint>& path_, bool cont)
 {
   path.clear();
   if (cont)

Modified: trunk/windstille/src/field.hpp
===================================================================
--- trunk/windstille/src/field.hpp	2009-02-11 17:47:58 UTC (rev 2458)
+++ trunk/windstille/src/field.hpp	2009-02-11 19:41:39 UTC (rev 2459)
@@ -44,8 +44,11 @@
   }
 
   /** Creates a new field out of a subsection from an already excisting one 
-   *  @param pos_x The position of the old field in the new resized one
-   *  @param pos_y The position of the old field in the new resized one */
+   *  @param arg_field The field thet gets copied
+   *  @param w         width of the new field
+   *  @param h         height of the new field
+   *  @param pos_x     The position of the old field in the new resized one
+   *  @param pos_y     The position of the old field in the new resized one */
   Field(const Field<T>& arg_field, int w, int h, int pos_x, int pos_y)
     : width (w), height (h), vec (width * height)
   {
@@ -89,6 +92,8 @@
   }
 
   /** Resize a field to a new size
+   *  @param w     New width of the field
+   *  @param h     New height of the field
    *  @param pos_x The position of the old field in the new resized one
    *  @param pos_y The position of the old field in the new resized one
    **/

Modified: trunk/windstille/src/file_reader.hpp
===================================================================
--- trunk/windstille/src/file_reader.hpp	2009-02-11 17:47:58 UTC (rev 2458)
+++ trunk/windstille/src/file_reader.hpp	2009-02-11 19:41:39 UTC (rev 2459)
@@ -36,8 +36,7 @@
   FileReader(boost::shared_ptr<FileReaderImpl> impl_);
   FileReader();
 
-  /** Name of the current section, ie. in the case of
-      <groundpiece><pos>...</groundpiece> it would be 'groundpiece' */
+  /** Name of the current section */
   std::string get_name() const;
 
   std::vector<std::string> get_section_names() const;

Modified: trunk/windstille/src/math/line.hpp
===================================================================
--- trunk/windstille/src/math/line.hpp	2009-02-11 17:47:58 UTC (rev 2458)
+++ trunk/windstille/src/math/line.hpp	2009-02-11 19:41:39 UTC (rev 2459)
@@ -39,10 +39,7 @@
   /** Calculate if two lines intersec */
   bool intersect(const Line& line_b) const;
 
-  /** Calculate if and where two lines intersect
-   *  @param a  
-   *  @param b 
-   */
+  /** Calculate if and where two lines intersect */
   bool intersect(const Line& line_b, float& ua, float& ub) const;
 
   /** Calculate if and where two lines intersect */

Modified: trunk/windstille/src/navigation/segment_position.hpp
===================================================================
--- trunk/windstille/src/navigation/segment_position.hpp	2009-02-11 17:47:58 UTC (rev 2458)
+++ trunk/windstille/src/navigation/segment_position.hpp	2009-02-11 19:41:39 UTC (rev 2459)
@@ -55,7 +55,7 @@
   
   /** Move forward \a adv of units in world-co, when a node is hit,
    *  the function returns and let the user decide how to
-   *  continue. \adv is projected onto the current segment to figure
+   *  continue. \a adv is projected onto the current segment to figure
    *  out how far we should go
    *
    * @param[in,out] adv the amount of advancment to be done, the



From grumbel at mail.berlios.de  Wed Feb 11 20:45:15 2009
From: grumbel at mail.berlios.de (grumbel at BerliOS)
Date: Wed, 11 Feb 2009 20:45:15 +0100
Subject: [Windstille-commit] r2460 - in trunk/windstille/src: . scripting
Message-ID: <200902111945.n1BJjFH3018068@sheep.berlios.de>

Author: grumbel
Date: 2009-02-11 20:45:14 +0100 (Wed, 11 Feb 2009)
New Revision: 2460

Modified:
   trunk/windstille/src/console.cpp
   trunk/windstille/src/script_manager.cpp
   trunk/windstille/src/scripting/SConscript
   trunk/windstille/src/scripting/game_objects.cpp
   trunk/windstille/src/scripting/game_objects.hpp
   trunk/windstille/src/scripting/interface.cpp
   trunk/windstille/src/scripting/interface.hpp
   trunk/windstille/src/scripting/squirrel_error.cpp
   trunk/windstille/src/scripting/squirrel_error.hpp
   trunk/windstille/src/scripting/util.cpp
   trunk/windstille/src/scripting/util.hpp
   trunk/windstille/src/scripting/wrapper.cpp
   trunk/windstille/src/scripting/wrapper.hpp
   trunk/windstille/src/sector.cpp
Log:
Renamed 'Scripting' namespace to 'scripting' to fit in with the rest

Modified: trunk/windstille/src/console.cpp
===================================================================
--- trunk/windstille/src/console.cpp	2009-02-11 19:41:39 UTC (rev 2459)
+++ trunk/windstille/src/console.cpp	2009-02-11 19:45:14 UTC (rev 2460)
@@ -463,7 +463,7 @@
           const SQChar *s;
           if (SQ_SUCCEEDED(sq_getstring(v,-2, &s)))
             {
-              console << s << " -> " << Scripting::squirrel2string(v, -1) << std::endl;
+              console << s << " -> " << scripting::squirrel2string(v, -1) << std::endl;
             }
           else
             {
@@ -506,7 +506,7 @@
               {
                 // FIXME: This does only work when somebody is doing a 'return', i.e. almost never
                 if (sq_gettype(vm, -1) != OT_NULL)
-                  console << Scripting::squirrel2string(vm, -1) << std::endl;
+                  console << scripting::squirrel2string(vm, -1) << std::endl;
                 // else
                 //   console << "(null)" << std::endl;
               }

Modified: trunk/windstille/src/script_manager.cpp
===================================================================
--- trunk/windstille/src/script_manager.cpp	2009-02-11 19:41:39 UTC (rev 2459)
+++ trunk/windstille/src/script_manager.cpp	2009-02-11 19:45:14 UTC (rev 2460)
@@ -18,7 +18,7 @@
 #include "scripting/squirrel_error.hpp"
 #include "physfs/physfs_stream.hpp"
 
-using namespace Scripting;
+using namespace scripting;
 
 ScriptManager* script_manager = 0;
 
@@ -58,7 +58,7 @@
   sq_setprintfunc(v, printfunc);
   
   // register windstille API
-  Scripting::register_windstille_wrapper(v);
+  scripting::register_windstille_wrapper(v);
 }
 
 ScriptManager::~ScriptManager()

Modified: trunk/windstille/src/scripting/SConscript
===================================================================
--- trunk/windstille/src/scripting/SConscript	2009-02-11 19:41:39 UTC (rev 2459)
+++ trunk/windstille/src/scripting/SConscript	2009-02-11 19:45:14 UTC (rev 2460)
@@ -11,7 +11,7 @@
             ['interface.hpp', 'game_objects.hpp'])
 
 env.Depends(env.Command(['wrapper.cpp', 'wrapper.hpp'], 'miniswig.tmp',
-                        ["$MINISWIG  --input $SOURCE --output-cpp ${TARGETS[0]} --output-hpp ${TARGETS[1]} --module windstille --select-namespace Scripting"]),
+                        ["$MINISWIG  --input $SOURCE --output-cpp ${TARGETS[0]} --output-hpp ${TARGETS[1]} --module windstille --select-namespace scripting"]),
             miniswig)
 
 # EOF #

Modified: trunk/windstille/src/scripting/game_objects.cpp
===================================================================
--- trunk/windstille/src/scripting/game_objects.cpp	2009-02-11 19:41:39 UTC (rev 2459)
+++ trunk/windstille/src/scripting/game_objects.cpp	2009-02-11 19:45:14 UTC (rev 2460)
@@ -21,7 +21,7 @@
 #include "sector.hpp"
 #include "game_objects.hpp"
 
-namespace Scripting {
+namespace scripting {
 
 const std::string&
 GameObject::get_name() const
@@ -108,7 +108,7 @@
   obj()->start_flash(speed);
 }
 
-} // namespace Scripting
+} // namespace scripting
 
 /* EOF */
 

Modified: trunk/windstille/src/scripting/game_objects.hpp
===================================================================
--- trunk/windstille/src/scripting/game_objects.hpp	2009-02-11 19:41:39 UTC (rev 2459)
+++ trunk/windstille/src/scripting/game_objects.hpp	2009-02-11 19:45:14 UTC (rev 2460)
@@ -33,7 +33,7 @@
 typedef Entity _Entity;
 #endif
 
-namespace Scripting
+namespace scripting
 {
 
 class GameObject

Modified: trunk/windstille/src/scripting/interface.cpp
===================================================================
--- trunk/windstille/src/scripting/interface.cpp	2009-02-11 19:41:39 UTC (rev 2459)
+++ trunk/windstille/src/scripting/interface.cpp	2009-02-11 19:45:14 UTC (rev 2460)
@@ -34,7 +34,7 @@
 #include "display/display.hpp"
 #include "controller_help_window.hpp"
 
-namespace Scripting
+namespace scripting
 {
 
 void set_sector(const std::string& filename)
@@ -338,6 +338,6 @@
   return 0;
 }
 
-} // namespace Scripting
+} // namespace scripting
 
 /* EOF */

Modified: trunk/windstille/src/scripting/interface.hpp
===================================================================
--- trunk/windstille/src/scripting/interface.hpp	2009-02-11 19:41:39 UTC (rev 2459)
+++ trunk/windstille/src/scripting/interface.hpp	2009-02-11 19:45:14 UTC (rev 2460)
@@ -24,7 +24,7 @@
 #include <squirrel.h>
 #endif
 
-namespace Scripting {
+namespace scripting {
 
 void set_sector(const std::string& filename);
 
@@ -116,7 +116,7 @@
  */
 SQInteger spawn_object(HSQUIRRELVM v) __custom;
 
-} // namespace Scripting
+} // namespace scripting
 
 #endif
 

Modified: trunk/windstille/src/scripting/squirrel_error.cpp
===================================================================
--- trunk/windstille/src/scripting/squirrel_error.cpp	2009-02-11 19:41:39 UTC (rev 2459)
+++ trunk/windstille/src/scripting/squirrel_error.cpp	2009-02-11 19:45:14 UTC (rev 2460)
@@ -3,7 +3,7 @@
 #include "squirrel_error.hpp"
 #include <sstream>
 
-namespace Scripting
+namespace scripting
 {
 
 SquirrelError::SquirrelError(HSQUIRRELVM v, const std::string& message) throw()

Modified: trunk/windstille/src/scripting/squirrel_error.hpp
===================================================================
--- trunk/windstille/src/scripting/squirrel_error.hpp	2009-02-11 19:41:39 UTC (rev 2459)
+++ trunk/windstille/src/scripting/squirrel_error.hpp	2009-02-11 19:45:14 UTC (rev 2460)
@@ -22,7 +22,7 @@
 #include <squirrel.h>
 #include <stdexcept>
 
-namespace Scripting
+namespace scripting
 {
 
 /** Exception class for squirrel errors, it takes a squirrelvm and uses

Modified: trunk/windstille/src/scripting/util.cpp
===================================================================
--- trunk/windstille/src/scripting/util.cpp	2009-02-11 19:41:39 UTC (rev 2459)
+++ trunk/windstille/src/scripting/util.cpp	2009-02-11 19:45:14 UTC (rev 2460)
@@ -28,7 +28,7 @@
 
 #include "util.hpp"
 
-namespace Scripting {
+namespace scripting {
 
 std::string sq_to_lisp_string(std::string sq_str)
 {
@@ -412,6 +412,6 @@
   writer.end_list("squirrel-state");
 }
 
-} // namespace Scripting
+} // namespace scripting
 
 /* EOF */

Modified: trunk/windstille/src/scripting/util.hpp
===================================================================
--- trunk/windstille/src/scripting/util.hpp	2009-02-11 19:41:39 UTC (rev 2459)
+++ trunk/windstille/src/scripting/util.hpp	2009-02-11 19:45:14 UTC (rev 2460)
@@ -27,7 +27,7 @@
 class Lisp;
 };
 
-namespace Scripting {
+namespace scripting {
 
 // Squirrel to Lisp
 void        table_to_lisp(HSQUIRRELVM v, int table_idx, std::vector<lisp::Lisp*>& entries);
@@ -45,7 +45,7 @@
 void save_squirrel_table(HSQUIRRELVM v, int table_idx, const std::string& file);
 void load_squirrel_table(HSQUIRRELVM v, int table_idx, const std::string& file);
 
-} // namespace Scripting
+} // namespace scripting
 
 #endif
 

Modified: trunk/windstille/src/scripting/wrapper.cpp
===================================================================
--- trunk/windstille/src/scripting/wrapper.cpp	2009-02-11 19:41:39 UTC (rev 2459)
+++ trunk/windstille/src/scripting/wrapper.cpp	2009-02-11 19:45:14 UTC (rev 2460)
@@ -13,14 +13,14 @@
 #include "squirrel_error.hpp"
 #include "wrapper.interface.hpp"
 
-namespace Scripting
+namespace scripting
 {
 namespace Wrapper
 {
 
 static SQInteger GameObject_release_hook(SQUserPointer ptr, SQInteger )
 {
-  Scripting::GameObject* _this = reinterpret_cast<Scripting::GameObject*> (ptr);
+  scripting::GameObject* _this = reinterpret_cast<scripting::GameObject*> (ptr);
   delete _this;
   return 0;
 }
@@ -32,7 +32,7 @@
     sq_throwerror(vm, _SC("'get_name' called without instance"));
     return SQ_ERROR;
   }
-  Scripting::GameObject* _this = reinterpret_cast<Scripting::GameObject*> (data);
+  scripting::GameObject* _this = reinterpret_cast<scripting::GameObject*> (data);
 
   try {
     const std::string& return_value = _this->get_name();
@@ -57,7 +57,7 @@
     sq_throwerror(vm, _SC("'remove' called without instance"));
     return SQ_ERROR;
   }
-  Scripting::GameObject* _this = reinterpret_cast<Scripting::GameObject*> (data);
+  scripting::GameObject* _this = reinterpret_cast<scripting::GameObject*> (data);
 
   try {
     _this->remove();
@@ -81,7 +81,7 @@
     sq_throwerror(vm, _SC("'set_active' called without instance"));
     return SQ_ERROR;
   }
-  Scripting::GameObject* _this = reinterpret_cast<Scripting::GameObject*> (data);
+  scripting::GameObject* _this = reinterpret_cast<scripting::GameObject*> (data);
   SQBool arg0;
   if(SQ_FAILED(sq_getbool(vm, 2, &arg0))) {
     sq_throwerror(vm, _SC("Argument 1 not a bool"));
@@ -110,7 +110,7 @@
     sq_throwerror(vm, _SC("'set_parent' called without instance"));
     return SQ_ERROR;
   }
-  Scripting::GameObject* _this = reinterpret_cast<Scripting::GameObject*> (data);
+  scripting::GameObject* _this = reinterpret_cast<scripting::GameObject*> (data);
   const SQChar* arg0;
   if(SQ_FAILED(sq_getstring(vm, 2, &arg0))) {
     sq_throwerror(vm, _SC("Argument 1 not a string"));
@@ -134,7 +134,7 @@
 
 static SQInteger TestObject_release_hook(SQUserPointer ptr, SQInteger )
 {
-  Scripting::TestObject* _this = reinterpret_cast<Scripting::TestObject*> (ptr);
+  scripting::TestObject* _this = reinterpret_cast<scripting::TestObject*> (ptr);
   delete _this;
   return 0;
 }
@@ -146,7 +146,7 @@
     sq_throwerror(vm, _SC("'set_sprite' called without instance"));
     return SQ_ERROR;
   }
-  Scripting::TestObject* _this = reinterpret_cast<Scripting::TestObject*> (data);
+  scripting::TestObject* _this = reinterpret_cast<scripting::TestObject*> (data);
   const SQChar* arg0;
   if(SQ_FAILED(sq_getstring(vm, 2, &arg0))) {
     sq_throwerror(vm, _SC("Argument 1 not a string"));
@@ -175,7 +175,7 @@
     sq_throwerror(vm, _SC("'set_action' called without instance"));
     return SQ_ERROR;
   }
-  Scripting::TestObject* _this = reinterpret_cast<Scripting::TestObject*> (data);
+  scripting::TestObject* _this = reinterpret_cast<scripting::TestObject*> (data);
   const SQChar* arg0;
   if(SQ_FAILED(sq_getstring(vm, 2, &arg0))) {
     sq_throwerror(vm, _SC("Argument 1 not a string"));
@@ -204,7 +204,7 @@
     sq_throwerror(vm, _SC("'set_pos' called without instance"));
     return SQ_ERROR;
   }
-  Scripting::TestObject* _this = reinterpret_cast<Scripting::TestObject*> (data);
+  scripting::TestObject* _this = reinterpret_cast<scripting::TestObject*> (data);
   SQFloat arg0;
   if(SQ_FAILED(sq_getfloat(vm, 2, &arg0))) {
     sq_throwerror(vm, _SC("Argument 1 not a float"));
@@ -238,7 +238,7 @@
     sq_throwerror(vm, _SC("'set_vflip' called without instance"));
     return SQ_ERROR;
   }
-  Scripting::TestObject* _this = reinterpret_cast<Scripting::TestObject*> (data);
+  scripting::TestObject* _this = reinterpret_cast<scripting::TestObject*> (data);
   SQBool arg0;
   if(SQ_FAILED(sq_getbool(vm, 2, &arg0))) {
     sq_throwerror(vm, _SC("Argument 1 not a bool"));
@@ -267,7 +267,7 @@
     sq_throwerror(vm, _SC("'attach' called without instance"));
     return SQ_ERROR;
   }
-  Scripting::TestObject* _this = reinterpret_cast<Scripting::TestObject*> (data);
+  scripting::TestObject* _this = reinterpret_cast<scripting::TestObject*> (data);
   const SQChar* arg0;
   if(SQ_FAILED(sq_getstring(vm, 2, &arg0))) {
     sq_throwerror(vm, _SC("Argument 1 not a string"));
@@ -296,7 +296,7 @@
 
 static SQInteger Player_release_hook(SQUserPointer ptr, SQInteger )
 {
-  Scripting::Player* _this = reinterpret_cast<Scripting::Player*> (ptr);
+  scripting::Player* _this = reinterpret_cast<scripting::Player*> (ptr);
   delete _this;
   return 0;
 }
@@ -308,7 +308,7 @@
     sq_throwerror(vm, _SC("'start_listening' called without instance"));
     return SQ_ERROR;
   }
-  Scripting::Player* _this = reinterpret_cast<Scripting::Player*> (data);
+  scripting::Player* _this = reinterpret_cast<scripting::Player*> (data);
 
   try {
     _this->start_listening();
@@ -332,7 +332,7 @@
     sq_throwerror(vm, _SC("'stop_listening' called without instance"));
     return SQ_ERROR;
   }
-  Scripting::Player* _this = reinterpret_cast<Scripting::Player*> (data);
+  scripting::Player* _this = reinterpret_cast<scripting::Player*> (data);
 
   try {
     _this->stop_listening();
@@ -351,7 +351,7 @@
 
 static SQInteger ScriptableObject_release_hook(SQUserPointer ptr, SQInteger )
 {
-  Scripting::ScriptableObject* _this = reinterpret_cast<Scripting::ScriptableObject*> (ptr);
+  scripting::ScriptableObject* _this = reinterpret_cast<scripting::ScriptableObject*> (ptr);
   delete _this;
   return 0;
 }
@@ -363,7 +363,7 @@
     sq_throwerror(vm, _SC("'move_to' called without instance"));
     return SQ_ERROR;
   }
-  Scripting::ScriptableObject* _this = reinterpret_cast<Scripting::ScriptableObject*> (data);
+  scripting::ScriptableObject* _this = reinterpret_cast<scripting::ScriptableObject*> (data);
   SQFloat arg0;
   if(SQ_FAILED(sq_getfloat(vm, 2, &arg0))) {
     sq_throwerror(vm, _SC("Argument 1 not a float"));
@@ -407,7 +407,7 @@
     sq_throwerror(vm, _SC("'start_flash' called without instance"));
     return SQ_ERROR;
   }
-  Scripting::ScriptableObject* _this = reinterpret_cast<Scripting::ScriptableObject*> (data);
+  scripting::ScriptableObject* _this = reinterpret_cast<scripting::ScriptableObject*> (data);
   SQFloat arg0;
   if(SQ_FAILED(sq_getfloat(vm, 2, &arg0))) {
     sq_throwerror(vm, _SC("Argument 1 not a float"));
@@ -438,7 +438,7 @@
   }
 
   try {
-    Scripting::set_sector(arg0);
+    scripting::set_sector(arg0);
 
     return 0;
 
@@ -461,7 +461,7 @@
   }
 
   try {
-    Scripting::play_music(arg0);
+    scripting::play_music(arg0);
 
     return 0;
 
@@ -484,7 +484,7 @@
   }
 
   try {
-    Scripting::stop_music(static_cast<float> (arg0));
+    scripting::stop_music(static_cast<float> (arg0));
 
     return 0;
 
@@ -507,7 +507,7 @@
   }
 
   try {
-    Scripting::play_sound(arg0);
+    scripting::play_sound(arg0);
 
     return 0;
 
@@ -535,7 +535,7 @@
   }
 
   try {
-    Scripting::caption_add(static_cast<int> (arg0), arg1);
+    scripting::caption_add(static_cast<int> (arg0), arg1);
 
     return 0;
 
@@ -554,7 +554,7 @@
   (void) vm;
 
   try {
-    Scripting::caption_clear();
+    scripting::caption_clear();
 
     return 0;
 
@@ -573,7 +573,7 @@
   (void) vm;
 
   try {
-    Scripting::caption_end();
+    scripting::caption_end();
 
     return 0;
 
@@ -596,7 +596,7 @@
   }
 
   try {
-    Scripting::camera_set_active(arg0 == SQTrue);
+    scripting::camera_set_active(arg0 == SQTrue);
 
     return 0;
 
@@ -615,7 +615,7 @@
   (void) vm;
 
   try {
-    Scripting::camera_continue_path();
+    scripting::camera_continue_path();
 
     return 0;
 
@@ -634,7 +634,7 @@
   (void) vm;
 
   try {
-    Scripting::camera_begin_path();
+    scripting::camera_begin_path();
 
     return 0;
 
@@ -667,7 +667,7 @@
   }
 
   try {
-    Scripting::camera_add_point(static_cast<float> (arg0), static_cast<float> (arg1), static_cast<float> (arg2));
+    scripting::camera_add_point(static_cast<float> (arg0), static_cast<float> (arg1), static_cast<float> (arg2));
 
     return 0;
 
@@ -686,7 +686,7 @@
   (void) vm;
 
   try {
-    Scripting::camera_end_path();
+    scripting::camera_end_path();
 
     return 0;
 
@@ -714,7 +714,7 @@
   }
 
   try {
-    Scripting::camera_set_pos(static_cast<float> (arg0), static_cast<float> (arg1));
+    scripting::camera_set_pos(static_cast<float> (arg0), static_cast<float> (arg1));
 
     return 0;
 
@@ -737,7 +737,7 @@
   }
 
   try {
-    Scripting::camera_set_zoom(static_cast<float> (arg0));
+    scripting::camera_set_zoom(static_cast<float> (arg0));
 
     return 0;
 
@@ -760,7 +760,7 @@
   }
 
   try {
-    Scripting::set_controller_help_active(arg0 == SQTrue);
+    scripting::set_controller_help_active(arg0 == SQTrue);
 
     return 0;
 
@@ -798,7 +798,7 @@
   }
 
   try {
-    Scripting::dialog_show(static_cast<int> (arg0), arg1, arg2, arg3);
+    scripting::dialog_show(static_cast<int> (arg0), arg1, arg2, arg3);
 
     return 0;
 
@@ -817,7 +817,7 @@
   HSQUIRRELVM arg0 = vm;
 
   try {
-    Scripting::wait_for_dialog(arg0);
+    scripting::wait_for_dialog(arg0);
 
     return sq_suspendvm(vm);
 
@@ -836,7 +836,7 @@
   HSQUIRRELVM arg0 = vm;
 
   try {
-    Scripting::wait_for_fade(arg0);
+    scripting::wait_for_fade(arg0);
 
     return sq_suspendvm(vm);
 
@@ -855,7 +855,7 @@
   HSQUIRRELVM arg0 = vm;
 
   try {
-    Scripting::wait_for_camera(arg0);
+    scripting::wait_for_camera(arg0);
 
     return sq_suspendvm(vm);
 
@@ -878,7 +878,7 @@
   }
 
   try {
-    Scripting::conversation_add(arg0);
+    scripting::conversation_add(arg0);
 
     return 0;
 
@@ -906,7 +906,7 @@
   }
 
   try {
-    Scripting::conversation_add2(arg0, arg1);
+    scripting::conversation_add2(arg0, arg1);
 
     return 0;
 
@@ -925,7 +925,7 @@
   (void) vm;
 
   try {
-    Scripting::conversation_show();
+    scripting::conversation_show();
 
     return 0;
 
@@ -943,7 +943,7 @@
 {
 
   try {
-    int return_value = Scripting::conversation_get_selection();
+    int return_value = scripting::conversation_get_selection();
 
     sq_pushinteger(vm, return_value);
     return 1;
@@ -963,7 +963,7 @@
   HSQUIRRELVM arg0 = vm;
 
   try {
-    Scripting::wait_for_conversation(arg0);
+    scripting::wait_for_conversation(arg0);
 
     return sq_suspendvm(vm);
 
@@ -991,7 +991,7 @@
   }
 
   try {
-    Scripting::add_objective(arg0, arg1);
+    scripting::add_objective(arg0, arg1);
 
     return 0;
 
@@ -1014,7 +1014,7 @@
   }
 
   try {
-    Scripting::objective_complete(arg0);
+    scripting::objective_complete(arg0);
 
     return 0;
 
@@ -1037,7 +1037,7 @@
   }
 
   try {
-    bool return_value = Scripting::is_objective_given(arg0);
+    bool return_value = scripting::is_objective_given(arg0);
 
     sq_pushbool(vm, return_value);
     return 1;
@@ -1061,7 +1061,7 @@
   }
 
   try {
-    bool return_value = Scripting::is_objective_complete(arg0);
+    bool return_value = scripting::is_objective_complete(arg0);
 
     sq_pushbool(vm, return_value);
     return 1;
@@ -1081,7 +1081,7 @@
   HSQUIRRELVM arg0 = vm;
 
   try {
-    bool return_value = Scripting::run_before(arg0);
+    bool return_value = scripting::run_before(arg0);
 
     sq_pushbool(vm, return_value);
     return 1;
@@ -1106,7 +1106,7 @@
   }
 
   try {
-    Scripting::save_state(arg0, arg1);
+    scripting::save_state(arg0, arg1);
 
     return 0;
 
@@ -1130,7 +1130,7 @@
   }
 
   try {
-    Scripting::load_state(arg0, arg1);
+    scripting::load_state(arg0, arg1);
 
     return 0;
 
@@ -1149,7 +1149,7 @@
   (void) vm;
 
   try {
-    Scripting::list_objects();
+    scripting::list_objects();
 
     return 0;
 
@@ -1172,7 +1172,7 @@
   }
 
   try {
-    Scripting::set_debug(arg0 == SQTrue);
+    scripting::set_debug(arg0 == SQTrue);
 
     return 0;
 
@@ -1190,7 +1190,7 @@
 {
 
   try {
-    bool return_value = Scripting::get_debug();
+    bool return_value = scripting::get_debug();
 
     sq_pushbool(vm, return_value);
     return 1;
@@ -1209,7 +1209,7 @@
 {
 
   try {
-    float return_value = Scripting::get_game_speed();
+    float return_value = scripting::get_game_speed();
 
     sq_pushfloat(vm, return_value);
     return 1;
@@ -1233,7 +1233,7 @@
   }
 
   try {
-    Scripting::set_game_speed(static_cast<float> (arg0));
+    scripting::set_game_speed(static_cast<float> (arg0));
 
     return 0;
 
@@ -1257,7 +1257,7 @@
   }
 
   try {
-    Scripting::wait(arg0, static_cast<float> (arg1));
+    scripting::wait(arg0, static_cast<float> (arg1));
 
     return sq_suspendvm(vm);
 
@@ -1273,12 +1273,12 @@
 
 static SQInteger display_wrapper(HSQUIRRELVM vm)
 {
-  return Scripting::display(vm);
+  return scripting::display(vm);
 }
 
 static SQInteger println_wrapper(HSQUIRRELVM vm)
 {
-  return Scripting::println(vm);
+  return scripting::println(vm);
 }
 
 static SQInteger set_console_font_wrapper(HSQUIRRELVM vm)
@@ -1295,7 +1295,7 @@
   }
 
   try {
-    Scripting::set_console_font(arg0, static_cast<int> (arg1));
+    scripting::set_console_font(arg0, static_cast<int> (arg1));
 
     return 0;
 
@@ -1318,7 +1318,7 @@
   }
 
   try {
-    Scripting::set_gamma(static_cast<float> (arg0));
+    scripting::set_gamma(static_cast<float> (arg0));
 
     return 0;
 
@@ -1351,7 +1351,7 @@
   }
 
   try {
-    Scripting::set_gamma_rgb(static_cast<float> (arg0), static_cast<float> (arg1), static_cast<float> (arg2));
+    scripting::set_gamma_rgb(static_cast<float> (arg0), static_cast<float> (arg1), static_cast<float> (arg2));
 
     return 0;
 
@@ -1370,7 +1370,7 @@
   (void) vm;
 
   try {
-    Scripting::show_config();
+    scripting::show_config();
 
     return 0;
 
@@ -1389,7 +1389,7 @@
   (void) vm;
 
   try {
-    Scripting::cutscene_begin();
+    scripting::cutscene_begin();
 
     return 0;
 
@@ -1408,7 +1408,7 @@
   (void) vm;
 
   try {
-    Scripting::cutscene_end();
+    scripting::cutscene_end();
 
     return 0;
 
@@ -1446,7 +1446,7 @@
   }
 
   try {
-    Scripting::internal_fadeout_rgb(static_cast<float> (arg0), static_cast<float> (arg1), static_cast<float> (arg2), static_cast<float> (arg3));
+    scripting::internal_fadeout_rgb(static_cast<float> (arg0), static_cast<float> (arg1), static_cast<float> (arg2), static_cast<float> (arg3));
 
     return 0;
 
@@ -1469,7 +1469,7 @@
   }
 
   try {
-    Scripting::internal_fadein(static_cast<float> (arg0));
+    scripting::internal_fadein(static_cast<float> (arg0));
 
     return 0;
 
@@ -1487,7 +1487,7 @@
 {
 
   try {
-    int return_value = Scripting::render_mask_get();
+    int return_value = scripting::render_mask_get();
 
     sq_pushinteger(vm, return_value);
     return 1;
@@ -1511,7 +1511,7 @@
   }
 
   try {
-    Scripting::render_mask_set(static_cast<int> (arg0));
+    scripting::render_mask_set(static_cast<int> (arg0));
 
     return 0;
 
@@ -1527,11 +1527,11 @@
 
 static SQInteger spawn_object_wrapper(HSQUIRRELVM vm)
 {
-  return Scripting::spawn_object(vm);
+  return scripting::spawn_object(vm);
 }
 
 } // end of namespace Wrapper
-void create_squirrel_instance(HSQUIRRELVM v, Scripting::GameObject* object, bool setup_releasehook)
+void create_squirrel_instance(HSQUIRRELVM v, scripting::GameObject* object, bool setup_releasehook)
 {
   using namespace Wrapper;
 
@@ -1557,7 +1557,7 @@
   sq_remove(v, -2); // remove root table
 }
 
-void create_squirrel_instance(HSQUIRRELVM v, Scripting::TestObject* object, bool setup_releasehook)
+void create_squirrel_instance(HSQUIRRELVM v, scripting::TestObject* object, bool setup_releasehook)
 {
   using namespace Wrapper;
 
@@ -1583,7 +1583,7 @@
   sq_remove(v, -2); // remove root table
 }
 
-void create_squirrel_instance(HSQUIRRELVM v, Scripting::Player* object, bool setup_releasehook)
+void create_squirrel_instance(HSQUIRRELVM v, scripting::Player* object, bool setup_releasehook)
 {
   using namespace Wrapper;
 
@@ -1609,7 +1609,7 @@
   sq_remove(v, -2); // remove root table
 }
 
-void create_squirrel_instance(HSQUIRRELVM v, Scripting::ScriptableObject* object, bool setup_releasehook)
+void create_squirrel_instance(HSQUIRRELVM v, scripting::ScriptableObject* object, bool setup_releasehook)
 {
   using namespace Wrapper;
 
@@ -2105,4 +2105,4 @@
 
 }
 
-} // end of namespace Scripting
+} // end of namespace scripting

Modified: trunk/windstille/src/scripting/wrapper.hpp
===================================================================
--- trunk/windstille/src/scripting/wrapper.hpp	2009-02-11 19:41:39 UTC (rev 2459)
+++ trunk/windstille/src/scripting/wrapper.hpp	2009-02-11 19:45:14 UTC (rev 2460)
@@ -9,15 +9,15 @@
 #include <squirrel.h>
 #include "wrapper.interface.hpp"
 
-namespace Scripting
+namespace scripting
 {
 
 void register_windstille_wrapper(HSQUIRRELVM v);
 
-void create_squirrel_instance(HSQUIRRELVM v, Scripting::GameObject* object, bool setup_releasehook = false);
-void create_squirrel_instance(HSQUIRRELVM v, Scripting::TestObject* object, bool setup_releasehook = false);
-void create_squirrel_instance(HSQUIRRELVM v, Scripting::Player* object, bool setup_releasehook = false);
-void create_squirrel_instance(HSQUIRRELVM v, Scripting::ScriptableObject* object, bool setup_releasehook = false);
+void create_squirrel_instance(HSQUIRRELVM v, scripting::GameObject* object, bool setup_releasehook = false);
+void create_squirrel_instance(HSQUIRRELVM v, scripting::TestObject* object, bool setup_releasehook = false);
+void create_squirrel_instance(HSQUIRRELVM v, scripting::Player* object, bool setup_releasehook = false);
+void create_squirrel_instance(HSQUIRRELVM v, scripting::ScriptableObject* object, bool setup_releasehook = false);
 
 }
 

Modified: trunk/windstille/src/sector.cpp
===================================================================
--- trunk/windstille/src/sector.cpp	2009-02-11 19:41:39 UTC (rev 2459)
+++ trunk/windstille/src/sector.cpp	2009-02-11 19:45:14 UTC (rev 2460)
@@ -262,7 +262,7 @@
 void
 Sector::remove_object_from_squirrel(GameObject* object)
 {
-  using namespace Scripting;
+  using namespace scripting;
 
   // get objects table
   HSQUIRRELVM v = script_manager->get_vm();
@@ -294,30 +294,30 @@
 {
   ScriptableObject* script_obj = dynamic_cast<ScriptableObject*> (object);
   if(script_obj) {
-    create_squirrel_instance(v, new Scripting::ScriptableObject(script_obj),
+    create_squirrel_instance(v, new scripting::ScriptableObject(script_obj),
                              true);
     return;
   }
   
   TestObject* tobj = dynamic_cast<TestObject*> (object);
   if(tobj) {
-    create_squirrel_instance(v, new Scripting::TestObject(tobj), true);
+    create_squirrel_instance(v, new scripting::TestObject(tobj), true);
     return;
   }                                                                             
 
   Player* player = dynamic_cast<Player*> (object);
   if(player) {
-    create_squirrel_instance(v, new Scripting::Player(player), true);
+    create_squirrel_instance(v, new scripting::Player(player), true);
     return;
   }
 
-  create_squirrel_instance(v, new Scripting::GameObject(object), true);
+  create_squirrel_instance(v, new scripting::GameObject(object), true);
 }
 
 void
 Sector::expose_object_to_squirrel(GameObject* object)
 {
-  using namespace Scripting;
+  using namespace scripting;
 
   // get objects table
   HSQUIRRELVM v = script_manager->get_vm();



From grumbel at mail.berlios.de  Wed Feb 11 21:05:53 2009
From: grumbel at mail.berlios.de (grumbel at BerliOS)
Date: Wed, 11 Feb 2009 21:05:53 +0100
Subject: [Windstille-commit] r2461 - trunk/windstille/src
Message-ID: <200902112005.n1BK5rBD020440@sheep.berlios.de>

Author: grumbel
Date: 2009-02-11 21:05:53 +0100 (Wed, 11 Feb 2009)
New Revision: 2461

Modified:
   trunk/windstille/src/screen_manager.cpp
Log:
Removed unused using declaration

Modified: trunk/windstille/src/screen_manager.cpp
===================================================================
--- trunk/windstille/src/screen_manager.cpp	2009-02-11 19:45:14 UTC (rev 2460)
+++ trunk/windstille/src/screen_manager.cpp	2009-02-11 20:05:53 UTC (rev 2461)
@@ -49,8 +49,6 @@
 #define snprintf _snprintf
 #endif
 
-using gui::GUIManager;
-
 ScreenManager screen_manager; 
 
 ScreenManager::ScreenManager()



From grumbel at mail.berlios.de  Wed Feb 11 21:45:56 2009
From: grumbel at mail.berlios.de (grumbel at BerliOS)
Date: Wed, 11 Feb 2009 21:45:56 +0100
Subject: [Windstille-commit] r2462 - trunk/windstille/src
Message-ID: <200902112045.n1BKju6r025434@sheep.berlios.de>

Author: grumbel
Date: 2009-02-11 21:45:55 +0100 (Wed, 11 Feb 2009)
New Revision: 2462

Modified:
   trunk/windstille/src/util.cpp
Log:
Another missing copyright header added

Modified: trunk/windstille/src/util.cpp
===================================================================
--- trunk/windstille/src/util.cpp	2009-02-11 20:05:53 UTC (rev 2461)
+++ trunk/windstille/src/util.cpp	2009-02-11 20:45:55 UTC (rev 2462)
@@ -1,3 +1,21 @@
+/*
+**  Windstille - A Sci-Fi Action-Adventure Game
+**  Copyright (C) 2005 Matthias Braun <matze at braunis.de>
+**
+**  This program is free software: you can redistribute it and/or modify
+**  it under the terms of the GNU General Public License as published by
+**  the Free Software Foundation, either version 3 of the License, or
+**  (at your option) any later version.
+**  
+**  This program is distributed in the hope that it will be useful,
+**  but WITHOUT ANY WARRANTY; without even the implied warranty of
+**  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+**  GNU General Public License for more details.
+**  
+**  You should have received a copy of the GNU General Public License
+**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
+*/
+
 #include "util.hpp"
 #include <fstream>
 



From grumbel at mail.berlios.de  Wed Feb 11 22:05:08 2009
From: grumbel at mail.berlios.de (grumbel at BerliOS)
Date: Wed, 11 Feb 2009 22:05:08 +0100
Subject: [Windstille-commit] r2463 - in trunk/windstille/src: . collision
	gui objects tile
Message-ID: <200902112105.n1BL583b027132@sheep.berlios.de>

Author: grumbel
Date: 2009-02-11 22:05:03 +0100 (Wed, 11 Feb 2009)
New Revision: 2463

Added:
   trunk/windstille/src/tile/
   trunk/windstille/src/tile/tile.cpp
   trunk/windstille/src/tile/tile.hpp
   trunk/windstille/src/tile/tile_description.cpp
   trunk/windstille/src/tile/tile_description.hpp
   trunk/windstille/src/tile/tile_factory.cpp
   trunk/windstille/src/tile/tile_factory.hpp
   trunk/windstille/src/tile/tile_map.cpp
   trunk/windstille/src/tile/tile_map.hpp
   trunk/windstille/src/tile/tile_packer.cpp
   trunk/windstille/src/tile/tile_packer.hpp
Removed:
   trunk/windstille/src/tile.cpp
   trunk/windstille/src/tile.hpp
   trunk/windstille/src/tile_description.cpp
   trunk/windstille/src/tile_description.hpp
   trunk/windstille/src/tile_factory.cpp
   trunk/windstille/src/tile_factory.hpp
   trunk/windstille/src/tile_map.cpp
   trunk/windstille/src/tile_map.hpp
   trunk/windstille/src/tile_packer.cpp
   trunk/windstille/src/tile_packer.hpp
Modified:
   trunk/windstille/src/SConscript
   trunk/windstille/src/collision/collision_engine.cpp
   trunk/windstille/src/collision/stair_contact.cpp
   trunk/windstille/src/entity.cpp
   trunk/windstille/src/game_session.cpp
   trunk/windstille/src/gui/automap.cpp
   trunk/windstille/src/laser_pointer.cpp
   trunk/windstille/src/objects/box.cpp
   trunk/windstille/src/objects/player.cpp
   trunk/windstille/src/sector.cpp
   trunk/windstille/src/windstille_main.cpp
Log:
Moved tile related stuff to tile/

Modified: trunk/windstille/src/SConscript
===================================================================
--- trunk/windstille/src/SConscript	2009-02-11 20:45:55 UTC (rev 2462)
+++ trunk/windstille/src/SConscript	2009-02-11 21:05:03 UTC (rev 2463)
@@ -182,11 +182,11 @@
 'sprite3d/sprite3d.cpp',
 'sprite3dview.cpp',
 'text_area.cpp',
-'tile.cpp',
-'tile_description.cpp',
-'tile_factory.cpp',
-'tile_map.cpp',
-'tile_packer.cpp',
+'tile/tile.cpp',
+'tile/tile_description.cpp',
+'tile/tile_factory.cpp',
+'tile/tile_map.cpp',
+'tile/tile_packer.cpp',
 'timer.cpp',
 'title_screen.cpp',
 'trigger.cpp',

Modified: trunk/windstille/src/collision/collision_engine.cpp
===================================================================
--- trunk/windstille/src/collision/collision_engine.cpp	2009-02-11 20:45:55 UTC (rev 2462)
+++ trunk/windstille/src/collision/collision_engine.cpp	2009-02-11 21:05:03 UTC (rev 2463)
@@ -20,7 +20,7 @@
 #include "collision_test.hpp"
 #include "collision_engine.hpp"
 #include "globals.hpp"
-#include "tile_map.hpp"
+#include "tile/tile_map.hpp"
 
 std::vector<Rectf> tilemap_collision_list(TileMap *tilemap, const Rectf &r, bool is_ground);
 

Modified: trunk/windstille/src/collision/stair_contact.cpp
===================================================================
--- trunk/windstille/src/collision/stair_contact.cpp	2009-02-11 20:45:55 UTC (rev 2462)
+++ trunk/windstille/src/collision/stair_contact.cpp	2009-02-11 21:05:03 UTC (rev 2463)
@@ -17,8 +17,8 @@
 */
 
 #include <iostream>
-#include "tile.hpp"
-#include "tile_map.hpp"
+#include "tile/tile.hpp"
+#include "tile/tile_map.hpp"
 #include "stair_contact.hpp"
 
 StairContact::StairContact(TileMap* tilemap_, const Point& pos_)

Modified: trunk/windstille/src/entity.cpp
===================================================================
--- trunk/windstille/src/entity.cpp	2009-02-11 20:45:55 UTC (rev 2462)
+++ trunk/windstille/src/entity.cpp	2009-02-11 21:05:03 UTC (rev 2463)
@@ -20,7 +20,7 @@
 #include "globals.hpp"
 #include "entity.hpp"
 #include "sector.hpp"
-#include "tile_map.hpp"
+#include "tile/tile_map.hpp"
 
 Entity::Entity()
   : velocity(0, 0),

Modified: trunk/windstille/src/game_session.cpp
===================================================================
--- trunk/windstille/src/game_session.cpp	2009-02-11 20:45:55 UTC (rev 2462)
+++ trunk/windstille/src/game_session.cpp	2009-02-11 21:05:03 UTC (rev 2463)
@@ -30,7 +30,7 @@
 #include "console.hpp"
 #include "game_object.hpp"
 #include "objects/player.hpp"
-#include "tile_map.hpp"
+#include "tile/tile_map.hpp"
 #include "screen_manager.hpp"
 #include "view.hpp"
 #include "timer.hpp"

Modified: trunk/windstille/src/gui/automap.cpp
===================================================================
--- trunk/windstille/src/gui/automap.cpp	2009-02-11 20:45:55 UTC (rev 2462)
+++ trunk/windstille/src/gui/automap.cpp	2009-02-11 21:05:03 UTC (rev 2463)
@@ -19,7 +19,7 @@
 #include "display/surface_drawing_parameters.hpp"
 #include "input/controller.hpp"
 #include "sector.hpp"
-#include "tile_map.hpp"
+#include "tile/tile_map.hpp"
 #include "display/display.hpp"
 #include "automap.hpp"
 

Modified: trunk/windstille/src/laser_pointer.cpp
===================================================================
--- trunk/windstille/src/laser_pointer.cpp	2009-02-11 20:45:55 UTC (rev 2462)
+++ trunk/windstille/src/laser_pointer.cpp	2009-02-11 21:05:03 UTC (rev 2463)
@@ -21,7 +21,7 @@
 #include "objects/player.hpp"
 #include "collision/collision_engine.hpp"
 #include "sector.hpp"
-#include "tile_map.hpp"
+#include "tile/tile_map.hpp"
 #include "laser_pointer.hpp"
 
 LaserPointer::LaserPointer()

Modified: trunk/windstille/src/objects/box.cpp
===================================================================
--- trunk/windstille/src/objects/box.cpp	2009-02-11 20:45:55 UTC (rev 2462)
+++ trunk/windstille/src/objects/box.cpp	2009-02-11 21:05:03 UTC (rev 2463)
@@ -22,7 +22,7 @@
 #include "globals.hpp"
 #include "collision/collision_engine.hpp"
 #include "math/vector.hpp"
-#include "tile_map.hpp"
+#include "tile/tile_map.hpp"
 #include "random.hpp"
 #include "sprite2d/manager.hpp"
 

Modified: trunk/windstille/src/objects/player.cpp
===================================================================
--- trunk/windstille/src/objects/player.cpp	2009-02-11 20:45:55 UTC (rev 2462)
+++ trunk/windstille/src/objects/player.cpp	2009-02-11 21:05:03 UTC (rev 2463)
@@ -17,7 +17,7 @@
 */
 
 #include <boost/bind.hpp>
-#include "tile_map.hpp"
+#include "tile/tile_map.hpp"
 #include "sector.hpp"
 #include "input/controller.hpp"
 #include "input/input_manager.hpp"
@@ -26,7 +26,7 @@
 #include "objects/bomb.hpp"
 #include "globals.hpp"
 #include "pda.hpp"
-#include "tile.hpp"
+#include "tile/tile.hpp"
 #include "sprite3d/manager.hpp"
 #include "display/surface_manager.hpp"
 #include "particles/particle_system.hpp"

Modified: trunk/windstille/src/sector.cpp
===================================================================
--- trunk/windstille/src/sector.cpp	2009-02-11 20:45:55 UTC (rev 2462)
+++ trunk/windstille/src/sector.cpp	2009-02-11 21:05:03 UTC (rev 2463)
@@ -23,7 +23,7 @@
 #include "globals.hpp"
 #include "display/scene_context.hpp"
 #include "objects/background_gradient.hpp"
-#include "tile_map.hpp"
+#include "tile/tile_map.hpp"
 #include "game_object.hpp"
 #include "objects/player.hpp"
 #include "trigger.hpp"

Copied: trunk/windstille/src/tile/tile.cpp (from rev 2461, trunk/windstille/src/tile.cpp)


Property changes on: trunk/windstille/src/tile/tile.cpp
___________________________________________________________________
Name: svn:keywords
   + Id
Name: svn:mergeinfo
   + 
Name: svn:eol-style
   + native

Copied: trunk/windstille/src/tile/tile.hpp (from rev 2461, trunk/windstille/src/tile.hpp)


Property changes on: trunk/windstille/src/tile/tile.hpp
___________________________________________________________________
Name: svn:keywords
   + Id
Name: svn:mergeinfo
   + 
Name: svn:eol-style
   + native

Copied: trunk/windstille/src/tile/tile_description.cpp (from rev 2461, trunk/windstille/src/tile_description.cpp)


Property changes on: trunk/windstille/src/tile/tile_description.cpp
___________________________________________________________________
Name: svn:mergeinfo
   + 

Copied: trunk/windstille/src/tile/tile_description.hpp (from rev 2461, trunk/windstille/src/tile_description.hpp)


Property changes on: trunk/windstille/src/tile/tile_description.hpp
___________________________________________________________________
Name: svn:mergeinfo
   + 

Copied: trunk/windstille/src/tile/tile_factory.cpp (from rev 2461, trunk/windstille/src/tile_factory.cpp)


Property changes on: trunk/windstille/src/tile/tile_factory.cpp
___________________________________________________________________
Name: svn:keywords
   + Id
Name: svn:mergeinfo
   + 
Name: svn:eol-style
   + native

Copied: trunk/windstille/src/tile/tile_factory.hpp (from rev 2461, trunk/windstille/src/tile_factory.hpp)


Property changes on: trunk/windstille/src/tile/tile_factory.hpp
___________________________________________________________________
Name: svn:keywords
   + Id
Name: svn:mergeinfo
   + 
Name: svn:eol-style
   + native

Copied: trunk/windstille/src/tile/tile_map.cpp (from rev 2461, trunk/windstille/src/tile_map.cpp)


Property changes on: trunk/windstille/src/tile/tile_map.cpp
___________________________________________________________________
Name: svn:keywords
   + Id
Name: svn:mergeinfo
   + 
Name: svn:eol-style
   + native

Copied: trunk/windstille/src/tile/tile_map.hpp (from rev 2461, trunk/windstille/src/tile_map.hpp)


Property changes on: trunk/windstille/src/tile/tile_map.hpp
___________________________________________________________________
Name: svn:keywords
   + Id
Name: svn:mergeinfo
   + 
Name: svn:eol-style
   + native

Copied: trunk/windstille/src/tile/tile_packer.cpp (from rev 2461, trunk/windstille/src/tile_packer.cpp)


Property changes on: trunk/windstille/src/tile/tile_packer.cpp
___________________________________________________________________
Name: svn:keywords
   + Id
Name: svn:mergeinfo
   + 
Name: svn:eol-style
   + native

Copied: trunk/windstille/src/tile/tile_packer.hpp (from rev 2461, trunk/windstille/src/tile_packer.hpp)


Property changes on: trunk/windstille/src/tile/tile_packer.hpp
___________________________________________________________________
Name: svn:keywords
   + Id
Name: svn:mergeinfo
   + 
Name: svn:eol-style
   + native

Deleted: trunk/windstille/src/tile.cpp
===================================================================
--- trunk/windstille/src/tile.cpp	2009-02-11 20:45:55 UTC (rev 2462)
+++ trunk/windstille/src/tile.cpp	2009-02-11 21:05:03 UTC (rev 2463)
@@ -1,30 +0,0 @@
-/*
-**  Windstille - A Sci-Fi Action-Adventure Game
-**  Copyright (C) 2002 Ingo Ruhnke <grumbel at gmx.de>
-**
-**  This program is free software: you can redistribute it and/or modify
-**  it under the terms of the GNU General Public License as published by
-**  the Free Software Foundation, either version 3 of the License, or
-**  (at your option) any later version.
-**  
-**  This program is distributed in the hope that it will be useful,
-**  but WITHOUT ANY WARRANTY; without even the implied warranty of
-**  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
-**  GNU General Public License for more details.
-**  
-**  You should have received a copy of the GNU General Public License
-**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
-*/
-
-#include <iostream>
-#include "globals.hpp"
-#include "tile.hpp"
-
-Tile::Tile(unsigned int arg_colmap)
-  : colmap(arg_colmap)
-{
-  packer = -1;
-  desc = 0;
-}
-
-/* EOF */

Deleted: trunk/windstille/src/tile.hpp
===================================================================
--- trunk/windstille/src/tile.hpp	2009-02-11 20:45:55 UTC (rev 2462)
+++ trunk/windstille/src/tile.hpp	2009-02-11 21:05:03 UTC (rev 2463)
@@ -1,69 +0,0 @@
-/*
-**  Windstille - A Sci-Fi Action-Adventure Game
-**  Copyright (C) 2002 Ingo Ruhnke <grumbel at gmx.de>
-**
-**  This program is free software: you can redistribute it and/or modify
-**  it under the terms of the GNU General Public License as published by
-**  the Free Software Foundation, either version 3 of the License, or
-**  (at your option) any later version.
-**  
-**  This program is distributed in the hope that it will be useful,
-**  but WITHOUT ANY WARRANTY; without even the implied warranty of
-**  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
-**  GNU General Public License for more details.
-**  
-**  You should have received a copy of the GNU General Public License
-**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
-*/
-
-#ifndef HEADER_WINDSTILLE_TILE_HPP
-#define HEADER_WINDSTILLE_TILE_HPP
-
-#include <assert.h>
-#include <GL/glew.h>
-#include <GL/gl.h>
-#include "display/texture.hpp"
-#include "math/rect.hpp"
-
-enum TileType {
-  TILE_EMPTY  = 0,
-  TILE_SOLID  = (1 << 0),
-  TILE_STAIRS = (1 << 1),
-  TILE_LEFT   = (1 << 2),
-  TILE_RIGHT  = (1 << 3)
-};
-
-class TileDescription;
-
-/** A Tile is a surface or sprite together with information for
- *  collision detection (aka colmap). The collision map is at a
- *  resolution of 8x8 bits. Position information is handled in the
- *  TileMap and not here. (flyweight pattern). */
-class Tile
-{
-public:
-  /** The id of the Tile by which the tilemap refers to it */
-  int id; 
-
-  // FIXME: Using a surface here might be a worthy consideration, just
-  // need to find a way to properly bucket-sort the request
-
-  /**
-   * Id of the packer
-   */
-  int     packer;
-  Rectf   uv;
-  Texture texture;
-
-  /** bitmap that holds the collision attributes for this tile */
-  unsigned int colmap;
-  TileDescription* desc;
-
-  Tile(unsigned int arg_colmap);
-
-  unsigned get_colmap() const { return colmap; }
-};
-
-#endif
-
-/* EOF */

Deleted: trunk/windstille/src/tile_description.cpp
===================================================================
--- trunk/windstille/src/tile_description.cpp	2009-02-11 20:45:55 UTC (rev 2462)
+++ trunk/windstille/src/tile_description.cpp	2009-02-11 21:05:03 UTC (rev 2463)
@@ -1,104 +0,0 @@
-/*
-**  Windstille - A Sci-Fi Action-Adventure Game
-**  Copyright (C) 2005 Ingo Ruhnke <grumbel at gmx.de>
-**
-**  This program is free software: you can redistribute it and/or modify
-**  it under the terms of the GNU General Public License as published by
-**  the Free Software Foundation, either version 3 of the License, or
-**  (at your option) any later version.
-**  
-**  This program is distributed in the hope that it will be useful,
-**  but WITHOUT ANY WARRANTY; without even the implied warranty of
-**  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
-**  GNU General Public License for more details.
-**  
-**  You should have received a copy of the GNU General Public License
-**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
-*/
-
-#include <iostream>
-#include <sstream>
-#include <stdexcept>
-#include <SDL.h>
-#include <SDL_image.h>
-#include "physfs/physfs_sdl.hpp"
-#include "globals.hpp"
-#include "tile.hpp"
-#include "tile_packer.hpp"
-#include "tile_factory.hpp"
-#include "tile_description.hpp"
-
-TileDescription::TileDescription(FileReader& props)
-  : width(0), height(0)
-{
-  props.get("ids",    ids);
-  props.get("image",  filename);
-  props.get("colmap", colmap);
-  props.get("width",  width);
-  props.get("height", height);
-    
-  props.print_unused_warnings("tiles");
-
-  if(filename == "")
-    throw std::runtime_error("Missing color-image");
-}
-
-void
-TileDescription::load(TileFactory* factory)
-{  
-  if (debug)
-    std::cout << "Loading tiles: " << filename << std::endl;
-
-  SDL_Surface* image = IMG_Load_RW(get_physfs_SDLRWops(filename), 1);
-  if(!image) 
-    {
-      std::ostringstream msg;
-      msg << "Couldn't load image '" << filename << "': " << SDL_GetError();
-      throw std::runtime_error(msg.str());
-    }
-  else
-    {
-      try 
-        {
-          int num_tiles = width * height; //(image->w/TILE_RESOLUTION) * (image->h/TILE_RESOLUTION);
-          if (int(colmap.size()) != num_tiles)
-            {
-              std::ostringstream str;
-              str << "'colmap' information and num_tiles mismatch (" 
-                  << colmap.size() << " != " << num_tiles << ") for image '" << filename << "'";
-              throw std::runtime_error(str.str());
-            }
-
-          if (int(ids.size()) != num_tiles)
-            {
-              std::ostringstream str;
-              str << "'ids' information and num_tiles mismatch (" 
-                  << ids.size() << " != " << num_tiles << ") for image '" << filename << "'";
-              throw std::runtime_error(str.str());
-            }
-    
-          int i = 0;
-          for (int y = 0; y < height*TILE_RESOLUTION; y += TILE_RESOLUTION)
-            {
-              for (int x = 0; x < width*TILE_RESOLUTION; x += TILE_RESOLUTION)
-                {
-                  if(ids[i] != -1)
-                    {
-                      factory->pack(ids[i], colmap[i], image,
-                                    Rect(x, y, x+TILE_RESOLUTION, y+TILE_RESOLUTION));
-                    }
-
-                  i += 1; 
-                }
-            }
-        } 
-      catch(...) 
-        {
-          SDL_FreeSurface(image);
-          throw;
-        }
-      SDL_FreeSurface(image);
-    }
-}
-
-/* EOF */

Deleted: trunk/windstille/src/tile_description.hpp
===================================================================
--- trunk/windstille/src/tile_description.hpp	2009-02-11 20:45:55 UTC (rev 2462)
+++ trunk/windstille/src/tile_description.hpp	2009-02-11 21:05:03 UTC (rev 2463)
@@ -1,50 +0,0 @@
-/*
-**  Windstille - A Sci-Fi Action-Adventure Game
-**  Copyright (C) 2005 Ingo Ruhnke <grumbel at gmx.de>
-**
-**  This program is free software: you can redistribute it and/or modify
-**  it under the terms of the GNU General Public License as published by
-**  the Free Software Foundation, either version 3 of the License, or
-**  (at your option) any later version.
-**  
-**  This program is distributed in the hope that it will be useful,
-**  but WITHOUT ANY WARRANTY; without even the implied warranty of
-**  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
-**  GNU General Public License for more details.
-**  
-**  You should have received a copy of the GNU General Public License
-**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
-*/
-
-#ifndef HEADER_WINDSTILLE_TILE_DESCRIPTION_HPP
-#define HEADER_WINDSTILLE_TILE_DESCRIPTION_HPP
-
-#include <vector>
-#include <string>
-#include "file_reader.hpp"
-
-class TileFactory;
-
-/**
- * The TileDescription descriptes a set of tiles
- */
-class TileDescription
-{
-public:
-  std::vector<int> ids;
-  std::vector<int> colmap;
-  std::string filename;
-  int width;
-  int height;
-
-  TileDescription(FileReader& props);
-
-  /**
-   * Load the TileDescription into the give TileFactory
-   */
-  void load(TileFactory* factory);
-};
-
-#endif
-
-/* EOF */

Deleted: trunk/windstille/src/tile_factory.cpp
===================================================================
--- trunk/windstille/src/tile_factory.cpp	2009-02-11 20:45:55 UTC (rev 2462)
+++ trunk/windstille/src/tile_factory.cpp	2009-02-11 21:05:03 UTC (rev 2463)
@@ -1,198 +0,0 @@
-/*
-**  Windstille - A Sci-Fi Action-Adventure Game
-**  Copyright (C) 2000 Ingo Ruhnke <grumbel at gmx.de>
-**
-**  This program is free software: you can redistribute it and/or modify
-**  it under the terms of the GNU General Public License as published by
-**  the Free Software Foundation, either version 3 of the License, or
-**  (at your option) any later version.
-**  
-**  This program is distributed in the hope that it will be useful,
-**  but WITHOUT ANY WARRANTY; without even the implied warranty of
-**  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
-**  GNU General Public License for more details.
-**  
-**  You should have received a copy of the GNU General Public License
-**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
-*/
-
-#include <string>
-#include <sstream>
-#include <SDL.h>
-#include <SDL_image.h>
-#include <assert.h>
-#include <sstream>
-#include <iostream>
-#include <memory>
-#include "globals.hpp"
-#include "tile.hpp"
-#include "tile_packer.hpp"
-#include "tile_factory.hpp"
-#include "tile_description.hpp"
-#include "sexpr_file_reader.hpp"
-#include "display/surface_manager.hpp"
-#include "display/texture.hpp"
-#include "physfs/physfs_sdl.hpp"
-
-TileFactory* TileFactory::current_ = 0;
-
-std::string TileFactory::tile_def_file = "tiles.scm";
-
-/** Check if the given region of the given image is fully transparent */
-bool surface_empty(SDL_Surface* image, int sx, int sy, int w, int h)
-{
-  SDL_LockSurface(image);
-  
-  unsigned char* data = static_cast<unsigned char*>(image->pixels);
-  
-  for(int y = sy; y < sy + h; ++y)
-    for(int x = sx; x < sx + w; ++x)
-      {
-        if (data[y * image->pitch + 4*x + 3] != 0)
-          { 
-            SDL_UnlockSurface(image);
-            return false;
-          }
-      }
-
-  SDL_UnlockSurface(image);
-  return true;
-}
-
-TileFactory::TileFactory (const std::string& filename)
-{
-  packers.push_back(new TilePacker(1024, 1024));
-  packers.push_back(new TilePacker(1024, 1024));
-  color_packer     = 0;
-
-  FileReader reader = FileReader::parse(filename);
-  if(reader.get_name() != "windstille-tiles")
-    {
-      std::ostringstream msg;
-      msg << "'" << filename << "' is not a windstille tiles file";
-      throw std::runtime_error(msg.str());
-    }
-  
-  std::vector<FileReader> sections = reader.get_sections();
-  for(std::vector<FileReader>::iterator i = sections.begin(); i != sections.end(); ++i)
-    {
-      if (i->get_name() == "tiles") {
-        parse_tiles(*i);
-      } else if (i->get_name() == "tilegroup") {
-        // ignore
-      }
-    }
-  reader.print_unused_warnings("TileFactory");
-}
-
-TileFactory::~TileFactory()
-{
-  for(Tiles::iterator i = tiles.begin(); i != tiles.end(); ++i)
-    {
-      delete *i;
-    }
-  tiles.clear();
-
-  for(std::vector<TileDescription*>::iterator i = descriptions.begin(); i != descriptions.end(); ++i)
-    {
-      delete *i;
-    }
-}
-
-void
-TileFactory::parse_tiles(FileReader& reader)
-{
-  descriptions.push_back(new TileDescription(reader));
-
-  TileDescription& desc = *descriptions.back();
-  
-  if (0)
-    { // Load all on startup
-      desc.load(this);
-    }
-  else
-    { // Load on demand
-      for(std::vector<int>::size_type i = 0; i < desc.ids.size(); ++i)
-        { 
-          int& id = desc.ids[i];
-          if (id != 0)
-            {
-              if (id >= int(tiles.size()))
-                tiles.resize(id + 1, 0);
-    
-              delete tiles[id];
-              tiles[id] = new Tile(desc.colmap[i]);
-              tiles[id]->desc = &desc;
-            }
-        }
-    }
-}
-
-void
-TileFactory::pack(int id, int colmap, SDL_Surface* image, const Rect& rect)
-{
-  if(id < int(tiles.size())
-     && tiles[id] != 0
-     && tiles[id]->desc == 0)
-    {
-      std::cout << "Warning: Duplicate tile id '" << id << "' ignoring" << std::endl;
-    }
-  else
-    {      
-      if (id >= int(tiles.size()))
-        tiles.resize(id + 1, 0);
-
-      delete tiles[id];
-      tiles[id]  = new Tile(colmap);
-      tiles[id]->desc  = 0;
-      tiles[id]->id    = id;
-
-      if (!surface_empty(image, rect.left, rect.top, rect.get_width(), rect.get_height()))
-        {
-          if(packers[color_packer]->is_full())
-            {
-              packers.push_back(new TilePacker(1024, 1024));
-              color_packer = packers.size() - 1;
-            }
-          
-          Rectf uv = packers[color_packer]->pack(image, 
-                                                 rect.left, rect.top,
-                                                 rect.get_width(), rect.get_height());
-          tiles[id]->uv      = uv;
-          tiles[id]->packer  = color_packer;
-          tiles[id]->texture = packers[color_packer]->get_texture();
-        }
-    }
-}
-
-Tile*
-TileFactory::create(int id)
-{
-  if(id < 0 || id >= (int) tiles.size())
-    {
-      return 0;
-    }
-  else
-    {
-      if (tiles[id] && tiles[id]->desc)
-        tiles[id]->desc->load(this);
-
-      return tiles[id];
-    }
-}
-
-void
-TileFactory::init()
-{
-  assert(current_ == 0);
-  current_ = new TileFactory(tile_def_file);
-}
-
-/** Destroy the default TileFactor */
-void
-TileFactory::deinit()
-{
-  delete current_;
-}
-
-/* EOF */

Deleted: trunk/windstille/src/tile_factory.hpp
===================================================================
--- trunk/windstille/src/tile_factory.hpp	2009-02-11 20:45:55 UTC (rev 2462)
+++ trunk/windstille/src/tile_factory.hpp	2009-02-11 21:05:03 UTC (rev 2463)
@@ -1,83 +0,0 @@
-/*
-**  Windstille - A Sci-Fi Action-Adventure Game
-**  Copyright (C) 2000 Ingo Ruhnke <grumbel at gmx.de>
-**
-**  This program is free software: you can redistribute it and/or modify
-**  it under the terms of the GNU General Public License as published by
-**  the Free Software Foundation, either version 3 of the License, or
-**  (at your option) any later version.
-**  
-**  This program is distributed in the hope that it will be useful,
-**  but WITHOUT ANY WARRANTY; without even the implied warranty of
-**  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
-**  GNU General Public License for more details.
-**  
-**  You should have received a copy of the GNU General Public License
-**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
-*/
-
-#ifndef HEADER_WINDSTILLE_TILE_FACTORY_HPP
-#define HEADER_WINDSTILLE_TILE_FACTORY_HPP
-
-#include <map>
-#include <string>
-#include "tile_description.hpp"
-
-class Tile;
-class TilePacker;
-
-/** */
-class TileFactory
-{
-private:
-  typedef std::vector<Tile*> Tiles;
-  Tiles tiles;
-  typedef std::vector<TilePacker*> TilePackers;
-  TilePackers packers;
-  int color_packer;
-
-  static TileFactory* current_;
-
-  friend class TileDescription;
-
-  std::vector<TileDescription*> descriptions;
-  
-public:
-  static std::string tile_def_file;
-
-  typedef Tiles::iterator iterator;
-  
-  iterator begin() { return tiles.begin(); }
-  iterator end()   { return tiles.end(); }
-
-  /** Create a TileFactory from a given tile definition file */
-  TileFactory(const std::string& filename);
-  ~TileFactory();
-
-  /**
-   * Create a new tile, or loads&create it if it is not already
-   * available
-   */
-  Tile* create(int tile_id);
-
-  /** 
-   * Adds a surface to the TileFactory
-   */
-  void pack(int id, int colmap, SDL_Surface* image, const Rect& rect);
-
-  /** Create the default TileFactor*/
-  static void init();
-
-  /** Destroy the default TileFactor*/
-  static void deinit();
-
-  /** Access the default TileFactor*/
-  static TileFactory* current() { return current_; }
-
-private:
-  void parse_tiles(FileReader& reader);
-};
-
-#endif
-
-/* EOF */

Deleted: trunk/windstille/src/tile_map.cpp
===================================================================
--- trunk/windstille/src/tile_map.cpp	2009-02-11 20:45:55 UTC (rev 2462)
+++ trunk/windstille/src/tile_map.cpp	2009-02-11 21:05:03 UTC (rev 2463)
@@ -1,274 +0,0 @@
-/*
-**  Windstille - A Sci-Fi Action-Adventure Game
-**  Copyright (C) 2000 Ingo Ruhnke <grumbel at gmx.de>
-**
-**  This program is free software: you can redistribute it and/or modify
-**  it under the terms of the GNU General Public License as published by
-**  the Free Software Foundation, either version 3 of the License, or
-**  (at your option) any later version.
-**  
-**  This program is distributed in the hope that it will be useful,
-**  but WITHOUT ANY WARRANTY; without even the implied warranty of
-**  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
-**  GNU General Public License for more details.
-**  
-**  You should have received a copy of the GNU General Public License
-**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
-*/
-
-#include <sstream>
-#include <stdexcept>
-#include <physfs.h>
-#include "tile_map.hpp"
-#include "tile.hpp"
-#include "tile_factory.hpp"
-#include "globals.hpp"
-#include "view.hpp"
-#include "display/vertex_array_drawing_request.hpp"
-#include "collision/collision_engine.hpp"
-#include <inttypes.h>
-
-TileMap::TileMap(FileReader& props)
-{
-  int width = -1;
-  int height = -1;
-  z_pos = 0;
-  total_time = 0;
-  
-  props.get("name", name);
-  props.get("z-pos", z_pos);
-  props.get("width", width);
-  props.get("height", height);
-  if(width <= 0 || height <= 0) {
-    throw std::runtime_error(
-                             "Invalid width or height defined or "
-                             "data defined before width and height");  
-  }
- 
-  if(width <= 0 || height <= 0) {
-    throw std::runtime_error(
-                             "Invalid width or height defined or "
-                             "data defined before width and height");
-  }
-
-  std::string data_filename;
-  if (props.get("data-file", data_filename))
-    {
-      PHYSFS_file* file = PHYSFS_openRead(data_filename.c_str());
-      if (!file)
-        {
-          throw std::runtime_error("Couldn't open tiledata file: " + data_filename);
-        }
-      
-      field = Field<Tile*>(width, height);
-
-      for(int y = 0; y < height; ++y)
-        for(int x = 0; x < width; ++x)
-          {
-            uint16_t result;
-            if(PHYSFS_readULE16(file, &result) == 0) {
-              std::ostringstream msg;
-              msg << "Problem reading uint16 value: " << PHYSFS_getLastError();
-              throw std::runtime_error(msg.str());
-            }
-
-            field(x, y) = TileFactory::current()->create(result);
-          }
-
-      PHYSFS_close(file);
-    }
-  else // read data directly from the levelfile
-    {
-      Field<int> tmpfield(width, height);
-
-      props.get("data", tmpfield.get_vector());
-  
-      field = Field<Tile*>(width, height);
-      for (int y = 0; y < field.get_height (); ++y) 
-        {
-          for (int x = 0; x < field.get_width (); ++x)
-            {
-              field(x, y) = TileFactory::current()->create(tmpfield(x, y));
-            }
-        }
-    }
-
-  props.print_unused_warnings("tilemap");
-
-
-  if(field.size() == 0)
-    throw std::runtime_error("No tiles defined in tilemap");  
-}
-
-TileMap::~TileMap()
-{
-}
-
-void 
-TileMap::update (float delta)
-{
-  total_time += delta;
-}
-
-void
-TileMap::draw (SceneContext& sc)
-{
-  Rect clip_rect = Rect(View::current()->get_clip_rect());
-
-  Rect rect(std::max(0, clip_rect.left/TILE_SIZE),
-            std::max(0, clip_rect.top/TILE_SIZE),
-            std::min(field.get_width(),  clip_rect.right/TILE_SIZE + 1),
-            std::min(field.get_height(), clip_rect.bottom/TILE_SIZE + 1));
-  
-  std::vector<VertexArrayDrawingRequest*> requests;
-  for (int y = rect.top;   y < rect.bottom; ++y)
-    for (int x = rect.left; x < rect.right; ++x)
-      {
-        Tile* tile = field(x, y);
-
-        if (!(tile == 0 || tile->packer < 0))
-          {
-            int packer = tile->packer; 
-
-            if(packer >= int(requests.size()))
-              requests.resize(packer+1);
-
-            VertexArrayDrawingRequest*& request = requests[packer];
-            if (!request)
-              {
-                request = new VertexArrayDrawingRequest(Vector(0, 0), z_pos,
-                                                        sc.color().get_modelview());
-                request->set_mode(GL_QUADS);
-                request->set_blend_func(GL_SRC_ALPHA, GL_ONE_MINUS_SRC_ALPHA);
-                request->set_texture(tile->texture);
-              }
-            
-            request->texcoord(tile->uv.left, tile->uv.top);
-            request->vertex(x * TILE_SIZE, y * TILE_SIZE);
-
-            request->texcoord(tile->uv.right, tile->uv.top);
-            request->vertex(x * TILE_SIZE + TILE_SIZE, y * TILE_SIZE);
-
-            request->texcoord(tile->uv.right, tile->uv.bottom);
-            request->vertex(x * TILE_SIZE + TILE_SIZE, y * TILE_SIZE + TILE_SIZE);
-            
-            request->texcoord(tile->uv.left, tile->uv.bottom);
-            request->vertex(x * TILE_SIZE, y * TILE_SIZE + TILE_SIZE); 
-          }
-      }
-
-  for(std::vector<VertexArrayDrawingRequest*>::iterator i = requests.begin(); i != requests.end(); ++i)
-    {
-      if (*i)
-        sc.color().draw(*i);
-    }
-}
-
-unsigned int
-TileMap::get_pixel(int x, int y)
-{
-  if (x < 0 || y < 0 
-      || x >= int(field.get_width())
-      || y >= int(field.get_height()))
-    {
-      //std::cout << "Out of bounce: " << x << ", " << y << std::endl;
-      return 0;
-    }
-  else
-    {
-      Tile* tile = field(x, y);
-      
-      if (tile)
-        return tile->get_colmap();
-      else
-        return 0;     
-    }
-}
-
-bool
-TileMap::is_ground (float x, float y)
-{
-  int x_pos = int(x) / TILE_SIZE;
-  int y_pos = int(y) / TILE_SIZE;
-
-  if (x < 0 || x_pos >= field.get_width())
-    {
-      //std::cout << "TileMap::is_ground (): Out of range: " << x_pos << " " << y_pos << std::endl;
-      return 1;
-    }
-  else if (y < 0 || y_pos >= field.get_height())
-    {
-      return 0;
-    }
-
-  if (field(x_pos, y_pos))
-    return field(x_pos, y_pos)->get_colmap();
-  else
-    return 0;
-}
-
-static float find_max(float pos, float v)
-{
-  if (v == 0) 
-    return 0;
-  else if (v < 0)
-    return fmodf(fmodf(pos, TILE_SIZE) + TILE_SIZE, TILE_SIZE)/fabsf(v);
-  else // if (v > 0)
-    {
-      return fmodf(fmodf(-pos, TILE_SIZE) + TILE_SIZE, TILE_SIZE)/v;
-    }
-}
-
-Vector
-TileMap::raycast(const Vector& pos, float angle)
-{
-  ////////////////////////////////////////////
-  // FIXME: This code is buggy, use code from LaserPointer instead
-  ///////////////////////////////////////////////
-  
-  // Ray position in Tile units
-  int x = static_cast<int>(pos.x / TILE_SIZE);
-  int y = static_cast<int>(pos.y / TILE_SIZE);
-
-  Vector direction(cos(angle) * 100.0f, sin(angle) * 100.0f);
-
-  int step_x = (direction.x > 0) ? 1 : -1;
-  int step_y = (direction.y > 0) ? 1 : -1;
-
-  float tMaxX = find_max(pos.x, direction.x);
-  float tMaxY = find_max(pos.y, direction.y);
-
-  float tDeltaX = (direction.x == 0) ? 0 : fabsf(TILE_SIZE / direction.x);
-  float tDeltaY = (direction.y == 0) ? 0 : fabsf(TILE_SIZE / direction.y);
-
-  float t = 0;
-
-  while(x >= 0 && x < get_width() &&
-        y >= 0 && y < get_height())
-    {
-      Tile* tile = field(x, y);  
-      if (tile && tile->colmap)
-        {
-          return pos + Vector(t * direction.x, t * direction.y);
-        }
-
-      // move one tile
-      if (tMaxX < tMaxY)
-        {
-          t = tMaxX;
-          tMaxX += tDeltaX;
-          x = x + step_x;
-        }
-      else 
-        {
-          t = tMaxY;
-          tMaxY += tDeltaY;
-          y = y + step_y;
-        }
-    }
-
-  // Ray got out of the map
-  return pos + Vector(t * direction.x, t * direction.y);
-}
-
-/* EOF */

Deleted: trunk/windstille/src/tile_map.hpp
===================================================================
--- trunk/windstille/src/tile_map.hpp	2009-02-11 20:45:55 UTC (rev 2462)
+++ trunk/windstille/src/tile_map.hpp	2009-02-11 21:05:03 UTC (rev 2463)
@@ -1,64 +0,0 @@
-/*
-**  Windstille - A Sci-Fi Action-Adventure Game
-**  Copyright (C) 2000 Ingo Ruhnke <grumbel at gmx.de>
-**
-**  This program is free software: you can redistribute it and/or modify
-**  it under the terms of the GNU General Public License as published by
-**  the Free Software Foundation, either version 3 of the License, or
-**  (at your option) any later version.
-**  
-**  This program is distributed in the hope that it will be useful,
-**  but WITHOUT ANY WARRANTY; without even the implied warranty of
-**  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
-**  GNU General Public License for more details.
-**  
-**  You should have received a copy of the GNU General Public License
-**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
-*/
-
-#ifndef HEADER_WINDSTILLE_TILE_MAP_HPP
-#define HEADER_WINDSTILLE_TILE_MAP_HPP
-
-#include <string>
-
-#include "globals.hpp"
-#include "field.hpp"
-#include "game_object.hpp"
-#include "display/scene_context.hpp"
-
-class Tile;
-
-class TileMap : public GameObject
-{
-private:
-  Field<Tile*> field;
-  typedef Field<Tile*>::iterator FieldIter;
-  float z_pos; 
-  float total_time;
-
-public:
-  TileMap(FileReader& props);
-  virtual ~TileMap();
-
-  void update (float delta);
-  void draw (SceneContext& gc);
-  
-  /** @return the type of ground at the given world coordinates */
-  bool is_ground(float x, float y);
-
-  /** @return the type of ground at the given subtile coordinates */
-  unsigned int get_pixel(int x, int y);
-  
-  int get_width () const { return field.get_width(); }
-  int get_height () const { return field.get_height (); }
-
-  int get_tile_size () const { return TILE_SIZE; }
-
-  /** Shoots a ray from \a pos into direction \a angle, returns the
-      position were the ray collides with the tilemap */
-  Vector raycast(const Vector& pos, float angle);
-};
-
-#endif
-
-/* EOF */

Deleted: trunk/windstille/src/tile_packer.cpp
===================================================================
--- trunk/windstille/src/tile_packer.cpp	2009-02-11 20:45:55 UTC (rev 2462)
+++ trunk/windstille/src/tile_packer.cpp	2009-02-11 21:05:03 UTC (rev 2463)
@@ -1,129 +0,0 @@
-/*
-**  Windstille - A Sci-Fi Action-Adventure Game
-**  Copyright (C) 2000,2005 Ingo Ruhnke <grumbel at gmx.de>
-**
-**  This program is free software: you can redistribute it and/or modify
-**  it under the terms of the GNU General Public License as published by
-**  the Free Software Foundation, either version 3 of the License, or
-**  (at your option) any later version.
-**  
-**  This program is distributed in the hope that it will be useful,
-**  but WITHOUT ANY WARRANTY; without even the implied warranty of
-**  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
-**  GNU General Public License for more details.
-**  
-**  You should have received a copy of the GNU General Public License
-**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
-*/
-
-#include <assert.h>
-#include <GL/glew.h>
-#include <GL/gl.h>
-#include "display/texture.hpp"
-#include "globals.hpp"
-#include "tile_packer.hpp"
-#include "util.hpp"
-#include "blitter.hpp"
-
-class TilePackerImpl
-{
-public:
-  // Position for the next tile
-  int x_pos;
-  int y_pos;
-
-  Texture texture;
-
-  int width;
-  int height;
-};
-
-TilePacker::TilePacker(int width, int height)
-  : impl(new TilePackerImpl())
-{
-  impl->x_pos = 0;
-  impl->y_pos = 0;
-
-  impl->width  = width;
-  impl->height = height;
-
-  impl->texture = Texture(GL_TEXTURE_2D, width, height);
-        
-  assert_gl("setting TilePacker texture parameters"); 
-}
-
-TilePacker::~TilePacker()
-{
-  delete impl;
-}
-
-/** Pack a tile and return the position where it is placed in the
-    pixel buffer */
-Rectf
-TilePacker::pack(SDL_Surface* image, int x, int y, int w, int h)
-{
-  assert(w == TILE_RESOLUTION && h == TILE_RESOLUTION);
-  assert(!is_full());
-
-#if SDL_BYTEORDER == SDL_BIG_ENDIAN
-  SDL_Surface* convert = SDL_CreateRGBSurface(SDL_SWSURFACE,
-    w+2, h+2, 32,
-    0xff000000, 0x00ff0000, 0x0000ff00, 0x000000ff);
-#else
-  SDL_Surface* convert = SDL_CreateRGBSurface(SDL_SWSURFACE,
-    w+2, h+2, 32,
-      0x000000ff, 0x0000ff00, 0x00ff0000, 0xff000000);
-#endif
-  if(convert == 0)
-    throw std::runtime_error("Couldn't pack texture: out of memory");
-
-  SDL_Rect source_rect;
-  source_rect.x = x;
-  source_rect.y = y;
-  source_rect.w = w;
-  source_rect.h = h;
-  SDL_Rect dest_rect;
-  dest_rect.x = 1;
-  dest_rect.y = 1;
-  dest_rect.w = w;
-  dest_rect.h = h;
-  SDL_SetAlpha(image, 0, 0);
-  SDL_BlitSurface(image, &source_rect, convert, &dest_rect);
-  generate_border(convert, 1, 1, TILE_RESOLUTION, TILE_RESOLUTION);
-
-  impl->texture.put(convert, impl->x_pos, impl->y_pos);
-  SDL_FreeSurface(convert);
-
-  assert_gl("updating tilepacker texture");
-
-  Rectf rect(Vector(static_cast<float>(impl->x_pos+1)/impl->width, 
-                    static_cast<float>(impl->y_pos+1)/impl->height), 
-             Sizef(static_cast<float>(TILE_RESOLUTION)/impl->width, 
-                   static_cast<float>(TILE_RESOLUTION)/impl->height));
-
-  // we move by TILE_RESOLUTION+1 to avoid tiles bleeding into each other
-  // when blending
-  impl->x_pos += TILE_RESOLUTION + 2; 
-  if (impl->x_pos + TILE_RESOLUTION > impl->width)
-    {
-      impl->x_pos = 0;
-      impl->y_pos += TILE_RESOLUTION + 2;
-    }
-
-  return rect;
-}
-
-/** Return true if the PixelBuffer is full */
-bool
-TilePacker::is_full() const
-{
-  return (impl->y_pos + TILE_RESOLUTION + 2 > impl->height);
-}
-
-Texture
-TilePacker::get_texture() const
-{
-  return impl->texture;
-}
-
-/* EOF */

Deleted: trunk/windstille/src/tile_packer.hpp
===================================================================
--- trunk/windstille/src/tile_packer.hpp	2009-02-11 20:45:55 UTC (rev 2462)
+++ trunk/windstille/src/tile_packer.hpp	2009-02-11 21:05:03 UTC (rev 2463)
@@ -1,56 +0,0 @@
-/*
-**  Windstille - A Sci-Fi Action-Adventure Game
-**  Copyright (C) 2000,2005 Ingo Ruhnke <grumbel at gmx.de>
-**
-**  This program is free software: you can redistribute it and/or modify
-**  it under the terms of the GNU General Public License as published by
-**  the Free Software Foundation, either version 3 of the License, or
-**  (at your option) any later version.
-**  
-**  This program is distributed in the hope that it will be useful,
-**  but WITHOUT ANY WARRANTY; without even the implied warranty of
-**  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
-**  GNU General Public License for more details.
-**  
-**  You should have received a copy of the GNU General Public License
-**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
-*/
-
-#ifndef HEADER_WINDSTILLE_TILE_PACKER_HPP
-#define HEADER_WINDSTILLE_TILE_PACKER_HPP
-
-#include <SDL.h>
-#include <GL/glew.h>
-#include <GL/gl.h>
-#include "display/texture.hpp"
-#include "math/rect.hpp"
-
-class TilePackerImpl;
-
-/** Creates a pixelbuffer of the given size and packs 32x32 large
-    tiles into it for later conversion to a texture */
-class TilePacker
-{
-private:
-public:
-  /** Let the texture be width/height large (only power of two values
-      recomment) */
-  TilePacker(int width, int height);
-  ~TilePacker();
-
-  /** Pack a tile and return the position where it is placed in the
-      pixel buffer */
-  Rectf pack(SDL_Surface* image, int x, int y, int w, int h);
-
-  /** Return true if the PixelBuffer is full */
-  bool is_full() const;
-
-  Texture get_texture() const;
-
-private:
-  TilePackerImpl* impl;
-};
-
-#endif
-
-/* EOF */

Modified: trunk/windstille/src/windstille_main.cpp
===================================================================
--- trunk/windstille/src/windstille_main.cpp	2009-02-11 20:45:55 UTC (rev 2462)
+++ trunk/windstille/src/windstille_main.cpp	2009-02-11 21:05:03 UTC (rev 2463)
@@ -30,7 +30,7 @@
 #include "sector.hpp"
 #include "input/input_manager.hpp"
 #include "sound/sound_manager.hpp"
-#include "tile_factory.hpp"
+#include "tile/tile_factory.hpp"
 #include "script_manager.hpp"
 #include "config.hpp"
 #include "util.hpp"



From grumbel at mail.berlios.de  Wed Feb 11 22:22:05 2009
From: grumbel at mail.berlios.de (grumbel at BerliOS)
Date: Wed, 11 Feb 2009 22:22:05 +0100
Subject: [Windstille-commit] r2464 - in trunk/windstille/src: . engine gui
	objects particles scripting sprite3d tile
Message-ID: <200902112122.n1BLM5kc029262@sheep.berlios.de>

Author: grumbel
Date: 2009-02-11 22:22:01 +0100 (Wed, 11 Feb 2009)
New Revision: 2464

Added:
   trunk/windstille/src/engine/
   trunk/windstille/src/engine/camera.cpp
   trunk/windstille/src/engine/camera.hpp
   trunk/windstille/src/engine/entity.cpp
   trunk/windstille/src/engine/entity.hpp
   trunk/windstille/src/engine/game_object.cpp
   trunk/windstille/src/engine/game_object.hpp
   trunk/windstille/src/engine/physics.cpp
   trunk/windstille/src/engine/physics.hpp
   trunk/windstille/src/engine/script_manager.cpp
   trunk/windstille/src/engine/script_manager.hpp
   trunk/windstille/src/engine/sector.cpp
   trunk/windstille/src/engine/sector.hpp
   trunk/windstille/src/objects/laser_pointer.cpp
   trunk/windstille/src/objects/laser_pointer.hpp
   trunk/windstille/src/objects/pistol.cpp
   trunk/windstille/src/objects/pistol.hpp
   trunk/windstille/src/objects/trigger.cpp
   trunk/windstille/src/objects/trigger.hpp
Removed:
   trunk/windstille/src/camera.cpp
   trunk/windstille/src/camera.hpp
   trunk/windstille/src/entity.cpp
   trunk/windstille/src/entity.hpp
   trunk/windstille/src/game_object.cpp
   trunk/windstille/src/game_object.hpp
   trunk/windstille/src/laser_pointer.cpp
   trunk/windstille/src/laser_pointer.hpp
   trunk/windstille/src/physics.cpp
   trunk/windstille/src/physics.hpp
   trunk/windstille/src/pistol.cpp
   trunk/windstille/src/pistol.hpp
   trunk/windstille/src/script_manager.cpp
   trunk/windstille/src/script_manager.hpp
   trunk/windstille/src/sector.cpp
   trunk/windstille/src/sector.hpp
   trunk/windstille/src/trigger.cpp
   trunk/windstille/src/trigger.hpp
Modified:
   trunk/windstille/src/SConscript
   trunk/windstille/src/console.cpp
   trunk/windstille/src/conversation.cpp
   trunk/windstille/src/dialog_manager.cpp
   trunk/windstille/src/game_session.cpp
   trunk/windstille/src/gui/automap.cpp
   trunk/windstille/src/menu_manager.cpp
   trunk/windstille/src/objects/background_gradient.hpp
   trunk/windstille/src/objects/bomb.cpp
   trunk/windstille/src/objects/bomb.hpp
   trunk/windstille/src/objects/box.hpp
   trunk/windstille/src/objects/character.cpp
   trunk/windstille/src/objects/character.hpp
   trunk/windstille/src/objects/elevator.cpp
   trunk/windstille/src/objects/elevator.hpp
   trunk/windstille/src/objects/grenade.cpp
   trunk/windstille/src/objects/grenade.hpp
   trunk/windstille/src/objects/hedgehog.cpp
   trunk/windstille/src/objects/hedgehog.hpp
   trunk/windstille/src/objects/liquid.hpp
   trunk/windstille/src/objects/nightvision.hpp
   trunk/windstille/src/objects/player.cpp
   trunk/windstille/src/objects/player.hpp
   trunk/windstille/src/objects/scriptable_object.cpp
   trunk/windstille/src/objects/scriptable_object.hpp
   trunk/windstille/src/objects/shockwave.hpp
   trunk/windstille/src/objects/spider_mine.hpp
   trunk/windstille/src/objects/swarm.cpp
   trunk/windstille/src/objects/swarm.hpp
   trunk/windstille/src/objects/test_object.hpp
   trunk/windstille/src/objects/vrdummy.hpp
   trunk/windstille/src/particles/particle_system.hpp
   trunk/windstille/src/scripting/game_objects.cpp
   trunk/windstille/src/scripting/game_objects.hpp
   trunk/windstille/src/scripting/interface.cpp
   trunk/windstille/src/sprite3d/sprite3d.hpp
   trunk/windstille/src/tile/tile_map.hpp
   trunk/windstille/src/view.cpp
   trunk/windstille/src/view.hpp
   trunk/windstille/src/windstille_main.cpp
Log:
Moved engine related stuff to engine/, moved some objects into objects/

Modified: trunk/windstille/src/SConscript
===================================================================
--- trunk/windstille/src/SConscript	2009-02-11 21:05:03 UTC (rev 2463)
+++ trunk/windstille/src/SConscript	2009-02-11 21:22:01 UTC (rev 2464)
@@ -48,7 +48,7 @@
 'armature_test.cpp',
 'baby_xml.cpp',
 'blitter.cpp',
-'camera.cpp',
+'engine/camera.cpp',
 'collision/collision_data.cpp',
 'collision/collision_engine.cpp',
 'collision/collision_object.cpp',
@@ -77,12 +77,12 @@
 'display/texture_manager.cpp',
 'display/vertex_array_drawing_request.cpp',
 'energy_bar.cpp',
-'entity.cpp',
+'engine/entity.cpp',
 'file_reader.cpp',
 'font/border_font_effect.cpp',
 'font/fonts.cpp',
 'font/ttf_font.cpp',
-'game_object.cpp',
+'engine/game_object.cpp',
 'game_session.cpp',
 'geometry_test.cpp',
 'getter.cpp',
@@ -111,7 +111,7 @@
 'input/input_manager_sdl.cpp',
 'input/wiimote.cpp',
 'inventory.cpp',
-'laser_pointer.cpp',
+'objects/laser_pointer.cpp',
 'lisp/getters.cpp',
 'lisp/lexer.cpp',
 'lisp/lisp.cpp',
@@ -155,19 +155,19 @@
 'pda.cpp',
 'physfs/physfs_sdl.cpp',
 'physfs/physfs_stream.cpp',
-'physics.cpp',
-'pistol.cpp',
+'engine/physics.cpp',
+'objects/pistol.cpp',
 'random.cpp',
 'response_curve.cpp',
 'screen.cpp',
 'screen_manager.cpp',
-'script_manager.cpp',
+'engine/script_manager.cpp',
 'scripting/game_objects.cpp',
 'scripting/interface.cpp',
 'scripting/squirrel_error.cpp',
 'scripting/util.cpp',
 'scripting/wrapper.cpp',
-'sector.cpp',
+'engine/sector.cpp',
 'sexpr_file_reader.cpp',
 'sound/sound_file.cpp',
 'sound/sound_manager.cpp',
@@ -189,7 +189,7 @@
 'tile/tile_packer.cpp',
 'timer.cpp',
 'title_screen.cpp',
-'trigger.cpp',
+'objects/trigger.cpp',
 'util.cpp',
 'view.cpp',
 'windstille_main.cpp',

Deleted: trunk/windstille/src/camera.cpp
===================================================================
--- trunk/windstille/src/camera.cpp	2009-02-11 21:05:03 UTC (rev 2463)
+++ trunk/windstille/src/camera.cpp	2009-02-11 21:22:01 UTC (rev 2464)
@@ -1,178 +0,0 @@
-/*
-**  Windstille - A Sci-Fi Action-Adventure Game
-**  Copyright (C) 2000,2005 Ingo Ruhnke <grumbel at gmx.de>
-**
-**  This program is free software: you can redistribute it and/or modify
-**  it under the terms of the GNU General Public License as published by
-**  the Free Software Foundation, either version 3 of the License, or
-**  (at your option) any later version.
-**  
-**  This program is distributed in the hope that it will be useful,
-**  but WITHOUT ANY WARRANTY; without even the implied warranty of
-**  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
-**  GNU General Public License for more details.
-**  
-**  You should have received a copy of the GNU General Public License
-**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
-*/
-
-#include "objects/player.hpp"
-#include "sector.hpp"
-#include "script_manager.hpp"
-#include "display/display.hpp"
-#include "camera.hpp"
-
-Camera* Camera::current_ = 0;
-
-/**
- * Calculate the distance between two camera PathPoints, distance here
- * means not only the distance between the points itself, but also
- * between their zoom and rotation setting
- */
-float distance(const Camera::PathPoint& a, const Camera::PathPoint& b)
-{
-  // "100.0f *" is there to balance out the speed between zoom and
-  // positional movement
-  return (b.pos - a.pos).length() 
-    + 100.0f * fabsf(b.zoom - a.zoom)
-    + fabsf(b.rotation - a.rotation);
-}
-
-/**
- * Simple linear interpolation to move along a given vector path
- * FIXME: Could add curves and different speed per vertex
- */
-Camera::PathPoint interpolate_path(const std::vector<Camera::PathPoint>& path, float length)
-{
-  float length_so_far = 0.0f;
-  for(std::vector<Camera::PathPoint>::size_type i = 0; i < path.size()-1; ++i)
-    {
-      float  segment_length = distance(path[i], path[i+1]);
-
-      if (length_so_far + segment_length > length)
-        {
-          float factor = (length - length_so_far) / segment_length;
-          return Camera::PathPoint((path[i+1].pos * factor) + (path[i].pos * (1.0f - factor)),
-                                   (factor * path[i+1].zoom) + ((1.0f - factor) * path[i].zoom));
-        }
-      length_so_far += segment_length;
-    }
-
-  return path.back();
-}
-
-Camera::Camera()
-  : pos(0, 0), zoom(1.0f)
-{
-  path_pos = 0;
-  current_ = this;
-  mode     = CAMERA_FOLLOW_PLAYER;
-}
-
-void
-Camera::update(float delta)
-{
-  switch (mode)
-    {
-    case CAMERA_INACTIVE:
-      // do nothing
-      break;
-
-    case CAMERA_FOLLOW_PLAYER:
-      {
-        int hscroll_threshold = 100;
-        int vscroll_threshold = 150;
-
-        Vector tpos = Player::current()->get_pos();
-
-        float dist = tpos.x - pos.x;
-        if (dist > hscroll_threshold)
-          pos.x = tpos.x - hscroll_threshold;
-        else if (dist < - hscroll_threshold)
-          pos.x = tpos.x + hscroll_threshold;
-
-        dist = tpos.y - pos.y;
-        if (dist > vscroll_threshold)
-          pos.y = tpos.y - vscroll_threshold;
-        else if (dist < -vscroll_threshold)
-          pos.y = tpos.y + vscroll_threshold;
-
-        int start_x = Display::get_width()/2;
-        int end_x   = Sector::current()->get_width() - Display::get_width()/2;
-
-        int start_y = Display::get_height()/2;
-        int end_y   = Sector::current()->get_height() - Display::get_height()/2;
-
-        if (pos.x < start_x)
-          pos.x = start_x;
-
-        if (pos.y < start_y)
-          pos.y = start_y;
-
-        if (pos.x > end_x)
-          pos.x = end_x;
-
-        if (pos.y > end_y)
-          pos.y = end_y;
-      }
-      break;
-
-    case CAMERA_FOLLOW_PATH:
-      {
-        assert(!path.empty());
-        path_pos += delta * 50.0f;
-
-        PathPoint p = interpolate_path(path, path_pos);
-
-        set_pos(p.pos.x, p.pos.y);
-        set_zoom(p.zoom);
-
-        if (p == path.back())
-          {
-            script_manager->fire_wakeup_event(ScriptManager::CAMERA_DONE);
-            set_mode(CAMERA_INACTIVE);
-          }
-      }
-      break;
-    }
-}
-
-void
-Camera::set_pos(float x, float y)
-{
-  pos.x = x; // + Display::get_width()/2);
-  pos.y = y; // + Display::get_height()/2);
-}
-
-void
-Camera::set_zoom(float zoom_)
-{
-  zoom = zoom_;
-}
-
-float
-Camera::get_zoom() const
-{
-  return zoom;
-}
-
-void
-Camera::set_path(const std::vector<PathPoint>& path_, bool cont)
-{
-  path.clear();
-  if (cont)
-    path.push_back(PathPoint(pos, zoom));
-
-  std::copy(path_.begin(), path_.end(), std::back_inserter(path)); 
-
-  path_pos = 0;
-  mode     = CAMERA_FOLLOW_PATH;
-}
-
-void
-Camera::set_mode(Mode mode_)
-{
-  mode = mode_;
-}
-
-/* EOF */

Deleted: trunk/windstille/src/camera.hpp
===================================================================
--- trunk/windstille/src/camera.hpp	2009-02-11 21:05:03 UTC (rev 2463)
+++ trunk/windstille/src/camera.hpp	2009-02-11 21:22:01 UTC (rev 2464)
@@ -1,97 +0,0 @@
-/*
-**  Windstille - A Sci-Fi Action-Adventure Game
-**  Copyright (C) 2000,2005 Ingo Ruhnke <grumbel at gmx.de>
-**
-**  This program is free software: you can redistribute it and/or modify
-**  it under the terms of the GNU General Public License as published by
-**  the Free Software Foundation, either version 3 of the License, or
-**  (at your option) any later version.
-**  
-**  This program is distributed in the hope that it will be useful,
-**  but WITHOUT ANY WARRANTY; without even the implied warranty of
-**  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
-**  GNU General Public License for more details.
-**  
-**  You should have received a copy of the GNU General Public License
-**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
-*/
-
-#ifndef HEADER_WINDSTILLE_CAMERA_HPP
-#define HEADER_WINDSTILLE_CAMERA_HPP
-
-/** 
- * This class manages the virtual camera movement, it follows the
- * player, allows the player to watch around, might zoom out if
- * interesting stuff happens out of the screen and such
- */
-class Camera
-{
-public:
-  enum Mode { CAMERA_INACTIVE, CAMERA_FOLLOW_PLAYER, CAMERA_FOLLOW_PATH };
-
-  struct PathPoint
-  {
-    Vector pos;
-    float  zoom;
-    float  rotation;
-
-    PathPoint(const Vector& pos_, float zoom_, float rotation_ = 0.0f)
-      : pos(pos_), zoom(zoom_), rotation(rotation_) {}
-
-    bool operator==(const PathPoint& p) {
-      return p.pos == pos && p.zoom == zoom;
-    }
-  };
-
-private:
-  Mode mode;
-  
-  /**
-   * Position of the camera, ie. where the center of the screen should
-   * be located
-   */
-  Vector pos;
-  
-  /**
-   * Zoom of the Camera, 1.0 means no zoom, 2.0 means everything will
-   * be twice as large 
-   */
-  float  zoom;
-
-  std::vector<PathPoint> path;
-  float path_pos;
-
-  static Camera* current_;
-public:
-  static Camera* current() { return current_; }
-
-  Camera();
-
-  void   update(float delta);
-
-  Vector get_pos() const { return pos; }
-  void   set_pos(float x, float y);
-
-  void   set_zoom(float zoom_);
-  float  get_zoom() const;
-
-  void   set_mode(Mode mode_);
-
-  /**
-   * Set Camera to follow the given path
-   *
-   * @param path_ The path the camera should follow
-   * @param cont True if you want to continue the path from the
-   * current camera position, false if you want the camera to jump to
-   * the start of the path instantly
-   */
-  void   set_path(const std::vector<PathPoint>& path_, bool cont);
-
-private:
-  Camera (const Camera&);
-  Camera& operator= (const Camera&);
-};
-
-#endif
-
-/* EOF */

Modified: trunk/windstille/src/console.cpp
===================================================================
--- trunk/windstille/src/console.cpp	2009-02-11 21:05:03 UTC (rev 2463)
+++ trunk/windstille/src/console.cpp	2009-02-11 21:22:01 UTC (rev 2464)
@@ -21,7 +21,7 @@
 #include "font/fonts.hpp"
 #include "game_session.hpp"
 #include "input/input_manager.hpp"
-#include "script_manager.hpp"
+#include "engine/script_manager.hpp"
 #include "display/display.hpp"
 #include "scripting/util.hpp"
 #include "console.hpp"

Modified: trunk/windstille/src/conversation.cpp
===================================================================
--- trunk/windstille/src/conversation.cpp	2009-02-11 21:05:03 UTC (rev 2463)
+++ trunk/windstille/src/conversation.cpp	2009-02-11 21:22:01 UTC (rev 2464)
@@ -21,7 +21,7 @@
 #include "input/input_manager.hpp"
 #include "font/fonts.hpp"
 #include "math/rect.hpp"
-#include "script_manager.hpp"
+#include "engine/script_manager.hpp"
 #include "display/display.hpp"
 #include "conversation.hpp"
 #include "pda.hpp"

Modified: trunk/windstille/src/dialog_manager.cpp
===================================================================
--- trunk/windstille/src/dialog_manager.cpp	2009-02-11 21:05:03 UTC (rev 2463)
+++ trunk/windstille/src/dialog_manager.cpp	2009-02-11 21:22:01 UTC (rev 2464)
@@ -22,7 +22,7 @@
 #include "input/controller.hpp"
 #include "input/input_manager.hpp"
 #include "dialog_manager.hpp"
-#include "script_manager.hpp"
+#include "engine/script_manager.hpp"
 #include "text_area.hpp"
 #include "display/display.hpp"
 #include "config.hpp"

Copied: trunk/windstille/src/engine/camera.cpp (from rev 2463, trunk/windstille/src/camera.cpp)


Property changes on: trunk/windstille/src/engine/camera.cpp
___________________________________________________________________
Name: svn:keywords
   + Id
Name: svn:mergeinfo
   + 
Name: svn:eol-style
   + native

Copied: trunk/windstille/src/engine/camera.hpp (from rev 2463, trunk/windstille/src/camera.hpp)


Property changes on: trunk/windstille/src/engine/camera.hpp
___________________________________________________________________
Name: svn:keywords
   + Id
Name: svn:mergeinfo
   + 
Name: svn:eol-style
   + native

Copied: trunk/windstille/src/engine/entity.cpp (from rev 2463, trunk/windstille/src/entity.cpp)
===================================================================
--- trunk/windstille/src/entity.cpp	2009-02-11 21:05:03 UTC (rev 2463)
+++ trunk/windstille/src/engine/entity.cpp	2009-02-11 21:22:01 UTC (rev 2464)
@@ -0,0 +1,63 @@
+/*
+**  Windstille - A Sci-Fi Action-Adventure Game
+**  Copyright (C) 2005 Ingo Ruhnke <grumbel at gmx.de>
+**
+**  This program is free software: you can redistribute it and/or modify
+**  it under the terms of the GNU General Public License as published by
+**  the Free Software Foundation, either version 3 of the License, or
+**  (at your option) any later version.
+**  
+**  This program is distributed in the hope that it will be useful,
+**  but WITHOUT ANY WARRANTY; without even the implied warranty of
+**  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+**  GNU General Public License for more details.
+**  
+**  You should have received a copy of the GNU General Public License
+**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
+*/
+
+#include <assert.h>
+#include "globals.hpp"
+#include "sector.hpp"
+#include "tile/tile_map.hpp"
+#include "entity.hpp"
+
+Entity::Entity()
+  : velocity(0, 0),
+    useable(false)
+{
+  parent = 0;
+}
+
+Entity::~Entity()
+{
+}
+
+void
+Entity::set_pos(Vector pos)
+{
+  this->pos = pos;
+}
+
+bool
+Entity::on_ground() const
+{
+  return get_world ()->get_tilemap()->is_ground(pos.x, pos.y+16);
+}
+
+bool 
+Entity::in_wall() const
+{
+  return get_world ()->get_tilemap()->is_ground(pos.x, pos.y);
+}
+
+void
+Entity::set_parent(Entity* parent_)
+{
+  if (parent_ != this)
+    {
+      parent = parent_;
+    }
+}
+
+/* EOF */


Property changes on: trunk/windstille/src/engine/entity.cpp
___________________________________________________________________
Name: svn:keywords
   + Id
Name: svn:mergeinfo
   + 
Name: svn:eol-style
   + native

Copied: trunk/windstille/src/engine/entity.hpp (from rev 2463, trunk/windstille/src/entity.hpp)
===================================================================
--- trunk/windstille/src/entity.hpp	2009-02-11 21:05:03 UTC (rev 2463)
+++ trunk/windstille/src/engine/entity.hpp	2009-02-11 21:22:01 UTC (rev 2464)
@@ -0,0 +1,82 @@
+/*
+**  Windstille - A Sci-Fi Action-Adventure Game
+**  Copyright (C) 2005 Ingo Ruhnke <grumbel at gmx.de>
+**
+**  This program is free software: you can redistribute it and/or modify
+**  it under the terms of the GNU General Public License as published by
+**  the Free Software Foundation, either version 3 of the License, or
+**  (at your option) any later version.
+**  
+**  This program is distributed in the hope that it will be useful,
+**  but WITHOUT ANY WARRANTY; without even the implied warranty of
+**  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+**  GNU General Public License for more details.
+**  
+**  You should have received a copy of the GNU General Public License
+**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
+*/
+
+#ifndef HEADER_WINDSTILLE_ENTITY_HPP
+#define HEADER_WINDSTILLE_ENTITY_HPP
+
+#include <boost/signal.hpp>
+#include "math/vector.hpp"
+#include "engine/game_object.hpp"
+#include "collision/collision_object.hpp"
+
+/** A GameObject which has a position and some other properties which
+    are shared among all/most things in the world */
+class Entity : public GameObject
+{
+private:
+  boost::signal<void ()> done; 
+
+protected:
+  friend class Physics;
+  bool on_ground() const;
+  bool in_wall() const;
+  
+  Vector pos;
+  Vector velocity;
+  bool useable;
+  std::string use_verb;
+  
+  Entity* parent;
+public:
+  Entity();
+  virtual ~Entity();
+   
+  virtual Vector get_pos() const
+  { return pos; }
+
+  virtual void set_pos(Vector pos);
+
+  /** Called once per frame to allow the object to draw itself */
+  virtual void draw(SceneContext& gc) = 0;
+
+  /** Called, possible multiple times, per frame to let the object
+      update its position and properties */
+  virtual void update(float delta) = 0;
+
+  /** Called when the player uses this entity */
+  virtual void use() {}
+
+  /** Returns true if the entity is useable by the player */
+  virtual bool is_useable() const { return useable; }
+  std::string get_use_verb() const { return use_verb; }
+
+  /** Makes the objects (un)usable for the player */
+  void set_useable(bool t) { useable = t; }
+
+  void set_parent(Entity* parent_);
+
+  boost::signal<void ()>& sig_done() { return done; }
+
+private:
+  Entity (const Entity&);
+  Entity& operator= (const Entity&);
+};
+
+#endif
+
+/* EOF */


Property changes on: trunk/windstille/src/engine/entity.hpp
___________________________________________________________________
Name: svn:keywords
   + Id
Name: svn:mergeinfo
   + 
Name: svn:eol-style
   + native

Copied: trunk/windstille/src/engine/game_object.cpp (from rev 2463, trunk/windstille/src/game_object.cpp)
===================================================================
--- trunk/windstille/src/game_object.cpp	2009-02-11 21:05:03 UTC (rev 2463)
+++ trunk/windstille/src/engine/game_object.cpp	2009-02-11 21:22:01 UTC (rev 2464)
@@ -0,0 +1,25 @@
+/*
+**  Windstille - A Sci-Fi Action-Adventure Game
+**  Copyright (C) 2000 Ingo Ruhnke <grumbel at gmx.de>
+**
+**  This program is free software: you can redistribute it and/or modify
+**  it under the terms of the GNU General Public License as published by
+**  the Free Software Foundation, either version 3 of the License, or
+**  (at your option) any later version.
+**  
+**  This program is distributed in the hope that it will be useful,
+**  but WITHOUT ANY WARRANTY; without even the implied warranty of
+**  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+**  GNU General Public License for more details.
+**  
+**  You should have received a copy of the GNU General Public License
+**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
+*/
+
+#include "engine/game_object.hpp"
+#include "sector.hpp"
+
+Sector* GameObject::world;
+
+
+/* EOF */


Property changes on: trunk/windstille/src/engine/game_object.cpp
___________________________________________________________________
Name: svn:keywords
   + Id
Name: svn:mergeinfo
   + 
Name: svn:eol-style
   + native

Copied: trunk/windstille/src/engine/game_object.hpp (from rev 2463, trunk/windstille/src/game_object.hpp)


Property changes on: trunk/windstille/src/engine/game_object.hpp
___________________________________________________________________
Name: svn:keywords
   + Id
Name: svn:mergeinfo
   + 
Name: svn:eol-style
   + native

Copied: trunk/windstille/src/engine/physics.cpp (from rev 2463, trunk/windstille/src/physics.cpp)


Property changes on: trunk/windstille/src/engine/physics.cpp
___________________________________________________________________
Name: svn:mergeinfo
   + 

Copied: trunk/windstille/src/engine/physics.hpp (from rev 2463, trunk/windstille/src/physics.hpp)


Property changes on: trunk/windstille/src/engine/physics.hpp
___________________________________________________________________
Name: svn:mergeinfo
   + 

Copied: trunk/windstille/src/engine/script_manager.cpp (from rev 2463, trunk/windstille/src/script_manager.cpp)


Property changes on: trunk/windstille/src/engine/script_manager.cpp
___________________________________________________________________
Name: svn:keywords
   + Id
Name: svn:mergeinfo
   + 
Name: svn:eol-style
   + native

Copied: trunk/windstille/src/engine/script_manager.hpp (from rev 2463, trunk/windstille/src/script_manager.hpp)


Property changes on: trunk/windstille/src/engine/script_manager.hpp
___________________________________________________________________
Name: svn:keywords
   + Id
Name: svn:mergeinfo
   + 
Name: svn:eol-style
   + native

Copied: trunk/windstille/src/engine/sector.cpp (from rev 2463, trunk/windstille/src/sector.cpp)
===================================================================
--- trunk/windstille/src/sector.cpp	2009-02-11 21:05:03 UTC (rev 2463)
+++ trunk/windstille/src/engine/sector.cpp	2009-02-11 21:22:01 UTC (rev 2464)
@@ -0,0 +1,397 @@
+/*
+**  Windstille - A Sci-Fi Action-Adventure Game
+**  Copyright (C) 2005 Ingo Ruhnke <grumbel at gmx.de>
+**
+**  This program is free software: you can redistribute it and/or modify
+**  it under the terms of the GNU General Public License as published by
+**  the Free Software Foundation, either version 3 of the License, or
+**  (at your option) any later version.
+**  
+**  This program is distributed in the hope that it will be useful,
+**  but WITHOUT ANY WARRANTY; without even the implied warranty of
+**  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+**  GNU General Public License for more details.
+**  
+**  You should have received a copy of the GNU General Public License
+**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
+*/
+
+#include <iostream>
+#include <sstream>
+#include <stdexcept>
+#include "sexpr_file_reader.hpp"
+#include "globals.hpp"
+#include "display/scene_context.hpp"
+#include "objects/background_gradient.hpp"
+#include "tile/tile_map.hpp"
+#include "engine/game_object.hpp"
+#include "objects/player.hpp"
+#include "objects/trigger.hpp"
+#include "objects/test_object.hpp"
+#include "objects/vrdummy.hpp"
+#include "sound/sound_manager.hpp"
+#include "script_manager.hpp"
+#include "collision/collision_engine.hpp"
+#include "particles/particle_system.hpp"
+#include "objects/test_object.hpp"
+#include "objects/elevator.hpp"
+#include "objects/nightvision.hpp"
+#include "objects/character.hpp"
+#include "objects/laser_pointer.hpp"
+#include "objects/swarm.hpp"
+#include "objects/liquid.hpp"
+#include "objects/shockwave.hpp"
+#include "objects/hedgehog.hpp"
+#include "objects/spider_mine.hpp"
+#include "objects/box.hpp"
+#include "objects/scriptable_object.hpp"
+#include "navigation/navigation_graph.hpp"
+#include "scripting/squirrel_error.hpp"
+
+#include "sector.hpp"
+
+// The table (works like a namespace here) where the game objects will appear
+#define OBJECTS_TABLE "objects"
+
+Sector* Sector::current_ = 0;
+
+Sector::Sector(const std::string& arg_filename)
+  : filename(arg_filename),
+    player(0)    
+{
+  // make sure squirrel has an "objects" table
+  script_manager->run_script(
+      "if(! (\"" OBJECTS_TABLE "\" in this)) {"
+      "  " OBJECTS_TABLE " <- {};"
+      "}", "");
+  
+  if (debug) std::cout << "Creating new Sector" << std::endl;
+  collision_engine = new CollisionEngine();
+  navigation_graph = new NavigationGraph();
+
+  current_ = this;
+  interactive_tilemap = 0;
+  interactivebackground_tilemap = 0;
+
+  parse_file(filename);
+  if (!interactive_tilemap)
+    throw std::runtime_error("No interactive-tilemap available");
+
+  // add interactive to collision engine
+  collision_engine->add(new CollisionObject(interactive_tilemap));
+
+  // Spawn the Player
+  if(!player) {
+    player = new Player();
+    add(player);
+  }
+  player->set_pos(Vector(300,200));
+}
+
+Sector::~Sector()
+{
+  for(Objects::iterator i = objects.begin(); i != objects.end(); ++i)
+    (*i)->unref();
+  for(Objects::iterator i = new_objects.begin(); i != new_objects.end(); ++i)
+    (*i)->unref();
+
+  delete navigation_graph;
+  delete collision_engine;
+}
+
+void
+Sector::parse_file(const std::string& filename)
+{
+  if (debug) std::cout << "Sector:parse_file '" << filename << "'" << std::endl;
+  
+  FileReader reader = FileReader::parse(filename);
+  if(reader.get_name() != "windstille-sector") {
+    std::ostringstream msg;
+    msg << "'" << filename << "' is not a windstille-sector file";
+    throw std::runtime_error(msg.str());
+  }
+  
+  int version = 1;
+  if(!reader.get("version", version))
+    std::cerr << "Warning no version specified in levelformat.\n";
+  if(version > 1)
+    std::cerr << "Warning: format version is newer than game.\n";
+
+  reader.get("name",          name);
+  reader.get("music",         music);
+  reader.get("init-script",   init_script);
+  reader.get("ambient-color", ambient_light);
+  
+  FileReader objects_reader;
+  if(reader.get("objects", objects_reader) == false)
+    throw std::runtime_error("No objects specified");
+
+  std::vector<FileReader> objects_readers = objects_reader.get_sections();
+  for(std::vector<FileReader>::iterator i = objects_readers.begin(); i != objects_readers.end(); ++i)
+    {
+      add_object(*i);
+    }
+
+  reader.print_unused_warnings("sector");
+  if (debug) std::cout << "Finished parsing" << std::endl;
+}
+
+void
+Sector::add_object(FileReader& reader)
+{
+  if(reader.get_name() == "tilemap") {
+    TileMap* tilemap = new TileMap(reader);
+    add(tilemap);
+    if (tilemap->get_name() == "interactive")
+      interactive_tilemap = tilemap;
+    else if (tilemap->get_name() == "interactivebackground")
+      interactivebackground_tilemap = tilemap;
+  } else if(reader.get_name() == "background") {
+    // TODO
+  } else if (reader.get_name() == "background-gradient") {
+    add(new BackgroundGradient(reader));
+  } else if(reader.get_name() == "trigger") {
+    add(new Trigger(reader));
+  } else if(reader.get_name() == "box") {
+    add(new Box(reader));
+  } else if(reader.get_name() == "shockwave") {
+    add(new Shockwave(reader));
+  } else if(reader.get_name() == "elevator") {
+    add(new Elevator(reader));
+  } else if(reader.get_name() == "character") {    
+    add(new Character(reader));
+  } else if(reader.get_name() == "spider-mine") {
+    add(new SpiderMine(reader));
+  } else if(reader.get_name() == "hedgehog") {
+    add(new Hedgehog(reader));
+  } else if(reader.get_name() == "test-object") {
+    add(new TestObject(reader));
+  } else if (reader.get_name() == "nightvision") {
+    add(new Nightvision(reader));
+  } else if (reader.get_name() == "particle-system") {
+    add(new ParticleSystem(reader));
+  } else if(reader.get_name() == "scriptable-object") {    
+    add(new ScriptableObject(reader));
+  } else if (reader.get_name() == "vrdummy") {
+    add(new VRDummy(reader));
+  } else if (reader.get_name() == "swarm") {
+    add(new Swarm(reader));
+  } else if (reader.get_name() == "laserpointer") {
+    add(new LaserPointer());
+  } else if (reader.get_name() == "liquid") {
+    add(new Liquid(reader));
+  } else {
+    std::cout << "Skipping unknown Object: " << reader.get_name() << "\n";
+  }
+}
+
+void
+Sector::activate()
+{
+  commit_adds();
+  commit_removes();
+
+  sound_manager->play_music(music);
+  if (init_script != "")
+    script_manager->run_script_file(init_script);
+}
+
+void
+Sector::draw(SceneContext& sc)
+{
+  sc.light().fill_screen(ambient_light);
+
+  for(Objects::iterator i = objects.begin(); i != objects.end(); ++i)
+    {
+      if ((*i)->is_active())
+        (*i)->draw(sc);
+    }
+}
+
+void Sector::commit_adds()
+{
+  // Add new game objects
+  for(Objects::iterator i = new_objects.begin(); i != new_objects.end(); ++i) {
+    objects.push_back(*i);
+  }
+  new_objects.clear();
+}
+
+void Sector::update(float delta)
+{
+  commit_adds();
+
+  collision_engine->update(delta);
+
+  for(Objects::iterator i = objects.begin(); i != objects.end(); ++i) {
+    if ((*i)->is_active())
+      (*i)->update(delta);
+  }
+  commit_removes();
+}
+
+void
+Sector::commit_removes()
+{
+  // remove objects
+  for(Objects::iterator i = objects.begin(); i != objects.end(); ) {
+    GameObject* object = *i;
+    if(object->is_removable()) {
+      if(object->get_name() != "") {
+        remove_object_from_squirrel(object);
+      }
+      object->unref();
+
+      i = objects.erase(i);
+      continue;
+    }
+
+    ++i;
+  }
+}
+
+void
+Sector::add(GameObject* obj)
+{
+  new_objects.push_back(obj);
+  obj->ref();
+  if(obj->get_name() != "") {
+    expose_object_to_squirrel(obj);
+  }
+}
+
+void
+Sector::remove_object_from_squirrel(GameObject* object)
+{
+  using namespace scripting;
+
+  // get objects table
+  HSQUIRRELVM v = script_manager->get_vm();
+  sq_pushroottable(v);
+  sq_pushstring(v, OBJECTS_TABLE, -1);
+  if(SQ_FAILED(sq_get(v, -2)))
+  {
+    std::ostringstream msg;
+    msg << "Couldn't get objects table '" << OBJECTS_TABLE << "'";
+    throw SquirrelError(v, msg.str());
+  }
+
+  // remove object from table
+  sq_pushstring(v, object->get_name().c_str(), object->get_name().size());
+  if(SQ_FAILED(sq_deleteslot(v, -2, SQFalse) < 0)) {
+    std::ostringstream msg;
+    msg << "Couldn't remove squirrel object for '" << object->get_name()
+        << "'";
+    throw SquirrelError(v, msg.str());
+  }
+  
+  // pop objects and root table
+  sq_pop(v, 2);
+}
+
+// tries to find out the "real" class of an gameobject by some dynamic casting
+// and creates a matching squirrel instance for that object
+static inline void create_squirrel_instance(HSQUIRRELVM v, GameObject* object)
+{
+  ScriptableObject* script_obj = dynamic_cast<ScriptableObject*> (object);
+  if(script_obj) {
+    create_squirrel_instance(v, new scripting::ScriptableObject(script_obj),
+                             true);
+    return;
+  }
+  
+  TestObject* tobj = dynamic_cast<TestObject*> (object);
+  if(tobj) {
+    create_squirrel_instance(v, new scripting::TestObject(tobj), true);
+    return;
+  }                                                                             
+
+  Player* player = dynamic_cast<Player*> (object);
+  if(player) {
+    create_squirrel_instance(v, new scripting::Player(player), true);
+    return;
+  }
+
+  create_squirrel_instance(v, new scripting::GameObject(object), true);
+}
+
+void
+Sector::expose_object_to_squirrel(GameObject* object)
+{
+  using namespace scripting;
+
+  // get objects table
+  HSQUIRRELVM v = script_manager->get_vm();
+  sq_pushroottable(v);
+  sq_pushstring(v, OBJECTS_TABLE, -1);
+  if(SQ_FAILED(sq_get(v, -2)))
+  {
+    std::ostringstream msg;
+    msg << "Couldn't get objects table '" << OBJECTS_TABLE << "'";
+    throw SquirrelError(v, msg.str());
+  }
+  
+  // create squirrel instance and register in table
+  sq_pushstring(v, object->get_name().c_str(), object->get_name().size());
+  create_squirrel_instance(v, object);
+  if(SQ_FAILED(sq_createslot(v, -3)))
+  {
+    std::ostringstream msg;
+    msg << "Couldn't register object in objects tab?e";
+    throw SquirrelError(v, msg.str());
+  }
+
+  // pop roottable and objects table
+  sq_pop(v, 2);
+}
+
+GameObject*
+Sector::get_object(const std::string& name) const
+{
+  for(Objects::const_iterator i = objects.begin(); i != objects.end(); ++i) 
+    {
+      if ((*i)->get_name() == name)
+        {
+          return *i;
+        }
+    }
+  return 0;
+}
+
+int
+Sector::get_width () const
+{
+  return interactive_tilemap->get_width() * TILE_SIZE;
+}
+
+int
+Sector::get_height () const
+{
+  return interactive_tilemap->get_height() * TILE_SIZE;
+}
+
+void
+Sector::set_tilemap(TileMap* t)
+{
+  interactive_tilemap = t;
+}
+
+void
+Sector::set_ambient_light(const Color& color)
+{
+  ambient_light = color;
+}
+
+Color
+Sector::get_ambient_light() const
+{
+  return ambient_light;
+}
+
+const std::string&
+Sector::get_filename () const
+{
+  return filename;
+}
+
+/* EOF */


Property changes on: trunk/windstille/src/engine/sector.cpp
___________________________________________________________________
Name: svn:keywords
   + Id
Name: svn:mergeinfo
   + 
Name: svn:eol-style
   + native

Copied: trunk/windstille/src/engine/sector.hpp (from rev 2463, trunk/windstille/src/sector.hpp)


Property changes on: trunk/windstille/src/engine/sector.hpp
___________________________________________________________________
Name: svn:keywords
   + Id
Name: svn:mergeinfo
   + 
Name: svn:eol-style
   + native

Deleted: trunk/windstille/src/entity.cpp
===================================================================
--- trunk/windstille/src/entity.cpp	2009-02-11 21:05:03 UTC (rev 2463)
+++ trunk/windstille/src/entity.cpp	2009-02-11 21:22:01 UTC (rev 2464)
@@ -1,63 +0,0 @@
-/*
-**  Windstille - A Sci-Fi Action-Adventure Game
-**  Copyright (C) 2005 Ingo Ruhnke <grumbel at gmx.de>
-**
-**  This program is free software: you can redistribute it and/or modify
-**  it under the terms of the GNU General Public License as published by
-**  the Free Software Foundation, either version 3 of the License, or
-**  (at your option) any later version.
-**  
-**  This program is distributed in the hope that it will be useful,
-**  but WITHOUT ANY WARRANTY; without even the implied warranty of
-**  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
-**  GNU General Public License for more details.
-**  
-**  You should have received a copy of the GNU General Public License
-**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
-*/
-
-#include <assert.h>
-#include "globals.hpp"
-#include "entity.hpp"
-#include "sector.hpp"
-#include "tile/tile_map.hpp"
-
-Entity::Entity()
-  : velocity(0, 0),
-    useable(false)
-{
-  parent = 0;
-}
-
-Entity::~Entity()
-{
-}
-
-void
-Entity::set_pos(Vector pos)
-{
-  this->pos = pos;
-}
-
-bool
-Entity::on_ground() const
-{
-  return get_world ()->get_tilemap()->is_ground(pos.x, pos.y+16);
-}
-
-bool 
-Entity::in_wall() const
-{
-  return get_world ()->get_tilemap()->is_ground(pos.x, pos.y);
-}
-
-void
-Entity::set_parent(Entity* parent_)
-{
-  if (parent_ != this)
-    {
-      parent = parent_;
-    }
-}
-
-/* EOF */

Deleted: trunk/windstille/src/entity.hpp
===================================================================
--- trunk/windstille/src/entity.hpp	2009-02-11 21:05:03 UTC (rev 2463)
+++ trunk/windstille/src/entity.hpp	2009-02-11 21:22:01 UTC (rev 2464)
@@ -1,82 +0,0 @@
-/*
-**  Windstille - A Sci-Fi Action-Adventure Game
-**  Copyright (C) 2005 Ingo Ruhnke <grumbel at gmx.de>
-**
-**  This program is free software: you can redistribute it and/or modify
-**  it under the terms of the GNU General Public License as published by
-**  the Free Software Foundation, either version 3 of the License, or
-**  (at your option) any later version.
-**  
-**  This program is distributed in the hope that it will be useful,
-**  but WITHOUT ANY WARRANTY; without even the implied warranty of
-**  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
-**  GNU General Public License for more details.
-**  
-**  You should have received a copy of the GNU General Public License
-**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
-*/
-
-#ifndef HEADER_WINDSTILLE_ENTITY_HPP
-#define HEADER_WINDSTILLE_ENTITY_HPP
-
-#include <boost/signal.hpp>
-#include "math/vector.hpp"
-#include "game_object.hpp"
-#include "collision/collision_object.hpp"
-
-/** A GameObject which has a position and some other properties which
-    are shared among all/most things in the world */
-class Entity : public GameObject
-{
-private:
-  boost::signal<void ()> done; 
-
-protected:
-  friend class Physics;
-  bool on_ground() const;
-  bool in_wall() const;
-  
-  Vector pos;
-  Vector velocity;
-  bool useable;
-  std::string use_verb;
-  
-  Entity* parent;
-public:
-  Entity();
-  virtual ~Entity();
-   
-  virtual Vector get_pos() const
-  { return pos; }
-
-  virtual void set_pos(Vector pos);
-
-  /** Called once per frame to allow the object to draw itself */
-  virtual void draw(SceneContext& gc) = 0;
-
-  /** Called, possible multiple times, per frame to let the object
-      update its position and properties */
-  virtual void update(float delta) = 0;
-
-  /** Called when the player uses this entity */
-  virtual void use() {}
-
-  /** Returns true if the entity is useable by the player */
-  virtual bool is_useable() const { return useable; }
-  std::string get_use_verb() const { return use_verb; }
-
-  /** Makes the objects (un)usable for the player */
-  void set_useable(bool t) { useable = t; }
-
-  void set_parent(Entity* parent_);
-
-  boost::signal<void ()>& sig_done() { return done; }
-
-private:
-  Entity (const Entity&);
-  Entity& operator= (const Entity&);
-};
-
-#endif
-
-/* EOF */

Deleted: trunk/windstille/src/game_object.cpp
===================================================================
--- trunk/windstille/src/game_object.cpp	2009-02-11 21:05:03 UTC (rev 2463)
+++ trunk/windstille/src/game_object.cpp	2009-02-11 21:22:01 UTC (rev 2464)
@@ -1,25 +0,0 @@
-/*
-**  Windstille - A Sci-Fi Action-Adventure Game
-**  Copyright (C) 2000 Ingo Ruhnke <grumbel at gmx.de>
-**
-**  This program is free software: you can redistribute it and/or modify
-**  it under the terms of the GNU General Public License as published by
-**  the Free Software Foundation, either version 3 of the License, or
-**  (at your option) any later version.
-**  
-**  This program is distributed in the hope that it will be useful,
-**  but WITHOUT ANY WARRANTY; without even the implied warranty of
-**  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
-**  GNU General Public License for more details.
-**  
-**  You should have received a copy of the GNU General Public License
-**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
-*/
-
-#include "game_object.hpp"
-#include "sector.hpp"
-
-Sector* GameObject::world;
-
-
-/* EOF */

Deleted: trunk/windstille/src/game_object.hpp
===================================================================
--- trunk/windstille/src/game_object.hpp	2009-02-11 21:05:03 UTC (rev 2463)
+++ trunk/windstille/src/game_object.hpp	2009-02-11 21:22:01 UTC (rev 2464)
@@ -1,108 +0,0 @@
-/*
-**  Windstille - A Sci-Fi Action-Adventure Game
-**  Copyright (C) 2000 Ingo Ruhnke <grumbel at gmx.de>
-**
-**  This program is free software: you can redistribute it and/or modify
-**  it under the terms of the GNU General Public License as published by
-**  the Free Software Foundation, either version 3 of the License, or
-**  (at your option) any later version.
-**  
-**  This program is distributed in the hope that it will be useful,
-**  but WITHOUT ANY WARRANTY; without even the implied warranty of
-**  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
-**  GNU General Public License for more details.
-**  
-**  You should have received a copy of the GNU General Public License
-**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
-*/
-
-#ifndef HEADER_WINDSTILLE_GAME_OBJECT_HPP
-#define HEADER_WINDSTILLE_GAME_OBJECT_HPP
-
-#include <string>
-#include "file_reader.hpp"
-#include "display/scene_context.hpp"
-#include "refcounter.hpp"
-
-class Sector;
-
-/**
- * This is the base class for all in-game objects. The sector class keeps a list
- * of all GameObject and periodically calls draw() and update() for them.
- */
-class GameObject : public RefCounter
-{
-private:
-  static Sector* world;
-  
-protected:
-  bool remove_flag;
-
-  /**
-   * name of the GameObject. Note: You should not change it anymore once the
-   * object has been added to a Sector
-   */
-  std::string name;
-
-  /** If a object is 'active = false' it will neither be drawn or updated */
-  bool active;
-public:
-  GameObject() : remove_flag(false), active(true) {}
-  virtual ~GameObject() {}
-
-  /**
-   * Set the remove flag to true which will result in the object being removed
-   * from the world till the next frame
-   */
-  void remove()
-  {
-    remove_flag = true;
-  }
-  /**
-   * Returns the state of the remove flag
-   */
-  bool is_removable() const
-  {
-    return remove_flag;
-  }
-
-  /**
-   * return the name of the object
-   * The name is guaranteed to stay the same during the whole lifetime of
-   * the object
-   */
-  const std::string& get_name() const
-  {
-    return name;
-  }
-
-  /**
-   * Activate or Deactivate an object. A deactivated object is not updated
-   * or drawn until it is activated again
-   */
-  void set_active(bool a) { active = a; }
-  /**
-   * Returns true if the object is active, false if it is inactive
-   */
-  bool is_active() const { return active; }
-
-  /**
-   * The object should draw itself when this function is called
-   */
-  virtual void draw (SceneContext& context) = 0;
-  /**
-   * This function is called from time to time to give the object a chance to
-   * update it's state. delta is the time that elapsed since the last
-   * update call in seconds. It is possible that there are multiple objects
-   * between 2 draw() calls or multiple draw() calls between 2 updates
-   */
-  virtual void update (float delta) = 0;
-    
-  static void set_world (Sector* w) { world = w; }
-  Sector* get_world () const
-  { return world; }
-};
-
-#endif
-
-/* EOF */

Modified: trunk/windstille/src/game_session.cpp
===================================================================
--- trunk/windstille/src/game_session.cpp	2009-02-11 21:05:03 UTC (rev 2463)
+++ trunk/windstille/src/game_session.cpp	2009-02-11 21:22:01 UTC (rev 2464)
@@ -26,9 +26,9 @@
 
 #include "menu_manager.hpp"
 #include "font/fonts.hpp"
-#include "sector.hpp"
+#include "engine/sector.hpp"
 #include "console.hpp"
-#include "game_object.hpp"
+#include "engine/game_object.hpp"
 #include "objects/player.hpp"
 #include "tile/tile_map.hpp"
 #include "screen_manager.hpp"
@@ -44,7 +44,7 @@
 #include "particles/particle_system.hpp"
 #include "particles/spark_drawer.hpp"
 #include "particles/surface_drawer.hpp"
-#include "script_manager.hpp"
+#include "engine/script_manager.hpp"
 #include "sound/sound_manager.hpp"
 #include "conversation.hpp"
 #include "collision/collision_engine.hpp"

Modified: trunk/windstille/src/gui/automap.cpp
===================================================================
--- trunk/windstille/src/gui/automap.cpp	2009-02-11 21:05:03 UTC (rev 2463)
+++ trunk/windstille/src/gui/automap.cpp	2009-02-11 21:22:01 UTC (rev 2464)
@@ -18,7 +18,7 @@
 
 #include "display/surface_drawing_parameters.hpp"
 #include "input/controller.hpp"
-#include "sector.hpp"
+#include "engine/sector.hpp"
 #include "tile/tile_map.hpp"
 #include "display/display.hpp"
 #include "automap.hpp"

Deleted: trunk/windstille/src/laser_pointer.cpp
===================================================================
--- trunk/windstille/src/laser_pointer.cpp	2009-02-11 21:05:03 UTC (rev 2463)
+++ trunk/windstille/src/laser_pointer.cpp	2009-02-11 21:22:01 UTC (rev 2464)
@@ -1,150 +0,0 @@
-/*
-**  Windstille - A Sci-Fi Action-Adventure Game
-**  Copyright (C) 2005 Ingo Ruhnke <grumbel at gmx.de>
-**
-**  This program is free software: you can redistribute it and/or modify
-**  it under the terms of the GNU General Public License as published by
-**  the Free Software Foundation, either version 3 of the License, or
-**  (at your option) any later version.
-**  
-**  This program is distributed in the hope that it will be useful,
-**  but WITHOUT ANY WARRANTY; without even the implied warranty of
-**  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
-**  GNU General Public License for more details.
-**  
-**  You should have received a copy of the GNU General Public License
-**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
-*/
-#include <config.h>
-
-#include "display/vertex_array_drawing_request.hpp"
-#include "objects/player.hpp"
-#include "collision/collision_engine.hpp"
-#include "sector.hpp"
-#include "tile/tile_map.hpp"
-#include "laser_pointer.hpp"
-
-LaserPointer::LaserPointer()
-{
-  noise = Texture("images/noise2.png");
-  laserpointer = Sprite("images/laserpointer.sprite");
-  laserpointer_light = Sprite("images/laserpointer_light.sprite");
-  laserpointer_light.set_blend_func(GL_SRC_ALPHA, GL_ONE);
-  noise.set_wrap(GL_REPEAT);
-  noise.set_filter(GL_LINEAR);
-  
-  progress = 0.0f;
-  angle = 0.0f;
-}
-
-LaserPointer::~LaserPointer()
-{
-}
-
-static float find_max(float pos, float v)
-{
-  if (v == 0) 
-    return 0;
-  else if (v < 0)
-    return fmodf(fmodf(pos, TILE_SIZE) + TILE_SIZE, TILE_SIZE)/fabsf(v);
-  else // if (v > 0)
-    {
-      return fmodf(fmodf(-pos, TILE_SIZE) + TILE_SIZE, TILE_SIZE)/v;
-    }
-}
-
-void
-LaserPointer::draw(SceneContext& sc)
-{
-  TileMap* tilemap = Sector::current()->get_tilemap();
-  Vector pos = Player::current()->get_pos();
-  pos.y -= 80;
-  Vector target; // = Sector::current()->get_collision_engine()->raycast(pos, angle);
-
-  // Ray position in Tile units
-  int x = static_cast<int>(pos.x / TILE_SIZE);
-  int y = static_cast<int>(pos.y / TILE_SIZE);
-
-  Vector direction(cos(angle) * 100.0f, sin(angle) * 100.0f);
-
-  int step_x = (direction.x > 0) ? 1 : -1;
-  int step_y = (direction.y > 0) ? 1 : -1;
-
-  float tMaxX = find_max(pos.x, direction.x);
-  float tMaxY = find_max(pos.y, direction.y);
-
-  float tDeltaX = (direction.x == 0) ? 0 : fabsf(TILE_SIZE / direction.x);
-  float tDeltaY = (direction.y == 0) ? 0 : fabsf(TILE_SIZE / direction.y);
-
-  float t = 0;
-
-  while(x >= 0 && x < tilemap->get_width() &&
-        y >= 0 && y < tilemap->get_height())
-    {
-      //sc.color().fill_rect(Rectf(Vector(x * TILE_SIZE, y * TILE_SIZE), Size(TILE_SIZE, TILE_SIZE)), 
-      //                     Color(1.0, 1.0, 1.0, 0.5), 500);
-
-      if (tilemap->get_pixel(x, y))
-        {
-          //return Vector(x * TILE_SIZE, y * TILE_SIZE);
-          goto done;
-        }
-
-      // move one tile
-      if (tMaxX < tMaxY)
-        {
-          t = tMaxX;
-          tMaxX += tDeltaX;
-          x = x + step_x;
-        }
-      else 
-        {
-          t = tMaxY;
-          tMaxY += tDeltaY;
-          y = y + step_y;
-        }
-    }
-  
- done:
-  target = pos + Vector(t * direction.x, t * direction.y);
-  
-  Vector ray = target - pos;
-  VertexArrayDrawingRequest* array = new VertexArrayDrawingRequest(Vector(0,0), 10000,
-                                                                   sc.highlight().get_modelview());
-  array->set_mode(GL_LINES);
-  array->set_texture(noise);
-  array->set_blend_func(GL_SRC_ALPHA, GL_ONE);
-
-  array->color(Color(1.0f, 0.0f, 0.0f, 1.0f));
-  array->texcoord(0, progress);
-  array->vertex(0, 0);
-
-  array->color(Color(1.0f, 0.0f, 0.0f, 1.0f));
-  array->texcoord((target - pos).magnitude()/256.0f, progress);
-  array->vertex(ray.x, ray.y);
-
-  sc.highlight().draw(array);
-  laserpointer.set_blend_func(GL_SRC_ALPHA, GL_ONE);
-  sc.highlight().draw(laserpointer, ray);
-  sc.light().draw(laserpointer_light, ray);
-}
-
-void
-LaserPointer::update(float delta)
-{
-  progress += 0.1 * delta;
-}
-
-float
-LaserPointer::get_angle() const
-{
-  return angle;
-}
-
-void
-LaserPointer::set_angle(float a)
-{
-  angle = a;
-}
-
-/* EOF */

Deleted: trunk/windstille/src/laser_pointer.hpp
===================================================================
--- trunk/windstille/src/laser_pointer.hpp	2009-02-11 21:05:03 UTC (rev 2463)
+++ trunk/windstille/src/laser_pointer.hpp	2009-02-11 21:22:01 UTC (rev 2464)
@@ -1,52 +0,0 @@
-/*
-**  Windstille - A Sci-Fi Action-Adventure Game
-**  Copyright (C) 2005 Ingo Ruhnke <grumbel at gmx.de>
-**
-**  This program is free software: you can redistribute it and/or modify
-**  it under the terms of the GNU General Public License as published by
-**  the Free Software Foundation, either version 3 of the License, or
-**  (at your option) any later version.
-**  
-**  This program is distributed in the hope that it will be useful,
-**  but WITHOUT ANY WARRANTY; without even the implied warranty of
-**  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
-**  GNU General Public License for more details.
-**  
-**  You should have received a copy of the GNU General Public License
-**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
-*/
-
-#ifndef HEADER_WINDSTILLE_LASER_POINTER_HPP
-#define HEADER_WINDSTILLE_LASER_POINTER_HPP
-
-#include "sprite2d/sprite.hpp"
-#include "display/texture.hpp"
-#include "game_object.hpp"
-
-/** Simple class that generates a laser for pointing at objects */
-class LaserPointer : public GameObject
-{
-private:
-  Texture noise;
-  Sprite  laserpointer;
-  Sprite  laserpointer_light;
-  float   progress;
-  float   angle;
-
-public:
-  LaserPointer();
-  ~LaserPointer();
-
-  void draw(SceneContext& sc);
-  void update(float delta);
-
-  float get_angle() const;
-  void  set_angle(float angle);
-private:
-  LaserPointer (const LaserPointer&);
-  LaserPointer& operator= (const LaserPointer&);
-};
-
-#endif
-
-/* EOF */

Modified: trunk/windstille/src/menu_manager.cpp
===================================================================
--- trunk/windstille/src/menu_manager.cpp	2009-02-11 21:05:03 UTC (rev 2463)
+++ trunk/windstille/src/menu_manager.cpp	2009-02-11 21:22:01 UTC (rev 2464)
@@ -30,7 +30,7 @@
 #include "gui/text_view.hpp"
 #include "particle_viewer.hpp"
 #include "screen_manager.hpp"
-#include "sector.hpp"
+#include "engine/sector.hpp"
 #include "sprite3d/manager.hpp"
 #include "sprite3dview.hpp"
 #include "geometry_test.hpp"

Modified: trunk/windstille/src/objects/background_gradient.hpp
===================================================================
--- trunk/windstille/src/objects/background_gradient.hpp	2009-02-11 21:05:03 UTC (rev 2463)
+++ trunk/windstille/src/objects/background_gradient.hpp	2009-02-11 21:22:01 UTC (rev 2464)
@@ -19,7 +19,7 @@
 #ifndef HEADER_WINDSTILLE_OBJECTS_BACKGROUND_GRADIENT_HPP
 #define HEADER_WINDSTILLE_OBJECTS_BACKGROUND_GRADIENT_HPP
 
-#include "game_object.hpp"
+#include "engine/game_object.hpp"
 
 /** */
 class BackgroundGradient : public GameObject

Modified: trunk/windstille/src/objects/bomb.cpp
===================================================================
--- trunk/windstille/src/objects/bomb.cpp	2009-02-11 21:05:03 UTC (rev 2463)
+++ trunk/windstille/src/objects/bomb.cpp	2009-02-11 21:22:01 UTC (rev 2464)
@@ -17,7 +17,7 @@
 */
 
 #include "globals.hpp"
-#include "sector.hpp"
+#include "engine/sector.hpp"
 #include "bomb.hpp"
 
 Bomb::Bomb(int x, int y)

Modified: trunk/windstille/src/objects/bomb.hpp
===================================================================
--- trunk/windstille/src/objects/bomb.hpp	2009-02-11 21:05:03 UTC (rev 2463)
+++ trunk/windstille/src/objects/bomb.hpp	2009-02-11 21:22:01 UTC (rev 2464)
@@ -20,7 +20,7 @@
 #define HEADER_WINDSTILLE_OBJECTS_BOMB_HPP
 
 #include "sprite2d/sprite.hpp"
-#include "game_object.hpp"
+#include "engine/game_object.hpp"
 
 /** */
 class Bomb : public GameObject

Modified: trunk/windstille/src/objects/box.hpp
===================================================================
--- trunk/windstille/src/objects/box.hpp	2009-02-11 21:05:03 UTC (rev 2463)
+++ trunk/windstille/src/objects/box.hpp	2009-02-11 21:22:01 UTC (rev 2464)
@@ -19,9 +19,9 @@
 #ifndef HEADER_WINDSTILLE_BOX_HPP
 #define HEADER_WINDSTILLE_BOX_HPP
 
-#include "entity.hpp"
+#include "engine/entity.hpp"
 #include "collision/collision_object.hpp"
-#include "sector.hpp"
+#include "engine/sector.hpp"
 #include "particles/particle_system.hpp"
 #include "sprite2d/sprite.hpp"
 

Modified: trunk/windstille/src/objects/character.cpp
===================================================================
--- trunk/windstille/src/objects/character.cpp	2009-02-11 21:05:03 UTC (rev 2463)
+++ trunk/windstille/src/objects/character.cpp	2009-02-11 21:22:01 UTC (rev 2464)
@@ -17,11 +17,11 @@
 */
 
 #include "character.hpp"
-#include "sector.hpp"
+#include "engine/sector.hpp"
 #include "game_session.hpp"
 #include "scripting/wrapper.interface.hpp"
 #include "dialog_manager.hpp"
-#include "script_manager.hpp"
+#include "engine/script_manager.hpp"
 #include "physfs/physfs_stream.hpp"
 #include "console.hpp"
 #include "sprite3d/manager.hpp"

Modified: trunk/windstille/src/objects/character.hpp
===================================================================
--- trunk/windstille/src/objects/character.hpp	2009-02-11 21:05:03 UTC (rev 2463)
+++ trunk/windstille/src/objects/character.hpp	2009-02-11 21:22:01 UTC (rev 2464)
@@ -19,7 +19,7 @@
 #ifndef HEADER_WINDSTILLE_CHARACTER_HPP
 #define HEADER_WINDSTILLE_CHARACTER_HPP
 
-#include "entity.hpp"
+#include "engine/entity.hpp"
 #include "sprite3d/sprite3d.hpp"
 
 class Character : public Entity

Modified: trunk/windstille/src/objects/elevator.cpp
===================================================================
--- trunk/windstille/src/objects/elevator.cpp	2009-02-11 21:05:03 UTC (rev 2463)
+++ trunk/windstille/src/objects/elevator.cpp	2009-02-11 21:22:01 UTC (rev 2464)
@@ -18,7 +18,7 @@
 
 #include <stdexcept>
 #include "elevator.hpp"
-#include "sector.hpp"
+#include "engine/sector.hpp"
 #include "collision/collision_engine.hpp"
 #include "sprite2d/manager.hpp"
 

Modified: trunk/windstille/src/objects/elevator.hpp
===================================================================
--- trunk/windstille/src/objects/elevator.hpp	2009-02-11 21:05:03 UTC (rev 2463)
+++ trunk/windstille/src/objects/elevator.hpp	2009-02-11 21:22:01 UTC (rev 2464)
@@ -19,7 +19,7 @@
 #ifndef HEADER_WINDSTILLE_ELEVATOR_HPP
 #define HEADER_WINDSTILLE_ELEVATOR_HPP
 
-#include "entity.hpp"
+#include "engine/entity.hpp"
 #include "sprite2d/sprite.hpp"
 
 /** */

Modified: trunk/windstille/src/objects/grenade.cpp
===================================================================
--- trunk/windstille/src/objects/grenade.cpp	2009-02-11 21:05:03 UTC (rev 2463)
+++ trunk/windstille/src/objects/grenade.cpp	2009-02-11 21:22:01 UTC (rev 2464)
@@ -16,9 +16,9 @@
 **  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
+#include "engine/sector.hpp"
+#include "collision/collision_engine.hpp"
 #include "grenade.hpp"
-#include "sector.hpp"
-#include "collision/collision_engine.hpp"
 
 Grenade::Grenade()
   : sprite("models/objects/grenade/grenade.wsprite"), physics(this)

Modified: trunk/windstille/src/objects/grenade.hpp
===================================================================
--- trunk/windstille/src/objects/grenade.hpp	2009-02-11 21:05:03 UTC (rev 2463)
+++ trunk/windstille/src/objects/grenade.hpp	2009-02-11 21:22:01 UTC (rev 2464)
@@ -18,8 +18,8 @@
 #ifndef HEADER_WINDSTILLE_GRENADE_HPP
 #define HEADER_WINDSTILLE_GRENADE_HPP
 
-#include "entity.hpp"
-#include "physics.hpp"
+#include "engine/entity.hpp"
+#include "engine/physics.hpp"
 #include "sprite3d/sprite3d.hpp"
 #include <memory>
 

Modified: trunk/windstille/src/objects/hedgehog.cpp
===================================================================
--- trunk/windstille/src/objects/hedgehog.cpp	2009-02-11 21:05:03 UTC (rev 2463)
+++ trunk/windstille/src/objects/hedgehog.cpp	2009-02-11 21:22:01 UTC (rev 2464)
@@ -18,7 +18,7 @@
 
 #include "globals.hpp"
 #include "player.hpp"
-#include "sector.hpp"
+#include "engine/sector.hpp"
 #include "hedgehog.hpp"
 
 Hedgehog::Hedgehog(FileReader& props)

Modified: trunk/windstille/src/objects/hedgehog.hpp
===================================================================
--- trunk/windstille/src/objects/hedgehog.hpp	2009-02-11 21:05:03 UTC (rev 2463)
+++ trunk/windstille/src/objects/hedgehog.hpp	2009-02-11 21:22:01 UTC (rev 2464)
@@ -19,7 +19,7 @@
 #ifndef HEADER_WINDSTILLE_OBJECTS_HEDGEHOG_HPP
 #define HEADER_WINDSTILLE_OBJECTS_HEDGEHOG_HPP
 
-#include "game_object.hpp"
+#include "engine/game_object.hpp"
 
 class Hedgehog : public Entity
 {

Copied: trunk/windstille/src/objects/laser_pointer.cpp (from rev 2463, trunk/windstille/src/laser_pointer.cpp)
===================================================================
--- trunk/windstille/src/laser_pointer.cpp	2009-02-11 21:05:03 UTC (rev 2463)
+++ trunk/windstille/src/objects/laser_pointer.cpp	2009-02-11 21:22:01 UTC (rev 2464)
@@ -0,0 +1,150 @@
+/*
+**  Windstille - A Sci-Fi Action-Adventure Game
+**  Copyright (C) 2005 Ingo Ruhnke <grumbel at gmx.de>
+**
+**  This program is free software: you can redistribute it and/or modify
+**  it under the terms of the GNU General Public License as published by
+**  the Free Software Foundation, either version 3 of the License, or
+**  (at your option) any later version.
+**  
+**  This program is distributed in the hope that it will be useful,
+**  but WITHOUT ANY WARRANTY; without even the implied warranty of
+**  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+**  GNU General Public License for more details.
+**  
+**  You should have received a copy of the GNU General Public License
+**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
+*/
+#include <config.h>
+
+#include "display/vertex_array_drawing_request.hpp"
+#include "objects/player.hpp"
+#include "collision/collision_engine.hpp"
+#include "engine/sector.hpp"
+#include "tile/tile_map.hpp"
+#include "laser_pointer.hpp"
+
+LaserPointer::LaserPointer()
+{
+  noise = Texture("images/noise2.png");
+  laserpointer = Sprite("images/laserpointer.sprite");
+  laserpointer_light = Sprite("images/laserpointer_light.sprite");
+  laserpointer_light.set_blend_func(GL_SRC_ALPHA, GL_ONE);
+  noise.set_wrap(GL_REPEAT);
+  noise.set_filter(GL_LINEAR);
+  
+  progress = 0.0f;
+  angle = 0.0f;
+}
+
+LaserPointer::~LaserPointer()
+{
+}
+
+static float find_max(float pos, float v)
+{
+  if (v == 0) 
+    return 0;
+  else if (v < 0)
+    return fmodf(fmodf(pos, TILE_SIZE) + TILE_SIZE, TILE_SIZE)/fabsf(v);
+  else // if (v > 0)
+    {
+      return fmodf(fmodf(-pos, TILE_SIZE) + TILE_SIZE, TILE_SIZE)/v;
+    }
+}
+
+void
+LaserPointer::draw(SceneContext& sc)
+{
+  TileMap* tilemap = Sector::current()->get_tilemap();
+  Vector pos = Player::current()->get_pos();
+  pos.y -= 80;
+  Vector target; // = Sector::current()->get_collision_engine()->raycast(pos, angle);
+
+  // Ray position in Tile units
+  int x = static_cast<int>(pos.x / TILE_SIZE);
+  int y = static_cast<int>(pos.y / TILE_SIZE);
+
+  Vector direction(cos(angle) * 100.0f, sin(angle) * 100.0f);
+
+  int step_x = (direction.x > 0) ? 1 : -1;
+  int step_y = (direction.y > 0) ? 1 : -1;
+
+  float tMaxX = find_max(pos.x, direction.x);
+  float tMaxY = find_max(pos.y, direction.y);
+
+  float tDeltaX = (direction.x == 0) ? 0 : fabsf(TILE_SIZE / direction.x);
+  float tDeltaY = (direction.y == 0) ? 0 : fabsf(TILE_SIZE / direction.y);
+
+  float t = 0;
+
+  while(x >= 0 && x < tilemap->get_width() &&
+        y >= 0 && y < tilemap->get_height())
+    {
+      //sc.color().fill_rect(Rectf(Vector(x * TILE_SIZE, y * TILE_SIZE), Size(TILE_SIZE, TILE_SIZE)), 
+      //                     Color(1.0, 1.0, 1.0, 0.5), 500);
+
+      if (tilemap->get_pixel(x, y))
+        {
+          //return Vector(x * TILE_SIZE, y * TILE_SIZE);
+          goto done;
+        }
+
+      // move one tile
+      if (tMaxX < tMaxY)
+        {
+          t = tMaxX;
+          tMaxX += tDeltaX;
+          x = x + step_x;
+        }
+      else 
+        {
+          t = tMaxY;
+          tMaxY += tDeltaY;
+          y = y + step_y;
+        }
+    }
+  
+ done:
+  target = pos + Vector(t * direction.x, t * direction.y);
+  
+  Vector ray = target - pos;
+  VertexArrayDrawingRequest* array = new VertexArrayDrawingRequest(Vector(0,0), 10000,
+                                                                   sc.highlight().get_modelview());
+  array->set_mode(GL_LINES);
+  array->set_texture(noise);
+  array->set_blend_func(GL_SRC_ALPHA, GL_ONE);
+
+  array->color(Color(1.0f, 0.0f, 0.0f, 1.0f));
+  array->texcoord(0, progress);
+  array->vertex(0, 0);
+
+  array->color(Color(1.0f, 0.0f, 0.0f, 1.0f));
+  array->texcoord((target - pos).magnitude()/256.0f, progress);
+  array->vertex(ray.x, ray.y);
+
+  sc.highlight().draw(array);
+  laserpointer.set_blend_func(GL_SRC_ALPHA, GL_ONE);
+  sc.highlight().draw(laserpointer, ray);
+  sc.light().draw(laserpointer_light, ray);
+}
+
+void
+LaserPointer::update(float delta)
+{
+  progress += 0.1 * delta;
+}
+
+float
+LaserPointer::get_angle() const
+{
+  return angle;
+}
+
+void
+LaserPointer::set_angle(float a)
+{
+  angle = a;
+}
+
+/* EOF */


Property changes on: trunk/windstille/src/objects/laser_pointer.cpp
___________________________________________________________________
Name: svn:mergeinfo
   + 

Copied: trunk/windstille/src/objects/laser_pointer.hpp (from rev 2463, trunk/windstille/src/laser_pointer.hpp)
===================================================================
--- trunk/windstille/src/laser_pointer.hpp	2009-02-11 21:05:03 UTC (rev 2463)
+++ trunk/windstille/src/objects/laser_pointer.hpp	2009-02-11 21:22:01 UTC (rev 2464)
@@ -0,0 +1,52 @@
+/*
+**  Windstille - A Sci-Fi Action-Adventure Game
+**  Copyright (C) 2005 Ingo Ruhnke <grumbel at gmx.de>
+**
+**  This program is free software: you can redistribute it and/or modify
+**  it under the terms of the GNU General Public License as published by
+**  the Free Software Foundation, either version 3 of the License, or
+**  (at your option) any later version.
+**  
+**  This program is distributed in the hope that it will be useful,
+**  but WITHOUT ANY WARRANTY; without even the implied warranty of
+**  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+**  GNU General Public License for more details.
+**  
+**  You should have received a copy of the GNU General Public License
+**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
+*/
+
+#ifndef HEADER_WINDSTILLE_LASER_POINTER_HPP
+#define HEADER_WINDSTILLE_LASER_POINTER_HPP
+
+#include "sprite2d/sprite.hpp"
+#include "display/texture.hpp"
+#include "engine/game_object.hpp"
+
+/** Simple class that generates a laser for pointing at objects */
+class LaserPointer : public GameObject
+{
+private:
+  Texture noise;
+  Sprite  laserpointer;
+  Sprite  laserpointer_light;
+  float   progress;
+  float   angle;
+
+public:
+  LaserPointer();
+  ~LaserPointer();
+
+  void draw(SceneContext& sc);
+  void update(float delta);
+
+  float get_angle() const;
+  void  set_angle(float angle);
+private:
+  LaserPointer (const LaserPointer&);
+  LaserPointer& operator= (const LaserPointer&);
+};
+
+#endif
+
+/* EOF */


Property changes on: trunk/windstille/src/objects/laser_pointer.hpp
___________________________________________________________________
Name: svn:mergeinfo
   + 

Modified: trunk/windstille/src/objects/liquid.hpp
===================================================================
--- trunk/windstille/src/objects/liquid.hpp	2009-02-11 21:05:03 UTC (rev 2463)
+++ trunk/windstille/src/objects/liquid.hpp	2009-02-11 21:22:01 UTC (rev 2464)
@@ -20,7 +20,7 @@
 #define HEADER_WINDSTILLE_LIQUID_HPP
 
 #include <vector>
-#include "entity.hpp"
+#include "engine/entity.hpp"
 
 /** */
 class Liquid : public Entity

Modified: trunk/windstille/src/objects/nightvision.hpp
===================================================================
--- trunk/windstille/src/objects/nightvision.hpp	2009-02-11 21:05:03 UTC (rev 2463)
+++ trunk/windstille/src/objects/nightvision.hpp	2009-02-11 21:22:01 UTC (rev 2464)
@@ -21,7 +21,7 @@
 
 #include "display/texture.hpp"
 #include "sprite2d/sprite.hpp"
-#include "game_object.hpp"
+#include "engine/game_object.hpp"
 
 // FIXME: shouldn't really be a game object, but makes testing easier
 class Nightvision : public GameObject

Copied: trunk/windstille/src/objects/pistol.cpp (from rev 2463, trunk/windstille/src/pistol.cpp)


Property changes on: trunk/windstille/src/objects/pistol.cpp
___________________________________________________________________
Name: svn:mergeinfo
   + 

Copied: trunk/windstille/src/objects/pistol.hpp (from rev 2463, trunk/windstille/src/pistol.hpp)


Property changes on: trunk/windstille/src/objects/pistol.hpp
___________________________________________________________________
Name: svn:mergeinfo
   + 

Modified: trunk/windstille/src/objects/player.cpp
===================================================================
--- trunk/windstille/src/objects/player.cpp	2009-02-11 21:05:03 UTC (rev 2463)
+++ trunk/windstille/src/objects/player.cpp	2009-02-11 21:22:01 UTC (rev 2464)
@@ -18,7 +18,7 @@
 
 #include <boost/bind.hpp>
 #include "tile/tile_map.hpp"
-#include "sector.hpp"
+#include "engine/sector.hpp"
 #include "input/controller.hpp"
 #include "input/input_manager.hpp"
 #include "controller_def.hpp"

Modified: trunk/windstille/src/objects/player.hpp
===================================================================
--- trunk/windstille/src/objects/player.hpp	2009-02-11 21:05:03 UTC (rev 2463)
+++ trunk/windstille/src/objects/player.hpp	2009-02-11 21:22:01 UTC (rev 2464)
@@ -26,7 +26,7 @@
 #include "sound/sound_source.hpp"
 #include "math/vector.hpp"
 #include "globals.hpp"
-#include "entity.hpp"
+#include "engine/entity.hpp"
 #include "ref.hpp"
 #include "display/surface.hpp"
 

Modified: trunk/windstille/src/objects/scriptable_object.cpp
===================================================================
--- trunk/windstille/src/objects/scriptable_object.cpp	2009-02-11 21:05:03 UTC (rev 2463)
+++ trunk/windstille/src/objects/scriptable_object.cpp	2009-02-11 21:22:01 UTC (rev 2464)
@@ -20,7 +20,7 @@
 #include "globals.hpp"
 #include "scriptable_object.hpp"
 #include "sprite2d/manager.hpp"
-#include "script_manager.hpp"
+#include "engine/script_manager.hpp"
 
 ScriptableObject::ScriptableObject(FileReader& props)
   : z_pos(50),

Modified: trunk/windstille/src/objects/scriptable_object.hpp
===================================================================
--- trunk/windstille/src/objects/scriptable_object.hpp	2009-02-11 21:05:03 UTC (rev 2463)
+++ trunk/windstille/src/objects/scriptable_object.hpp	2009-02-11 21:22:01 UTC (rev 2464)
@@ -21,7 +21,7 @@
 #define HEADER_WINDSTILLE_SCRIPTABLE_OBJECT_HPP
 
 #include <string>
-#include "entity.hpp"
+#include "engine/entity.hpp"
 #include "sprite2d/sprite.hpp"
 
 /** Can represent any generic object that the player may see or interact with that

Modified: trunk/windstille/src/objects/shockwave.hpp
===================================================================
--- trunk/windstille/src/objects/shockwave.hpp	2009-02-11 21:05:03 UTC (rev 2463)
+++ trunk/windstille/src/objects/shockwave.hpp	2009-02-11 21:22:01 UTC (rev 2464)
@@ -21,7 +21,7 @@
 
 #include "display/shader_program.hpp"
 #include "display/texture.hpp"
-#include "game_object.hpp"
+#include "engine/game_object.hpp"
 
 /** */
 class Shockwave : public GameObject

Modified: trunk/windstille/src/objects/spider_mine.hpp
===================================================================
--- trunk/windstille/src/objects/spider_mine.hpp	2009-02-11 21:05:03 UTC (rev 2463)
+++ trunk/windstille/src/objects/spider_mine.hpp	2009-02-11 21:22:01 UTC (rev 2464)
@@ -19,7 +19,7 @@
 #ifndef HEADER_WINDSTILLE_OBJECTS_SPIDER_MINE_HPP
 #define HEADER_WINDSTILLE_OBJECTS_SPIDER_MINE_HPP
 
-#include "entity.hpp"
+#include "engine/entity.hpp"
 #include "sprite2d/sprite.hpp"
 
 class SpiderMine : public Entity

Modified: trunk/windstille/src/objects/swarm.cpp
===================================================================
--- trunk/windstille/src/objects/swarm.cpp	2009-02-11 21:05:03 UTC (rev 2463)
+++ trunk/windstille/src/objects/swarm.cpp	2009-02-11 21:22:01 UTC (rev 2464)
@@ -18,7 +18,7 @@
 
 #include "globals.hpp"
 #include "player.hpp"
-#include "sector.hpp"
+#include "engine/sector.hpp"
 #include "hedgehog.hpp"
 #include "game_session.hpp"
 #include "view.hpp"

Modified: trunk/windstille/src/objects/swarm.hpp
===================================================================
--- trunk/windstille/src/objects/swarm.hpp	2009-02-11 21:05:03 UTC (rev 2463)
+++ trunk/windstille/src/objects/swarm.hpp	2009-02-11 21:22:01 UTC (rev 2464)
@@ -19,7 +19,7 @@
 #ifndef HEADER_WINDSTILLE_OBJECTS_SWARM_HPP
 #define HEADER_WINDSTILLE_OBJECTS_SWARM_HPP
 
-#include "entity.hpp"
+#include "engine/entity.hpp"
 
 class SwarmAgent
 {

Modified: trunk/windstille/src/objects/test_object.hpp
===================================================================
--- trunk/windstille/src/objects/test_object.hpp	2009-02-11 21:05:03 UTC (rev 2463)
+++ trunk/windstille/src/objects/test_object.hpp	2009-02-11 21:22:01 UTC (rev 2464)
@@ -20,7 +20,7 @@
 #define HEADER_WINDSTILLE_OBJECTS_TEST_OBJECT_HPP
 
 #include <vector>
-#include "game_object.hpp"
+#include "engine/game_object.hpp"
 #include "sprite3d/sprite3d.hpp"
 #include "math/vector.hpp"
 

Copied: trunk/windstille/src/objects/trigger.cpp (from rev 2463, trunk/windstille/src/trigger.cpp)
===================================================================
--- trunk/windstille/src/trigger.cpp	2009-02-11 21:05:03 UTC (rev 2463)
+++ trunk/windstille/src/objects/trigger.cpp	2009-02-11 21:22:01 UTC (rev 2464)
@@ -0,0 +1,84 @@
+/*
+**  Windstille - A Sci-Fi Action-Adventure Game
+**  Copyright (C) 2000 Ingo Ruhnke <grumbel at gmx.de>
+**
+**  This program is free software: you can redistribute it and/or modify
+**  it under the terms of the GNU General Public License as published by
+**  the Free Software Foundation, either version 3 of the License, or
+**  (at your option) any later version.
+**  
+**  This program is distributed in the hope that it will be useful,
+**  but WITHOUT ANY WARRANTY; without even the implied warranty of
+**  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+**  GNU General Public License for more details.
+**  
+**  You should have received a copy of the GNU General Public License
+**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
+*/
+
+#include <stdexcept>
+#include <list>
+#include "engine/sector.hpp"
+#include "trigger.hpp"
+#include "objects/player.hpp"
+#include "engine/script_manager.hpp"
+
+Trigger::Trigger(FileReader& props)
+  : triggered(false), one_time_trigger(false)
+{
+  float x = -1;
+  float y = -1;
+  float width = -1;
+  float height = -1;
+  
+  props.get("x", x);
+  props.get("y", y);
+  props.get("width", width);
+  props.get("height", height);
+  props.get("script", script);
+  props.get("one-time-trigger", one_time_trigger);
+  props.print_unused_warnings("trigger");
+
+  if(x < 0 || y < 0 || width < 0 || height < 0)
+    throw std::runtime_error("Invalid or missing area in Trigger object");
+ 
+  area.left = x;
+  area.top = y;
+  area.right = area.left + width;
+  area.bottom = area.top + height;
+}
+
+Trigger::~Trigger()
+{
+}
+
+void
+Trigger::draw (SceneContext& )
+{
+}
+
+void
+Trigger::update (float )
+{
+  //FIXME use proper collision detection
+  Player* player = Player::current();
+  if(!area.is_inside(player->get_pos())) {
+    last_trigger = false;
+    return;
+  }
+  
+  if(triggered && one_time_trigger)
+    return;
+
+  if(last_trigger == false) {
+    triggered = true;
+    try {
+      script_manager->run_script(script, "TriggerObject");
+    } catch(std::exception& e) {
+      std::cerr << "Couldn't run trigger-script: " << e.what() << "\n";
+    }
+  }
+  last_trigger = true;
+}
+
+/* EOF */


Property changes on: trunk/windstille/src/objects/trigger.cpp
___________________________________________________________________
Name: svn:keywords
   + Id
Name: svn:mergeinfo
   + 
Name: svn:eol-style
   + native

Copied: trunk/windstille/src/objects/trigger.hpp (from rev 2463, trunk/windstille/src/trigger.hpp)
===================================================================
--- trunk/windstille/src/trigger.hpp	2009-02-11 21:05:03 UTC (rev 2463)
+++ trunk/windstille/src/objects/trigger.hpp	2009-02-11 21:22:01 UTC (rev 2464)
@@ -0,0 +1,47 @@
+/*
+**  Windstille - A Sci-Fi Action-Adventure Game
+**  Copyright (C) 2000,2005 Ingo Ruhnke <grumbel at gmx.de>
+**
+**  This program is free software: you can redistribute it and/or modify
+**  it under the terms of the GNU General Public License as published by
+**  the Free Software Foundation, either version 3 of the License, or
+**  (at your option) any later version.
+**  
+**  This program is distributed in the hope that it will be useful,
+**  but WITHOUT ANY WARRANTY; without even the implied warranty of
+**  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+**  GNU General Public License for more details.
+**  
+**  You should have received a copy of the GNU General Public License
+**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
+*/
+
+#ifndef HEADER_WINDSTILLE_TRIGGER_HPP
+#define HEADER_WINDSTILLE_TRIGGER_HPP
+
+#include <vector>
+#include "engine/game_object.hpp"
+
+/** */
+class Trigger : public GameObject
+{
+private:
+  Rectf area;
+  std::string script;
+  /// has the trigger been activated at least once
+  bool triggered;
+  /// trigger active in last frame
+  bool last_trigger;
+  bool one_time_trigger;
+  
+public:
+  Trigger(FileReader& props);
+  virtual ~Trigger();
+
+  void draw (SceneContext& gc);
+  void update (float delta);
+};
+
+#endif
+
+/* EOF */


Property changes on: trunk/windstille/src/objects/trigger.hpp
___________________________________________________________________
Name: svn:keywords
   + Id
Name: svn:mergeinfo
   + 
Name: svn:eol-style
   + native

Modified: trunk/windstille/src/objects/vrdummy.hpp
===================================================================
--- trunk/windstille/src/objects/vrdummy.hpp	2009-02-11 21:05:03 UTC (rev 2463)
+++ trunk/windstille/src/objects/vrdummy.hpp	2009-02-11 21:22:01 UTC (rev 2464)
@@ -21,7 +21,7 @@
 
 #include "sprite3d/sprite3d.hpp"
 #include "sprite2d/sprite.hpp"
-#include "entity.hpp"
+#include "engine/entity.hpp"
 
 /** */
 class VRDummy : public Entity

Modified: trunk/windstille/src/particles/particle_system.hpp
===================================================================
--- trunk/windstille/src/particles/particle_system.hpp	2009-02-11 21:05:03 UTC (rev 2463)
+++ trunk/windstille/src/particles/particle_system.hpp	2009-02-11 21:22:01 UTC (rev 2464)
@@ -23,7 +23,7 @@
 
 #include "color.hpp"
 #include "drawer.hpp"
-#include "entity.hpp"
+#include "engine/entity.hpp"
 
 class SceneContext;
 class Randomizer;

Deleted: trunk/windstille/src/physics.cpp
===================================================================
--- trunk/windstille/src/physics.cpp	2009-02-11 21:05:03 UTC (rev 2463)
+++ trunk/windstille/src/physics.cpp	2009-02-11 21:22:01 UTC (rev 2464)
@@ -1,108 +0,0 @@
-/*
-**  Windstille - A Sci-Fi Action-Adventure Game
-**  Copyright (C) 2005 Matthias Braun <matze at braunis.de>
-**
-**  This program is free software: you can redistribute it and/or modify
-**  it under the terms of the GNU General Public License as published by
-**  the Free Software Foundation, either version 3 of the License, or
-**  (at your option) any later version.
-**  
-**  This program is distributed in the hope that it will be useful,
-**  but WITHOUT ANY WARRANTY; without even the implied warranty of
-**  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
-**  GNU General Public License for more details.
-**  
-**  You should have received a copy of the GNU General Public License
-**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
-*/
-
-#include <boost/bind.hpp>
-#include "physics.hpp"
-
-Physics::Physics(Entity* entity)
-  : entity(entity)
-{
-  mass = 200.0;
-  bounciness = 1.0;
-  air_friction = 0.0;
-  contact_friction = 0.0;
-}
-
-Physics::~Physics()
-{
-}
-
-void
-Physics::register_collobj(CollisionObject& object)
-{
-  object.sig_collision().connect(boost::bind(&Physics::collision, this, _1));
-}
-
-void
-Physics::collision(const CollisionData& data)
-{
-  GameObject* other_object = data.object2->get_game_object();
-
-  const Physics* physics = dynamic_cast<const Physics*> (other_object);
-  if(physics)
-  {
-    elastic_collision(data, *physics);
-    data.object1->set_velocity(velocity());
-    return;
-  }
-
-  // assume fix object...
-  bounce_collision(data);
-  data.object1->set_velocity(velocity());
-}
-
-void
-Physics::elastic_collision(const CollisionData& data, const Physics& other)
-{
-  printf("elastic collision.\n");
-  // we could calculate this cheaper if we'd do it once for both objects and not
-  // each object on it's own...
-
-  Vector other_collision_vel 
-    = data.direction * (other.velocity() * data.direction);
-  Vector collision_vel
-    = data.direction * (velocity() * data.direction);
-  
-  Vector new_v = collision_vel * (mass - other.mass);
-  new_v += other_collision_vel * (2 * other.mass);
-  new_v /= mass + other.mass;
-
-  velocity() += new_v - collision_vel;  
-  //force += (new_v - collision_vel) * mass / data.delta;
-
-  // TODO apply friction here?
-}
-
-void
-Physics::bounce_collision(const CollisionData& data)
-{
-  printf("bounce collision.\n");
-  Vector collision_vel = data.direction * (velocity() * data.direction);
-
-  velocity() -= collision_vel * (1.0 + bounciness);
-  //force -= collision_vel * (1.0f + bounciness) * mass / data.delta;
-
-  // TODO apply friction
-}
-
-void
-Physics::update(float delta)
-{
-  // add gravity force (TODO make it configurable per Sector)
-  force += Vector(0, 9.81 * mass);
-
-  //force -= velocity() * air_friction;
-  
-  Vector acceleration = force / mass;
-  velocity() += acceleration * delta;
-  pos() += velocity() * delta;
-
-  force = Vector(0, 0);
-}
-
-/* EOF */

Deleted: trunk/windstille/src/physics.hpp
===================================================================
--- trunk/windstille/src/physics.hpp	2009-02-11 21:05:03 UTC (rev 2463)
+++ trunk/windstille/src/physics.hpp	2009-02-11 21:22:01 UTC (rev 2464)
@@ -1,55 +0,0 @@
-/*
-**  Windstille - A Sci-Fi Action-Adventure Game
-**  Copyright (C) 2005 Matthias Braun <matze at braunis.de>
-**
-**  This program is free software: you can redistribute it and/or modify
-**  it under the terms of the GNU General Public License as published by
-**  the Free Software Foundation, either version 3 of the License, or
-**  (at your option) any later version.
-**  
-**  This program is distributed in the hope that it will be useful,
-**  but WITHOUT ANY WARRANTY; without even the implied warranty of
-**  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
-**  GNU General Public License for more details.
-**  
-**  You should have received a copy of the GNU General Public License
-**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
-*/
-
-#ifndef HEADER_WINDSTILLE_PHYSICS_HPP
-#define HEADER_WINDSTILLE_PHYSICS_HPP
-
-#include "collision/collision_data.hpp"
-#include "entity.hpp"
-
-class Physics
-{
-public:
-  Physics(Entity* entity);
-  ~Physics();
-
-  void update(float delta);
-  void register_collobj(CollisionObject& object);
-
-  Vector& pos() const
-  { return entity->pos; }
-  Vector& velocity() const
-  { return entity->velocity; }
-
-private:
-  void collision(const CollisionData& data);
-  
-  void elastic_collision(const CollisionData& data, const Physics& other);
-  void bounce_collision(const CollisionData& data);
-
-  Entity* entity;
-  float mass;
-  float bounciness;
-  Vector force;
-  float air_friction;
-  float contact_friction;
-};
-
-#endif
-
-/* EOF */

Deleted: trunk/windstille/src/pistol.cpp
===================================================================
--- trunk/windstille/src/pistol.cpp	2009-02-11 21:05:03 UTC (rev 2463)
+++ trunk/windstille/src/pistol.cpp	2009-02-11 21:22:01 UTC (rev 2464)
@@ -1,57 +0,0 @@
-/*
-**  Windstille - A Sci-Fi Action-Adventure Game
-**  Copyright (C) 2005 Matthias Braun <matze at braunis.de>
-**
-**  This program is free software: you can redistribute it and/or modify
-**  it under the terms of the GNU General Public License as published by
-**  the Free Software Foundation, either version 3 of the License, or
-**  (at your option) any later version.
-**  
-**  This program is distributed in the hope that it will be useful,
-**  but WITHOUT ANY WARRANTY; without even the implied warranty of
-**  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
-**  GNU General Public License for more details.
-**  
-**  You should have received a copy of the GNU General Public License
-**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
-*/
-
-#include "laser_pointer.hpp"
-#include "pistol.hpp"
-
-Pistol::Pistol()
-  : laser_pointer(0)
-{
-  laser_pointer = new LaserPointer();
-  sprite = Sprite3D("models/objects/pistol/pistol.wsprite");
-}
-
-Pistol::~Pistol()
-{
-  delete laser_pointer;
-}
-
-void
-Pistol::draw(SceneContext& sc)
-{
-  sprite.draw(sc.color(), Vector(0, 0), 1000);
-  // Disabled for now and done in the player class
-  //if(laser_pointer)
-  //  laser_pointer->draw(sc);
-}
-
-void
-Pistol::update(float delta)
-{
-  if(laser_pointer)
-    laser_pointer->update(delta);
-
-  sprite.update(delta);
-}
-
-void
-Pistol::fire(bool )
-{
-}
-
-/* EOF */

Deleted: trunk/windstille/src/pistol.hpp
===================================================================
--- trunk/windstille/src/pistol.hpp	2009-02-11 21:05:03 UTC (rev 2463)
+++ trunk/windstille/src/pistol.hpp	2009-02-11 21:22:01 UTC (rev 2464)
@@ -1,47 +0,0 @@
-/*
-**  Windstille - A Sci-Fi Action-Adventure Game
-**  Copyright (C) 2005 Matthias Braun <matze at braunis.de>
-**
-**  This program is free software: you can redistribute it and/or modify
-**  it under the terms of the GNU General Public License as published by
-**  the Free Software Foundation, either version 3 of the License, or
-**  (at your option) any later version.
-**  
-**  This program is distributed in the hope that it will be useful,
-**  but WITHOUT ANY WARRANTY; without even the implied warranty of
-**  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
-**  GNU General Public License for more details.
-**  
-**  You should have received a copy of the GNU General Public License
-**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
-*/
-
-#ifndef HEADER_WINDSTILLE_PISTOL_HPP
-#define HEADER_WINDSTILLE_PISTOL_HPP
-
-#include "sprite3d/sprite3d.hpp"
-#include "weapon.hpp"
-
-class LaserPointer;
-
-class Pistol : public Weapon
-{
-private:
-  Sprite3D sprite;
-  //LaserPointer* laser_pointer;
-
-public:
-  LaserPointer* laser_pointer;
-  
-  Pistol();
-  virtual ~Pistol();
-  
-  void draw(SceneContext& context);
-  void update(float delta);
-
-  void fire(bool enable);
-};
-
-#endif
-
-/* EOF */

Deleted: trunk/windstille/src/script_manager.cpp
===================================================================
--- trunk/windstille/src/script_manager.cpp	2009-02-11 21:05:03 UTC (rev 2463)
+++ trunk/windstille/src/script_manager.cpp	2009-02-11 21:22:01 UTC (rev 2464)
@@ -1,240 +0,0 @@
-#include "script_manager.hpp"
-
-#include <stdarg.h>
-#include <stdexcept>
-#include <sstream>
-#include <fstream>
-#include <sqstdio.h>
-#include <sqstdaux.h>
-#include <sqstdblob.h>
-#include <sqstdsystem.h>
-#include <sqstdmath.h>
-#include <sqstdstring.h>
-
-#include "console.hpp"
-#include "timer.hpp"
-#include "scripting/wrapper.hpp"
-#include "scripting/util.hpp"
-#include "scripting/squirrel_error.hpp"
-#include "physfs/physfs_stream.hpp"
-
-using namespace scripting;
-
-ScriptManager* script_manager = 0;
-
-static void printfunc(HSQUIRRELVM, const char* str, ...)
-{
-  char buf[4096];
-  va_list arglist; 
-  va_start(arglist, str); 
-  vsprintf(buf, str, arglist);
-  console << (char*)buf;
-  puts(buf);
-  va_end(arglist); 
-}
-
-ScriptManager::ScriptManager()
-{
-  v = sq_open(1024);
-  if(v == 0)
-    throw std::runtime_error("Couldn't initialize squirrel vm");
-
-  // register default error handlers
-  sqstd_seterrorhandlers(v);
-  // register squirrel libs
-  sq_pushroottable(v);
-  if(sqstd_register_bloblib(v) < 0)
-    throw SquirrelError(v, "Couldn't register blob lib");
-  if(sqstd_register_iolib(v) < 0)
-    throw SquirrelError(v, "Couldn't register io lib");
-  if(sqstd_register_systemlib(v) < 0)
-    throw SquirrelError(v, "Couldn't register system lib");
-  if(sqstd_register_mathlib(v) < 0)
-    throw SquirrelError(v, "Couldn't register math lib");
-  if(sqstd_register_stringlib(v) < 0)
-    throw SquirrelError(v, "Couldn't register string lib");
-
-  // register print function
-  sq_setprintfunc(v, printfunc);
-  
-  // register windstille API
-  scripting::register_windstille_wrapper(v);
-}
-
-ScriptManager::~ScriptManager()
-{
-  for(SquirrelVMs::iterator i = squirrel_vms.begin(); i != squirrel_vms.end(); ++i)
-    sq_release(v, &(i->vm_obj));
-
-  sq_close(v);
-}
-
-static SQInteger squirrel_read_char(SQUserPointer file)
-{
-  std::istream* in = reinterpret_cast<std::istream*> (file);
-  char c = in->get();
-  if(in->eof())
-    return 0;    
-  return c;
-}
-
-void
-ScriptManager::run_script_file(const std::string& filename)
-{
-  IFileStream in(filename);
-  run_script(in, filename);
-}
-
-void
-ScriptManager::run_script(const std::string& the_string,
-    const std::string& sourcename)
-{
-  std::istringstream stream(the_string);
-  run_script(stream, sourcename);
-}
-
-void
-ScriptManager::run_script(std::istream& in, const std::string& sourcename)
-{
-  HSQUIRRELVM vm = sq_newthread(v, 1024);
-  if(vm == 0)
-    throw SquirrelError(v, "Couldn't create new VM");
-
-  // retrieve reference to thread from stack and increase refcounter
-  HSQOBJECT vm_obj;
-  sq_resetobject(&vm_obj);
-  if(sq_getstackobj(v, -1, &vm_obj) < 0)
-    throw SquirrelError(v, "Couldn't get coroutine vm from stack");
-  sq_addref(v, &vm_obj);
-  sq_pop(v, 1);
-  
-  if(sq_compile(vm, squirrel_read_char, &in, sourcename.c_str(), true) < 0)
-    throw SquirrelError(vm, "Couldn't parse script");
-	
-  squirrel_vms.push_back(SquirrelVM(sourcename, vm, vm_obj));
-  already_run_scripts[sourcename] = true;
-
-  // FIXME: a script that gets run shouldn't have direct access to the root table
-  // http://wiki.squirrel-lang.org/default.aspx/SquirrelWiki/MultiVMs.html
-  sq_pushroottable(vm);
-  //sq_clone(vm, -1); //FIXME
-  if(sq_call(vm, 1, false, true) < 0)
-    throw SquirrelError(vm, "Couldn't start script");
-}
-
-void
-ScriptManager::update()
-{
-  for(SquirrelVMs::iterator i = squirrel_vms.begin(); i != squirrel_vms.end(); ) {
-    SquirrelVM& squirrel_vm = *i;
-    int vm_state = sq_getvmstate(squirrel_vm.vm);
-    
-    if(vm_state == SQ_VMSTATE_SUSPENDED && squirrel_vm.wakeup_time > 0 && game_time >= squirrel_vm.wakeup_time) 
-      {
-        squirrel_vm.waiting_for_events = WakeupData(NO_EVENT);
-        try {
-          if(sq_wakeupvm(squirrel_vm.vm, false, false, true) < 0) {
-            throw SquirrelError(squirrel_vm.vm, "Couldn't resume script");
-          }
-        } catch(std::exception& e) {
-          std::cerr << "Problem executing script: " << e.what() << "\n";
-          sq_release(v, &squirrel_vm.vm_obj);
-          i = squirrel_vms.erase(i);
-          continue;
-        }
-      }
-	
-    if (vm_state != SQ_VMSTATE_SUSPENDED)
-      {
-        sq_release(v, &(squirrel_vm.vm_obj));
-        i = squirrel_vms.erase(i);
-      }
-    else
-      {
-        ++i;
-      }
-  }
-}
-
-void
-ScriptManager::set_wakeup_event(HSQUIRRELVM vm, WakeupData event, float timeout)
-{
-  assert(event.type >= 0 && event.type < MAX_WAKEUP_EVENT_COUNT);
-  // find the VM in the list and update it
-  for(SquirrelVMs::iterator i = squirrel_vms.begin(); i != squirrel_vms.end(); ++i) {
-    SquirrelVM& squirrel_vm = *i;
-    if(squirrel_vm.vm == vm) 
-      {
-        squirrel_vm.waiting_for_events = event;
-
-        if(timeout < 0) {
-          squirrel_vm.wakeup_time = -1;
-        } else {
-          squirrel_vm.wakeup_time = game_time + timeout;
-        }
-        return;
-      }
-  }
-}
-
-void
-ScriptManager::fire_wakeup_event(WakeupData  event)
-{
-  assert(event.type >= 0 && event.type < MAX_WAKEUP_EVENT_COUNT);
-  for(SquirrelVMs::iterator i = squirrel_vms.begin(); i != squirrel_vms.end(); ++i) 
-    {
-      SquirrelVM& vm = *i;
-      if(vm.waiting_for_events.type == event.type && vm.waiting_for_events.type != NO_EVENT)
-        {
-          switch (event.type)
-            {
-            case GAMEOBJECT_DONE:
-              if (vm.waiting_for_events.game_object == event.game_object)
-                {
-                  vm.wakeup_time = game_time;
-                }
-              break;
-
-            default:
-              vm.wakeup_time = game_time;
-              break;
-            }
-        }
-    }
-}
-
-void
-ScriptManager::set_wakeup_event(HSQUIRRELVM vm, WakeupEvent event, float timeout)
-{
-  set_wakeup_event(vm, WakeupData(event), timeout);
-}
-
-void
-ScriptManager::fire_wakeup_event(WakeupEvent event)
-{
-  fire_wakeup_event(WakeupData(event));
-}
-
-bool ScriptManager::run_before(HSQUIRRELVM vm)
-{
-  std::string name;
-  for(SquirrelVMs::iterator i = squirrel_vms.begin(); i != squirrel_vms.end(); ++i) {
-    if (i->vm == vm)
-      name = i->name;
-  }
-  
-  if (already_run_scripts.find(name) == already_run_scripts.end())
-    return false;
-  return true;
-}
-
-ScriptManager::SquirrelVM::SquirrelVM(const std::string& arg_name, HSQUIRRELVM arg_vm, HSQOBJECT arg_obj)
-  : name(arg_name),
-    vm(arg_vm), 
-    vm_obj(arg_obj)
-{
-  waiting_for_events = WakeupData(NO_EVENT);
-  wakeup_time        = 0;
-}
-
-/* EOF */

Deleted: trunk/windstille/src/script_manager.hpp
===================================================================
--- trunk/windstille/src/script_manager.hpp	2009-02-11 21:05:03 UTC (rev 2463)
+++ trunk/windstille/src/script_manager.hpp	2009-02-11 21:22:01 UTC (rev 2464)
@@ -1,107 +0,0 @@
-/*
-**  Windstille - A Sci-Fi Action-Adventure Game
-**  Copyright (C) 2005 Matthias Braun <matze at braunis.de>
-**
-**  This program is free software: you can redistribute it and/or modify
-**  it under the terms of the GNU General Public License as published by
-**  the Free Software Foundation, either version 3 of the License, or
-**  (at your option) any later version.
-**  
-**  This program is distributed in the hope that it will be useful,
-**  but WITHOUT ANY WARRANTY; without even the implied warranty of
-**  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
-**  GNU General Public License for more details.
-**  
-**  You should have received a copy of the GNU General Public License
-**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
-*/
-
-#ifndef HEADER_WINDSTILLE_SCRIPT_MANAGER_HPP
-#define HEADER_WINDSTILLE_SCRIPT_MANAGER_HPP
-
-#include <vector>
-#include <list>
-#include <map>
-#include <squirrel.h>
-#include <iostream>
-#include "timer.hpp"
-#include "scripting/wrapper.hpp"
-#include "scripting/util.hpp"
-
-/**
- * This class is responsible for managing all running squirrel threads
- * (called coroutines by others)
- * It contains functions for loading and starting script, keeps a list of
- * suspended scripts and receives wakeup events for them
- */
-class ScriptManager
-{
-public:
-  ScriptManager();
-  ~ScriptManager();
-
-  void update();
-
-  void run_script_file(const std::string& filename);
-  void run_script(const std::string& string, const std::string& sourcename);
-  void run_script(std::istream& in, const std::string& sourcename);
-
-  HSQUIRRELVM get_vm() const
-  {
-    return v;
-  }
-
-  enum WakeupEvent {
-    NO_EVENT,
-    TIME,
-    DIALOG_CLOSED,
-    CONVERSATION_CLOSED,
-    FADE_DONE,
-    CAMERA_DONE,
-    GAMEOBJECT_DONE,
-    MAX_WAKEUP_EVENT_COUNT
-  };
-
-  struct WakeupData {
-    explicit WakeupData() : type(NO_EVENT) {}
-    explicit WakeupData(WakeupEvent type_) : type(type_) {}
-
-    WakeupEvent type;
-    
-    union {
-      // GAMEOBJECT_DONE
-      GameObject* game_object;
-    };
-  };
-
-  void set_wakeup_event(HSQUIRRELVM vm, WakeupEvent event, float timeout = -1);
-  void set_wakeup_event(HSQUIRRELVM vm, WakeupData  event, float timeout = -1);
-  void fire_wakeup_event(WakeupEvent event);
-  void fire_wakeup_event(WakeupData  event);
-  
-  bool run_before(HSQUIRRELVM vm);
-
-private:
-  class SquirrelVM
-  {
-  public:
-    SquirrelVM(const std::string& arg_name, HSQUIRRELVM arg_vm, HSQOBJECT arg_obj);
-    std::string name;
-    HSQUIRRELVM vm;
-    HSQOBJECT   vm_obj;
-    float       wakeup_time;
-    WakeupData  waiting_for_events;
-  };
-  
-  typedef std::list<SquirrelVM> SquirrelVMs;
-  SquirrelVMs squirrel_vms;
-  std::map<std::string, bool> already_run_scripts;
-
-  HSQUIRRELVM v;
-};
-
-extern ScriptManager* script_manager;
-
-#endif
-
-/* EOF */

Modified: trunk/windstille/src/scripting/game_objects.cpp
===================================================================
--- trunk/windstille/src/scripting/game_objects.cpp	2009-02-11 21:05:03 UTC (rev 2463)
+++ trunk/windstille/src/scripting/game_objects.cpp	2009-02-11 21:22:01 UTC (rev 2464)
@@ -17,8 +17,8 @@
 */
 
 #include "wrapper.interface.hpp"
-#include "entity.hpp"
-#include "sector.hpp"
+#include "engine/entity.hpp"
+#include "engine/sector.hpp"
 #include "game_objects.hpp"
 
 namespace scripting {

Modified: trunk/windstille/src/scripting/game_objects.hpp
===================================================================
--- trunk/windstille/src/scripting/game_objects.hpp	2009-02-11 21:05:03 UTC (rev 2463)
+++ trunk/windstille/src/scripting/game_objects.hpp	2009-02-11 21:22:01 UTC (rev 2464)
@@ -20,7 +20,7 @@
 #define HEADER_WINDSTILLE_SCRIPTING_GAME_OBJECTS_HPP
 
 #ifndef SCRIPTING_API
-#include "game_object.hpp"
+#include "engine/game_object.hpp"
 #include "objects/test_object.hpp"
 #include "objects/player.hpp"
 #include "objects/scriptable_object.hpp"

Modified: trunk/windstille/src/scripting/interface.cpp
===================================================================
--- trunk/windstille/src/scripting/interface.cpp	2009-02-11 21:05:03 UTC (rev 2463)
+++ trunk/windstille/src/scripting/interface.cpp	2009-02-11 21:22:01 UTC (rev 2464)
@@ -24,10 +24,10 @@
 #include "game_session.hpp"
 #include "dialog_manager.hpp"
 #include "conversation.hpp"
-#include "script_manager.hpp"
-#include "sector.hpp"
+#include "engine/script_manager.hpp"
+#include "engine/sector.hpp"
 #include "font/fonts.hpp"
-#include "camera.hpp"
+#include "engine/camera.hpp"
 #include "config.hpp"
 #include "pda.hpp"
 #include "sexpr_file_reader.hpp"

Deleted: trunk/windstille/src/sector.cpp
===================================================================
--- trunk/windstille/src/sector.cpp	2009-02-11 21:05:03 UTC (rev 2463)
+++ trunk/windstille/src/sector.cpp	2009-02-11 21:22:01 UTC (rev 2464)
@@ -1,396 +0,0 @@
-/*
-**  Windstille - A Sci-Fi Action-Adventure Game
-**  Copyright (C) 2005 Ingo Ruhnke <grumbel at gmx.de>
-**
-**  This program is free software: you can redistribute it and/or modify
-**  it under the terms of the GNU General Public License as published by
-**  the Free Software Foundation, either version 3 of the License, or
-**  (at your option) any later version.
-**  
-**  This program is distributed in the hope that it will be useful,
-**  but WITHOUT ANY WARRANTY; without even the implied warranty of
-**  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
-**  GNU General Public License for more details.
-**  
-**  You should have received a copy of the GNU General Public License
-**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
-*/
-
-#include <iostream>
-#include <sstream>
-#include <stdexcept>
-#include "sexpr_file_reader.hpp"
-#include "globals.hpp"
-#include "display/scene_context.hpp"
-#include "objects/background_gradient.hpp"
-#include "tile/tile_map.hpp"
-#include "game_object.hpp"
-#include "objects/player.hpp"
-#include "trigger.hpp"
-#include "objects/test_object.hpp"
-#include "sector.hpp"
-#include "objects/vrdummy.hpp"
-#include "sound/sound_manager.hpp"
-#include "script_manager.hpp"
-#include "collision/collision_engine.hpp"
-#include "particles/particle_system.hpp"
-#include "objects/test_object.hpp"
-#include "objects/elevator.hpp"
-#include "objects/nightvision.hpp"
-#include "objects/character.hpp"
-#include "laser_pointer.hpp"
-#include "objects/swarm.hpp"
-#include "objects/liquid.hpp"
-#include "objects/shockwave.hpp"
-#include "objects/hedgehog.hpp"
-#include "objects/spider_mine.hpp"
-#include "objects/box.hpp"
-#include "objects/scriptable_object.hpp"
-#include "navigation/navigation_graph.hpp"
-#include "scripting/squirrel_error.hpp"
-
-// The table (works like a namespace here) where the game objects will appear
-#define OBJECTS_TABLE "objects"
-
-Sector* Sector::current_ = 0;
-
-Sector::Sector(const std::string& arg_filename)
-  : filename(arg_filename),
-    player(0)    
-{
-  // make sure squirrel has an "objects" table
-  script_manager->run_script(
-      "if(! (\"" OBJECTS_TABLE "\" in this)) {"
-      "  " OBJECTS_TABLE " <- {};"
-      "}", "");
-  
-  if (debug) std::cout << "Creating new Sector" << std::endl;
-  collision_engine = new CollisionEngine();
-  navigation_graph = new NavigationGraph();
-
-  current_ = this;
-  interactive_tilemap = 0;
-  interactivebackground_tilemap = 0;
-
-  parse_file(filename);
-  if (!interactive_tilemap)
-    throw std::runtime_error("No interactive-tilemap available");
-
-  // add interactive to collision engine
-  collision_engine->add(new CollisionObject(interactive_tilemap));
-
-  // Spawn the Player
-  if(!player) {
-    player = new Player();
-    add(player);
-  }
-  player->set_pos(Vector(300,200));
-}
-
-Sector::~Sector()
-{
-  for(Objects::iterator i = objects.begin(); i != objects.end(); ++i)
-    (*i)->unref();
-  for(Objects::iterator i = new_objects.begin(); i != new_objects.end(); ++i)
-    (*i)->unref();
-
-  delete navigation_graph;
-  delete collision_engine;
-}
-
-void
-Sector::parse_file(const std::string& filename)
-{
-  if (debug) std::cout << "Sector:parse_file '" << filename << "'" << std::endl;
-  
-  FileReader reader = FileReader::parse(filename);
-  if(reader.get_name() != "windstille-sector") {
-    std::ostringstream msg;
-    msg << "'" << filename << "' is not a windstille-sector file";
-    throw std::runtime_error(msg.str());
-  }
-  
-  int version = 1;
-  if(!reader.get("version", version))
-    std::cerr << "Warning no version specified in levelformat.\n";
-  if(version > 1)
-    std::cerr << "Warning: format version is newer than game.\n";
-
-  reader.get("name",          name);
-  reader.get("music",         music);
-  reader.get("init-script",   init_script);
-  reader.get("ambient-color", ambient_light);
-  
-  FileReader objects_reader;
-  if(reader.get("objects", objects_reader) == false)
-    throw std::runtime_error("No objects specified");
-
-  std::vector<FileReader> objects_readers = objects_reader.get_sections();
-  for(std::vector<FileReader>::iterator i = objects_readers.begin(); i != objects_readers.end(); ++i)
-    {
-      add_object(*i);
-    }
-
-  reader.print_unused_warnings("sector");
-  if (debug) std::cout << "Finished parsing" << std::endl;
-}
-
-void
-Sector::add_object(FileReader& reader)
-{
-  if(reader.get_name() == "tilemap") {
-    TileMap* tilemap = new TileMap(reader);
-    add(tilemap);
-    if (tilemap->get_name() == "interactive")
-      interactive_tilemap = tilemap;
-    else if (tilemap->get_name() == "interactivebackground")
-      interactivebackground_tilemap = tilemap;
-  } else if(reader.get_name() == "background") {
-    // TODO
-  } else if (reader.get_name() == "background-gradient") {
-    add(new BackgroundGradient(reader));
-  } else if(reader.get_name() == "trigger") {
-    add(new Trigger(reader));
-  } else if(reader.get_name() == "box") {
-    add(new Box(reader));
-  } else if(reader.get_name() == "shockwave") {
-    add(new Shockwave(reader));
-  } else if(reader.get_name() == "elevator") {
-    add(new Elevator(reader));
-  } else if(reader.get_name() == "character") {    
-    add(new Character(reader));
-  } else if(reader.get_name() == "spider-mine") {
-    add(new SpiderMine(reader));
-  } else if(reader.get_name() == "hedgehog") {
-    add(new Hedgehog(reader));
-  } else if(reader.get_name() == "test-object") {
-    add(new TestObject(reader));
-  } else if (reader.get_name() == "nightvision") {
-    add(new Nightvision(reader));
-  } else if (reader.get_name() == "particle-system") {
-    add(new ParticleSystem(reader));
-  } else if(reader.get_name() == "scriptable-object") {    
-    add(new ScriptableObject(reader));
-  } else if (reader.get_name() == "vrdummy") {
-    add(new VRDummy(reader));
-  } else if (reader.get_name() == "swarm") {
-    add(new Swarm(reader));
-  } else if (reader.get_name() == "laserpointer") {
-    add(new LaserPointer());
-  } else if (reader.get_name() == "liquid") {
-    add(new Liquid(reader));
-  } else {
-    std::cout << "Skipping unknown Object: " << reader.get_name() << "\n";
-  }
-}
-
-void
-Sector::activate()
-{
-  commit_adds();
-  commit_removes();
-
-  sound_manager->play_music(music);
-  if (init_script != "")
-    script_manager->run_script_file(init_script);
-}
-
-void
-Sector::draw(SceneContext& sc)
-{
-  sc.light().fill_screen(ambient_light);
-
-  for(Objects::iterator i = objects.begin(); i != objects.end(); ++i)
-    {
-      if ((*i)->is_active())
-        (*i)->draw(sc);
-    }
-}
-
-void Sector::commit_adds()
-{
-  // Add new game objects
-  for(Objects::iterator i = new_objects.begin(); i != new_objects.end(); ++i) {
-    objects.push_back(*i);
-  }
-  new_objects.clear();
-}
-
-void Sector::update(float delta)
-{
-  commit_adds();
-
-  collision_engine->update(delta);
-
-  for(Objects::iterator i = objects.begin(); i != objects.end(); ++i) {
-    if ((*i)->is_active())
-      (*i)->update(delta);
-  }
-  commit_removes();
-}
-
-void
-Sector::commit_removes()
-{
-  // remove objects
-  for(Objects::iterator i = objects.begin(); i != objects.end(); ) {
-    GameObject* object = *i;
-    if(object->is_removable()) {
-      if(object->get_name() != "") {
-        remove_object_from_squirrel(object);
-      }
-      object->unref();
-
-      i = objects.erase(i);
-      continue;
-    }
-
-    ++i;
-  }
-}
-
-void
-Sector::add(GameObject* obj)
-{
-  new_objects.push_back(obj);
-  obj->ref();
-  if(obj->get_name() != "") {
-    expose_object_to_squirrel(obj);
-  }
-}
-
-void
-Sector::remove_object_from_squirrel(GameObject* object)
-{
-  using namespace scripting;
-
-  // get objects table
-  HSQUIRRELVM v = script_manager->get_vm();
-  sq_pushroottable(v);
-  sq_pushstring(v, OBJECTS_TABLE, -1);
-  if(SQ_FAILED(sq_get(v, -2)))
-  {
-    std::ostringstream msg;
-    msg << "Couldn't get objects table '" << OBJECTS_TABLE << "'";
-    throw SquirrelError(v, msg.str());
-  }
-
-  // remove object from table
-  sq_pushstring(v, object->get_name().c_str(), object->get_name().size());
-  if(SQ_FAILED(sq_deleteslot(v, -2, SQFalse) < 0)) {
-    std::ostringstream msg;
-    msg << "Couldn't remove squirrel object for '" << object->get_name()
-        << "'";
-    throw SquirrelError(v, msg.str());
-  }
-  
-  // pop objects and root table
-  sq_pop(v, 2);
-}
-
-// tries to find out the "real" class of an gameobject by some dynamic casting
-// and creates a matching squirrel instance for that object
-static inline void create_squirrel_instance(HSQUIRRELVM v, GameObject* object)
-{
-  ScriptableObject* script_obj = dynamic_cast<ScriptableObject*> (object);
-  if(script_obj) {
-    create_squirrel_instance(v, new scripting::ScriptableObject(script_obj),
-                             true);
-    return;
-  }
-  
-  TestObject* tobj = dynamic_cast<TestObject*> (object);
-  if(tobj) {
-    create_squirrel_instance(v, new scripting::TestObject(tobj), true);
-    return;
-  }                                                                             
-
-  Player* player = dynamic_cast<Player*> (object);
-  if(player) {
-    create_squirrel_instance(v, new scripting::Player(player), true);
-    return;
-  }
-
-  create_squirrel_instance(v, new scripting::GameObject(object), true);
-}
-
-void
-Sector::expose_object_to_squirrel(GameObject* object)
-{
-  using namespace scripting;
-
-  // get objects table
-  HSQUIRRELVM v = script_manager->get_vm();
-  sq_pushroottable(v);
-  sq_pushstring(v, OBJECTS_TABLE, -1);
-  if(SQ_FAILED(sq_get(v, -2)))
-  {
-    std::ostringstream msg;
-    msg << "Couldn't get objects table '" << OBJECTS_TABLE << "'";
-    throw SquirrelError(v, msg.str());
-  }
-  
-  // create squirrel instance and register in table
-  sq_pushstring(v, object->get_name().c_str(), object->get_name().size());
-  create_squirrel_instance(v, object);
-  if(SQ_FAILED(sq_createslot(v, -3)))
-  {
-    std::ostringstream msg;
-    msg << "Couldn't register object in objects tab?e";
-    throw SquirrelError(v, msg.str());
-  }
-
-  // pop roottable and objects table
-  sq_pop(v, 2);
-}
-
-GameObject*
-Sector::get_object(const std::string& name) const
-{
-  for(Objects::const_iterator i = objects.begin(); i != objects.end(); ++i) 
-    {
-      if ((*i)->get_name() == name)
-        {
-          return *i;
-        }
-    }
-  return 0;
-}
-
-int
-Sector::get_width () const
-{
-  return interactive_tilemap->get_width() * TILE_SIZE;
-}
-
-int
-Sector::get_height () const
-{
-  return interactive_tilemap->get_height() * TILE_SIZE;
-}
-
-void
-Sector::set_tilemap(TileMap* t)
-{
-  interactive_tilemap = t;
-}
-
-void
-Sector::set_ambient_light(const Color& color)
-{
-  ambient_light = color;
-}
-
-Color
-Sector::get_ambient_light() const
-{
-  return ambient_light;
-}
-
-const std::string&
-Sector::get_filename () const
-{
-  return filename;
-}
-
-/* EOF */

Deleted: trunk/windstille/src/sector.hpp
===================================================================
--- trunk/windstille/src/sector.hpp	2009-02-11 21:05:03 UTC (rev 2463)
+++ trunk/windstille/src/sector.hpp	2009-02-11 21:22:01 UTC (rev 2464)
@@ -1,122 +0,0 @@
-/*
-**  Windstille - A Sci-Fi Action-Adventure Game
-**  Copyright (C) 2005 Ingo Ruhnke <grumbel at gmx.de>
-**
-**  This program is free software: you can redistribute it and/or modify
-**  it under the terms of the GNU General Public License as published by
-**  the Free Software Foundation, either version 3 of the License, or
-**  (at your option) any later version.
-**  
-**  This program is distributed in the hope that it will be useful,
-**  but WITHOUT ANY WARRANTY; without even the implied warranty of
-**  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
-**  GNU General Public License for more details.
-**  
-**  You should have received a copy of the GNU General Public License
-**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
-*/
-
-#ifndef HEADER_WINDSTILLE_SECTOR_HPP
-#define HEADER_WINDSTILLE_SECTOR_HPP
-
-#include <string>
-#include <vector>
-#include "color.hpp"
-
-class FileReader;
-class GameObject;
-class TileMap;
-class Player;
-class SceneContext;
-class SpawnPoint;
-class CollisionEngine;
-class NavigationGraph;
-class Entity;
-
-/** */
-class Sector
-{
-private: 
-  static Sector* current_;  
-public:
-  static Sector* current() { return current_; }
-  
-private:
-  std::string filename;
-  std::string name;
-  std::string music;
-  std::string init_script;
-
-  typedef std::vector<GameObject*> Objects;
-  Objects objects;
-  /** container for newly created GameObjects (they'll be added once per frame
-   * in the update function */
-  Objects new_objects;
-
-  Color ambient_light;
-
-  /** The TileMap with which the player interacts */
-  TileMap* interactive_tilemap;
-  TileMap* interactivebackground_tilemap;
-
-  CollisionEngine* collision_engine;
-  NavigationGraph* navigation_graph;
-
-  Player* player;
-
-  void parse_file(const std::string& filename);
-
-  void commit_adds();
-  void commit_removes();
-
-  void expose_object_to_squirrel(GameObject* object);
-  void remove_object_from_squirrel(GameObject* object);
-
-public:
-  Sector(const std::string& filename);
-  ~Sector();
-
-  const std::string& get_filename () const;
-
-  void draw(SceneContext& gc);
-  void update(float delta);
-
-  /**
-   * activates the sector. (Runs init script, changes music)
-   */
-  void activate();
-  
-  int get_width  () const;
-  int get_height () const;
-
-  /**
-   * Set ambient light, ie. the light that illuminates the whole sector
-   * all the time, to \a color
-   */
-  void  set_ambient_light(const Color& color);
-  Color get_ambient_light() const;
-
-  void add(GameObject*);
-  void add_object(FileReader& reader);
-
-  CollisionEngine* get_collision_engine() const { return collision_engine; }
-
-  GameObject* get_object(const std::string& name) const;
-
-  std::vector<GameObject*>* get_objects() { return &objects; }
-  TileMap* get_tilemap() const { return interactive_tilemap; }
-  TileMap* get_tilemap2() const { return interactivebackground_tilemap; }
-  void     set_tilemap(TileMap* t);
-  Player* get_player() const
-  {
-    return player;
-  }
-  
-private:
-  Sector (const Sector&);
-  Sector& operator= (const Sector&);
-};
-
-#endif
-
-/* EOF */

Modified: trunk/windstille/src/sprite3d/sprite3d.hpp
===================================================================
--- trunk/windstille/src/sprite3d/sprite3d.hpp	2009-02-11 21:05:03 UTC (rev 2463)
+++ trunk/windstille/src/sprite3d/sprite3d.hpp	2009-02-11 21:22:01 UTC (rev 2464)
@@ -21,7 +21,7 @@
 
 #include <string>
 #include <stdint.h>
-#include "game_object.hpp"
+#include "engine/game_object.hpp"
 #include "display/scene_context.hpp"
 #include "math/vector.hpp"
 #include "math/matrix.hpp"

Modified: trunk/windstille/src/tile/tile_map.hpp
===================================================================
--- trunk/windstille/src/tile/tile_map.hpp	2009-02-11 21:05:03 UTC (rev 2463)
+++ trunk/windstille/src/tile/tile_map.hpp	2009-02-11 21:22:01 UTC (rev 2464)
@@ -23,7 +23,7 @@
 
 #include "globals.hpp"
 #include "field.hpp"
-#include "game_object.hpp"
+#include "engine/game_object.hpp"
 #include "display/scene_context.hpp"
 
 class Tile;

Deleted: trunk/windstille/src/trigger.cpp
===================================================================
--- trunk/windstille/src/trigger.cpp	2009-02-11 21:05:03 UTC (rev 2463)
+++ trunk/windstille/src/trigger.cpp	2009-02-11 21:22:01 UTC (rev 2464)
@@ -1,84 +0,0 @@
-/*
-**  Windstille - A Sci-Fi Action-Adventure Game
-**  Copyright (C) 2000 Ingo Ruhnke <grumbel at gmx.de>
-**
-**  This program is free software: you can redistribute it and/or modify
-**  it under the terms of the GNU General Public License as published by
-**  the Free Software Foundation, either version 3 of the License, or
-**  (at your option) any later version.
-**  
-**  This program is distributed in the hope that it will be useful,
-**  but WITHOUT ANY WARRANTY; without even the implied warranty of
-**  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
-**  GNU General Public License for more details.
-**  
-**  You should have received a copy of the GNU General Public License
-**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
-*/
-
-#include <stdexcept>
-#include <list>
-#include "sector.hpp"
-#include "trigger.hpp"
-#include "objects/player.hpp"
-#include "script_manager.hpp"
-
-Trigger::Trigger(FileReader& props)
-  : triggered(false), one_time_trigger(false)
-{
-  float x = -1;
-  float y = -1;
-  float width = -1;
-  float height = -1;
-  
-  props.get("x", x);
-  props.get("y", y);
-  props.get("width", width);
-  props.get("height", height);
-  props.get("script", script);
-  props.get("one-time-trigger", one_time_trigger);
-  props.print_unused_warnings("trigger");
-
-  if(x < 0 || y < 0 || width < 0 || height < 0)
-    throw std::runtime_error("Invalid or missing area in Trigger object");
- 
-  area.left = x;
-  area.top = y;
-  area.right = area.left + width;
-  area.bottom = area.top + height;
-}
-
-Trigger::~Trigger()
-{
-}
-
-void
-Trigger::draw (SceneContext& )
-{
-}
-
-void
-Trigger::update (float )
-{
-  //FIXME use proper collision detection
-  Player* player = Player::current();
-  if(!area.is_inside(player->get_pos())) {
-    last_trigger = false;
-    return;
-  }
-  
-  if(triggered && one_time_trigger)
-    return;
-
-  if(last_trigger == false) {
-    triggered = true;
-    try {
-      script_manager->run_script(script, "TriggerObject");
-    } catch(std::exception& e) {
-      std::cerr << "Couldn't run trigger-script: " << e.what() << "\n";
-    }
-  }
-  last_trigger = true;
-}
-
-/* EOF */

Deleted: trunk/windstille/src/trigger.hpp
===================================================================
--- trunk/windstille/src/trigger.hpp	2009-02-11 21:05:03 UTC (rev 2463)
+++ trunk/windstille/src/trigger.hpp	2009-02-11 21:22:01 UTC (rev 2464)
@@ -1,47 +0,0 @@
-/*
-**  Windstille - A Sci-Fi Action-Adventure Game
-**  Copyright (C) 2000,2005 Ingo Ruhnke <grumbel at gmx.de>
-**
-**  This program is free software: you can redistribute it and/or modify
-**  it under the terms of the GNU General Public License as published by
-**  the Free Software Foundation, either version 3 of the License, or
-**  (at your option) any later version.
-**  
-**  This program is distributed in the hope that it will be useful,
-**  but WITHOUT ANY WARRANTY; without even the implied warranty of
-**  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
-**  GNU General Public License for more details.
-**  
-**  You should have received a copy of the GNU General Public License
-**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
-*/
-
-#ifndef HEADER_WINDSTILLE_TRIGGER_HPP
-#define HEADER_WINDSTILLE_TRIGGER_HPP
-
-#include <vector>
-#include "game_object.hpp"
-
-/** */
-class Trigger : public GameObject
-{
-private:
-  Rectf area;
-  std::string script;
-  /// has the trigger been activated at least once
-  bool triggered;
-  /// trigger active in last frame
-  bool last_trigger;
-  bool one_time_trigger;
-  
-public:
-  Trigger(FileReader& props);
-  virtual ~Trigger();
-
-  void draw (SceneContext& gc);
-  void update (float delta);
-};
-
-#endif
-
-/* EOF */

Modified: trunk/windstille/src/view.cpp
===================================================================
--- trunk/windstille/src/view.cpp	2009-02-11 21:05:03 UTC (rev 2463)
+++ trunk/windstille/src/view.cpp	2009-02-11 21:22:01 UTC (rev 2464)
@@ -20,7 +20,7 @@
 #include "display/display.hpp"
 #include "collision/collision_engine.hpp"
 #include "objects/player.hpp"
-#include "sector.hpp"
+#include "engine/sector.hpp"
 #include "view.hpp"
 
 View* View::current_ = 0;

Modified: trunk/windstille/src/view.hpp
===================================================================
--- trunk/windstille/src/view.hpp	2009-02-11 21:05:03 UTC (rev 2463)
+++ trunk/windstille/src/view.hpp	2009-02-11 21:22:01 UTC (rev 2464)
@@ -19,8 +19,8 @@
 #ifndef HEADER_WINDSTILLE_VIEW_HPP
 #define HEADER_WINDSTILLE_VIEW_HPP
 
-#include "camera.hpp"
 #include "graphic_context_state.hpp"
+#include "engine/camera.hpp"
 #include "math/vector.hpp"
 
 class Controller;

Modified: trunk/windstille/src/windstille_main.cpp
===================================================================
--- trunk/windstille/src/windstille_main.cpp	2009-02-11 21:05:03 UTC (rev 2463)
+++ trunk/windstille/src/windstille_main.cpp	2009-02-11 21:22:01 UTC (rev 2464)
@@ -27,11 +27,11 @@
 #include "font/fonts.hpp"
 #include "game_session.hpp"
 #include "title_screen.hpp"
-#include "sector.hpp"
+#include "engine/sector.hpp"
 #include "input/input_manager.hpp"
 #include "sound/sound_manager.hpp"
 #include "tile/tile_factory.hpp"
-#include "script_manager.hpp"
+#include "engine/script_manager.hpp"
 #include "config.hpp"
 #include "util.hpp"
 #include "font/ttf_font.hpp"



From grumbel at mail.berlios.de  Wed Feb 11 22:47:02 2009
From: grumbel at mail.berlios.de (grumbel at BerliOS)
Date: Wed, 11 Feb 2009 22:47:02 +0100
Subject: [Windstille-commit] r2465 - in trunk/windstille/src: . armature
	display engine font gui input math navigation objects
	particles scripting sprite2d tile util
Message-ID: <200902112147.n1BLl2xV000157@sheep.berlios.de>

Author: grumbel
Date: 2009-02-11 22:47:00 +0100 (Wed, 11 Feb 2009)
New Revision: 2465

Added:
   trunk/windstille/src/display/color.hpp
   trunk/windstille/src/math/random.cpp
   trunk/windstille/src/math/random.hpp
   trunk/windstille/src/util/
   trunk/windstille/src/util/baby_xml.cpp
   trunk/windstille/src/util/baby_xml.hpp
   trunk/windstille/src/util/command_line.cpp
   trunk/windstille/src/util/command_line.hpp
   trunk/windstille/src/util/command_line_generic.cpp
   trunk/windstille/src/util/command_line_generic.hpp
   trunk/windstille/src/util/file_reader.cpp
   trunk/windstille/src/util/file_reader.hpp
   trunk/windstille/src/util/file_reader_impl.hpp
   trunk/windstille/src/util/getter.cpp
   trunk/windstille/src/util/getter.hpp
   trunk/windstille/src/util/response_curve.cpp
   trunk/windstille/src/util/response_curve.hpp
   trunk/windstille/src/util/sexpr_file_reader.cpp
   trunk/windstille/src/util/sexpr_file_reader.hpp
Removed:
   trunk/windstille/src/baby_xml.cpp
   trunk/windstille/src/baby_xml.hpp
   trunk/windstille/src/color.hpp
   trunk/windstille/src/command_line.cpp
   trunk/windstille/src/command_line.hpp
   trunk/windstille/src/command_line_generic.cpp
   trunk/windstille/src/command_line_generic.hpp
   trunk/windstille/src/file_reader.cpp
   trunk/windstille/src/file_reader.hpp
   trunk/windstille/src/file_reader_impl.hpp
   trunk/windstille/src/getter.cpp
   trunk/windstille/src/getter.hpp
   trunk/windstille/src/random.cpp
   trunk/windstille/src/random.hpp
   trunk/windstille/src/response_curve.cpp
   trunk/windstille/src/response_curve.hpp
   trunk/windstille/src/sexpr_file_reader.cpp
   trunk/windstille/src/sexpr_file_reader.hpp
Modified:
   trunk/windstille/src/SConscript
   trunk/windstille/src/armature/armature.hpp
   trunk/windstille/src/armature/mesh.cpp
   trunk/windstille/src/armature/model.cpp
   trunk/windstille/src/armature/pose.cpp
   trunk/windstille/src/config.cpp
   trunk/windstille/src/console.cpp
   trunk/windstille/src/engine/game_object.hpp
   trunk/windstille/src/engine/script_manager.cpp
   trunk/windstille/src/engine/sector.cpp
   trunk/windstille/src/engine/sector.hpp
   trunk/windstille/src/font/ttf_font.hpp
   trunk/windstille/src/gui/group_component.cpp
   trunk/windstille/src/gui/slider.cpp
   trunk/windstille/src/input/input_manager_sdl.cpp
   trunk/windstille/src/navigation/navigation_graph.cpp
   trunk/windstille/src/navigation_test.cpp
   trunk/windstille/src/objects/box.cpp
   trunk/windstille/src/objects/liquid.cpp
   trunk/windstille/src/objects/nightvision.cpp
   trunk/windstille/src/objects/swarm.cpp
   trunk/windstille/src/objects/vrdummy.cpp
   trunk/windstille/src/particle_viewer.cpp
   trunk/windstille/src/particles/particle_system.cpp
   trunk/windstille/src/particles/particle_system.hpp
   trunk/windstille/src/particles/randomizer.hpp
   trunk/windstille/src/particles/spark_drawer.cpp
   trunk/windstille/src/scripting/SConscript
   trunk/windstille/src/scripting/game_objects.cpp
   trunk/windstille/src/scripting/game_objects.hpp
   trunk/windstille/src/scripting/interface.cpp
   trunk/windstille/src/scripting/interface.hpp
   trunk/windstille/src/scripting/squirrel_error.cpp
   trunk/windstille/src/scripting/squirrel_error.hpp
   trunk/windstille/src/scripting/util.cpp
   trunk/windstille/src/scripting/util.hpp
   trunk/windstille/src/scripting/wrapper.cpp
   trunk/windstille/src/scripting/wrapper.hpp
   trunk/windstille/src/sprite2d/data.hpp
   trunk/windstille/src/sprite2d/sprite.cpp
   trunk/windstille/src/sprite2d/sprite.hpp
   trunk/windstille/src/text_area.cpp
   trunk/windstille/src/tile/tile_description.hpp
   trunk/windstille/src/tile/tile_factory.cpp
Log:
Moved some generic stuff into util/, reverted namespace scripting back to Scripting since it seems hardcoded in miniswig

Modified: trunk/windstille/src/SConscript
===================================================================
--- trunk/windstille/src/SConscript	2009-02-11 21:22:01 UTC (rev 2464)
+++ trunk/windstille/src/SConscript	2009-02-11 21:47:00 UTC (rev 2465)
@@ -46,17 +46,13 @@
 'armature/model.cpp',
 'armature/pose.cpp',
 'armature_test.cpp',
-'baby_xml.cpp',
 'blitter.cpp',
-'engine/camera.cpp',
 'collision/collision_data.cpp',
 'collision/collision_engine.cpp',
 'collision/collision_object.cpp',
 'collision/collision_test.cpp',
 'collision/ladder_contact.cpp',
 'collision/stair_contact.cpp',
-'command_line.cpp',
-'command_line_generic.cpp',
 'config.cpp',
 'console.cpp',
 'controller_def.cpp',
@@ -77,15 +73,17 @@
 'display/texture_manager.cpp',
 'display/vertex_array_drawing_request.cpp',
 'energy_bar.cpp',
+'engine/camera.cpp',
 'engine/entity.cpp',
-'file_reader.cpp',
+'engine/game_object.cpp',
+'engine/physics.cpp',
+'engine/script_manager.cpp',
+'engine/sector.cpp',
 'font/border_font_effect.cpp',
 'font/fonts.cpp',
 'font/ttf_font.cpp',
-'engine/game_object.cpp',
 'game_session.cpp',
 'geometry_test.cpp',
-'getter.cpp',
 'globals.cpp',
 'graphic_context_state.cpp',
 'gui/automap.cpp',
@@ -111,7 +109,6 @@
 'input/input_manager_sdl.cpp',
 'input/wiimote.cpp',
 'inventory.cpp',
-'objects/laser_pointer.cpp',
 'lisp/getters.cpp',
 'lisp/lexer.cpp',
 'lisp/lisp.cpp',
@@ -122,6 +119,7 @@
 'math/matrix.cpp',
 'math/origin.cpp',
 'math/quaternion.cpp',
+'math/random.cpp',
 'math/rect.cpp',
 'math/vector.cpp',
 'menu_manager.cpp',
@@ -138,14 +136,17 @@
 'objects/elevator.cpp',
 'objects/grenade.cpp',
 'objects/hedgehog.cpp',
+'objects/laser_pointer.cpp',
 'objects/liquid.cpp',
 'objects/nightvision.cpp',
+'objects/pistol.cpp',
 'objects/player.cpp',
 'objects/scriptable_object.cpp',
 'objects/shockwave.cpp',
 'objects/spider_mine.cpp',
 'objects/swarm.cpp',
 'objects/test_object.cpp',
+'objects/trigger.cpp',
 'objects/vrdummy.cpp',
 'particle_viewer.cpp',
 'particles/deform_drawer.cpp',
@@ -155,20 +156,13 @@
 'pda.cpp',
 'physfs/physfs_sdl.cpp',
 'physfs/physfs_stream.cpp',
-'engine/physics.cpp',
-'objects/pistol.cpp',
-'random.cpp',
-'response_curve.cpp',
 'screen.cpp',
 'screen_manager.cpp',
-'engine/script_manager.cpp',
 'scripting/game_objects.cpp',
 'scripting/interface.cpp',
 'scripting/squirrel_error.cpp',
 'scripting/util.cpp',
 'scripting/wrapper.cpp',
-'engine/sector.cpp',
-'sexpr_file_reader.cpp',
 'sound/sound_file.cpp',
 'sound/sound_manager.cpp',
 'sound/sound_source.cpp',
@@ -189,8 +183,14 @@
 'tile/tile_packer.cpp',
 'timer.cpp',
 'title_screen.cpp',
-'objects/trigger.cpp',
 'util.cpp',
+'util/baby_xml.cpp',
+'util/command_line.cpp',
+'util/command_line_generic.cpp',
+'util/file_reader.cpp',
+'util/getter.cpp',
+'util/response_curve.cpp',
+'util/sexpr_file_reader.cpp',
 'view.cpp',
 'windstille_main.cpp',
 ])

Modified: trunk/windstille/src/armature/armature.hpp
===================================================================
--- trunk/windstille/src/armature/armature.hpp	2009-02-11 21:22:01 UTC (rev 2464)
+++ trunk/windstille/src/armature/armature.hpp	2009-02-11 21:47:00 UTC (rev 2465)
@@ -21,7 +21,7 @@
 
 #include <vector>
 #include "bone.hpp"
-#include "file_reader.hpp"
+#include "util/file_reader.hpp"
 
 class Pose;
 

Modified: trunk/windstille/src/armature/mesh.cpp
===================================================================
--- trunk/windstille/src/armature/mesh.cpp	2009-02-11 21:22:01 UTC (rev 2464)
+++ trunk/windstille/src/armature/mesh.cpp	2009-02-11 21:47:00 UTC (rev 2465)
@@ -22,7 +22,7 @@
 #include "util.hpp"
 #include "display/opengl_state.hpp"
 #include "display/texture_manager.hpp"
-#include "file_reader.hpp"
+#include "util/file_reader.hpp"
 #include "armature.hpp"
 #include "mesh.hpp"
 

Modified: trunk/windstille/src/armature/model.cpp
===================================================================
--- trunk/windstille/src/armature/model.cpp	2009-02-11 21:22:01 UTC (rev 2464)
+++ trunk/windstille/src/armature/model.cpp	2009-02-11 21:47:00 UTC (rev 2465)
@@ -18,7 +18,7 @@
 
 #include <iostream>
 #include <stdexcept>
-#include "file_reader.hpp"
+#include "util/file_reader.hpp"
 #include "mesh.hpp"
 #include "model.hpp"
 

Modified: trunk/windstille/src/armature/pose.cpp
===================================================================
--- trunk/windstille/src/armature/pose.cpp	2009-02-11 21:22:01 UTC (rev 2464)
+++ trunk/windstille/src/armature/pose.cpp	2009-02-11 21:47:00 UTC (rev 2465)
@@ -18,7 +18,7 @@
 
 #include <iostream>
 #include <stdexcept>
-#include "file_reader.hpp"
+#include "util/file_reader.hpp"
 #include "pose.hpp"
 
 Pose::Pose(FileReader& reader)

Deleted: trunk/windstille/src/baby_xml.cpp
===================================================================
--- trunk/windstille/src/baby_xml.cpp	2009-02-11 21:22:01 UTC (rev 2464)
+++ trunk/windstille/src/baby_xml.cpp	2009-02-11 21:47:00 UTC (rev 2465)
@@ -1,317 +0,0 @@
-/*
-**  Windstille - A Sci-Fi Action-Adventure Game
-**  Copyright (C) 2005 Ingo Ruhnke <grumbel at gmx.de>
-**
-**  This program is free software: you can redistribute it and/or modify
-**  it under the terms of the GNU General Public License as published by
-**  the Free Software Foundation, either version 3 of the License, or
-**  (at your option) any later version.
-**  
-**  This program is distributed in the hope that it will be useful,
-**  but WITHOUT ANY WARRANTY; without even the implied warranty of
-**  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
-**  GNU General Public License for more details.
-**  
-**  You should have received a copy of the GNU General Public License
-**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
-*/
-
-#include <sstream>
-#include <stdexcept>
-#include <iostream>
-#include "baby_xml.hpp"
-
-class BabyXMLReader
-{
-public:
-  BabyXML* xml;
-  std::string text;
-  int cursor;
-  int line_no;
-  int column_no;
-  
-  BabyXMLReader(const std::string& text_, BabyXML* xml_) 
-    : xml(xml_),
-      text(text_),
-      cursor(0),
-      line_no(0),
-      column_no(0)
-  {
-    std::string content;
-    
-    while(!eof())
-      {
-        char c = look_ahead();
-        switch(c)
-          {
-          case '<':
-            if (!content.empty())
-              {
-                xml->add_node(BabyXML::Node(BabyXML::Node::TEXT, content));
-                content = "";
-              }
-            read_element();
-            break;
-
-          case '&':
-            content += read_entity();
-            break;
-
-          default:
-            content += c;
-            incr_cursor();
-            break;
-          }
-      }
-
-    if (!content.empty())
-      xml->add_node(BabyXML::Node(BabyXML::Node::TEXT, content));
-  }
-
-  void skip_space()
-  {
-    while(true) 
-      {
-        char c = look_ahead();
-        if (c != ' ' && c != '\t') {
-          break;
-        } else {
-          incr_cursor();
-        }
-      }
-  }
-
-  void read_char(char expect)
-  {
-    char c = look_ahead();
-    if (c != expect)
-      {
-        std::ostringstream str;
-        str << "Syntax Error:" << line_no << ":" << column_no 
-            << ": Syntax error: read_char(): expected '" << expect << "' got '" << c << "'";
-        throw std::runtime_error(str.str());
-      }
-    else
-      {
-        incr_cursor();
-      }
-  }
-
-  void read_element()
-  {
-    BabyXML::Node node;
-
-    read_char('<');
-    if (look_ahead() == '/') 
-      {
-        node.type = BabyXML::Node::END_TAG;
-        incr_cursor();
-        node.content = read_identifer();
-      }
-    else
-      {
-        node.type = BabyXML::Node::START_TAG;
-        node.content    = read_identifer();
-        node.attributes = read_attributes();
-      }
-    
-    skip_space();
-    read_char('>');
-
-    xml->add_node(node);
-  }
-
-  /** Read a string of the form: '"your string"' */
-  std::string read_string()
-  {
-    char start = look_ahead();
-    if (start != '\'' && start != '"')
-      {
-        std::ostringstream str;
-        str << "Syntax Error:" << line_no << ":" << column_no 
-            << ": Syntax error: read_string(): expected ' or \" got '" << start << "'";
-        throw std::runtime_error(str.str());
-      }
-    incr_cursor();
-    
-    std::string content;
-    while(true)
-      {
-        char c = look_ahead();
-        if (c == '"' || c == '\'') 
-          {
-            if (c != start)
-              {
-                std::ostringstream str;
-                str << "Syntax Error:" << line_no << ":" << column_no 
-                    << ": Syntax error: read_string(): quote mismatch";
-                throw std::runtime_error(str.str());
-              }
-            incr_cursor();
-            break;
-          } 
-        else if (c == '&') 
-          {
-            c += read_entity();
-          } 
-        else 
-          {
-            incr_cursor();
-            content += c;
-          }
-      }
-    return content;
-  }
-
-  char read_entity()
-  {
-    read_char('&');
-    std::string identifer = read_identifer();
-    read_char(';');
-
-    if (identifer == "quot")
-      return '"';
-    else if (identifer == "gt")
-      return '>';
-    else if (identifer == "lt")
-      return '<';
-    else
-      {
-        std::ostringstream str;
-        str << "Syntax Error:" << line_no << ":" << column_no << ": Unknown entity: '&" + identifer + ";'";
-        throw std::runtime_error(str.str());
-      }
-  }
-  
-  std::vector<BabyXML::Attribute> read_attributes()
-  {
-    std::vector<BabyXML::Attribute> attributes;
-    while(true) 
-      {
-        skip_space();
-
-        char c = look_ahead();
-        if (c == '>' || c == '&' || c == '<' || c == ';')
-          {
-            break;
-          }
-
-        attributes.push_back(BabyXML::Attribute());
-
-        attributes.back().name = read_identifer();
-        read_char('=');
-        attributes.back().value = read_string();
-      }
-    return attributes;
-  }
-
-  std::string read_identifer()
-  {
-    std::string identifer;
-    while(true) 
-      {
-        char c = look_ahead();
-        if (c == '<' || c == '>' || c == '&' || c == ';' || c == ' ' || c == '\t' || c == '=') {
-          break;
-        } else {
-          identifer += c;
-          incr_cursor();
-        }
-      }
-
-    if (identifer.empty())
-      {
-        std::ostringstream str;
-        str << "Syntax Error:" << line_no << ":" << column_no << ": Identifer is empty";
-        throw std::runtime_error(str.str());
-      }
-
-    return identifer;
-  }
-
-  bool eof()
-  {
-    return cursor >= int(text.size());
-  }
-
-  char look_ahead()
-  {
-    if (cursor >= int(text.size()))
-      {
-        std::ostringstream str;
-        str << "Syntax Error:" << line_no << ":" << column_no << ": Premature end of text";
-        throw std::runtime_error(str.str());
-      }
-
-    return text[cursor];
-  }
-
-  void incr_cursor()
-  {
-    cursor += 1;
-    if (text[cursor] == '\n')
-      {
-        line_no += 1;
-        column_no = 0;
-      }
-    else
-      {
-        column_no += 1;
-      }
-  }
-};
-
-BabyXML::BabyXML(const std::string& text)
-{
-  BabyXMLReader(text, this);
-}
-
-BabyXML::~BabyXML()
-{
-  
-}
-
-void
-BabyXML::add_node(const Node& node)
-{
-  nodes.push_back(node);
-}
-
-#ifdef __TEST__
-// g++ -Wall -Werror -O2 -g -o baby_xml baby_xml.cpp -D__TEST__ 
-#include <iostream>
-
-int main(int argc, char** argv)
-{
-  if (argc != 2)
-    {
-      std::cout << "Usage: " << argv[0] << " STRING" << std::endl;
-    }
-  else
-    {
-      // BabyXML xml("<strong size='10'>Hello &lt; World&gt; <b>&quot;blabla&quot;</b> Blablub</strong>");
-      BabyXML xml(argv[1]);
-
-      for(BabyXML::iterator i = xml.begin(); i != xml.end(); ++i)
-        {
-          if (i->type == BabyXML::Node::START_TAG)
-            std::cout << "STARTTAG: ";
-          else if (i->type == BabyXML::Node::END_TAG)
-            std::cout << "ENDTAG: ";
-          else if (i->type == BabyXML::Node::TEXT)
-            std::cout << "TEXT: ";
-
-          std::cout << "'" << i->content << "'";
-
-          for(std::vector<BabyXML::Attribute>::iterator j = i->attributes.begin(); j != i->attributes.end(); ++j)
-            {
-              std::cout << " " << j->name << "=" << j->value;
-            }
-
-          std::cout << std::endl;
-        }
-    }
-}
-#endif
-
-/* EOF */

Deleted: trunk/windstille/src/baby_xml.hpp
===================================================================
--- trunk/windstille/src/baby_xml.hpp	2009-02-11 21:22:01 UTC (rev 2464)
+++ trunk/windstille/src/baby_xml.hpp	2009-02-11 21:47:00 UTC (rev 2465)
@@ -1,67 +0,0 @@
-/*
-**  Windstille - A Sci-Fi Action-Adventure Game
-**  Copyright (C) 2005 Ingo Ruhnke <grumbel at gmx.de>
-**
-**  This program is free software: you can redistribute it and/or modify
-**  it under the terms of the GNU General Public License as published by
-**  the Free Software Foundation, either version 3 of the License, or
-**  (at your option) any later version.
-**  
-**  This program is distributed in the hope that it will be useful,
-**  but WITHOUT ANY WARRANTY; without even the implied warranty of
-**  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
-**  GNU General Public License for more details.
-**  
-**  You should have received a copy of the GNU General Public License
-**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
-*/
-
-#ifndef HEADER_WINDSTILLE_BABY_XML_HPP
-#define HEADER_WINDSTILLE_BABY_XML_HPP
-
-#include <string>
-#include <vector>
-
-/** Parser for a flat XML-like tag soup, it doesn't support recursive
-    structures */
-class BabyXML
-{
-public:
-  struct Attribute
-  {
-    std::string name;
-    std::string value;
-  };
-
-  struct Node
-  {
-    enum Type { NONE, TEXT, START_TAG, END_TAG, ENTITY };
-    typedef std::vector<Attribute> Attributes;
-
-    Type type;
-    std::string content;
-    Attributes attributes;
-
-    Node() : type(NONE) {}
-    Node(Type type_, const std::string& content_ = std::string()) : type(type_), content(content_) {}
-  };
-
-  typedef std::vector<Node> Nodes;
-  typedef Nodes::iterator       iterator;
-  typedef Nodes::const_iterator const_iterator;
-
-  Nodes nodes;
-
-  /** Parse the given \a text and construct the nodes from it */
-  BabyXML(const std::string& text);
-  ~BabyXML();
-
-  void add_node(const Node& node);
-
-  iterator begin() { return nodes.begin(); }
-  iterator end()   { return nodes.end(); }
-};
-
-#endif
-
-/* EOF */

Deleted: trunk/windstille/src/color.hpp
===================================================================
--- trunk/windstille/src/color.hpp	2009-02-11 21:22:01 UTC (rev 2464)
+++ trunk/windstille/src/color.hpp	2009-02-11 21:47:00 UTC (rev 2465)
@@ -1,37 +0,0 @@
-/*
-**  Windstille - A Sci-Fi Action-Adventure Game
-**  Copyright (C) 2000 Ingo Ruhnke <grumbel at gmx.de>
-**
-**  This program is free software: you can redistribute it and/or modify
-**  it under the terms of the GNU General Public License as published by
-**  the Free Software Foundation, either version 3 of the License, or
-**  (at your option) any later version.
-**  
-**  This program is distributed in the hope that it will be useful,
-**  but WITHOUT ANY WARRANTY; without even the implied warranty of
-**  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
-**  GNU General Public License for more details.
-**  
-**  You should have received a copy of the GNU General Public License
-**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
-*/
-
-#ifndef HEADER_WINDSTILLE_COLOR_HPP
-#define HEADER_WINDSTILLE_COLOR_HPP
-
-class Color
-{
-public:
-  Color()
-    : r(0), g(0), b(0), a(1.0)
-  { }
-  Color(float r, float g, float b, float a = 1.0)
-    : r(r), g(g), b(b), a(a)
-  { }
-
-  float r, g, b, a;
-};
-
-#endif
-
-/* EOF */

Deleted: trunk/windstille/src/command_line.cpp
===================================================================
--- trunk/windstille/src/command_line.cpp	2009-02-11 21:22:01 UTC (rev 2464)
+++ trunk/windstille/src/command_line.cpp	2009-02-11 21:47:00 UTC (rev 2465)
@@ -1,96 +0,0 @@
-/*
-**  ClanLib SDK
-**  Copyright (c) 1997-2005 The ClanLib Team
-**
-**  This software is provided 'as-is', without any express or implied
-**  warranty.  In no event will the authors be held liable for any damages
-**  arising from the use of this software.
-**
-**  Permission is granted to anyone to use this software for any purpose,
-**  including commercial applications, and to alter it and redistribute it
-**  freely, subject to the following restrictions:
-**
-**  1. The origin of this software must not be misrepresented; you must not
-**     claim that you wrote the original software. If you use this software
-**     in a product, an acknowledgment in the product documentation would be
-**     appreciated but is not required.
-**  2. Altered source versions must be plainly marked as such, and must not be
-**     misrepresented as being the original software.
-**  3. This notice may not be removed or altered from any source distribution.
-**
-**  Note: Some of the libraries ClanLib may link to may have additional
-**  requirements or restrictions.
-**
-**  File Author(s):
-**
-**    Magnus Norddahl
-**    (if your name is missing here, please add it)
-*/
-
-#include "command_line.hpp"
-#include "command_line_generic.hpp"
-
-CommandLine::CommandLine()
-{
-	impl = new CommandLine_Generic();
-}
-
-CommandLine::~CommandLine()
-{
-	delete impl;
-}
-
-void CommandLine::parse_args(int argc, char** argv)
-{
-	impl->parse_args(argc, argv);
-}
-
-void CommandLine::print_help()
-{
-	impl->print_help();
-}
-
-void CommandLine::set_help_indent(int i)
-{
-	impl->set_help_indent(i);
-}
-
-void CommandLine::add_usage(const std::string& usage)
-{
-	impl->add_usage(usage);
-}
-
-void CommandLine::add_doc(const std::string& doc)
-{
-	impl->add_doc(doc);
-}
-
-void CommandLine::add_group(const std::string& grouptopic)
-{
-	impl->add_group(grouptopic);
-}
-
-void CommandLine::add_option(
-	int key, 
-	const std::string& long_option, 
-	const std::string& argument,
-	const std::string& help,
-	bool visible)
-{
-	impl->add_option(key, long_option, argument, help, visible);
-}
-
-bool CommandLine::next()
-{
-	return impl->next();
-}
-
-int CommandLine::get_key()
-{
-	return impl->get_key();
-}
-
-std::string CommandLine::get_argument()
-{
-	return impl->get_argument();
-}

Deleted: trunk/windstille/src/command_line.hpp
===================================================================
--- trunk/windstille/src/command_line.hpp	2009-02-11 21:22:01 UTC (rev 2464)
+++ trunk/windstille/src/command_line.hpp	2009-02-11 21:47:00 UTC (rev 2465)
@@ -1,157 +0,0 @@
-/*
-**  ClanLib SDK
-**  Copyright (c) 1997-2005 The ClanLib Team
-**
-**  This software is provided 'as-is', without any express or implied
-**  warranty.  In no event will the authors be held liable for any damages
-**  arising from the use of this software.
-**
-**  Permission is granted to anyone to use this software for any purpose,
-**  including commercial applications, and to alter it and redistribute it
-**  freely, subject to the following restrictions:
-**
-**  1. The origin of this software must not be misrepresented; you must not
-**     claim that you wrote the original software. If you use this software
-**     in a product, an acknowledgment in the product documentation would be
-**     appreciated but is not required.
-**  2. Altered source versions must be plainly marked as such, and must not be
-**     misrepresented as being the original software.
-**  3. This notice may not be removed or altered from any source distribution.
-**
-**  Note: Some of the libraries ClanLib may link to may have additional
-**  requirements or restrictions.
-**
-**  File Author(s):
-**
-**    Magnus Norddahl
-**    (if your name is missing here, please add it)
-*/
-
-//! clanCore="System"
-//! header=core.h
-
-#ifndef HEADER_COMMAND_LINE_HPP
-#define HEADER_COMMAND_LINE_HPP
-
-#if _MSC_VER > 1000
-#pragma once
-#endif
-
-#include <string>
-#include <vector>
-
-class CommandLine_Generic;
-
-//: Helper class to parse command line arguments
-//- !group=Core/System!
-//- !header=core.h!
-//- <p>The CommandLine class helps to parse command line arguments, namely
-//- the argc/argv pair that you get from main(). CommandLine mimics
-//- getopt_long() behaviour as closely as possible, while providing a
-//- cleaner interface and a few additional features, like automatic
-//- generation of '--help' output. CommandLine can parse long arguments
-//- in the following styles:</p>
-//-
-//- <p>program --file FILENAME<br>
-//- program --file=FILENAME</p>
-//-
-//- <p>Short arguments are handled like this:</p>
-//-
-//- <p>program -f FILENAME</p>
-//-
-//- <p>Concatenating short arguments is also supported, so that:</p>
-//- 
-//- <p>program -f -a -b FILENAME</p>
-//-
-//- <p>is equivalent to:</p>
-//-
-//- <p>program -fab FILENAME</p>
-//-
-//- <p>Non-option arguments (aka rest arguments) are supported as well:</p>
-//-
-//- <p>program SOMEFILE SOMEOTHERFILE ...</p>
-//- 
-//- <p>To avoid ambiguity when a filename starts with '-' CommandLine stops
-//- parsing arguments after the first encounter of a '--', so in</p>
-//-
-//- <p>program -f -b -- -f -b</p>
-//-
-//- <p>In the above example the first '-f -b' options are treated as
-//- normal while the ones after the '--' are treated as rest arguments
-//- (aka filenames in most programs).</p>
-class CommandLine
-{
-//! Construction:
-public:
-	CommandLine();
-
-	~CommandLine();
-
-//! Attributes:
-public:
-	enum
-	{
-		REST_ARG  = -2
-	};
-
-	//: Return the key of the current option
-	int get_key();
-
-	//: Return the argument to the current option
-	std::string get_argument();
-
-//! Operations:
-public:
-	//: Change the indention used for the help message, default is 18
-	void set_help_indent(int i);
-
-	//: Add a usage line to the help output, usage is for example
-	//: "[OPTIONS]... FILE", the program name will get appended
-	//: automatically
-	void add_usage(const std::string& usage);
-
-	//: Adds extra documentation to the help output, should only be
-	//: used at the beginning or at the end, to
-	void add_doc(const std::string& doc);
-	
-	//: Starts a new group of options, the grouptopic gets printed
-	//: above the group of options in the print_help() output
-	void add_group(const std::string& grouptopic);
-  
-	//: Adds a option to the parser
-	//param key: a letter for a short-option or a numeric value
-	//param key: larger than 255 that identifies the option
-	//param long_option: the long name of this option or "" if non
-	//param long_option: should be used for this option
-	//param argument: the type of the argument that this option
-	//param argument: requires (i.e. FILE, SIZE, WIDTH, etc.) or "" if no argument is
-	//param argument: required
-	//param help: the help string for this option
-	//param visible: true if the option should be listed in the help
-	//param visible: output, false will not list it in the help output which might
-	//param visible: be usefull for cheat-options or backward-compability options
-	//param visible: than would only clutter the help output
-	void add_option(
-		int key,
-		const std::string& long_option, 
-		const std::string& argument,
-		const std::string& help,
-		bool visible = true);
-	
-	//: Parse the options arcording to the options added with
-	//: add_option(), result of the parsing is accessible via
-	//: next() and get_key()/get_argument()
-	void parse_args(int argc, char** argv);
-
-	//: Print the help output, normaly done via a --help option
-	void print_help();
-
-	//: Goto the next option
-	bool next();
-
-//! Implementation:
-private:
-	CommandLine_Generic* impl;
-};
-
-#endif

Deleted: trunk/windstille/src/command_line_generic.cpp
===================================================================
--- trunk/windstille/src/command_line_generic.cpp	2009-02-11 21:22:01 UTC (rev 2464)
+++ trunk/windstille/src/command_line_generic.cpp	2009-02-11 21:47:00 UTC (rev 2465)
@@ -1,336 +0,0 @@
-/*
-**  ClanLib SDK
-**  Copyright (c) 1997-2005 The ClanLib Team
-**
-**  This software is provided 'as-is', without any express or implied
-**  warranty.  In no event will the authors be held liable for any damages
-**  arising from the use of this software.
-**
-**  Permission is granted to anyone to use this software for any purpose,
-**  including commercial applications, and to alter it and redistribute it
-**  freely, subject to the following restrictions:
-**
-**  1. The origin of this software must not be misrepresented; you must not
-**     claim that you wrote the original software. If you use this software
-**     in a product, an acknowledgment in the product documentation would be
-**     appreciated but is not required.
-**  2. Altered source versions must be plainly marked as such, and must not be
-**     misrepresented as being the original software.
-**  3. This notice may not be removed or altered from any source distribution.
-**
-**  Note: Some of the libraries ClanLib may link to may have additional
-**  requirements or restrictions.
-**
-**  File Author(s):
-**
-**    Magnus Norddahl
-**    (if your name is missing here, please add it)
-*/
-
-#include <iomanip>
-#include <iostream>
-#include <stdexcept>
-#include <stdio.h>
-
-#include "command_line_generic.hpp"
-
-
-#ifdef WIN32
-#define snprintf _snprintf
-#endif
-
-CommandLine_Generic::CommandLine_Generic()
-{
-  help_indent = 18;
-}
-
-void CommandLine_Generic::parse_args(int argc, char** argv)
-{
-  programm = argv[0];
-
-  for(int i = 1; i < argc; ++i) 
-    {
-      if (argv[i][0] == '-') 
-        {
-          if (argv[i][1] == '-') 
-            {
-              // We got a long option
-              if (argv[i][2] == '\0') { 
-                // Got a '--', so we stop evaluating arguments
-                ++i;
-                while(i < argc) 
-                  {
-                    read_option(CommandLine::REST_ARG, argv[i]);
-                    ++i;
-                  }
-              } 
-              else
-                {
-                  std::string opt = argv[i] + 2;
-                  std::string long_opt;
-                  std::string long_opt_arg;
-
-                  std::string::size_type pos = opt.find('=');
-
-                  if (pos != std::string::npos) 
-                    {
-                      long_opt = opt.substr(0, pos);
-                      long_opt_arg = opt.substr(pos+1);
-                    }
-                  else 
-                    {
-                      long_opt = opt;
-                    }
-
-                  // Long Option
-                  Option* option = lookup_long_option(long_opt);
-
-                  if (option) 
-                    {
-                      if (option->argument.empty()) 
-                        {
-                          read_option(option->key, "");
-                        } 
-                      else
-                        {
-                          if (pos != std::string::npos) 
-                            {
-                              read_option(option->key, long_opt_arg);
-                            }
-                          else
-                            {            
-                              if (i == argc - 1) 
-                                {
-                                  throw std::runtime_error("option '" + std::string(argv[i]) + "' requires an argument");
-                                }
-                              else 
-                                {
-                                  read_option(option->key, argv[i + 1]);
-                                  ++i;
-                                }
-                            }
-                        }
-                    }
-                  else
-                    {
-                      throw std::runtime_error("unrecognized option '" + std::string(argv[i]) + "'");
-                    }
-                }
-            } 
-          else 
-            {
-              // We got a short option
-              char* p = argv[i] + 1;
-          
-              if (*p != '\0') {
-                // Handle option chains
-                while (*p) 
-                  {
-                    // Short option(s)
-                    Option* option = lookup_short_option(*p);
-
-                    if (option) 
-                      {
-                        if (option->argument.empty()) 
-                          {
-                            read_option(option->key, "");
-                          } 
-                        else 
-                          {
-                            if (i == argc - 1 || *(p+1) != '\0') 
-                              {
-                                // No more arguments
-                                throw std::runtime_error("option requires an argument -- " + std::string(1, *p));
-                              }
-                            else
-                              {
-                                read_option(option->key, argv[i + 1]);
-                                ++i;
-                              }
-                          }
-                      } 
-                    else 
-                      {
-                        throw std::runtime_error("invalid option -- " + std::string(1, *p));
-                      }
-                    ++p; 
-                  }
-              } 
-              else
-                {
-                  read_option(CommandLine::REST_ARG, "-");
-                } 
-            }
-        } 
-      else
-        {
-          read_option(CommandLine::REST_ARG, argv[i]);
-        }
-    }
-
-  current_option = parsed_options.end();
-}
-
-CommandLine_Generic::Option *CommandLine_Generic::lookup_short_option(char short_option)
-{
-  for(Options::iterator i = options.begin(); i != options.end(); ++i)
-    {
-      if (i->key == short_option)
-        return &(*i);
-    }
-  return 0;
-}
-
-CommandLine_Generic::Option *CommandLine_Generic::lookup_long_option(const std::string& long_option)
-{
-  for(Options::iterator i = options.begin(); i != options.end(); ++i)
-    {
-      if (i->long_option == long_option)
-        return &*i;
-    }
-  return 0;
-}
-
-void CommandLine_Generic::read_option(int key, const std::string& argument)
-{
-  ParsedOption parsed_option;
-  
-  parsed_option.key = key;
-  parsed_option.argument = argument;
-
-  parsed_options.push_back(parsed_option);
-}
-
-void CommandLine_Generic::print_help()
-{
-  bool first_usage = true;
-  for(Options::iterator i = options.begin(); i != options.end(); ++i)
-    {
-      if (i->visible)
-        {
-          if (i->key == USAGE) 
-            {
-              if (first_usage) 
-                {
-                  std::cout << "Usage: " << programm << " " <<  i->help << std::endl; 
-                  first_usage = false;
-                }
-              else
-                {
-                  std::cout << "or:    " << programm << " " << i->help << std::endl; 
-                }
-            } 
-          else if (i->key == GROUP) 
-            {
-              if (i != options.begin())
-                std::cout << std::endl;
-              std::cout << i->help << std::endl;
-            }
-          else if (i->key == DOC) 
-            {
-              if (i != options.begin())
-                std::cout << std::endl;
-              std::cout << i->help << std::endl;
-            }
-          else 
-            {
-              char option[256]   = { 0 };
-              char argument[256] = { 0 };
-
-              if (i->key > 255 || i->key < 0)
-                snprintf(option, 256, "--%s", i->long_option.c_str());
-              else if (i->long_option.empty())
-                snprintf(option, 256, "-%c", char(i->key));
-              else
-                snprintf(option, 256, "-%c, --%s", char(i->key), i->long_option.c_str());
-
-              if (!i->argument.empty())
-                {
-                  if (i->long_option.empty())
-                    snprintf(argument, 256, " %s", i->argument.c_str());
-                  else
-                    snprintf(argument, 256, "=%s", i->argument.c_str());
-                }
-
-              std::cout << "  " 
-                        << std::setiosflags(std::ios::left) << std::setw(help_indent)
-                        << (std::string(option) + std::string(argument)) << std::setw(0)
-                        << " " << i->help << std::endl;
-            }
-        }
-    }
-  std::cout << std::endl;
-}
-
-void CommandLine_Generic::add_usage(const std::string& usage)
-{
-  Option option;
-
-  option.key          = USAGE;
-  option.help         = usage;
-  option.visible      = true;
-
-  options.push_back(option);   
-}
-
-void CommandLine_Generic::add_doc(const std::string& grouptopic)
-{
-  Option option;
-
-  option.key          = DOC;
-  option.help         = grouptopic;
-  option.visible      = true;
-
-  options.push_back(option);  
-}
-
-void CommandLine_Generic::add_group(const std::string& grouptopic)
-{
-  Option option;
-
-  option.key          = GROUP;
-  option.help         = grouptopic;
-  option.visible      = true;
-
-  options.push_back(option);  
-}
-
-void CommandLine_Generic::add_option(int key, 
-                                        const std::string& long_option, 
-                                        const std::string& argument,
-                                        const std::string& help,
-                                        bool visible)
-{
-  Option option;
-
-  option.key          = key;
-  option.help         = help;
-  option.long_option  = long_option;
-  option.argument     = argument;
-  option.visible      = visible;
-
-  options.push_back(option);
-}
-
-bool CommandLine_Generic::next()
-{
-  if (current_option == parsed_options.end()) 
-    {
-      (current_option = parsed_options.begin());
-      return current_option != parsed_options.end();
-    }
-  else
-    {
-      return (++current_option) != parsed_options.end();
-    }
-}
-
-int CommandLine_Generic::get_key()
-{
-  return current_option->key;
-}
-
-std::string CommandLine_Generic::get_argument()
-{
-  return current_option->argument;
-}

Deleted: trunk/windstille/src/command_line_generic.hpp
===================================================================
--- trunk/windstille/src/command_line_generic.hpp	2009-02-11 21:22:01 UTC (rev 2464)
+++ trunk/windstille/src/command_line_generic.hpp	2009-02-11 21:47:00 UTC (rev 2465)
@@ -1,111 +0,0 @@
-/*
-**  ClanLib SDK
-**  Copyright (c) 1997-2005 The ClanLib Team
-**
-**  This software is provided 'as-is', without any express or implied
-**  warranty.  In no event will the authors be held liable for any damages
-**  arising from the use of this software.
-**
-**  Permission is granted to anyone to use this software for any purpose,
-**  including commercial applications, and to alter it and redistribute it
-**  freely, subject to the following restrictions:
-**
-**  1. The origin of this software must not be misrepresented; you must not
-**     claim that you wrote the original software. If you use this software
-**     in a product, an acknowledgment in the product documentation would be
-**     appreciated but is not required.
-**  2. Altered source versions must be plainly marked as such, and must not be
-**     misrepresented as being the original software.
-**  3. This notice may not be removed or altered from any source distribution.
-**
-**  Note: Some of the libraries ClanLib may link to may have additional
-**  requirements or restrictions.
-**
-**  File Author(s):
-**
-**    Magnus Norddahl
-**    (if your name is missing here, please add it)
-*/
-
-#ifndef HEADER_COMMAND_LINE_GENERIC_HPP
-#define HEADER_COMMAND_LINE_GENERIC_HPP
-
-#if _MSC_VER > 1000
-#pragma once
-#endif
-
-#include <string>
-#include <vector>
-#include "command_line.hpp"
-
-class CommandLine_Generic
-{
-private:
-	int help_indent;
-
-	std::string programm;
-
-	struct Option 
-	{
-		int key;
-		std::string help;
-		std::string long_option;
-		std::string argument;
-		bool visible;
-	};
-  
-	typedef std::vector<Option> Options;
-	Options options;
-
-	struct ParsedOption
-	{
-		int key;
-		std::string argument;
-	};
-
-	typedef std::vector<ParsedOption> ParsedOptions;
-	ParsedOptions parsed_options;
-	ParsedOptions::iterator current_option;
-
-	enum
-	{
-		GROUP     = -3,
-		DOC       = -4,
-		USAGE     = -5
-	};
-
-public:  
-	CommandLine_Generic();
-
-	void set_help_indent(int i) { help_indent = i; }
-
-	void add_usage(const std::string& usage);
-	void add_doc(const std::string& doc);
-	void add_group(const std::string& grouptopic);
-  
-	void add_option(int key,
-						 const std::string& long_option, 
-						 const std::string& argument,
-						 const std::string& help,
-						 bool visible = true);
-
-	void parse_args(int argc, char** argv);
-	void print_help();
-  
-	bool next();
-	int get_key();
-	std::string get_argument();
-
-private:
-	void read_option(int id, const std::string& argument);
-
-	/** Find the Option structure that matches \a short_option */
-	Option* lookup_short_option(char short_option);
-
-	/** Find the Option structure that matches \a long_option */
-	Option* lookup_long_option (const std::string& long_option);
-};
-
-#endif
-
-/* EOF */

Modified: trunk/windstille/src/config.cpp
===================================================================
--- trunk/windstille/src/config.cpp	2009-02-11 21:22:01 UTC (rev 2464)
+++ trunk/windstille/src/config.cpp	2009-02-11 21:47:00 UTC (rev 2465)
@@ -22,8 +22,8 @@
 #include <memory>
 #include <iostream>
 #include "config.hpp"
-#include "sexpr_file_reader.hpp"
-#include "command_line.hpp"
+#include "util/sexpr_file_reader.hpp"
+#include "util/command_line.hpp"
 #include "globals.hpp"
 
 #define _(A) A

Modified: trunk/windstille/src/console.cpp
===================================================================
--- trunk/windstille/src/console.cpp	2009-02-11 21:22:01 UTC (rev 2464)
+++ trunk/windstille/src/console.cpp	2009-02-11 21:47:00 UTC (rev 2465)
@@ -463,7 +463,7 @@
           const SQChar *s;
           if (SQ_SUCCEEDED(sq_getstring(v,-2, &s)))
             {
-              console << s << " -> " << scripting::squirrel2string(v, -1) << std::endl;
+              console << s << " -> " << Scripting::squirrel2string(v, -1) << std::endl;
             }
           else
             {
@@ -506,7 +506,7 @@
               {
                 // FIXME: This does only work when somebody is doing a 'return', i.e. almost never
                 if (sq_gettype(vm, -1) != OT_NULL)
-                  console << scripting::squirrel2string(vm, -1) << std::endl;
+                  console << Scripting::squirrel2string(vm, -1) << std::endl;
                 // else
                 //   console << "(null)" << std::endl;
               }

Copied: trunk/windstille/src/display/color.hpp (from rev 2463, trunk/windstille/src/color.hpp)


Property changes on: trunk/windstille/src/display/color.hpp
___________________________________________________________________
Name: svn:keywords
   + Id
Name: svn:mergeinfo
   + 

Modified: trunk/windstille/src/engine/game_object.hpp
===================================================================
--- trunk/windstille/src/engine/game_object.hpp	2009-02-11 21:22:01 UTC (rev 2464)
+++ trunk/windstille/src/engine/game_object.hpp	2009-02-11 21:47:00 UTC (rev 2465)
@@ -20,7 +20,7 @@
 #define HEADER_WINDSTILLE_GAME_OBJECT_HPP
 
 #include <string>
-#include "file_reader.hpp"
+#include "util/file_reader.hpp"
 #include "display/scene_context.hpp"
 #include "refcounter.hpp"
 

Modified: trunk/windstille/src/engine/script_manager.cpp
===================================================================
--- trunk/windstille/src/engine/script_manager.cpp	2009-02-11 21:22:01 UTC (rev 2464)
+++ trunk/windstille/src/engine/script_manager.cpp	2009-02-11 21:47:00 UTC (rev 2465)
@@ -18,7 +18,7 @@
 #include "scripting/squirrel_error.hpp"
 #include "physfs/physfs_stream.hpp"
 
-using namespace scripting;
+using namespace Scripting;
 
 ScriptManager* script_manager = 0;
 
@@ -58,7 +58,7 @@
   sq_setprintfunc(v, printfunc);
   
   // register windstille API
-  scripting::register_windstille_wrapper(v);
+  Scripting::register_windstille_wrapper(v);
 }
 
 ScriptManager::~ScriptManager()

Modified: trunk/windstille/src/engine/sector.cpp
===================================================================
--- trunk/windstille/src/engine/sector.cpp	2009-02-11 21:22:01 UTC (rev 2464)
+++ trunk/windstille/src/engine/sector.cpp	2009-02-11 21:47:00 UTC (rev 2465)
@@ -19,7 +19,7 @@
 #include <iostream>
 #include <sstream>
 #include <stdexcept>
-#include "sexpr_file_reader.hpp"
+#include "util/sexpr_file_reader.hpp"
 #include "globals.hpp"
 #include "display/scene_context.hpp"
 #include "objects/background_gradient.hpp"
@@ -263,7 +263,7 @@
 void
 Sector::remove_object_from_squirrel(GameObject* object)
 {
-  using namespace scripting;
+  using namespace Scripting;
 
   // get objects table
   HSQUIRRELVM v = script_manager->get_vm();
@@ -295,30 +295,30 @@
 {
   ScriptableObject* script_obj = dynamic_cast<ScriptableObject*> (object);
   if(script_obj) {
-    create_squirrel_instance(v, new scripting::ScriptableObject(script_obj),
+    create_squirrel_instance(v, new Scripting::ScriptableObject(script_obj),
                              true);
     return;
   }
   
   TestObject* tobj = dynamic_cast<TestObject*> (object);
   if(tobj) {
-    create_squirrel_instance(v, new scripting::TestObject(tobj), true);
+    create_squirrel_instance(v, new Scripting::TestObject(tobj), true);
     return;
   }                                                                             
 
   Player* player = dynamic_cast<Player*> (object);
   if(player) {
-    create_squirrel_instance(v, new scripting::Player(player), true);
+    create_squirrel_instance(v, new Scripting::Player(player), true);
     return;
   }
 
-  create_squirrel_instance(v, new scripting::GameObject(object), true);
+  create_squirrel_instance(v, new Scripting::GameObject(object), true);
 }
 
 void
 Sector::expose_object_to_squirrel(GameObject* object)
 {
-  using namespace scripting;
+  using namespace Scripting;
 
   // get objects table
   HSQUIRRELVM v = script_manager->get_vm();

Modified: trunk/windstille/src/engine/sector.hpp
===================================================================
--- trunk/windstille/src/engine/sector.hpp	2009-02-11 21:22:01 UTC (rev 2464)
+++ trunk/windstille/src/engine/sector.hpp	2009-02-11 21:47:00 UTC (rev 2465)
@@ -21,7 +21,7 @@
 
 #include <string>
 #include <vector>
-#include "color.hpp"
+#include "display/color.hpp"
 
 class FileReader;
 class GameObject;

Deleted: trunk/windstille/src/file_reader.cpp
===================================================================
--- trunk/windstille/src/file_reader.cpp	2009-02-11 21:22:01 UTC (rev 2464)
+++ trunk/windstille/src/file_reader.cpp	2009-02-11 21:47:00 UTC (rev 2465)
@@ -1,169 +0,0 @@
-/*
-**  Windstille - A Sci-Fi Action-Adventure Game
-**  Copyright (C) 2002 Ingo Ruhnke <grumbel at gmx.de>
-**
-**  This program is free software: you can redistribute it and/or modify
-**  it under the terms of the GNU General Public License as published by
-**  the Free Software Foundation, either version 3 of the License, or
-**  (at your option) any later version.
-**  
-**  This program is distributed in the hope that it will be useful,
-**  but WITHOUT ANY WARRANTY; without even the implied warranty of
-**  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
-**  GNU General Public License for more details.
-**  
-**  You should have received a copy of the GNU General Public License
-**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
-*/
-
-#include "lisp/parser.hpp"
-#include "sexpr_file_reader.hpp"
-#include "file_reader.hpp"
-#include "file_reader_impl.hpp"
-
-FileReader
-FileReader::parse(const std::string& filename)
-{
-  lisp::Lisp* root = lisp::Parser::parse(filename);
-  if (!root)
-    {
-      std::ostringstream msg;
-      msg << "'" << filename << "': file not found";
-      throw std::runtime_error(msg.str());
-    }
-  else if (root && root->get_type() == lisp::Lisp::TYPE_LIST && root->get_list_size() >= 1)
-    {
-      return SExprFileReader(root, root->get_list_elem(0));
-    }
-  else
-    {
-      std::ostringstream msg;
-      msg << "'" << filename << "': not a valid sexpr file";
-      throw std::runtime_error(msg.str());
-    }
-}
-
-FileReader::FileReader(boost::shared_ptr<FileReaderImpl> impl_)
-  : impl(impl_)
-{
-}
-
-FileReader::FileReader()
-{
-}
-
-std::string
-FileReader::get_name() const
-{
-  if (impl.get())
-    return impl->get_name();
-  else
-    return "";
-}
-
-bool
-FileReader::read(const char* name, int& value)
-{
-  if (impl.get())
-    return impl->read_int(name, value);
-  else
-    return false;
-}
-
-bool
-FileReader::read(const char* name, float& value)
-{
-  if (impl.get())
-    return impl->read_float(name, value);
-  else
-    return false;
-}
-
-bool
-FileReader::read(const char* name, bool& value)
-{
-  if (impl.get())
-    return impl->read_bool(name, value);
-  else
-    return false;
-}
-
-bool
-FileReader::read(const char* name, std::string& value)
-{
-  if (impl.get())
-    return impl->read_string(name, value);
-  else
-    return false;
-}
-
-bool
-FileReader::read(const char* name, std::vector<int>& value)
-{
-  if (impl.get())
-    return impl->get(name, value);
-  else
-    return false;
-}
-
-bool
-FileReader::read(const char* name, std::vector<bool>&   value)
-{
-  if (impl.get())
-    return impl->get(name, value);
-  else
-    return false;  
-}
-
-bool
-FileReader::read(const char* name, std::vector<std::string>& value)
-{
-  if (impl.get())
-    return impl->get(name, value);
-  else
-    return false;
-}
-
-bool
-FileReader::read(const char* name, std::vector<float>& value)
-{
-  if (impl.get())
-    return impl->get(name, value);
-  else
-    return false;
-}
-
-bool
-FileReader::read(const char* name, FileReader& reader)
-{
-  if (impl.get())
-    return impl->read_section(name, reader);
-  else
-    return false;
-}
-
-std::vector<std::string>
-FileReader::get_section_names() const
-{
-  if (impl.get())
-    return impl->get_section_names();
-  else
-    return std::vector<std::string>();
-}
-
-std::vector<FileReader>
-FileReader::get_sections() const
-{
-  if (impl.get())
-    return impl->get_sections();
-  else
-    return std::vector<FileReader>();
-}
-
-void
-FileReader::print_unused_warnings(const std::string& title) const
-{
-  // unimplemented
-}
-
-/* EOF */

Deleted: trunk/windstille/src/file_reader.hpp
===================================================================
--- trunk/windstille/src/file_reader.hpp	2009-02-11 21:22:01 UTC (rev 2464)
+++ trunk/windstille/src/file_reader.hpp	2009-02-11 21:47:00 UTC (rev 2465)
@@ -1,86 +0,0 @@
-/*
-**  Windstille - A Sci-Fi Action-Adventure Game
-**  Copyright (C) 2002 Ingo Ruhnke <grumbel at gmx.de>
-**
-**  This program is free software: you can redistribute it and/or modify
-**  it under the terms of the GNU General Public License as published by
-**  the Free Software Foundation, either version 3 of the License, or
-**  (at your option) any later version.
-**  
-**  This program is distributed in the hope that it will be useful,
-**  but WITHOUT ANY WARRANTY; without even the implied warranty of
-**  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
-**  GNU General Public License for more details.
-**  
-**  You should have received a copy of the GNU General Public License
-**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
-*/
-
-#ifndef HEADER_WINDSTILLE_FILE_READER_HPP
-#define HEADER_WINDSTILLE_FILE_READER_HPP
-
-#include <string>
-#include <vector>
-#include "getter.hpp"
-#include <boost/shared_ptr.hpp>
-
-class FileReaderImpl;
-
-/** Interface to read name/value pairs out of some kind of file or
-    structure */
-class FileReader
-{
-public:
-  static FileReader parse(const std::string& filename);
-
-  FileReader(boost::shared_ptr<FileReaderImpl> impl_);
-  FileReader();
-
-  /** Name of the current section */
-  std::string get_name() const;
-
-  std::vector<std::string> get_section_names() const;
-  std::vector<FileReader>  get_sections() const;
-
-  /** Generic getter function for non-standard types, see getter.hpp */
-  template<typename T>
-  bool get(const char* name, T& v) {
-    return ::get(*this, name, v);
-  }
- 
-  template<class E, class T>
-  bool get(const char* name, E& value, T enum2string)
-  {
-    std::string str;
-    if (get(name, str))
-      {
-        value = enum2string(str);
-        return true;
-      }
-
-    return false;
-  }
-
-  // Primitive types
-  // FIXME: Is there any nice way to not use two different names?
-  bool read(const char* name, FileReader& v);
-
-  bool read(const char* name, int&   v);
-  bool read(const char* name, float& v);
-  bool read(const char* name, bool& v);
-  bool read(const char* name, std::string& v);
-
-  bool read(const char* name, std::vector<bool>&   v);
-  bool read(const char* name, std::vector<int>&   v);
-  bool read(const char* name, std::vector<float>& v);
-  bool read(const char* name, std::vector<std::string>& v);
-
-  void print_unused_warnings(const std::string& title) const;
-
-private:
-  boost::shared_ptr<FileReaderImpl> impl;
-};
-
-#endif
-
-/* EOF */

Deleted: trunk/windstille/src/file_reader_impl.hpp
===================================================================
--- trunk/windstille/src/file_reader_impl.hpp	2009-02-11 21:22:01 UTC (rev 2464)
+++ trunk/windstille/src/file_reader_impl.hpp	2009-02-11 21:47:00 UTC (rev 2465)
@@ -1,60 +0,0 @@
-/*
-**  Windstille - A Sci-Fi Action-Adventure Game
-**  Copyright (C) 2002 Ingo Ruhnke <grumbel at gmx.de>
-**
-**  This program is free software: you can redistribute it and/or modify
-**  it under the terms of the GNU General Public License as published by
-**  the Free Software Foundation, either version 3 of the License, or
-**  (at your option) any later version.
-**  
-**  This program is distributed in the hope that it will be useful,
-**  but WITHOUT ANY WARRANTY; without even the implied warranty of
-**  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
-**  GNU General Public License for more details.
-**  
-**  You should have received a copy of the GNU General Public License
-**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
-*/
-
-#ifndef HEADER_WINDSTILLE_FILE_READER_IMPL_HPP
-#define HEADER_WINDSTILLE_FILE_READER_IMPL_HPP
-
-#include <vector>
-#include <string>
-
-class Size;
-class Color;
-class Vector;
-class Vector3;
-
-class FileReader;
-class ResDescriptor;
-
-/** */
-class FileReaderImpl
-{
-public:
-  FileReaderImpl() {}
-  virtual ~FileReaderImpl() {}
-
-  virtual std::string get_name()                           const =0;
-
-  virtual bool read_bool  (const char* name, bool&)        const =0;
-  virtual bool read_int   (const char* name, int&)         const =0;
-  virtual bool read_float (const char* name, float&)       const =0;
-  virtual bool read_string(const char* name, std::string&) const =0;
-
-  virtual bool get(const char* name, std::vector<bool>&   v) const =0;
-  virtual bool get(const char* name, std::vector<int>&   v) const =0;
-  virtual bool get(const char* name, std::vector<float>& v) const =0;
-  virtual bool get(const char* name, std::vector<std::string>& v) const =0;
-
-  virtual bool read_section(const char* name, FileReader&)   const =0;
-  virtual std::vector<FileReader> get_sections() const =0;
-  virtual std::vector<std::string> get_section_names() const =0;
-};
-
-
-#endif
-
-/* EOF */

Modified: trunk/windstille/src/font/ttf_font.hpp
===================================================================
--- trunk/windstille/src/font/ttf_font.hpp	2009-02-11 21:22:01 UTC (rev 2464)
+++ trunk/windstille/src/font/ttf_font.hpp	2009-02-11 21:47:00 UTC (rev 2465)
@@ -22,7 +22,7 @@
 #include <string>
 #include <GL/glew.h>
 #include <GL/gl.h>
-#include "color.hpp"
+#include "display/color.hpp"
 #include "math/rect.hpp"
 #include "display/texture.hpp"
 

Deleted: trunk/windstille/src/getter.cpp
===================================================================
--- trunk/windstille/src/getter.cpp	2009-02-11 21:22:01 UTC (rev 2464)
+++ trunk/windstille/src/getter.cpp	2009-02-11 21:47:00 UTC (rev 2465)
@@ -1,136 +0,0 @@
-/*
-**  Windstille - A Sci-Fi Action-Adventure Game
-**  Copyright (C) 2007 Ingo Ruhnke <grumbel at gmx.de>
-**
-**  This program is free software: you can redistribute it and/or modify
-**  it under the terms of the GNU General Public License as published by
-**  the Free Software Foundation, either version 3 of the License, or
-**  (at your option) any later version.
-**  
-**  This program is distributed in the hope that it will be useful,
-**  but WITHOUT ANY WARRANTY; without even the implied warranty of
-**  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
-**  GNU General Public License for more details.
-**  
-**  You should have received a copy of the GNU General Public License
-**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
-*/
-
-#include "math/vector.hpp"
-#include "math/vector3.hpp"
-#include "math/quaternion.hpp"
-#include "math/matrix.hpp"
-#include "color.hpp"
-#include "file_reader.hpp"
-#include "getter.hpp"
-
-bool get(FileReader& reader, const char* name, Vector&  value)
-{
-  std::vector<float> floats;
-  if (reader.get(name, floats) && floats.size() == 2) {
-    value.x = floats[0];
-    value.y = floats[1];
-    return true;
-  } else {
-    return false;
-  }  
-}
-
-bool get(FileReader& reader, const char* name, Vector3& value)
-{
-  std::vector<float> floats;
-  if (reader.get(name, floats) && floats.size() == 3) {
-    value.x = floats[0];
-    value.y = floats[1];
-    value.z = floats[2];
-    return true;
-  } else {
-    return false;
-  }
-}
-
-bool get(FileReader& reader, const char* name, Quaternion& value)
-{
-  std::vector<float> floats;
-  if (reader.get(name, floats) && floats.size() == 4) {
-    value.w = floats[0];
-    value.x = floats[1];
-    value.y = floats[2];
-    value.z = floats[3];
-    return true;
-  } else {
-    return false;
-  }
-}
-
-bool get(FileReader& reader, const char* name, Matrix& m)
-{
-  std::vector<float> floats;
-  if (reader.get(name, floats) && floats.size() == 16) {  
-    m[ 0] = floats[0];
-    m[ 4] = floats[1];
-    m[ 8] = floats[2];
-    m[12] = floats[3];
-    m[ 1] = floats[4];
-    m[ 5] = floats[5];
-    m[ 9] = floats[6];
-    m[13] = floats[7];
-    m[ 2] = floats[8];
-    m[ 6] = floats[9];
-    m[10] = floats[10];
-    m[14] = floats[11];
-    m[ 3] = floats[12];
-    m[ 7] = floats[13];
-    m[11] = floats[14];
-    m[15] = floats[15];
-    return true;
-    // FIXME: Could add code to handel 3x3 matrixes
-  } else {
-    return false;
-  }
-}
-
-bool get(FileReader& reader, const char* name, Color& value)
-{
-  std::vector<float> floats;
-  if (reader.get(name, floats)) {
-    if (floats.size() == 3)
-      {
-        value.r = floats[0];
-        value.g = floats[1];
-        value.b = floats[2];
-        value.a = 1.0f;
-        return true;
-      }
-    else if (floats.size() == 4)
-      {
-        value.r = floats[0];
-        value.b = floats[1];
-        value.g = floats[2];
-        value.a = floats[3];
-        return true;
-      }
-    else
-      {
-        return false;
-      }
-  } else {
-    return false;
-  } 
-}
-
-// Getters for primitive types
-// FIXME: Ugly, maybe there is a better way then to have different read/get names for the function
-bool get(FileReader& reader, const char* name, FileReader& v) { return reader.read(name, v); }
-
-bool get(FileReader& reader, const char* name, int&   v) { return reader.read(name, v); }
-bool get(FileReader& reader, const char* name, float& v) { return reader.read(name, v); }
-bool get(FileReader& reader, const char* name, bool& v) { return reader.read(name, v); }
-bool get(FileReader& reader, const char* name, std::string& v) { return reader.read(name, v); }
-
-bool get(FileReader& reader, const char* name, std::vector<bool>&   v) { return reader.read(name, v); }
-bool get(FileReader& reader, const char* name, std::vector<int>&   v) { return reader.read(name, v); }
-bool get(FileReader& reader, const char* name, std::vector<float>& v) { return reader.read(name, v); }
-bool get(FileReader& reader, const char* name, std::vector<std::string>& v) { return reader.read(name, v); }
-
-/* EOF */

Deleted: trunk/windstille/src/getter.hpp
===================================================================
--- trunk/windstille/src/getter.hpp	2009-02-11 21:22:01 UTC (rev 2464)
+++ trunk/windstille/src/getter.hpp	2009-02-11 21:47:00 UTC (rev 2465)
@@ -1,52 +0,0 @@
-/*
-**  Windstille - A Sci-Fi Action-Adventure Game
-**  Copyright (C) 2007 Ingo Ruhnke <grumbel at gmx.de>
-**
-**  This program is free software: you can redistribute it and/or modify
-**  it under the terms of the GNU General Public License as published by
-**  the Free Software Foundation, either version 3 of the License, or
-**  (at your option) any later version.
-**  
-**  This program is distributed in the hope that it will be useful,
-**  but WITHOUT ANY WARRANTY; without even the implied warranty of
-**  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
-**  GNU General Public License for more details.
-**  
-**  You should have received a copy of the GNU General Public License
-**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
-*/
-
-#ifndef HEADER_WINDSTILLE_GETTER_HPP
-#define HEADER_WINDSTILLE_GETTER_HPP
-
-#include "file_reader.hpp"
-
-class FileReader;
-class Quaternion;
-class Color;
-class Vector;
-class Vector3;
-class Matrix;
-
-bool get(FileReader& reader, const char* name, Matrix& value);
-bool get(FileReader& reader, const char* name, Quaternion& value);
-bool get(FileReader& reader, const char* name, Color& value);
-bool get(FileReader& reader, const char* name, Vector&  value);
-bool get(FileReader& reader, const char* name, Vector3& value);
-
-// Primitive types
-bool get(FileReader& reader, const char* name, FileReader& v);
-
-bool get(FileReader& reader, const char* name, int&   v);
-bool get(FileReader& reader, const char* name, float& v);
-bool get(FileReader& reader, const char* name, bool& v);
-bool get(FileReader& reader, const char* name, std::string& v);
-
-bool get(FileReader& reader, const char* name, std::vector<bool>&   v);
-bool get(FileReader& reader, const char* name, std::vector<int>&   v); 
-bool get(FileReader& reader, const char* name, std::vector<float>& v);
-bool get(FileReader& reader, const char* name, std::vector<std::string>& v);
-
-#endif
-
-/* EOF */

Modified: trunk/windstille/src/gui/group_component.cpp
===================================================================
--- trunk/windstille/src/gui/group_component.cpp	2009-02-11 21:22:01 UTC (rev 2464)
+++ trunk/windstille/src/gui/group_component.cpp	2009-02-11 21:47:00 UTC (rev 2465)
@@ -18,7 +18,7 @@
 
 #include <assert.h>
 #include "display/display.hpp"
-#include "color.hpp"
+#include "display/color.hpp"
 #include "font/fonts.hpp"
 #include "group_component.hpp"
 

Modified: trunk/windstille/src/gui/slider.cpp
===================================================================
--- trunk/windstille/src/gui/slider.cpp	2009-02-11 21:22:01 UTC (rev 2464)
+++ trunk/windstille/src/gui/slider.cpp	2009-02-11 21:47:00 UTC (rev 2465)
@@ -18,7 +18,7 @@
 
 #include "input/controller.hpp"
 #include "display/display.hpp"
-#include "color.hpp"
+#include "display/color.hpp"
 #include "slider.hpp"
 
 namespace gui {

Modified: trunk/windstille/src/input/input_manager_sdl.cpp
===================================================================
--- trunk/windstille/src/input/input_manager_sdl.cpp	2009-02-11 21:22:01 UTC (rev 2464)
+++ trunk/windstille/src/input/input_manager_sdl.cpp	2009-02-11 21:47:00 UTC (rev 2465)
@@ -26,7 +26,7 @@
 #include <vector>
 #include "math.hpp"
 #include "config.hpp"
-#include "file_reader.hpp"
+#include "util/file_reader.hpp"
 #include "controller_def.hpp"
 #include "input_manager_sdl.hpp"
 #ifdef HAVE_CWIID

Copied: trunk/windstille/src/math/random.cpp (from rev 2463, trunk/windstille/src/random.cpp)


Property changes on: trunk/windstille/src/math/random.cpp
___________________________________________________________________
Name: svn:keywords
   + Id
Name: svn:mergeinfo
   + 
Name: svn:eol-style
   + native

Copied: trunk/windstille/src/math/random.hpp (from rev 2463, trunk/windstille/src/random.hpp)


Property changes on: trunk/windstille/src/math/random.hpp
___________________________________________________________________
Name: svn:keywords
   + Id
Name: svn:mergeinfo
   + 
Name: svn:eol-style
   + native

Modified: trunk/windstille/src/navigation/navigation_graph.cpp
===================================================================
--- trunk/windstille/src/navigation/navigation_graph.cpp	2009-02-11 21:22:01 UTC (rev 2464)
+++ trunk/windstille/src/navigation/navigation_graph.cpp	2009-02-11 21:47:00 UTC (rev 2465)
@@ -23,7 +23,7 @@
 #include "display/display.hpp"
 #include "node.hpp"
 #include "segment.hpp"
-#include "file_reader.hpp"
+#include "util/file_reader.hpp"
 #include "segment_position.hpp"
 #include "navigation_graph.hpp"
 

Modified: trunk/windstille/src/navigation_test.cpp
===================================================================
--- trunk/windstille/src/navigation_test.cpp	2009-02-11 21:22:01 UTC (rev 2464)
+++ trunk/windstille/src/navigation_test.cpp	2009-02-11 21:47:00 UTC (rev 2465)
@@ -20,7 +20,7 @@
 #include <iostream>
 #include <GL/glew.h>
 #include <GL/gl.h>
-#include "sexpr_file_reader.hpp"
+#include "util/sexpr_file_reader.hpp"
 #include "input/controller.hpp"
 #include "display/display.hpp"
 #include "screen_manager.hpp"

Modified: trunk/windstille/src/objects/box.cpp
===================================================================
--- trunk/windstille/src/objects/box.cpp	2009-02-11 21:22:01 UTC (rev 2464)
+++ trunk/windstille/src/objects/box.cpp	2009-02-11 21:47:00 UTC (rev 2465)
@@ -23,7 +23,7 @@
 #include "collision/collision_engine.hpp"
 #include "math/vector.hpp"
 #include "tile/tile_map.hpp"
-#include "random.hpp"
+#include "math/random.hpp"
 #include "sprite2d/manager.hpp"
 
 Box::Box(FileReader& props)

Modified: trunk/windstille/src/objects/liquid.cpp
===================================================================
--- trunk/windstille/src/objects/liquid.cpp	2009-02-11 21:22:01 UTC (rev 2464)
+++ trunk/windstille/src/objects/liquid.cpp	2009-02-11 21:47:00 UTC (rev 2465)
@@ -17,7 +17,7 @@
 */
 
 #include "display/vertex_array_drawing_request.hpp"
-#include "random.hpp"
+#include "math/random.hpp"
 #include "liquid.hpp"
 
 #define SAMPLES 5

Modified: trunk/windstille/src/objects/nightvision.cpp
===================================================================
--- trunk/windstille/src/objects/nightvision.cpp	2009-02-11 21:22:01 UTC (rev 2464)
+++ trunk/windstille/src/objects/nightvision.cpp	2009-02-11 21:47:00 UTC (rev 2465)
@@ -17,7 +17,7 @@
 */
 
 #include "globals.hpp"
-#include "random.hpp"
+#include "math/random.hpp"
 #include "math/matrix.hpp"
 #include "display/vertex_array_drawing_request.hpp"
 #include "display/texture_manager.hpp"

Modified: trunk/windstille/src/objects/swarm.cpp
===================================================================
--- trunk/windstille/src/objects/swarm.cpp	2009-02-11 21:22:01 UTC (rev 2464)
+++ trunk/windstille/src/objects/swarm.cpp	2009-02-11 21:47:00 UTC (rev 2465)
@@ -23,7 +23,7 @@
 #include "game_session.hpp"
 #include "view.hpp"
 #include "display/vertex_array_drawing_request.hpp"
-#include "random.hpp"
+#include "math/random.hpp"
 #include "swarm.hpp"
 
 Swarm::Swarm(FileReader& props)

Modified: trunk/windstille/src/objects/vrdummy.cpp
===================================================================
--- trunk/windstille/src/objects/vrdummy.cpp	2009-02-11 21:22:01 UTC (rev 2464)
+++ trunk/windstille/src/objects/vrdummy.cpp	2009-02-11 21:47:00 UTC (rev 2465)
@@ -16,7 +16,7 @@
 **  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
-#include "random.hpp"
+#include "math/random.hpp"
 #include "vrdummy.hpp"
 
 VRDummy::VRDummy(FileReader& props)

Modified: trunk/windstille/src/particle_viewer.cpp
===================================================================
--- trunk/windstille/src/particle_viewer.cpp	2009-02-11 21:22:01 UTC (rev 2464)
+++ trunk/windstille/src/particle_viewer.cpp	2009-02-11 21:47:00 UTC (rev 2465)
@@ -16,7 +16,7 @@
 **  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
-#include "sexpr_file_reader.hpp"
+#include "util/sexpr_file_reader.hpp"
 #include "input/controller.hpp"
 #include "screen_manager.hpp"
 #include "gui/gui_manager.hpp"

Modified: trunk/windstille/src/particles/particle_system.cpp
===================================================================
--- trunk/windstille/src/particles/particle_system.cpp	2009-02-11 21:22:01 UTC (rev 2464)
+++ trunk/windstille/src/particles/particle_system.cpp	2009-02-11 21:47:00 UTC (rev 2465)
@@ -21,8 +21,8 @@
 #include "particle_system.hpp"
 #include "display/scene_context.hpp"
 #include "math/vector.hpp"
-#include "color.hpp"
-#include "file_reader.hpp"
+#include "display/color.hpp"
+#include "util/file_reader.hpp"
 #include "spark_drawer.hpp"
 #include "deform_drawer.hpp"
 #include "surface_drawer.hpp"

Modified: trunk/windstille/src/particles/particle_system.hpp
===================================================================
--- trunk/windstille/src/particles/particle_system.hpp	2009-02-11 21:22:01 UTC (rev 2464)
+++ trunk/windstille/src/particles/particle_system.hpp	2009-02-11 21:47:00 UTC (rev 2465)
@@ -21,7 +21,7 @@
 
 #include <vector>
 
-#include "color.hpp"
+#include "display/color.hpp"
 #include "drawer.hpp"
 #include "engine/entity.hpp"
 

Modified: trunk/windstille/src/particles/randomizer.hpp
===================================================================
--- trunk/windstille/src/particles/randomizer.hpp	2009-02-11 21:22:01 UTC (rev 2464)
+++ trunk/windstille/src/particles/randomizer.hpp	2009-02-11 21:47:00 UTC (rev 2465)
@@ -19,7 +19,7 @@
 #ifndef HEADER_WINDSTILLE_PARTICLES_RANDOMIZER_HPP
 #define HEADER_WINDSTILLE_PARTICLES_RANDOMIZER_HPP
 
-#include "random.hpp"
+#include "math/random.hpp"
 
 class Randomizer 
 {

Modified: trunk/windstille/src/particles/spark_drawer.cpp
===================================================================
--- trunk/windstille/src/particles/spark_drawer.cpp	2009-02-11 21:22:01 UTC (rev 2464)
+++ trunk/windstille/src/particles/spark_drawer.cpp	2009-02-11 21:47:00 UTC (rev 2465)
@@ -19,7 +19,7 @@
 #include "display/drawing_request.hpp"
 #include "display/vertex_array_drawing_request.hpp"
 #include "particle_system.hpp"
-#include "color.hpp"
+#include "display/color.hpp"
 #include "spark_drawer.hpp"
 
 SparkDrawer::SparkDrawer(FileReader& props)

Deleted: trunk/windstille/src/random.cpp
===================================================================
--- trunk/windstille/src/random.cpp	2009-02-11 21:22:01 UTC (rev 2464)
+++ trunk/windstille/src/random.cpp	2009-02-11 21:47:00 UTC (rev 2465)
@@ -1,131 +0,0 @@
-/*
-**  Windstille - A Sci-Fi Action-Adventure Game
-**  Copyright (C) 2000,2005 Ingo Ruhnke <grumbel at gmx.de>
-**
-**  This program is free software: you can redistribute it and/or modify
-**  it under the terms of the GNU General Public License as published by
-**  the Free Software Foundation, either version 3 of the License, or
-**  (at your option) any later version.
-**  
-**  This program is distributed in the hope that it will be useful,
-**  but WITHOUT ANY WARRANTY; without even the implied warranty of
-**  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
-**  GNU General Public License for more details.
-**  
-**  You should have received a copy of the GNU General Public License
-**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
-*/
-
-#include "random.hpp"
-
-/* This file is based on:
- * A C-program for MT19937, with initialization improved 2002/1/26.
- *  Coded by Takuji Nishimura and Makoto Matsumoto.
- * http://www.math.sci.hiroshima-u.ac.jp/~m-mat/MT/MT2002/CODES/mt19937ar.c 
- */
-
-Random::Random(unsigned long s)
-{
-  mt[0]= s & 0xffffffffUL;
-  for (mti=1; mti<N; mti++) {
-    mt[mti] =
-      (1812433253UL * (mt[mti-1] ^ (mt[mti-1] >> 30)) + mti);
-    /* See Knuth TAOCP Vol2. 3rd Ed. P.106 for multiplier. */
-    /* In the previous versions, MSBs of the seed affect   */
-    /* only MSBs of the array mt[].                        */
-    /* 2002/01/09 modified by Makoto Matsumoto             */
-    mt[mti] &= 0xffffffffUL;
-    /* for >32 bit machines */
-  }
-}
-
-unsigned long
-Random::rand()
-{
-  unsigned long y;
-  static unsigned long mag01[2]={0x0UL, MATRIX_A};
-  /* mag01[x] = x * MATRIX_A  for x=0,1 */
-
-  if (mti >= N) { /* generate N words at one time */
-    unsigned long kk;
-
-    for (kk=0;kk<N-M;kk++) {
-      y = (mt[kk]&UPPER_MASK)|(mt[kk+1]&LOWER_MASK);
-      mt[kk] = mt[kk+M] ^ (y >> 1) ^ mag01[y & 0x1UL];
-    }
-    for (;kk<N-1;kk++) {
-      y = (mt[kk]&UPPER_MASK)|(mt[kk+1]&LOWER_MASK);
-      mt[kk] = mt[kk+(M-N)] ^ (y >> 1) ^ mag01[y & 0x1UL];
-    }
-    y = (mt[N-1]&UPPER_MASK)|(mt[0]&LOWER_MASK);
-    mt[N-1] = mt[M-1] ^ (y >> 1) ^ mag01[y & 0x1UL];
-
-    mti = 0;
-  }
-  
-  y = mt[mti++];
-
-  /* Tempering */
-  y ^= (y >> 11);
-  y ^= (y << 7) & 0x9d2c5680UL;
-  y ^= (y << 15) & 0xefc60000UL;
-  y ^= (y >> 18);
-
-  return y;
-}
-
-long
-Random::rand(long range)
-{
-  return rand()/(0xffffffffUL/(range+1));
-}
-
-long
-Random::rand(int start, int end)
-{
-  return start + rand()/(0xffffffffUL/(end-start+1));
-}
-
-double
-Random::drand(double range)
-{
-  return drand()*range;
-}
-
-double
-Random::drand(double start, double end)
-{
-  return (start + (drand()*(end-start)));
-}
-
-/* generates a random number on [0,1]-real-interval */
-double
-Random::drand()
-{
-  return rand()*(1.0/4294967295.0);
-  /* divided by 2^32-1 */
-}
-
-int
-Random::sign()
-{
-  return (rand()%2)?-1:1;
-}
-
-Random rnd;
-
-#ifdef __TEST__
-#include <iostream>
-
-int main()
-{
-  Random random(5489UL);
-  for(int i = 0; i < 1000000; ++i)
-    {
-      std::cout << random.drand(0, 5) << std::endl;
-    }
-  return 0;
-}
-#endif
-
-/* EOF */

Deleted: trunk/windstille/src/random.hpp
===================================================================
--- trunk/windstille/src/random.hpp	2009-02-11 21:22:01 UTC (rev 2464)
+++ trunk/windstille/src/random.hpp	2009-02-11 21:47:00 UTC (rev 2465)
@@ -1,64 +0,0 @@
-/*
-**  Windstille - A Sci-Fi Action-Adventure Game
-**  Copyright (C) 2000,2005 Ingo Ruhnke <grumbel at gmx.de>
-**
-**  This program is free software: you can redistribute it and/or modify
-**  it under the terms of the GNU General Public License as published by
-**  the Free Software Foundation, either version 3 of the License, or
-**  (at your option) any later version.
-**  
-**  This program is distributed in the hope that it will be useful,
-**  but WITHOUT ANY WARRANTY; without even the implied warranty of
-**  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
-**  GNU General Public License for more details.
-**  
-**  You should have received a copy of the GNU General Public License
-**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
-*/
-
-#ifndef HEADER_WINDSTILLE_RANDOM_HPP
-#define HEADER_WINDSTILLE_RANDOM_HPP
-
-/** */
-class Random
-{
-private:
-  /* Period parameters */
-  static const unsigned long N = 624;
-  static const unsigned long M = 397;
-  static const unsigned long MATRIX_A   = 0x9908b0dfUL;   /* constant vector a */
-  static const unsigned long UPPER_MASK = 0x80000000UL; /* most significant w-r bits */
-  static const unsigned long LOWER_MASK = 0x7fffffffUL; /* least significant r bits */
-
-  unsigned long mt[N]; /* the array for the state vector  */
-  unsigned long mti;
-
-public:
-  Random(unsigned long seed = 5489UL);
-
-  /** generates a random number on [0,0xffffffff]-interval */
-  unsigned long rand();
-
-  long rand(long range);
-  long rand(int start, int end);
-
-  /** Returns float random number between [start, end] */
-  double drand();
-
-  double drand(double range);
-
-  /** Returns a random number between \a start and \a end */
-  double drand(double start, double end);
-
-  /** Returns either 1 or -1 */
-  int sign();
-private:
-  Random (const Random&);
-  Random& operator= (const Random&);
-};
-
-extern Random rnd;
-
-#endif
-
-/* EOF */

Deleted: trunk/windstille/src/response_curve.cpp
===================================================================
--- trunk/windstille/src/response_curve.cpp	2009-02-11 21:22:01 UTC (rev 2464)
+++ trunk/windstille/src/response_curve.cpp	2009-02-11 21:47:00 UTC (rev 2465)
@@ -1,83 +0,0 @@
-/*
-**  Windstille - A Sci-Fi Action-Adventure Game
-**  Copyright (C) 2005 Ingo Ruhnke <grumbel at gmx.de>
-**
-**  This program is free software: you can redistribute it and/or modify
-**  it under the terms of the GNU General Public License as published by
-**  the Free Software Foundation, either version 3 of the License, or
-**  (at your option) any later version.
-**  
-**  This program is distributed in the hope that it will be useful,
-**  but WITHOUT ANY WARRANTY; without even the implied warranty of
-**  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
-**  GNU General Public License for more details.
-**  
-**  You should have received a copy of the GNU General Public License
-**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
-*/
-
-#include <assert.h>
-#include <iostream>
-#include "math.hpp"
-#include "response_curve.hpp"
-
-ResponseCurve::ResponseCurve(float i_min_, float i_max_, const std::vector<float>& samples_)
-  : i_min(i_min_),
-    i_max(i_max_),
-    samples(samples_)
-{
-  assert(i_max > i_min);
-  assert(!samples.empty());
-}
-
-ResponseCurve::~ResponseCurve()
-{
-}
-
-float
-ResponseCurve::get(float v)
-{
-  if (samples.size() == 1)
-    {
-      return samples[0];
-    }
-  else
-    {
-      v = math::mid(i_min, v, i_max);
-
-      int   bucket_count = samples.size() - 1;
-      float bucket_size  = (i_max - i_min) / bucket_count;
-      
-      int bucket_index = int((v - i_min) / bucket_size);
-
-      float t = ((v - i_min) - (bucket_index * bucket_size)) / bucket_size;
-      
-      return ((1.0f - t) * samples[bucket_index]) + (t * samples[bucket_index + 1]);
-    }
-}
-
-#ifdef __TEST__
-#include <iostream>
-
-int main(int argc, char** argv)
-{
-  if (argc != 2)
-    {
-      std::cout << "Usage: " << argv[0] << " FLOAT" << std::endl;
-    }
-  else
-    {
-      float samples[] = { 0.0f, 0.25f, 0.75f, 1.0f };
-      std::vector<float> samples_vec(samples, samples+4);
-
-      std::cout << "Samples: " << samples_vec.size() << std::endl;
-
-      ResponseCurve curve(0.0f, 1.0f, samples_vec);
-
-      std::cout << curve.get(atof(argv[1])) << std::endl;
-    }
-  return 0;
-}
-#endif
-
-/* EOF */

Deleted: trunk/windstille/src/response_curve.hpp
===================================================================
--- trunk/windstille/src/response_curve.hpp	2009-02-11 21:22:01 UTC (rev 2464)
+++ trunk/windstille/src/response_curve.hpp	2009-02-11 21:47:00 UTC (rev 2465)
@@ -1,45 +0,0 @@
-/*
-**  Windstille - A Sci-Fi Action-Adventure Game
-**  Copyright (C) 2005 Ingo Ruhnke <grumbel at gmx.de>
-**
-**  This program is free software: you can redistribute it and/or modify
-**  it under the terms of the GNU General Public License as published by
-**  the Free Software Foundation, either version 3 of the License, or
-**  (at your option) any later version.
-**  
-**  This program is distributed in the hope that it will be useful,
-**  but WITHOUT ANY WARRANTY; without even the implied warranty of
-**  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
-**  GNU General Public License for more details.
-**  
-**  You should have received a copy of the GNU General Public License
-**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
-*/
-
-#ifndef HEADER_WINDSTILLE_RESPONSE_CURVE_HPP
-#define HEADER_WINDSTILLE_RESPONSE_CURVE_HPP
-
-#include <vector>
-
-/** */
-class ResponseCurve
-{
-private:
-  float  i_min;
-  float  i_max;
-  std::vector<float> samples;
-
-public:
-  ResponseCurve(float i_min_, float i_max_, const std::vector<float>& samples_);
-  ~ResponseCurve();
-
-  float get(float v);
-
-private:
-  ResponseCurve (const ResponseCurve&);
-  ResponseCurve& operator= (const ResponseCurve&);
-};
-
-#endif
-
-/* EOF */

Modified: trunk/windstille/src/scripting/SConscript
===================================================================
--- trunk/windstille/src/scripting/SConscript	2009-02-11 21:22:01 UTC (rev 2464)
+++ trunk/windstille/src/scripting/SConscript	2009-02-11 21:47:00 UTC (rev 2465)
@@ -11,7 +11,7 @@
             ['interface.hpp', 'game_objects.hpp'])
 
 env.Depends(env.Command(['wrapper.cpp', 'wrapper.hpp'], 'miniswig.tmp',
-                        ["$MINISWIG  --input $SOURCE --output-cpp ${TARGETS[0]} --output-hpp ${TARGETS[1]} --module windstille --select-namespace scripting"]),
+                        ["$MINISWIG  --input $SOURCE --output-cpp ${TARGETS[0]} --output-hpp ${TARGETS[1]} --module windstille --select-namespace Scripting"]),
             miniswig)
 
 # EOF #

Modified: trunk/windstille/src/scripting/game_objects.cpp
===================================================================
--- trunk/windstille/src/scripting/game_objects.cpp	2009-02-11 21:22:01 UTC (rev 2464)
+++ trunk/windstille/src/scripting/game_objects.cpp	2009-02-11 21:47:00 UTC (rev 2465)
@@ -21,7 +21,7 @@
 #include "engine/sector.hpp"
 #include "game_objects.hpp"
 
-namespace scripting {
+namespace Scripting {
 
 const std::string&
 GameObject::get_name() const
@@ -108,7 +108,7 @@
   obj()->start_flash(speed);
 }
 
-} // namespace scripting
+} // namespace Scripting
 
 /* EOF */
 

Modified: trunk/windstille/src/scripting/game_objects.hpp
===================================================================
--- trunk/windstille/src/scripting/game_objects.hpp	2009-02-11 21:22:01 UTC (rev 2464)
+++ trunk/windstille/src/scripting/game_objects.hpp	2009-02-11 21:47:00 UTC (rev 2465)
@@ -33,7 +33,7 @@
 typedef Entity _Entity;
 #endif
 
-namespace scripting
+namespace Scripting
 {
 
 class GameObject

Modified: trunk/windstille/src/scripting/interface.cpp
===================================================================
--- trunk/windstille/src/scripting/interface.cpp	2009-02-11 21:22:01 UTC (rev 2464)
+++ trunk/windstille/src/scripting/interface.cpp	2009-02-11 21:47:00 UTC (rev 2465)
@@ -30,11 +30,11 @@
 #include "engine/camera.hpp"
 #include "config.hpp"
 #include "pda.hpp"
-#include "sexpr_file_reader.hpp"
+#include "util/sexpr_file_reader.hpp"
 #include "display/display.hpp"
 #include "controller_help_window.hpp"
 
-namespace scripting
+namespace Scripting
 {
 
 void set_sector(const std::string& filename)
@@ -338,6 +338,6 @@
   return 0;
 }
 
-} // namespace scripting
+} // namespace Scripting
 
 /* EOF */

Modified: trunk/windstille/src/scripting/interface.hpp
===================================================================
--- trunk/windstille/src/scripting/interface.hpp	2009-02-11 21:22:01 UTC (rev 2464)
+++ trunk/windstille/src/scripting/interface.hpp	2009-02-11 21:47:00 UTC (rev 2465)
@@ -24,7 +24,7 @@
 #include <squirrel.h>
 #endif
 
-namespace scripting {
+namespace Scripting {
 
 void set_sector(const std::string& filename);
 
@@ -116,7 +116,7 @@
  */
 SQInteger spawn_object(HSQUIRRELVM v) __custom;
 
-} // namespace scripting
+} // namespace Scripting
 
 #endif
 

Modified: trunk/windstille/src/scripting/squirrel_error.cpp
===================================================================
--- trunk/windstille/src/scripting/squirrel_error.cpp	2009-02-11 21:22:01 UTC (rev 2464)
+++ trunk/windstille/src/scripting/squirrel_error.cpp	2009-02-11 21:47:00 UTC (rev 2465)
@@ -3,7 +3,7 @@
 #include "squirrel_error.hpp"
 #include <sstream>
 
-namespace scripting
+namespace Scripting
 {
 
 SquirrelError::SquirrelError(HSQUIRRELVM v, const std::string& message) throw()

Modified: trunk/windstille/src/scripting/squirrel_error.hpp
===================================================================
--- trunk/windstille/src/scripting/squirrel_error.hpp	2009-02-11 21:22:01 UTC (rev 2464)
+++ trunk/windstille/src/scripting/squirrel_error.hpp	2009-02-11 21:47:00 UTC (rev 2465)
@@ -22,7 +22,7 @@
 #include <squirrel.h>
 #include <stdexcept>
 
-namespace scripting
+namespace Scripting
 {
 
 /** Exception class for squirrel errors, it takes a squirrelvm and uses

Modified: trunk/windstille/src/scripting/util.cpp
===================================================================
--- trunk/windstille/src/scripting/util.cpp	2009-02-11 21:22:01 UTC (rev 2464)
+++ trunk/windstille/src/scripting/util.cpp	2009-02-11 21:47:00 UTC (rev 2465)
@@ -28,7 +28,7 @@
 
 #include "util.hpp"
 
-namespace scripting {
+namespace Scripting {
 
 std::string sq_to_lisp_string(std::string sq_str)
 {
@@ -412,6 +412,6 @@
   writer.end_list("squirrel-state");
 }
 
-} // namespace scripting
+} // namespace Scripting
 
 /* EOF */

Modified: trunk/windstille/src/scripting/util.hpp
===================================================================
--- trunk/windstille/src/scripting/util.hpp	2009-02-11 21:22:01 UTC (rev 2464)
+++ trunk/windstille/src/scripting/util.hpp	2009-02-11 21:47:00 UTC (rev 2465)
@@ -27,7 +27,7 @@
 class Lisp;
 };
 
-namespace scripting {
+namespace Scripting {
 
 // Squirrel to Lisp
 void        table_to_lisp(HSQUIRRELVM v, int table_idx, std::vector<lisp::Lisp*>& entries);
@@ -45,7 +45,7 @@
 void save_squirrel_table(HSQUIRRELVM v, int table_idx, const std::string& file);
 void load_squirrel_table(HSQUIRRELVM v, int table_idx, const std::string& file);
 
-} // namespace scripting
+} // namespace Scripting
 
 #endif
 

Modified: trunk/windstille/src/scripting/wrapper.cpp
===================================================================
--- trunk/windstille/src/scripting/wrapper.cpp	2009-02-11 21:22:01 UTC (rev 2464)
+++ trunk/windstille/src/scripting/wrapper.cpp	2009-02-11 21:47:00 UTC (rev 2465)
@@ -13,14 +13,14 @@
 #include "squirrel_error.hpp"
 #include "wrapper.interface.hpp"
 
-namespace scripting
+namespace Scripting
 {
 namespace Wrapper
 {
 
 static SQInteger GameObject_release_hook(SQUserPointer ptr, SQInteger )
 {
-  scripting::GameObject* _this = reinterpret_cast<scripting::GameObject*> (ptr);
+  Scripting::GameObject* _this = reinterpret_cast<Scripting::GameObject*> (ptr);
   delete _this;
   return 0;
 }
@@ -32,7 +32,7 @@
     sq_throwerror(vm, _SC("'get_name' called without instance"));
     return SQ_ERROR;
   }
-  scripting::GameObject* _this = reinterpret_cast<scripting::GameObject*> (data);
+  Scripting::GameObject* _this = reinterpret_cast<Scripting::GameObject*> (data);
 
   try {
     const std::string& return_value = _this->get_name();
@@ -57,7 +57,7 @@
     sq_throwerror(vm, _SC("'remove' called without instance"));
     return SQ_ERROR;
   }
-  scripting::GameObject* _this = reinterpret_cast<scripting::GameObject*> (data);
+  Scripting::GameObject* _this = reinterpret_cast<Scripting::GameObject*> (data);
 
   try {
     _this->remove();
@@ -81,7 +81,7 @@
     sq_throwerror(vm, _SC("'set_active' called without instance"));
     return SQ_ERROR;
   }
-  scripting::GameObject* _this = reinterpret_cast<scripting::GameObject*> (data);
+  Scripting::GameObject* _this = reinterpret_cast<Scripting::GameObject*> (data);
   SQBool arg0;
   if(SQ_FAILED(sq_getbool(vm, 2, &arg0))) {
     sq_throwerror(vm, _SC("Argument 1 not a bool"));
@@ -110,7 +110,7 @@
     sq_throwerror(vm, _SC("'set_parent' called without instance"));
     return SQ_ERROR;
   }
-  scripting::GameObject* _this = reinterpret_cast<scripting::GameObject*> (data);
+  Scripting::GameObject* _this = reinterpret_cast<Scripting::GameObject*> (data);
   const SQChar* arg0;
   if(SQ_FAILED(sq_getstring(vm, 2, &arg0))) {
     sq_throwerror(vm, _SC("Argument 1 not a string"));
@@ -134,7 +134,7 @@
 
 static SQInteger TestObject_release_hook(SQUserPointer ptr, SQInteger )
 {
-  scripting::TestObject* _this = reinterpret_cast<scripting::TestObject*> (ptr);
+  Scripting::TestObject* _this = reinterpret_cast<Scripting::TestObject*> (ptr);
   delete _this;
   return 0;
 }
@@ -146,7 +146,7 @@
     sq_throwerror(vm, _SC("'set_sprite' called without instance"));
     return SQ_ERROR;
   }
-  scripting::TestObject* _this = reinterpret_cast<scripting::TestObject*> (data);
+  Scripting::TestObject* _this = reinterpret_cast<Scripting::TestObject*> (data);
   const SQChar* arg0;
   if(SQ_FAILED(sq_getstring(vm, 2, &arg0))) {
     sq_throwerror(vm, _SC("Argument 1 not a string"));
@@ -175,7 +175,7 @@
     sq_throwerror(vm, _SC("'set_action' called without instance"));
     return SQ_ERROR;
   }
-  scripting::TestObject* _this = reinterpret_cast<scripting::TestObject*> (data);
+  Scripting::TestObject* _this = reinterpret_cast<Scripting::TestObject*> (data);
   const SQChar* arg0;
   if(SQ_FAILED(sq_getstring(vm, 2, &arg0))) {
     sq_throwerror(vm, _SC("Argument 1 not a string"));
@@ -204,7 +204,7 @@
     sq_throwerror(vm, _SC("'set_pos' called without instance"));
     return SQ_ERROR;
   }
-  scripting::TestObject* _this = reinterpret_cast<scripting::TestObject*> (data);
+  Scripting::TestObject* _this = reinterpret_cast<Scripting::TestObject*> (data);
   SQFloat arg0;
   if(SQ_FAILED(sq_getfloat(vm, 2, &arg0))) {
     sq_throwerror(vm, _SC("Argument 1 not a float"));
@@ -238,7 +238,7 @@
     sq_throwerror(vm, _SC("'set_vflip' called without instance"));
     return SQ_ERROR;
   }
-  scripting::TestObject* _this = reinterpret_cast<scripting::TestObject*> (data);
+  Scripting::TestObject* _this = reinterpret_cast<Scripting::TestObject*> (data);
   SQBool arg0;
   if(SQ_FAILED(sq_getbool(vm, 2, &arg0))) {
     sq_throwerror(vm, _SC("Argument 1 not a bool"));
@@ -267,7 +267,7 @@
     sq_throwerror(vm, _SC("'attach' called without instance"));
     return SQ_ERROR;
   }
-  scripting::TestObject* _this = reinterpret_cast<scripting::TestObject*> (data);
+  Scripting::TestObject* _this = reinterpret_cast<Scripting::TestObject*> (data);
   const SQChar* arg0;
   if(SQ_FAILED(sq_getstring(vm, 2, &arg0))) {
     sq_throwerror(vm, _SC("Argument 1 not a string"));
@@ -296,7 +296,7 @@
 
 static SQInteger Player_release_hook(SQUserPointer ptr, SQInteger )
 {
-  scripting::Player* _this = reinterpret_cast<scripting::Player*> (ptr);
+  Scripting::Player* _this = reinterpret_cast<Scripting::Player*> (ptr);
   delete _this;
   return 0;
 }
@@ -308,7 +308,7 @@
     sq_throwerror(vm, _SC("'start_listening' called without instance"));
     return SQ_ERROR;
   }
-  scripting::Player* _this = reinterpret_cast<scripting::Player*> (data);
+  Scripting::Player* _this = reinterpret_cast<Scripting::Player*> (data);
 
   try {
     _this->start_listening();
@@ -332,7 +332,7 @@
     sq_throwerror(vm, _SC("'stop_listening' called without instance"));
     return SQ_ERROR;
   }
-  scripting::Player* _this = reinterpret_cast<scripting::Player*> (data);
+  Scripting::Player* _this = reinterpret_cast<Scripting::Player*> (data);
 
   try {
     _this->stop_listening();
@@ -351,7 +351,7 @@
 
 static SQInteger ScriptableObject_release_hook(SQUserPointer ptr, SQInteger )
 {
-  scripting::ScriptableObject* _this = reinterpret_cast<scripting::ScriptableObject*> (ptr);
+  Scripting::ScriptableObject* _this = reinterpret_cast<Scripting::ScriptableObject*> (ptr);
   delete _this;
   return 0;
 }
@@ -363,7 +363,7 @@
     sq_throwerror(vm, _SC("'move_to' called without instance"));
     return SQ_ERROR;
   }
-  scripting::ScriptableObject* _this = reinterpret_cast<scripting::ScriptableObject*> (data);
+  Scripting::ScriptableObject* _this = reinterpret_cast<Scripting::ScriptableObject*> (data);
   SQFloat arg0;
   if(SQ_FAILED(sq_getfloat(vm, 2, &arg0))) {
     sq_throwerror(vm, _SC("Argument 1 not a float"));
@@ -407,7 +407,7 @@
     sq_throwerror(vm, _SC("'start_flash' called without instance"));
     return SQ_ERROR;
   }
-  scripting::ScriptableObject* _this = reinterpret_cast<scripting::ScriptableObject*> (data);
+  Scripting::ScriptableObject* _this = reinterpret_cast<Scripting::ScriptableObject*> (data);
   SQFloat arg0;
   if(SQ_FAILED(sq_getfloat(vm, 2, &arg0))) {
     sq_throwerror(vm, _SC("Argument 1 not a float"));
@@ -438,7 +438,7 @@
   }
 
   try {
-    scripting::set_sector(arg0);
+    Scripting::set_sector(arg0);
 
     return 0;
 
@@ -461,7 +461,7 @@
   }
 
   try {
-    scripting::play_music(arg0);
+    Scripting::play_music(arg0);
 
     return 0;
 
@@ -484,7 +484,7 @@
   }
 
   try {
-    scripting::stop_music(static_cast<float> (arg0));
+    Scripting::stop_music(static_cast<float> (arg0));
 
     return 0;
 
@@ -507,7 +507,7 @@
   }
 
   try {
-    scripting::play_sound(arg0);
+    Scripting::play_sound(arg0);
 
     return 0;
 
@@ -535,7 +535,7 @@
   }
 
   try {
-    scripting::caption_add(static_cast<int> (arg0), arg1);
+    Scripting::caption_add(static_cast<int> (arg0), arg1);
 
     return 0;
 
@@ -554,7 +554,7 @@
   (void) vm;
 
   try {
-    scripting::caption_clear();
+    Scripting::caption_clear();
 
     return 0;
 
@@ -573,7 +573,7 @@
   (void) vm;
 
   try {
-    scripting::caption_end();
+    Scripting::caption_end();
 
     return 0;
 
@@ -596,7 +596,7 @@
   }
 
   try {
-    scripting::camera_set_active(arg0 == SQTrue);
+    Scripting::camera_set_active(arg0 == SQTrue);
 
     return 0;
 
@@ -615,7 +615,7 @@
   (void) vm;
 
   try {
-    scripting::camera_continue_path();
+    Scripting::camera_continue_path();
 
     return 0;
 
@@ -634,7 +634,7 @@
   (void) vm;
 
   try {
-    scripting::camera_begin_path();
+    Scripting::camera_begin_path();
 
     return 0;
 
@@ -667,7 +667,7 @@
   }
 
   try {
-    scripting::camera_add_point(static_cast<float> (arg0), static_cast<float> (arg1), static_cast<float> (arg2));
+    Scripting::camera_add_point(static_cast<float> (arg0), static_cast<float> (arg1), static_cast<float> (arg2));
 
     return 0;
 
@@ -686,7 +686,7 @@
   (void) vm;
 
   try {
-    scripting::camera_end_path();
+    Scripting::camera_end_path();
 
     return 0;
 
@@ -714,7 +714,7 @@
   }
 
   try {
-    scripting::camera_set_pos(static_cast<float> (arg0), static_cast<float> (arg1));
+    Scripting::camera_set_pos(static_cast<float> (arg0), static_cast<float> (arg1));
 
     return 0;
 
@@ -737,7 +737,7 @@
   }
 
   try {
-    scripting::camera_set_zoom(static_cast<float> (arg0));
+    Scripting::camera_set_zoom(static_cast<float> (arg0));
 
     return 0;
 
@@ -760,7 +760,7 @@
   }
 
   try {
-    scripting::set_controller_help_active(arg0 == SQTrue);
+    Scripting::set_controller_help_active(arg0 == SQTrue);
 
     return 0;
 
@@ -798,7 +798,7 @@
   }
 
   try {
-    scripting::dialog_show(static_cast<int> (arg0), arg1, arg2, arg3);
+    Scripting::dialog_show(static_cast<int> (arg0), arg1, arg2, arg3);
 
     return 0;
 
@@ -817,7 +817,7 @@
   HSQUIRRELVM arg0 = vm;
 
   try {
-    scripting::wait_for_dialog(arg0);
+    Scripting::wait_for_dialog(arg0);
 
     return sq_suspendvm(vm);
 
@@ -836,7 +836,7 @@
   HSQUIRRELVM arg0 = vm;
 
   try {
-    scripting::wait_for_fade(arg0);
+    Scripting::wait_for_fade(arg0);
 
     return sq_suspendvm(vm);
 
@@ -855,7 +855,7 @@
   HSQUIRRELVM arg0 = vm;
 
   try {
-    scripting::wait_for_camera(arg0);
+    Scripting::wait_for_camera(arg0);
 
     return sq_suspendvm(vm);
 
@@ -878,7 +878,7 @@
   }
 
   try {
-    scripting::conversation_add(arg0);
+    Scripting::conversation_add(arg0);
 
     return 0;
 
@@ -906,7 +906,7 @@
   }
 
   try {
-    scripting::conversation_add2(arg0, arg1);
+    Scripting::conversation_add2(arg0, arg1);
 
     return 0;
 
@@ -925,7 +925,7 @@
   (void) vm;
 
   try {
-    scripting::conversation_show();
+    Scripting::conversation_show();
 
     return 0;
 
@@ -943,7 +943,7 @@
 {
 
   try {
-    int return_value = scripting::conversation_get_selection();
+    int return_value = Scripting::conversation_get_selection();
 
     sq_pushinteger(vm, return_value);
     return 1;
@@ -963,7 +963,7 @@
   HSQUIRRELVM arg0 = vm;
 
   try {
-    scripting::wait_for_conversation(arg0);
+    Scripting::wait_for_conversation(arg0);
 
     return sq_suspendvm(vm);
 
@@ -991,7 +991,7 @@
   }
 
   try {
-    scripting::add_objective(arg0, arg1);
+    Scripting::add_objective(arg0, arg1);
 
     return 0;
 
@@ -1014,7 +1014,7 @@
   }
 
   try {
-    scripting::objective_complete(arg0);
+    Scripting::objective_complete(arg0);
 
     return 0;
 
@@ -1037,7 +1037,7 @@
   }
 
   try {
-    bool return_value = scripting::is_objective_given(arg0);
+    bool return_value = Scripting::is_objective_given(arg0);
 
     sq_pushbool(vm, return_value);
     return 1;
@@ -1061,7 +1061,7 @@
   }
 
   try {
-    bool return_value = scripting::is_objective_complete(arg0);
+    bool return_value = Scripting::is_objective_complete(arg0);
 
     sq_pushbool(vm, return_value);
     return 1;
@@ -1081,7 +1081,7 @@
   HSQUIRRELVM arg0 = vm;
 
   try {
-    bool return_value = scripting::run_before(arg0);
+    bool return_value = Scripting::run_before(arg0);
 
     sq_pushbool(vm, return_value);
     return 1;
@@ -1106,7 +1106,7 @@
   }
 
   try {
-    scripting::save_state(arg0, arg1);
+    Scripting::save_state(arg0, arg1);
 
     return 0;
 
@@ -1130,7 +1130,7 @@
   }
 
   try {
-    scripting::load_state(arg0, arg1);
+    Scripting::load_state(arg0, arg1);
 
     return 0;
 
@@ -1149,7 +1149,7 @@
   (void) vm;
 
   try {
-    scripting::list_objects();
+    Scripting::list_objects();
 
     return 0;
 
@@ -1172,7 +1172,7 @@
   }
 
   try {
-    scripting::set_debug(arg0 == SQTrue);
+    Scripting::set_debug(arg0 == SQTrue);
 
     return 0;
 
@@ -1190,7 +1190,7 @@
 {
 
   try {
-    bool return_value = scripting::get_debug();
+    bool return_value = Scripting::get_debug();
 
     sq_pushbool(vm, return_value);
     return 1;
@@ -1209,7 +1209,7 @@
 {
 
   try {
-    float return_value = scripting::get_game_speed();
+    float return_value = Scripting::get_game_speed();
 
     sq_pushfloat(vm, return_value);
     return 1;
@@ -1233,7 +1233,7 @@
   }
 
   try {
-    scripting::set_game_speed(static_cast<float> (arg0));
+    Scripting::set_game_speed(static_cast<float> (arg0));
 
     return 0;
 
@@ -1257,7 +1257,7 @@
   }
 
   try {
-    scripting::wait(arg0, static_cast<float> (arg1));
+    Scripting::wait(arg0, static_cast<float> (arg1));
 
     return sq_suspendvm(vm);
 
@@ -1273,12 +1273,12 @@
 
 static SQInteger display_wrapper(HSQUIRRELVM vm)
 {
-  return scripting::display(vm);
+  return Scripting::display(vm);
 }
 
 static SQInteger println_wrapper(HSQUIRRELVM vm)
 {
-  return scripting::println(vm);
+  return Scripting::println(vm);
 }
 
 static SQInteger set_console_font_wrapper(HSQUIRRELVM vm)
@@ -1295,7 +1295,7 @@
   }
 
   try {
-    scripting::set_console_font(arg0, static_cast<int> (arg1));
+    Scripting::set_console_font(arg0, static_cast<int> (arg1));
 
     return 0;
 
@@ -1318,7 +1318,7 @@
   }
 
   try {
-    scripting::set_gamma(static_cast<float> (arg0));
+    Scripting::set_gamma(static_cast<float> (arg0));
 
     return 0;
 
@@ -1351,7 +1351,7 @@
   }
 
   try {
-    scripting::set_gamma_rgb(static_cast<float> (arg0), static_cast<float> (arg1), static_cast<float> (arg2));
+    Scripting::set_gamma_rgb(static_cast<float> (arg0), static_cast<float> (arg1), static_cast<float> (arg2));
 
     return 0;
 
@@ -1370,7 +1370,7 @@
   (void) vm;
 
   try {
-    scripting::show_config();
+    Scripting::show_config();
 
     return 0;
 
@@ -1389,7 +1389,7 @@
   (void) vm;
 
   try {
-    scripting::cutscene_begin();
+    Scripting::cutscene_begin();
 
     return 0;
 
@@ -1408,7 +1408,7 @@
   (void) vm;
 
   try {
-    scripting::cutscene_end();
+    Scripting::cutscene_end();
 
     return 0;
 
@@ -1446,7 +1446,7 @@
   }
 
   try {
-    scripting::internal_fadeout_rgb(static_cast<float> (arg0), static_cast<float> (arg1), static_cast<float> (arg2), static_cast<float> (arg3));
+    Scripting::internal_fadeout_rgb(static_cast<float> (arg0), static_cast<float> (arg1), static_cast<float> (arg2), static_cast<float> (arg3));
 
     return 0;
 
@@ -1469,7 +1469,7 @@
   }
 
   try {
-    scripting::internal_fadein(static_cast<float> (arg0));
+    Scripting::internal_fadein(static_cast<float> (arg0));
 
     return 0;
 
@@ -1487,7 +1487,7 @@
 {
 
   try {
-    int return_value = scripting::render_mask_get();
+    int return_value = Scripting::render_mask_get();
 
     sq_pushinteger(vm, return_value);
     return 1;
@@ -1511,7 +1511,7 @@
   }
 
   try {
-    scripting::render_mask_set(static_cast<int> (arg0));
+    Scripting::render_mask_set(static_cast<int> (arg0));
 
     return 0;
 
@@ -1527,11 +1527,11 @@
 
 static SQInteger spawn_object_wrapper(HSQUIRRELVM vm)
 {
-  return scripting::spawn_object(vm);
+  return Scripting::spawn_object(vm);
 }
 
 } // end of namespace Wrapper
-void create_squirrel_instance(HSQUIRRELVM v, scripting::GameObject* object, bool setup_releasehook)
+void create_squirrel_instance(HSQUIRRELVM v, Scripting::GameObject* object, bool setup_releasehook)
 {
   using namespace Wrapper;
 
@@ -1557,7 +1557,7 @@
   sq_remove(v, -2); // remove root table
 }
 
-void create_squirrel_instance(HSQUIRRELVM v, scripting::TestObject* object, bool setup_releasehook)
+void create_squirrel_instance(HSQUIRRELVM v, Scripting::TestObject* object, bool setup_releasehook)
 {
   using namespace Wrapper;
 
@@ -1583,7 +1583,7 @@
   sq_remove(v, -2); // remove root table
 }
 
-void create_squirrel_instance(HSQUIRRELVM v, scripting::Player* object, bool setup_releasehook)
+void create_squirrel_instance(HSQUIRRELVM v, Scripting::Player* object, bool setup_releasehook)
 {
   using namespace Wrapper;
 
@@ -1609,7 +1609,7 @@
   sq_remove(v, -2); // remove root table
 }
 
-void create_squirrel_instance(HSQUIRRELVM v, scripting::ScriptableObject* object, bool setup_releasehook)
+void create_squirrel_instance(HSQUIRRELVM v, Scripting::ScriptableObject* object, bool setup_releasehook)
 {
   using namespace Wrapper;
 
@@ -2105,4 +2105,4 @@
 
 }
 
-} // end of namespace scripting
+} // end of namespace Scripting

Modified: trunk/windstille/src/scripting/wrapper.hpp
===================================================================
--- trunk/windstille/src/scripting/wrapper.hpp	2009-02-11 21:22:01 UTC (rev 2464)
+++ trunk/windstille/src/scripting/wrapper.hpp	2009-02-11 21:47:00 UTC (rev 2465)
@@ -9,15 +9,15 @@
 #include <squirrel.h>
 #include "wrapper.interface.hpp"
 
-namespace scripting
+namespace Scripting
 {
 
 void register_windstille_wrapper(HSQUIRRELVM v);
 
-void create_squirrel_instance(HSQUIRRELVM v, scripting::GameObject* object, bool setup_releasehook = false);
-void create_squirrel_instance(HSQUIRRELVM v, scripting::TestObject* object, bool setup_releasehook = false);
-void create_squirrel_instance(HSQUIRRELVM v, scripting::Player* object, bool setup_releasehook = false);
-void create_squirrel_instance(HSQUIRRELVM v, scripting::ScriptableObject* object, bool setup_releasehook = false);
+void create_squirrel_instance(HSQUIRRELVM v, Scripting::GameObject* object, bool setup_releasehook = false);
+void create_squirrel_instance(HSQUIRRELVM v, Scripting::TestObject* object, bool setup_releasehook = false);
+void create_squirrel_instance(HSQUIRRELVM v, Scripting::Player* object, bool setup_releasehook = false);
+void create_squirrel_instance(HSQUIRRELVM v, Scripting::ScriptableObject* object, bool setup_releasehook = false);
 
 }
 

Deleted: trunk/windstille/src/sexpr_file_reader.cpp
===================================================================
--- trunk/windstille/src/sexpr_file_reader.cpp	2009-02-11 21:22:01 UTC (rev 2464)
+++ trunk/windstille/src/sexpr_file_reader.cpp	2009-02-11 21:47:00 UTC (rev 2465)
@@ -1,246 +0,0 @@
-/*
-**  Windstille - A Sci-Fi Action-Adventure Game
-**  Copyright (C) 2005 Ingo Ruhnke <grumbel at gmx.de>
-**
-**  This program is free software: you can redistribute it and/or modify
-**  it under the terms of the GNU General Public License as published by
-**  the Free Software Foundation, either version 3 of the License, or
-**  (at your option) any later version.
-**  
-**  This program is distributed in the hope that it will be useful,
-**  but WITHOUT ANY WARRANTY; without even the implied warranty of
-**  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
-**  GNU General Public License for more details.
-**  
-**  You should have received a copy of the GNU General Public License
-**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
-*/
-
-#include <assert.h>
-#include <string.h>
-#include "lisp/parser.hpp"
-#include "lisp/getters.hpp"
-#include "color.hpp"
-#include "math/size.hpp"
-#include "math/vector.hpp"
-#include "math/vector3.hpp"
-#include "file_reader_impl.hpp"
-#include "sexpr_file_reader.hpp"
-
-class SExprFileReaderImpl: public FileReaderImpl
-{
-public:
-  /** Pointer to the top-most lisp element, only here for purpose of
-      being able to delete it */
-  const lisp::Lisp* root;
-
-  bool  delete_sexpr;
-  const lisp::Lisp* sexpr;
-
-  SExprFileReaderImpl(const lisp::Lisp* root_, const lisp::Lisp* sexpr_)
-    : root(root_),
-      sexpr(sexpr_), 
-      delete_sexpr(false)
-  {
-    assert(sexpr && 
-           sexpr->get_type() == lisp::Lisp::TYPE_LIST &&
-           sexpr->get_list_size() >= 1);
-  }
-
-  SExprFileReaderImpl(const lisp::Lisp* sexpr_, bool delete_sexpr_) 
-    : root(0),
-      sexpr(sexpr_), 
-      delete_sexpr(delete_sexpr_)
-  {
-    assert(sexpr && 
-           sexpr->get_type() == lisp::Lisp::TYPE_LIST &&
-           sexpr->get_list_size() >= 1);
-  }
-
-  ~SExprFileReaderImpl()
-  {
-    if (root)
-      delete root;
-
-    if (delete_sexpr)
-      delete sexpr;
-  }
-
-  std::string get_name() const 
-  {
-    return sexpr->get_list_elem(0)->get_symbol();
-  }
-
-  bool read_int(const char* name, int& v) const 
-  {
-    lisp::Lisp* item = get_subsection_item(name);
-    if (item && item->get_type() == lisp::Lisp::TYPE_INT)
-      {
-        v = item->get_int();
-        return true;
-      }
-    return false;
-  }
-
-  bool read_float(const char* name, float& v) const 
-  {
-    lisp::Lisp* item = get_subsection_item(name);
-    if (item)
-      {
-        if (item->get_type() == lisp::Lisp::TYPE_FLOAT)
-          {
-            v = item->get_float();
-            return true;
-          }
-        else if (item->get_type() == lisp::Lisp::TYPE_INT)
-          {
-            v = item->get_int();
-            return true;
-          }
-        else
-          {
-            return false;
-          }
-      }
-    return false;
-  }
-
-  bool read_bool  (const char* name, bool& v) const 
-  {
-    lisp::Lisp* item = get_subsection_item(name);
-    if (item && item->get_type() == lisp::Lisp::TYPE_BOOL)
-      {
-        v = item->get_bool();
-        return true;
-      }
-    return false;
-  }
-
-  bool read_string(const char* name, std::string& v) const 
-  {
-    lisp::Lisp* sub = get_subsection(name);
-    if (sub)
-      {
-        v = "";
-        for(size_t i = 1; i < sub->get_list_size(); ++i)
-          {
-            lisp::Lisp* item = sub->get_list_elem(i);
-            if (item->get_type() == lisp::Lisp::TYPE_STRING)
-              {
-                v += item->get_string();
-              }
-            else if (item->get_type() == lisp::Lisp::TYPE_SYMBOL)
-              {
-                v += item->get_symbol();
-              }
-          }
-        return true;
-      }
-    return false;
-  }
-
-  bool get(const char* name, std::vector<int>&   v) const
-  {
-    lisp::Lisp* sub = get_subsection(name);
-    if (sub)
-      return property_get(sub, v);
-    else 
-      return false;
-  }
-
-  bool get(const char* name, std::vector<bool>&   v) const
-  {
-    lisp::Lisp* sub = get_subsection(name);
-    if (sub)
-      return property_get(sub, v);
-    else 
-      return false;
-  }
-
-  bool get(const char* name, std::vector<std::string>&   v) const
-  {
-    lisp::Lisp* sub = get_subsection(name);
-    if (sub)
-      return property_get(sub, v);
-    else 
-      return false;
-  }
-
-  bool get(const char* name, std::vector<float>& v) const
-  {
-    lisp::Lisp* sub = get_subsection(name);
-    if (sub)
-      return property_get(sub, v);
-    else 
-      return false;
-  }
-
-  bool read_section(const char* name, FileReader& v) const 
-  {
-    lisp::Lisp* cur = get_subsection(name);
-    if (cur)
-      {
-        v = SExprFileReader(cur);
-        return true;
-      }
-    return false;
-  }
-
-  std::vector<FileReader> get_sections() const 
-  {
-    std::vector<FileReader> lst;
-    for(size_t i = 1; i < sexpr->get_list_size(); ++i)
-      { // iterate over subsections
-        lst.push_back(SExprFileReader(sexpr->get_list_elem(i)));
-      }
-    return lst;
-  }
-
-  std::vector<std::string> get_section_names() const 
-  {
-    std::vector<std::string> lst;
-
-    for(size_t i = 1; i < sexpr->get_list_size(); ++i)
-      { // iterate over subsections
-        lisp::Lisp* sub = sexpr->get_list_elem(i);
-        lst.push_back(sub->get_list_elem(0)->get_symbol());
-      }
-
-    return lst;
-  }
-
-private:
-  lisp::Lisp* get_subsection_item(const char* name) const
-  {
-    lisp::Lisp* sub = get_subsection(name);
-    if (sub && sub->get_list_size() == 2)
-      {
-        return sub->get_list_elem(1);
-      }
-    return 0;
-  }
-
-  lisp::Lisp* get_subsection(const char* name) const
-  {
-    for(size_t i = 1; i < sexpr->get_list_size(); ++i)
-      { // iterate over subsections
-        lisp::Lisp* sub = sexpr->get_list_elem(i);
-        if (strcmp(sub->get_list_elem(0)->get_symbol(), name) == 0)
-          return sub;
-      }
-    return 0;
-  } 
-
-};
-
-SExprFileReader::SExprFileReader(const lisp::Lisp* sexpr, bool delete_sexpr)
-  : FileReader(boost::shared_ptr<FileReaderImpl>(new SExprFileReaderImpl(sexpr, delete_sexpr)))
-{
-}
-
-SExprFileReader::SExprFileReader(const lisp::Lisp* root, const lisp::Lisp* sexpr)
-  : FileReader(boost::shared_ptr<FileReaderImpl>(new SExprFileReaderImpl(root, sexpr)))
-{
-}
-
-/* EOF */

Deleted: trunk/windstille/src/sexpr_file_reader.hpp
===================================================================
--- trunk/windstille/src/sexpr_file_reader.hpp	2009-02-11 21:22:01 UTC (rev 2464)
+++ trunk/windstille/src/sexpr_file_reader.hpp	2009-02-11 21:47:00 UTC (rev 2465)
@@ -1,36 +0,0 @@
-/*
-**  Windstille - A Sci-Fi Action-Adventure Game
-**  Copyright (C) 2005 Ingo Ruhnke <grumbel at gmx.de>
-**
-**  This program is free software: you can redistribute it and/or modify
-**  it under the terms of the GNU General Public License as published by
-**  the Free Software Foundation, either version 3 of the License, or
-**  (at your option) any later version.
-**  
-**  This program is distributed in the hope that it will be useful,
-**  but WITHOUT ANY WARRANTY; without even the implied warranty of
-**  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
-**  GNU General Public License for more details.
-**  
-**  You should have received a copy of the GNU General Public License
-**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
-*/
-
-#ifndef HEADER_WINDSTILLE_SEXPR_FILE_READER_HPP
-#define HEADER_WINDSTILLE_SEXPR_FILE_READER_HPP
-
-#include "file_reader.hpp"
-#include "lisp/lisp.hpp"
-
-/** */
-class SExprFileReader : public FileReader
-{
-private:
-public:
-  SExprFileReader(const lisp::Lisp* root, const lisp::Lisp* lisp);
-  SExprFileReader(const lisp::Lisp* lisp, bool delete_sexpr = false);
-};
-
-#endif
-
-/* EOF */

Modified: trunk/windstille/src/sprite2d/data.hpp
===================================================================
--- trunk/windstille/src/sprite2d/data.hpp	2009-02-11 21:22:01 UTC (rev 2464)
+++ trunk/windstille/src/sprite2d/data.hpp	2009-02-11 21:47:00 UTC (rev 2465)
@@ -25,7 +25,7 @@
 #include <GL/glew.h>
 #include <GL/gl.h>
 #include "util.hpp"
-#include "file_reader.hpp"
+#include "util/file_reader.hpp"
 #include "math/vector.hpp"
 #include "display/surface.hpp"
 #include "ref.hpp"

Modified: trunk/windstille/src/sprite2d/sprite.cpp
===================================================================
--- trunk/windstille/src/sprite2d/sprite.cpp	2009-02-11 21:22:01 UTC (rev 2464)
+++ trunk/windstille/src/sprite2d/sprite.cpp	2009-02-11 21:47:00 UTC (rev 2465)
@@ -26,7 +26,7 @@
 #include "sprite2d/data.hpp"
 #include "sprite2d/manager.hpp"
 #include "display/surface_drawing_parameters.hpp"
-#include "color.hpp"
+#include "display/color.hpp"
 #include "util.hpp"
 
 Sprite::Sprite()

Modified: trunk/windstille/src/sprite2d/sprite.hpp
===================================================================
--- trunk/windstille/src/sprite2d/sprite.hpp	2009-02-11 21:22:01 UTC (rev 2464)
+++ trunk/windstille/src/sprite2d/sprite.hpp	2009-02-11 21:47:00 UTC (rev 2465)
@@ -23,7 +23,7 @@
 #include <string>
 #include <GL/glew.h>
 #include <GL/gl.h>
-#include "color.hpp"
+#include "display/color.hpp"
 #include "display/surface.hpp"
 #include "math/vector.hpp"
 #include "math/matrix.hpp"

Modified: trunk/windstille/src/text_area.cpp
===================================================================
--- trunk/windstille/src/text_area.cpp	2009-02-11 21:22:01 UTC (rev 2464)
+++ trunk/windstille/src/text_area.cpp	2009-02-11 21:47:00 UTC (rev 2465)
@@ -21,7 +21,7 @@
 #include "display/opengl_state.hpp"
 #include "font/ttf_font.hpp"
 #include "text_area.hpp"
-#include "baby_xml.hpp"
+#include "util/baby_xml.hpp"
 #include "font/fonts.hpp"
 #include "text_area.hpp"
 

Modified: trunk/windstille/src/tile/tile_description.hpp
===================================================================
--- trunk/windstille/src/tile/tile_description.hpp	2009-02-11 21:22:01 UTC (rev 2464)
+++ trunk/windstille/src/tile/tile_description.hpp	2009-02-11 21:47:00 UTC (rev 2465)
@@ -21,7 +21,7 @@
 
 #include <vector>
 #include <string>
-#include "file_reader.hpp"
+#include "util/file_reader.hpp"
 
 class TileFactory;
 

Modified: trunk/windstille/src/tile/tile_factory.cpp
===================================================================
--- trunk/windstille/src/tile/tile_factory.cpp	2009-02-11 21:22:01 UTC (rev 2464)
+++ trunk/windstille/src/tile/tile_factory.cpp	2009-02-11 21:47:00 UTC (rev 2465)
@@ -29,7 +29,7 @@
 #include "tile_packer.hpp"
 #include "tile_factory.hpp"
 #include "tile_description.hpp"
-#include "sexpr_file_reader.hpp"
+#include "util/sexpr_file_reader.hpp"
 #include "display/surface_manager.hpp"
 #include "display/texture.hpp"
 #include "physfs/physfs_sdl.hpp"

Copied: trunk/windstille/src/util/baby_xml.cpp (from rev 2463, trunk/windstille/src/baby_xml.cpp)


Property changes on: trunk/windstille/src/util/baby_xml.cpp
___________________________________________________________________
Name: svn:mergeinfo
   + 

Copied: trunk/windstille/src/util/baby_xml.hpp (from rev 2463, trunk/windstille/src/baby_xml.hpp)


Property changes on: trunk/windstille/src/util/baby_xml.hpp
___________________________________________________________________
Name: svn:mergeinfo
   + 

Copied: trunk/windstille/src/util/command_line.cpp (from rev 2463, trunk/windstille/src/command_line.cpp)


Property changes on: trunk/windstille/src/util/command_line.cpp
___________________________________________________________________
Name: svn:mergeinfo
   + 

Copied: trunk/windstille/src/util/command_line.hpp (from rev 2463, trunk/windstille/src/command_line.hpp)


Property changes on: trunk/windstille/src/util/command_line.hpp
___________________________________________________________________
Name: svn:mergeinfo
   + 

Copied: trunk/windstille/src/util/command_line_generic.cpp (from rev 2463, trunk/windstille/src/command_line_generic.cpp)


Property changes on: trunk/windstille/src/util/command_line_generic.cpp
___________________________________________________________________
Name: svn:mergeinfo
   + 

Copied: trunk/windstille/src/util/command_line_generic.hpp (from rev 2463, trunk/windstille/src/command_line_generic.hpp)


Property changes on: trunk/windstille/src/util/command_line_generic.hpp
___________________________________________________________________
Name: svn:mergeinfo
   + 

Copied: trunk/windstille/src/util/file_reader.cpp (from rev 2463, trunk/windstille/src/file_reader.cpp)


Property changes on: trunk/windstille/src/util/file_reader.cpp
___________________________________________________________________
Name: svn:keywords
   + Id
Name: svn:mergeinfo
   + 
Name: svn:eol-style
   + native

Copied: trunk/windstille/src/util/file_reader.hpp (from rev 2463, trunk/windstille/src/file_reader.hpp)


Property changes on: trunk/windstille/src/util/file_reader.hpp
___________________________________________________________________
Name: svn:mergeinfo
   + 

Copied: trunk/windstille/src/util/file_reader_impl.hpp (from rev 2463, trunk/windstille/src/file_reader_impl.hpp)


Property changes on: trunk/windstille/src/util/file_reader_impl.hpp
___________________________________________________________________
Name: svn:keywords
   + Id
Name: svn:mergeinfo
   + 
Name: svn:eol-style
   + native

Copied: trunk/windstille/src/util/getter.cpp (from rev 2463, trunk/windstille/src/getter.cpp)
===================================================================
--- trunk/windstille/src/getter.cpp	2009-02-11 21:05:03 UTC (rev 2463)
+++ trunk/windstille/src/util/getter.cpp	2009-02-11 21:47:00 UTC (rev 2465)
@@ -0,0 +1,136 @@
+/*
+**  Windstille - A Sci-Fi Action-Adventure Game
+**  Copyright (C) 2007 Ingo Ruhnke <grumbel at gmx.de>
+**
+**  This program is free software: you can redistribute it and/or modify
+**  it under the terms of the GNU General Public License as published by
+**  the Free Software Foundation, either version 3 of the License, or
+**  (at your option) any later version.
+**  
+**  This program is distributed in the hope that it will be useful,
+**  but WITHOUT ANY WARRANTY; without even the implied warranty of
+**  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+**  GNU General Public License for more details.
+**  
+**  You should have received a copy of the GNU General Public License
+**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
+*/
+
+#include "math/vector.hpp"
+#include "math/vector3.hpp"
+#include "math/quaternion.hpp"
+#include "math/matrix.hpp"
+#include "display/color.hpp"
+#include "file_reader.hpp"
+#include "getter.hpp"
+
+bool get(FileReader& reader, const char* name, Vector&  value)
+{
+  std::vector<float> floats;
+  if (reader.get(name, floats) && floats.size() == 2) {
+    value.x = floats[0];
+    value.y = floats[1];
+    return true;
+  } else {
+    return false;
+  }  
+}
+
+bool get(FileReader& reader, const char* name, Vector3& value)
+{
+  std::vector<float> floats;
+  if (reader.get(name, floats) && floats.size() == 3) {
+    value.x = floats[0];
+    value.y = floats[1];
+    value.z = floats[2];
+    return true;
+  } else {
+    return false;
+  }
+}
+
+bool get(FileReader& reader, const char* name, Quaternion& value)
+{
+  std::vector<float> floats;
+  if (reader.get(name, floats) && floats.size() == 4) {
+    value.w = floats[0];
+    value.x = floats[1];
+    value.y = floats[2];
+    value.z = floats[3];
+    return true;
+  } else {
+    return false;
+  }
+}
+
+bool get(FileReader& reader, const char* name, Matrix& m)
+{
+  std::vector<float> floats;
+  if (reader.get(name, floats) && floats.size() == 16) {  
+    m[ 0] = floats[0];
+    m[ 4] = floats[1];
+    m[ 8] = floats[2];
+    m[12] = floats[3];
+    m[ 1] = floats[4];
+    m[ 5] = floats[5];
+    m[ 9] = floats[6];
+    m[13] = floats[7];
+    m[ 2] = floats[8];
+    m[ 6] = floats[9];
+    m[10] = floats[10];
+    m[14] = floats[11];
+    m[ 3] = floats[12];
+    m[ 7] = floats[13];
+    m[11] = floats[14];
+    m[15] = floats[15];
+    return true;
+    // FIXME: Could add code to handel 3x3 matrixes
+  } else {
+    return false;
+  }
+}
+
+bool get(FileReader& reader, const char* name, Color& value)
+{
+  std::vector<float> floats;
+  if (reader.get(name, floats)) {
+    if (floats.size() == 3)
+      {
+        value.r = floats[0];
+        value.g = floats[1];
+        value.b = floats[2];
+        value.a = 1.0f;
+        return true;
+      }
+    else if (floats.size() == 4)
+      {
+        value.r = floats[0];
+        value.b = floats[1];
+        value.g = floats[2];
+        value.a = floats[3];
+        return true;
+      }
+    else
+      {
+        return false;
+      }
+  } else {
+    return false;
+  } 
+}
+
+// Getters for primitive types
+// FIXME: Ugly, maybe there is a better way then to have different read/get names for the function
+bool get(FileReader& reader, const char* name, FileReader& v) { return reader.read(name, v); }
+
+bool get(FileReader& reader, const char* name, int&   v) { return reader.read(name, v); }
+bool get(FileReader& reader, const char* name, float& v) { return reader.read(name, v); }
+bool get(FileReader& reader, const char* name, bool& v) { return reader.read(name, v); }
+bool get(FileReader& reader, const char* name, std::string& v) { return reader.read(name, v); }
+
+bool get(FileReader& reader, const char* name, std::vector<bool>&   v) { return reader.read(name, v); }
+bool get(FileReader& reader, const char* name, std::vector<int>&   v) { return reader.read(name, v); }
+bool get(FileReader& reader, const char* name, std::vector<float>& v) { return reader.read(name, v); }
+bool get(FileReader& reader, const char* name, std::vector<std::string>& v) { return reader.read(name, v); }
+
+/* EOF */


Property changes on: trunk/windstille/src/util/getter.cpp
___________________________________________________________________
Name: svn:keywords
   + Id
Name: svn:mergeinfo
   + 
Name: svn:eol-style
   + native

Copied: trunk/windstille/src/util/getter.hpp (from rev 2463, trunk/windstille/src/getter.hpp)


Property changes on: trunk/windstille/src/util/getter.hpp
___________________________________________________________________
Name: svn:keywords
   + Id
Name: svn:mergeinfo
   + 
Name: svn:eol-style
   + native

Copied: trunk/windstille/src/util/response_curve.cpp (from rev 2463, trunk/windstille/src/response_curve.cpp)


Property changes on: trunk/windstille/src/util/response_curve.cpp
___________________________________________________________________
Name: svn:mergeinfo
   + 

Copied: trunk/windstille/src/util/response_curve.hpp (from rev 2463, trunk/windstille/src/response_curve.hpp)


Property changes on: trunk/windstille/src/util/response_curve.hpp
___________________________________________________________________
Name: svn:mergeinfo
   + 

Copied: trunk/windstille/src/util/sexpr_file_reader.cpp (from rev 2463, trunk/windstille/src/sexpr_file_reader.cpp)
===================================================================
--- trunk/windstille/src/sexpr_file_reader.cpp	2009-02-11 21:05:03 UTC (rev 2463)
+++ trunk/windstille/src/util/sexpr_file_reader.cpp	2009-02-11 21:47:00 UTC (rev 2465)
@@ -0,0 +1,246 @@
+/*
+**  Windstille - A Sci-Fi Action-Adventure Game
+**  Copyright (C) 2005 Ingo Ruhnke <grumbel at gmx.de>
+**
+**  This program is free software: you can redistribute it and/or modify
+**  it under the terms of the GNU General Public License as published by
+**  the Free Software Foundation, either version 3 of the License, or
+**  (at your option) any later version.
+**  
+**  This program is distributed in the hope that it will be useful,
+**  but WITHOUT ANY WARRANTY; without even the implied warranty of
+**  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+**  GNU General Public License for more details.
+**  
+**  You should have received a copy of the GNU General Public License
+**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
+*/
+
+#include <assert.h>
+#include <string.h>
+#include "lisp/parser.hpp"
+#include "lisp/getters.hpp"
+#include "display/color.hpp"
+#include "math/size.hpp"
+#include "math/vector.hpp"
+#include "math/vector3.hpp"
+#include "file_reader_impl.hpp"
+#include "sexpr_file_reader.hpp"
+
+class SExprFileReaderImpl: public FileReaderImpl
+{
+public:
+  /** Pointer to the top-most lisp element, only here for purpose of
+      being able to delete it */
+  const lisp::Lisp* root;
+
+  bool  delete_sexpr;
+  const lisp::Lisp* sexpr;
+
+  SExprFileReaderImpl(const lisp::Lisp* root_, const lisp::Lisp* sexpr_)
+    : root(root_),
+      sexpr(sexpr_), 
+      delete_sexpr(false)
+  {
+    assert(sexpr && 
+           sexpr->get_type() == lisp::Lisp::TYPE_LIST &&
+           sexpr->get_list_size() >= 1);
+  }
+
+  SExprFileReaderImpl(const lisp::Lisp* sexpr_, bool delete_sexpr_) 
+    : root(0),
+      sexpr(sexpr_), 
+      delete_sexpr(delete_sexpr_)
+  {
+    assert(sexpr && 
+           sexpr->get_type() == lisp::Lisp::TYPE_LIST &&
+           sexpr->get_list_size() >= 1);
+  }
+
+  ~SExprFileReaderImpl()
+  {
+    if (root)
+      delete root;
+
+    if (delete_sexpr)
+      delete sexpr;
+  }
+
+  std::string get_name() const 
+  {
+    return sexpr->get_list_elem(0)->get_symbol();
+  }
+
+  bool read_int(const char* name, int& v) const 
+  {
+    lisp::Lisp* item = get_subsection_item(name);
+    if (item && item->get_type() == lisp::Lisp::TYPE_INT)
+      {
+        v = item->get_int();
+        return true;
+      }
+    return false;
+  }
+
+  bool read_float(const char* name, float& v) const 
+  {
+    lisp::Lisp* item = get_subsection_item(name);
+    if (item)
+      {
+        if (item->get_type() == lisp::Lisp::TYPE_FLOAT)
+          {
+            v = item->get_float();
+            return true;
+          }
+        else if (item->get_type() == lisp::Lisp::TYPE_INT)
+          {
+            v = item->get_int();
+            return true;
+          }
+        else
+          {
+            return false;
+          }
+      }
+    return false;
+  }
+
+  bool read_bool  (const char* name, bool& v) const 
+  {
+    lisp::Lisp* item = get_subsection_item(name);
+    if (item && item->get_type() == lisp::Lisp::TYPE_BOOL)
+      {
+        v = item->get_bool();
+        return true;
+      }
+    return false;
+  }
+
+  bool read_string(const char* name, std::string& v) const 
+  {
+    lisp::Lisp* sub = get_subsection(name);
+    if (sub)
+      {
+        v = "";
+        for(size_t i = 1; i < sub->get_list_size(); ++i)
+          {
+            lisp::Lisp* item = sub->get_list_elem(i);
+            if (item->get_type() == lisp::Lisp::TYPE_STRING)
+              {
+                v += item->get_string();
+              }
+            else if (item->get_type() == lisp::Lisp::TYPE_SYMBOL)
+              {
+                v += item->get_symbol();
+              }
+          }
+        return true;
+      }
+    return false;
+  }
+
+  bool get(const char* name, std::vector<int>&   v) const
+  {
+    lisp::Lisp* sub = get_subsection(name);
+    if (sub)
+      return property_get(sub, v);
+    else 
+      return false;
+  }
+
+  bool get(const char* name, std::vector<bool>&   v) const
+  {
+    lisp::Lisp* sub = get_subsection(name);
+    if (sub)
+      return property_get(sub, v);
+    else 
+      return false;
+  }
+
+  bool get(const char* name, std::vector<std::string>&   v) const
+  {
+    lisp::Lisp* sub = get_subsection(name);
+    if (sub)
+      return property_get(sub, v);
+    else 
+      return false;
+  }
+
+  bool get(const char* name, std::vector<float>& v) const
+  {
+    lisp::Lisp* sub = get_subsection(name);
+    if (sub)
+      return property_get(sub, v);
+    else 
+      return false;
+  }
+
+  bool read_section(const char* name, FileReader& v) const 
+  {
+    lisp::Lisp* cur = get_subsection(name);
+    if (cur)
+      {
+        v = SExprFileReader(cur);
+        return true;
+      }
+    return false;
+  }
+
+  std::vector<FileReader> get_sections() const 
+  {
+    std::vector<FileReader> lst;
+    for(size_t i = 1; i < sexpr->get_list_size(); ++i)
+      { // iterate over subsections
+        lst.push_back(SExprFileReader(sexpr->get_list_elem(i)));
+      }
+    return lst;
+  }
+
+  std::vector<std::string> get_section_names() const 
+  {
+    std::vector<std::string> lst;
+
+    for(size_t i = 1; i < sexpr->get_list_size(); ++i)
+      { // iterate over subsections
+        lisp::Lisp* sub = sexpr->get_list_elem(i);
+        lst.push_back(sub->get_list_elem(0)->get_symbol());
+      }
+
+    return lst;
+  }
+
+private:
+  lisp::Lisp* get_subsection_item(const char* name) const
+  {
+    lisp::Lisp* sub = get_subsection(name);
+    if (sub && sub->get_list_size() == 2)
+      {
+        return sub->get_list_elem(1);
+      }
+    return 0;
+  }
+
+  lisp::Lisp* get_subsection(const char* name) const
+  {
+    for(size_t i = 1; i < sexpr->get_list_size(); ++i)
+      { // iterate over subsections
+        lisp::Lisp* sub = sexpr->get_list_elem(i);
+        if (strcmp(sub->get_list_elem(0)->get_symbol(), name) == 0)
+          return sub;
+      }
+    return 0;
+  } 
+
+};
+
+SExprFileReader::SExprFileReader(const lisp::Lisp* sexpr, bool delete_sexpr)
+  : FileReader(boost::shared_ptr<FileReaderImpl>(new SExprFileReaderImpl(sexpr, delete_sexpr)))
+{
+}
+
+SExprFileReader::SExprFileReader(const lisp::Lisp* root, const lisp::Lisp* sexpr)
+  : FileReader(boost::shared_ptr<FileReaderImpl>(new SExprFileReaderImpl(root, sexpr)))
+{
+}
+
+/* EOF */


Property changes on: trunk/windstille/src/util/sexpr_file_reader.cpp
___________________________________________________________________
Name: svn:keywords
   + Id
Name: svn:mergeinfo
   + 
Name: svn:eol-style
   + native

Copied: trunk/windstille/src/util/sexpr_file_reader.hpp (from rev 2463, trunk/windstille/src/sexpr_file_reader.hpp)


Property changes on: trunk/windstille/src/util/sexpr_file_reader.hpp
___________________________________________________________________
Name: svn:keywords
   + Id
Name: svn:mergeinfo
   + 
Name: svn:eol-style
   + native



From grumbel at mail.berlios.de  Wed Feb 11 22:56:31 2009
From: grumbel at mail.berlios.de (grumbel at BerliOS)
Date: Wed, 11 Feb 2009 22:56:31 +0100
Subject: [Windstille-commit] r2466 - in trunk/windstille/src: . armature
	display engine font gui input math navigation objects
	particles scripting sprite2d sprite3d tile util
Message-ID: <200902112156.n1BLuVob000917@sheep.berlios.de>

Author: grumbel
Date: 2009-02-11 22:56:29 +0100 (Wed, 11 Feb 2009)
New Revision: 2466

Added:
   trunk/windstille/src/math/math.hpp
   trunk/windstille/src/util/field.hpp
   trunk/windstille/src/util/handle.hpp
   trunk/windstille/src/util/ref.hpp
   trunk/windstille/src/util/refcounter.hpp
   trunk/windstille/src/util/util.cpp
   trunk/windstille/src/util/util.hpp
Removed:
   trunk/windstille/src/field.hpp
   trunk/windstille/src/handle.hpp
   trunk/windstille/src/math.hpp
   trunk/windstille/src/ref.hpp
   trunk/windstille/src/refcounter.hpp
   trunk/windstille/src/util.cpp
   trunk/windstille/src/util.hpp
Modified:
   trunk/windstille/src/SConscript
   trunk/windstille/src/armature/mesh.cpp
   trunk/windstille/src/conversation.cpp
   trunk/windstille/src/display/display.cpp
   trunk/windstille/src/display/framebuffer.cpp
   trunk/windstille/src/display/opengl_state.cpp
   trunk/windstille/src/display/scene_context.cpp
   trunk/windstille/src/display/shader_object.cpp
   trunk/windstille/src/display/shader_program.cpp
   trunk/windstille/src/display/surface_manager.cpp
   trunk/windstille/src/display/surface_manager.hpp
   trunk/windstille/src/display/texture.cpp
   trunk/windstille/src/display/texture_manager.cpp
   trunk/windstille/src/engine/game_object.hpp
   trunk/windstille/src/font/ttf_font.cpp
   trunk/windstille/src/gui/grid_component.hpp
   trunk/windstille/src/gui/menu_component.cpp
   trunk/windstille/src/input/input_manager_sdl.cpp
   trunk/windstille/src/input/wiimote.cpp
   trunk/windstille/src/navigation/navigation_graph.hpp
   trunk/windstille/src/objects/character.cpp
   trunk/windstille/src/objects/player.hpp
   trunk/windstille/src/particles/surface_drawer.hpp
   trunk/windstille/src/scripting/game_objects.hpp
   trunk/windstille/src/sprite2d/data.cpp
   trunk/windstille/src/sprite2d/data.hpp
   trunk/windstille/src/sprite2d/sprite.cpp
   trunk/windstille/src/sprite2dview.cpp
   trunk/windstille/src/sprite3d/data.cpp
   trunk/windstille/src/sprite3d/data.hpp
   trunk/windstille/src/sprite3d/sprite3d.cpp
   trunk/windstille/src/tile/tile_map.hpp
   trunk/windstille/src/tile/tile_packer.cpp
   trunk/windstille/src/util/response_curve.cpp
   trunk/windstille/src/windstille_main.cpp
Log:
Moved math stuff into math/, util stuff into util/

Modified: trunk/windstille/src/SConscript
===================================================================
--- trunk/windstille/src/SConscript	2009-02-11 21:47:00 UTC (rev 2465)
+++ trunk/windstille/src/SConscript	2009-02-11 21:56:29 UTC (rev 2466)
@@ -183,7 +183,7 @@
 'tile/tile_packer.cpp',
 'timer.cpp',
 'title_screen.cpp',
-'util.cpp',
+'util/util.cpp',
 'util/baby_xml.cpp',
 'util/command_line.cpp',
 'util/command_line_generic.cpp',

Modified: trunk/windstille/src/armature/mesh.cpp
===================================================================
--- trunk/windstille/src/armature/mesh.cpp	2009-02-11 21:47:00 UTC (rev 2465)
+++ trunk/windstille/src/armature/mesh.cpp	2009-02-11 21:56:29 UTC (rev 2466)
@@ -19,7 +19,7 @@
 #include <assert.h>
 #include <stdexcept>
 #include <iostream>
-#include "util.hpp"
+#include "util/util.hpp"
 #include "display/opengl_state.hpp"
 #include "display/texture_manager.hpp"
 #include "util/file_reader.hpp"

Modified: trunk/windstille/src/conversation.cpp
===================================================================
--- trunk/windstille/src/conversation.cpp	2009-02-11 21:47:00 UTC (rev 2465)
+++ trunk/windstille/src/conversation.cpp	2009-02-11 21:56:29 UTC (rev 2466)
@@ -16,7 +16,7 @@
 **  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
-#include "math.hpp"
+#include "math/math.hpp"
 #include "input/controller.hpp"
 #include "input/input_manager.hpp"
 #include "font/fonts.hpp"

Modified: trunk/windstille/src/display/display.cpp
===================================================================
--- trunk/windstille/src/display/display.cpp	2009-02-11 21:47:00 UTC (rev 2465)
+++ trunk/windstille/src/display/display.cpp	2009-02-11 21:56:29 UTC (rev 2466)
@@ -25,10 +25,10 @@
 #include <SDL.h>
 #include "console.hpp"
 #include "config.hpp"
-#include "math.hpp"
+#include "math/math.hpp"
 #include "display/opengl_state.hpp"
 #include "display.hpp"
-#include "util.hpp"
+#include "util/util.hpp"
 #include <assert.h>
 
 SDL_Surface* Display::window       = 0;

Modified: trunk/windstille/src/display/framebuffer.cpp
===================================================================
--- trunk/windstille/src/display/framebuffer.cpp	2009-02-11 21:47:00 UTC (rev 2465)
+++ trunk/windstille/src/display/framebuffer.cpp	2009-02-11 21:56:29 UTC (rev 2466)
@@ -19,7 +19,7 @@
 
 #include <GL/glew.h>
 #include <GL/gl.h>
-#include "util.hpp"
+#include "util/util.hpp"
 #include "texture.hpp"
 #include "render_buffer.hpp"
 #include "framebuffer.hpp"

Modified: trunk/windstille/src/display/opengl_state.cpp
===================================================================
--- trunk/windstille/src/display/opengl_state.cpp	2009-02-11 21:47:00 UTC (rev 2465)
+++ trunk/windstille/src/display/opengl_state.cpp	2009-02-11 21:56:29 UTC (rev 2466)
@@ -25,7 +25,7 @@
 #include "color.hpp"
 #include "globals.hpp"
 #include "display/display.hpp"
-#include "util.hpp"
+#include "util/util.hpp"
 
 #define MAX_TEXTURE_UNITS 4
 

Modified: trunk/windstille/src/display/scene_context.cpp
===================================================================
--- trunk/windstille/src/display/scene_context.cpp	2009-02-11 21:47:00 UTC (rev 2465)
+++ trunk/windstille/src/display/scene_context.cpp	2009-02-11 21:56:29 UTC (rev 2466)
@@ -21,7 +21,7 @@
 
 #include <iostream>
 
-#include "util.hpp"
+#include "util/util.hpp"
 #include "display/display.hpp"
 #include "display/surface.hpp"
 #include "display/opengl_state.hpp"

Modified: trunk/windstille/src/display/shader_object.cpp
===================================================================
--- trunk/windstille/src/display/shader_object.cpp	2009-02-11 21:47:00 UTC (rev 2465)
+++ trunk/windstille/src/display/shader_object.cpp	2009-02-11 21:56:29 UTC (rev 2466)
@@ -19,7 +19,7 @@
 #include "shader_object.hpp"
 #include <iostream>
 #include <stdio.h>
-#include "util.hpp"
+#include "util/util.hpp"
 
 /** Read a file, user must free() the returned pointer */
 static GLchar* load_file(const char* filename)

Modified: trunk/windstille/src/display/shader_program.cpp
===================================================================
--- trunk/windstille/src/display/shader_program.cpp	2009-02-11 21:47:00 UTC (rev 2465)
+++ trunk/windstille/src/display/shader_program.cpp	2009-02-11 21:56:29 UTC (rev 2466)
@@ -19,7 +19,7 @@
 #include "shader_program.hpp"
 #include <iostream>
 #include "shader_object.hpp"
-#include "util.hpp"
+#include "util/util.hpp"
 
 class ShaderProgramImpl
 {

Modified: trunk/windstille/src/display/surface_manager.cpp
===================================================================
--- trunk/windstille/src/display/surface_manager.cpp	2009-02-11 21:47:00 UTC (rev 2465)
+++ trunk/windstille/src/display/surface_manager.cpp	2009-02-11 21:56:29 UTC (rev 2466)
@@ -24,7 +24,7 @@
 #include <SDL_image.h>
 #include <GL/glew.h>
 #include <GL/gl.h>
-#include "util.hpp"
+#include "util/util.hpp"
 #include "globals.hpp"
 #include "texture.hpp"
 #include "surface.hpp"

Modified: trunk/windstille/src/display/surface_manager.hpp
===================================================================
--- trunk/windstille/src/display/surface_manager.hpp	2009-02-11 21:47:00 UTC (rev 2465)
+++ trunk/windstille/src/display/surface_manager.hpp	2009-02-11 21:56:29 UTC (rev 2466)
@@ -25,7 +25,7 @@
 #include <SDL.h>
 #include <GL/glew.h>
 #include <GL/gl.h>
-#include "ref.hpp"
+#include "util/ref.hpp"
 #include "texture.hpp"
 
 class Surface;

Modified: trunk/windstille/src/display/texture.cpp
===================================================================
--- trunk/windstille/src/display/texture.cpp	2009-02-11 21:47:00 UTC (rev 2465)
+++ trunk/windstille/src/display/texture.cpp	2009-02-11 21:56:29 UTC (rev 2466)
@@ -24,7 +24,7 @@
 #include "texture.hpp"
 #include "display/opengl_state.hpp"
 #include "texture_manager.hpp"
-#include "util.hpp"
+#include "util/util.hpp"
 
 class TextureImpl
 {

Modified: trunk/windstille/src/display/texture_manager.cpp
===================================================================
--- trunk/windstille/src/display/texture_manager.cpp	2009-02-11 21:47:00 UTC (rev 2465)
+++ trunk/windstille/src/display/texture_manager.cpp	2009-02-11 21:56:29 UTC (rev 2466)
@@ -24,7 +24,7 @@
 #include <SDL_image.h>
 #include <GL/glew.h>
 #include <GL/gl.h>
-#include "util.hpp"
+#include "util/util.hpp"
 #include "globals.hpp"
 #include "texture.hpp"
 #include "physfs/physfs_sdl.hpp"

Modified: trunk/windstille/src/engine/game_object.hpp
===================================================================
--- trunk/windstille/src/engine/game_object.hpp	2009-02-11 21:47:00 UTC (rev 2465)
+++ trunk/windstille/src/engine/game_object.hpp	2009-02-11 21:56:29 UTC (rev 2466)
@@ -22,7 +22,7 @@
 #include <string>
 #include "util/file_reader.hpp"
 #include "display/scene_context.hpp"
-#include "refcounter.hpp"
+#include "util/refcounter.hpp"
 
 class Sector;
 

Deleted: trunk/windstille/src/field.hpp
===================================================================
--- trunk/windstille/src/field.hpp	2009-02-11 21:47:00 UTC (rev 2465)
+++ trunk/windstille/src/field.hpp	2009-02-11 21:56:29 UTC (rev 2466)
@@ -1,125 +0,0 @@
-/*
-**  Windstille - A Sci-Fi Action-Adventure Game
-**  Copyright (C) 2000 Ingo Ruhnke <grumbel at gmx.de>
-**
-**  This program is free software: you can redistribute it and/or modify
-**  it under the terms of the GNU General Public License as published by
-**  the Free Software Foundation, either version 3 of the License, or
-**  (at your option) any later version.
-**  
-**  This program is distributed in the hope that it will be useful,
-**  but WITHOUT ANY WARRANTY; without even the implied warranty of
-**  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
-**  GNU General Public License for more details.
-**  
-**  You should have received a copy of the GNU General Public License
-**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
-*/
-
-#ifndef HEADER_WINDSTILLE_FIELD_HPP
-#define HEADER_WINDSTILLE_FIELD_HPP
-
-#include <vector>
-#include <assert.h>
-
-template<class T>
-class Field
-{
-private:
-  int width;
-  int height;
-  std::vector<T> vec;
-
-public:
-  typedef typename std::vector<T>::iterator iterator;
-
-  Field()
-    : width(0), height(0)
-  {
-  }
-
-  Field (int w, int h) 
-    : width (w), height (h), vec (width * height)
-  {
-  }
-
-  /** Creates a new field out of a subsection from an already excisting one 
-   *  @param arg_field The field thet gets copied
-   *  @param w         width of the new field
-   *  @param h         height of the new field
-   *  @param pos_x     The position of the old field in the new resized one
-   *  @param pos_y     The position of the old field in the new resized one */
-  Field(const Field<T>& arg_field, int w, int h, int pos_x, int pos_y)
-    : width (w), height (h), vec (width * height)
-  {
-    int start_x = std::max(0, -pos_x);
-    int start_y = std::max(0, -pos_y);
-
-    int end_x = std::min(arg_field.get_width(),  get_width()  - pos_x);
-    int end_y = std::min(arg_field.get_height(), get_height() - pos_y);
-
-    for(int y = start_y; y < end_y; ++y)
-      for(int x = start_x; x < end_x; ++x)
-        at(pos_x + x, pos_y + y) = arg_field.at(x, y);
-  }
-
-  const T& operator[] (int i) const {
-    return vec[i];
-  }
-
-  T& operator[] (int i) {
-    return vec[i];
-  }
-
-  T& operator() (int x, int y) 
-  {
-    assert (x >= 0 || x < (int) width || y >= 0 || y < (int) height);
-    return vec [width*y + x];
-  }
-
-  const T& operator() (int x, int y) const
-  {
-    assert (x >= 0 || x < (int) width || y >= 0 || y < (int) height);
-    return vec [width*y + x];
-  }
-  
-  inline const T& at (int x, int y) const {
-    return (*this) (x, y);
-  }
-
-  inline T& at (int x, int y) {
-    return (*this) (x, y);
-  }
-
-  /** Resize a field to a new size
-   *  @param w     New width of the field
-   *  @param h     New height of the field
-   *  @param pos_x The position of the old field in the new resized one
-   *  @param pos_y The position of the old field in the new resized one
-   **/
-  void resize(int w, int h, int pos_x = 0, int pos_y = 0) 
-  {
-    *this = Field<T>(*this, w, h, pos_x, pos_y);
-  }
-
-  void clear()
-  {
-    width  = 0;
-    height = 0;
-    vec.clear();
-  }
-
-  /** Provides raw access to the underlying vector */
-  std::vector<T>& get_vector() { return vec; }
-
-  iterator begin () { return vec.begin (); }
-  iterator end () { return vec.end (); }
-
-  int size() const { return vec.size(); }
-  int get_width () const { return width; }
-  int get_height () const { return height; }
-};
-
-#endif
-
-/* EOF */

Modified: trunk/windstille/src/font/ttf_font.cpp
===================================================================
--- trunk/windstille/src/font/ttf_font.cpp	2009-02-11 21:47:00 UTC (rev 2465)
+++ trunk/windstille/src/font/ttf_font.cpp	2009-02-11 21:56:29 UTC (rev 2466)
@@ -31,7 +31,7 @@
 #include "blitter.hpp"
 #include "ttf_font.hpp"
 #include "font_effect.hpp"
-#include "util.hpp"
+#include "util/util.hpp"
 
 TTFCharacter::TTFCharacter(const Rect& pos_,
                            const Rectf& uv_, 

Modified: trunk/windstille/src/gui/grid_component.hpp
===================================================================
--- trunk/windstille/src/gui/grid_component.hpp	2009-02-11 21:47:00 UTC (rev 2465)
+++ trunk/windstille/src/gui/grid_component.hpp	2009-02-11 21:56:29 UTC (rev 2466)
@@ -19,7 +19,7 @@
 #ifndef HEADER_WINDSTILLE_GUI_GRID_COMPONENT_HPP
 #define HEADER_WINDSTILLE_GUI_GRID_COMPONENT_HPP
 
-#include "field.hpp"
+#include "util/field.hpp"
 #include "component.hpp"
 
 namespace gui {

Modified: trunk/windstille/src/gui/menu_component.cpp
===================================================================
--- trunk/windstille/src/gui/menu_component.cpp	2009-02-11 21:47:00 UTC (rev 2465)
+++ trunk/windstille/src/gui/menu_component.cpp	2009-02-11 21:56:29 UTC (rev 2466)
@@ -23,7 +23,7 @@
 #include "gui/tab_component.hpp"
 #include "display/display.hpp"
 #include "menu_item.hpp"
-#include "math.hpp"
+#include "math/math.hpp"
 
 namespace gui {
 

Deleted: trunk/windstille/src/handle.hpp
===================================================================
--- trunk/windstille/src/handle.hpp	2009-02-11 21:47:00 UTC (rev 2465)
+++ trunk/windstille/src/handle.hpp	2009-02-11 21:56:29 UTC (rev 2466)
@@ -1,134 +0,0 @@
-/*
-**  Windstille - A Sci-Fi Action-Adventure Game
-**  Copyright (C) 2007 Ingo Ruhnke <grumbel at gmx.de>
-**
-**  This program is free software: you can redistribute it and/or modify
-**  it under the terms of the GNU General Public License as published by
-**  the Free Software Foundation, either version 3 of the License, or
-**  (at your option) any later version.
-**  
-**  This program is distributed in the hope that it will be useful,
-**  but WITHOUT ANY WARRANTY; without even the implied warranty of
-**  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
-**  GNU General Public License for more details.
-**  
-**  You should have received a copy of the GNU General Public License
-**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
-*/
-
-#ifndef HEADER_WINDSTILLE_HANDLE_HPP
-#define HEADER_WINDSTILLE_HANDLE_HPP
-
-#include <vector>
-
-template<typename Data> class HandleManager;
-
-template<typename Data>
-class Handle
-{
-private:
-  HandleManager<Data>* manager;
-
-  unsigned int index;
-  unsigned int magic;
-
-public:
-  Handle(HandleManager<Data>* manager_, 
-             unsigned int index_,
-             unsigned int magic_)
-    : manager(manager_),
-      index(index_),
-      magic(magic_)
-  {
-  }
-
-  bool is_null() {
-    return manager->dereference(index, magic) != 0;
-  }
-
-  Data* operator->() {
-    return manager->dereference(index, magic);
-  }
-
-  Data& operator*() {
-    return manager->dereference(index, magic);
-  }
-};
-
-template<typename Data>
-class HandleManager
-{
-private:
-  std::vector<Data>        data_lst;
-  std::vector<unsigned int> magic_lst;
-
-  /** List of indexes in \a data_lst and \a magic_lst that aren't
-      used */
-  std::vector<unsigned int>  free_list;
-  
-  unsigned int next_magic;
-
-public:
-  HandleManager() 
-    : next_magic(0)
-  {
-  }
-  
-  Handle<Data> aquire(const Data& data)
-  {
-    if (free_list.empty()) 
-      {
-        data_lst.push_back(data);
-        magic_lst.push_back(next_magic);
-
-        return Handle<Data>(this, next_magic++);
-      }
-    else
-      {
-        unsigned int index = free_list.back();
-        free_list.pop_back();
-
-        data_lst[index]  = data;
-        magic_lst[index] = next_magic;
-
-        return Handle<Data>(this, next_magic++);
-      }
-  }
-
-  void release(const Handle<Data>& handle)
-  {
-    if (valid(handle))
-      {
-        delete data_lst[handle.index];
-        data_lst[handle.index] = 0;
-
-        free_list.push_back(handle.index);
-      }
-    else
-      {
-        // invalid handle
-      }
-  }
-  
-  bool valid(const Handle<Data>& handle)
-  {
-    return (handle.index < data_lst.size() &&
-            magic_lst[handle.index] == handle.magic);
-  }
-
-  Data& dereference(const Handle<Data>& handle)
-  {
-    if (valid)
-      {
-        return data_lst[handle.index];
-      }
-    else
-      {
-        // invalid handle
-      }
-  }
-};
-
-#endif
-
-/* EOF */

Modified: trunk/windstille/src/input/input_manager_sdl.cpp
===================================================================
--- trunk/windstille/src/input/input_manager_sdl.cpp	2009-02-11 21:47:00 UTC (rev 2465)
+++ trunk/windstille/src/input/input_manager_sdl.cpp	2009-02-11 21:56:29 UTC (rev 2466)
@@ -24,7 +24,7 @@
 #include <stdexcept>
 #include <stdio.h>
 #include <vector>
-#include "math.hpp"
+#include "math/math.hpp"
 #include "config.hpp"
 #include "util/file_reader.hpp"
 #include "controller_def.hpp"

Modified: trunk/windstille/src/input/wiimote.cpp
===================================================================
--- trunk/windstille/src/input/wiimote.cpp	2009-02-11 21:47:00 UTC (rev 2465)
+++ trunk/windstille/src/input/wiimote.cpp	2009-02-11 21:56:29 UTC (rev 2466)
@@ -19,7 +19,7 @@
 #include <iostream>
 #include <assert.h>
 #include <pthread.h>
-#include "math.hpp"
+#include "math/math.hpp"
 #include "wiimote.hpp"
 
 Wiimote* wiimote = 0;

Copied: trunk/windstille/src/math/math.hpp (from rev 2463, trunk/windstille/src/math.hpp)


Property changes on: trunk/windstille/src/math/math.hpp
___________________________________________________________________
Name: svn:keywords
   + Id
Name: svn:mergeinfo
   + 
Name: svn:eol-style
   + native

Deleted: trunk/windstille/src/math.hpp
===================================================================
--- trunk/windstille/src/math.hpp	2009-02-11 21:47:00 UTC (rev 2465)
+++ trunk/windstille/src/math.hpp	2009-02-11 21:56:29 UTC (rev 2466)
@@ -1,81 +0,0 @@
-/*
-**  Windstille - A Sci-Fi Action-Adventure Game
-**  Copyright (C) 2000,2005 Ingo Ruhnke <grumbel at gmx.de>
-**
-**  This program is free software: you can redistribute it and/or modify
-**  it under the terms of the GNU General Public License as published by
-**  the Free Software Foundation, either version 3 of the License, or
-**  (at your option) any later version.
-**  
-**  This program is distributed in the hope that it will be useful,
-**  but WITHOUT ANY WARRANTY; without even the implied warranty of
-**  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
-**  GNU General Public License for more details.
-**  
-**  You should have received a copy of the GNU General Public License
-**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
-*/
-
-#ifndef HEADER_WINDSTILLE_MATH_HPP
-#define HEADER_WINDSTILLE_MATH_HPP
-
-#include <assert.h>
-#include <math.h>
-
-namespace math {
-
-template<class T> 
-T min (const T& a, const T& b) 
-{
-  if (a < b)
-    return a;
-  else
-    return b;
-}
-
-template<class T> 
-T max (const T& a, const T& b) 
-{
-  if (a > b)
-    return a;
-  else
-    return b;
-}
-
-template<class T> 
-T mid (const T& a, const T& b, const T& c) 
-{
-  return max<T>((a), min<T>((b), (c)));
-}
-
-inline float normalize_angle(float radians)
-{
-  radians = fmod (radians, static_cast<float>(2.0 * M_PI));
-  if (radians < 0.0)
-    radians += 2.0 * M_PI;
-  // Floating point math is so loathsome.  In sp98test, the assertion
-  // was barfing at P = 180 because a very small negative number plus
-  // 2 PI was equalling 2 PI.  Gakk!
-  if (radians == 2.0 * M_PI)
-    radians = 0.0;
-  
-  // FIXME: This gets triggered from time to time!
-  //  assert (radians >= 0.0 && radians < 2.0 * M_PI);
-  return radians;
-}
-
-inline float deg2rad(float degree)
-{
-  return degree / 180.0f * M_PI;
-}
-
-inline float rad2deg(float radians)
-{
-  return radians / M_PI * 180.0f;
-}
-
-} // namespace math
-
-#endif
-
-/* EOF */

Modified: trunk/windstille/src/navigation/navigation_graph.hpp
===================================================================
--- trunk/windstille/src/navigation/navigation_graph.hpp	2009-02-11 21:47:00 UTC (rev 2465)
+++ trunk/windstille/src/navigation/navigation_graph.hpp	2009-02-11 21:56:29 UTC (rev 2466)
@@ -21,7 +21,6 @@
 
 #include <iosfwd>
 #include <vector>
-#include "handle.hpp"
 #include "math/line.hpp"
 
 class Node;

Modified: trunk/windstille/src/objects/character.cpp
===================================================================
--- trunk/windstille/src/objects/character.cpp	2009-02-11 21:47:00 UTC (rev 2465)
+++ trunk/windstille/src/objects/character.cpp	2009-02-11 21:56:29 UTC (rev 2466)
@@ -25,7 +25,7 @@
 #include "physfs/physfs_stream.hpp"
 #include "console.hpp"
 #include "sprite3d/manager.hpp"
-#include "util.hpp"
+#include "util/util.hpp"
 
 #include <exception>
 

Modified: trunk/windstille/src/objects/player.hpp
===================================================================
--- trunk/windstille/src/objects/player.hpp	2009-02-11 21:47:00 UTC (rev 2465)
+++ trunk/windstille/src/objects/player.hpp	2009-02-11 21:56:29 UTC (rev 2466)
@@ -27,7 +27,7 @@
 #include "math/vector.hpp"
 #include "globals.hpp"
 #include "engine/entity.hpp"
-#include "ref.hpp"
+#include "util/ref.hpp"
 #include "display/surface.hpp"
 
 class Controller;

Modified: trunk/windstille/src/particles/surface_drawer.hpp
===================================================================
--- trunk/windstille/src/particles/surface_drawer.hpp	2009-02-11 21:47:00 UTC (rev 2465)
+++ trunk/windstille/src/particles/surface_drawer.hpp	2009-02-11 21:56:29 UTC (rev 2466)
@@ -20,7 +20,7 @@
 #define HEADER_WINDSTILLE_PARTICLES_SURFACE_DRAWER_HPP
 
 #include "display/surface.hpp"
-#include "ref.hpp"
+#include "util/ref.hpp"
 #include "drawer.hpp"
 
 class SurfaceDrawer : public Drawer

Deleted: trunk/windstille/src/ref.hpp
===================================================================
--- trunk/windstille/src/ref.hpp	2009-02-11 21:47:00 UTC (rev 2465)
+++ trunk/windstille/src/ref.hpp	2009-02-11 21:56:29 UTC (rev 2466)
@@ -1,88 +0,0 @@
-/*
-**  Windstille - A Sci-Fi Action-Adventure Game
-**  Copyright (C) 2005 Matthias Braun <matze at braunis.de>
-**
-**  This program is free software: you can redistribute it and/or modify
-**  it under the terms of the GNU General Public License as published by
-**  the Free Software Foundation, either version 3 of the License, or
-**  (at your option) any later version.
-**  
-**  This program is distributed in the hope that it will be useful,
-**  but WITHOUT ANY WARRANTY; without even the implied warranty of
-**  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
-**  GNU General Public License for more details.
-**  
-**  You should have received a copy of the GNU General Public License
-**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
-*/
-
-#ifndef HEADER_WINDSTILLE_REF_HPP
-#define HEADER_WINDSTILLE_REF_HPP
-
-/** This class behaves like a pointer to a refcounted object, but increments the
- * reference count when new objects are assigned and decrements the refcounter
- * when it's lifetime has experied. (similar to std::auto_ptr)
- */
-template<typename T>
-class Ref
-{
-public:
-  Ref(T* object = 0)
-    : object(object)
-  {
-    if(object)
-      object->ref();
-  }
-  Ref(const Ref<T>& other)
-    : object(other.object)
-  {
-    if(object)
-      object->ref();
-  }
-  ~Ref()
-  {
-    if(object)
-      object->unref();
-  }
-
-  void operator= (const Ref<T>& other)
-  {
-    *this = other.get();
-  }
-
-  void operator= (T* object)
-  {
-    if(object)
-      object->ref();
-    if(this->object)
-      this->object->unref();
-    this->object = object;
-  }
-
-  T* operator ->() const
-  {
-    return object;
-  }
-
-  T& operator* () const
-  {
-    return *object;
-  }
-
-  operator const T* () const
-  {
-    return object;
-  }
-
-  T* get() const
-  {
-    return object;
-  }
-
-private:
-  T* object;
-};
-
-#endif
-
-/* EOF */

Deleted: trunk/windstille/src/refcounter.hpp
===================================================================
--- trunk/windstille/src/refcounter.hpp	2009-02-11 21:47:00 UTC (rev 2465)
+++ trunk/windstille/src/refcounter.hpp	2009-02-11 21:56:29 UTC (rev 2466)
@@ -1,63 +0,0 @@
-/*
-**  Windstille - A Sci-Fi Action-Adventure Game
-**  Copyright (C) 2005 Matthias Braun <matze at braunis.de>
-**
-**  This program is free software: you can redistribute it and/or modify
-**  it under the terms of the GNU General Public License as published by
-**  the Free Software Foundation, either version 3 of the License, or
-**  (at your option) any later version.
-**  
-**  This program is distributed in the hope that it will be useful,
-**  but WITHOUT ANY WARRANTY; without even the implied warranty of
-**  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
-**  GNU General Public License for more details.
-**  
-**  You should have received a copy of the GNU General Public License
-**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
-*/
-
-#ifndef HEADER_WINDSTILLE_REFCOUNTER_HPP
-#define HEADER_WINDSTILLE_REFCOUNTER_HPP
-
-#include <assert.h>
-
-/**
- * A base class that provides reference counting facilities
- */
-class RefCounter
-{
-public:
-  RefCounter()
-    : refcount(0)
-  { }
-
-  /** increases reference count */
-  void ref()
-  {
-    refcount++;
-  }
-  /** decreases reference count. Destroys the object if the reference count
-   * reaches 0
-   */
-  void unref()
-  {
-    refcount--;
-    if(refcount <= 0) {
-      delete this;
-      return;
-    }
-  }
-
-protected:
-  virtual ~RefCounter()
-  {
-    assert(refcount == 0);
-  }
-
-private:
-  int refcount;
-};
-
-#endif
-
-/* EOF */

Modified: trunk/windstille/src/scripting/game_objects.hpp
===================================================================
--- trunk/windstille/src/scripting/game_objects.hpp	2009-02-11 21:47:00 UTC (rev 2465)
+++ trunk/windstille/src/scripting/game_objects.hpp	2009-02-11 21:56:29 UTC (rev 2466)
@@ -24,7 +24,7 @@
 #include "objects/test_object.hpp"
 #include "objects/player.hpp"
 #include "objects/scriptable_object.hpp"
-#include "ref.hpp"
+#include "util/ref.hpp"
 
 typedef GameObject _GameObject;
 typedef TestObject _TestObject;

Modified: trunk/windstille/src/sprite2d/data.cpp
===================================================================
--- trunk/windstille/src/sprite2d/data.cpp	2009-02-11 21:47:00 UTC (rev 2465)
+++ trunk/windstille/src/sprite2d/data.cpp	2009-02-11 21:56:29 UTC (rev 2466)
@@ -26,7 +26,7 @@
 #include <memory>
 #include <sstream>
 #include <stdexcept>
-#include "util.hpp"
+#include "util/util.hpp"
 #include "display/surface.hpp"
 #include "display/surface_manager.hpp"
 

Modified: trunk/windstille/src/sprite2d/data.hpp
===================================================================
--- trunk/windstille/src/sprite2d/data.hpp	2009-02-11 21:47:00 UTC (rev 2465)
+++ trunk/windstille/src/sprite2d/data.hpp	2009-02-11 21:56:29 UTC (rev 2466)
@@ -24,11 +24,11 @@
 #include <vector>
 #include <GL/glew.h>
 #include <GL/gl.h>
-#include "util.hpp"
+#include "util/util.hpp"
 #include "util/file_reader.hpp"
 #include "math/vector.hpp"
 #include "display/surface.hpp"
-#include "ref.hpp"
+#include "util/ref.hpp"
 
 struct SpriteAction
 {

Modified: trunk/windstille/src/sprite2d/sprite.cpp
===================================================================
--- trunk/windstille/src/sprite2d/sprite.cpp	2009-02-11 21:47:00 UTC (rev 2465)
+++ trunk/windstille/src/sprite2d/sprite.cpp	2009-02-11 21:56:29 UTC (rev 2466)
@@ -27,7 +27,7 @@
 #include "sprite2d/manager.hpp"
 #include "display/surface_drawing_parameters.hpp"
 #include "display/color.hpp"
-#include "util.hpp"
+#include "util/util.hpp"
 
 Sprite::Sprite()
 {  

Modified: trunk/windstille/src/sprite2dview.cpp
===================================================================
--- trunk/windstille/src/sprite2dview.cpp	2009-02-11 21:47:00 UTC (rev 2465)
+++ trunk/windstille/src/sprite2dview.cpp	2009-02-11 21:56:29 UTC (rev 2466)
@@ -22,7 +22,7 @@
 
 #include "display/display.hpp"
 #include "sprite2d/manager.hpp"
-#include "math.hpp"
+#include "math/math.hpp"
 #include "console.hpp"
 #include "input/controller.hpp"
 #include "display/surface_manager.hpp"

Modified: trunk/windstille/src/sprite3d/data.cpp
===================================================================
--- trunk/windstille/src/sprite3d/data.cpp	2009-02-11 21:47:00 UTC (rev 2465)
+++ trunk/windstille/src/sprite3d/data.cpp	2009-02-11 21:56:29 UTC (rev 2466)
@@ -23,7 +23,7 @@
 #include <string.h>
 #include <sstream>
 #include <stdexcept>
-#include "util.hpp"
+#include "util/util.hpp"
 #include "globals.hpp"
 #include "display/texture_manager.hpp"
 #include "display/texture.hpp"

Modified: trunk/windstille/src/sprite3d/data.hpp
===================================================================
--- trunk/windstille/src/sprite3d/data.hpp	2009-02-11 21:47:00 UTC (rev 2465)
+++ trunk/windstille/src/sprite3d/data.hpp	2009-02-11 21:56:29 UTC (rev 2466)
@@ -24,7 +24,7 @@
 #include <GL/glew.h>
 #include <GL/gl.h>
 #include <vector>
-#include "ref.hpp"
+#include "util/ref.hpp"
 #include "display/texture.hpp"
 #include "math/vector3.hpp"
 #include "math/quaternion.hpp"

Modified: trunk/windstille/src/sprite3d/sprite3d.cpp
===================================================================
--- trunk/windstille/src/sprite3d/sprite3d.cpp	2009-02-11 21:47:00 UTC (rev 2465)
+++ trunk/windstille/src/sprite3d/sprite3d.cpp	2009-02-11 21:56:29 UTC (rev 2466)
@@ -29,7 +29,7 @@
 #include "display/drawing_request.hpp"
 #include "display/scene_context.hpp"
 #include "globals.hpp"
-#include "util.hpp"
+#include "util/util.hpp"
 #include "timer.hpp"
 #include "display/opengl_state.hpp"
 #include "sprite3d/manager.hpp"

Modified: trunk/windstille/src/tile/tile_map.hpp
===================================================================
--- trunk/windstille/src/tile/tile_map.hpp	2009-02-11 21:47:00 UTC (rev 2465)
+++ trunk/windstille/src/tile/tile_map.hpp	2009-02-11 21:56:29 UTC (rev 2466)
@@ -22,7 +22,7 @@
 #include <string>
 
 #include "globals.hpp"
-#include "field.hpp"
+#include "util/field.hpp"
 #include "engine/game_object.hpp"
 #include "display/scene_context.hpp"
 

Modified: trunk/windstille/src/tile/tile_packer.cpp
===================================================================
--- trunk/windstille/src/tile/tile_packer.cpp	2009-02-11 21:47:00 UTC (rev 2465)
+++ trunk/windstille/src/tile/tile_packer.cpp	2009-02-11 21:56:29 UTC (rev 2466)
@@ -22,7 +22,7 @@
 #include "display/texture.hpp"
 #include "globals.hpp"
 #include "tile_packer.hpp"
-#include "util.hpp"
+#include "util/util.hpp"
 #include "blitter.hpp"
 
 class TilePackerImpl

Copied: trunk/windstille/src/util/field.hpp (from rev 2463, trunk/windstille/src/field.hpp)


Property changes on: trunk/windstille/src/util/field.hpp
___________________________________________________________________
Name: svn:keywords
   + Id
Name: svn:mergeinfo
   + 
Name: svn:eol-style
   + native

Copied: trunk/windstille/src/util/handle.hpp (from rev 2463, trunk/windstille/src/handle.hpp)


Property changes on: trunk/windstille/src/util/handle.hpp
___________________________________________________________________
Name: svn:keywords
   + Id
Name: svn:mergeinfo
   + 
Name: svn:eol-style
   + native

Copied: trunk/windstille/src/util/ref.hpp (from rev 2463, trunk/windstille/src/ref.hpp)


Property changes on: trunk/windstille/src/util/ref.hpp
___________________________________________________________________
Name: svn:keywords
   + Id
Name: svn:mergeinfo
   + 
Name: svn:eol-style
   + native

Copied: trunk/windstille/src/util/refcounter.hpp (from rev 2463, trunk/windstille/src/refcounter.hpp)


Property changes on: trunk/windstille/src/util/refcounter.hpp
___________________________________________________________________
Name: svn:keywords
   + Id
Name: svn:mergeinfo
   + 
Name: svn:eol-style
   + native

Modified: trunk/windstille/src/util/response_curve.cpp
===================================================================
--- trunk/windstille/src/util/response_curve.cpp	2009-02-11 21:47:00 UTC (rev 2465)
+++ trunk/windstille/src/util/response_curve.cpp	2009-02-11 21:56:29 UTC (rev 2466)
@@ -18,7 +18,7 @@
 
 #include <assert.h>
 #include <iostream>
-#include "math.hpp"
+#include "math/math.hpp"
 #include "response_curve.hpp"
 
 ResponseCurve::ResponseCurve(float i_min_, float i_max_, const std::vector<float>& samples_)

Copied: trunk/windstille/src/util/util.cpp (from rev 2463, trunk/windstille/src/util.cpp)


Property changes on: trunk/windstille/src/util/util.cpp
___________________________________________________________________
Name: svn:keywords
   + Id
Name: svn:mergeinfo
   + 
Name: svn:eol-style
   + native

Copied: trunk/windstille/src/util/util.hpp (from rev 2463, trunk/windstille/src/util.hpp)


Property changes on: trunk/windstille/src/util/util.hpp
___________________________________________________________________
Name: svn:keywords
   + Id
Name: svn:mergeinfo
   + 
Name: svn:eol-style
   + native

Deleted: trunk/windstille/src/util.cpp
===================================================================
--- trunk/windstille/src/util.cpp	2009-02-11 21:47:00 UTC (rev 2465)
+++ trunk/windstille/src/util.cpp	2009-02-11 21:56:29 UTC (rev 2466)
@@ -1,68 +0,0 @@
-/*
-**  Windstille - A Sci-Fi Action-Adventure Game
-**  Copyright (C) 2005 Matthias Braun <matze at braunis.de>
-**
-**  This program is free software: you can redistribute it and/or modify
-**  it under the terms of the GNU General Public License as published by
-**  the Free Software Foundation, either version 3 of the License, or
-**  (at your option) any later version.
-**  
-**  This program is distributed in the hope that it will be useful,
-**  but WITHOUT ANY WARRANTY; without even the implied warranty of
-**  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
-**  GNU General Public License for more details.
-**  
-**  You should have received a copy of the GNU General Public License
-**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
-*/
-
-#include "util.hpp"
-#include <fstream>
-
-std::string dirname(const std::string& filename)
-{
-  std::string::size_type p = filename.find_last_of('/');
-  if(p == std::string::npos)
-    return "";
-
-  return filename.substr(0, p+1);        
-}
-
-std::string basename(const std::string& filename)
-{
-  std::string::size_type p = filename.find_last_of('/');
-  if(p == std::string::npos)
-    return filename;
-
-  return filename.substr(p+1, filename.size()-p);
-}
-
-void file_to_string(const std::string& filename, std::string& str)
-{
-  std::ifstream in(filename.c_str());
-  while (true)
-    {
-      char c = in.get();
-      if (!in.good())
-        break;
-      str += c;
-    }
-}
-
-bool has_suffix(const std::string& str, const std::string& suffix)
-{
-  if (str.length() >= suffix.length())
-    return str.compare(str.length() - suffix.length(), suffix.length(), suffix) == 0;
-  else
-    return false;
-}
-
-std::string tolowercase(const std::string& str)
-{
-  std::string out;
-  for(std::string::const_iterator i = str.begin();  i != str.end(); ++i)
-    out += tolower(*i);
-  return out;
-}
-
-/* EOF */

Deleted: trunk/windstille/src/util.hpp
===================================================================
--- trunk/windstille/src/util.hpp	2009-02-11 21:47:00 UTC (rev 2465)
+++ trunk/windstille/src/util.hpp	2009-02-11 21:56:29 UTC (rev 2466)
@@ -1,62 +0,0 @@
-/*
-**  Windstille - A Sci-Fi Action-Adventure Game
-**  Copyright (C) 2005 Matthias Braun <matze at braunis.de>
-**
-**  This program is free software: you can redistribute it and/or modify
-**  it under the terms of the GNU General Public License as published by
-**  the Free Software Foundation, either version 3 of the License, or
-**  (at your option) any later version.
-**  
-**  This program is distributed in the hope that it will be useful,
-**  but WITHOUT ANY WARRANTY; without even the implied warranty of
-**  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
-**  GNU General Public License for more details.
-**  
-**  You should have received a copy of the GNU General Public License
-**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
-*/
-
-#ifndef HEADER_WINDSTILLE_UTIL_HPP
-#define HEADER_WINDSTILLE_UTIL_HPP
-
-#include <string>
-#include <stdexcept>
-#include <sstream>
-#include <GL/glew.h>
-#include <GL/gl.h>
-#include <GL/glu.h>
-
-std::string dirname(const std::string& filename);
-std::string basename(const std::string& filename);
-
-/** Loads a file from \a filename and places its content in \a str
-    FIXME: doesn't use PhysFS */
-void file_to_string(const std::string& filename, std::string& str);
-
-bool has_suffix(const std::string& str, const std::string& suffix);
-std::string tolowercase(const std::string& str);
-
-template<class T>
-std::string to_string(const T& data)
-{
-  std::ostringstream os;
-  os << data;
-  return os.str();
-}
-
-static inline void assert_gl(const char* message)
-{
-#ifdef DEBUG
-  GLenum error = glGetError();
-  if(error != GL_NO_ERROR) {
-    std::ostringstream msg;
-    msg << "OpenGLError while '" << message << "': "
-        << gluErrorString(error);
-    throw std::runtime_error(msg.str());
-  }
-#endif
-}
-
-#endif
-
-/* EOF */

Modified: trunk/windstille/src/windstille_main.cpp
===================================================================
--- trunk/windstille/src/windstille_main.cpp	2009-02-11 21:47:00 UTC (rev 2465)
+++ trunk/windstille/src/windstille_main.cpp	2009-02-11 21:56:29 UTC (rev 2466)
@@ -33,7 +33,7 @@
 #include "tile/tile_factory.hpp"
 #include "engine/script_manager.hpp"
 #include "config.hpp"
-#include "util.hpp"
+#include "util/util.hpp"
 #include "font/ttf_font.hpp"
 #include "display/display.hpp"
 #include "display/surface_manager.hpp"



From grumbel at mail.berlios.de  Wed Feb 11 23:04:00 2009
From: grumbel at mail.berlios.de (grumbel at BerliOS)
Date: Wed, 11 Feb 2009 23:04:00 +0100
Subject: [Windstille-commit] r2467 - trunk/windstille/data/scripts
Message-ID: <200902112204.n1BM40r7001543@sheep.berlios.de>

Author: grumbel
Date: 2009-02-11 23:04:00 +0100 (Wed, 11 Feb 2009)
New Revision: 2467

Modified:
   trunk/windstille/data/scripts/windstille.nut
Log:
GPLv2 -> GPLv3

Modified: trunk/windstille/data/scripts/windstille.nut
===================================================================
--- trunk/windstille/data/scripts/windstille.nut	2009-02-11 21:56:29 UTC (rev 2466)
+++ trunk/windstille/data/scripts/windstille.nut	2009-02-11 22:04:00 UTC (rev 2467)
@@ -1,26 +1,19 @@
-/* -*- c++ -*-
-**   __      __ __             ___        __   __ __   __
-**  /  \    /  \__| ____    __| _/_______/  |_|__|  | |  |   ____
-**  \   \/\/   /  |/    \  / __ |/  ___/\   __\  |  | |  | _/ __ \
-**   \        /|  |   |  \/ /_/ |\___ \  |  | |  |  |_|  |_\  ___/
-**    \__/\  / |__|___|  /\____ /____  > |__| |__|____/____/\___  >
-**         \/          \/      \/    \/                         \/
+/*  -*- c++ -*-
+**  Windstille - A Sci-Fi Action-Adventure Game
 **  Copyright (C) 2000,2005 Ingo Ruhnke <grumbel at gmx.de>
 **
-**  This program is free software; you can redistribute it and/or
-**  modify it under the terms of the GNU General Public License
-**  as published by the Free Software Foundation; either version 2
-**  of the License, or (at your option) any later version.
-**
+**  This program is free software: you can redistribute it and/or modify
+**  it under the terms of the GNU General Public License as published by
+**  the Free Software Foundation, either version 3 of the License, or
+**  (at your option) any later version.
+**  
 **  This program is distributed in the hope that it will be useful,
 **  but WITHOUT ANY WARRANTY; without even the implied warranty of
 **  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 **  GNU General Public License for more details.
-** 
+**  
 **  You should have received a copy of the GNU General Public License
-**  along with this program; if not, write to the Free Software
-**  Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA
-**  02111-1307, USA.
+**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
 /**



From grumbel at mail.berlios.de  Thu Feb 12 09:17:23 2009
From: grumbel at mail.berlios.de (grumbel at BerliOS)
Date: Thu, 12 Feb 2009 09:17:23 +0100
Subject: [Windstille-commit] r2468 - in trunk/windstille/src: . display font
	gui hud input objects screen scripting tile
Message-ID: <200902120817.n1C8HNFu005980@sheep.berlios.de>

Author: grumbel
Date: 2009-02-12 09:17:19 +0100 (Thu, 12 Feb 2009)
New Revision: 2468

Added:
   trunk/windstille/src/display/blitter.cpp
   trunk/windstille/src/display/blitter.hpp
   trunk/windstille/src/display/graphic_context_state.cpp
   trunk/windstille/src/display/graphic_context_state.hpp
   trunk/windstille/src/display/text_area.cpp
   trunk/windstille/src/display/text_area.hpp
   trunk/windstille/src/hud/
   trunk/windstille/src/hud/controller_help_window.cpp
   trunk/windstille/src/hud/controller_help_window.hpp
   trunk/windstille/src/hud/conversation.cpp
   trunk/windstille/src/hud/conversation.hpp
   trunk/windstille/src/hud/dialog_manager.cpp
   trunk/windstille/src/hud/dialog_manager.hpp
   trunk/windstille/src/hud/energy_bar.cpp
   trunk/windstille/src/hud/energy_bar.hpp
   trunk/windstille/src/hud/inventory.cpp
   trunk/windstille/src/hud/inventory.hpp
   trunk/windstille/src/hud/pda.cpp
   trunk/windstille/src/hud/pda.hpp
   trunk/windstille/src/screen/
   trunk/windstille/src/screen/armature_test.cpp
   trunk/windstille/src/screen/armature_test.hpp
   trunk/windstille/src/screen/game_session.cpp
   trunk/windstille/src/screen/game_session.hpp
   trunk/windstille/src/screen/geometry_test.cpp
   trunk/windstille/src/screen/geometry_test.hpp
   trunk/windstille/src/screen/navigation_test.cpp
   trunk/windstille/src/screen/navigation_test.hpp
   trunk/windstille/src/screen/particle_viewer.cpp
   trunk/windstille/src/screen/particle_viewer.hpp
   trunk/windstille/src/screen/screen.cpp
   trunk/windstille/src/screen/screen.hpp
   trunk/windstille/src/screen/screen_manager.cpp
   trunk/windstille/src/screen/screen_manager.hpp
   trunk/windstille/src/screen/sprite2dview.cpp
   trunk/windstille/src/screen/sprite2dview.hpp
   trunk/windstille/src/screen/sprite3dview.cpp
   trunk/windstille/src/screen/sprite3dview.hpp
   trunk/windstille/src/screen/title_screen.cpp
   trunk/windstille/src/screen/title_screen.hpp
Removed:
   trunk/windstille/src/armature_test.cpp
   trunk/windstille/src/armature_test.hpp
   trunk/windstille/src/blitter.cpp
   trunk/windstille/src/blitter.hpp
   trunk/windstille/src/controller_help_window.cpp
   trunk/windstille/src/controller_help_window.hpp
   trunk/windstille/src/conversation.cpp
   trunk/windstille/src/conversation.hpp
   trunk/windstille/src/dialog_manager.cpp
   trunk/windstille/src/dialog_manager.hpp
   trunk/windstille/src/energy_bar.cpp
   trunk/windstille/src/energy_bar.hpp
   trunk/windstille/src/game_session.cpp
   trunk/windstille/src/game_session.hpp
   trunk/windstille/src/geometry_test.cpp
   trunk/windstille/src/geometry_test.hpp
   trunk/windstille/src/graphic_context_state.cpp
   trunk/windstille/src/graphic_context_state.hpp
   trunk/windstille/src/inventory.cpp
   trunk/windstille/src/inventory.hpp
   trunk/windstille/src/navigation_test.cpp
   trunk/windstille/src/navigation_test.hpp
   trunk/windstille/src/particle_viewer.cpp
   trunk/windstille/src/particle_viewer.hpp
   trunk/windstille/src/pda.cpp
   trunk/windstille/src/pda.hpp
   trunk/windstille/src/screen.cpp
   trunk/windstille/src/screen.hpp
   trunk/windstille/src/screen_manager.cpp
   trunk/windstille/src/screen_manager.hpp
   trunk/windstille/src/sprite2dview.cpp
   trunk/windstille/src/sprite2dview.hpp
   trunk/windstille/src/sprite3dview.cpp
   trunk/windstille/src/sprite3dview.hpp
   trunk/windstille/src/text_area.cpp
   trunk/windstille/src/text_area.hpp
   trunk/windstille/src/title_screen.cpp
   trunk/windstille/src/title_screen.hpp
Modified:
   trunk/windstille/src/SConscript
   trunk/windstille/src/console.cpp
   trunk/windstille/src/font/ttf_font.cpp
   trunk/windstille/src/gui/gui_manager.cpp
   trunk/windstille/src/gui/gui_manager.hpp
   trunk/windstille/src/gui/text_view.hpp
   trunk/windstille/src/input/input_configurator.cpp
   trunk/windstille/src/input/input_configurator.hpp
   trunk/windstille/src/menu_manager.cpp
   trunk/windstille/src/objects/character.cpp
   trunk/windstille/src/objects/player.cpp
   trunk/windstille/src/objects/swarm.cpp
   trunk/windstille/src/scripting/interface.cpp
   trunk/windstille/src/tile/tile_packer.cpp
   trunk/windstille/src/view.hpp
   trunk/windstille/src/windstille_main.cpp
   trunk/windstille/src/windstille_main.hpp
Log:
Reorganised some files into screen/ and hud/

Modified: trunk/windstille/src/SConscript
===================================================================
--- trunk/windstille/src/SConscript	2009-02-11 22:04:00 UTC (rev 2467)
+++ trunk/windstille/src/SConscript	2009-02-12 08:17:19 UTC (rev 2468)
@@ -45,8 +45,6 @@
 'armature/mesh.cpp',
 'armature/model.cpp',
 'armature/pose.cpp',
-'armature_test.cpp',
-'blitter.cpp',
 'collision/collision_data.cpp',
 'collision/collision_engine.cpp',
 'collision/collision_object.cpp',
@@ -56,12 +54,11 @@
 'config.cpp',
 'console.cpp',
 'controller_def.cpp',
-'controller_help_window.cpp',
-'conversation.cpp',
-'dialog_manager.cpp',
+'display/blitter.cpp',
 'display/display.cpp',
 'display/drawing_context.cpp',
 'display/framebuffer.cpp',
+'display/graphic_context_state.cpp',
 'display/opengl_state.cpp',
 'display/render_buffer.cpp',
 'display/scene_context.cpp',
@@ -69,10 +66,10 @@
 'display/shader_program.cpp',
 'display/surface.cpp',
 'display/surface_manager.cpp',
+'display/text_area.cpp',
 'display/texture.cpp',
 'display/texture_manager.cpp',
 'display/vertex_array_drawing_request.cpp',
-'energy_bar.cpp',
 'engine/camera.cpp',
 'engine/entity.cpp',
 'engine/game_object.cpp',
@@ -82,10 +79,7 @@
 'font/border_font_effect.cpp',
 'font/fonts.cpp',
 'font/ttf_font.cpp',
-'game_session.cpp',
-'geometry_test.cpp',
 'globals.cpp',
-'graphic_context_state.cpp',
 'gui/automap.cpp',
 'gui/button.cpp',
 'gui/component.cpp',
@@ -101,6 +95,12 @@
 'gui/slider.cpp',
 'gui/tab_component.cpp',
 'gui/text_view.cpp',
+'hud/controller_help_window.cpp',
+'hud/conversation.cpp',
+'hud/dialog_manager.cpp',
+'hud/energy_bar.cpp',
+'hud/inventory.cpp',
+'hud/pda.cpp',
 'input/controller.cpp',
 'input/controller_description.cpp',
 'input/input_configurator.cpp',
@@ -108,7 +108,6 @@
 'input/input_manager_impl.cpp',
 'input/input_manager_sdl.cpp',
 'input/wiimote.cpp',
-'inventory.cpp',
 'lisp/getters.cpp',
 'lisp/lexer.cpp',
 'lisp/lisp.cpp',
@@ -128,7 +127,6 @@
 'navigation/properties.cpp',
 'navigation/segment.cpp',
 'navigation/segment_position.cpp',
-'navigation_test.cpp',
 'objects/background_gradient.cpp',
 'objects/bomb.cpp',
 'objects/box.cpp',
@@ -148,16 +146,22 @@
 'objects/test_object.cpp',
 'objects/trigger.cpp',
 'objects/vrdummy.cpp',
-'particle_viewer.cpp',
+'screen/particle_viewer.cpp',
 'particles/deform_drawer.cpp',
 'particles/particle_system.cpp',
 'particles/spark_drawer.cpp',
 'particles/surface_drawer.cpp',
-'pda.cpp',
 'physfs/physfs_sdl.cpp',
 'physfs/physfs_stream.cpp',
-'screen.cpp',
-'screen_manager.cpp',
+'screen/screen.cpp',
+'screen/armature_test.cpp',
+'screen/game_session.cpp',
+'screen/geometry_test.cpp',
+'screen/navigation_test.cpp',
+'screen/sprite2dview.cpp',
+'screen/sprite3dview.cpp',
+'screen/title_screen.cpp',
+'screen/screen_manager.cpp',
 'scripting/game_objects.cpp',
 'scripting/interface.cpp',
 'scripting/squirrel_error.cpp',
@@ -170,20 +174,15 @@
 'sprite2d/data.cpp',
 'sprite2d/manager.cpp',
 'sprite2d/sprite.cpp',
-'sprite2dview.cpp',
 'sprite3d/data.cpp',
 'sprite3d/manager.cpp',
 'sprite3d/sprite3d.cpp',
-'sprite3dview.cpp',
-'text_area.cpp',
 'tile/tile.cpp',
 'tile/tile_description.cpp',
 'tile/tile_factory.cpp',
 'tile/tile_map.cpp',
 'tile/tile_packer.cpp',
 'timer.cpp',
-'title_screen.cpp',
-'util/util.cpp',
 'util/baby_xml.cpp',
 'util/command_line.cpp',
 'util/command_line_generic.cpp',
@@ -191,6 +190,7 @@
 'util/getter.cpp',
 'util/response_curve.cpp',
 'util/sexpr_file_reader.cpp',
+'util/util.cpp',
 'view.cpp',
 'windstille_main.cpp',
 ])

Deleted: trunk/windstille/src/armature_test.cpp
===================================================================
--- trunk/windstille/src/armature_test.cpp	2009-02-11 22:04:00 UTC (rev 2467)
+++ trunk/windstille/src/armature_test.cpp	2009-02-12 08:17:19 UTC (rev 2468)
@@ -1,130 +0,0 @@
-/*
-**  Windstille - A Sci-Fi Action-Adventure Game
-**  Copyright (C) 2007 Ingo Ruhnke <grumbel at gmx.de>
-**
-**  This program is free software: you can redistribute it and/or modify
-**  it under the terms of the GNU General Public License as published by
-**  the Free Software Foundation, either version 3 of the License, or
-**  (at your option) any later version.
-**  
-**  This program is distributed in the hope that it will be useful,
-**  but WITHOUT ANY WARRANTY; without even the implied warranty of
-**  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
-**  GNU General Public License for more details.
-**  
-**  You should have received a copy of the GNU General Public License
-**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
-*/
-
-#include <GL/glew.h>
-#include <GL/gl.h>
-#include <physfs.h>
-
-#include "input/controller.hpp"
-#include "display/display.hpp"
-#include "screen_manager.hpp"
-#include "display/display.hpp"
-#include "armature/pose.hpp"
-#include "armature/model.hpp"
-#include "armature_test.hpp"
-
-ArmatureTest::ArmatureTest()
-{
-  FileReader model_reader = FileReader::parse("armature/mesh.mesh");
-  model = new Model(model_reader, "armature/");
-
-  FileReader armature_reader = FileReader::parse("armature/armature.arm");
-  armature = new Armature(armature_reader);
-
-  std::vector<std::string> file_lst;
-  {
-    char** dirlist = PHYSFS_enumerateFiles("armature/pose/");
-    for (char **i = dirlist; *i != NULL; ++i)
-      if (!PHYSFS_isDirectory((std::string("armature/pose/") + *i).c_str())) {
-        std::cout << "PoseFile: " << *i << std::endl;
-        FileReader pose_reader = FileReader::parse(std::string("armature/pose/") + *i);
-        poses.push_back(new Pose(pose_reader));       
-      }
-    PHYSFS_freeList(dirlist);
-  }
-
-  pose_idx = 0;
-
-  armature->apply(*poses[pose_idx]);
-
-  xrot = 0;
-  yrot = 0;
-  zrot = 0;
-  
-  time = 0.0f;
-}
-
-void
-ArmatureTest::draw()
-{
-  glClearColor(0.5f, 0.0f, 0.5f, 1.0f);
-  glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);
-
-  glPushMatrix();
-
-  glTranslatef(400.0f, 300.0f, 0.0f);
-  glScalef(64.0f, 64.0f, 64.0f);
- 
-  glRotatef(xrot, 1.0f, 0.0f, 0.0f);
-  glRotatef(yrot, 0.0f, 1.0f, 0.0f);
-  glRotatef(zrot, 0.0f, 0.0f, 1.0f);
-
-  model->draw();
-  armature->draw();
-
-  glPopMatrix();
-
-  // std::cout << xrot << " " << yrot << std::endl;
-}
-
-void
-ArmatureTest::update(float delta, const Controller& controller)
-{
-  time += delta;
-
-  pose_idx = int(time * 5.0f) % poses.size();
-  armature->apply(*poses[pose_idx]);
-  model->apply(armature);
-
-  if (controller.button_was_pressed(ESCAPE_BUTTON) ||
-      controller.button_was_pressed(PAUSE_BUTTON))
-    {
-      screen_manager.pop_screen();
-    }
-
-  if (controller.button_was_pressed(PRIMARY_BUTTON))
-    {
-      xrot = 90;
-      yrot = 0;
-      zrot = 0;
-    }
-  else if (controller.button_was_pressed(SECONDARY_BUTTON))
-      {
-      xrot = 0;
-      yrot = 90;
-      zrot = 0;
-      }
-  else if (controller.button_was_pressed(TERTIARY_BUTTON))
-    {
-      xrot = 0;
-      yrot = 0;
-      zrot = 90;
-    }
-  else
-    { 
-      yrot += controller.get_axis_state(X_AXIS) * 90 * delta;
-      xrot += controller.get_axis_state(Y_AXIS) * 90 * delta;
-      zrot += controller.get_axis_state(X2_AXIS) * 90 * delta;
-    }
-
-  if (controller.button_was_pressed(AIM_BUTTON))
-    {
-    }
-}
-
-/* EOF */

Deleted: trunk/windstille/src/armature_test.hpp
===================================================================
--- trunk/windstille/src/armature_test.hpp	2009-02-11 22:04:00 UTC (rev 2467)
+++ trunk/windstille/src/armature_test.hpp	2009-02-12 08:17:19 UTC (rev 2468)
@@ -1,54 +0,0 @@
-/*
-**  Windstille - A Sci-Fi Action-Adventure Game
-**  Copyright (C) 2007 Ingo Ruhnke <grumbel at gmx.de>
-**
-**  This program is free software: you can redistribute it and/or modify
-**  it under the terms of the GNU General Public License as published by
-**  the Free Software Foundation, either version 3 of the License, or
-**  (at your option) any later version.
-**  
-**  This program is distributed in the hope that it will be useful,
-**  but WITHOUT ANY WARRANTY; without even the implied warranty of
-**  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
-**  GNU General Public License for more details.
-**  
-**  You should have received a copy of the GNU General Public License
-**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
-*/
-
-#ifndef HEADER_WINDSTILLE_ARMATURE_TEST_HPP
-#define HEADER_WINDSTILLE_ARMATURE_TEST_HPP
-
-#include "armature/armature.hpp"
-#include "armature/model.hpp"
-#include "screen.hpp"
-
-/** */
-class ArmatureTest : public Screen
-{
-private:
-  Model* model;
-  Armature* armature;
-  std::vector<Pose*> poses;
-  
-  int pose_idx;
-  float time;
-
-  float xrot;
-  float yrot;
-  float zrot;
-
-public:
-  ArmatureTest();
-
-  void draw();
-  void update(float delta, const Controller& controller);
-
-private:
-  ArmatureTest (const ArmatureTest&);
-  ArmatureTest& operator= (const ArmatureTest&);
-};
-
-#endif
-
-/* EOF */

Deleted: trunk/windstille/src/blitter.cpp
===================================================================
--- trunk/windstille/src/blitter.cpp	2009-02-11 22:04:00 UTC (rev 2467)
+++ trunk/windstille/src/blitter.cpp	2009-02-12 08:17:19 UTC (rev 2468)
@@ -1,86 +0,0 @@
-//
-//
-//  Flexlay - A Generic 2D Game Editor
-//  Copyright (C) 2002 Ingo Ruhnke <grumbel at gmx.de>
-//
-//  This program is free software; you can redistribute it and/or
-//  modify it under the terms of the GNU General Public License
-//  as published by the Free Software Foundation; either version 2
-//  of the License, or (at your option) any later version.
-//
-//  This program is distributed in the hope that it will be useful,
-//  but WITHOUT ANY WARRANTY; without even the implied warranty of
-//  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
-//  GNU General Public License for more details.
-//
-//  You should have received a copy of the GNU General Public License
-//  along with this program; if not, write to the Free Software
-//  Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA.
-
-#include <assert.h>
-#include <iostream>
-#include <algorithm>
-#include <stdint.h>
-#include "blitter.hpp"
-
-void generate_border(SDL_Surface* surface,
-                     int x_pos, int y_pos, int width, int height)
-{
-  assert(surface->format->BitsPerPixel == 32);
-  SDL_LockSurface(surface);
- 
-  uint8_t* data = static_cast<uint8_t*>(surface->pixels);
-  int pitch = surface->pitch;
-
-  // duplicate the top line
-  memcpy(data + (y_pos-1)*pitch + 4*x_pos, 
-         data + (y_pos)*pitch + 4*x_pos,
-         4*width);
-  // duplicate the bottom line
-  memcpy(data + (y_pos+height)*pitch + 4*x_pos, 
-         data + (y_pos+height-1)*pitch + 4*x_pos,  
-         4*width);
-
-  // duplicate left and right borders
-  for(int y = y_pos-1; y < y_pos + height+1; ++y)
-    {
-      uint32_t* p = reinterpret_cast<uint32_t*> (data + (y*pitch + 4*(x_pos-1)));
-      *p = *(p+1);
-      p = reinterpret_cast<uint32_t*> (data + (y*pitch + 4*(x_pos + width)));
-      *p = *(p-1);
-    }
-
-  SDL_UnlockSurface(surface);
-}
-
-void 
-blit_ftbitmap(SDL_Surface* target, const FT_Bitmap& brush, int x_pos, int y_pos)
-{
-  SDL_LockSurface(target);
-  
-  int start_x = std::max(0, -x_pos);
-  int start_y = std::max(0, -y_pos);
-  
-  int end_x = std::min(brush.width, target->w  - x_pos);
-  int end_y = std::min(brush.rows,  target->h - y_pos);
-
-  unsigned char* target_buf = static_cast<unsigned char*>(target->pixels);
-
-  int target_pitch = target->pitch;
-
-  for (int y = start_y; y < end_y; ++y)
-    for (int x = start_x; x < end_x; ++x)
-      {
-        int target_pos = (y + y_pos) * target_pitch + 4*(x + x_pos);
-        int brush_pos  = y * brush.pitch + x;
-            
-        target_buf[target_pos + 0] = 255;
-        target_buf[target_pos + 1] = 255;
-        target_buf[target_pos + 2] = 255;
-        target_buf[target_pos + 3] = brush.buffer[brush_pos];
-      }
-    
-  SDL_UnlockSurface(target);
-}
-
-/* EOF */

Deleted: trunk/windstille/src/blitter.hpp
===================================================================
--- trunk/windstille/src/blitter.hpp	2009-02-11 22:04:00 UTC (rev 2467)
+++ trunk/windstille/src/blitter.hpp	2009-02-12 08:17:19 UTC (rev 2468)
@@ -1,42 +0,0 @@
-//  Flexlay - A Generic 2D Game Editor
-//  Copyright (C) 2002 Ingo Ruhnke <grumbel at gmx.de>
-//
-//  This program is free software; you can redistribute it and/or
-//  modify it under the terms of the GNU General Public License
-//  as published by the Free Software Foundation; either version 2
-//  of the License, or (at your option) any later version.
-//
-//  This program is distributed in the hope that it will be useful,
-//  but WITHOUT ANY WARRANTY; without even the implied warranty of
-//  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
-//  GNU General Public License for more details.
-// 
-//  You should have received a copy of the GNU General Public License
-//  along with this program; if not, write to the Free Software
-//  Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA.
-
-#ifndef HEADER_BLITTER_HPP
-#define HEADER_BLITTER_HPP
-
-#include <SDL.h>
-
-#include <ft2build.h>
-#include FT_FREETYPE_H
-#include FT_GLYPH_H
-
-/** Duplicate all the edge pixel of the given rectangle to the outside
-    of the rectangle, thus creating a border around the given
-    rectangle, this is needed for OpenGL textures to avoid filtering
-    artefacts:
-
-    X X X X X    1 1 2 3 3
-    X 1 2 3 X _\ 1 1 2 3 3
-    X 4 5 6 X  / 4 4 5 6 6
-    X X X X X    4 4 5 6 6
-*/
-void generate_border(SDL_Surface* surface, int x_pos, int y_pos, int width, int height);
-void blit_ftbitmap(SDL_Surface* target, const FT_Bitmap& brush, int x_pos, int y_pos);
-
-#endif
-
-/* EOF */

Modified: trunk/windstille/src/console.cpp
===================================================================
--- trunk/windstille/src/console.cpp	2009-02-11 22:04:00 UTC (rev 2467)
+++ trunk/windstille/src/console.cpp	2009-02-12 08:17:19 UTC (rev 2468)
@@ -19,7 +19,7 @@
 #include <assert.h>
 #include "math/rect.hpp"
 #include "font/fonts.hpp"
-#include "game_session.hpp"
+#include "screen/game_session.hpp"
 #include "input/input_manager.hpp"
 #include "engine/script_manager.hpp"
 #include "display/display.hpp"

Deleted: trunk/windstille/src/controller_help_window.cpp
===================================================================
--- trunk/windstille/src/controller_help_window.cpp	2009-02-11 22:04:00 UTC (rev 2467)
+++ trunk/windstille/src/controller_help_window.cpp	2009-02-12 08:17:19 UTC (rev 2468)
@@ -1,114 +0,0 @@
-/*
-**  Windstille - A Sci-Fi Action-Adventure Game
-**  Copyright (C) 2005 Ingo Ruhnke <grumbel at gmx.de>
-**
-**  This program is free software: you can redistribute it and/or modify
-**  it under the terms of the GNU General Public License as published by
-**  the Free Software Foundation, either version 3 of the License, or
-**  (at your option) any later version.
-**  
-**  This program is distributed in the hope that it will be useful,
-**  but WITHOUT ANY WARRANTY; without even the implied warranty of
-**  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
-**  GNU General Public License for more details.
-**  
-**  You should have received a copy of the GNU General Public License
-**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
-*/
-
-#include "input/input_manager.hpp"
-#include "display/display.hpp"
-#include "text_area.hpp"
-#include "font/fonts.hpp"
-#include "controller_help_window.hpp"
-
-ControllerHelpWindow* ControllerHelpWindow::current_ = 0;
-
-class ControllerHelpWindowImpl
-{
-public:
-  TextArea* text_area;
-  bool active;
-};
-
-ControllerHelpWindow::ControllerHelpWindow()
-  : impl(new ControllerHelpWindowImpl)
-{
-  current_ = this;
-  int width  = 200;
-  int height = 120;
-  
-  impl->active = false;
-  impl->text_area = new TextArea(Rect(Point(Display::get_width() - width - 16,
-                                            Display::get_height() - height - 16),
-                                      Size(width, height)), false);
-  impl->text_area->set_font(Fonts::ttffont);
-  impl->text_area->set_text("Control Help\n"
-                            "------------\n"
-                            "walk: left/right\n"
-                            "duck: down\n\n"
-                            "primary/run:    s\n"
-                            "secondary/jump: d\n"
-                            "tertiary:       a\n"
-                            "pda:            w\n"
-                            );
-}
-
-void
-ControllerHelpWindow::draw()
-{
-  if (!impl->active)
-    return;
-    
-  const Rectf& rect = impl->text_area->get_rect().grow(8.0f);
-
-  Display::fill_rounded_rect(rect, 16.0f, Color(0.3f, 0.3f, 0.5f, 0.5f));
-  Display::draw_rounded_rect(rect, 16.0f, Color(1.0f, 1.0f, 1.0f, 0.5f));
-  impl->text_area->draw();
-
-  Controller controller = InputManager::get_controller();
-  
-  Rectf crect(Vector(rect.right - 100, rect.top - 100 - 8.0f),
-              Size(100, 100));
-
-  Display::fill_rounded_rect(crect, 10.0f, Color(1.0f, 1.0f, 1.0f, 0.2f));
-  Display::draw_rounded_rect(crect, 10.0f, Color(1.0f, 1.0f, 1.0f, 0.5f));
-
-  Vector pos(crect.left + crect.get_width()/2  + controller.get_axis_state(X_AXIS) * (crect.get_width()-16.0f)/2,
-             crect.top  + crect.get_height()/2 + controller.get_axis_state(Y_AXIS)   * (crect.get_width()-16.0f)/2);
-
-  Display::fill_circle(pos, 10.0f, Color(0.8f, 0, 0));
-  Display::draw_circle(pos, 10.0f, Color(1.0f, 0, 0));
-
-  for(int i = 0; i < 6; ++i)
-    {
-      if (controller.get_button_state(i))
-        {
-          Display::fill_circle(Vector(crect.left - 16.0f, crect.top + (crect.get_height()-20)/3 * i + 10.0f),
-                               10.0f, Color(0.8f, 0, 0));
-          Display::draw_circle(Vector(crect.left - 16.0f, crect.top + (crect.get_height()-20)/3 * i + 10.0f),
-                               10.0f, Color(1.0f, 0.0f, 0.0f));
-        }
-      else
-        {
-          Display::fill_circle(Vector(crect.left - 16.0f, crect.top + (crect.get_height()-20)/3 * i + 10.0f),
-                               10.0f, Color(1.0f, 1.0f, 1.0f, 0.2f));
-          Display::draw_circle(Vector(crect.left - 16.0f, crect.top + (crect.get_height()-20)/3 * i + 10.0f),
-                               10.0f,  Color(1.0f, 1.0f, 1.0f, 0.5f));
-        }
-    }
-}
-
-void
-ControllerHelpWindow::update(float delta, const Controller& )
-{
-  impl->text_area->update(delta);
-}
-
-void
-ControllerHelpWindow::set_active(bool active)
-{
-  impl->active = active;
-}
-
-/* EOF */

Deleted: trunk/windstille/src/controller_help_window.hpp
===================================================================
--- trunk/windstille/src/controller_help_window.hpp	2009-02-11 22:04:00 UTC (rev 2467)
+++ trunk/windstille/src/controller_help_window.hpp	2009-02-12 08:17:19 UTC (rev 2468)
@@ -1,45 +0,0 @@
-/*
-**  Windstille - A Sci-Fi Action-Adventure Game
-**  Copyright (C) 2005 Ingo Ruhnke <grumbel at gmx.de>
-**
-**  This program is free software: you can redistribute it and/or modify
-**  it under the terms of the GNU General Public License as published by
-**  the Free Software Foundation, either version 3 of the License, or
-**  (at your option) any later version.
-**  
-**  This program is distributed in the hope that it will be useful,
-**  but WITHOUT ANY WARRANTY; without even the implied warranty of
-**  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
-**  GNU General Public License for more details.
-**  
-**  You should have received a copy of the GNU General Public License
-**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
-*/
-
-#ifndef HEADER_WINDSTILLE_CONTROLLER_HELP_WINDOW_HPP
-#define HEADER_WINDSTILLE_CONTROLLER_HELP_WINDOW_HPP
-
-#include "screen.hpp"
-#include <boost/shared_ptr.hpp>
-
-class ControllerHelpWindowImpl;
-
-/** */
-class ControllerHelpWindow : public Screen
-{
-public:
-  ControllerHelpWindow();
-
-  void draw();
-  void update(float delta, const Controller& controller);
-  void set_active(bool active);
-  static ControllerHelpWindow* current() { return current_; }
-
-private:
-  boost::shared_ptr<ControllerHelpWindowImpl> impl;
-  static ControllerHelpWindow* current_;
-};
-
-#endif
-
-/* EOF */

Deleted: trunk/windstille/src/conversation.cpp
===================================================================
--- trunk/windstille/src/conversation.cpp	2009-02-11 22:04:00 UTC (rev 2467)
+++ trunk/windstille/src/conversation.cpp	2009-02-12 08:17:19 UTC (rev 2468)
@@ -1,181 +0,0 @@
-/*
-**  Windstille - A Sci-Fi Action-Adventure Game
-**  Copyright (C) 2000,2005 Ingo Ruhnke <grumbel at gmx.de>
-**
-**  This program is free software: you can redistribute it and/or modify
-**  it under the terms of the GNU General Public License as published by
-**  the Free Software Foundation, either version 3 of the License, or
-**  (at your option) any later version.
-**  
-**  This program is distributed in the hope that it will be useful,
-**  but WITHOUT ANY WARRANTY; without even the implied warranty of
-**  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
-**  GNU General Public License for more details.
-**  
-**  You should have received a copy of the GNU General Public License
-**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
-*/
-
-#include "math/math.hpp"
-#include "input/controller.hpp"
-#include "input/input_manager.hpp"
-#include "font/fonts.hpp"
-#include "math/rect.hpp"
-#include "engine/script_manager.hpp"
-#include "display/display.hpp"
-#include "conversation.hpp"
-#include "pda.hpp"
-#include "game_session.hpp"
-
-Conversation* Conversation::current_ = 0;
-
-Conversation::Conversation()
-  : pos(400, 300),
-    time(0)
-{
-  current_ = this;
-  active = false;
-  selection = 0;
-}
-
-void
-Conversation::add(const std::string& text)
-{
-  if (!active)
-    {
-      choices.push_back(Choice(text, ""));
-      if (selection >= int(choices.size()))
-        selection = 0;
-    }
-}
-
-void
-Conversation::add(const std::string& topic, const std::string& text)
-{
-  if (!active)
-    {
-      choices.push_back(Choice(topic, text));
-      if (selection >= int(choices.size()))
-        selection = 0;
-    }
-}
-
-void
-Conversation::draw()
-{
-  if (!active)
-    return;
-  
-  Display::fill_circle(pos, 42.0f, Color(0.5f, 0.5f, 0.5f, 0.75f), 24);
-
-  float segment = 360.0f / choices.size();
-
-  for(int i = 0; i < choices.size(); ++i)
-    { // FIXME:
-      Vector offset(0.0f, 1.0f);
-      offset = offset.rotate(math::deg2rad(segment*i) - M_PI/2);
-
-      float start = -segment/2 - 90.0f + segment*i;
-      float end   = -segment/2 - 90.0f + segment*(i+1);
-      
-      float distance = 160.0f;
-
-      Vector textpos = pos + Vector(0, 16.0f);
-      // FIXME: Doesn't handle multi line text
-      Sizef size(Fonts::vera20->get_width(choices[i].topic) + 50,
-                 Fonts::vera20->get_height() + 30);
-      Rectf  rect(textpos + distance * offset - Vector(size.width/2, size.height - 15), size);
-
-      if (i == selection)
-        {
-          rect = rect.grow(grow);
-          
-          Display::fill_arc(pos, 42.0f, start, end, Color(1.0f, 1.0f, 1.0f, 0.5f), 24);
-          Display::fill_rounded_rect(rect, 5.0f, Color(0.5f, 0.5f, 0.5f, 0.75f));
-          Fonts::vera20->draw_center(textpos.x + distance * offset.x,
-                                     textpos.y + distance * offset.y, 
-                                     choices[i].topic, Color(1.0f, 1.0f, 1.0f));
-
-          Fonts::vera20->draw_center(400, 600 - 64,
-                                     choices[i].text, Color(1.0f, 1.0f, 1.0f));
-        }
-      else
-        {
-          Display::fill_rounded_rect(rect, 5.0f, Color(0.25f, 0.25f, 0.25f, 0.75f));
-          Fonts::vera20->draw_center(textpos.x + distance * offset.x,
-                                     textpos.y + distance * offset.y,
-                                     choices[i].topic, Color(0.5f, 0.5f, 0.5f));
-        }
-
-      Display::draw_rounded_rect(rect, 5.0f, Color(1.0f, 1.0f, 1.0f));
-
-      //Display::draw_arc(pos + 5.0f * offset, 32.0f,
-      //                  start, end,
-      //                  Color(1.0f, 1.0f, 1.0f, 1.0f), 24);
-
-    }
-  Display::draw_circle(pos, 42.0f, Color(1.0f, 1.0f, 1.0f, 0.5f), 24);
-
-  Display::fill_circle(pos + direction * 34.0f, 8.0f, Color(1.0f, 1.0f, 1.0f));
-  //Display::draw_line(pos, pos + direction*32.0f, Color(0.0f, 0.0f, 0.0f));
-}
-
-void
-Conversation::update(float delta, const Controller& controller)
-{
-  time += delta;
-
-  if (!active)
-    return;
-
-  grow = fabs(sinf(time * 3.0f)) * 4.0f;
-
-  direction = Vector(controller.get_axis_state(X_AXIS),
-                     controller.get_axis_state(Y_AXIS));
-
-  if (fabs(controller.get_axis_state(X_AXIS)) > 0.3f ||
-      fabs(controller.get_axis_state(Y_AXIS)) > 0.3f)
-    {
-      float segment = 360.0f / choices.size();
-      float angle = math::rad2deg(math::normalize_angle(atan2f(direction.y, direction.x) + M_PI/2 + math::deg2rad(segment/2.0f)));
-
-      int new_selection = int(angle / segment);
-      new_selection = math::mid(0, new_selection, int(choices.size()));
-
-      if (new_selection != selection) {
-        selection = new_selection;
-        // FIXME: Might be a good idea to do the woople-size per button, not globaly
-        grow = 0.0f;
-        time = 0;
-      }
-    }
-  else
-    {
-      selection = -1;
-    }
-  
-  if (controller.button_was_pressed(OK_BUTTON) && selection != -1)
-    {
-      active = false;
-      GameSession::current()->get_pda().add_dialog("Jane",
-                                                   choices[selection].topic + " - " +
-                                                   choices[selection].text);
-      choices.clear();
-      GameSession::current()->set_control_state(GameSession::GAME);
-      script_manager->fire_wakeup_event(ScriptManager::CONVERSATION_CLOSED);
-    }
-}
-
-int
-Conversation::get_selection() const
-{
-  return selection;
-}
-
-void
-Conversation::show()
-{
-  active = true;
-}
-
-/* EOF */

Deleted: trunk/windstille/src/conversation.hpp
===================================================================
--- trunk/windstille/src/conversation.hpp	2009-02-11 22:04:00 UTC (rev 2467)
+++ trunk/windstille/src/conversation.hpp	2009-02-12 08:17:19 UTC (rev 2468)
@@ -1,68 +0,0 @@
-/*
-**  Windstille - A Sci-Fi Action-Adventure Game
-**  Copyright (C) 2000,2005 Ingo Ruhnke <grumbel at gmx.de>
-**
-**  This program is free software: you can redistribute it and/or modify
-**  it under the terms of the GNU General Public License as published by
-**  the Free Software Foundation, either version 3 of the License, or
-**  (at your option) any later version.
-**  
-**  This program is distributed in the hope that it will be useful,
-**  but WITHOUT ANY WARRANTY; without even the implied warranty of
-**  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
-**  GNU General Public License for more details.
-**  
-**  You should have received a copy of the GNU General Public License
-**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
-*/
-
-#ifndef HEADER_WINDSTILLE_CONVERSATION_HPP
-#define HEADER_WINDSTILLE_CONVERSATION_HPP
-
-#include <vector>
-#include <string>
-#include "screen.hpp"
-
-/** Displays a list of text strings from which the user can select
-    one, used to form multiple-choice dialogs */
-class Conversation : public Screen
-{
-private:
-  Vector pos;
-  Vector direction;
-  bool   active;
-  int    selection;
-  float  grow;
-  float  time;
-
-  struct Choice {
-    Choice(const std::string topic_,
-           const std::string text_)
-      : topic(topic_), 
-        text(text_) 
-    {}
-    std::string topic;
-    std::string text;
-  };
-
-  typedef std::vector<Choice> Choices;
-  Choices choices;
-  
-  static Conversation* current_;
-public:
-  static Conversation* current() { assert(current_); return current_; }
-  
-  Conversation();
-
-  void draw();
-  void update(float delta, const Controller& controller);
-
-  void add(const std::string& text);
-  void add(const std::string& topic, const std::string& text);
-  int  get_selection() const;
-  void show();
-};
-
-#endif
-
-/* EOF */

Deleted: trunk/windstille/src/dialog_manager.cpp
===================================================================
--- trunk/windstille/src/dialog_manager.cpp	2009-02-11 22:04:00 UTC (rev 2467)
+++ trunk/windstille/src/dialog_manager.cpp	2009-02-12 08:17:19 UTC (rev 2468)
@@ -1,192 +0,0 @@
-/*
-**  Windstille - A Sci-Fi Action-Adventure Game
-**  Copyright (C) 2000,2005 Ingo Ruhnke <grumbel at gmx.de>
-**
-**  This program is free software: you can redistribute it and/or modify
-**  it under the terms of the GNU General Public License as published by
-**  the Free Software Foundation, either version 3 of the License, or
-**  (at your option) any later version.
-**  
-**  This program is distributed in the hope that it will be useful,
-**  but WITHOUT ANY WARRANTY; without even the implied warranty of
-**  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
-**  GNU General Public License for more details.
-**  
-**  You should have received a copy of the GNU General Public License
-**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
-*/
-
-#include <iostream>
-#include "font/fonts.hpp"
-#include "game_session.hpp"
-#include "input/controller.hpp"
-#include "input/input_manager.hpp"
-#include "dialog_manager.hpp"
-#include "engine/script_manager.hpp"
-#include "text_area.hpp"
-#include "display/display.hpp"
-#include "config.hpp"
-
-DialogManager* DialogManager::current_ = 0;
-
-DialogManager::DialogManager()
-{
-  current_ = this;
-  text_area = 0;
-}
-
-DialogManager::~DialogManager()
-{
-  delete text_area;
-}
-
-void
-DialogManager::add_dialog(int alignment_, const std::string& portrait_, const std::string& text_)
-{ 
-  delay     = 0.0;
-  alignment = alignment_;
-  portrait  = Sprite(portrait_);
-  portrait.set_scale(0.65f);
-  text      = text_;
-  caption = false;
-  
-  create_text();
-}
-
-void
-DialogManager::add_caption(int alignment_, const std::string& text_)
-{
-  delay     = 0.0;
-  alignment = alignment_;
-  text      = text_;
-  caption = true;
-  
-  create_text();
-}
-
-void
-DialogManager::draw()
-{
-  int dialog_height = std::max(portrait_height + portrait_border_y*2,
-                               int(text_area->get_rect().get_height()
-                                   + text_border_y * 2.0f));
-
-  Point pos(0,0);
-  if(alignment & LEFT) {
-    pos.x = outer_border_x;
-  } else if(alignment & RIGHT) {
-    pos.x = Display::get_width() - dialog_width - outer_border_x;
-  } else {
-    pos.x = (Display::get_width() - dialog_width) / 2;
-  }
-
-  if(alignment & TOP) {
-    pos.y = outer_border_y;
-  } else if(alignment & BOTTOM) {
-    pos.y = Display::get_height() - dialog_height - outer_border_y;
-  } else {
-    pos.y = (Display::get_height() - dialog_height) / 2;
-  }
-
-  if (!caption) {
-    Rectf rect(pos.x,
-               pos.y,
-               pos.x + dialog_width,
-               pos.y + 200);
-    
-    Display::fill_rounded_rect(rect, 16.0f,
-                               Color(0, 0, 0.3f, 0.5f));
-    Display::draw_rounded_rect(rect, 16.0f,
-                               Color(0.6f, 1.0f, 1.0f, 0.8f));
-  
-    portrait.draw(Vector(pos.x + portrait_border_x,
-                         pos.y + portrait_border_y));
-  }
-  
-  text_area->draw();
-
-  if (text_area->is_progress_complete())
-    {
-      const Vector& pos = text_area->get_cursor_pos();
-      Rectf cursor(pos.x + 8, pos.y + 8, pos.x + 24, pos.y + 24);
-      Display::fill_rect(cursor, Color(1.0, 1.0, 1.0, fabs(sin(SDL_GetTicks() / 1000.0f * M_PI * 3.0f))));
-    }
-}
-
-void
-DialogManager::update(float delta, const Controller& controller)
-{
-  text_area->update(delta);
-
-  delay += delta;
-
-  InputEventLst events = controller.get_events();
-	
-  for (InputEventLst::iterator i = events.begin(); i != events.end(); ++i)
-    {
-      if ((*i).type == BUTTON_EVENT)
-        {
-          if ((*i).button.name == OK_BUTTON && (*i).button.down == true)
-            {
-              if (text_area->is_progress_complete())
-                {
-                  GameSession::current()->set_control_state(GameSession::GAME);
-                  script_manager->fire_wakeup_event(ScriptManager::DIALOG_CLOSED);
-                }
-              else if (delay > 0.2)
-                text_area->set_progress_complete();
-            } 
-        }
-    }
-}
-
-void
-DialogManager::create_text()
-{
-  if (caption)
-    outer_border_y = 0;
-  else
-    outer_border_y = 20;
-    
-  Point pos(0,0);
-  if(alignment & LEFT) {
-    pos.x = outer_border_x;
-  } else if(alignment & RIGHT) {
-    pos.x = Display::get_width() - dialog_width - outer_border_x;
-  } else {
-    pos.x = (Display::get_width() - dialog_width) / 2;
-  }
-      
-  int text_width
-    = dialog_width - portrait_height - portrait_border_x*2 - text_border_x;
-  Rect text_rect = Rect(Point(pos.x + portrait_width + portrait_border_x*2, 0),
-                        Size(500, 200)); // FIXME: use real bounding box calc
-  
-  text_rect.bottom = text_rect.top + text_rect.get_height();
-  text_rect.top    = pos.y + text_border_y;
-
-  int dialog_height = std::max(portrait_height + portrait_border_y*2,
-                               text_rect.get_height() + text_border_y*2);
-
-  if(alignment & TOP) {
-    pos.y = outer_border_y;
-  } else if(alignment & BOTTOM) {
-    pos.y = Display::get_height() - dialog_height - outer_border_y;
-  } else {
-    pos.y = (Display::get_height() - dialog_height) / 2;
-  }
-
-  text_rect.bottom = text_rect.top + text_rect.get_height();
-  text_rect.top = pos.y + text_border_y;
-
-  Size dialog_size(dialog_width, dialog_height);
-
-
-  delete text_area;
-  text_area = new TextArea(Rect(Point(text_rect.left, text_rect.top + Fonts::vera20->get_height()),
-                                Size(text_width, 200)), true);
-  text_area->set_font(Fonts::vera20);
-  text_area->set_text(text);
-}
-
-/* EOF */

Deleted: trunk/windstille/src/dialog_manager.hpp
===================================================================
--- trunk/windstille/src/dialog_manager.hpp	2009-02-11 22:04:00 UTC (rev 2467)
+++ trunk/windstille/src/dialog_manager.hpp	2009-02-12 08:17:19 UTC (rev 2468)
@@ -1,78 +0,0 @@
-/*
-**  Windstille - A Sci-Fi Action-Adventure Game
-**  Copyright (C) 2000,2005 Ingo Ruhnke <grumbel at gmx.de>
-**
-**  This program is free software: you can redistribute it and/or modify
-**  it under the terms of the GNU General Public License as published by
-**  the Free Software Foundation, either version 3 of the License, or
-**  (at your option) any later version.
-**  
-**  This program is distributed in the hope that it will be useful,
-**  but WITHOUT ANY WARRANTY; without even the implied warranty of
-**  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
-**  GNU General Public License for more details.
-**  
-**  You should have received a copy of the GNU General Public License
-**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
-*/
-
-#ifndef HEADER_WINDSTILLE_DIALOG_MANAGER_HPP
-#define HEADER_WINDSTILLE_DIALOG_MANAGER_HPP
-
-#include <vector>
-#include <string>
-#include "sprite2d/sprite.hpp"
-#include "globals.hpp"
-#include "screen.hpp"
-
-class TextArea;
-
-/** */
-class DialogManager : public Screen
-{
-private:
-  void create_text();
-  
-  Sprite portrait;
-  std::string text;
-  float delay;
-  TextArea* text_area;
-
-  enum Alignment {
-    VCENTER = 0x00,
-    LEFT    = 0x01,
-    RIGHT   = 0x02,
-    HCENTER = 0x00,
-    TOP     = 0x10,
-    BOTTOM  = 0x20
-  };
-  int alignment;
-  bool caption;
-  
-  static const int dialog_width = 600;
-  static const int portrait_border_x = 10;
-  static const int portrait_border_y = 10;
-  static const int text_border_x = 10;
-  static const int text_border_y = 10;
-  static const int portrait_width = 180;
-  static const int portrait_height = 192;
-  static const int outer_border_x = 20;
-  int outer_border_y;
-
-  static DialogManager* current_;
-public:
-  static DialogManager* current() { return current_; }
-
-  DialogManager();
-  ~DialogManager();
-
-  void draw();
-  void update(float delta, const Controller& controller);
-
-  void add_dialog(int alignment, const std::string& portrait, const std::string& text);
-  void add_caption(int alignment, const std::string& text);
-};
-
-#endif
-
-/* EOF */

Copied: trunk/windstille/src/display/blitter.cpp (from rev 2466, trunk/windstille/src/blitter.cpp)


Property changes on: trunk/windstille/src/display/blitter.cpp
___________________________________________________________________
Name: svn:mergeinfo
   + 

Copied: trunk/windstille/src/display/blitter.hpp (from rev 2466, trunk/windstille/src/blitter.hpp)


Property changes on: trunk/windstille/src/display/blitter.hpp
___________________________________________________________________
Name: svn:mergeinfo
   + 

Copied: trunk/windstille/src/display/graphic_context_state.cpp (from rev 2466, trunk/windstille/src/graphic_context_state.cpp)


Property changes on: trunk/windstille/src/display/graphic_context_state.cpp
___________________________________________________________________
Name: svn:keywords
   + Id
Name: svn:mergeinfo
   + 
Name: svn:eol-style
   + native

Copied: trunk/windstille/src/display/graphic_context_state.hpp (from rev 2466, trunk/windstille/src/graphic_context_state.hpp)


Property changes on: trunk/windstille/src/display/graphic_context_state.hpp
___________________________________________________________________
Name: svn:keywords
   + Id
Name: svn:mergeinfo
   + 
Name: svn:eol-style
   + native

Copied: trunk/windstille/src/display/text_area.cpp (from rev 2466, trunk/windstille/src/text_area.cpp)


Property changes on: trunk/windstille/src/display/text_area.cpp
___________________________________________________________________
Name: svn:mergeinfo
   + 

Copied: trunk/windstille/src/display/text_area.hpp (from rev 2466, trunk/windstille/src/text_area.hpp)


Property changes on: trunk/windstille/src/display/text_area.hpp
___________________________________________________________________
Name: svn:mergeinfo
   + 

Deleted: trunk/windstille/src/energy_bar.cpp
===================================================================
--- trunk/windstille/src/energy_bar.cpp	2009-02-11 22:04:00 UTC (rev 2467)
+++ trunk/windstille/src/energy_bar.cpp	2009-02-12 08:17:19 UTC (rev 2468)
@@ -1,60 +0,0 @@
-/*
-**  Windstille - A Sci-Fi Action-Adventure Game
-**  Copyright (C) 2000,2005 Ingo Ruhnke <grumbel at gmx.de>
-**
-**  This program is free software: you can redistribute it and/or modify
-**  it under the terms of the GNU General Public License as published by
-**  the Free Software Foundation, either version 3 of the License, or
-**  (at your option) any later version.
-**  
-**  This program is distributed in the hope that it will be useful,
-**  but WITHOUT ANY WARRANTY; without even the implied warranty of
-**  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
-**  GNU General Public License for more details.
-**  
-**  You should have received a copy of the GNU General Public License
-**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
-*/
-
-#include "globals.hpp"
-#include "objects/player.hpp"
-#include "energy_bar.hpp"
-
-EnergyBar::EnergyBar()
-  : bar("images/energy_bar.sprite")
-{
-}
-
-EnergyBar::~EnergyBar()
-{
-}
-  
-void
-EnergyBar::draw()
-{
-  int energy     = Player::current()->get_energy();
-  int max_energy = Player::current()->get_max_energy();
-
-  for(int i = 0; i < energy; ++i)
-    {
-      float red   = 1.0f;
-      float green = (i/float(max_energy));
-      Sprite sprite = bar;
-      sprite.set_color(Color(red, green, 0, 1.0f));
-      sprite.draw(Vector(15 + (i * 10), 15));
-    }
-
-  for(int i = energy; i < max_energy; ++i)
-    {
-      bar.set_color(Color(.5f, .5f, .5f, .5f));
-      bar.draw(Vector(15 + (i * 10), 15));
-    }
-}
-
-void
-EnergyBar::update(float delta, const Controller& )
-{
-  bar.update(delta);
-}
-
-/* EOF */

Deleted: trunk/windstille/src/energy_bar.hpp
===================================================================
--- trunk/windstille/src/energy_bar.hpp	2009-02-11 22:04:00 UTC (rev 2467)
+++ trunk/windstille/src/energy_bar.hpp	2009-02-12 08:17:19 UTC (rev 2468)
@@ -1,43 +0,0 @@
-/*
-**  Windstille - A Sci-Fi Action-Adventure Game
-**  Copyright (C) 2000,2005 Ingo Ruhnke <grumbel at gmx.de>
-**
-**  This program is free software: you can redistribute it and/or modify
-**  it under the terms of the GNU General Public License as published by
-**  the Free Software Foundation, either version 3 of the License, or
-**  (at your option) any later version.
-**  
-**  This program is distributed in the hope that it will be useful,
-**  but WITHOUT ANY WARRANTY; without even the implied warranty of
-**  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
-**  GNU General Public License for more details.
-**  
-**  You should have received a copy of the GNU General Public License
-**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
-*/
-
-#ifndef HEADER_WINDSTILLE_ENERGY_BAR_HPP
-#define HEADER_WINDSTILLE_ENERGY_BAR_HPP
-
-#include "screen.hpp"
-#include "sprite2d/sprite.hpp"
-
-/** */
-class EnergyBar : public Screen
-{
-private:
-  Sprite bar;
-public:
-  EnergyBar();
-  ~EnergyBar();
-  
-  void draw();
-  void update(float delta, const Controller& controller);
-private:
-  EnergyBar (const EnergyBar&);
-  EnergyBar& operator= (const EnergyBar&);
-};
-
-#endif
-
-/* EOF */

Modified: trunk/windstille/src/font/ttf_font.cpp
===================================================================
--- trunk/windstille/src/font/ttf_font.cpp	2009-02-11 22:04:00 UTC (rev 2467)
+++ trunk/windstille/src/font/ttf_font.cpp	2009-02-12 08:17:19 UTC (rev 2468)
@@ -28,7 +28,7 @@
 #include "display/opengl_state.hpp"
 #include "physfs/physfs_stream.hpp"
 #include "display/texture_manager.hpp"
-#include "blitter.hpp"
+#include "display/blitter.hpp"
 #include "ttf_font.hpp"
 #include "font_effect.hpp"
 #include "util/util.hpp"

Deleted: trunk/windstille/src/game_session.cpp
===================================================================
--- trunk/windstille/src/game_session.cpp	2009-02-11 22:04:00 UTC (rev 2467)
+++ trunk/windstille/src/game_session.cpp	2009-02-12 08:17:19 UTC (rev 2468)
@@ -1,496 +0,0 @@
-/*
-**  Windstille - A Sci-Fi Action-Adventure Game
-**  Copyright (C) 2000,2005 Ingo Ruhnke <grumbel at gmx.de>
-**
-**  This program is free software: you can redistribute it and/or modify
-**  it under the terms of the GNU General Public License as published by
-**  the Free Software Foundation, either version 3 of the License, or
-**  (at your option) any later version.
-**  
-**  This program is distributed in the hope that it will be useful,
-**  but WITHOUT ANY WARRANTY; without even the implied warranty of
-**  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
-**  GNU General Public License for more details.
-**  
-**  You should have received a copy of the GNU General Public License
-**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
-*/
-
-#include <math.h>
-#include <sstream>
-#include <stdarg.h>
-
-#include <squirrel.h> 
-#include <sqstdio.h> 
-#include <sqstdaux.h> 
-
-#include "menu_manager.hpp"
-#include "font/fonts.hpp"
-#include "engine/sector.hpp"
-#include "console.hpp"
-#include "engine/game_object.hpp"
-#include "objects/player.hpp"
-#include "tile/tile_map.hpp"
-#include "screen_manager.hpp"
-#include "view.hpp"
-#include "timer.hpp"
-#include "energy_bar.hpp"
-#include "dialog_manager.hpp"
-#include "windstille_main.hpp"
-#include "display/scene_context.hpp"
-#include "scripting/util.hpp"
-#include "scripting/wrapper.hpp"
-#include "input/input_manager.hpp"
-#include "particles/particle_system.hpp"
-#include "particles/spark_drawer.hpp"
-#include "particles/surface_drawer.hpp"
-#include "engine/script_manager.hpp"
-#include "sound/sound_manager.hpp"
-#include "conversation.hpp"
-#include "collision/collision_engine.hpp"
-#include "objects/test_object.hpp"
-#include "inventory.hpp"
-#include "display/surface_manager.hpp"
-#include "display/surface.hpp"
-#include "display/display.hpp"
-#include "pda.hpp"
-
-#include "game_session.hpp"
-
-GameSession* GameSession::current_ = 0; 
-
-class GameSessionImpl
-{
-public:
-  SceneContext sc;
-
-  float fadeout_value;
-  float fade_time;
-  Sector* sector;
-  View    view;
-
-  std::string filename;
-
-  bool pause;
-  
-  /** Amount of how far the cutscene bars are visible, 0.0 means not
-      visible, 1.0 fully visible. */
-  float cutscene_value;
-
-  /** True if cutscene is active, false otherwhise */
-  bool  cutscene_mode;
-
-  enum { NO_ACTION, QUIT_ACTION, CHANGE_SECTOR_ACTION } next_action;
-  
-  enum { FADEIN, RUNNING, FADEOUT } fade_state;
-
-  Color fade_color;
-
-  // GUI Elements
-  ControllerHelpWindow controller_help_window;
-  EnergyBar     energy_bar;
-
-  // Active GUI Elements
-  DialogManager dialog_manager;
-  Conversation  conversation;
-  Inventory     inventory;
-  PDA           pda;
-
-  Screen* current_gui;
-
-  GameSessionImpl() {
-    sector         = 0;
-    current_gui    = 0;
-    cutscene_mode  = false;
-    cutscene_value = 0.0f;
-    fade_color     = Color(0.0f, 0.0f, 0.0f, 1.0f);
-    fade_state     = RUNNING;
-    fadeout_value  = 0.0f;
-    fade_time      = 1.0f;
-  }
-  ~GameSessionImpl() {
-    delete sector;
-  }
-
-  void draw();
-  void update(float delta, const Controller& controller);
-  void handle_event(const SDL_Event& event);
-};
-
-GameSession::GameSession(const std::string& arg_filename)
-  : impl(new GameSessionImpl())
-{
-  impl->filename = arg_filename;
-
-  if (debug) std::cout << "Creating new GameSession" << std::endl;
-  current_ = this;
-
-  impl->pause = false;
-  
-  if (1)
-    script_manager->run_script_file("scripts/init_script_vars.nut");
-    
-  set_sector(impl->filename);
-}
-
-GameSession::~GameSession()
-{
-}
-
-void
-GameSessionImpl::draw()
-{
-  view.draw(sc);
-
-  // Render the scene to the screen
-  sc.render();
-
-  if (!cutscene_mode)
-    {
-      // Draw HUD
-      energy_bar.draw();
-      controller_help_window.draw();
-    }
-
-  if (cutscene_mode || cutscene_value > 0.0f)
-    {
-      int border_size = static_cast<int>(75 * cutscene_value);
-      Display::fill_rect(Rect(Point(0, 0), Size(Display::get_width(), border_size)), 
-                         Color(0.0f, 0.0f, 0.0f, cutscene_value));
-      Display::fill_rect(Rect(Point(0, Display::get_height() - border_size), Size(Display::get_width(), border_size)), 
-                         Color(0.0f, 0.0f, 0.0f, cutscene_value));
-    }
-
-  if (current_gui)
-    current_gui->draw();
-
-  if (fade_state == FADEOUT || fade_state == FADEIN)
-    {
-      Display::fill_rect(Rect(0, 0, 
-                               Display::get_width(), Display::get_height()),
-                         Color(fade_color.r, fade_color.g, fade_color.b, fadeout_value));
-    }
-
-  if (pause)
-    {
-      if ((SDL_GetTicks() / 1000) % 2)
-        Fonts::vera20->draw(Display::get_width()/2, Display::get_height()/2, "Pause");
-    }
-}
-
-void
-GameSessionImpl::update(float delta, const Controller& controller)
-{  
-  if (cutscene_mode)
-    cutscene_value += delta * 0.75f;
-  else
-    cutscene_value -= delta * 0.75f;
-
-  if (cutscene_value > 1.0f)
-    cutscene_value = 1.0f;
-  else if (cutscene_value < 0.0f)
-    cutscene_value = 0.0f;
-
-  // if (controller.button_was_pressed(PAUSE_BUTTON))
-  // pause = !pause;
-
-  Uint8 *keystate = SDL_GetKeyState(NULL);
-
-  if(keystate[SDLK_KP1])
-    game_speed *= 1.0 - delta;
-  if(keystate[SDLK_KP3])
-    game_speed *= 1.0 + delta;
-  if(keystate[SDLK_KP5])
-    game_speed = 1.0;
- 
-  delta *= game_speed;
-
-  if (!pause)
-    {
-      game_time += delta;
-      script_manager->update();
-      
-      view.update(delta, controller);
-      sector->update(delta);
-  
-      switch (fade_state)
-        {
-        case FADEIN:
-          if (fadeout_value <= 0.0f)
-            {
-              fade_state = RUNNING;
-              fadeout_value = 0.0f;
-              script_manager->fire_wakeup_event(ScriptManager::FADE_DONE);
-            }
-          else
-            {
-              fadeout_value -= delta * fade_time;
-            }
-          break;
-
-        case FADEOUT:
-          if (fadeout_value >= 1.0f)
-            { 
-              fadeout_value = 1.0f;
-              script_manager->fire_wakeup_event(ScriptManager::FADE_DONE);
-
-              switch(next_action)
-                {
-                case CHANGE_SECTOR_ACTION:
-                  GameSession::current()->set_sector(filename);
-                  break;
-
-                case QUIT_ACTION:
-                  screen_manager.quit();
-                  break;
-
-                default:
-                  break;
-                }
-            }
-          else
-            {
-              fadeout_value += delta * fade_time;
-            }
-          break;
-
-        case RUNNING:
-          energy_bar.update(delta, controller);
-          if (current_gui)
-            current_gui->update(delta, controller);
-          break;
-        }
-      
-      controller_help_window.update(delta, controller);
-    }
-
-  if (controller.button_was_pressed(PDA_BUTTON))
-    {
-      if (current_gui == &pda)
-        current_gui = 0;
-      else
-        current_gui = &pda;
-    }
-  else if (controller.button_was_pressed(INVENTORY_BUTTON))
-    {
-      if (current_gui == &inventory)
-        current_gui = 0;
-      else
-        current_gui = &inventory;
-    }
-  else if (controller.button_was_pressed(ESCAPE_BUTTON) ||
-           controller.button_was_pressed(PAUSE_BUTTON))
-    {
-      menu_manager.display_pause_menu();
-    }
-}
-
-void
-GameSession::change_sector(const std::string& arg_filename)
-{
-  impl->filename = arg_filename;
- 
-  sound_manager->stop_music();
-
-  if (impl->fade_state == GameSessionImpl::FADEOUT)
-    {
-      GameSession::current()->set_sector(impl->filename);
-    }
-  else
-    {
-      impl->fade_time     = 1.0f;
-      impl->fade_state    = GameSessionImpl::FADEOUT;
-      impl->next_action   = GameSessionImpl::CHANGE_SECTOR_ACTION;
-    }
-}
-
-void
-GameSession::set_sector(const std::string& )
-{
-  delete impl->sector;
-  impl->sector = new Sector(impl->filename);
- 
-  GameObject::set_world(impl->sector);
-
-  //FIXME: does the TestObject class still need to exist?
-  //sector->add(new TestObject());
-  
-  impl->sector->activate();
-  
-  if (debug) std::cout << "Finished changing sector" << std::endl;
-}
-
-void
-GameSessionImpl::handle_event(const SDL_Event& event)
-{
-  switch(event.type)
-  {
-    case SDL_KEYDOWN:
-    case SDL_KEYUP:
-      if (event.key.state)
-        {    
-          switch (event.key.keysym.sym)
-            {
-            case SDLK_1:
-              sc.set_render_mask(sc.get_render_mask() ^ SceneContext::COLORMAP);
-              console << "Toggled COLORMAP: " << ((sc.get_render_mask() & SceneContext::COLORMAP) > 0) << std::endl;
-              break;
-
-            case SDLK_2:
-              sc.set_render_mask(sc.get_render_mask() ^ SceneContext::LIGHTMAP);
-              console << "Toggled LIGHTMAP: " << ((sc.get_render_mask() & SceneContext::LIGHTMAP) > 0) << std::endl;
-              break;
-      
-            case SDLK_3:
-              sc.set_render_mask(sc.get_render_mask() ^ SceneContext::HIGHLIGHTMAP);
-              console << "Toggled HIGHLIGHTMAP: " << ((sc.get_render_mask() & SceneContext::HIGHLIGHTMAP) > 0) << std::endl;
-              break;      
-  
-            case SDLK_4:
-              sc.set_render_mask(sc.get_render_mask() ^ SceneContext::LIGHTMAPSCREEN);
-              console << "Toggled LIGHTMAP: " << ((sc.get_render_mask() & SceneContext::LIGHTMAPSCREEN) > 0) << std::endl;
-              break;
-
-            case SDLK_5:
-              sc.set_render_mask(sc.get_render_mask() ^ SceneContext::BLURMAP);
-              console << "Toggled blurmap: " << ((sc.get_render_mask() & SceneContext::BLURMAP) > 0) << std::endl;
-              break;
-
-
-            case SDLK_c:
-              if (debug) {
-                collision_debug = !collision_debug;
-                console << "Collision Debugging " << (collision_debug ? "enabled" : "disabled") << std::endl;
-              }
-              break;
-
-            case SDLK_F2:
-              menu_manager.display_debug_menu();
-              break;
-        
-            default:
-              break;
-            }
-        }
-      break;
-        
-    case SDL_MOUSEBUTTONDOWN:
-      {
-        Vector real_pos = GameSession::current()->get_view()->screen_to_world(Vector(event.button.x,
-                                                                                  event.button.y));      
-        console << "Click at: " << int(real_pos.x) << ", " << int(real_pos.y) << std::endl;
-      }
-      break;
-  }
-}
-
-void
-GameSession::quit()
-{
-  if (impl->fade_state != GameSessionImpl::FADEOUT)
-    {
-      sound_manager->stop_music();
-      impl->fade_state  = GameSessionImpl::FADEOUT;
-      impl->fade_time   = 1.0f;
-      impl->next_action = GameSessionImpl::QUIT_ACTION;
-    }
-}
-
-PDA&
-GameSession::get_pda()
-{
-  return impl->pda;
-}
-
-void
-GameSession::draw()
-{
-  impl->draw();
-}
-
-void
-GameSession::update(float delta, const Controller& controller)
-{
-  impl->update(delta, controller);
-}
-
-void
-GameSession::handle_event(const SDL_Event& event)
-{
-  impl->handle_event(event);
-}
-
-View*
-GameSession::get_view() 
-{
-  return &impl->view; 
-}
-
-void
-GameSession::set_control_state(ControlState state) 
-{
-  switch(state)
-    {
-    case DIALOG:
-      impl->current_gui = &impl->dialog_manager;
-      break;
-
-    case CONVERSATION:
-      impl->current_gui = &impl->conversation;
-      break;
-
-    case GAME:
-      impl->current_gui = 0;
-      break;
-    }
-}
-
-bool
-GameSession::is_active() const
-{
-  return (impl->current_gui == 0);
-}
-
-void
-GameSession::set_cutscene_mode(bool t)
-{
-  if (t != impl->cutscene_mode)
-    {
-      impl->cutscene_mode  = t;
-    }
-}
-
-void
-GameSession::fadeout(float time, const Color& color)
-{
-  if (time == 0.0)
-    { // directly go to a state of solid color, no fading
-      impl->fadeout_value  = 1.0f;
-      impl->fade_color  = color;
-      impl->fade_state  = GameSessionImpl::FADEOUT;
-      impl->next_action = GameSessionImpl::NO_ACTION;
-    }
-  else
-    {
-      impl->fade_time   = 1.0f/time;
-      impl->fade_color  = color;
-      impl->fade_state  = GameSessionImpl::FADEOUT;
-      impl->next_action = GameSessionImpl::NO_ACTION;
-    }
-}
-
-void
-GameSession::fadein(float time)
-{
-  impl->fade_time   = 1.0f/time;
-  impl->fade_state  = GameSessionImpl::FADEIN;
-  impl->next_action = GameSessionImpl::NO_ACTION;
-}
-
-SceneContext*
-GameSession::get_scene_context()
-{
-  return &(impl->sc);
-}
-
-/* EOF */

Deleted: trunk/windstille/src/game_session.hpp
===================================================================
--- trunk/windstille/src/game_session.hpp	2009-02-11 22:04:00 UTC (rev 2467)
+++ trunk/windstille/src/game_session.hpp	2009-02-12 08:17:19 UTC (rev 2468)
@@ -1,93 +0,0 @@
-/*
-**  Windstille - A Sci-Fi Action-Adventure Game
-**  Copyright (C) 2000,2005 Ingo Ruhnke <grumbel at gmx.de>
-**
-**  This program is free software: you can redistribute it and/or modify
-**  it under the terms of the GNU General Public License as published by
-**  the Free Software Foundation, either version 3 of the License, or
-**  (at your option) any later version.
-**  
-**  This program is distributed in the hope that it will be useful,
-**  but WITHOUT ANY WARRANTY; without even the implied warranty of
-**  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
-**  GNU General Public License for more details.
-**  
-**  You should have received a copy of the GNU General Public License
-**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
-*/
-
-#ifndef HEADER_WINDSTILLE_GAME_SESSION_HPP
-#define HEADER_WINDSTILLE_GAME_SESSION_HPP
-
-#include <string>
-#include <squirrel.h>
-#include "display/scene_context.hpp"
-#include "console.hpp"
-#include "screen.hpp"
-#include "controller_help_window.hpp"
-#include "sprite2d/sprite.hpp"
-#include "globals.hpp"
-
-class PDA;
-class EnergyBar;
-class View;
-class Sector;
-class Player;
-class DialogManager;
-class Conversation;
-class Inventory;
-
-class GameSessionImpl;
-
-class GameSession : public Screen
-{
-public:
-  enum ControlState { DIALOG, GAME, CONVERSATION };
-private:
-  static GameSession* current_; 
-public:
-  static GameSession* current() { return current_; } 
-
-  GameSession (const std::string& arg_filename);
-  ~GameSession ();
-
-  View* get_view();
-
-  /** Return true when the gameplay is currently active, return false
-      if PDA, Conversation or other things are active */
-  bool is_active() const;
-
-  void set_control_state(ControlState state);
-
-  /** Switches the sector instantly without fadeout */
-  void set_sector(const std::string& filename);
-
-  /** Fades out then switches sectors and fades in again */
-  void change_sector(const std::string& filename);
-
-  /** Set the GameSession into a mode for cutscenes, this means for
-      most part to switch into a 16:9 viewmode with black borders */
-  void set_cutscene_mode(bool t);
-
-  /** \a time Time in seconds till the fade is complete 
-      \a color Color to which the screen should fade */
-  void fadeout(float time, const Color& color);
-  void fadein(float time);
-
-  void draw();
-  void update(float delta, const Controller& controller);
-  void handle_event(const SDL_Event& event);
-
-  PDA& get_pda();
-
-  void quit();
-
-  SceneContext* get_scene_context();
-
-private:
-  boost::shared_ptr<GameSessionImpl> impl;
-};
-
-#endif
-
-/* EOF */

Deleted: trunk/windstille/src/geometry_test.cpp
===================================================================
--- trunk/windstille/src/geometry_test.cpp	2009-02-11 22:04:00 UTC (rev 2467)
+++ trunk/windstille/src/geometry_test.cpp	2009-02-12 08:17:19 UTC (rev 2468)
@@ -1,130 +0,0 @@
-/*
-**  Windstille - A Sci-Fi Action-Adventure Game
-**  Copyright (C) 2007 Ingo Ruhnke <grumbel at gmx.de>
-**
-**  This program is free software: you can redistribute it and/or modify
-**  it under the terms of the GNU General Public License as published by
-**  the Free Software Foundation, either version 3 of the License, or
-**  (at your option) any later version.
-**  
-**  This program is distributed in the hope that it will be useful,
-**  but WITHOUT ANY WARRANTY; without even the implied warranty of
-**  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
-**  GNU General Public License for more details.
-**  
-**  You should have received a copy of the GNU General Public License
-**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
-*/
-
-#include <GL/glew.h>
-#include <GL/gl.h>
-#include "geometry_test.hpp"
-#include "math/rect.hpp"
-#include "console.hpp"
-#include "math/size.hpp"
-#include "controller_def.hpp"
-#include "input/controller.hpp"
-#include "screen_manager.hpp"
-#include "display/display.hpp"
-
-GeometryTest::GeometryTest()
-{
-  point_count = 0;
-  had_prev_collision = true;
-
-  line1 = Line(Vector(300, 300),
-               Vector(500, 300));
-
-  line2 = Line(Vector(400, 200),
-               Vector(400, 400));
-
-  cursor  = line1.p1;
-  cursor2 = line1.p2;
-}
-
-void
-GeometryTest::draw()
-{
-  glClearColor(0.0f, 0.0f, 0.0f, 1.0f);
-  glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);
-
-  Display::draw_line(line1, Color(0.0f, 1.0f, 0.0f));
-  Display::draw_line(line2, Color(0.0f, 1.0f, 0.0f));
-
-  Display::fill_rect(Rectf(cursor - Vector(2,2), Sizef(5,5)),  Color(1.0f, 0.0f, 1.0f));
-  Display::fill_rect(Rectf(cursor2 - Vector(2,2), Sizef(5,5)), Color(1.0f, 1.0f, 0.0f));
-
-  Display::fill_rect(Rectf(collision_point - Vector(3,3), Sizef(7,7)), Color(1.0f, 1.0f, 1.0f));
-
-  // Try vector projection
-  Vector a(line1.p2 - line1.p1);
-  Vector b(line2.p2 - line2.p1);
-  Vector c(a.project(b));
-  
-  Display::draw_line(line1.p1, line1.p1 + c, Color(1.0f, 1.0f, 1.0f, 0.5f));
-
-  int segments = std::max(0, int(cursor.y / 10));
-
-  Display::fill_arc(Vector(200, 200), 100.0f, cursor.x, cursor2.x, Color(1.0f, 1.0f, 1.0f, 0.5f), segments);
-  Display::draw_arc(Vector(200, 200), 100.0f, cursor.x, cursor2.x, Color(1.0f, 1.0f, 1.0f), segments);
-  Display::draw_circle(Vector(200, 200), 128.0f, Color(1.0f, 1.0f, 1.0f), segments);
-}
-
-void
-GeometryTest::update(float delta, const Controller& controller)
-{
-  if (controller.button_was_pressed(ESCAPE_BUTTON) ||
-      controller.button_was_pressed(PAUSE_BUTTON))
-    {
-      screen_manager.pop_screen();
-    }
-
-  cursor.x += controller.get_axis_state(X_AXIS) * 500.0f * delta;
-  cursor.y += controller.get_axis_state(Y_AXIS) * 500.0f * delta;
-
-  cursor2.x += controller.get_axis_state(X2_AXIS) * 500.0f * delta;
-  cursor2.y += controller.get_axis_state(Y2_AXIS) * 500.0f * delta;
-
-  if (controller.button_was_pressed(PRIMARY_BUTTON))
-    {
-      if (point_count == 0) {
-        cursor  = line2.p1;
-        cursor2 = line2.p2;
-      } else {
-        cursor  = line1.p1;
-        cursor2 = line1.p2;
-      }
-
-      point_count += 1;
-      if (point_count > 1)
-        point_count = 0;
-    }
-
-
-  if (point_count == 0)
-    {
-      line1.p1 = cursor;
-      line1.p2 = cursor2;
-    }
-  else if (point_count == 1)
-    {
-      line2.p1 = cursor;
-      line2.p2 = cursor2;
-    }
-
-  if (line1.intersect(line2, collision_point))
-    {
-      if (!had_prev_collision)
-        console << "Collision" << std::endl;
-      had_prev_collision = true;
-    }
-  else
-    {
-      if (had_prev_collision)
-        console << "No Collision" << std::endl;
-      had_prev_collision = false;
-      collision_point = Vector(32, 32);
-    }
-}
-
-/* EOF */

Deleted: trunk/windstille/src/geometry_test.hpp
===================================================================
--- trunk/windstille/src/geometry_test.hpp	2009-02-11 22:04:00 UTC (rev 2467)
+++ trunk/windstille/src/geometry_test.hpp	2009-02-12 08:17:19 UTC (rev 2468)
@@ -1,53 +0,0 @@
-/*
-**  Windstille - A Sci-Fi Action-Adventure Game
-**  Copyright (C) 2007 Ingo Ruhnke <grumbel at gmx.de>
-**
-**  This program is free software: you can redistribute it and/or modify
-**  it under the terms of the GNU General Public License as published by
-**  the Free Software Foundation, either version 3 of the License, or
-**  (at your option) any later version.
-**  
-**  This program is distributed in the hope that it will be useful,
-**  but WITHOUT ANY WARRANTY; without even the implied warranty of
-**  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
-**  GNU General Public License for more details.
-**  
-**  You should have received a copy of the GNU General Public License
-**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
-*/
-
-#ifndef HEADER_WINDSTILLE_GEOMETRY_TEST_HPP
-#define HEADER_WINDSTILLE_GEOMETRY_TEST_HPP
-
-#include "screen.hpp"
-#include "math/vector.hpp"
-#include "math/line.hpp"
-
-/** */
-class GeometryTest : public Screen
-{
-private:
-  Vector cursor;
-  Vector cursor2;
-  Vector collision_point;
-
-  int point_count;
-
-  Line line1;
-  Line line2;
-  bool had_prev_collision;
-
-public:
-  GeometryTest();
-
-  void draw();
-  void update(float delta, const Controller& controller);
-
-private:
-  GeometryTest (const GeometryTest&);
-  GeometryTest& operator= (const GeometryTest&);
-};
-
-#endif
-
-/* EOF */

Deleted: trunk/windstille/src/graphic_context_state.cpp
===================================================================
--- trunk/windstille/src/graphic_context_state.cpp	2009-02-11 22:04:00 UTC (rev 2467)
+++ trunk/windstille/src/graphic_context_state.cpp	2009-02-12 08:17:19 UTC (rev 2468)
@@ -1,193 +0,0 @@
-//  Flexlay - A Generic 2D Game Editor
-//  Copyright (C) 2002 Ingo Ruhnke <grumbel at gmx.de>
-//
-//  This program is free software; you can redistribute it and/or
-//  modify it under the terms of the GNU General Public License
-//  as published by the Free Software Foundation; either version 2
-//  of the License, or (at your option) any later version.
-//
-//  This program is distributed in the hope that it will be useful,
-//  but WITHOUT ANY WARRANTY; without even the implied warranty of
-//  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
-//  GNU General Public License for more details.
-//
-//  You should have received a copy of the GNU General Public License
-//  along with this program; if not, write to the Free Software
-//  Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA.
-
-#include <math.h>
-#include <GL/glew.h>
-#include <GL/gl.h>
-#include "display/scene_context.hpp"
-#include "graphic_context_state.hpp"
-
-class GraphicContextStateImpl
-{
-public:
-  int width;
-  int height;
-  
-  Vector offset;
-  float zoom;
-  float rotation;
-};
-
-GraphicContextState::GraphicContextState()
-  : impl(new GraphicContextStateImpl())
-{
-  impl->width  = 1;
-  impl->height = 1; 
-  impl->offset = Vector(0,0);
-  impl->zoom   = 1.0f;
-  impl->rotation = 0;
-}
-
-GraphicContextState::GraphicContextState(int w, int h)
-  : impl(new GraphicContextStateImpl())
-{  
-  impl->width  = w;
-  impl->height = h;
-  impl->offset = Vector(0,0); 
-  impl->zoom   = 1.0f;
-  impl->rotation = 0;
-}
-
-void
-GraphicContextState::set_size(int w, int h)
-{
-  impl->width  = w;
-  impl->height = h;
-}
-
-void
-GraphicContextState::push(SceneContext& sc)
-{
-  sc.push_modelview();
-
-  sc.translate(impl->width/2, impl->height/2);
-  sc.rotate(impl->rotation);
-  sc.translate(-impl->width/2, -impl->height/2);
-
-  sc.scale(get_zoom(), get_zoom());
-  sc.translate(impl->offset.x, impl->offset.y);
-}
-
-void
-GraphicContextState::pop(SceneContext& sc)
-{
-  sc.pop_modelview();
-}
-
-Rectf
-GraphicContextState::get_clip_rect()
-{
-  return Rectf(Vector(-impl->offset.x,
-                         -impl->offset.y),
-               Sizef(get_width()  / impl->zoom,
-                     get_height() / impl->zoom));
-}
-
-void
-GraphicContextState::set_pos(const Vector& pos)
-{
-  impl->offset.x = -pos.x + (get_width()/2  / impl->zoom);
-  impl->offset.y = -pos.y + (get_height()/2 / impl->zoom);
-}
-
-Vector
-GraphicContextState::get_pos() const
-{
-  return Vector(-impl->offset.x + (get_width()/2  / impl->zoom),
-                   -impl->offset.y + (get_height()/2  / impl->zoom));
-}
-
-void
-GraphicContextState::set_zoom(const Vector& pos, float z)
-{
-  float old_zoom = impl->zoom;
-  set_zoom(z);
-  impl->offset.x = pos.x/impl->zoom - pos.x/old_zoom + impl->offset.x;
-  impl->offset.y = pos.y/impl->zoom - pos.y/old_zoom + impl->offset.y;
-}
-
-void
-GraphicContextState::set_zoom(float z)
-{
-  impl->zoom = z;
-}
-
-float
-GraphicContextState::get_zoom()
-{
-  return impl->zoom;
-}
-
-void
-GraphicContextState::zoom_to (const Rectf& rect)
-{
-  float center_x = (rect.left + rect.right) / 2.0f;
-  float center_y = (rect.top + rect.bottom) / 2.0f;
-
-  float width  = rect.right - rect.left;
-  float height = rect.bottom - rect.top;
-  float screen_relation = float(get_height())/float(get_width ());
-  float rect_relation   = height/width; 
-  
-  //std::cout << "Screen: " << screen_relation << " Zoom: " << rect_relation << std::endl;
-  if (rect_relation < screen_relation) // take width, ignore height
-    {
-      impl->zoom = get_width()/width; 
-    }
-  else // take height, ignore width
-    {
-      impl->zoom = get_height()/height;
-    }
-
-  impl->offset.x = (get_width()  / (2*impl->zoom)) - center_x;
-  impl->offset.y = (get_height() / (2*impl->zoom)) - center_y;
-}
-
-Vector
-GraphicContextState::screen_to_world(const Vector& pos_)
-{
-  Vector pos(pos_.x, pos_.y);
-  float sa = sin(-impl->rotation/180.0f*M_PI);
-  float ca = cos(-impl->rotation/180.0f*M_PI);
-
-  float dx = pos.x - impl->width/2;
-  float dy = pos.y - impl->height/2;
-
-  pos.x = impl->width/2  + (ca * dx - sa * dy);
-  pos.y = impl->height/2 + (sa * dx + ca * dy);
-
-  Vector p((float(pos.x) / impl->zoom) - impl->offset.x, 
-              (float(pos.y) / impl->zoom) - impl->offset.y);
-
-  return p;
-}
-
-void
-GraphicContextState::set_rotation(float angle)
-{
-  impl->rotation = angle;
-}
-
-float
-GraphicContextState::get_rotation()
-{
-  return impl->rotation;
-}
-
-int
-GraphicContextState::get_width()  const 
-{
-  return impl->width; 
-}
-
-int
-GraphicContextState::get_height() const 
-{ 
-  return impl->height; 
-}
-
-/* EOF */

Deleted: trunk/windstille/src/graphic_context_state.hpp
===================================================================
--- trunk/windstille/src/graphic_context_state.hpp	2009-02-11 22:04:00 UTC (rev 2467)
+++ trunk/windstille/src/graphic_context_state.hpp	2009-02-12 08:17:19 UTC (rev 2468)
@@ -1,77 +0,0 @@
-//  Flexlay - A Generic 2D Game Editor
-//  Copyright (C) 2002 Ingo Ruhnke <grumbel at gmx.de>
-//
-//  This program is free software; you can redistribute it and/or
-//  modify it under the terms of the GNU General Public License
-//  as published by the Free Software Foundation; either version 2
-//  of the License, or (at your option) any later version.
-//
-//  This program is distributed in the hope that it will be useful,
-//  but WITHOUT ANY WARRANTY; without even the implied warranty of
-//  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
-//  GNU General Public License for more details.
-// 
-//  You should have received a copy of the GNU General Public License
-//  along with this program; if not, write to the Free Software
-//  Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA.
-
-#ifndef HEADER_WINDSTILLE_GRAPHIC_CONTEXT_STATE_HPP
-#define HEADER_WINDSTILLE_GRAPHIC_CONTEXT_STATE_HPP
-
-#include "math/rect.hpp"
-#include "math/vector.hpp"
-#include <boost/shared_ptr.hpp>
-
-class SceneContext;
-
-class GraphicContextStateImpl;
-
-/** Helper class for capturing the state of a GraphicContext, with
-    additional convenience functions to make handling GraphicContexts
-    easier */
-class GraphicContextState
-{
-public:
-  GraphicContextState();
-  GraphicContextState(int w, int h);
-
-  void set_size(int w, int h);
-
-  void push(SceneContext& sc);
-  void pop(SceneContext& sc);
-
-  /** Return a rectangle in world coordinates that represents the area
-      visible on the screen */
-  Rectf get_clip_rect();
-
-  int get_width()  const;
-  int get_height() const;
-
-  /** Set the current rotation angel */
-  void  set_rotation(float angle);
-
-  /** Return the current rotation angel */
-  float get_rotation();
-
-  /** Move the center of the visible area to pos */
-  void      set_pos(const Vector& pos);
-  Vector get_pos() const;
-
-  /** Set zoom to z, while ensuring that the screen position \a pos
-      (normaly the position of the mouse pointer) stays in the same
-      position even after zoomed in/out */
-  void  set_zoom(const Vector& pos, float z);
-  void  set_zoom(float z);
-  float get_zoom(); 
-
-  void zoom_to (const Rectf& rect);
-
-  Vector screen_to_world(const Vector& pos);
-
-private:
-  boost::shared_ptr<GraphicContextStateImpl> impl;
-};
-
-#endif
-
-/* EOF */

Modified: trunk/windstille/src/gui/gui_manager.cpp
===================================================================
--- trunk/windstille/src/gui/gui_manager.cpp	2009-02-11 22:04:00 UTC (rev 2467)
+++ trunk/windstille/src/gui/gui_manager.cpp	2009-02-12 08:17:19 UTC (rev 2468)
@@ -20,7 +20,7 @@
 #include "button.hpp"
 #include "slider.hpp"
 #include "root_component.hpp"
-#include "screen_manager.hpp"
+#include "screen/screen_manager.hpp"
 #include "grid_component.hpp"
 #include "tab_component.hpp"
 #include "list_view.hpp"

Modified: trunk/windstille/src/gui/gui_manager.hpp
===================================================================
--- trunk/windstille/src/gui/gui_manager.hpp	2009-02-11 22:04:00 UTC (rev 2467)
+++ trunk/windstille/src/gui/gui_manager.hpp	2009-02-12 08:17:19 UTC (rev 2468)
@@ -19,7 +19,7 @@
 #ifndef HEADER_WINDSTILLE_GUI_GUI_MANAGER_HPP
 #define HEADER_WINDSTILLE_GUI_GUI_MANAGER_HPP
 
-#include "screen.hpp"
+#include "screen/screen.hpp"
 
 namespace gui {
 

Modified: trunk/windstille/src/gui/text_view.hpp
===================================================================
--- trunk/windstille/src/gui/text_view.hpp	2009-02-11 22:04:00 UTC (rev 2467)
+++ trunk/windstille/src/gui/text_view.hpp	2009-02-12 08:17:19 UTC (rev 2468)
@@ -19,7 +19,7 @@
 #ifndef HEADER_WINDSTILLE_GUI_TEXT_VIEW_HPP
 #define HEADER_WINDSTILLE_GUI_TEXT_VIEW_HPP
 
-#include "text_area.hpp"
+#include "display/text_area.hpp"
 #include "component.hpp"
 
 namespace gui {

Copied: trunk/windstille/src/hud/controller_help_window.cpp (from rev 2466, trunk/windstille/src/controller_help_window.cpp)
===================================================================
--- trunk/windstille/src/controller_help_window.cpp	2009-02-11 21:56:29 UTC (rev 2466)
+++ trunk/windstille/src/hud/controller_help_window.cpp	2009-02-12 08:17:19 UTC (rev 2468)
@@ -0,0 +1,114 @@
+/*
+**  Windstille - A Sci-Fi Action-Adventure Game
+**  Copyright (C) 2005 Ingo Ruhnke <grumbel at gmx.de>
+**
+**  This program is free software: you can redistribute it and/or modify
+**  it under the terms of the GNU General Public License as published by
+**  the Free Software Foundation, either version 3 of the License, or
+**  (at your option) any later version.
+**  
+**  This program is distributed in the hope that it will be useful,
+**  but WITHOUT ANY WARRANTY; without even the implied warranty of
+**  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+**  GNU General Public License for more details.
+**  
+**  You should have received a copy of the GNU General Public License
+**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
+*/
+
+#include "input/input_manager.hpp"
+#include "display/display.hpp"
+#include "display/text_area.hpp"
+#include "font/fonts.hpp"
+#include "controller_help_window.hpp"
+
+ControllerHelpWindow* ControllerHelpWindow::current_ = 0;
+
+class ControllerHelpWindowImpl
+{
+public:
+  TextArea* text_area;
+  bool active;
+};
+
+ControllerHelpWindow::ControllerHelpWindow()
+  : impl(new ControllerHelpWindowImpl)
+{
+  current_ = this;
+  int width  = 200;
+  int height = 120;
+  
+  impl->active = false;
+  impl->text_area = new TextArea(Rect(Point(Display::get_width() - width - 16,
+                                            Display::get_height() - height - 16),
+                                      Size(width, height)), false);
+  impl->text_area->set_font(Fonts::ttffont);
+  impl->text_area->set_text("Control Help\n"
+                            "------------\n"
+                            "walk: left/right\n"
+                            "duck: down\n\n"
+                            "primary/run:    s\n"
+                            "secondary/jump: d\n"
+                            "tertiary:       a\n"
+                            "pda:            w\n"
+                            );
+}
+
+void
+ControllerHelpWindow::draw()
+{
+  if (!impl->active)
+    return;
+    
+  const Rectf& rect = impl->text_area->get_rect().grow(8.0f);
+
+  Display::fill_rounded_rect(rect, 16.0f, Color(0.3f, 0.3f, 0.5f, 0.5f));
+  Display::draw_rounded_rect(rect, 16.0f, Color(1.0f, 1.0f, 1.0f, 0.5f));
+  impl->text_area->draw();
+
+  Controller controller = InputManager::get_controller();
+  
+  Rectf crect(Vector(rect.right - 100, rect.top - 100 - 8.0f),
+              Size(100, 100));
+
+  Display::fill_rounded_rect(crect, 10.0f, Color(1.0f, 1.0f, 1.0f, 0.2f));
+  Display::draw_rounded_rect(crect, 10.0f, Color(1.0f, 1.0f, 1.0f, 0.5f));
+
+  Vector pos(crect.left + crect.get_width()/2  + controller.get_axis_state(X_AXIS) * (crect.get_width()-16.0f)/2,
+             crect.top  + crect.get_height()/2 + controller.get_axis_state(Y_AXIS)   * (crect.get_width()-16.0f)/2);
+
+  Display::fill_circle(pos, 10.0f, Color(0.8f, 0, 0));
+  Display::draw_circle(pos, 10.0f, Color(1.0f, 0, 0));
+
+  for(int i = 0; i < 6; ++i)
+    {
+      if (controller.get_button_state(i))
+        {
+          Display::fill_circle(Vector(crect.left - 16.0f, crect.top + (crect.get_height()-20)/3 * i + 10.0f),
+                               10.0f, Color(0.8f, 0, 0));
+          Display::draw_circle(Vector(crect.left - 16.0f, crect.top + (crect.get_height()-20)/3 * i + 10.0f),
+                               10.0f, Color(1.0f, 0.0f, 0.0f));
+        }
+      else
+        {
+          Display::fill_circle(Vector(crect.left - 16.0f, crect.top + (crect.get_height()-20)/3 * i + 10.0f),
+                               10.0f, Color(1.0f, 1.0f, 1.0f, 0.2f));
+          Display::draw_circle(Vector(crect.left - 16.0f, crect.top + (crect.get_height()-20)/3 * i + 10.0f),
+                               10.0f,  Color(1.0f, 1.0f, 1.0f, 0.5f));
+        }
+    }
+}
+
+void
+ControllerHelpWindow::update(float delta, const Controller& )
+{
+  impl->text_area->update(delta);
+}
+
+void
+ControllerHelpWindow::set_active(bool active)
+{
+  impl->active = active;
+}
+
+/* EOF */


Property changes on: trunk/windstille/src/hud/controller_help_window.cpp
___________________________________________________________________
Name: svn:mergeinfo
   + 

Copied: trunk/windstille/src/hud/controller_help_window.hpp (from rev 2466, trunk/windstille/src/controller_help_window.hpp)
===================================================================
--- trunk/windstille/src/controller_help_window.hpp	2009-02-11 21:56:29 UTC (rev 2466)
+++ trunk/windstille/src/hud/controller_help_window.hpp	2009-02-12 08:17:19 UTC (rev 2468)
@@ -0,0 +1,45 @@
+/*
+**  Windstille - A Sci-Fi Action-Adventure Game
+**  Copyright (C) 2005 Ingo Ruhnke <grumbel at gmx.de>
+**
+**  This program is free software: you can redistribute it and/or modify
+**  it under the terms of the GNU General Public License as published by
+**  the Free Software Foundation, either version 3 of the License, or
+**  (at your option) any later version.
+**  
+**  This program is distributed in the hope that it will be useful,
+**  but WITHOUT ANY WARRANTY; without even the implied warranty of
+**  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+**  GNU General Public License for more details.
+**  
+**  You should have received a copy of the GNU General Public License
+**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
+*/
+
+#ifndef HEADER_WINDSTILLE_CONTROLLER_HELP_WINDOW_HPP
+#define HEADER_WINDSTILLE_CONTROLLER_HELP_WINDOW_HPP
+
+#include "screen/screen.hpp"
+#include <boost/shared_ptr.hpp>
+
+class ControllerHelpWindowImpl;
+
+/** */
+class ControllerHelpWindow : public Screen
+{
+public:
+  ControllerHelpWindow();
+
+  void draw();
+  void update(float delta, const Controller& controller);
+  void set_active(bool active);
+  static ControllerHelpWindow* current() { return current_; }
+
+private:
+  boost::shared_ptr<ControllerHelpWindowImpl> impl;
+  static ControllerHelpWindow* current_;
+};
+
+#endif
+
+/* EOF */


Property changes on: trunk/windstille/src/hud/controller_help_window.hpp
___________________________________________________________________
Name: svn:mergeinfo
   + 

Copied: trunk/windstille/src/hud/conversation.cpp (from rev 2466, trunk/windstille/src/conversation.cpp)
===================================================================
--- trunk/windstille/src/conversation.cpp	2009-02-11 21:56:29 UTC (rev 2466)
+++ trunk/windstille/src/hud/conversation.cpp	2009-02-12 08:17:19 UTC (rev 2468)
@@ -0,0 +1,181 @@
+/*
+**  Windstille - A Sci-Fi Action-Adventure Game
+**  Copyright (C) 2000,2005 Ingo Ruhnke <grumbel at gmx.de>
+**
+**  This program is free software: you can redistribute it and/or modify
+**  it under the terms of the GNU General Public License as published by
+**  the Free Software Foundation, either version 3 of the License, or
+**  (at your option) any later version.
+**  
+**  This program is distributed in the hope that it will be useful,
+**  but WITHOUT ANY WARRANTY; without even the implied warranty of
+**  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+**  GNU General Public License for more details.
+**  
+**  You should have received a copy of the GNU General Public License
+**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
+*/
+
+#include "math/math.hpp"
+#include "input/controller.hpp"
+#include "input/input_manager.hpp"
+#include "font/fonts.hpp"
+#include "math/rect.hpp"
+#include "engine/script_manager.hpp"
+#include "display/display.hpp"
+#include "conversation.hpp"
+#include "pda.hpp"
+#include "screen/game_session.hpp"
+
+Conversation* Conversation::current_ = 0;
+
+Conversation::Conversation()
+  : pos(400, 300),
+    time(0)
+{
+  current_ = this;
+  active = false;
+  selection = 0;
+}
+
+void
+Conversation::add(const std::string& text)
+{
+  if (!active)
+    {
+      choices.push_back(Choice(text, ""));
+      if (selection >= int(choices.size()))
+        selection = 0;
+    }
+}
+
+void
+Conversation::add(const std::string& topic, const std::string& text)
+{
+  if (!active)
+    {
+      choices.push_back(Choice(topic, text));
+      if (selection >= int(choices.size()))
+        selection = 0;
+    }
+}
+
+void
+Conversation::draw()
+{
+  if (!active)
+    return;
+  
+  Display::fill_circle(pos, 42.0f, Color(0.5f, 0.5f, 0.5f, 0.75f), 24);
+
+  float segment = 360.0f / choices.size();
+
+  for(int i = 0; i < choices.size(); ++i)
+    { // FIXME:
+      Vector offset(0.0f, 1.0f);
+      offset = offset.rotate(math::deg2rad(segment*i) - M_PI/2);
+
+      float start = -segment/2 - 90.0f + segment*i;
+      float end   = -segment/2 - 90.0f + segment*(i+1);
+      
+      float distance = 160.0f;
+
+      Vector textpos = pos + Vector(0, 16.0f);
+      // FIXME: Doesn't handle multi line text
+      Sizef size(Fonts::vera20->get_width(choices[i].topic) + 50,
+                 Fonts::vera20->get_height() + 30);
+      Rectf  rect(textpos + distance * offset - Vector(size.width/2, size.height - 15), size);
+
+      if (i == selection)
+        {
+          rect = rect.grow(grow);
+          
+          Display::fill_arc(pos, 42.0f, start, end, Color(1.0f, 1.0f, 1.0f, 0.5f), 24);
+          Display::fill_rounded_rect(rect, 5.0f, Color(0.5f, 0.5f, 0.5f, 0.75f));
+          Fonts::vera20->draw_center(textpos.x + distance * offset.x,
+                                     textpos.y + distance * offset.y, 
+                                     choices[i].topic, Color(1.0f, 1.0f, 1.0f));
+
+          Fonts::vera20->draw_center(400, 600 - 64,
+                                     choices[i].text, Color(1.0f, 1.0f, 1.0f));
+        }
+      else
+        {
+          Display::fill_rounded_rect(rect, 5.0f, Color(0.25f, 0.25f, 0.25f, 0.75f));
+          Fonts::vera20->draw_center(textpos.x + distance * offset.x,
+                                     textpos.y + distance * offset.y,
+                                     choices[i].topic, Color(0.5f, 0.5f, 0.5f));
+        }
+
+      Display::draw_rounded_rect(rect, 5.0f, Color(1.0f, 1.0f, 1.0f));
+
+      //Display::draw_arc(pos + 5.0f * offset, 32.0f,
+      //                  start, end,
+      //                  Color(1.0f, 1.0f, 1.0f, 1.0f), 24);
+
+    }
+  Display::draw_circle(pos, 42.0f, Color(1.0f, 1.0f, 1.0f, 0.5f), 24);
+
+  Display::fill_circle(pos + direction * 34.0f, 8.0f, Color(1.0f, 1.0f, 1.0f));
+  //Display::draw_line(pos, pos + direction*32.0f, Color(0.0f, 0.0f, 0.0f));
+}
+
+void
+Conversation::update(float delta, const Controller& controller)
+{
+  time += delta;
+
+  if (!active)
+    return;
+
+  grow = fabs(sinf(time * 3.0f)) * 4.0f;
+
+  direction = Vector(controller.get_axis_state(X_AXIS),
+                     controller.get_axis_state(Y_AXIS));
+
+  if (fabs(controller.get_axis_state(X_AXIS)) > 0.3f ||
+      fabs(controller.get_axis_state(Y_AXIS)) > 0.3f)
+    {
+      float segment = 360.0f / choices.size();
+      float angle = math::rad2deg(math::normalize_angle(atan2f(direction.y, direction.x) + M_PI/2 + math::deg2rad(segment/2.0f)));
+
+      int new_selection = int(angle / segment);
+      new_selection = math::mid(0, new_selection, int(choices.size()));
+
+      if (new_selection != selection) {
+        selection = new_selection;
+        // FIXME: Might be a good idea to do the woople-size per button, not globaly
+        grow = 0.0f;
+        time = 0;
+      }
+    }
+  else
+    {
+      selection = -1;
+    }
+  
+  if (controller.button_was_pressed(OK_BUTTON) && selection != -1)
+    {
+      active = false;
+      GameSession::current()->get_pda().add_dialog("Jane",
+                                                   choices[selection].topic + " - " +
+                                                   choices[selection].text);
+      choices.clear();
+      GameSession::current()->set_control_state(GameSession::GAME);
+      script_manager->fire_wakeup_event(ScriptManager::CONVERSATION_CLOSED);
+    }
+}
+
+int
+Conversation::get_selection() const
+{
+  return selection;
+}
+
+void
+Conversation::show()
+{
+  active = true;
+}
+
+/* EOF */


Property changes on: trunk/windstille/src/hud/conversation.cpp
___________________________________________________________________
Name: svn:keywords
   + Id
Name: svn:mergeinfo
   + 

Copied: trunk/windstille/src/hud/conversation.hpp (from rev 2466, trunk/windstille/src/conversation.hpp)
===================================================================
--- trunk/windstille/src/conversation.hpp	2009-02-11 21:56:29 UTC (rev 2466)
+++ trunk/windstille/src/hud/conversation.hpp	2009-02-12 08:17:19 UTC (rev 2468)
@@ -0,0 +1,68 @@
+/*
+**  Windstille - A Sci-Fi Action-Adventure Game
+**  Copyright (C) 2000,2005 Ingo Ruhnke <grumbel at gmx.de>
+**
+**  This program is free software: you can redistribute it and/or modify
+**  it under the terms of the GNU General Public License as published by
+**  the Free Software Foundation, either version 3 of the License, or
+**  (at your option) any later version.
+**  
+**  This program is distributed in the hope that it will be useful,
+**  but WITHOUT ANY WARRANTY; without even the implied warranty of
+**  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+**  GNU General Public License for more details.
+**  
+**  You should have received a copy of the GNU General Public License
+**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
+*/
+
+#ifndef HEADER_WINDSTILLE_CONVERSATION_HPP
+#define HEADER_WINDSTILLE_CONVERSATION_HPP
+
+#include <vector>
+#include <string>
+#include "screen/screen.hpp"
+
+/** Displays a list of text strings from which the user can select
+    one, used to form multiple-choice dialogs */
+class Conversation : public Screen
+{
+private:
+  Vector pos;
+  Vector direction;
+  bool   active;
+  int    selection;
+  float  grow;
+  float  time;
+
+  struct Choice {
+    Choice(const std::string topic_,
+           const std::string text_)
+      : topic(topic_), 
+        text(text_) 
+    {}
+    std::string topic;
+    std::string text;
+  };
+
+  typedef std::vector<Choice> Choices;
+  Choices choices;
+  
+  static Conversation* current_;
+public:
+  static Conversation* current() { assert(current_); return current_; }
+  
+  Conversation();
+
+  void draw();
+  void update(float delta, const Controller& controller);
+
+  void add(const std::string& text);
+  void add(const std::string& topic, const std::string& text);
+  int  get_selection() const;
+  void show();
+};
+
+#endif
+
+/* EOF */


Property changes on: trunk/windstille/src/hud/conversation.hpp
___________________________________________________________________
Name: svn:keywords
   + Id
Name: svn:mergeinfo
   + 

Copied: trunk/windstille/src/hud/dialog_manager.cpp (from rev 2466, trunk/windstille/src/dialog_manager.cpp)
===================================================================
--- trunk/windstille/src/dialog_manager.cpp	2009-02-11 21:56:29 UTC (rev 2466)
+++ trunk/windstille/src/hud/dialog_manager.cpp	2009-02-12 08:17:19 UTC (rev 2468)
@@ -0,0 +1,192 @@
+/*
+**  Windstille - A Sci-Fi Action-Adventure Game
+**  Copyright (C) 2000,2005 Ingo Ruhnke <grumbel at gmx.de>
+**
+**  This program is free software: you can redistribute it and/or modify
+**  it under the terms of the GNU General Public License as published by
+**  the Free Software Foundation, either version 3 of the License, or
+**  (at your option) any later version.
+**  
+**  This program is distributed in the hope that it will be useful,
+**  but WITHOUT ANY WARRANTY; without even the implied warranty of
+**  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+**  GNU General Public License for more details.
+**  
+**  You should have received a copy of the GNU General Public License
+**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
+*/
+
+#include <iostream>
+#include "font/fonts.hpp"
+#include "screen/game_session.hpp"
+#include "input/controller.hpp"
+#include "input/input_manager.hpp"
+#include "dialog_manager.hpp"
+#include "engine/script_manager.hpp"
+#include "display/text_area.hpp"
+#include "display/display.hpp"
+#include "config.hpp"
+
+DialogManager* DialogManager::current_ = 0;
+
+DialogManager::DialogManager()
+{
+  current_ = this;
+  text_area = 0;
+}
+
+DialogManager::~DialogManager()
+{
+  delete text_area;
+}
+
+void
+DialogManager::add_dialog(int alignment_, const std::string& portrait_, const std::string& text_)
+{ 
+  delay     = 0.0;
+  alignment = alignment_;
+  portrait  = Sprite(portrait_);
+  portrait.set_scale(0.65f);
+  text      = text_;
+  caption = false;
+  
+  create_text();
+}
+
+void
+DialogManager::add_caption(int alignment_, const std::string& text_)
+{
+  delay     = 0.0;
+  alignment = alignment_;
+  text      = text_;
+  caption = true;
+  
+  create_text();
+}
+
+void
+DialogManager::draw()
+{
+  int dialog_height = std::max(portrait_height + portrait_border_y*2,
+                               int(text_area->get_rect().get_height()
+                                   + text_border_y * 2.0f));
+
+  Point pos(0,0);
+  if(alignment & LEFT) {
+    pos.x = outer_border_x;
+  } else if(alignment & RIGHT) {
+    pos.x = Display::get_width() - dialog_width - outer_border_x;
+  } else {
+    pos.x = (Display::get_width() - dialog_width) / 2;
+  }
+
+  if(alignment & TOP) {
+    pos.y = outer_border_y;
+  } else if(alignment & BOTTOM) {
+    pos.y = Display::get_height() - dialog_height - outer_border_y;
+  } else {
+    pos.y = (Display::get_height() - dialog_height) / 2;
+  }
+
+  if (!caption) {
+    Rectf rect(pos.x,
+               pos.y,
+               pos.x + dialog_width,
+               pos.y + 200);
+    
+    Display::fill_rounded_rect(rect, 16.0f,
+                               Color(0, 0, 0.3f, 0.5f));
+    Display::draw_rounded_rect(rect, 16.0f,
+                               Color(0.6f, 1.0f, 1.0f, 0.8f));
+  
+    portrait.draw(Vector(pos.x + portrait_border_x,
+                         pos.y + portrait_border_y));
+  }
+  
+  text_area->draw();
+
+  if (text_area->is_progress_complete())
+    {
+      const Vector& pos = text_area->get_cursor_pos();
+      Rectf cursor(pos.x + 8, pos.y + 8, pos.x + 24, pos.y + 24);
+      Display::fill_rect(cursor, Color(1.0, 1.0, 1.0, fabs(sin(SDL_GetTicks() / 1000.0f * M_PI * 3.0f))));
+    }
+}
+
+void
+DialogManager::update(float delta, const Controller& controller)
+{
+  text_area->update(delta);
+
+  delay += delta;
+
+  InputEventLst events = controller.get_events();
+	
+  for (InputEventLst::iterator i = events.begin(); i != events.end(); ++i)
+    {
+      if ((*i).type == BUTTON_EVENT)
+        {
+          if ((*i).button.name == OK_BUTTON && (*i).button.down == true)
+            {
+              if (text_area->is_progress_complete())
+                {
+                  GameSession::current()->set_control_state(GameSession::GAME);
+                  script_manager->fire_wakeup_event(ScriptManager::DIALOG_CLOSED);
+                }
+              else if (delay > 0.2)
+                text_area->set_progress_complete();
+            } 
+        }
+    }
+}
+
+void
+DialogManager::create_text()
+{
+  if (caption)
+    outer_border_y = 0;
+  else
+    outer_border_y = 20;
+    
+  Point pos(0,0);
+  if(alignment & LEFT) {
+    pos.x = outer_border_x;
+  } else if(alignment & RIGHT) {
+    pos.x = Display::get_width() - dialog_width - outer_border_x;
+  } else {
+    pos.x = (Display::get_width() - dialog_width) / 2;
+  }
+      
+  int text_width
+    = dialog_width - portrait_height - portrait_border_x*2 - text_border_x;
+  Rect text_rect = Rect(Point(pos.x + portrait_width + portrait_border_x*2, 0),
+                        Size(500, 200)); // FIXME: use real bounding box calc
+  
+  text_rect.bottom = text_rect.top + text_rect.get_height();
+  text_rect.top    = pos.y + text_border_y;
+
+  int dialog_height = std::max(portrait_height + portrait_border_y*2,
+                               text_rect.get_height() + text_border_y*2);
+
+  if(alignment & TOP) {
+    pos.y = outer_border_y;
+  } else if(alignment & BOTTOM) {
+    pos.y = Display::get_height() - dialog_height - outer_border_y;
+  } else {
+    pos.y = (Display::get_height() - dialog_height) / 2;
+  }
+
+  text_rect.bottom = text_rect.top + text_rect.get_height();
+  text_rect.top = pos.y + text_border_y;
+
+  Size dialog_size(dialog_width, dialog_height);
+
+
+  delete text_area;
+  text_area = new TextArea(Rect(Point(text_rect.left, text_rect.top + Fonts::vera20->get_height()),
+                                Size(text_width, 200)), true);
+  text_area->set_font(Fonts::vera20);
+  text_area->set_text(text);
+}
+
+/* EOF */


Property changes on: trunk/windstille/src/hud/dialog_manager.cpp
___________________________________________________________________
Name: svn:keywords
   + Id
Name: svn:mergeinfo
   + 
Name: svn:eol-style
   + native

Copied: trunk/windstille/src/hud/dialog_manager.hpp (from rev 2466, trunk/windstille/src/dialog_manager.hpp)
===================================================================
--- trunk/windstille/src/dialog_manager.hpp	2009-02-11 21:56:29 UTC (rev 2466)
+++ trunk/windstille/src/hud/dialog_manager.hpp	2009-02-12 08:17:19 UTC (rev 2468)
@@ -0,0 +1,78 @@
+/*
+**  Windstille - A Sci-Fi Action-Adventure Game
+**  Copyright (C) 2000,2005 Ingo Ruhnke <grumbel at gmx.de>
+**
+**  This program is free software: you can redistribute it and/or modify
+**  it under the terms of the GNU General Public License as published by
+**  the Free Software Foundation, either version 3 of the License, or
+**  (at your option) any later version.
+**  
+**  This program is distributed in the hope that it will be useful,
+**  but WITHOUT ANY WARRANTY; without even the implied warranty of
+**  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+**  GNU General Public License for more details.
+**  
+**  You should have received a copy of the GNU General Public License
+**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
+*/
+
+#ifndef HEADER_WINDSTILLE_DIALOG_MANAGER_HPP
+#define HEADER_WINDSTILLE_DIALOG_MANAGER_HPP
+
+#include <vector>
+#include <string>
+#include "sprite2d/sprite.hpp"
+#include "globals.hpp"
+#include "screen/screen.hpp"
+
+class TextArea;
+
+/** */
+class DialogManager : public Screen
+{
+private:
+  void create_text();
+  
+  Sprite portrait;
+  std::string text;
+  float delay;
+  TextArea* text_area;
+
+  enum Alignment {
+    VCENTER = 0x00,
+    LEFT    = 0x01,
+    RIGHT   = 0x02,
+    HCENTER = 0x00,
+    TOP     = 0x10,
+    BOTTOM  = 0x20
+  };
+  int alignment;
+  bool caption;
+  
+  static const int dialog_width = 600;
+  static const int portrait_border_x = 10;
+  static const int portrait_border_y = 10;
+  static const int text_border_x = 10;
+  static const int text_border_y = 10;
+  static const int portrait_width = 180;
+  static const int portrait_height = 192;
+  static const int outer_border_x = 20;
+  int outer_border_y;
+
+  static DialogManager* current_;
+public:
+  static DialogManager* current() { return current_; }
+
+  DialogManager();
+  ~DialogManager();
+
+  void draw();
+  void update(float delta, const Controller& controller);
+
+  void add_dialog(int alignment, const std::string& portrait, const std::string& text);
+  void add_caption(int alignment, const std::string& text);
+};
+
+#endif
+
+/* EOF */


Property changes on: trunk/windstille/src/hud/dialog_manager.hpp
___________________________________________________________________
Name: svn:keywords
   + Id
Name: svn:mergeinfo
   + 
Name: svn:eol-style
   + native

Copied: trunk/windstille/src/hud/energy_bar.cpp (from rev 2466, trunk/windstille/src/energy_bar.cpp)


Property changes on: trunk/windstille/src/hud/energy_bar.cpp
___________________________________________________________________
Name: svn:keywords
   + Id
Name: svn:mergeinfo
   + 
Name: svn:eol-style
   + native

Copied: trunk/windstille/src/hud/energy_bar.hpp (from rev 2466, trunk/windstille/src/energy_bar.hpp)
===================================================================
--- trunk/windstille/src/energy_bar.hpp	2009-02-11 21:56:29 UTC (rev 2466)
+++ trunk/windstille/src/hud/energy_bar.hpp	2009-02-12 08:17:19 UTC (rev 2468)
@@ -0,0 +1,43 @@
+/*
+**  Windstille - A Sci-Fi Action-Adventure Game
+**  Copyright (C) 2000,2005 Ingo Ruhnke <grumbel at gmx.de>
+**
+**  This program is free software: you can redistribute it and/or modify
+**  it under the terms of the GNU General Public License as published by
+**  the Free Software Foundation, either version 3 of the License, or
+**  (at your option) any later version.
+**  
+**  This program is distributed in the hope that it will be useful,
+**  but WITHOUT ANY WARRANTY; without even the implied warranty of
+**  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+**  GNU General Public License for more details.
+**  
+**  You should have received a copy of the GNU General Public License
+**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
+*/
+
+#ifndef HEADER_WINDSTILLE_ENERGY_BAR_HPP
+#define HEADER_WINDSTILLE_ENERGY_BAR_HPP
+
+#include "screen/screen.hpp"
+#include "sprite2d/sprite.hpp"
+
+/** */
+class EnergyBar : public Screen
+{
+private:
+  Sprite bar;
+public:
+  EnergyBar();
+  ~EnergyBar();
+  
+  void draw();
+  void update(float delta, const Controller& controller);
+private:
+  EnergyBar (const EnergyBar&);
+  EnergyBar& operator= (const EnergyBar&);
+};
+
+#endif
+
+/* EOF */


Property changes on: trunk/windstille/src/hud/energy_bar.hpp
___________________________________________________________________
Name: svn:keywords
   + Id
Name: svn:mergeinfo
   + 
Name: svn:eol-style
   + native

Copied: trunk/windstille/src/hud/inventory.cpp (from rev 2466, trunk/windstille/src/inventory.cpp)
===================================================================
--- trunk/windstille/src/inventory.cpp	2009-02-11 21:56:29 UTC (rev 2466)
+++ trunk/windstille/src/hud/inventory.cpp	2009-02-12 08:17:19 UTC (rev 2468)
@@ -0,0 +1,183 @@
+/*
+**  Windstille - A Sci-Fi Action-Adventure Game
+**  Copyright (C) 2005 Ingo Ruhnke <grumbel at gmx.de>
+**
+**  This program is free software: you can redistribute it and/or modify
+**  it under the terms of the GNU General Public License as published by
+**  the Free Software Foundation, either version 3 of the License, or
+**  (at your option) any later version.
+**  
+**  This program is distributed in the hope that it will be useful,
+**  but WITHOUT ANY WARRANTY; without even the implied warranty of
+**  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+**  GNU General Public License for more details.
+**  
+**  You should have received a copy of the GNU General Public License
+**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
+*/
+
+#include <iostream>
+#include <vector>
+#include "screen/game_session.hpp"
+#include "sprite2d/sprite.hpp"
+#include "font/fonts.hpp"
+#include "input/input_manager.hpp"
+#include "input/controller.hpp"
+#include "inventory.hpp"
+
+class InventoryItem
+{
+public:
+  std::string name;
+  Sprite sprite;
+  
+  InventoryItem(const std::string& name, const std::string& filename)
+    : name(name), sprite(filename)
+  {
+  }
+};
+
+class InventoryImpl
+{
+public:
+  int   moving;
+  float add_angle;
+  Sprite slot;
+  Sprite slothighlight;
+  typedef std::vector<InventoryItem> Items;
+  Items items;
+  int current_item;
+
+  void update(float delta, const Controller& controller);
+  void draw();
+  
+  void incr_current_item() { 
+    if (current_item == int(items.size()) - 1)
+      current_item = 0;
+    else
+      current_item += 1;
+  }
+
+  void decr_current_item() { 
+    if (current_item == 0)
+      current_item = items.size() - 1;
+    else
+      current_item -= 1;
+  }
+};
+
+Inventory::Inventory()
+  : impl(new InventoryImpl())
+{
+  impl->slot = Sprite("images/inventory/slot.sprite");
+  impl->slothighlight = Sprite("images/inventory/slothighlight.sprite");
+  impl->moving = false;
+  impl->add_angle = 0.0f;
+  impl->current_item = 0;
+
+  impl->items.push_back(InventoryItem("Flashlight",  "images/inventory/flashlight.sprite"));
+  impl->items.push_back(InventoryItem("Stone",       "images/inventory/stone.sprite"));
+  impl->items.push_back(InventoryItem("PDA",         "images/inventory/pda.sprite"));
+  impl->items.push_back(InventoryItem("5x Granates", "images/inventory/granate.sprite"));
+  impl->items.push_back(InventoryItem("Lv1 Keycard", "images/inventory/keycard.sprite"));
+}
+
+Inventory::~Inventory()
+{
+}
+
+void
+InventoryImpl::draw()
+{
+  Vector pos = Vector(400, 300); // View::current()->screen_Player::currently->get_pos();
+
+  int num_items = items.size();
+  float step_angle = (2*M_PI) / num_items;
+
+  for(int i = 0; i < int(items.size()); ++i)
+    {
+      const InventoryItem& item = items[(i+current_item)%items.size()];
+      Vector draw_pos = pos + Vector(128, 0).rotate(step_angle * i - M_PI/2 + add_angle);
+
+      if (i == 0 && moving == 0)
+        {
+          slothighlight.draw(draw_pos);
+          Fonts::vera20->draw_center(draw_pos.x, draw_pos.y - 64, item.name);
+        }
+      else
+        {
+          slot.draw(draw_pos);
+        }
+
+      item.sprite.draw(draw_pos - Vector(32,32));
+    }
+}
+
+void
+Inventory::draw()
+{
+  impl->draw();
+}
+
+void
+Inventory::update(float delta, const Controller& controller)
+{
+  impl->update(delta, controller);
+}
+
+void
+InventoryImpl::update(float delta, const Controller& controller)
+{
+  float step_angle = (2*M_PI) / items.size();
+  if (fabsf(add_angle) > step_angle)
+    {
+      if (moving == 1)
+        decr_current_item();
+      else if (moving == -1)
+        incr_current_item();
+
+      moving = 0;
+      add_angle = 0;
+    }
+
+  if (controller.get_axis_state(X_AXIS) < -0.5f)
+    {
+      if (moving == 1)
+        {
+          add_angle = -step_angle + add_angle;
+          decr_current_item();
+        }
+
+      moving = -1;
+    }
+  else if (controller.get_axis_state(X_AXIS) > 0.5f)
+    {
+      if (moving == -1)
+        {
+          add_angle = step_angle + add_angle;
+          incr_current_item();
+        }
+
+      moving =  1;
+    }
+
+  if (moving == -1)
+    {
+      add_angle -= 3 * delta;
+    }
+  else if (moving == 1)
+    {
+      add_angle += 3 * delta;
+    }
+
+  if (moving == 0)
+    {
+      if (controller.button_was_pressed(USE_BUTTON) ||
+          controller.button_was_pressed(INVENTORY_BUTTON))
+        {
+          GameSession::current()->set_control_state(GameSession::GAME);
+        }
+    }
+}
+
+/* EOF */


Property changes on: trunk/windstille/src/hud/inventory.cpp
___________________________________________________________________
Name: svn:mergeinfo
   + 

Copied: trunk/windstille/src/hud/inventory.hpp (from rev 2466, trunk/windstille/src/inventory.hpp)
===================================================================
--- trunk/windstille/src/inventory.hpp	2009-02-11 21:56:29 UTC (rev 2466)
+++ trunk/windstille/src/hud/inventory.hpp	2009-02-12 08:17:19 UTC (rev 2468)
@@ -0,0 +1,44 @@
+/*
+**  Windstille - A Sci-Fi Action-Adventure Game
+**  Copyright (C) 2005 Ingo Ruhnke <grumbel at gmx.de>
+**
+**  This program is free software: you can redistribute it and/or modify
+**  it under the terms of the GNU General Public License as published by
+**  the Free Software Foundation, either version 3 of the License, or
+**  (at your option) any later version.
+**  
+**  This program is distributed in the hope that it will be useful,
+**  but WITHOUT ANY WARRANTY; without even the implied warranty of
+**  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+**  GNU General Public License for more details.
+**  
+**  You should have received a copy of the GNU General Public License
+**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
+*/
+
+#ifndef HEADER_WINDSTILLE_INVENTORY_HPP
+#define HEADER_WINDSTILLE_INVENTORY_HPP
+
+#include "screen/screen.hpp"
+#include <boost/shared_ptr.hpp>
+
+class InventoryImpl;
+
+/** */
+class Inventory : public Screen
+{
+private:
+public:
+  Inventory();
+  ~Inventory();
+
+  void draw();
+  void update(float delta, const Controller& controller);
+
+private:
+  boost::shared_ptr<InventoryImpl> impl;
+};
+
+#endif
+
+/* EOF */


Property changes on: trunk/windstille/src/hud/inventory.hpp
___________________________________________________________________
Name: svn:mergeinfo
   + 

Copied: trunk/windstille/src/hud/pda.cpp (from rev 2466, trunk/windstille/src/pda.cpp)
===================================================================
--- trunk/windstille/src/pda.cpp	2009-02-11 21:56:29 UTC (rev 2466)
+++ trunk/windstille/src/hud/pda.cpp	2009-02-12 08:17:19 UTC (rev 2468)
@@ -0,0 +1,182 @@
+/*
+**  Windstille - A Sci-Fi Action-Adventure Game
+**  Copyright (C) 2005 Ingo Ruhnke <grumbel at gmx.de>
+**
+**  This program is free software: you can redistribute it and/or modify
+**  it under the terms of the GNU General Public License as published by
+**  the Free Software Foundation, either version 3 of the License, or
+**  (at your option) any later version.
+**  
+**  This program is distributed in the hope that it will be useful,
+**  but WITHOUT ANY WARRANTY; without even the implied warranty of
+**  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+**  GNU General Public License for more details.
+**  
+**  You should have received a copy of the GNU General Public License
+**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
+*/
+
+#include "input/input_manager.hpp"
+#include "display/display.hpp"
+#include "display/text_area.hpp"
+#include "font/fonts.hpp"
+#include "pda.hpp"
+
+DialogEntry::DialogEntry(const std::string& arg_character, const std::string& arg_text)
+  : character(arg_character),
+    text(arg_text)
+{
+}
+
+ObjectiveEntry::ObjectiveEntry(const std::string& arg_name, const std::string& arg_text)
+  : name(arg_name),
+    text(arg_text),
+    complete(false)
+{
+}
+
+PDA::PDA()
+  : state(PDA_OBJECTIVES)
+{ 
+  text_area  = 0;
+  background = Sprite("images/pda/pda.sprite");
+}
+
+void
+PDA::draw()
+{
+  if (text_area)
+    {
+      // Darken the background a bit
+      Display::fill_rect(Rect(0, 0, Display::get_width(), Display::get_height()), Color(0.0f, 0.0f, 0.0f, 0.25f));
+
+      Rectf rect = text_area->get_rect().grow(8.0f);
+
+      background.draw(Vector(30, 30));
+      
+      rect.top += 56;
+      Display::fill_rounded_rect(rect, 16.0f, Color(0.3f, 0.3f, 0.5f, 0.5f));
+      Display::draw_rounded_rect(rect, 16.0f, Color(1.0f, 1.0f, 1.0f, 0.5f));
+
+      text_area->draw();
+    }
+}
+
+void
+PDA::update(float delta, const Controller& controller)
+{
+  const InputEventLst& events = controller.get_events();
+  for(InputEventLst::const_iterator i = events.begin(); i != events.end(); ++i) {
+    if (i->type == BUTTON_EVENT)
+      {
+        if (i->axis.name == MENU_LEFT_BUTTON && i->button.down) 
+          {
+            state = static_cast<pda_state>(state + 1);
+            if (state > PDA_DIALOGS)
+              state = PDA_OBJECTIVES;
+          }
+        else if (i->axis.name == MENU_RIGHT_BUTTON && i->button.down) 
+          {
+            state = static_cast<pda_state>(state - 1);
+            if (state < PDA_OBJECTIVES)
+              state = PDA_DIALOGS;
+          }
+      }
+  }
+    
+  switch (state) {
+  case PDA_OBJECTIVES:
+    show_objectives();
+    break;
+  case PDA_DIALOGS:
+    show_dialogs();
+    break;
+  }
+ 
+  if (new_text != old_text) {
+    delete text_area; // FIXME: Unneeded could just use set_text
+    text_area = new TextArea(Rectf(70, 83, 385, 520).grow(-12.0f), false);
+    text_area->set_font(Fonts::ttffont);
+    text_area->set_text(new_text);
+    
+    old_text = new_text;
+  }
+  
+  text_area->update(delta);
+}
+
+void
+PDA::add_dialog(const std::string& character, const std::string& text)
+{
+  dialogs.push_back(DialogEntry(character, text));
+}
+
+void
+PDA::add_objective(const std::string& name, const std::string& text)
+{
+  objectives.push_back(ObjectiveEntry(name, text));
+}
+
+void
+PDA::objective_complete(const std::string& name)
+{
+  for (std::vector<ObjectiveEntry>::iterator i = objectives.begin(); i != objectives.end(); ++i) {
+    if (i->name == name)
+      i->complete = true;
+      return;
+  }
+}
+
+bool
+PDA::is_objective_given(const std::string& name)
+{
+  for (std::vector<ObjectiveEntry>::iterator i = objectives.begin(); i != objectives.end(); ++i) {
+    if (i->name == name)
+      return true;
+  }
+  
+  return false;
+}
+
+bool
+PDA::is_objective_complete(const std::string& name)
+{
+  for (std::vector<ObjectiveEntry>::iterator i = objectives.begin(); i != objectives.end(); ++i) {
+    if (i->name == name && i->complete)
+      return true;
+  }
+  
+  return false;
+}
+
+void
+PDA::show_objectives()
+{
+  new_text = "<large>Personal Digital Assistant</large>\n";
+  new_text += "<b>objectives</b> - dialogs\n\n";
+  
+  for (std::vector<ObjectiveEntry>::reverse_iterator i = objectives.rbegin(); i != objectives.rend(); ++i) {
+    new_text += i->name;
+    new_text += ": ";
+    if (i->complete)
+      new_text += "complete\n";
+    else
+      new_text += "incomplete\n";
+    new_text += i->text + "\n\n";
+  }
+}
+
+void
+PDA::show_dialogs()
+{
+  new_text = "<large>Personal Digital Assistant</large>\n";
+  new_text += "objectives - <b>dialogs</b>\n\n";
+  
+  for (std::vector<DialogEntry>::reverse_iterator i = dialogs.rbegin(); i != dialogs.rend(); ++i) {
+    new_text += i->character;
+    new_text += ": ";
+    new_text += i->text + '\n';
+  }
+}
+
+/* EOF */


Property changes on: trunk/windstille/src/hud/pda.cpp
___________________________________________________________________
Name: svn:mergeinfo
   + 
Name: svn:eol-style
   + native

Copied: trunk/windstille/src/hud/pda.hpp (from rev 2466, trunk/windstille/src/pda.hpp)
===================================================================
--- trunk/windstille/src/pda.hpp	2009-02-11 21:56:29 UTC (rev 2466)
+++ trunk/windstille/src/hud/pda.hpp	2009-02-12 08:17:19 UTC (rev 2468)
@@ -0,0 +1,77 @@
+/*
+**  Windstille - A Sci-Fi Action-Adventure Game
+**  Copyright (C) 2005 Ingo Ruhnke <grumbel at gmx.de>
+**
+**  This program is free software: you can redistribute it and/or modify
+**  it under the terms of the GNU General Public License as published by
+**  the Free Software Foundation, either version 3 of the License, or
+**  (at your option) any later version.
+**  
+**  This program is distributed in the hope that it will be useful,
+**  but WITHOUT ANY WARRANTY; without even the implied warranty of
+**  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+**  GNU General Public License for more details.
+**  
+**  You should have received a copy of the GNU General Public License
+**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
+*/
+
+#ifndef HEADER_WINDSTILLE_PDA_HPP
+#define HEADER_WINDSTILLE_PDA_HPP
+
+#include "sprite2d/sprite.hpp"
+#include "screen/screen.hpp"
+
+class TextArea;
+
+class DialogEntry
+{
+public:
+  DialogEntry(const std::string& arg_character, const std::string& arg_text);
+  
+  std::string character;
+  std::string text;
+};
+
+class ObjectiveEntry
+{
+public:
+  ObjectiveEntry(const std::string& arg_name, const std::string& arg_text);
+  
+  std::string name;
+  std::string text;
+  bool complete;
+};
+
+/** */
+class PDA : public Screen
+{
+private:
+  Sprite    background;
+  TextArea* text_area;
+  std::vector<DialogEntry> dialogs;
+  std::vector<ObjectiveEntry> objectives;   
+  
+  std::string new_text;  
+  std::string old_text;
+  enum pda_state { PDA_OBJECTIVES, PDA_DIALOGS } state;
+
+  void show_objectives();
+  void show_dialogs();
+
+public:
+  PDA();
+
+  void draw();
+  void update(float delta, const Controller& controller);
+  void add_dialog(const std::string& character, const std::string& text);
+  
+  void add_objective(const std::string& name, const std::string& text);
+  void objective_complete(const std::string& name);
+  bool is_objective_given(const std::string& name);
+  bool is_objective_complete(const std::string& name);
+};
+
+#endif
+
+/* EOF */


Property changes on: trunk/windstille/src/hud/pda.hpp
___________________________________________________________________
Name: svn:mergeinfo
   + 
Name: svn:eol-style
   + native

Modified: trunk/windstille/src/input/input_configurator.cpp
===================================================================
--- trunk/windstille/src/input/input_configurator.cpp	2009-02-11 22:04:00 UTC (rev 2467)
+++ trunk/windstille/src/input/input_configurator.cpp	2009-02-12 08:17:19 UTC (rev 2468)
@@ -22,7 +22,7 @@
 #include "math/rect.hpp"
 #include "controller_def.hpp"
 #include "font/fonts.hpp"
-#include "screen_manager.hpp"
+#include "screen/screen_manager.hpp"
 #include "input/input_manager_sdl.hpp"
 #include "input_configurator.hpp"
 

Modified: trunk/windstille/src/input/input_configurator.hpp
===================================================================
--- trunk/windstille/src/input/input_configurator.hpp	2009-02-11 22:04:00 UTC (rev 2467)
+++ trunk/windstille/src/input/input_configurator.hpp	2009-02-12 08:17:19 UTC (rev 2468)
@@ -20,8 +20,8 @@
 #define HEADER_WINDSTILLE_INPUT_INPUT_CONFIGURATOR_HPP
 
 #include <sstream>
-#include "screen.hpp"
-#include "text_area.hpp"
+#include "screen/screen.hpp"
+#include "display/text_area.hpp"
 
 struct ConfigureItem
 {

Deleted: trunk/windstille/src/inventory.cpp
===================================================================
--- trunk/windstille/src/inventory.cpp	2009-02-11 22:04:00 UTC (rev 2467)
+++ trunk/windstille/src/inventory.cpp	2009-02-12 08:17:19 UTC (rev 2468)
@@ -1,183 +0,0 @@
-/*
-**  Windstille - A Sci-Fi Action-Adventure Game
-**  Copyright (C) 2005 Ingo Ruhnke <grumbel at gmx.de>
-**
-**  This program is free software: you can redistribute it and/or modify
-**  it under the terms of the GNU General Public License as published by
-**  the Free Software Foundation, either version 3 of the License, or
-**  (at your option) any later version.
-**  
-**  This program is distributed in the hope that it will be useful,
-**  but WITHOUT ANY WARRANTY; without even the implied warranty of
-**  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
-**  GNU General Public License for more details.
-**  
-**  You should have received a copy of the GNU General Public License
-**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
-*/
-
-#include <iostream>
-#include <vector>
-#include "game_session.hpp"
-#include "sprite2d/sprite.hpp"
-#include "font/fonts.hpp"
-#include "input/input_manager.hpp"
-#include "input/controller.hpp"
-#include "inventory.hpp"
-
-class InventoryItem
-{
-public:
-  std::string name;
-  Sprite sprite;
-  
-  InventoryItem(const std::string& name, const std::string& filename)
-    : name(name), sprite(filename)
-  {
-  }
-};
-
-class InventoryImpl
-{
-public:
-  int   moving;
-  float add_angle;
-  Sprite slot;
-  Sprite slothighlight;
-  typedef std::vector<InventoryItem> Items;
-  Items items;
-  int current_item;
-
-  void update(float delta, const Controller& controller);
-  void draw();
-  
-  void incr_current_item() { 
-    if (current_item == int(items.size()) - 1)
-      current_item = 0;
-    else
-      current_item += 1;
-  }
-
-  void decr_current_item() { 
-    if (current_item == 0)
-      current_item = items.size() - 1;
-    else
-      current_item -= 1;
-  }
-};
-
-Inventory::Inventory()
-  : impl(new InventoryImpl())
-{
-  impl->slot = Sprite("images/inventory/slot.sprite");
-  impl->slothighlight = Sprite("images/inventory/slothighlight.sprite");
-  impl->moving = false;
-  impl->add_angle = 0.0f;
-  impl->current_item = 0;
-
-  impl->items.push_back(InventoryItem("Flashlight",  "images/inventory/flashlight.sprite"));
-  impl->items.push_back(InventoryItem("Stone",       "images/inventory/stone.sprite"));
-  impl->items.push_back(InventoryItem("PDA",         "images/inventory/pda.sprite"));
-  impl->items.push_back(InventoryItem("5x Granates", "images/inventory/granate.sprite"));
-  impl->items.push_back(InventoryItem("Lv1 Keycard", "images/inventory/keycard.sprite"));
-}
-
-Inventory::~Inventory()
-{
-}
-
-void
-InventoryImpl::draw()
-{
-  Vector pos = Vector(400, 300); // View::current()->screen_Player::currently->get_pos();
-
-  int num_items = items.size();
-  float step_angle = (2*M_PI) / num_items;
-
-  for(int i = 0; i < int(items.size()); ++i)
-    {
-      const InventoryItem& item = items[(i+current_item)%items.size()];
-      Vector draw_pos = pos + Vector(128, 0).rotate(step_angle * i - M_PI/2 + add_angle);
-
-      if (i == 0 && moving == 0)
-        {
-          slothighlight.draw(draw_pos);
-          Fonts::vera20->draw_center(draw_pos.x, draw_pos.y - 64, item.name);
-        }
-      else
-        {
-          slot.draw(draw_pos);
-        }
-
-      item.sprite.draw(draw_pos - Vector(32,32));
-    }
-}
-
-void
-Inventory::draw()
-{
-  impl->draw();
-}
-
-void
-Inventory::update(float delta, const Controller& controller)
-{
-  impl->update(delta, controller);
-}
-
-void
-InventoryImpl::update(float delta, const Controller& controller)
-{
-  float step_angle = (2*M_PI) / items.size();
-  if (fabsf(add_angle) > step_angle)
-    {
-      if (moving == 1)
-        decr_current_item();
-      else if (moving == -1)
-        incr_current_item();
-
-      moving = 0;
-      add_angle = 0;
-    }
-
-  if (controller.get_axis_state(X_AXIS) < -0.5f)
-    {
-      if (moving == 1)
-        {
-          add_angle = -step_angle + add_angle;
-          decr_current_item();
-        }
-
-      moving = -1;
-    }
-  else if (controller.get_axis_state(X_AXIS) > 0.5f)
-    {
-      if (moving == -1)
-        {
-          add_angle = step_angle + add_angle;
-          incr_current_item();
-        }
-
-      moving =  1;
-    }
-
-  if (moving == -1)
-    {
-      add_angle -= 3 * delta;
-    }
-  else if (moving == 1)
-    {
-      add_angle += 3 * delta;
-    }
-
-  if (moving == 0)
-    {
-      if (controller.button_was_pressed(USE_BUTTON) ||
-          controller.button_was_pressed(INVENTORY_BUTTON))
-        {
-          GameSession::current()->set_control_state(GameSession::GAME);
-        }
-    }
-}
-
-/* EOF */

Deleted: trunk/windstille/src/inventory.hpp
===================================================================
--- trunk/windstille/src/inventory.hpp	2009-02-11 22:04:00 UTC (rev 2467)
+++ trunk/windstille/src/inventory.hpp	2009-02-12 08:17:19 UTC (rev 2468)
@@ -1,44 +0,0 @@
-/*
-**  Windstille - A Sci-Fi Action-Adventure Game
-**  Copyright (C) 2005 Ingo Ruhnke <grumbel at gmx.de>
-**
-**  This program is free software: you can redistribute it and/or modify
-**  it under the terms of the GNU General Public License as published by
-**  the Free Software Foundation, either version 3 of the License, or
-**  (at your option) any later version.
-**  
-**  This program is distributed in the hope that it will be useful,
-**  but WITHOUT ANY WARRANTY; without even the implied warranty of
-**  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
-**  GNU General Public License for more details.
-**  
-**  You should have received a copy of the GNU General Public License
-**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
-*/
-
-#ifndef HEADER_WINDSTILLE_INVENTORY_HPP
-#define HEADER_WINDSTILLE_INVENTORY_HPP
-
-#include "screen.hpp"
-#include <boost/shared_ptr.hpp>
-
-class InventoryImpl;
-
-/** */
-class Inventory : public Screen
-{
-private:
-public:
-  Inventory();
-  ~Inventory();
-
-  void draw();
-  void update(float delta, const Controller& controller);
-
-private:
-  boost::shared_ptr<InventoryImpl> impl;
-};
-
-#endif
-
-/* EOF */

Modified: trunk/windstille/src/menu_manager.cpp
===================================================================
--- trunk/windstille/src/menu_manager.cpp	2009-02-11 22:04:00 UTC (rev 2467)
+++ trunk/windstille/src/menu_manager.cpp	2009-02-12 08:17:19 UTC (rev 2468)
@@ -22,20 +22,20 @@
 #include "console.hpp"
 #include "display/display.hpp"
 #include "font/fonts.hpp"
-#include "game_session.hpp"
+#include "screen/game_session.hpp"
 #include "gui/group_component.hpp"
 #include "gui/gui_manager.hpp"
 #include "gui/menu_component.hpp"
 #include "gui/root_component.hpp"
 #include "gui/text_view.hpp"
-#include "particle_viewer.hpp"
-#include "screen_manager.hpp"
+#include "screen/particle_viewer.hpp"
+#include "screen/screen_manager.hpp"
 #include "engine/sector.hpp"
 #include "sprite3d/manager.hpp"
-#include "sprite3dview.hpp"
-#include "geometry_test.hpp"
-#include "armature_test.hpp"
-#include "navigation_test.hpp"
+#include "screen/sprite3dview.hpp"
+#include "screen/geometry_test.hpp"
+#include "screen/armature_test.hpp"
+#include "screen/navigation_test.hpp"
 #include "gui/menu_item.hpp"
 #ifdef HAVE_CWIID
 #include "input/wiimote.hpp"

Deleted: trunk/windstille/src/navigation_test.cpp
===================================================================
--- trunk/windstille/src/navigation_test.cpp	2009-02-11 22:04:00 UTC (rev 2467)
+++ trunk/windstille/src/navigation_test.cpp	2009-02-12 08:17:19 UTC (rev 2468)
@@ -1,267 +0,0 @@
-/*
-**  Windstille - A Sci-Fi Action-Adventure Game
-**  Copyright (C) 2007 Ingo Ruhnke <grumbel at gmx.de>
-**
-**  This program is free software: you can redistribute it and/or modify
-**  it under the terms of the GNU General Public License as published by
-**  the Free Software Foundation, either version 3 of the License, or
-**  (at your option) any later version.
-**  
-**  This program is distributed in the hope that it will be useful,
-**  but WITHOUT ANY WARRANTY; without even the implied warranty of
-**  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
-**  GNU General Public License for more details.
-**  
-**  You should have received a copy of the GNU General Public License
-**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
-*/
-
-#include <assert.h>
-#include <iostream>
-#include <GL/glew.h>
-#include <GL/gl.h>
-#include "util/sexpr_file_reader.hpp"
-#include "input/controller.hpp"
-#include "display/display.hpp"
-#include "screen_manager.hpp"
-#include "navigation/navigation_graph.hpp"
-#include "navigation/node.hpp"
-#include "navigation/segment_position.hpp"
-#include "navigation/segment.hpp"
-#include "navigation_test.hpp"
-
-NavigationTest::NavigationTest()
-  : cursor(400, 300),
-    player(200,200),
-    graph(0),
-    connection(0),
-    selected_segment(0),
-    selected_node(0),
-    node_to_connect(0)
-{
-  graph = new NavigationGraph();
-
-  try {
-    FileReader reader = FileReader::parse("navigation.nav");
-    graph->load(reader);
-  } catch(std::exception& err) {
-    std::cout << "NavigationTest: " << err.what() << std::endl;
-  }
-
-  NodeHandle node1 = graph->add_node(Vector(100, 200));
-  NodeHandle node2 = graph->add_node(Vector(300, 400));
-  //Node* node3 = graph->add_node(Vector(500, 300));
-  //Node* node4 = graph->add_node(Vector(700, 400));
-
-  graph->add_segment(node1, node2);
-  //graph->add_segment(node2, node3);
-  //graph->add_segment(node3, node4);
-  
-}
-
-void
-NavigationTest::draw()
-{
-  glClearColor(0.0f, 0.0f, 0.0f, 1.0f);
-  glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);
-  graph->draw();
-
-  Display::fill_rect(Rectf(cursor - Vector(2,2), Sizef(5,5)),  Color(1.0f, 1.0f, 1.0f));
-  Display::draw_circle(cursor, 32.0f, Color(1.0f, 1.0f, 1.0f, 0.5f));
-
-  std::vector<NodeHandle> nodes = graph->find_nodes(cursor, 128.0f);
-  for(std::vector<NodeHandle>::iterator i = nodes.begin(); i != nodes.end(); ++i)
-    {
-      Display::draw_circle((*i)->get_pos(), 12.0f, Color(1.0f, 1.0f, 1.0f, 0.5f));
-    }
-
-  if (node_to_connect)
-    {
-      Display::fill_rect(Rectf(node_to_connect->get_pos() - Vector(2,2), Sizef(5,5)),  
-                         Color(1.0f, 1.0f, 1.0f));
-      Display::draw_line(node_to_connect->get_pos(), cursor, Color(1.0f, 1.0f, 1.0f, 0.5f));
-    }
-
-  if (selected_node)
-    Display::draw_circle(selected_node->get_pos(), 12.0f, Color(1.0f, 1.0f, 1.0f, 1.0f));
-
-  if (selected_segment)
-    Display::draw_line(selected_segment->get_line(), Color(1.0f, 1.0f, 1.0f, 1.0f));
-
-  Display::fill_circle(player, 12.0f, Color(0.0f, 0.0f, 1.0f, 1.0f));
-
-  if (connection)
-    {
-      Display::fill_circle(connection->get_pos(), 16.0f, Color(0.0f, 0.0f, 1.0f, 0.5f));
-      Display::fill_circle(connection->get_pos(), 8.0f, Color(0.0f, 1.0f, 1.0f));
-     
-      Display::draw_line(connection->get_pos(), connection->get_pos() + 100.0f*stick,
-                         Color(1.0f, 1.0f, 1.0f, 1.0f));
-    }
-}
-
-void
-NavigationTest::update(float delta, const Controller& controller)
-{
-  if (controller.button_was_pressed(ESCAPE_BUTTON) ||
-      controller.button_was_pressed(PAUSE_BUTTON))
-    {
-      screen_manager.pop_screen();
-    }
-
-  cursor += Vector(controller.get_axis_state(X_AXIS) * 500.0f * delta,
-                   controller.get_axis_state(Y_AXIS) * 500.0f * delta);
-
-  stick = Vector(controller.get_axis_state(X2_AXIS),
-                 controller.get_axis_state(Y2_AXIS));
-
-  if (controller.button_was_pressed(PRIMARY_BUTTON))
-    {
-      if (node_to_connect)
-        {
-          if (selected_node)
-            graph->add_segment(node_to_connect, selected_node);
-          
-          node_to_connect = 0;
-        }
-      else if (selected_node)
-        {
-          node_to_connect = selected_node;
-        }
-      else if (selected_segment)
-        {
-          graph->split_segment(selected_segment);
-          selected_segment = 0;
-        }
-      else
-        {
-          graph->add_node(cursor);
-        }
-    }
-
-  if (controller.get_button_state(TERTIARY_BUTTON))
-    { // Move node
-      if (selected_node)
-        {
-          selected_node->set_pos(cursor);
-        }
-    }
-
-  if (controller.button_was_pressed(SECONDARY_BUTTON))
-    { // Set player
-      player = old_player = cursor;
-    }
-
-  if (connection)
-    { 
-      // Handle the movement of the connection
-      Node* next_node;
-      //float advance = 512.0f * controller.get_axis_state(X2_AXIS) * delta;
-      
-      Vector advance = delta * 512.0f * stick;
-      connection->advance(advance, next_node);
-
-      player = connection->get_pos();
-      
-      if (!advance.is_null())
-        { // Not all advancement got used up, which means we have hit
-          // the end of a segment
-
-          // FIXME: This should be a while loop, currently we are just
-          // discarding the rest movement
-
-          SegmentPosition next_segment;
-          float length = 0;
-          for(Node::Segments::iterator i = next_node->segments.begin(); i != next_node->segments.end(); ++i)
-            {
-              if (connection->get_segment() != i->segment)
-                { // Find out into the direction of which segment the stick is pointing
-                  Vector proj = stick.project(i->segment->get_vector());
-                  
-                  if (proj.length() > length)
-                    {
-                      next_segment = *i;
-                      length       = proj.length();
-                    }
-                }
-            }
-              
-          if (!next_segment.segment)
-            {
-              std::cout << "Dead End" << std::endl;
-              delete connection;
-              connection = 0;
-
-              // FIXME: Voodoo to fix connection/deadend cicles
-              player += stick;
-              old_player = player;
-            }
-          else
-            {
-              std::cout << "transition" << std::endl;
-              *connection = next_segment;
-            }
-        }
-
-      if (controller.get_button_state(AIM_BUTTON))
-        {         
-          delete connection;
-          connection = 0;
-
-          // FIXME: Voodoo to fix connection/dedaend cicles
-          player += stick;
-          old_player = player;
-        }
-    }
-  else
-    { // handle non connection based movement
-      player += Vector(0.0f, 100.0f) * delta;
-      
-      player.x += 512.0f * stick.x * delta;
-
-      if (controller.get_button_state(AIM_BUTTON))
-        {
-          player.y -= 0.5f * 512.0f * delta;
-        }
-
-      std::vector<SegmentPosition> positions = graph->find_intersections(Line(old_player, player));
-      if (!positions.empty()) {
-        std::cout << "Doing connection" << std::endl;
-        connection = new SegmentPosition(positions.front());
-      }
-    }
-  
-  if (controller.button_was_pressed(VIEW_CENTER_BUTTON))
-    {
-      graph->save(std::cout);
-    }
-
-  if (controller.button_was_pressed(PDA_BUTTON))
-    {
-      if (selected_node) {
-        graph->remove_node(selected_node);
-        selected_node = 0;
-      } 
-      
-      if (selected_segment) {
-        graph->remove_segment(selected_segment);
-        selected_segment = 0;
-      }      
-    }
-
-  selected_node = graph->find_closest_node(cursor, 32.0f);
-  if (!selected_node)
-    selected_segment = graph->find_closest_segment(cursor, 32.0f);
-  else
-    selected_segment = 0;
-
-  if (connection && !graph->valid(connection->get_segment()))
-    {
-      delete connection;
-      connection = 0;
-    }
-
-  old_player = player;
-}
-
-/* EOF */

Deleted: trunk/windstille/src/navigation_test.hpp
===================================================================
--- trunk/windstille/src/navigation_test.hpp	2009-02-11 22:04:00 UTC (rev 2467)
+++ trunk/windstille/src/navigation_test.hpp	2009-02-12 08:17:19 UTC (rev 2468)
@@ -1,60 +0,0 @@
-/*
-**  Windstille - A Sci-Fi Action-Adventure Game
-**  Copyright (C) 2007 Ingo Ruhnke <grumbel at gmx.de>
-**
-**  This program is free software: you can redistribute it and/or modify
-**  it under the terms of the GNU General Public License as published by
-**  the Free Software Foundation, either version 3 of the License, or
-**  (at your option) any later version.
-**  
-**  This program is distributed in the hope that it will be useful,
-**  but WITHOUT ANY WARRANTY; without even the implied warranty of
-**  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
-**  GNU General Public License for more details.
-**  
-**  You should have received a copy of the GNU General Public License
-**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
-*/
-
-#ifndef HEADER_WINDSTILLE_NAVIGATION_TEST_HPP
-#define HEADER_WINDSTILLE_NAVIGATION_TEST_HPP
-
-#include "navigation/navigation_graph.hpp"
-#include "screen.hpp"
-
-class NavigationGraph;
-class SegmentPosition;
-class Segment;
-class Node;
-
-/** */
-class NavigationTest : public Screen
-{
-private:
-  Vector cursor;
-  Vector stick;
-  Vector player;
-  Vector old_player;
-  
-  NavigationGraph* graph;
-  SegmentPosition* connection;
-
-  SegmentHandle selected_segment;
-  NodeHandle    selected_node;
-
-  NodeHandle node_to_connect;
-
-public:
-  NavigationTest();
-
-  void draw();
-  void update(float delta, const Controller& controller);
-
-private:
-  NavigationTest (const NavigationTest&);
-  NavigationTest& operator= (const NavigationTest&);
-};
-
-#endif
-
-/* EOF */

Modified: trunk/windstille/src/objects/character.cpp
===================================================================
--- trunk/windstille/src/objects/character.cpp	2009-02-11 22:04:00 UTC (rev 2467)
+++ trunk/windstille/src/objects/character.cpp	2009-02-12 08:17:19 UTC (rev 2468)
@@ -18,9 +18,9 @@
 
 #include "character.hpp"
 #include "engine/sector.hpp"
-#include "game_session.hpp"
+#include "screen/game_session.hpp"
 #include "scripting/wrapper.interface.hpp"
-#include "dialog_manager.hpp"
+#include "hud/dialog_manager.hpp"
 #include "engine/script_manager.hpp"
 #include "physfs/physfs_stream.hpp"
 #include "console.hpp"

Modified: trunk/windstille/src/objects/player.cpp
===================================================================
--- trunk/windstille/src/objects/player.cpp	2009-02-11 22:04:00 UTC (rev 2467)
+++ trunk/windstille/src/objects/player.cpp	2009-02-12 08:17:19 UTC (rev 2468)
@@ -25,7 +25,7 @@
 #include "player.hpp"
 #include "objects/bomb.hpp"
 #include "globals.hpp"
-#include "pda.hpp"
+#include "hud/pda.hpp"
 #include "tile/tile.hpp"
 #include "sprite3d/manager.hpp"
 #include "display/surface_manager.hpp"
@@ -34,7 +34,7 @@
 #include "collision/collision_engine.hpp"
 #include "laser_pointer.hpp"
 #include "collision/stair_contact.hpp"
-#include "game_session.hpp"
+#include "screen/game_session.hpp"
 #include "console.hpp"
 #include "grenade.hpp"
 #include "pistol.hpp"

Modified: trunk/windstille/src/objects/swarm.cpp
===================================================================
--- trunk/windstille/src/objects/swarm.cpp	2009-02-11 22:04:00 UTC (rev 2467)
+++ trunk/windstille/src/objects/swarm.cpp	2009-02-12 08:17:19 UTC (rev 2468)
@@ -20,7 +20,7 @@
 #include "player.hpp"
 #include "engine/sector.hpp"
 #include "hedgehog.hpp"
-#include "game_session.hpp"
+#include "screen/game_session.hpp"
 #include "view.hpp"
 #include "display/vertex_array_drawing_request.hpp"
 #include "math/random.hpp"

Deleted: trunk/windstille/src/particle_viewer.cpp
===================================================================
--- trunk/windstille/src/particle_viewer.cpp	2009-02-11 22:04:00 UTC (rev 2467)
+++ trunk/windstille/src/particle_viewer.cpp	2009-02-12 08:17:19 UTC (rev 2468)
@@ -1,203 +0,0 @@
-/*
-**  Windstille - A Sci-Fi Action-Adventure Game
-**  Copyright (C) 2005 Ingo Ruhnke <grumbel at gmx.de>
-**
-**  This program is free software: you can redistribute it and/or modify
-**  it under the terms of the GNU General Public License as published by
-**  the Free Software Foundation, either version 3 of the License, or
-**  (at your option) any later version.
-**  
-**  This program is distributed in the hope that it will be useful,
-**  but WITHOUT ANY WARRANTY; without even the implied warranty of
-**  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
-**  GNU General Public License for more details.
-**  
-**  You should have received a copy of the GNU General Public License
-**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
-*/
-
-#include "util/sexpr_file_reader.hpp"
-#include "input/controller.hpp"
-#include "screen_manager.hpp"
-#include "gui/gui_manager.hpp"
-#include "particle_viewer.hpp"
-
-// Components
-#include "gui/button.hpp"
-#include "gui/label.hpp"
-#include "gui/slider.hpp"
-#include "gui/root_component.hpp"
-#include "gui/grid_component.hpp"
-#include "gui/tab_component.hpp"
-#include "gui/list_view.hpp"
-#include "gui/text_view.hpp"
-#include "gui/automap.hpp"
-
-class ParticleSystemGUI
-{
-public:
-  ParticleSystem* psystem;
-  gui::GridComponent* grid;
-  gui::Slider* gravity_slider;
-  gui::Slider* velocity_slider;
-  gui::Slider* count_slider;
-  
-  ParticleSystemGUI(gui::Component* parent, ParticleSystem* psystem_)
-    : psystem(psystem_)
-  {
-    using namespace gui;
-    grid = new GridComponent(Rectf(200, 120, 600, 220), 2, 3, parent);
-    grid->set_padding(4);
-
-    gravity_slider  = new Slider(grid);
-    velocity_slider = new Slider(grid);
-    count_slider    = new Slider(grid);
-
-    gravity_slider->set_range(-10, 10);
-    gravity_slider->set_step(3);
-    gravity_slider->set_pos(1);
-
-    velocity_slider->set_range(-500, 500);
-    velocity_slider->set_step(50);
-    velocity_slider->set_pos(10);//psystem->get_count());
-
-    count_slider->set_range(1, 500);
-    count_slider->set_step(10);
-    count_slider->set_pos(psystem->get_count());
-
-    grid->pack(new Label("Gravitation:"), 0, 0);
-    grid->pack(new Label("Velocity:"),    0, 1);
-    grid->pack(new Label("Count:"),       0, 2);
-
-    grid->pack(gravity_slider,  1, 0);
-    grid->pack(velocity_slider, 1, 1);
-    grid->pack(count_slider,    1, 2);    
-  }
-
-  void update()
-  {
-    psystem->set_count(count_slider->get_pos());
-  }
-
-  gui::Component* get_component() { return grid; }
-};
-
-ParticleViewer::ParticleViewer()
-{
-  background = Sprite("images/greychess.sprite");
-  show_gui = false;
-
-  using namespace gui;
-
-  manager = new GUIManager();
-  tab = new TabComponent(Rectf(200, 50, 600, 250), manager->get_root());
-  
-  manager->get_root()->add_child(tab);
-}
-
-ParticleViewer::~ParticleViewer()
-{
-}
-
-void
-ParticleViewer::load(const std::string& filename)
-{
-  std::cout << "ParticleViewer: loading " << filename << std::endl;
-  
-  for(Systems::iterator i = systems.begin(); i != systems.end(); ++i)
-    delete *i;
-  systems.clear();
-  
-  FileReader root_reader = FileReader::parse(filename);
-  if(root_reader.get_name() != "particle-systems") {
-    std::ostringstream msg;
-    msg << "'" << filename << "' is not a particle-system file";
-    throw std::runtime_error(msg.str());
-  }
-
-  std::vector<FileReader> sections = root_reader.get_sections();
-  for(std::vector<FileReader>::iterator i = sections.begin(); i != sections.end(); ++i)
-    { 
-      if (i->get_name() == "particle-system")
-      {
-        systems.push_back(new ParticleSystem(*i));
-
-        guis.push_back(new ParticleSystemGUI(tab, systems.back()));
-        tab->pack("Testomap", guis.back()->get_component());
-      }
-  }
-
-  std::cout << systems.size() << " particle systems ready to go" << std::endl;
-}
-  
-void
-ParticleViewer::draw()
-{
-  sc.reset_modelview();
-
-  for(int y = -background.get_width(); y < 600 + background.get_height(); y += background.get_height())
-    for(int x = -background.get_width(); x < 800 + background.get_width(); x += background.get_width())
-      sc.color().draw(background, Vector(x + int(pos.x) % background.get_width(),
-                                         y + int(pos.y) % background.get_height()), -900);
-
-  sc.translate(400 + pos.x, 600 + pos.y);
-  sc.light().fill_screen(Color(0.4, 0.4, 0.4));
-  //sc.light().fill_screen(Color(1.0, 1.0, 1.0));
-  sc.color().fill_screen(Color(0.0, 0.0, 0.0));
-
-  for(Systems::iterator i = systems.begin(); i != systems.end(); ++i)
-    (*i)->draw(sc);
-
-  sc.render();
-
-  if (show_gui)
-    {
-      manager->draw();
-    }
-}
-
-void
-ParticleViewer::update(float delta, const Controller& controller)
-{
-  for(Systems::iterator i = systems.begin(); i != systems.end(); ++i)
-    (*i)->update(delta);
-
-  if (!show_gui)
-    {
-      pos.x += controller.get_axis_state(X_AXIS) * delta * 100.0f;
-      pos.y += controller.get_axis_state(Y_AXIS) * delta * 100.0f;
-
-      if (controller.button_was_pressed(OK_BUTTON))
-        {
-          // FIXME: Disable GUI, since its crashy
-          // show_gui = true;
-          // manager->get_root()->get_focus()->set_active(true);
-        }
-      else if (controller.button_was_pressed(CANCEL_BUTTON) ||
-               controller.button_was_pressed(ESCAPE_BUTTON))
-        {
-          screen_manager.pop_screen();
-        }
-    }
-  else
-    {
-      if (!manager->get_root()->is_active())
-        {
-          show_gui = false;
-        }
-      else
-        {
-          manager->update(delta, controller);
-        }
-    }
-
-  for(ParticleSystemGUIs::iterator i = guis.begin(); i != guis.end(); ++i)
-    {
-      (*i)->update();
-    }
-
-  //systems[3]->set_count(count_slider->get_pos());
-  //systems[3]->set_velocity(velocity_slider->get_pos(), velocity_slider->get_pos());
-}
-
-/* EOF */

Deleted: trunk/windstille/src/particle_viewer.hpp
===================================================================
--- trunk/windstille/src/particle_viewer.hpp	2009-02-11 22:04:00 UTC (rev 2467)
+++ trunk/windstille/src/particle_viewer.hpp	2009-02-12 08:17:19 UTC (rev 2468)
@@ -1,65 +0,0 @@
-/*
-**  Windstille - A Sci-Fi Action-Adventure Game
-**  Copyright (C) 2005 Ingo Ruhnke <grumbel at gmx.de>
-**
-**  This program is free software: you can redistribute it and/or modify
-**  it under the terms of the GNU General Public License as published by
-**  the Free Software Foundation, either version 3 of the License, or
-**  (at your option) any later version.
-**  
-**  This program is distributed in the hope that it will be useful,
-**  but WITHOUT ANY WARRANTY; without even the implied warranty of
-**  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
-**  GNU General Public License for more details.
-**  
-**  You should have received a copy of the GNU General Public License
-**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
-*/
-
-#ifndef HEADER_WINDSTILLE_PARTICLE_VIEWER_HPP
-#define HEADER_WINDSTILLE_PARTICLE_VIEWER_HPP
-
-#include "screen.hpp"
-#include "sprite2d/sprite.hpp"
-#include "gui/gui_manager.hpp"
-#include "particles/particle_system.hpp"
-
-namespace gui {
-class Slider;
-class TabComponent;
-}
-
-class ParticleSystemGUI;
-
-/** */
-class ParticleViewer : public Screen
-{
-private:
-  SceneContext sc;
-  typedef std::vector<ParticleSystem*> Systems;
-  Systems systems;
-  Sprite background;
-
-  Vector pos;
-  bool   show_gui;
-  gui::GUIManager* manager;
-  gui::TabComponent* tab;
-
-  typedef std::vector<ParticleSystemGUI*> ParticleSystemGUIs;
-  ParticleSystemGUIs guis;
-public:
-  ParticleViewer();
-  ~ParticleViewer();
-  
-  void draw();
-  void update(float delta, const Controller& controller);
-  void load(const std::string& filename);
-
-private:
-  ParticleViewer (const ParticleViewer&);
-  ParticleViewer& operator= (const ParticleViewer&);
-};
-
-#endif
-
-/* EOF */

Deleted: trunk/windstille/src/pda.cpp
===================================================================
--- trunk/windstille/src/pda.cpp	2009-02-11 22:04:00 UTC (rev 2467)
+++ trunk/windstille/src/pda.cpp	2009-02-12 08:17:19 UTC (rev 2468)
@@ -1,182 +0,0 @@
-/*
-**  Windstille - A Sci-Fi Action-Adventure Game
-**  Copyright (C) 2005 Ingo Ruhnke <grumbel at gmx.de>
-**
-**  This program is free software: you can redistribute it and/or modify
-**  it under the terms of the GNU General Public License as published by
-**  the Free Software Foundation, either version 3 of the License, or
-**  (at your option) any later version.
-**  
-**  This program is distributed in the hope that it will be useful,
-**  but WITHOUT ANY WARRANTY; without even the implied warranty of
-**  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
-**  GNU General Public License for more details.
-**  
-**  You should have received a copy of the GNU General Public License
-**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
-*/
-
-#include "input/input_manager.hpp"
-#include "display/display.hpp"
-#include "text_area.hpp"
-#include "font/fonts.hpp"
-#include "pda.hpp"
-
-DialogEntry::DialogEntry(const std::string& arg_character, const std::string& arg_text)
-  : character(arg_character),
-    text(arg_text)
-{
-}
-
-ObjectiveEntry::ObjectiveEntry(const std::string& arg_name, const std::string& arg_text)
-  : name(arg_name),
-    text(arg_text),
-    complete(false)
-{
-}
-
-PDA::PDA()
-  : state(PDA_OBJECTIVES)
-{ 
-  text_area  = 0;
-  background = Sprite("images/pda/pda.sprite");
-}
-
-void
-PDA::draw()
-{
-  if (text_area)
-    {
-      // Darken the background a bit
-      Display::fill_rect(Rect(0, 0, Display::get_width(), Display::get_height()), Color(0.0f, 0.0f, 0.0f, 0.25f));
-
-      Rectf rect = text_area->get_rect().grow(8.0f);
-
-      background.draw(Vector(30, 30));
-      
-      rect.top += 56;
-      Display::fill_rounded_rect(rect, 16.0f, Color(0.3f, 0.3f, 0.5f, 0.5f));
-      Display::draw_rounded_rect(rect, 16.0f, Color(1.0f, 1.0f, 1.0f, 0.5f));
-
-      text_area->draw();
-    }
-}
-
-void
-PDA::update(float delta, const Controller& controller)
-{
-  const InputEventLst& events = controller.get_events();
-  for(InputEventLst::const_iterator i = events.begin(); i != events.end(); ++i) {
-    if (i->type == BUTTON_EVENT)
-      {
-        if (i->axis.name == MENU_LEFT_BUTTON && i->button.down) 
-          {
-            state = static_cast<pda_state>(state + 1);
-            if (state > PDA_DIALOGS)
-              state = PDA_OBJECTIVES;
-          }
-        else if (i->axis.name == MENU_RIGHT_BUTTON && i->button.down) 
-          {
-            state = static_cast<pda_state>(state - 1);
-            if (state < PDA_OBJECTIVES)
-              state = PDA_DIALOGS;
-          }
-      }
-  }
-    
-  switch (state) {
-  case PDA_OBJECTIVES:
-    show_objectives();
-    break;
-  case PDA_DIALOGS:
-    show_dialogs();
-    break;
-  }
- 
-  if (new_text != old_text) {
-    delete text_area; // FIXME: Unneeded could just use set_text
-    text_area = new TextArea(Rectf(70, 83, 385, 520).grow(-12.0f), false);
-    text_area->set_font(Fonts::ttffont);
-    text_area->set_text(new_text);
-    
-    old_text = new_text;
-  }
-  
-  text_area->update(delta);
-}
-
-void
-PDA::add_dialog(const std::string& character, const std::string& text)
-{
-  dialogs.push_back(DialogEntry(character, text));
-}
-
-void
-PDA::add_objective(const std::string& name, const std::string& text)
-{
-  objectives.push_back(ObjectiveEntry(name, text));
-}
-
-void
-PDA::objective_complete(const std::string& name)
-{
-  for (std::vector<ObjectiveEntry>::iterator i = objectives.begin(); i != objectives.end(); ++i) {
-    if (i->name == name)
-      i->complete = true;
-      return;
-  }
-}
-
-bool
-PDA::is_objective_given(const std::string& name)
-{
-  for (std::vector<ObjectiveEntry>::iterator i = objectives.begin(); i != objectives.end(); ++i) {
-    if (i->name == name)
-      return true;
-  }
-  
-  return false;
-}
-
-bool
-PDA::is_objective_complete(const std::string& name)
-{
-  for (std::vector<ObjectiveEntry>::iterator i = objectives.begin(); i != objectives.end(); ++i) {
-    if (i->name == name && i->complete)
-      return true;
-  }
-  
-  return false;
-}
-
-void
-PDA::show_objectives()
-{
-  new_text = "<large>Personal Digital Assistant</large>\n";
-  new_text += "<b>objectives</b> - dialogs\n\n";
-  
-  for (std::vector<ObjectiveEntry>::reverse_iterator i = objectives.rbegin(); i != objectives.rend(); ++i) {
-    new_text += i->name;
-    new_text += ": ";
-    if (i->complete)
-      new_text += "complete\n";
-    else
-      new_text += "incomplete\n";
-    new_text += i->text + "\n\n";
-  }
-}
-
-void
-PDA::show_dialogs()
-{
-  new_text = "<large>Personal Digital Assistant</large>\n";
-  new_text += "objectives - <b>dialogs</b>\n\n";
-  
-  for (std::vector<DialogEntry>::reverse_iterator i = dialogs.rbegin(); i != dialogs.rend(); ++i) {
-    new_text += i->character;
-    new_text += ": ";
-    new_text += i->text + '\n';
-  }
-}
-
-/* EOF */

Deleted: trunk/windstille/src/pda.hpp
===================================================================
--- trunk/windstille/src/pda.hpp	2009-02-11 22:04:00 UTC (rev 2467)
+++ trunk/windstille/src/pda.hpp	2009-02-12 08:17:19 UTC (rev 2468)
@@ -1,77 +0,0 @@
-/*
-**  Windstille - A Sci-Fi Action-Adventure Game
-**  Copyright (C) 2005 Ingo Ruhnke <grumbel at gmx.de>
-**
-**  This program is free software: you can redistribute it and/or modify
-**  it under the terms of the GNU General Public License as published by
-**  the Free Software Foundation, either version 3 of the License, or
-**  (at your option) any later version.
-**  
-**  This program is distributed in the hope that it will be useful,
-**  but WITHOUT ANY WARRANTY; without even the implied warranty of
-**  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
-**  GNU General Public License for more details.
-**  
-**  You should have received a copy of the GNU General Public License
-**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
-*/
-
-#ifndef HEADER_WINDSTILLE_PDA_HPP
-#define HEADER_WINDSTILLE_PDA_HPP
-
-#include "sprite2d/sprite.hpp"
-#include "screen.hpp"
-
-class TextArea;
-
-class DialogEntry
-{
-public:
-  DialogEntry(const std::string& arg_character, const std::string& arg_text);
-  
-  std::string character;
-  std::string text;
-};
-
-class ObjectiveEntry
-{
-public:
-  ObjectiveEntry(const std::string& arg_name, const std::string& arg_text);
-  
-  std::string name;
-  std::string text;
-  bool complete;
-};
-
-/** */
-class PDA : public Screen
-{
-private:
-  Sprite    background;
-  TextArea* text_area;
-  std::vector<DialogEntry> dialogs;
-  std::vector<ObjectiveEntry> objectives;   
-  
-  std::string new_text;  
-  std::string old_text;
-  enum pda_state { PDA_OBJECTIVES, PDA_DIALOGS } state;
-
-  void show_objectives();
-  void show_dialogs();
-
-public:
-  PDA();
-
-  void draw();
-  void update(float delta, const Controller& controller);
-  void add_dialog(const std::string& character, const std::string& text);
-  
-  void add_objective(const std::string& name, const std::string& text);
-  void objective_complete(const std::string& name);
-  bool is_objective_given(const std::string& name);
-  bool is_objective_complete(const std::string& name);
-};
-
-#endif
-
-/* EOF */

Copied: trunk/windstille/src/screen/armature_test.cpp (from rev 2466, trunk/windstille/src/armature_test.cpp)


Property changes on: trunk/windstille/src/screen/armature_test.cpp
___________________________________________________________________
Name: svn:keywords
   + Id
Name: svn:mergeinfo
   + 
Name: svn:eol-style
   + native

Copied: trunk/windstille/src/screen/armature_test.hpp (from rev 2466, trunk/windstille/src/armature_test.hpp)


Property changes on: trunk/windstille/src/screen/armature_test.hpp
___________________________________________________________________
Name: svn:keywords
   + Id
Name: svn:mergeinfo
   + 
Name: svn:eol-style
   + native

Copied: trunk/windstille/src/screen/game_session.cpp (from rev 2466, trunk/windstille/src/game_session.cpp)
===================================================================
--- trunk/windstille/src/game_session.cpp	2009-02-11 21:56:29 UTC (rev 2466)
+++ trunk/windstille/src/screen/game_session.cpp	2009-02-12 08:17:19 UTC (rev 2468)
@@ -0,0 +1,496 @@
+/*
+**  Windstille - A Sci-Fi Action-Adventure Game
+**  Copyright (C) 2000,2005 Ingo Ruhnke <grumbel at gmx.de>
+**
+**  This program is free software: you can redistribute it and/or modify
+**  it under the terms of the GNU General Public License as published by
+**  the Free Software Foundation, either version 3 of the License, or
+**  (at your option) any later version.
+**  
+**  This program is distributed in the hope that it will be useful,
+**  but WITHOUT ANY WARRANTY; without even the implied warranty of
+**  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+**  GNU General Public License for more details.
+**  
+**  You should have received a copy of the GNU General Public License
+**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
+*/
+
+#include <math.h>
+#include <sstream>
+#include <stdarg.h>
+
+#include <squirrel.h> 
+#include <sqstdio.h> 
+#include <sqstdaux.h> 
+
+#include "menu_manager.hpp"
+#include "font/fonts.hpp"
+#include "engine/sector.hpp"
+#include "console.hpp"
+#include "engine/game_object.hpp"
+#include "objects/player.hpp"
+#include "tile/tile_map.hpp"
+#include "screen_manager.hpp"
+#include "view.hpp"
+#include "timer.hpp"
+#include "hud/energy_bar.hpp"
+#include "hud/dialog_manager.hpp"
+#include "windstille_main.hpp"
+#include "display/scene_context.hpp"
+#include "scripting/util.hpp"
+#include "scripting/wrapper.hpp"
+#include "input/input_manager.hpp"
+#include "particles/particle_system.hpp"
+#include "particles/spark_drawer.hpp"
+#include "particles/surface_drawer.hpp"
+#include "engine/script_manager.hpp"
+#include "sound/sound_manager.hpp"
+#include "hud/conversation.hpp"
+#include "collision/collision_engine.hpp"
+#include "objects/test_object.hpp"
+#include "hud/inventory.hpp"
+#include "display/surface_manager.hpp"
+#include "display/surface.hpp"
+#include "display/display.hpp"
+#include "hud/pda.hpp"
+
+#include "game_session.hpp"
+
+GameSession* GameSession::current_ = 0; 
+
+class GameSessionImpl
+{
+public:
+  SceneContext sc;
+
+  float fadeout_value;
+  float fade_time;
+  Sector* sector;
+  View    view;
+
+  std::string filename;
+
+  bool pause;
+  
+  /** Amount of how far the cutscene bars are visible, 0.0 means not
+      visible, 1.0 fully visible. */
+  float cutscene_value;
+
+  /** True if cutscene is active, false otherwhise */
+  bool  cutscene_mode;
+
+  enum { NO_ACTION, QUIT_ACTION, CHANGE_SECTOR_ACTION } next_action;
+  
+  enum { FADEIN, RUNNING, FADEOUT } fade_state;
+
+  Color fade_color;
+
+  // GUI Elements
+  ControllerHelpWindow controller_help_window;
+  EnergyBar     energy_bar;
+
+  // Active GUI Elements
+  DialogManager dialog_manager;
+  Conversation  conversation;
+  Inventory     inventory;
+  PDA           pda;
+
+  Screen* current_gui;
+
+  GameSessionImpl() {
+    sector         = 0;
+    current_gui    = 0;
+    cutscene_mode  = false;
+    cutscene_value = 0.0f;
+    fade_color     = Color(0.0f, 0.0f, 0.0f, 1.0f);
+    fade_state     = RUNNING;
+    fadeout_value  = 0.0f;
+    fade_time      = 1.0f;
+  }
+  ~GameSessionImpl() {
+    delete sector;
+  }
+
+  void draw();
+  void update(float delta, const Controller& controller);
+  void handle_event(const SDL_Event& event);
+};
+
+GameSession::GameSession(const std::string& arg_filename)
+  : impl(new GameSessionImpl())
+{
+  impl->filename = arg_filename;
+
+  if (debug) std::cout << "Creating new GameSession" << std::endl;
+  current_ = this;
+
+  impl->pause = false;
+  
+  if (1)
+    script_manager->run_script_file("scripts/init_script_vars.nut");
+    
+  set_sector(impl->filename);
+}
+
+GameSession::~GameSession()
+{
+}
+
+void
+GameSessionImpl::draw()
+{
+  view.draw(sc);
+
+  // Render the scene to the screen
+  sc.render();
+
+  if (!cutscene_mode)
+    {
+      // Draw HUD
+      energy_bar.draw();
+      controller_help_window.draw();
+    }
+
+  if (cutscene_mode || cutscene_value > 0.0f)
+    {
+      int border_size = static_cast<int>(75 * cutscene_value);
+      Display::fill_rect(Rect(Point(0, 0), Size(Display::get_width(), border_size)), 
+                         Color(0.0f, 0.0f, 0.0f, cutscene_value));
+      Display::fill_rect(Rect(Point(0, Display::get_height() - border_size), Size(Display::get_width(), border_size)), 
+                         Color(0.0f, 0.0f, 0.0f, cutscene_value));
+    }
+
+  if (current_gui)
+    current_gui->draw();
+
+  if (fade_state == FADEOUT || fade_state == FADEIN)
+    {
+      Display::fill_rect(Rect(0, 0, 
+                               Display::get_width(), Display::get_height()),
+                         Color(fade_color.r, fade_color.g, fade_color.b, fadeout_value));
+    }
+
+  if (pause)
+    {
+      if ((SDL_GetTicks() / 1000) % 2)
+        Fonts::vera20->draw(Display::get_width()/2, Display::get_height()/2, "Pause");
+    }
+}
+
+void
+GameSessionImpl::update(float delta, const Controller& controller)
+{  
+  if (cutscene_mode)
+    cutscene_value += delta * 0.75f;
+  else
+    cutscene_value -= delta * 0.75f;
+
+  if (cutscene_value > 1.0f)
+    cutscene_value = 1.0f;
+  else if (cutscene_value < 0.0f)
+    cutscene_value = 0.0f;
+
+  // if (controller.button_was_pressed(PAUSE_BUTTON))
+  // pause = !pause;
+
+  Uint8 *keystate = SDL_GetKeyState(NULL);
+
+  if(keystate[SDLK_KP1])
+    game_speed *= 1.0 - delta;
+  if(keystate[SDLK_KP3])
+    game_speed *= 1.0 + delta;
+  if(keystate[SDLK_KP5])
+    game_speed = 1.0;
+ 
+  delta *= game_speed;
+
+  if (!pause)
+    {
+      game_time += delta;
+      script_manager->update();
+      
+      view.update(delta, controller);
+      sector->update(delta);
+  
+      switch (fade_state)
+        {
+        case FADEIN:
+          if (fadeout_value <= 0.0f)
+            {
+              fade_state = RUNNING;
+              fadeout_value = 0.0f;
+              script_manager->fire_wakeup_event(ScriptManager::FADE_DONE);
+            }
+          else
+            {
+              fadeout_value -= delta * fade_time;
+            }
+          break;
+
+        case FADEOUT:
+          if (fadeout_value >= 1.0f)
+            { 
+              fadeout_value = 1.0f;
+              script_manager->fire_wakeup_event(ScriptManager::FADE_DONE);
+
+              switch(next_action)
+                {
+                case CHANGE_SECTOR_ACTION:
+                  GameSession::current()->set_sector(filename);
+                  break;
+
+                case QUIT_ACTION:
+                  screen_manager.quit();
+                  break;
+
+                default:
+                  break;
+                }
+            }
+          else
+            {
+              fadeout_value += delta * fade_time;
+            }
+          break;
+
+        case RUNNING:
+          energy_bar.update(delta, controller);
+          if (current_gui)
+            current_gui->update(delta, controller);
+          break;
+        }
+      
+      controller_help_window.update(delta, controller);
+    }
+
+  if (controller.button_was_pressed(PDA_BUTTON))
+    {
+      if (current_gui == &pda)
+        current_gui = 0;
+      else
+        current_gui = &pda;
+    }
+  else if (controller.button_was_pressed(INVENTORY_BUTTON))
+    {
+      if (current_gui == &inventory)
+        current_gui = 0;
+      else
+        current_gui = &inventory;
+    }
+  else if (controller.button_was_pressed(ESCAPE_BUTTON) ||
+           controller.button_was_pressed(PAUSE_BUTTON))
+    {
+      menu_manager.display_pause_menu();
+    }
+}
+
+void
+GameSession::change_sector(const std::string& arg_filename)
+{
+  impl->filename = arg_filename;
+ 
+  sound_manager->stop_music();
+
+  if (impl->fade_state == GameSessionImpl::FADEOUT)
+    {
+      GameSession::current()->set_sector(impl->filename);
+    }
+  else
+    {
+      impl->fade_time     = 1.0f;
+      impl->fade_state    = GameSessionImpl::FADEOUT;
+      impl->next_action   = GameSessionImpl::CHANGE_SECTOR_ACTION;
+    }
+}
+
+void
+GameSession::set_sector(const std::string& )
+{
+  delete impl->sector;
+  impl->sector = new Sector(impl->filename);
+ 
+  GameObject::set_world(impl->sector);
+
+  //FIXME: does the TestObject class still need to exist?
+  //sector->add(new TestObject());
+  
+  impl->sector->activate();
+  
+  if (debug) std::cout << "Finished changing sector" << std::endl;
+}
+
+void
+GameSessionImpl::handle_event(const SDL_Event& event)
+{
+  switch(event.type)
+  {
+    case SDL_KEYDOWN:
+    case SDL_KEYUP:
+      if (event.key.state)
+        {    
+          switch (event.key.keysym.sym)
+            {
+            case SDLK_1:
+              sc.set_render_mask(sc.get_render_mask() ^ SceneContext::COLORMAP);
+              console << "Toggled COLORMAP: " << ((sc.get_render_mask() & SceneContext::COLORMAP) > 0) << std::endl;
+              break;
+
+            case SDLK_2:
+              sc.set_render_mask(sc.get_render_mask() ^ SceneContext::LIGHTMAP);
+              console << "Toggled LIGHTMAP: " << ((sc.get_render_mask() & SceneContext::LIGHTMAP) > 0) << std::endl;
+              break;
+      
+            case SDLK_3:
+              sc.set_render_mask(sc.get_render_mask() ^ SceneContext::HIGHLIGHTMAP);
+              console << "Toggled HIGHLIGHTMAP: " << ((sc.get_render_mask() & SceneContext::HIGHLIGHTMAP) > 0) << std::endl;
+              break;      
+  
+            case SDLK_4:
+              sc.set_render_mask(sc.get_render_mask() ^ SceneContext::LIGHTMAPSCREEN);
+              console << "Toggled LIGHTMAP: " << ((sc.get_render_mask() & SceneContext::LIGHTMAPSCREEN) > 0) << std::endl;
+              break;
+
+            case SDLK_5:
+              sc.set_render_mask(sc.get_render_mask() ^ SceneContext::BLURMAP);
+              console << "Toggled blurmap: " << ((sc.get_render_mask() & SceneContext::BLURMAP) > 0) << std::endl;
+              break;
+
+
+            case SDLK_c:
+              if (debug) {
+                collision_debug = !collision_debug;
+                console << "Collision Debugging " << (collision_debug ? "enabled" : "disabled") << std::endl;
+              }
+              break;
+
+            case SDLK_F2:
+              menu_manager.display_debug_menu();
+              break;
+        
+            default:
+              break;
+            }
+        }
+      break;
+        
+    case SDL_MOUSEBUTTONDOWN:
+      {
+        Vector real_pos = GameSession::current()->get_view()->screen_to_world(Vector(event.button.x,
+                                                                                  event.button.y));      
+        console << "Click at: " << int(real_pos.x) << ", " << int(real_pos.y) << std::endl;
+      }
+      break;
+  }
+}
+
+void
+GameSession::quit()
+{
+  if (impl->fade_state != GameSessionImpl::FADEOUT)
+    {
+      sound_manager->stop_music();
+      impl->fade_state  = GameSessionImpl::FADEOUT;
+      impl->fade_time   = 1.0f;
+      impl->next_action = GameSessionImpl::QUIT_ACTION;
+    }
+}
+
+PDA&
+GameSession::get_pda()
+{
+  return impl->pda;
+}
+
+void
+GameSession::draw()
+{
+  impl->draw();
+}
+
+void
+GameSession::update(float delta, const Controller& controller)
+{
+  impl->update(delta, controller);
+}
+
+void
+GameSession::handle_event(const SDL_Event& event)
+{
+  impl->handle_event(event);
+}
+
+View*
+GameSession::get_view() 
+{
+  return &impl->view; 
+}
+
+void
+GameSession::set_control_state(ControlState state) 
+{
+  switch(state)
+    {
+    case DIALOG:
+      impl->current_gui = &impl->dialog_manager;
+      break;
+
+    case CONVERSATION:
+      impl->current_gui = &impl->conversation;
+      break;
+
+    case GAME:
+      impl->current_gui = 0;
+      break;
+    }
+}
+
+bool
+GameSession::is_active() const
+{
+  return (impl->current_gui == 0);
+}
+
+void
+GameSession::set_cutscene_mode(bool t)
+{
+  if (t != impl->cutscene_mode)
+    {
+      impl->cutscene_mode  = t;
+    }
+}
+
+void
+GameSession::fadeout(float time, const Color& color)
+{
+  if (time == 0.0)
+    { // directly go to a state of solid color, no fading
+      impl->fadeout_value  = 1.0f;
+      impl->fade_color  = color;
+      impl->fade_state  = GameSessionImpl::FADEOUT;
+      impl->next_action = GameSessionImpl::NO_ACTION;
+    }
+  else
+    {
+      impl->fade_time   = 1.0f/time;
+      impl->fade_color  = color;
+      impl->fade_state  = GameSessionImpl::FADEOUT;
+      impl->next_action = GameSessionImpl::NO_ACTION;
+    }
+}
+
+void
+GameSession::fadein(float time)
+{
+  impl->fade_time   = 1.0f/time;
+  impl->fade_state  = GameSessionImpl::FADEIN;
+  impl->next_action = GameSessionImpl::NO_ACTION;
+}
+
+SceneContext*
+GameSession::get_scene_context()
+{
+  return &(impl->sc);
+}
+
+/* EOF */


Property changes on: trunk/windstille/src/screen/game_session.cpp
___________________________________________________________________
Name: svn:keywords
   + Id
Name: svn:mergeinfo
   + 
Name: svn:eol-style
   + native

Copied: trunk/windstille/src/screen/game_session.hpp (from rev 2466, trunk/windstille/src/game_session.hpp)
===================================================================
--- trunk/windstille/src/game_session.hpp	2009-02-11 21:56:29 UTC (rev 2466)
+++ trunk/windstille/src/screen/game_session.hpp	2009-02-12 08:17:19 UTC (rev 2468)
@@ -0,0 +1,93 @@
+/*
+**  Windstille - A Sci-Fi Action-Adventure Game
+**  Copyright (C) 2000,2005 Ingo Ruhnke <grumbel at gmx.de>
+**
+**  This program is free software: you can redistribute it and/or modify
+**  it under the terms of the GNU General Public License as published by
+**  the Free Software Foundation, either version 3 of the License, or
+**  (at your option) any later version.
+**  
+**  This program is distributed in the hope that it will be useful,
+**  but WITHOUT ANY WARRANTY; without even the implied warranty of
+**  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+**  GNU General Public License for more details.
+**  
+**  You should have received a copy of the GNU General Public License
+**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
+*/
+
+#ifndef HEADER_WINDSTILLE_GAME_SESSION_HPP
+#define HEADER_WINDSTILLE_GAME_SESSION_HPP
+
+#include <string>
+#include <squirrel.h>
+#include "display/scene_context.hpp"
+#include "console.hpp"
+#include "screen.hpp"
+#include "hud/controller_help_window.hpp"
+#include "sprite2d/sprite.hpp"
+#include "globals.hpp"
+
+class PDA;
+class EnergyBar;
+class View;
+class Sector;
+class Player;
+class DialogManager;
+class Conversation;
+class Inventory;
+
+class GameSessionImpl;
+
+class GameSession : public Screen
+{
+public:
+  enum ControlState { DIALOG, GAME, CONVERSATION };
+private:
+  static GameSession* current_; 
+public:
+  static GameSession* current() { return current_; } 
+
+  GameSession (const std::string& arg_filename);
+  ~GameSession ();
+
+  View* get_view();
+
+  /** Return true when the gameplay is currently active, return false
+      if PDA, Conversation or other things are active */
+  bool is_active() const;
+
+  void set_control_state(ControlState state);
+
+  /** Switches the sector instantly without fadeout */
+  void set_sector(const std::string& filename);
+
+  /** Fades out then switches sectors and fades in again */
+  void change_sector(const std::string& filename);
+
+  /** Set the GameSession into a mode for cutscenes, this means for
+      most part to switch into a 16:9 viewmode with black borders */
+  void set_cutscene_mode(bool t);
+
+  /** \a time Time in seconds till the fade is complete 
+      \a color Color to which the screen should fade */
+  void fadeout(float time, const Color& color);
+  void fadein(float time);
+
+  void draw();
+  void update(float delta, const Controller& controller);
+  void handle_event(const SDL_Event& event);
+
+  PDA& get_pda();
+
+  void quit();
+
+  SceneContext* get_scene_context();
+
+private:
+  boost::shared_ptr<GameSessionImpl> impl;
+};
+
+#endif
+
+/* EOF */


Property changes on: trunk/windstille/src/screen/game_session.hpp
___________________________________________________________________
Name: svn:keywords
   + Id
Name: svn:mergeinfo
   + 
Name: svn:eol-style
   + native

Copied: trunk/windstille/src/screen/geometry_test.cpp (from rev 2466, trunk/windstille/src/geometry_test.cpp)


Property changes on: trunk/windstille/src/screen/geometry_test.cpp
___________________________________________________________________
Name: svn:keywords
   + Id
Name: svn:mergeinfo
   + 
Name: svn:eol-style
   + native

Copied: trunk/windstille/src/screen/geometry_test.hpp (from rev 2466, trunk/windstille/src/geometry_test.hpp)


Property changes on: trunk/windstille/src/screen/geometry_test.hpp
___________________________________________________________________
Name: svn:keywords
   + Id
Name: svn:mergeinfo
   + 
Name: svn:eol-style
   + native

Copied: trunk/windstille/src/screen/navigation_test.cpp (from rev 2466, trunk/windstille/src/navigation_test.cpp)


Property changes on: trunk/windstille/src/screen/navigation_test.cpp
___________________________________________________________________
Name: svn:keywords
   + Id
Name: svn:mergeinfo
   + 
Name: svn:eol-style
   + native

Copied: trunk/windstille/src/screen/navigation_test.hpp (from rev 2466, trunk/windstille/src/navigation_test.hpp)


Property changes on: trunk/windstille/src/screen/navigation_test.hpp
___________________________________________________________________
Name: svn:keywords
   + Id
Name: svn:mergeinfo
   + 
Name: svn:eol-style
   + native

Copied: trunk/windstille/src/screen/particle_viewer.cpp (from rev 2466, trunk/windstille/src/particle_viewer.cpp)
===================================================================
--- trunk/windstille/src/particle_viewer.cpp	2009-02-11 21:56:29 UTC (rev 2466)
+++ trunk/windstille/src/screen/particle_viewer.cpp	2009-02-12 08:17:19 UTC (rev 2468)
@@ -0,0 +1,203 @@
+/*
+**  Windstille - A Sci-Fi Action-Adventure Game
+**  Copyright (C) 2005 Ingo Ruhnke <grumbel at gmx.de>
+**
+**  This program is free software: you can redistribute it and/or modify
+**  it under the terms of the GNU General Public License as published by
+**  the Free Software Foundation, either version 3 of the License, or
+**  (at your option) any later version.
+**  
+**  This program is distributed in the hope that it will be useful,
+**  but WITHOUT ANY WARRANTY; without even the implied warranty of
+**  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+**  GNU General Public License for more details.
+**  
+**  You should have received a copy of the GNU General Public License
+**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
+*/
+
+#include "util/sexpr_file_reader.hpp"
+#include "input/controller.hpp"
+#include "screen_manager.hpp"
+#include "gui/gui_manager.hpp"
+#include "screen/particle_viewer.hpp"
+
+// Components
+#include "gui/button.hpp"
+#include "gui/label.hpp"
+#include "gui/slider.hpp"
+#include "gui/root_component.hpp"
+#include "gui/grid_component.hpp"
+#include "gui/tab_component.hpp"
+#include "gui/list_view.hpp"
+#include "gui/text_view.hpp"
+#include "gui/automap.hpp"
+
+class ParticleSystemGUI
+{
+public:
+  ParticleSystem* psystem;
+  gui::GridComponent* grid;
+  gui::Slider* gravity_slider;
+  gui::Slider* velocity_slider;
+  gui::Slider* count_slider;
+  
+  ParticleSystemGUI(gui::Component* parent, ParticleSystem* psystem_)
+    : psystem(psystem_)
+  {
+    using namespace gui;
+    grid = new GridComponent(Rectf(200, 120, 600, 220), 2, 3, parent);
+    grid->set_padding(4);
+
+    gravity_slider  = new Slider(grid);
+    velocity_slider = new Slider(grid);
+    count_slider    = new Slider(grid);
+
+    gravity_slider->set_range(-10, 10);
+    gravity_slider->set_step(3);
+    gravity_slider->set_pos(1);
+
+    velocity_slider->set_range(-500, 500);
+    velocity_slider->set_step(50);
+    velocity_slider->set_pos(10);//psystem->get_count());
+
+    count_slider->set_range(1, 500);
+    count_slider->set_step(10);
+    count_slider->set_pos(psystem->get_count());
+
+    grid->pack(new Label("Gravitation:"), 0, 0);
+    grid->pack(new Label("Velocity:"),    0, 1);
+    grid->pack(new Label("Count:"),       0, 2);
+
+    grid->pack(gravity_slider,  1, 0);
+    grid->pack(velocity_slider, 1, 1);
+    grid->pack(count_slider,    1, 2);    
+  }
+
+  void update()
+  {
+    psystem->set_count(count_slider->get_pos());
+  }
+
+  gui::Component* get_component() { return grid; }
+};
+
+ParticleViewer::ParticleViewer()
+{
+  background = Sprite("images/greychess.sprite");
+  show_gui = false;
+
+  using namespace gui;
+
+  manager = new GUIManager();
+  tab = new TabComponent(Rectf(200, 50, 600, 250), manager->get_root());
+  
+  manager->get_root()->add_child(tab);
+}
+
+ParticleViewer::~ParticleViewer()
+{
+}
+
+void
+ParticleViewer::load(const std::string& filename)
+{
+  std::cout << "ParticleViewer: loading " << filename << std::endl;
+  
+  for(Systems::iterator i = systems.begin(); i != systems.end(); ++i)
+    delete *i;
+  systems.clear();
+  
+  FileReader root_reader = FileReader::parse(filename);
+  if(root_reader.get_name() != "particle-systems") {
+    std::ostringstream msg;
+    msg << "'" << filename << "' is not a particle-system file";
+    throw std::runtime_error(msg.str());
+  }
+
+  std::vector<FileReader> sections = root_reader.get_sections();
+  for(std::vector<FileReader>::iterator i = sections.begin(); i != sections.end(); ++i)
+    { 
+      if (i->get_name() == "particle-system")
+      {
+        systems.push_back(new ParticleSystem(*i));
+
+        guis.push_back(new ParticleSystemGUI(tab, systems.back()));
+        tab->pack("Testomap", guis.back()->get_component());
+      }
+  }
+
+  std::cout << systems.size() << " particle systems ready to go" << std::endl;
+}
+  
+void
+ParticleViewer::draw()
+{
+  sc.reset_modelview();
+
+  for(int y = -background.get_width(); y < 600 + background.get_height(); y += background.get_height())
+    for(int x = -background.get_width(); x < 800 + background.get_width(); x += background.get_width())
+      sc.color().draw(background, Vector(x + int(pos.x) % background.get_width(),
+                                         y + int(pos.y) % background.get_height()), -900);
+
+  sc.translate(400 + pos.x, 600 + pos.y);
+  sc.light().fill_screen(Color(0.4, 0.4, 0.4));
+  //sc.light().fill_screen(Color(1.0, 1.0, 1.0));
+  sc.color().fill_screen(Color(0.0, 0.0, 0.0));
+
+  for(Systems::iterator i = systems.begin(); i != systems.end(); ++i)
+    (*i)->draw(sc);
+
+  sc.render();
+
+  if (show_gui)
+    {
+      manager->draw();
+    }
+}
+
+void
+ParticleViewer::update(float delta, const Controller& controller)
+{
+  for(Systems::iterator i = systems.begin(); i != systems.end(); ++i)
+    (*i)->update(delta);
+
+  if (!show_gui)
+    {
+      pos.x += controller.get_axis_state(X_AXIS) * delta * 100.0f;
+      pos.y += controller.get_axis_state(Y_AXIS) * delta * 100.0f;
+
+      if (controller.button_was_pressed(OK_BUTTON))
+        {
+          // FIXME: Disable GUI, since its crashy
+          // show_gui = true;
+          // manager->get_root()->get_focus()->set_active(true);
+        }
+      else if (controller.button_was_pressed(CANCEL_BUTTON) ||
+               controller.button_was_pressed(ESCAPE_BUTTON))
+        {
+          screen_manager.pop_screen();
+        }
+    }
+  else
+    {
+      if (!manager->get_root()->is_active())
+        {
+          show_gui = false;
+        }
+      else
+        {
+          manager->update(delta, controller);
+        }
+    }
+
+  for(ParticleSystemGUIs::iterator i = guis.begin(); i != guis.end(); ++i)
+    {
+      (*i)->update();
+    }
+
+  //systems[3]->set_count(count_slider->get_pos());
+  //systems[3]->set_velocity(velocity_slider->get_pos(), velocity_slider->get_pos());
+}
+
+/* EOF */


Property changes on: trunk/windstille/src/screen/particle_viewer.cpp
___________________________________________________________________
Name: svn:mergeinfo
   + 

Copied: trunk/windstille/src/screen/particle_viewer.hpp (from rev 2466, trunk/windstille/src/particle_viewer.hpp)


Property changes on: trunk/windstille/src/screen/particle_viewer.hpp
___________________________________________________________________
Name: svn:mergeinfo
   + 

Copied: trunk/windstille/src/screen/screen.cpp (from rev 2466, trunk/windstille/src/screen.cpp)


Property changes on: trunk/windstille/src/screen/screen.cpp
___________________________________________________________________
Name: svn:keywords
   + Id
Name: svn:mergeinfo
   + 
Name: svn:eol-style
   + native

Copied: trunk/windstille/src/screen/screen.hpp (from rev 2466, trunk/windstille/src/screen.hpp)


Property changes on: trunk/windstille/src/screen/screen.hpp
___________________________________________________________________
Name: svn:keywords
   + Id
Name: svn:mergeinfo
   + 
Name: svn:eol-style
   + native

Copied: trunk/windstille/src/screen/screen_manager.cpp (from rev 2466, trunk/windstille/src/screen_manager.cpp)


Property changes on: trunk/windstille/src/screen/screen_manager.cpp
___________________________________________________________________
Name: svn:mergeinfo
   + 

Copied: trunk/windstille/src/screen/screen_manager.hpp (from rev 2466, trunk/windstille/src/screen_manager.hpp)


Property changes on: trunk/windstille/src/screen/screen_manager.hpp
___________________________________________________________________
Name: svn:mergeinfo
   + 

Copied: trunk/windstille/src/screen/sprite2dview.cpp (from rev 2466, trunk/windstille/src/sprite2dview.cpp)


Property changes on: trunk/windstille/src/screen/sprite2dview.cpp
___________________________________________________________________
Name: svn:mergeinfo
   + 

Copied: trunk/windstille/src/screen/sprite2dview.hpp (from rev 2466, trunk/windstille/src/sprite2dview.hpp)


Property changes on: trunk/windstille/src/screen/sprite2dview.hpp
___________________________________________________________________
Name: svn:mergeinfo
   + 

Copied: trunk/windstille/src/screen/sprite3dview.cpp (from rev 2466, trunk/windstille/src/sprite3dview.cpp)


Property changes on: trunk/windstille/src/screen/sprite3dview.cpp
___________________________________________________________________
Name: svn:mergeinfo
   + 

Copied: trunk/windstille/src/screen/sprite3dview.hpp (from rev 2466, trunk/windstille/src/sprite3dview.hpp)


Property changes on: trunk/windstille/src/screen/sprite3dview.hpp
___________________________________________________________________
Name: svn:mergeinfo
   + 

Copied: trunk/windstille/src/screen/title_screen.cpp (from rev 2466, trunk/windstille/src/title_screen.cpp)


Property changes on: trunk/windstille/src/screen/title_screen.cpp
___________________________________________________________________
Name: svn:keywords
   + Id
Name: svn:mergeinfo
   + 
Name: svn:eol-style
   + native

Copied: trunk/windstille/src/screen/title_screen.hpp (from rev 2466, trunk/windstille/src/title_screen.hpp)


Property changes on: trunk/windstille/src/screen/title_screen.hpp
___________________________________________________________________
Name: svn:keywords
   + Id
Name: svn:mergeinfo
   + 
Name: svn:eol-style
   + native

Deleted: trunk/windstille/src/screen.cpp
===================================================================
--- trunk/windstille/src/screen.cpp	2009-02-11 22:04:00 UTC (rev 2467)
+++ trunk/windstille/src/screen.cpp	2009-02-12 08:17:19 UTC (rev 2468)
@@ -1,40 +0,0 @@
-/*
-**  Windstille - A Sci-Fi Action-Adventure Game
-**  Copyright (C) 2000,2005 Ingo Ruhnke <grumbel at gmx.de>
-**
-**  This program is free software: you can redistribute it and/or modify
-**  it under the terms of the GNU General Public License as published by
-**  the Free Software Foundation, either version 3 of the License, or
-**  (at your option) any later version.
-**  
-**  This program is distributed in the hope that it will be useful,
-**  but WITHOUT ANY WARRANTY; without even the implied warranty of
-**  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
-**  GNU General Public License for more details.
-**  
-**  You should have received a copy of the GNU General Public License
-**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
-*/
-
-#include <math.h>
-#include <iostream>
-#include "display/display.hpp"
-#include "windstille_main.hpp"
-#include "screen.hpp"
-#include "font/fonts.hpp"
-#include "globals.hpp"
-#include "console.hpp"
-#include "config.hpp"
-#include "input/input_manager.hpp"
-#include "input/input_manager_sdl.hpp"
-#include "sound/sound_manager.hpp"
-
-Screen::Screen()
-{
-}
-
-Screen::~Screen()
-{
-}
-
-/* EOF */

Deleted: trunk/windstille/src/screen.hpp
===================================================================
--- trunk/windstille/src/screen.hpp	2009-02-11 22:04:00 UTC (rev 2467)
+++ trunk/windstille/src/screen.hpp	2009-02-12 08:17:19 UTC (rev 2468)
@@ -1,48 +0,0 @@
-/*
-**  Windstille - A Sci-Fi Action-Adventure Game
-**  Copyright (C) 2000,2005 Ingo Ruhnke <grumbel at gmx.de>
-**
-**  This program is free software: you can redistribute it and/or modify
-**  it under the terms of the GNU General Public License as published by
-**  the Free Software Foundation, either version 3 of the License, or
-**  (at your option) any later version.
-**  
-**  This program is distributed in the hope that it will be useful,
-**  but WITHOUT ANY WARRANTY; without even the implied warranty of
-**  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
-**  GNU General Public License for more details.
-**  
-**  You should have received a copy of the GNU General Public License
-**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
-*/
-
-#ifndef HEADER_WINDSTILLE_SCREEN_HPP
-#define HEADER_WINDSTILLE_SCREEN_HPP
-
-#include <SDL.h>
-
-class Controller;
-
-/** */
-class Screen
-{
-public:
-  Screen();
-  virtual ~Screen();
-
-  virtual void on_startup() {}
-
-  /** Draw the current screen */
-  virtual void draw() =0;
-
-  /** Update the current screen by \a delta and with input from \a
-      controller */
-  virtual void update(float delta, const Controller& controller) =0;
-
-  /** Called once a new SDL_Event arrives */
-  virtual void handle_event(const SDL_Event& ) {}
-};
-
-#endif
-
-/* EOF */

Deleted: trunk/windstille/src/screen_manager.cpp
===================================================================
--- trunk/windstille/src/screen_manager.cpp	2009-02-11 22:04:00 UTC (rev 2467)
+++ trunk/windstille/src/screen_manager.cpp	2009-02-12 08:17:19 UTC (rev 2468)
@@ -1,363 +0,0 @@
-/*
-**  Windstille - A Sci-Fi Action-Adventure Game
-**  Copyright (C) 2005 Ingo Ruhnke <grumbel at gmx.de>
-**
-**  This program is free software: you can redistribute it and/or modify
-**  it under the terms of the GNU General Public License as published by
-**  the Free Software Foundation, either version 3 of the License, or
-**  (at your option) any later version.
-**  
-**  This program is distributed in the hope that it will be useful,
-**  but WITHOUT ANY WARRANTY; without even the implied warranty of
-**  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
-**  GNU General Public License for more details.
-**  
-**  You should have received a copy of the GNU General Public License
-**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
-*/
-
-#include <boost/format.hpp>
-#include <iostream>
-#ifndef WIN32
-#include <unistd.h>
-#endif
-#include "game_session.hpp"
-#include "input/input_manager_sdl.hpp"
-#include "display/display.hpp"
-#include "globals.hpp"
-#include "screen.hpp"
-#include "font/fonts.hpp"
-#include "config.hpp"
-#include "input/input_manager.hpp"
-#include "input/input_configurator.hpp"
-#include "sound/sound_manager.hpp"
-#include "gui/gui_manager.hpp"
-#include "screen_manager.hpp"
-
-// GUI Stuff, can be removed if gui is a bit better organised
-#include "gui/button.hpp"
-#include "gui/slider.hpp"
-#include "gui/root_component.hpp"
-#include "gui/grid_component.hpp"
-#include "gui/menu_component.hpp"
-#include "gui/tab_component.hpp"
-#include "gui/list_view.hpp"
-#include "gui/text_view.hpp"
-#include "gui/automap.hpp"
-
-#ifdef WIN32
-#define snprintf _snprintf
-#endif
-
-ScreenManager screen_manager; 
-
-ScreenManager::ScreenManager()
-  : time_counter(0),
-    frame_counter(0),
-    last_fps(0),
-    overlap_delta(0),
-    do_quit(false)
-{
-  screen_action = NONE;
-  screen_screen = 0;
-
-  overlay_screen_action = NONE;
-  overlay_screen_screen = 0;
-
-  ticks = 0;
-}
-
-ScreenManager::~ScreenManager()
-{
-}
-
-void
-ScreenManager::run()
-{
-  do_quit = false;
-
-  ticks = SDL_GetTicks();
-
-  while (!do_quit)
-    {
-      /// Amount of time the world moves forward each update(), this is
-      /// independed of the number of frames and always constant
-      static const float step = .001;
-
-      Uint32 now = SDL_GetTicks();
-      float delta = static_cast<float>(now - ticks) / 1000.0f + overlap_delta;
-      ticks = now;
-
-      time_counter  += delta;
-
-      while (delta > step)
-        {
-          InputManager::update(delta);
-
-          console.update(step);
-          if (!console.is_active())
-            {
-              if (!overlay_screens.empty())
-                overlay_screens.back()->update(step, InputManager::get_controller());
-              else if (!screens.empty())
-                screens.back()->update(step, InputManager::get_controller());
-            }
-          InputManager::clear();
-  
-          delta -= step;
-        }
-
-      overlap_delta = delta;
-
-      sound_manager->update();
-
-      if (!screens.empty())
-        screens.back()->draw();
-
-      if (!overlay_screens.empty())
-        overlay_screens.back()->draw();
-
-      console.draw();
-
-      if (config.get_bool("show-fps"))
-        draw_fps();
-
-      SDL_GL_SwapBuffers();
-      frame_counter += 1;
-
-      // Commit any pending screen actions
-      switch(overlay_screen_action)
-        {
-        case PUSH_SCREEN:
-          overlay_screens.push_back(overlay_screen_screen);
-          break;
-
-        case POP_SCREEN:
-          overlay_screens.pop_back();
-          break;
-
-        case CLEAR_SCREENS:
-          for(std::vector<Screen*>::iterator i = overlay_screens.begin(); i != overlay_screens.end(); ++i)
-            delete *i;
-          overlay_screens.clear();
-          break;
-
-        case NONE:
-          // nothing
-          break;
-        }
-      overlay_screen_action = NONE;
-
-      switch(screen_action)
-        {
-        case PUSH_SCREEN:
-          screens.push_back(screen_screen);
-          screens.back()->on_startup();
-          break;
-
-        case POP_SCREEN:
-          screens.pop_back();
-          if (!screens.empty())
-            screens.back()->on_startup();
-          break;
-
-        case CLEAR_SCREENS:
-          for(std::vector<Screen*>::iterator i = screens.begin(); i != screens.end(); ++i)
-            delete *i;
-          screens.clear();
-          break;
-
-        case NONE:
-          // nothing
-          break;
-        }
-      screen_action = NONE;
-
-      poll_events();
-    }
-}
-
-void
-ScreenManager::poll_events()
-{
-  SDL_Event event;
-  while(SDL_PollEvent(&event))
-    {
-      switch(event.type)
-        {
-        case SDL_QUIT:
-          // FIXME: This should be a bit more gentle, but will do for now
-          std::cout << "Ctrl-c or Window-close pressed, game is going to quit" << std::endl;
-          quit();
-          break;
-          
-        case SDL_ACTIVEEVENT:
-          // event.active
-          break;
-          
-        case SDL_VIDEORESIZE:
-          // event.resize
-          break;
-              
-        case SDL_VIDEOEXPOSE:
-          // event.expose
-          break;
-                
-        case SDL_USEREVENT:
-          // event.user
-          break;
-                    
-        case SDL_SYSWMEVENT:
-          // event.syswm
-          break;
-          break;
-
-        case SDL_KEYDOWN:
-        case SDL_KEYUP:
-          if (event.key.state)
-            {    
-              switch (event.key.keysym.sym)
-                {
-                case SDLK_F6:
-                  SDL_ShowCursor(SDL_ENABLE);   // SDL_ENABLE to show the mouse cursor (default)
-                  SDL_WM_GrabInput(SDL_GRAB_OFF); // SDL_GRAB_OFF to not grab input (default)
-                  break;
-
-                case SDLK_F7:
-                  SDL_ShowCursor(SDL_DISABLE);   // SDL_ENABLE to show the mouse cursor (default)
-                  SDL_WM_GrabInput(SDL_GRAB_ON); // SDL_GRAB_OFF to not grab input (default)
-                  break;
-      
-                case SDLK_F9:
-                  push_overlay(new InputConfigurator());
-                  break;
-
-                case SDLK_F10:
-                  config.set_bool("show-fps", !config.get_bool("show-fps"));
-                  break;
-              
-                case SDLK_F11:
-                  config.set_bool("fullscreen", !config.get_bool("fullscreen"));
-                  Display::set_fullscreen(config.get_bool("fullscreen"));
-                  break;
-              
-#ifndef WIN32
-                case SDLK_F12:
-                  {
-                    // FIXME: Replace this with Physfs stuff
-                    int count = 0;
-                    std::string filename;
-                    do {
-                      filename = (boost::format("/tmp/windstille%04d.png") % count).str();
-                      count += 1;
-                    } while(access(filename.c_str(), F_OK) == 0);
-
-                    Display::save_screenshot(filename);
-                    console << "Writing screenshot to: '" << filename << "'" << std::endl;
-                  }
-                  break;
-#endif
-              
-                default:
-                  if (!console.is_active())
-                    {
-                      if (!overlay_screens.empty())
-                        overlay_screens.back()->handle_event(event);
-                      else if (!screens.empty())
-                        screens.back()->handle_event(event);
-                    }
-                  break;
-                }
-            }
-              
-          if (!console.is_active() && event.key.state && event.key.keysym.sym == SDLK_F1)
-            {
-              console.activate();
-            }
-          else
-            {
-              if (InputManagerSDL::current())
-                InputManagerSDL::current()->on_event(event);
-            }
-          break;
-
-        case SDL_MOUSEBUTTONUP:
-        case SDL_MOUSEBUTTONDOWN:
-        case SDL_MOUSEMOTION:
-        case SDL_JOYAXISMOTION:
-        case SDL_JOYBALLMOTION:
-        case SDL_JOYHATMOTION:
-        case SDL_JOYBUTTONUP:
-        case SDL_JOYBUTTONDOWN:
-          if (InputManagerSDL::current())
-            InputManagerSDL::current()->on_event(event);
-
-          if (!overlay_screens.empty())
-            overlay_screens.back()->handle_event(event);
-          break;
-        
-        default:
-          if (!overlay_screens.empty())
-            overlay_screens.back()->handle_event(event);
-          else if (!screens.empty())
-            screens.back()->handle_event(event);
-          break;
-        }
-    }
-}
-
-void 
-ScreenManager::draw_fps()
-{
-  if(time_counter > 1) 
-    {
-      last_fps = int(frame_counter / time_counter);
-
-      time_counter  = fmodf(time_counter, 1.0);
-      frame_counter = 0;
-    }
-  
-  char output[20];
-  snprintf(output, sizeof(output), "FPS: %d", last_fps);
-  Fonts::ttffont->draw(Display::get_width() - 100, 30, output);
-}
-
-void
-ScreenManager::push_screen(Screen* s)
-{
-  screen_action = PUSH_SCREEN;
-  screen_screen = s;
-}
-
-void
-ScreenManager::pop_screen()
-{
-  screen_action = POP_SCREEN;
-}
-
-void
-ScreenManager::push_overlay(Screen* s)
-{
-  overlay_screen_action = PUSH_SCREEN;
-  overlay_screen_screen = s;
-}
-
-void
-ScreenManager::pop_overlay()
-{
-  overlay_screen_action = POP_SCREEN;
-}
-
-void
-ScreenManager::clear_overlay()
-{
-  overlay_screen_action = CLEAR_SCREENS;
-}
-
-void
-ScreenManager::quit()
-{
-  do_quit = true;
-}
-
-/* EOF */

Deleted: trunk/windstille/src/screen_manager.hpp
===================================================================
--- trunk/windstille/src/screen_manager.hpp	2009-02-11 22:04:00 UTC (rev 2467)
+++ trunk/windstille/src/screen_manager.hpp	2009-02-12 08:17:19 UTC (rev 2468)
@@ -1,81 +0,0 @@
-/*
-**  Windstille - A Sci-Fi Action-Adventure Game
-**  Copyright (C) 2005 Ingo Ruhnke <grumbel at gmx.de>
-**
-**  This program is free software: you can redistribute it and/or modify
-**  it under the terms of the GNU General Public License as published by
-**  the Free Software Foundation, either version 3 of the License, or
-**  (at your option) any later version.
-**  
-**  This program is distributed in the hope that it will be useful,
-**  but WITHOUT ANY WARRANTY; without even the implied warranty of
-**  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
-**  GNU General Public License for more details.
-**  
-**  You should have received a copy of the GNU General Public License
-**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
-*/
-
-#ifndef HEADER_WINDSTILLE_SCREEN_MANAGER_HPP
-#define HEADER_WINDSTILLE_SCREEN_MANAGER_HPP
-
-class Screen;
-
-/**
- *  The ScreenManager handles overlays like Option Menus, Main Menus
- *  and such
- */
-class ScreenManager
-{
-private:
-  enum ScreenAction { NONE, POP_SCREEN, PUSH_SCREEN, CLEAR_SCREENS };
-
-  std::vector<Screen*> screens;
-  ScreenAction screen_action;
-  Screen*      screen_screen;
-
-  std::vector<Screen*> overlay_screens;
-  ScreenAction overlay_screen_action;
-  Screen*      overlay_screen_screen;
-
-  unsigned int ticks;
-
-  float time_counter;
-  int   frame_counter;
-  int   last_fps;
-  float overlap_delta;
-  bool  do_quit;
-
-public:
-  ScreenManager();
-  ~ScreenManager();
-
-  /** Displays the previously set screen in until quit() is called */
-  void run();
-
-  /** Breaks out of the run() function */
-  void quit();
-
-  void push_screen(Screen* s);
-  void pop_screen();
-
-  void push_overlay(Screen* s);
-  void pop_overlay();
-  void clear_overlay();
-
-  // Callbacks, FIXME: Could be moved to a seperate class
-  void show_fps(int i);
-
-private:
-  void poll_events();
-  void draw_fps();
-
-  ScreenManager (const ScreenManager&);
-  ScreenManager& operator= (const ScreenManager&);
-};
-
-extern ScreenManager screen_manager; 
-
-#endif
-
-/* EOF */

Modified: trunk/windstille/src/scripting/interface.cpp
===================================================================
--- trunk/windstille/src/scripting/interface.cpp	2009-02-11 22:04:00 UTC (rev 2467)
+++ trunk/windstille/src/scripting/interface.cpp	2009-02-12 08:17:19 UTC (rev 2468)
@@ -21,18 +21,18 @@
 #include "util.hpp"
 #include "interface.hpp"
 #include "sound/sound_manager.hpp"
-#include "game_session.hpp"
-#include "dialog_manager.hpp"
-#include "conversation.hpp"
+#include "screen/game_session.hpp"
+#include "hud/dialog_manager.hpp"
+#include "hud/conversation.hpp"
 #include "engine/script_manager.hpp"
 #include "engine/sector.hpp"
 #include "font/fonts.hpp"
 #include "engine/camera.hpp"
 #include "config.hpp"
-#include "pda.hpp"
+#include "hud/pda.hpp"
 #include "util/sexpr_file_reader.hpp"
 #include "display/display.hpp"
-#include "controller_help_window.hpp"
+#include "hud/controller_help_window.hpp"
 
 namespace Scripting
 {

Deleted: trunk/windstille/src/sprite2dview.cpp
===================================================================
--- trunk/windstille/src/sprite2dview.cpp	2009-02-11 22:04:00 UTC (rev 2467)
+++ trunk/windstille/src/sprite2dview.cpp	2009-02-12 08:17:19 UTC (rev 2468)
@@ -1,398 +0,0 @@
-/*
-**  Windstille - A Sci-Fi Action-Adventure Game
-**  Copyright (C) 2005 Ingo Ruhnke <grumbel at gmx.de>
-**
-**  This program is free software: you can redistribute it and/or modify
-**  it under the terms of the GNU General Public License as published by
-**  the Free Software Foundation, either version 3 of the License, or
-**  (at your option) any later version.
-**  
-**  This program is distributed in the hope that it will be useful,
-**  but WITHOUT ANY WARRANTY; without even the implied warranty of
-**  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
-**  GNU General Public License for more details.
-**  
-**  You should have received a copy of the GNU General Public License
-**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
-*/
-
-#include <iostream>
-#include <algorithm>
-#include <physfs.h>
-
-#include "display/display.hpp"
-#include "sprite2d/manager.hpp"
-#include "math/math.hpp"
-#include "console.hpp"
-#include "input/controller.hpp"
-#include "display/surface_manager.hpp"
-#include "sprite2dview.hpp"
-
-extern std::vector<std::string> arg_files;
-
-#define DISPLAY_W 800
-#define DISPLAY_H 600
-
-Sprite2DView::Sprite2DView()
-{
-  auto_scroll = false;
-  index = 0;
-
-  for(std::vector<std::string>::iterator i = arg_files.begin(); i != arg_files.end(); ++i)
-    {
-      if (PHYSFS_isDirectory(i->c_str()))
-        { 
-          adddir(i->c_str());
-        }
-      else
-        {
-          directory.push_back(*i);
-        }
-    }
-  
-  shuffle_directory = directory;
-  shuffle = false;
-
-  //std::sort(shuffle_directory.begin(), shuffle_directory.end());
-  //std::random_shuffle(shuffle_directory.begin(), shuffle_directory.end());
-
-  offset = 0.0f;
-
-  if (directory.size() > 1)
-    mode = SLIDESHOW;
-  else
-    mode = SLIDESHOW; 
-
-  zoom = 1.0f;
-  pos  = Vector(0,0);
-  display_time = 0.0f;
-  show_thumbnail = false;
-  ignore_delta = false;
-
-
-  next_image(0);
-  sprite = new_sprite;
-  new_sprite = Sprite();
-
-}
-
-void
-Sprite2DView::adddir(const std::string& dirname)
-{
-  char** dirlist = PHYSFS_enumerateFiles(dirname.c_str());
-  for (char **i = dirlist; *i != NULL; ++i)
-    {
-      //std::cout << dirname + "/" + *i << std::endl;
-      if (PHYSFS_isDirectory((dirname + "/" + *i).c_str()))
-        {
-          adddir(dirname + "/" + *i);
-        }
-      else
-        {
-          directory.push_back((dirname + "/" + *i).c_str());
-        }
-    }
-  PHYSFS_freeList(dirlist);
-}
-
-Sprite2DView::~Sprite2DView()
-{
-  
-}
-
-void
-Sprite2DView::draw()
-{ 
-  glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);
-
-  switch(mode)
-    {
-    case SLIDESHOW:
-      if (aspect > 4.0/3.0)
-        {
-          sprite.draw(Vector(-offset, 0));
-        }
-      else
-        {
-          sprite.draw(Vector(0, -offset));
-        }
-
-      if (new_sprite)
-        {
-          new_sprite.draw(Vector(0,0));
-        }
-
-      if (show_thumbnail)
-        {
-          Sprite small = sprite;
-          small.set_alpha(1.0f);
-          float width  = small.get_width();
-          float height = small.get_height();
-          float scale;
-          if (width > height)
-            {
-              scale = 125.0f / width;
-
-              width  *= scale;
-              height *= scale;
-              small.set_scale(scale);
-
-              small.draw(Vector(DISPLAY_W - width,
-                                DISPLAY_H - height));
-            }
-          else
-            {
-              scale = 125.0f / height;
-
-              width  *= scale;
-              height *= scale;
-              small.set_scale(scale);
-
-              small.draw(Vector(DISPLAY_W - width,
-                                DISPLAY_H - height));
-            }
-        }        
-      break;
-      
-    case MANUAL:
-      sprite.set_scale(zoom);
-      sprite.draw(pos);
-      break;
-    }
-}
-
-void
-Sprite2DView::update_slideshow(float delta, const Controller& controller)
-{
-  if (!new_sprite)
-    {
-      width  = sprite.get_width();
-      height = sprite.get_height();
-      aspect = width/height;
-
-      if (aspect > 4.0/3.0)
-        { // expand vertical
-          float scale = DISPLAY_H/height;
-          width  *= scale;
-          height *= scale;
-          sprite.set_scale(scale);
-
-          if (offset - (width - DISPLAY_W) > 0)
-            {
-              offset = (width - DISPLAY_W);
-
-              if (auto_scroll && display_time > 3.0f)
-                next_image();
-            }
-          else
-            {
-              offset += delta * 50.0f + controller.get_axis_state(X_AXIS) * 200.0f * delta;
-            }
-
-          offset +=  controller.get_ball_state(MOUSE_MOTION_Y);
-        }
-      else
-        { // expand horizontal
-          float scale = 800.0f/width;
-          width  *= scale;
-          height *= scale;
-          sprite.set_scale(scale);
-
-          if (offset - (height - DISPLAY_H) > 0)
-            {
-              offset = (width - DISPLAY_H);
-
-              if (auto_scroll && display_time > 3.0f)
-                next_image();
-            }
-          else
-            {
-              offset += delta * 50.0f +   controller.get_axis_state(X_AXIS) * 200.0f * delta;
-            }
-
-          offset += controller.get_ball_state(MOUSE_MOTION_Y);
-        }
-    }
-
-  if (controller.button_was_pressed(PRIMARY_BUTTON))
-    {
-      next_image();
-    }
-  else if (controller.button_was_pressed(SECONDARY_BUTTON))
-    {
-      prev_image();
-    }
-}
-
-void
-Sprite2DView::next_image(int i)
-{
-  if (directory.size() > 1)
-    {
-      if (new_sprite)
-        {
-          sprite = new_sprite;
-          sprite.set_alpha(1.0f);
-          new_sprite = Sprite();
-          offset = 0;
-          display_time = 0;
-        }
-
-      index = (unsigned int)(index + i) % directory.size();
-
-      std::vector<std::string> dir;
-
-      if (shuffle)
-        dir = shuffle_directory;
-      else
-        dir = directory;
-      
-      bool retry = false;
-
-      do {
-        try {
-          new_sprite = Sprite(dir[index]);
-          retry = false;
-        } catch(std::exception& e) {
-          // FIXME: won't work in combination with shuffle
-          std::cout << "Error: " << e.what() << std::endl;
-          std::cout << "Removing '" << directory[index] << "' from the list" << std::endl;
-          directory.erase(directory.begin() + index);
-          index = (unsigned int)(index) % directory.size();
-          retry = true;
-        }
-      } while (retry);
-
-      ignore_delta = true;
-      fadein = 0.0f;
-      prepare_sprite(new_sprite);
-      console << index << ": " << directory[index] << std::endl;
-    }
-
-  sprite2d_manager->cleanup();
-  surface_manager->cleanup();
-}
-
-void
-Sprite2DView::prepare_sprite(Sprite& sprite)
-{
-  float width  = sprite.get_width();
-  float height = sprite.get_height();
-  float aspect = width/height;
-
-  if (aspect > 4.0/3.0)
-    { // expand vertical
-      float scale = DISPLAY_H/height;
-      width  *= scale;
-      height *= scale;
-      sprite.set_scale(scale);
-    }
-  else
-    { // expand horizontal
-      float scale = DISPLAY_W/width;
-      width  *= scale;
-      height *= scale;
-      sprite.set_scale(scale);
-    }  
-}
-
-void
-Sprite2DView::update_manual(float delta, const Controller& controller)
-{
-  pos.x += controller.get_axis_state(X_AXIS) * 100.0f * delta + controller.get_ball_state(MOUSE_MOTION_X);
-  pos.y += controller.get_axis_state(Y_AXIS) * 100.0f * delta + controller.get_ball_state(MOUSE_MOTION_Y);
-  
-  if (controller.get_button_state(PRIMARY_BUTTON))
-    zoom *= 1.0f + 0.3f * delta;
-
-  if (controller.get_button_state(SECONDARY_BUTTON))
-    zoom /= 1.0f + 0.3f * delta;
-
-  sprite.update(delta);
-}
-
-void
-Sprite2DView::update(float delta, const Controller& controller)
-{  
-  if (ignore_delta)
-    {
-      ignore_delta = false;
-      delta = 0.0f;
-    }
-  
-  display_time += delta * 0.5;
-
-  switch(mode) {
-  case SLIDESHOW:
-    update_slideshow(delta, controller);
-    break;
-  case MANUAL:
-    update_manual(delta, controller);
-    break;
-  }
-
-  if (controller.button_was_pressed(PDA_BUTTON))
-    {
-      if (shuffle)
-        {
-          std::vector<std::string>::iterator i = std::find(directory.begin(), directory.end(),
-                                                           shuffle_directory[index]);
-          if (i != directory.end())
-            {
-              index = i - directory.begin() ;
-            }
-        }
-      else
-        {
-          std::vector<std::string>::iterator i = std::find(shuffle_directory.begin(), shuffle_directory.end(),
-                                                           directory[index]);
-          if (i != shuffle_directory.end())
-            {
-              index = i - shuffle_directory.begin();
-            }
-        }
-
-      shuffle = !shuffle;
-
-      std::cout << shuffle << " " << index << std::endl;
-    }
-
-  //  if (controller.button_was_pressed(INVENTORY_BUTTON))
-  //std::random_shuffle(shuffle_directory.begin(), shuffle_directory.end());
-   
-  if (controller.button_was_pressed(TERTIARY_BUTTON))
-    show_thumbnail = !show_thumbnail;
-
-  if (controller.button_was_pressed(AIM_BUTTON))
-    {
-      if (mode == SLIDESHOW) mode = MANUAL; 
-      else if (mode == MANUAL) mode = SLIDESHOW; 
-    }
-
-  if (new_sprite)
-    {
-      fadein += delta;
-
-      if (fadein > 1.0f)
-        {
-          sprite = new_sprite;
-          sprite.set_alpha(1.0f);
-          new_sprite = Sprite();
-          offset = 0;
-          display_time = 0;
-        }
-      else
-        {
-          new_sprite.set_alpha(fadein);
-        }
-    }
-}
-
-void
-Sprite2DView::set_sprite(const std::string& filename)
-{
-  sprite = Sprite(filename);
-  ignore_delta = true;
-}
-
-/* EOF */

Deleted: trunk/windstille/src/sprite2dview.hpp
===================================================================
--- trunk/windstille/src/sprite2dview.hpp	2009-02-11 22:04:00 UTC (rev 2467)
+++ trunk/windstille/src/sprite2dview.hpp	2009-02-12 08:17:19 UTC (rev 2468)
@@ -1,88 +0,0 @@
-/*
-**  Windstille - A Sci-Fi Action-Adventure Game
-**  Copyright (C) 2005 Ingo Ruhnke <grumbel at gmx.de>
-**
-**  This program is free software: you can redistribute it and/or modify
-**  it under the terms of the GNU General Public License as published by
-**  the Free Software Foundation, either version 3 of the License, or
-**  (at your option) any later version.
-**  
-**  This program is distributed in the hope that it will be useful,
-**  but WITHOUT ANY WARRANTY; without even the implied warranty of
-**  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
-**  GNU General Public License for more details.
-**  
-**  You should have received a copy of the GNU General Public License
-**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
-*/
-
-#ifndef HEADER_WINDSTILLE_SPRITE2DVIEW_HPP
-#define HEADER_WINDSTILLE_SPRITE2DVIEW_HPP
-
-#include "display/scene_context.hpp"
-#include "sprite2d/sprite.hpp"
-#include "screen.hpp"
-
-/**
- * A simple class to view 3d sprites and their different actions,
- * mostly usefull for debugging 
- */
-class Sprite2DView : public Screen
-{
-private:
-  SceneContext sc;
-  std::vector<std::string> directory;
-  std::vector<std::string> shuffle_directory;
-
-  enum Mode { SLIDESHOW, MANUAL } mode;
-  
-  // Manual Mode Variables
-  float  zoom;
-  Vector pos;
-
-  // Slideshow variables
-  float width;
-  float height;
-  float aspect;
-
-  int    index;
-  Sprite sprite;
-  
-  Sprite new_sprite;
-  float fadein;
-
-  float  scale;
-  float  offset;
-
-  float display_time;
-  bool show_thumbnail;
-  bool ignore_delta;
-  bool shuffle;
-
-  bool auto_scroll;
-public:
-  Sprite2DView();
-  ~Sprite2DView();
-  
-  void adddir(const std::string& dir);
-
-  void draw();
-  void update(float delta, const Controller& controller);
-
-  void update_slideshow(float delta, const Controller& controller);
-  void update_manual(float delta, const Controller& controller);
-
-  /** move \a i images forward in the directory */
-  void next_image(int i = 1);
-  void prev_image(int i = 1) { next_image(-i); }
-
-  void set_sprite(const std::string& filename);
-  void prepare_sprite(Sprite& sprite);
-private:
-  Sprite2DView (const Sprite2DView&);
-  Sprite2DView& operator= (const Sprite2DView&);
-};
-
-#endif
-
-/* EOF */

Deleted: trunk/windstille/src/sprite3dview.cpp
===================================================================
--- trunk/windstille/src/sprite3dview.cpp	2009-02-11 22:04:00 UTC (rev 2467)
+++ trunk/windstille/src/sprite3dview.cpp	2009-02-12 08:17:19 UTC (rev 2468)
@@ -1,162 +0,0 @@
-/*
-**  Windstille - A Sci-Fi Action-Adventure Game
-**  Copyright (C) 2005 Ingo Ruhnke <grumbel at gmx.de>
-**
-**  This program is free software: you can redistribute it and/or modify
-**  it under the terms of the GNU General Public License as published by
-**  the Free Software Foundation, either version 3 of the License, or
-**  (at your option) any later version.
-**  
-**  This program is distributed in the hope that it will be useful,
-**  but WITHOUT ANY WARRANTY; without even the implied warranty of
-**  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
-**  GNU General Public License for more details.
-**  
-**  You should have received a copy of the GNU General Public License
-**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
-*/
-
-#include <iostream>
-#include "input/controller.hpp"
-#include "display/display.hpp"
-#include "console.hpp"
-#include "font/ttf_font.hpp"
-#include "font/fonts.hpp"
-#include "screen_manager.hpp"
-#include "sprite3dview.hpp"
-
-Sprite3DView::Sprite3DView()
-{
-  current_action = 0;
-
-  sprite = Sprite3D("models/characters/jane/jane.wsprite");
-  actions = sprite.get_actions();
-
-  sprite.set_action(actions[current_action]);
-  
-  rotation = Quaternion::identity();
-
-  scale = 2.0f;
-}
-
-Sprite3DView::~Sprite3DView()
-{
-}
-
-void
-Sprite3DView::set_model(const std::string& filename)
-{
-  sprite  = Sprite3D(filename);
-  actions = sprite.get_actions();
-}
-
-void
-Sprite3DView::draw()
-{
-  sc.reset_modelview();
-  //sc.translate(-config->screen_width/2, -config->screen_height/2);
-  //sc.scale(2.0f, 2.0f);
-  
-  sc.color().fill_screen(Color(0.5, 0.0, 0.5));
-
-  sc.push_modelview();
-  sc.translate(Display::get_width()/2, Display::get_height()/2);
-  sc.scale(scale, scale);
-
-  // Rotate
-  sc.mult_modelview(rotation.to_matrix());  
-  sc.translate(0, 64.0f); // FIXME: use object height/2 instead of 64
-  sprite.draw(sc.color(), Vector(0,0), 0); 
-  sc.pop_modelview();
-
-  //Matrix matrix = sc.color().get_modelview();
-  //matrix.translate(-Display::get_width()/2, -Display::get_height()/2, 0);
-  //sprite.draw(sc.color(), matrix, 0.0f);
-
-  sc.light().fill_screen(Color(1.0, 1.0, 1.0));
-  //sc.color().draw("Hello World", 100, 100);
-  sc.render();
-  
-  int x = 10;
-  int y =  Fonts::vera12->get_height() + 5;
-  int line_height = Fonts::vera12->get_height()+5;
-
-  for(int i = 0; i < int(actions.size()); ++i)
-    {
-      if (i == current_action)
-        Fonts::vera12->draw(x, y,
-                               actions[i], Color(1.0f, 1.0f, 1.0f));
-      else
-        Fonts::vera12->draw(x, y,
-                               actions[i], Color(0.7f, 0.7f, 0.7f));
-
-
-      y += line_height;
-      if (y > 580)
-        {
-          x += 200;
-          y =  Fonts::vera12->get_height() + 5;
-        }
-    }
-}
-
-void
-Sprite3DView::update(float delta, const Controller& controller)
-{
-  sprite.update(delta);
-  //std::cout << "Delta: " << delta << std::endl;
-
-  int last_action = current_action;
-  if (controller.button_was_pressed(MENU_DOWN_BUTTON))
-    {
-      if (current_action == int(actions.size())-1)
-        current_action = 0;
-      else
-        current_action += 1;
-    }
-  else if (controller.button_was_pressed(MENU_UP_BUTTON))
-    {
-      if (current_action == 0)
-        current_action = actions.size()-1;
-      else
-        current_action -= 1;
-    }
-
-  if (controller.get_button_state(PRIMARY_BUTTON))
-    {
-      scale *= 1.0f + 0.3f * delta;
-    }
-  else if (controller.get_button_state(PDA_BUTTON))
-    {
-      scale /= 1.0f + 0.3f * delta;
-    }
-  
-  if (last_action != current_action && !actions.empty())
-    {
-      sprite.set_action(actions[current_action]);
-    }
-
-  rotation = Quaternion(Vector3(0.0f, 1.0f, 0.0f),
-                        -controller.get_axis_state(X_AXIS) * delta * 4.0f) * rotation;
-  rotation = Quaternion(Vector3(1.0f, 0.0f, 0.0f),
-                        controller.get_axis_state(X2_AXIS) * delta * 4.0f) * rotation;
-  rotation = Quaternion(Vector3(0.0f, 0.0f, 1.0f),
-                        controller.get_axis_state(Y2_AXIS) * delta * 4.0f) * rotation;
-
-  if (controller.get_button_state(VIEW_CENTER_BUTTON))
-    {
-      rotation = Quaternion::identity();
-    }
-
-  if (controller.button_was_pressed(ESCAPE_BUTTON) ||
-      controller.button_was_pressed(CANCEL_BUTTON))
-    screen_manager.pop_screen();
-}
-
-void
-Sprite3DView::handle_event(const SDL_Event& )
-{
-  
-}
-
-/* EOF */

Deleted: trunk/windstille/src/sprite3dview.hpp
===================================================================
--- trunk/windstille/src/sprite3dview.hpp	2009-02-11 22:04:00 UTC (rev 2467)
+++ trunk/windstille/src/sprite3dview.hpp	2009-02-12 08:17:19 UTC (rev 2468)
@@ -1,59 +0,0 @@
-/*
-**  Windstille - A Sci-Fi Action-Adventure Game
-**  Copyright (C) 2005 Ingo Ruhnke <grumbel at gmx.de>
-**
-**  This program is free software: you can redistribute it and/or modify
-**  it under the terms of the GNU General Public License as published by
-**  the Free Software Foundation, either version 3 of the License, or
-**  (at your option) any later version.
-**  
-**  This program is distributed in the hope that it will be useful,
-**  but WITHOUT ANY WARRANTY; without even the implied warranty of
-**  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
-**  GNU General Public License for more details.
-**  
-**  You should have received a copy of the GNU General Public License
-**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
-*/
-
-#ifndef HEADER_WINDSTILLE_SPRITE3DVIEW_HPP
-#define HEADER_WINDSTILLE_SPRITE3DVIEW_HPP
-
-#include "display/scene_context.hpp"
-#include "sprite3d/sprite3d.hpp"
-#include "screen.hpp"
-
-/**
- * A simple class to view 3d sprites and their different actions,
- * mostly usefull for debugging 
- */
-class Sprite3DView : public Screen
-{
-private:
-  SceneContext sc;
-  Sprite3D sprite;
-  std::vector<std::string> actions;
-  int current_action;
-
-  Quaternion rotation;
-  float scale;
-
-public:
-  Sprite3DView();
-  ~Sprite3DView();
-
-  void draw();
-  void update(float delta, const Controller& controller);
-
-  void set_model(const std::string& filename);
-  
-  void handle_event(const SDL_Event& );
-
-private:
-  Sprite3DView (const Sprite3DView&);
-  Sprite3DView& operator= (const Sprite3DView&);
-};
-
-#endif
-
-/* EOF */

Deleted: trunk/windstille/src/text_area.cpp
===================================================================
--- trunk/windstille/src/text_area.cpp	2009-02-11 22:04:00 UTC (rev 2467)
+++ trunk/windstille/src/text_area.cpp	2009-02-12 08:17:19 UTC (rev 2468)
@@ -1,382 +0,0 @@
-/*
-**  Windstille - A Sci-Fi Action-Adventure Game
-**  Copyright (C) 2005 Ingo Ruhnke <grumbel at gmx.de>
-**
-**  This program is free software: you can redistribute it and/or modify
-**  it under the terms of the GNU General Public License as published by
-**  the Free Software Foundation, either version 3 of the License, or
-**  (at your option) any later version.
-**  
-**  This program is distributed in the hope that it will be useful,
-**  but WITHOUT ANY WARRANTY; without even the implied warranty of
-**  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
-**  GNU General Public License for more details.
-**  
-**  You should have received a copy of the GNU General Public License
-**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
-*/
-
-#include <assert.h>
-
-#include "display/opengl_state.hpp"
-#include "font/ttf_font.hpp"
-#include "text_area.hpp"
-#include "util/baby_xml.hpp"
-#include "font/fonts.hpp"
-#include "text_area.hpp"
-
-struct TextAreaCommand 
-{
-  enum Type { WORD, START, END } type;
-  std::string content;
-    
-  TextAreaCommand(Type type_, const std::string& content_)
-    : type(type_),
-      content(content_)
-  {}
-};
-
-class TextAreaImpl
-{
-public:
-  TTFFont* font;
-  Rectf rect;
-  float passed_time;
-
-  int v_space;
-  bool letter_by_letter;
-  bool progress_complete;
-  std::vector<TextAreaCommand> commands;
-  Vector cursor_pos;
-};
-
-TextArea::TextArea(const Rectf& rect, bool letter_by_letter)
-  : impl(new TextAreaImpl)
-{
-  impl->font = Fonts::vera20;
-  impl->rect    = rect;
-  // FIXME: freetype might provide info for vspacing, not sure
-  impl->v_space = 2;
-  impl->letter_by_letter = letter_by_letter;
-  impl->progress_complete = false;
-  impl->passed_time = 0;
-}
-
-TextArea::~TextArea()
-{
-  delete impl;
-}
-
-void
-TextArea::set_rect(const Rectf& rect)
-{
-  impl->rect = rect;
-}
-
-void
-TextArea::set_text(const std::string& str)
-{
-  impl->commands.clear();
-
-  BabyXML xml(str);
-
-  for(BabyXML::iterator i = xml.begin(); i != xml.end(); ++i)
-    {
-      if (i->type == BabyXML::Node::START_TAG)
-        {
-          impl->commands.push_back(TextAreaCommand(TextAreaCommand::START, i->content));
-        }
-      else if (i->type == BabyXML::Node::END_TAG)
-        {
-          impl->commands.push_back(TextAreaCommand(TextAreaCommand::END, i->content));
-        }
-      else if (i->type == BabyXML::Node::TEXT)
-        {      
-          // Seperate the given str into words, words are seperated by either
-          // ' ' or '\n', space is threaded as a word of its own
-          // "Hello  World \n" => ("Hello", " ", " ", "World", " ", "\n")
-          std::string word;
-          for(std::string::const_iterator j = i->content.begin(); j != i->content.end(); ++j)
-            {
-              if (*j == ' ' || *j == '\n')
-                {
-                  if (word.empty())
-                    {
-                      impl->commands.push_back(TextAreaCommand(TextAreaCommand::WORD, std::string(1, *j)));
-                    }
-                  else
-                    {
-                      impl->commands.push_back(TextAreaCommand(TextAreaCommand::WORD, word));
-                      impl->commands.push_back(TextAreaCommand(TextAreaCommand::WORD, std::string(1, *j)));
-                      word = "";
-                    }
-                }
-              else
-                {
-                  word += *j;
-                }
-            }
-          if (!word.empty())
-            impl->commands.push_back(TextAreaCommand(TextAreaCommand::WORD, word));
-        }
-    }
-}
-
-void
-TextArea::set_font(TTFFont* font)
-{
-  impl->font = font;
-}
-
-void
-TextArea::set_progress_complete()
-{
-  impl->letter_by_letter = false;
-}
-
-bool
-TextArea::is_progress_complete()
-{
-  return impl->progress_complete;
-}
-
-void
-TextArea::draw()
-{
-  assert(impl->font);
-
-  OpenGLState state;
-  
-  state.bind_texture(impl->font->get_texture());
-
-  state.enable(GL_BLEND);
-  state.set_blend_func(GL_SRC_ALPHA, GL_ONE_MINUS_SRC_ALPHA);
-  state.activate();
-
-  glPushMatrix();
-  glTranslatef(impl->rect.left, impl->rect.top + impl->font->get_height(), 0);
-  // Voodoo to get non-blurry fonts
-  float mx = -0.375;
-  float my = -0.375; 
-  glBegin(GL_QUADS);
-
-  int x_pos = 0;
-  int y_pos = 0;
-
-  Color top_color    = Color(1.0f, 1.0f, 1.0f);
-  Color bottom_color = Color(1.0f, 1.0f, 1.0f);
-  bool is_small = false;
-  bool is_large = false;
-  float eat_time = impl->passed_time;
-  bool sinus = false;
-  bool break_writing = false;
-  std::vector<TextAreaCommand>::const_iterator i = impl->commands.begin();
-  for(; i != impl->commands.end(); ++i)
-    {
-      if (break_writing)
-        break;
-        
-      switch (i->type)
-        {
-        case TextAreaCommand::START:
-          if (i->content == "b")
-            {
-              top_color    = Color(1.0f, 0.0f, 0.0f);
-              bottom_color = Color(0.8f, 0.0f, 0.0f);
-            }
-          else if (i->content == "i")
-            {
-              top_color    = Color(0.65f, 0.7f, 1.0f);
-              bottom_color = Color(0.65f, 0.7f, 1.0f);
-            }
-          else if (i->content == "small")
-            {
-              is_small = true;
-            }
-          else if (i->content == "large")
-            {
-              is_large = true;
-            }
-          else if (i->content == "sleep")
-            {
-              eat_time -= 1.0f;
-            }
-          else if (i->content == "sin")
-            {
-              sinus = true;
-            }
-          break;
-
-        case TextAreaCommand::END:
-          if (i->content == "b" || i->content == "i")
-            {
-              top_color    = Color(1.0f, 1.0f, 1.0f);
-              bottom_color = Color(1.0f, 1.0f, 1.0f);
-            }
-          else if (i->content == "small")
-            {
-              is_small = false;
-            }
-          else if (i->content == "large")
-            {
-              is_large = false;
-            }
-          else if (i->content == "sin")
-            {
-              sinus = false;
-            }
-          break;
-          
-        case TextAreaCommand::WORD:
-        retry:
-          int word_width;
-
-          if (is_small)
-            word_width = static_cast<int>(impl->font->get_width(i->content) * 0.6f);
-          else if (is_large)
-            word_width = static_cast<int>(impl->font->get_width(i->content) * 2.0f);
-          else
-            word_width = impl->font->get_width(i->content);
-          
-          if (i->content == "\n")
-            {
-              x_pos = 0;
-              y_pos += impl->font->get_height() + impl->v_space;
-            }
-          else if (x_pos + word_width > impl->rect.get_width() && word_width <= impl->rect.get_width())
-            {
-              x_pos = 0;
-              y_pos += impl->font->get_height() + impl->v_space;
-              goto retry;
-            }
-          else
-            {
-              if (x_pos == 0 && i->content == " ")
-                {
-                  // ignore space at the beginning of a line
-                }
-              else
-                {
-                  for(std::string::const_iterator j = i->content.begin(); j != i->content.end(); ++j)
-                    {
-                      if (impl->letter_by_letter && eat_time <= 0)
-                        {
-                          break_writing = true;
-                          break;
-                        }
-                        
-                      int x = x_pos;
-                      int y = y_pos;
-
-                      if (sinus) // FIXME: this could actually work per vertex
-                        y += static_cast<int>(sin(impl->passed_time * 10.0f + x_pos / 15.0f) * 5.0f);
-
-                      if (*j == '.' || *j == '\n')
-                        eat_time -= 0.50f;
-                      else
-                        eat_time -= 0.05f;
-
-                      const TTFCharacter& character = impl->font->get_character(*j);
-                      
-                      if (is_small)
-                        {
-                          float scale = 0.6f;
-                          glColor4f(top_color.r, top_color.g, top_color.b, top_color.a);
-                          glTexCoord2f(character.uv.left, character.uv.top);
-                          glVertex2f(x + scale * character.pos.left + mx,
-                                     y + scale * (character.pos.top  + my));
-
-                          glTexCoord2f(character.uv.right, character.uv.top);
-                          glVertex2f(x + scale * character.pos.right + mx, 
-                                     y + scale * (character.pos.top) + my);
-
-                          glColor4f(bottom_color.r, bottom_color.g, bottom_color.b, bottom_color.a);
-                          glTexCoord2f(character.uv.right, character.uv.bottom);
-                          glVertex2f(x + scale * character.pos.right  + mx, 
-                                     y + scale * (character.pos.bottom) + my);
-
-                          glTexCoord2f(character.uv.left, character.uv.bottom);
-                          glVertex2f(x + scale * character.pos.left   + mx, 
-                                     y + scale * (character.pos.bottom) + my);
-                          x_pos += static_cast<int>(scale * character.advance);
-                        }
-                      else if (is_large)
-                        {
-                          float scale = 2.0f;
-                          glColor4f(top_color.r, top_color.g, top_color.b, top_color.a);
-                          glTexCoord2f(character.uv.left, character.uv.top);
-                          glVertex2f(x + scale * character.pos.left + mx,
-                                     y + (character.pos.top  + my));
-
-                          glTexCoord2f(character.uv.right, character.uv.top);
-                          glVertex2f(x + scale * character.pos.right + mx, 
-                                     y + (character.pos.top) + my);
-
-                          glColor4f(bottom_color.r, bottom_color.g, bottom_color.b, bottom_color.a);
-                          glTexCoord2f(character.uv.right, character.uv.bottom);
-                          glVertex2f(x + scale * character.pos.right  + mx, 
-                                     y + (character.pos.bottom) + my);
-
-                          glTexCoord2f(character.uv.left, character.uv.bottom);
-                          glVertex2f(x + scale * character.pos.left   + mx, 
-                                     y + (character.pos.bottom) + my);
-                          x_pos += static_cast<int>(scale * character.advance);
-                        }
-                      else   
-                        {
-                          glColor4f(top_color.r, top_color.g, top_color.b, top_color.a);
-                          glTexCoord2f(character.uv.left, character.uv.top);
-                          glVertex2f(x + character.pos.left + mx,
-                                     y + character.pos.top  + my);
-
-                          glTexCoord2f(character.uv.right, character.uv.top);
-                          glVertex2f(x + character.pos.right + mx, 
-                                     y + character.pos.top   + my);
-
-                          glColor4f(bottom_color.r, bottom_color.g, bottom_color.b, bottom_color.a);
-                          glTexCoord2f(character.uv.right, character.uv.bottom);
-                          glVertex2f(x + character.pos.right  + mx, 
-                                     y + character.pos.bottom + my);
-
-                          glTexCoord2f(character.uv.left, character.uv.bottom);
-                          glVertex2f(x + character.pos.left   + mx, 
-                                     y + character.pos.bottom + my);
-                          x_pos += character.advance;
-                        }
-                    }
-                }
-            }
-          break;
-        }
-    }
-
-  // FIXME: This is not correct, since the last command itself might
-  // not be completly excecuted
-  if (i == impl->commands.end())
-    impl->progress_complete = true;
-    
-  glEnd();
-  glPopMatrix();
-
-  impl->cursor_pos = Vector(x_pos + impl->rect.left, y_pos + impl->rect.top);
-}
-
-void
-TextArea::update(float delta)
-{
-  impl->passed_time += delta;
-}
-
-Rectf
-TextArea::get_rect() const
-{
-  return impl->rect;
-}
-
-Vector
-TextArea::get_cursor_pos() const
-{
-  return impl->cursor_pos;
-}
-
-/* EOF */

Deleted: trunk/windstille/src/text_area.hpp
===================================================================
--- trunk/windstille/src/text_area.hpp	2009-02-11 22:04:00 UTC (rev 2467)
+++ trunk/windstille/src/text_area.hpp	2009-02-12 08:17:19 UTC (rev 2468)
@@ -1,68 +0,0 @@
-/*
-**  Windstille - A Sci-Fi Action-Adventure Game
-**  Copyright (C) 2005 Ingo Ruhnke <grumbel at gmx.de>
-**
-**  This program is free software: you can redistribute it and/or modify
-**  it under the terms of the GNU General Public License as published by
-**  the Free Software Foundation, either version 3 of the License, or
-**  (at your option) any later version.
-**  
-**  This program is distributed in the hope that it will be useful,
-**  but WITHOUT ANY WARRANTY; without even the implied warranty of
-**  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
-**  GNU General Public License for more details.
-**  
-**  You should have received a copy of the GNU General Public License
-**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
-*/
-
-#ifndef HEADER_WINDSTILLE_TEXT_AREA_HPP
-#define HEADER_WINDSTILLE_TEXT_AREA_HPP
-
-#include "math/rect.hpp"
-#include <string>
-
-class TTFFont;
-class TextAreaImpl;
-
-/** A class for managing multiple lines of text in combination with
-    special formating.
-*/
-class TextArea
-{
-public:
-  /** The area which the TextArea should cover */
-  TextArea(const Rectf& rect, bool letter_by_letter);
-  ~TextArea();
-
-  /** Set the rectangle into which the TextArea should fill its text */
-  void set_rect(const Rectf& rect);
-
-  /** Sets the text to be displayed in the text box */
-  void set_text(const std::string& str);
-
-  /** Sets the default font to be used in the text box, can be changed
-      with special tags */
-  void set_font(TTFFont* font);
-
-  /** Skips letter by letter display */  
-  void set_progress_complete();
-  
-  bool is_progress_complete();
-
-  void update(float delta);
-  void draw();
-
-  /** Return the rectangle that TextArea fills its text into */
-  Rectf get_rect() const;
-
-  /** Return the position of the last character in the TextArea,
-      usefull to display a blinking cursor or things like that */
-  Vector get_cursor_pos() const;
-private:
-  TextAreaImpl* impl;
-};
-
-#endif
-
-/* EOF */

Modified: trunk/windstille/src/tile/tile_packer.cpp
===================================================================
--- trunk/windstille/src/tile/tile_packer.cpp	2009-02-11 22:04:00 UTC (rev 2467)
+++ trunk/windstille/src/tile/tile_packer.cpp	2009-02-12 08:17:19 UTC (rev 2468)
@@ -23,7 +23,7 @@
 #include "globals.hpp"
 #include "tile_packer.hpp"
 #include "util/util.hpp"
-#include "blitter.hpp"
+#include "display/blitter.hpp"
 
 class TilePackerImpl
 {

Deleted: trunk/windstille/src/title_screen.cpp
===================================================================
--- trunk/windstille/src/title_screen.cpp	2009-02-11 22:04:00 UTC (rev 2467)
+++ trunk/windstille/src/title_screen.cpp	2009-02-12 08:17:19 UTC (rev 2468)
@@ -1,56 +0,0 @@
-/*
-**  Windstille - A Sci-Fi Action-Adventure Game
-**  Copyright (C) 2005 Ingo Ruhnke <grumbel at gmx.de>
-**
-**  This program is free software: you can redistribute it and/or modify
-**  it under the terms of the GNU General Public License as published by
-**  the Free Software Foundation, either version 3 of the License, or
-**  (at your option) any later version.
-**  
-**  This program is distributed in the hope that it will be useful,
-**  but WITHOUT ANY WARRANTY; without even the implied warranty of
-**  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
-**  GNU General Public License for more details.
-**  
-**  You should have received a copy of the GNU General Public License
-**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
-*/
-
-#include <iostream>
-#include "menu_manager.hpp"
-#include "title_screen.hpp"
-
-TitleScreen::TitleScreen()
-{
-  background = Sprite("images/titlescreen.sprite");
-}
-
-TitleScreen::~TitleScreen()
-{
-}
-
-void
-TitleScreen::on_startup()
-{
-  menu_manager.display_main_menu();
-}
-
-void
-TitleScreen::draw()
-{
-  background.draw(Vector(0, 0));
-}
-
-void
-TitleScreen::update(float delta, const Controller& controller)
-{
-  background.update(delta);
-}
-
-void
-TitleScreen::handle_event(const SDL_Event& )
-{
-  
-}
-
-/* EOF */

Deleted: trunk/windstille/src/title_screen.hpp
===================================================================
--- trunk/windstille/src/title_screen.hpp	2009-02-11 22:04:00 UTC (rev 2467)
+++ trunk/windstille/src/title_screen.hpp	2009-02-12 08:17:19 UTC (rev 2468)
@@ -1,49 +0,0 @@
-/*
-**  Windstille - A Sci-Fi Action-Adventure Game
-**  Copyright (C) 2005 Ingo Ruhnke <grumbel at gmx.de>
-**
-**  This program is free software: you can redistribute it and/or modify
-**  it under the terms of the GNU General Public License as published by
-**  the Free Software Foundation, either version 3 of the License, or
-**  (at your option) any later version.
-**  
-**  This program is distributed in the hope that it will be useful,
-**  but WITHOUT ANY WARRANTY; without even the implied warranty of
-**  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
-**  GNU General Public License for more details.
-**  
-**  You should have received a copy of the GNU General Public License
-**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
-*/
-
-#ifndef HEADER_WINDSTILLE_TITLE_SCREEN_HPP
-#define HEADER_WINDSTILLE_TITLE_SCREEN_HPP
-
-#include "sprite2d/sprite.hpp"
-#include "screen.hpp"
-
-/** */
-class TitleScreen : public Screen
-{
-private:
-  Sprite background;
-
-public:
-  TitleScreen();
-  ~TitleScreen();
-
-  void on_startup();
-
-  void draw();
-  void update(float delta, const Controller& controller);
-
-  void handle_event(const SDL_Event& );
-
-private:
-  TitleScreen (const TitleScreen&);
-  TitleScreen& operator= (const TitleScreen&);
-};
-
-#endif
-
-/* EOF */

Modified: trunk/windstille/src/view.hpp
===================================================================
--- trunk/windstille/src/view.hpp	2009-02-11 22:04:00 UTC (rev 2467)
+++ trunk/windstille/src/view.hpp	2009-02-12 08:17:19 UTC (rev 2468)
@@ -19,7 +19,7 @@
 #ifndef HEADER_WINDSTILLE_VIEW_HPP
 #define HEADER_WINDSTILLE_VIEW_HPP
 
-#include "graphic_context_state.hpp"
+#include "display/graphic_context_state.hpp"
 #include "engine/camera.hpp"
 #include "math/vector.hpp"
 

Modified: trunk/windstille/src/windstille_main.cpp
===================================================================
--- trunk/windstille/src/windstille_main.cpp	2009-02-11 22:04:00 UTC (rev 2467)
+++ trunk/windstille/src/windstille_main.cpp	2009-02-12 08:17:19 UTC (rev 2468)
@@ -22,11 +22,11 @@
 #include <physfs.h>
 
 #include "globals.hpp"
-#include "screen.hpp"
+#include "screen/screen.hpp"
 #include "windstille_main.hpp"
 #include "font/fonts.hpp"
-#include "game_session.hpp"
-#include "title_screen.hpp"
+#include "screen/game_session.hpp"
+#include "screen/title_screen.hpp"
 #include "engine/sector.hpp"
 #include "input/input_manager.hpp"
 #include "sound/sound_manager.hpp"
@@ -39,10 +39,10 @@
 #include "display/surface_manager.hpp"
 #include "display/texture_manager.hpp"
 #include "sprite3d/manager.hpp"
-#include "screen_manager.hpp"
-#include "sprite3dview.hpp"
-#include "sprite2dview.hpp"
-#include "particle_viewer.hpp"
+#include "screen/screen_manager.hpp"
+#include "screen/sprite3dview.hpp"
+#include "screen/sprite2dview.hpp"
+#include "screen/particle_viewer.hpp"
 #include "sprite2d/manager.hpp"
 
 #ifdef WIN32

Modified: trunk/windstille/src/windstille_main.hpp
===================================================================
--- trunk/windstille/src/windstille_main.hpp	2009-02-11 22:04:00 UTC (rev 2467)
+++ trunk/windstille/src/windstille_main.hpp	2009-02-12 08:17:19 UTC (rev 2468)
@@ -47,7 +47,7 @@
 #ifndef HEADER_WINDSTILLE_WINDSTILLE_MAIN_HPP
 #define HEADER_WINDSTILLE_WINDSTILLE_MAIN_HPP
 
-#include "screen.hpp"
+#include "screen/screen.hpp"
 
 struct SDL_Surface;
 



From grumbel at mail.berlios.de  Thu Feb 12 09:24:12 2009
From: grumbel at mail.berlios.de (grumbel at BerliOS)
Date: Thu, 12 Feb 2009 09:24:12 +0100
Subject: [Windstille-commit] r2469 - in trunk/windstille/src: . engine
	screen sprite3d
Message-ID: <200902120824.n1C8OCif008908@sheep.berlios.de>

Author: grumbel
Date: 2009-02-12 09:24:12 +0100 (Thu, 12 Feb 2009)
New Revision: 2469

Removed:
   trunk/windstille/src/timer.cpp
   trunk/windstille/src/timer.hpp
Modified:
   trunk/windstille/src/SConscript
   trunk/windstille/src/engine/script_manager.cpp
   trunk/windstille/src/engine/script_manager.hpp
   trunk/windstille/src/globals.cpp
   trunk/windstille/src/globals.hpp
   trunk/windstille/src/screen/game_session.cpp
   trunk/windstille/src/sprite3d/sprite3d.cpp
Log:
Removed unused Timer class

Modified: trunk/windstille/src/SConscript
===================================================================
--- trunk/windstille/src/SConscript	2009-02-12 08:17:19 UTC (rev 2468)
+++ trunk/windstille/src/SConscript	2009-02-12 08:24:12 UTC (rev 2469)
@@ -182,7 +182,6 @@
 'tile/tile_factory.cpp',
 'tile/tile_map.cpp',
 'tile/tile_packer.cpp',
-'timer.cpp',
 'util/baby_xml.cpp',
 'util/command_line.cpp',
 'util/command_line_generic.cpp',

Modified: trunk/windstille/src/engine/script_manager.cpp
===================================================================
--- trunk/windstille/src/engine/script_manager.cpp	2009-02-12 08:17:19 UTC (rev 2468)
+++ trunk/windstille/src/engine/script_manager.cpp	2009-02-12 08:24:12 UTC (rev 2469)
@@ -12,7 +12,6 @@
 #include <sqstdstring.h>
 
 #include "console.hpp"
-#include "timer.hpp"
 #include "scripting/wrapper.hpp"
 #include "scripting/util.hpp"
 #include "scripting/squirrel_error.hpp"

Modified: trunk/windstille/src/engine/script_manager.hpp
===================================================================
--- trunk/windstille/src/engine/script_manager.hpp	2009-02-12 08:17:19 UTC (rev 2468)
+++ trunk/windstille/src/engine/script_manager.hpp	2009-02-12 08:24:12 UTC (rev 2469)
@@ -24,7 +24,6 @@
 #include <map>
 #include <squirrel.h>
 #include <iostream>
-#include "timer.hpp"
 #include "scripting/wrapper.hpp"
 #include "scripting/util.hpp"
 

Modified: trunk/windstille/src/globals.cpp
===================================================================
--- trunk/windstille/src/globals.cpp	2009-02-12 08:17:19 UTC (rev 2468)
+++ trunk/windstille/src/globals.cpp	2009-02-12 08:24:12 UTC (rev 2469)
@@ -23,6 +23,8 @@
 int TILE_SIZE    = 32;
 int TILE_RESOLUTION = 64;
 
+float game_time = 0.0f;
+
 float game_speed = 1.0f;
 #ifdef DEBUG
 bool debug = true;

Modified: trunk/windstille/src/globals.hpp
===================================================================
--- trunk/windstille/src/globals.hpp	2009-02-12 08:17:19 UTC (rev 2468)
+++ trunk/windstille/src/globals.hpp	2009-02-12 08:24:12 UTC (rev 2469)
@@ -31,6 +31,12 @@
 /** datadir => /usr/local/share/games/windstille/ */
 extern std::string datadir;
 
+/**
+ * This is the global game time in seconds. Should be the same as normal time,
+ * except that it stops when the game pauses
+ */
+extern float game_time;
+
 extern float game_speed;
 
 extern bool debug;

Modified: trunk/windstille/src/screen/game_session.cpp
===================================================================
--- trunk/windstille/src/screen/game_session.cpp	2009-02-12 08:17:19 UTC (rev 2468)
+++ trunk/windstille/src/screen/game_session.cpp	2009-02-12 08:24:12 UTC (rev 2469)
@@ -33,7 +33,6 @@
 #include "tile/tile_map.hpp"
 #include "screen_manager.hpp"
 #include "view.hpp"
-#include "timer.hpp"
 #include "hud/energy_bar.hpp"
 #include "hud/dialog_manager.hpp"
 #include "windstille_main.hpp"

Modified: trunk/windstille/src/sprite3d/sprite3d.cpp
===================================================================
--- trunk/windstille/src/sprite3d/sprite3d.cpp	2009-02-12 08:17:19 UTC (rev 2468)
+++ trunk/windstille/src/sprite3d/sprite3d.cpp	2009-02-12 08:24:12 UTC (rev 2469)
@@ -30,7 +30,6 @@
 #include "display/scene_context.hpp"
 #include "globals.hpp"
 #include "util/util.hpp"
-#include "timer.hpp"
 #include "display/opengl_state.hpp"
 #include "sprite3d/manager.hpp"
 #include "sprite3d/data.hpp"

Deleted: trunk/windstille/src/timer.cpp
===================================================================
--- trunk/windstille/src/timer.cpp	2009-02-12 08:17:19 UTC (rev 2468)
+++ trunk/windstille/src/timer.cpp	2009-02-12 08:24:12 UTC (rev 2469)
@@ -1,58 +0,0 @@
-//  SuperTux
-//  Copyright (C) 2005 Matthias Braun <matze at braunis.de>
-//
-//  This program is free software; you can redistribute it and/or
-//  modify it under the terms of the GNU General Public License
-//  as published by the Free Software Foundation; either version 2
-//  of the License, or (at your option) any later version.
-//
-//  This program is distributed in the hope that it will be useful,
-//  but WITHOUT ANY WARRANTY; without even the implied warranty of
-//  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
-//  GNU General Public License for more details.
-// 
-//  You should have received a copy of the GNU General Public License
-//  along with this program; if not, write to the Free Software
-//  Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA
-//  02111-1307, USA.
-
-#include <math.h>
-#include "timer.hpp"
-
-float game_time = 0;
-
-Timer::Timer()
-  : period(0), cycle_start(0), cyclic(false)
-{
-}
-
-Timer::~Timer()
-{
-}
-
-void
-Timer::start(float period, bool cyclic)
-{
-  this->period = period;
-  this->cyclic = cyclic;
-  cycle_start = game_time;
-}
-
-bool
-Timer::check()
-{
-  if(period == 0)
-    return false;
-  
-  if(game_time - cycle_start >= period) {
-    if(cyclic) {
-      cycle_start = game_time - fmodf(game_time - cycle_start, period);
-    } else {
-      period = 0;
-    }
-    return true;
-  }
-
-  return false;
-}
-

Deleted: trunk/windstille/src/timer.hpp
===================================================================
--- trunk/windstille/src/timer.hpp	2009-02-12 08:17:19 UTC (rev 2468)
+++ trunk/windstille/src/timer.hpp	2009-02-12 08:24:12 UTC (rev 2469)
@@ -1,67 +0,0 @@
-//  SuperTux
-//  Copyright (C) 2005 Matthias Braun <matze at braunis.de>
-//
-//  This program is free software; you can redistribute it and/or
-//  modify it under the terms of the GNU General Public License
-//  as published by the Free Software Foundation; either version 2
-//  of the License, or (at your option) any later version.
-//
-//  This program is distributed in the hope that it will be useful,
-//  but WITHOUT ANY WARRANTY; without even the implied warranty of
-//  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
-//  GNU General Public License for more details.
-// 
-//  You should have received a copy of the GNU General Public License
-//  along with this program; if not, write to the Free Software
-//  Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA
-//  02111-1307, USA.
-
-#ifndef __SUPERTUX_TIMER_HPP__
-#define __SUPERTUX_TIMER_HPP__
-
-/**
- * This is the global game time in seconds. Should be the same as normal time,
- * except that it stops when the game pauses
- */
-extern float game_time;
-
-/**
- * new simpler timer designed to be used in the update functions of objects
- */
-class Timer
-{
-public:
-  Timer();
-  ~Timer();
-
-  /** start the timer with the given period (in seconds).
-   * If cyclic=true then the timer willl be reset after each period.
-   * Set period to zero if you want to disable the timer.
-   */
-  void start(float period, bool cyclic = false);
-  /** returns true if a period (or more) passed since start call or last
-   * successfull check
-   */
-  bool check();
-  /** stop the timer */
-  void stop()
-  { start(0); }
-
-  /** returns the period of the timer or 0 if it isn't started */
-  float get_period() const
-  { return period; }
-  float get_timeleft() const
-  { return period - (game_time - cycle_start); }
-  float get_timegone() const
-  { return game_time - cycle_start; }
-  bool started() const
-  { return period != 0 && get_timeleft() > 0; }
-
-private:
-  float period;
-  float cycle_start;
-  bool cyclic;
-};
-
-#endif
-



From grumbel at mail.berlios.de  Thu Feb 12 09:34:06 2009
From: grumbel at mail.berlios.de (grumbel at BerliOS)
Date: Thu, 12 Feb 2009 09:34:06 +0100
Subject: [Windstille-commit] r2470 - in trunk/windstille/src: . app
	collision display engine font gui hud input objects particles
	screen scripting sprite3d tile
Message-ID: <200902120834.n1C8Y6X1011949@sheep.berlios.de>

Author: grumbel
Date: 2009-02-12 09:33:55 +0100 (Thu, 12 Feb 2009)
New Revision: 2470

Added:
   trunk/windstille/src/app/
   trunk/windstille/src/app/config.cpp
   trunk/windstille/src/app/config.hpp
   trunk/windstille/src/app/console.cpp
   trunk/windstille/src/app/console.hpp
   trunk/windstille/src/app/controller_def.cpp
   trunk/windstille/src/app/controller_def.hpp
   trunk/windstille/src/app/globals.cpp
   trunk/windstille/src/app/globals.hpp
   trunk/windstille/src/app/menu_manager.cpp
   trunk/windstille/src/app/menu_manager.hpp
   trunk/windstille/src/app/weapon.hpp
   trunk/windstille/src/app/windstille.hpp
   trunk/windstille/src/app/windstille_main.cpp
   trunk/windstille/src/app/windstille_main.hpp
Removed:
   trunk/windstille/src/config.cpp
   trunk/windstille/src/config.hpp
   trunk/windstille/src/console.cpp
   trunk/windstille/src/console.hpp
   trunk/windstille/src/controller_def.cpp
   trunk/windstille/src/controller_def.hpp
   trunk/windstille/src/globals.cpp
   trunk/windstille/src/globals.hpp
   trunk/windstille/src/menu_manager.cpp
   trunk/windstille/src/menu_manager.hpp
   trunk/windstille/src/mt19937ar.c
   trunk/windstille/src/windstille.hpp
   trunk/windstille/src/windstille_main.cpp
   trunk/windstille/src/windstille_main.hpp
Modified:
   trunk/windstille/src/SConscript
   trunk/windstille/src/collision/collision_engine.cpp
   trunk/windstille/src/display/display.cpp
   trunk/windstille/src/display/opengl_state.cpp
   trunk/windstille/src/display/surface_manager.cpp
   trunk/windstille/src/display/texture_manager.cpp
   trunk/windstille/src/engine/entity.cpp
   trunk/windstille/src/engine/script_manager.cpp
   trunk/windstille/src/engine/sector.cpp
   trunk/windstille/src/font/fonts.cpp
   trunk/windstille/src/gui/root_component.cpp
   trunk/windstille/src/hud/dialog_manager.cpp
   trunk/windstille/src/hud/dialog_manager.hpp
   trunk/windstille/src/hud/energy_bar.cpp
   trunk/windstille/src/input/controller.cpp
   trunk/windstille/src/input/controller.hpp
   trunk/windstille/src/input/input_configurator.cpp
   trunk/windstille/src/input/input_manager_sdl.cpp
   trunk/windstille/src/objects/bomb.cpp
   trunk/windstille/src/objects/box.cpp
   trunk/windstille/src/objects/character.cpp
   trunk/windstille/src/objects/hedgehog.cpp
   trunk/windstille/src/objects/nightvision.cpp
   trunk/windstille/src/objects/player.cpp
   trunk/windstille/src/objects/player.hpp
   trunk/windstille/src/objects/scriptable_object.cpp
   trunk/windstille/src/objects/swarm.cpp
   trunk/windstille/src/particles/surface_drawer.cpp
   trunk/windstille/src/screen/game_session.cpp
   trunk/windstille/src/screen/game_session.hpp
   trunk/windstille/src/screen/geometry_test.cpp
   trunk/windstille/src/screen/screen.cpp
   trunk/windstille/src/screen/screen_manager.cpp
   trunk/windstille/src/screen/sprite2dview.cpp
   trunk/windstille/src/screen/sprite3dview.cpp
   trunk/windstille/src/screen/title_screen.cpp
   trunk/windstille/src/scripting/interface.cpp
   trunk/windstille/src/sprite3d/data.cpp
   trunk/windstille/src/sprite3d/sprite3d.cpp
   trunk/windstille/src/tile/tile.cpp
   trunk/windstille/src/tile/tile_description.cpp
   trunk/windstille/src/tile/tile_factory.cpp
   trunk/windstille/src/tile/tile_map.cpp
   trunk/windstille/src/tile/tile_map.hpp
   trunk/windstille/src/tile/tile_packer.cpp
Log:
Application stuff into app/

Modified: trunk/windstille/src/SConscript
===================================================================
--- trunk/windstille/src/SConscript	2009-02-12 08:24:12 UTC (rev 2469)
+++ trunk/windstille/src/SConscript	2009-02-12 08:33:55 UTC (rev 2470)
@@ -40,6 +40,12 @@
 # env['ENV']['LSBCC_SHAREDLIBS'] = 'png2:SDL:SDL_image:vorbis:ogg:openal:physfs'
 
 env.Program('../windstille', [
+'app/config.cpp',
+'app/console.cpp',
+'app/controller_def.cpp',
+'app/globals.cpp',
+'app/menu_manager.cpp',
+'app/windstille_main.cpp',
 'armature/armature.cpp',
 'armature/bone.cpp',
 'armature/mesh.cpp',
@@ -51,9 +57,6 @@
 'collision/collision_test.cpp',
 'collision/ladder_contact.cpp',
 'collision/stair_contact.cpp',
-'config.cpp',
-'console.cpp',
-'controller_def.cpp',
 'display/blitter.cpp',
 'display/display.cpp',
 'display/drawing_context.cpp',
@@ -79,7 +82,6 @@
 'font/border_font_effect.cpp',
 'font/fonts.cpp',
 'font/ttf_font.cpp',
-'globals.cpp',
 'gui/automap.cpp',
 'gui/button.cpp',
 'gui/component.cpp',
@@ -121,7 +123,6 @@
 'math/random.cpp',
 'math/rect.cpp',
 'math/vector.cpp',
-'menu_manager.cpp',
 'navigation/navigation_graph.cpp',
 'navigation/node.cpp',
 'navigation/properties.cpp',
@@ -146,22 +147,22 @@
 'objects/test_object.cpp',
 'objects/trigger.cpp',
 'objects/vrdummy.cpp',
-'screen/particle_viewer.cpp',
 'particles/deform_drawer.cpp',
 'particles/particle_system.cpp',
 'particles/spark_drawer.cpp',
 'particles/surface_drawer.cpp',
 'physfs/physfs_sdl.cpp',
 'physfs/physfs_stream.cpp',
-'screen/screen.cpp',
 'screen/armature_test.cpp',
 'screen/game_session.cpp',
 'screen/geometry_test.cpp',
 'screen/navigation_test.cpp',
+'screen/particle_viewer.cpp',
+'screen/screen.cpp',
+'screen/screen_manager.cpp',
 'screen/sprite2dview.cpp',
 'screen/sprite3dview.cpp',
 'screen/title_screen.cpp',
-'screen/screen_manager.cpp',
 'scripting/game_objects.cpp',
 'scripting/interface.cpp',
 'scripting/squirrel_error.cpp',
@@ -191,7 +192,6 @@
 'util/sexpr_file_reader.cpp',
 'util/util.cpp',
 'view.cpp',
-'windstille_main.cpp',
 ])
 
 # EOF #

Copied: trunk/windstille/src/app/config.cpp (from rev 2466, trunk/windstille/src/config.cpp)


Property changes on: trunk/windstille/src/app/config.cpp
___________________________________________________________________
Name: svn:keywords
   + Id
Name: svn:mergeinfo
   + 
Name: svn:eol-style
   + native

Copied: trunk/windstille/src/app/config.hpp (from rev 2466, trunk/windstille/src/config.hpp)


Property changes on: trunk/windstille/src/app/config.hpp
___________________________________________________________________
Name: svn:keywords
   + Id
Name: svn:mergeinfo
   + 
Name: svn:eol-style
   + native

Copied: trunk/windstille/src/app/console.cpp (from rev 2468, trunk/windstille/src/console.cpp)


Property changes on: trunk/windstille/src/app/console.cpp
___________________________________________________________________
Name: svn:keywords
   + Id
Name: svn:mergeinfo
   + 
Name: svn:eol-style
   + native

Copied: trunk/windstille/src/app/console.hpp (from rev 2466, trunk/windstille/src/console.hpp)


Property changes on: trunk/windstille/src/app/console.hpp
___________________________________________________________________
Name: svn:keywords
   + Id
Name: svn:mergeinfo
   + 
Name: svn:eol-style
   + native

Copied: trunk/windstille/src/app/controller_def.cpp (from rev 2466, trunk/windstille/src/controller_def.cpp)


Property changes on: trunk/windstille/src/app/controller_def.cpp
___________________________________________________________________
Name: svn:keywords
   + Id
Name: svn:mergeinfo
   + 
Name: svn:eol-style
   + native

Copied: trunk/windstille/src/app/controller_def.hpp (from rev 2466, trunk/windstille/src/controller_def.hpp)


Property changes on: trunk/windstille/src/app/controller_def.hpp
___________________________________________________________________
Name: svn:keywords
   + Id
Name: svn:mergeinfo
   + 
Name: svn:eol-style
   + native

Copied: trunk/windstille/src/app/globals.cpp (from rev 2469, trunk/windstille/src/globals.cpp)


Property changes on: trunk/windstille/src/app/globals.cpp
___________________________________________________________________
Name: svn:keywords
   + Id
Name: svn:mergeinfo
   + 
Name: svn:eol-style
   + native

Copied: trunk/windstille/src/app/globals.hpp (from rev 2469, trunk/windstille/src/globals.hpp)


Property changes on: trunk/windstille/src/app/globals.hpp
___________________________________________________________________
Name: svn:keywords
   + Id
Name: svn:mergeinfo
   + 
Name: svn:eol-style
   + native

Copied: trunk/windstille/src/app/menu_manager.cpp (from rev 2468, trunk/windstille/src/menu_manager.cpp)


Property changes on: trunk/windstille/src/app/menu_manager.cpp
___________________________________________________________________
Name: svn:keywords
   + Id
Name: svn:mergeinfo
   + 
Name: svn:eol-style
   + native

Copied: trunk/windstille/src/app/menu_manager.hpp (from rev 2466, trunk/windstille/src/menu_manager.hpp)


Property changes on: trunk/windstille/src/app/menu_manager.hpp
___________________________________________________________________
Name: svn:keywords
   + Id
Name: svn:mergeinfo
   + 
Name: svn:eol-style
   + native

Copied: trunk/windstille/src/app/weapon.hpp (from rev 2466, trunk/windstille/src/weapon.hpp)


Property changes on: trunk/windstille/src/app/weapon.hpp
___________________________________________________________________
Name: svn:mergeinfo
   + 

Copied: trunk/windstille/src/app/windstille.hpp (from rev 2466, trunk/windstille/src/windstille.hpp)


Property changes on: trunk/windstille/src/app/windstille.hpp
___________________________________________________________________
Name: svn:keywords
   + Id
Name: svn:mergeinfo
   + 
Name: svn:eol-style
   + native

Copied: trunk/windstille/src/app/windstille_main.cpp (from rev 2468, trunk/windstille/src/windstille_main.cpp)


Property changes on: trunk/windstille/src/app/windstille_main.cpp
___________________________________________________________________
Name: svn:keywords
   + Id
Name: svn:mergeinfo
   + 
Name: svn:eol-style
   + native

Copied: trunk/windstille/src/app/windstille_main.hpp (from rev 2468, trunk/windstille/src/windstille_main.hpp)


Property changes on: trunk/windstille/src/app/windstille_main.hpp
___________________________________________________________________
Name: svn:keywords
   + Id
Name: svn:mergeinfo
   + 
Name: svn:eol-style
   + native

Modified: trunk/windstille/src/collision/collision_engine.cpp
===================================================================
--- trunk/windstille/src/collision/collision_engine.cpp	2009-02-12 08:24:12 UTC (rev 2469)
+++ trunk/windstille/src/collision/collision_engine.cpp	2009-02-12 08:33:55 UTC (rev 2470)
@@ -19,7 +19,7 @@
 
 #include "collision_test.hpp"
 #include "collision_engine.hpp"
-#include "globals.hpp"
+#include "app/globals.hpp"
 #include "tile/tile_map.hpp"
 
 std::vector<Rectf> tilemap_collision_list(TileMap *tilemap, const Rectf &r, bool is_ground);

Deleted: trunk/windstille/src/config.cpp
===================================================================
--- trunk/windstille/src/config.cpp	2009-02-12 08:24:12 UTC (rev 2469)
+++ trunk/windstille/src/config.cpp	2009-02-12 08:33:55 UTC (rev 2470)
@@ -1,456 +0,0 @@
-/*
-**  Windstille - A Sci-Fi Action-Adventure Game
-**  Copyright (C) 2000,2005 Ingo Ruhnke <grumbel at gmx.de>
-**
-**  This program is free software: you can redistribute it and/or modify
-**  it under the terms of the GNU General Public License as published by
-**  the Free Software Foundation, either version 3 of the License, or
-**  (at your option) any later version.
-**  
-**  This program is distributed in the hope that it will be useful,
-**  but WITHOUT ANY WARRANTY; without even the implied warranty of
-**  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
-**  GNU General Public License for more details.
-**  
-**  You should have received a copy of the GNU General Public License
-**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
-*/
-
-#include "windstille.hpp"
-
-#include <boost/format.hpp>
-#include <memory>
-#include <iostream>
-#include "config.hpp"
-#include "util/sexpr_file_reader.hpp"
-#include "util/command_line.hpp"
-#include "globals.hpp"
-
-#define _(A) A
-
-std::vector<std::string> arg_files;
-
-Config config;
-
-Config::Config()
-{
-  add(new ConfigValue<int> ("anti-aliasing",  _("Use NUMx Anti-Aliasing"), true, 0));
-  add(new ConfigValue<bool>("fullscreen",     _("Use fullscreen"),         true, false));
-  add(new ConfigValue<bool>("show-fps",       _("Show frames per second"), true, true));
-
-  add(new ConfigValue<bool>("music",          _("Enable Music"), true, true));
-  add(new ConfigValue<bool>("sound",          _("Enable Sound"), true, true));
-  
-  add(new ConfigValue<int>("aspect-width",    _("Aspect Width"),   true, 800));
-  add(new ConfigValue<int>("aspect-height",   _("Aspect Height"),  true, 600));
-
-  add(new ConfigValue<int>("screen-width",    _("Screen Width"),   true, 800));
-  add(new ConfigValue<int>("screen-height",   _("Screen Height"), true, 600));
-
-  add(new ConfigValue<std::string>("levelfile",       _("Levelfile to be used at startup"), false));
-
-  // FIXME: There is no need to limit this to just two
-  add(new ConfigValue<std::string>("primary-controller-file",   _("Controller Config file to load"), true));
-  add(new ConfigValue<std::string>("secondary-controller-file", _("Controller Config file to load"), true));
-
-  add(new ConfigValue<std::string>("screenshot-dir",  _("Directory where Screenshots are saved"), false));
-
-  add(new ConfigValue<std::string>("recorder-file",   _("File to which demos are recorded"), false));
-  add(new ConfigValue<std::string>("playback-file",   _("File from which a demo is played"), false));
-
-  add(new ConfigValue<int>("master-volume",  _("Master Volume"), true, 100));
-
-  add(new ConfigValue<bool>("wiimote", _("Try to connect to Wiimote on startup"), true, false));
-}
-
-Config::~Config()
-{
-  for(ConfigValues::iterator i = config_values.begin(); i != config_values.end(); ++i)
-    {
-      delete i->second;
-    }
-}
-
-void 
-Config::add(ConfigValueBase* value)
-{
-  config_values[value->get_name()] = value;
-}
-
-std::string
-Config::get_string(const std::string& name) const 
-{
-  return get<std::string>(name).get();
-}
-
-bool
-Config::get_bool(const std::string& name) const 
-{
-  return get<bool>(name).get();
-}
-
-int
-Config::get_int(const std::string& name) const 
-{
-  return get<int>(name).get();
-}
-
-float
-Config::get_float(const std::string& name) const 
-{
-  return get<float>(name).get();
-}
-
-void
-Config::set_string(const std::string& name, const std::string& value)
-{
-  get<std::string>(name).set(value);
-}
-
-void
-Config::set_bool  (const std::string& name, bool  value)
-{
-  get<bool>(name).set(value);
-}
-
-void
-Config::set_int   (const std::string& name, int   value)
-{
-  get<int>(name).set(value);
-}
-
-void
-Config::set_float (const std::string& name, float value)
-{
-  get<float>(name).set(value);
-}
-
-void
-Config::parse_args(int argc, char** argv)
-{
-  arg_files.clear();
-
-  CommandLine argp;
-
-  const int debug_flag        = 256;
-  const int nodebug_flag      = 257;
-  const int sprite3dview_flag = 258;
-  const int particleview_flag = 259;
-  const int sprite2dview_flag = 260;
-  const int secondary_controller_file = 261;
-    
-  argp.set_help_indent(24);
-  argp.add_usage ("[LEVELFILE]");
-  argp.add_doc   ("Windstille is a classic Jump'n Run game.");
-
-  argp.add_group("Mode Options:");
-  argp.add_option(sprite3dview_flag, "sprite3dview", "", "Launch Sprite3DView instead of the game");
-  argp.add_option(sprite2dview_flag, "sprite2dview", "", "Launch Sprite2DView instead of the game");
-  argp.add_option(particleview_flag, "particle-viewer", "", "Launch ParticleView instead of the game");
-
-  argp.add_group("Display Options:");
-  argp.add_option('g', "geometry",   "WxH", "Change window size to WIDTH and HEIGHT");
-  argp.add_option('a', "aspect",   "WxH", "Change aspect size to WIDTH and HEIGHT");
-  argp.add_option('f', "fullscreen", "", "Launch the game in fullscreen");
-  argp.add_option('A', "anti-aliasing", "NUM", "Enable NUMx Anti-Aliasing");
-
-  argp.add_group("Sound Options:");
-  argp.add_option('s', "disable-sound", "", "Disable sound");
-  argp.add_option('S', "enable-sound", "", "Enable sound");
-
-  argp.add_group("Controlls Options:");
-  argp.add_option('c', "controller", "FILE", "Use controller as defined in FILE");
-  argp.add_option(secondary_controller_file, "secondary-controller", "FILE",
-                  "Use controller as defined in FILE");
-#ifdef HAVE_CWIID
-  argp.add_option('w', "wiimote", "", "Connect to Wiimote on startup");
-#endif
-
-  argp.add_group("Misc Options:");
-  argp.add_option('d', "datadir",    "DIR", "Fetch game data from DIR");
-  argp.add_option(debug_flag, "debug",      "", "Turn on debug output");
-  argp.add_option(nodebug_flag, "nodebug",      "", "Turn off debug output");
-  argp.add_option('v', "version",       "", "Print Windstille Version");
-  argp.add_option('h', "help",       "", "Print this help");
-
-  argp.add_group("Demo Recording/Playback Options:");
-  argp.add_option('r', "record",      "FILE", "Record input events to FILE");
-  //argp.add_option('x', "record-video","DIR",  "Record a gameplay video to DIR");
-  argp.add_option('p', "play",        "FILE", "Playback input events from FILE");
-
-  argp.parse_args(argc, argv);
-
-  while (argp.next())
-    {
-      switch (argp.get_key())
-        {
-        case 'A':
-          int anti_aliasing;
-          if (sscanf(argp.get_argument().c_str(), "%d", &anti_aliasing) != 1)
-            {
-              throw std::runtime_error("Anti-Aliasing option '-a' requires argument of type {NUM}");
-            }
-          else
-            {
-              get<int>("anti-aliasing") = anti_aliasing;
-            }
-          break;
-
-        case 'r':
-          get<std::string>("recorder-file") = argp.get_argument();
-          break;
-
-        case 'x':
-          get<std::string>("screenshot-dir") = argp.get_argument();
-          break;
-
-        case 'p':
-          get<std::string>("playback-file") = argp.get_argument();
-          break;
-
-        case 'w':
-          get<bool>("wiimote") = true;
-          break;
-
-        case 'd':
-          datadir = argp.get_argument();
-          break;
-
-        case debug_flag:
-          debug = true;
-          break;
-
-        case nodebug_flag:
-          debug = false;
-          break;
-
-        case sprite3dview_flag:
-          sprite3dview = true;
-          break;
-
-        case sprite2dview_flag:
-          sprite2dview = true;
-          break;
-
-        case particleview_flag:
-          particleview = true;
-          break;
-
-        case 'f':
-          set_bool("fullscreen", true);
-          break;
-
-        case 'g':
-          {
-            int screen_width  = 800;
-            int screen_height = 600;
-            if (sscanf(argp.get_argument().c_str(), "%dx%d",
-                       &screen_width, &screen_height) == 2)
-              {
-                get<int>("screen-width")  = screen_width;
-                get<int>("screen-height") = screen_height;
-              
-                // FIXME: Why does this get printed twice?!
-                // Is the argument parser buggy?
-                std::cout << "Geometry: " << screen_width << "x" << screen_height << std::endl;
-              }
-            else
-              {
-                throw std::runtime_error("Geometry option '-g' requires argument of type {WIDTH}x{HEIGHT}");
-              }
-          }
-          break;
-
-        case 'a':
-          {
-            int aspect_width  = 800;
-            int aspect_height = 600;
-            if (sscanf(argp.get_argument().c_str(), "%dx%d",
-                       &aspect_width, &aspect_height) == 2)
-              {
-                get<int>("aspect-width")  = aspect_width;
-                get<int>("aspect-height") = aspect_height;
-              
-                // FIXME: Why does this get printed twice?!
-                // Is the argument parser buggy?
-                std::cout << "Geometry: " << aspect_width << "x" << aspect_height << std::endl;
-              }
-            else
-              {
-                throw std::runtime_error("Geometry option '-a' requires argument of type {WIDTH}x{HEIGHT}");
-              }
-          }
-          break;
-        
-        case 's':
-          set_bool("sound", false);
-          break;
-
-        case 'S':
-          set_bool("sound", true);
-          break;  
-
-        case 'c':
-          get<std::string>("primary-controller-file") = argp.get_argument();
-          break;
-
-        case secondary_controller_file:
-          get<std::string>("secondary-controller-file") = argp.get_argument();
-          break;
-
-        case 'v':
-          std::cout << "Windstille " << WINDSTILLE_VERSION << std::endl;
-          exit(EXIT_SUCCESS);
-          break;
-
-        case 'h':
-          argp.print_help();
-          exit(EXIT_SUCCESS);
-          break;
-
-        case CommandLine::REST_ARG:
-          set_string("levelfile", argp.get_argument());
-          arg_files.push_back(argp.get_argument());
-          break;
-        }
-    }
-}
-
-bool
-Config::has_key(const std::string& name)
-{
-  ConfigValues::iterator i = config_values.find(name);
-  return (i != config_values.end());
-}
-
-bool
-Config::is_set(const std::string& name)
-{
-  ConfigValues::iterator i = config_values.find(name);
-  if (i == config_values.end())
-    {
-      throw std::runtime_error("Error: unknown Config value: '" + name + "'");        
-    }    
-  else
-    {
-      return i->second->is_set();
-    }
-}
-
-void
-Config::load()
-{
-  try {
-    FileReader reader = FileReader::parse("config");
-    if(reader.get_name() != "windstille-config") {
-      std::cerr << "Warning: Config file is not a windstille-config file.\n";
-      return;
-    }
-    
-    for(ConfigValues::iterator i = config_values.begin(); i != config_values.end(); ++i)
-      { // FIXME: all this dynamic_casting is overcomplicated crap
-        if (dynamic_cast<ConfigValue<int>*>(i->second))
-          {
-            int v;
-            if (reader.get(i->first.c_str(), v))
-              set_int(i->first, v);
-          }
-        else if (dynamic_cast<ConfigValue<bool>*>(i->second))
-          {
-            bool v;
-            if (reader.get(i->first.c_str(), v))
-              set_bool(i->first, v);
-          }
-        else if (dynamic_cast<ConfigValue<float>*>(i->second))
-          {
-            float v;
-            if (reader.get(i->first.c_str(), v))
-              set_float(i->first, v);
-          }
-        else if (dynamic_cast<ConfigValue<std::string>*>(i->second))
-          {
-            std::string v;
-            if (reader.get(i->first.c_str(), v))
-              set_string(i->first, v);
-          }
-        else 
-          {
-            std::cout << "Config: Unknown type for: " << i->first << std::endl;
-          }
-      }
-    reader.print_unused_warnings("configfile");
-
-    // TODO read controller config
-  } catch(std::exception& e) {
-    std::cerr << "Couldn't open config file: " << e.what() << "\n"
-              << "This is normal on first startup!\n";
-    return;
-  }
-}
-
-void
-Config::save()
-{
-  try {
-    lisp::Writer writer("config");
-
-    writer.write_comment(";; -*- scheme -*-");
-    writer.write_comment(";; Windstille Config - automatically read and written on startup/quit");
-    writer.start_list("windstille-config");
-
-    for(ConfigValues::iterator i = config_values.begin(); i != config_values.end(); ++i)
-      {
-        if (i->second->should_be_saved() && i->second->is_set())
-          {
-            writer.write_comment("  ;; " + i->second->get_docstring()); 
-            i->second->write(writer);
-            writer.write_comment("");
-          }
-      }
-    // TODO write controller config
-    
-    writer.end_list("windstille-config");
-    writer.write_comment(";; EOF ;;");
-  } catch(std::exception& e) {
-    std::cerr << "Couldn't write config file: " << e.what() << "\n";
-  }
-}
-
-void
-Config::debug_print(std::ostream& out)
-{
-  out << "Config " << this << ":" << std::endl;
-  for(ConfigValues::iterator i = config_values.begin(); i != config_values.end(); ++i)
-    {
-      out << boost::format("  %|1$20| = %|2$-20| (%|3$|)")
-        % i->second->get_name()
-        % (boost::format("'%|1s|'") % (*i->second))
-        % (i->second->is_set() ? "set" : "default")
-          << std::endl;
-      
-    }
-}
-
-template<>
-void ConfigValue<bool>::write(lisp::Writer& writer) {
-  writer.write_bool(get_name(), data);
-}
-
-template<>
-void ConfigValue<int>::write(lisp::Writer& writer) {
-  writer.write_int(get_name(), data);
-}
-
-template<>
-void ConfigValue<float>::write(lisp::Writer& writer) {
-  writer.write_float(get_name(), data);
-}
-
-template<>
-void ConfigValue<std::string>::write(lisp::Writer& writer) {
-  writer.write_string(get_name(), data);
-}
-
-
-/* EOF */
-

Deleted: trunk/windstille/src/config.hpp
===================================================================
--- trunk/windstille/src/config.hpp	2009-02-12 08:24:12 UTC (rev 2469)
+++ trunk/windstille/src/config.hpp	2009-02-12 08:33:55 UTC (rev 2470)
@@ -1,170 +0,0 @@
-/*
-**  Windstille - A Sci-Fi Action-Adventure Game
-**  Copyright (C) 2000,2005 Ingo Ruhnke <grumbel at gmx.de>
-**
-**  This program is free software: you can redistribute it and/or modify
-**  it under the terms of the GNU General Public License as published by
-**  the Free Software Foundation, either version 3 of the License, or
-**  (at your option) any later version.
-**  
-**  This program is distributed in the hope that it will be useful,
-**  but WITHOUT ANY WARRANTY; without even the implied warranty of
-**  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
-**  GNU General Public License for more details.
-**  
-**  You should have received a copy of the GNU General Public License
-**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
-*/
-
-#ifndef HEADER_WINDSTILLE_CONFIG_HPP
-#define HEADER_WINDSTILLE_CONFIG_HPP
-
-#include <map>
-#include <string>
-#include <typeinfo>
-#include <stdexcept>
-#include "lisp/writer.hpp"
-
-class ConfigValueBase
-{
-private:
-  std::string name;
-  std::string docstring;
-
-protected:
-  bool has_been_set;
-  bool do_save;
-
-public:
-  ConfigValueBase(const std::string& name_, const std::string& docstring_, bool do_save_)
-    : name(name_), docstring(docstring_),
-      has_been_set(false),
-      do_save(do_save_)
-  {   
-  }
-
-  virtual ~ConfigValueBase() {}
-
-  const std::string& get_name() { return name; }
-  const std::string& get_docstring() { return docstring; }
-
-  bool is_set() {
-    return has_been_set;
-  }
-
-  bool should_be_saved() {
-    return do_save;
-  }
-
-  virtual std::ostream& print(std::ostream& os) const =0;
-
-  virtual void write(lisp::Writer& writer) =0;
-};
-
-template<class T>
-class ConfigValue : public ConfigValueBase
-{
-private:
-  T    data;
-
-public:
-  ConfigValue(const std::string& name_, const std::string& docstring_, bool do_save_, const T& data_)
-    : ConfigValueBase(name_, docstring_, do_save_),
-      data(data_)
-  {
-    has_been_set = true;
-  }
-
-  ConfigValue(const std::string& name_, const std::string& docstring_, bool do_save_)
-    : ConfigValueBase(name_, docstring_, do_save_)
-  {    
-    has_been_set = false;
-  }
-
-  const T& get() const { 
-    return data; 
-  }
-
-  T& get() { 
-    return data;
-  }
-
-  T& set(const T& data_) {
-    data = data_;
-    has_been_set  = true;
-    return data;
-  }
-  
-  T& operator=(const T& data_) {
-    return set(data_);
-  }
-
-  void write(lisp::Writer& writer);
-
-  std::ostream& print(std::ostream& os) const {
-    return (os << data);
-  }
-};
-
-inline std::ostream& operator<<(std::ostream &o, const ConfigValueBase& value)
-{
-  return value.print(o);
-}
-
-class Config
-{
-private:
-  typedef std::map<std::string, ConfigValueBase*> ConfigValues;
-  ConfigValues config_values;
-
-  void add(ConfigValueBase*);
-public:
-  Config();
-  ~Config();
-
-  void set_defaults();
-
-  void parse_args(int argc, char** argv);
-
-  void load();
-  void save();
-
-  bool has_key(const std::string& name);
-
-  bool is_set(const std::string& name);
-
-  template<class T>
-  ConfigValue<T>& get(const std::string& name) const {
-    ConfigValues::const_iterator i = config_values.find(name);
-    if (i == config_values.end())
-      {
-        throw std::runtime_error("Error: unknown Config value: '" + name + "'");
-      }
-    else
-      {
-        ConfigValue<T>* ptr = dynamic_cast<ConfigValue<T>*>(i->second);
-        if (ptr)
-          return *ptr;
-        else
-          throw std::runtime_error("Error: Config value: '" + name + "' as wrong type");
-      }
-  }
-
-  std::string get_string(const std::string& name) const;
-  bool        get_bool  (const std::string& name) const;
-  int         get_int   (const std::string& name) const;
-  float       get_float (const std::string& name) const;
-
-  void set_string(const std::string& name, const std::string& value);
-  void set_bool  (const std::string& name, bool  value);
-  void set_int   (const std::string& name, int   value);
-  void set_float (const std::string& name, float value);
-
-  void debug_print(std::ostream& out);
-};
-
-extern Config config;
-
-#endif
-
-/* EOF */

Deleted: trunk/windstille/src/console.cpp
===================================================================
--- trunk/windstille/src/console.cpp	2009-02-12 08:24:12 UTC (rev 2469)
+++ trunk/windstille/src/console.cpp	2009-02-12 08:33:55 UTC (rev 2470)
@@ -1,590 +0,0 @@
-/*
-**  Windstille - A Sci-Fi Action-Adventure Game
-**  Copyright (C) 2005 Ingo Ruhnke <grumbel at gmx.de>
-**
-**  This program is free software: you can redistribute it and/or modify
-**  it under the terms of the GNU General Public License as published by
-**  the Free Software Foundation, either version 3 of the License, or
-**  (at your option) any later version.
-**  
-**  This program is distributed in the hope that it will be useful,
-**  but WITHOUT ANY WARRANTY; without even the implied warranty of
-**  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
-**  GNU General Public License for more details.
-**  
-**  You should have received a copy of the GNU General Public License
-**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
-*/
-
-#include <assert.h>
-#include "math/rect.hpp"
-#include "font/fonts.hpp"
-#include "screen/game_session.hpp"
-#include "input/input_manager.hpp"
-#include "engine/script_manager.hpp"
-#include "display/display.hpp"
-#include "scripting/util.hpp"
-#include "console.hpp"
-
-Console console;
-
-class ConsoleStreambuf : public std::streambuf
-{
-public:
-  ConsoleStreambuf(Console* console_)
-    : console(console_)
-  {
-    setp(buf, buf+sizeof(buf));
-  }
-
-  ~ConsoleStreambuf()
-  {
-    sync();
-  }
-
-protected:
-  virtual int overflow(int c)
-  {
-    if(pbase() == pptr())
-      return 0;
-
-    size_t size = pptr() - pbase();
-    console->add(pbase(), size);
-      
-    if(c != traits_type::eof()) {
-      char str[1];
-      str[0] = c;
-      console->add(str, 1);
-    }
-
-    setp(buf, buf + size);
-
-    return 0;
-  }
-
-  virtual int sync()
-  {
-    return overflow(traits_type::eof());
-  }
-
-private:
-  Console* console;
-  char buf[1024];
-};
-
-//-------------------------------------------------------------------------------
-
-class ConsoleImpl
-{
-public:
-  Console& console;
-
-  struct ConsoleEntry {
-    std::string message;
-    float display_time;
-  };
-
-  int x_pos;
-  int y_pos;
-  typedef std::vector<ConsoleEntry> Buffer;
-  Buffer buffer;
-
-  std::string command_line;
-  bool active;
-  std::vector<std::string> history;
-  int history_position;
-
-  int cursor_pos;
-
-  int scroll_offset;
-  ConsoleEntry current_entry;
-
-  ConsoleImpl(Console& console_)
-    : console(console_)
-  {
-    x_pos = 16;
-    y_pos = 600-16;
-
-    active = false;
-    history_position = 1; 
-
-    scroll_offset = 0;
-    cursor_pos  = 0;   
-  }
-
-  void draw();
-  void update(float delta);
-  void eval_command_line();
-  void tab_complete();
-
-  /** adds a newline if the current line contains content */
-  void maybe_newline();
-
-  std::vector<std::string> get_roottable();
-
-  void execute(const std::string& str);
-
-  void add(char* buf, int len)
-  {
-    current_entry.display_time = 0;
-
-    for (int i = 0; i < len; ++i)
-      {
-        if (buf[i] == '\n' || (current_entry.message.size() > 80 && buf[i] == ' ')) // primitive linebreak
-          {
-            buffer.push_back(current_entry);
-            current_entry = ConsoleEntry();
-          }
-        else
-          {
-            current_entry.message += buf[i];
-          }
-      }
-  }
-};
-
-//-------------------------------------------------------------------------------
-
-void
-ConsoleImpl::draw()
-{
-  int y = y_pos;
-
-  if (active)
-    y -= Fonts::ttffont->get_height() + 2;
-
-  int num_lines = 600 / (Fonts::ttffont->get_height() + 2);
-
-  if (console.is_active())
-    Display::fill_rect(Rect(0,0, 800, 600),
-                       Color(0, 0, 0, 0.5f));
-
-  for(int i = buffer.size()-1 - scroll_offset; i >= 0 && i > int(buffer.size()) - num_lines - scroll_offset; --i)
-    {
-      if (buffer[i].display_time < 5.0f || console.is_active())
-        {
-          float alpha = 1.0f;
-          if (buffer[i].display_time > 4.0f && !console.is_active())
-            alpha = 1.0f - (buffer[i].display_time - 4.0f);
-
-          Fonts::ttffont->draw(x_pos, y, buffer[i].message, Color(0.88f, 0.88f, 1.0f, alpha));
-        }
-      y -= Fonts::ttffont->get_height() + 2;
-    }
-
-  if (active)
-    {
-      std::string str = command_line;
-      if (SDL_GetTicks() % 300 > 150)
-        {
-          if (cursor_pos < int(str.size()))
-            str[cursor_pos] = '_';
-          else
-            str += "_";
-        }
-
-      Fonts::ttffont->draw(x_pos, y_pos, "> " + str, Color(1.0f, 1.0f, 1.0f));
-    }
-}
-
-void
-ConsoleImpl::update(float delta)
-{
-  for(Buffer::iterator i = buffer.begin(); i != buffer.end(); ++i)
-    {
-      i->display_time += delta;
-    }  
-
-  if (active)
-    {
-      InputEventLst events = InputManager::get_controller().get_events();
-  
-      for (InputEventLst::iterator i = events.begin(); i != events.end(); ++i)
-        {
-          if ((*i).type == KEYBOARD_EVENT)
-            {
-              if ((*i).keyboard.key_type == KeyboardEvent::LETTER)
-                {
-                  if (cursor_pos == int(command_line.size()))
-                    {
-                      command_line += (char)(*i).keyboard.code;
-                      cursor_pos += 1;
-                    }
-                  else
-                    {
-                      command_line.insert(cursor_pos, std::string(1, (char)(*i).keyboard.code));
-                      cursor_pos += 1;
-                    }
-                }
-              else if ((*i).keyboard.key_type == KeyboardEvent::SPECIAL)
-                {
-                  //console << "special: " << i->keyboard.code << std::endl;
-
-                  switch (i->keyboard.code)
-                    {
-                    case SDLK_BACKSPACE:
-                      if (!command_line.empty() && cursor_pos > 0)
-                        {
-                          command_line.erase(cursor_pos - 1, 1);
-                          cursor_pos -= 1;
-                        }
-                      break;
-
-                    case SDLK_DELETE:
-                      if (!command_line.empty())
-                        {
-                          command_line.erase(cursor_pos, 1);
-                        }
-                      break;
-
-                    case SDLK_DOWN:
-                      if (!history.empty())
-                        {
-                          history_position += 1;
-                          if (history_position > int(history.size())-1)
-                            history_position = int(history.size())-1;
-                          command_line = history[history_position];
-                          cursor_pos = command_line.size();
-                        }
-                      break;
-
-                    case SDLK_HOME:
-                      cursor_pos = 0;
-                      break;
-                      
-                    case SDLK_END:
-                      cursor_pos = command_line.size();
-                      break;
-                        
-                    case SDLK_PAGEUP:
-                      console.scroll(10);
-                      break;
-
-                    case SDLK_PAGEDOWN:
-                      console.scroll(-10);
-                      break;
-
-                    case SDLK_TAB:
-                      tab_complete();
-                      break;
-
-                    case SDLK_UP:
-                      if (!history.empty())
-                        {
-                          history_position -= 1;
-                          if (history_position < 0)
-                            history_position = 0;
-
-                          command_line = history[history_position];
-                          cursor_pos = command_line.size();
-                        }
-                      break;
-
-                    case SDLK_LEFT:
-                      cursor_pos -= 1;
-                      if (cursor_pos < 0)
-                        cursor_pos = 0;
-                      break;
-
-                    case SDLK_RIGHT:
-                      cursor_pos += 1;
-                      if (cursor_pos > int(command_line.size()))
-                        cursor_pos = command_line.size();
-                      break;
-
-                    case SDLK_RETURN:
-                      eval_command_line();
-                      break;
-
-                    case SDLK_ESCAPE:
-                    case SDLK_F1:
-                      console.deactive();
-                      break;
-                    }
-                }
-            }
-        }
-    }
-}
-
-void
-ConsoleImpl::maybe_newline()
-{
-  console << std::flush;
-  if (!current_entry.message.empty())
-    {
-      console << std::endl;
-    }
-}
-
-std::vector<std::string>
-ConsoleImpl::get_roottable()
-{
-  std::vector<std::string> roottable;
-  HSQUIRRELVM v = script_manager->get_vm();
-
-  sq_pushroottable(v);
-
-  //push your table/array here
-  sq_pushnull(v);  //null iterator
-  while(SQ_SUCCEEDED(sq_next(v,-2)))
-    {
-      //here -1 is the value and -2 is the key
-      const SQChar *s;
-      if (SQ_SUCCEEDED(sq_getstring(v,-2, &s)))
-        {
-          roottable.push_back((char*)s);
-        }
-      else
-        {
-          console << "Unknown key type for element" << std::endl;
-        }
-                              
-      sq_pop(v,2); //pops key and val before the nex iteration
-    }
-                          
-  sq_pop(v, 1);
-  
-  return roottable;
-}
-
-static bool has_prefix(const std::string& lhs, const std::string rhs)
-{
-  if (lhs.length() < rhs.length())
-    return false;
-  else
-    return lhs.compare(0, rhs.length(), rhs) == 0;
-}
-
-static std::string longest_prefix(const std::string& lhs, const std::string rhs)
-{
-  std::string::size_type i;
-  for(i = 0; i < lhs.size() && i < rhs.size() && lhs[i] == rhs[i]; ++i);
-  return lhs.substr(0, i);
-}
-
-static std::string find_longest_prefix(const std::vector<std::string>& lst)
-{
-  if (lst.empty())
-    {
-      return "";
-    }
-  else
-    {
-      std::string prefix = lst.front();
-
-      for(std::vector<std::string>::const_iterator i = lst.begin() + 1; 
-          i != lst.end(); ++i)
-        {
-          prefix = longest_prefix(prefix, *i);
-        }
-
-      return prefix;
-    }
-}
-
-void
-ConsoleImpl::tab_complete()
-{
-  const std::vector<std::string>& roottable = get_roottable();
-  std::vector<std::string> completions;
-
-  for(std::vector<std::string>::const_iterator i = roottable.begin();
-      i != roottable.end();
-      ++i)
-    {
-      if (has_prefix(*i, command_line))
-        {
-          completions.push_back(*i);
-        }
-    }
-
-  if (completions.empty())
-    {
-      // console << "No completions" << std::endl;
-    }
-  else if (completions.size() == 1)
-    {
-      command_line = completions.front();
-      cursor_pos = command_line.size();
-    }
-  else 
-    {
-      console << "> " << command_line << std::endl;
-      for(std::vector<std::string>::iterator i = completions.begin(); i != completions.end(); ++i)
-        {
-          console << *i << " ";
-        }
-      console << std::endl;
-
-      command_line = find_longest_prefix(completions);
-      cursor_pos = command_line.size();
-    }
-}
-
-void
-ConsoleImpl::eval_command_line()
-{
-  if (!command_line.empty() && (history.empty() || history.back() != command_line))
-    {
-      history.push_back(command_line);
-      history_position = history.size();
-    }
-                      
-  console << "> " << command_line << std::endl;
-
-  if (command_line == "quit" || command_line == "exit")
-    {
-      console.deactive();
-    }
-  else if (command_line == "help")
-    {
-      console << "This is a script console, can enter stuff in here that will then be evaluated.\n"
-              << "Type 'quit' to exit the console." << std::endl;
-    }
-  else if (command_line == "reset")
-    {
-      GameSession::current()->set_sector("levels/newformat2.wst");
-    }
-  else if (command_line == "show")
-    {
-      HSQUIRRELVM v = script_manager->get_vm();
-
-      int size = sq_getsize(v, -1);
-      console << size << " elements on the root table" << std::endl;
-
-      sq_pushroottable(v);
-
-      //push your table/array here
-      sq_pushnull(v);  //null iterator
-      while(SQ_SUCCEEDED(sq_next(v,-2)))
-        {
-          //here -1 is the value and -2 is the key
-          const SQChar *s;
-          if (SQ_SUCCEEDED(sq_getstring(v,-2, &s)))
-            {
-              console << s << " -> " << Scripting::squirrel2string(v, -1) << std::endl;
-            }
-          else
-            {
-              console << "Unknown key type for element" << std::endl;
-            }
-                              
-          sq_pop(v,2); //pops key and val before the nex iteration
-        }
-                          
-      sq_pop(v, 1);
-    }
-  else
-    {
-      execute(command_line);
-      maybe_newline();
-    }
-  command_line = "";
-  cursor_pos = 0;
-}
-
-void
-ConsoleImpl::execute(const std::string& str_)
-{
-  std::string str = str_; //"return (" + str_ + ")";
-
-  int i = str.length();
-  const char* buffer = str.c_str();
-
-  HSQUIRRELVM vm = script_manager->get_vm();
-  int oldtop = sq_gettop(vm); 
-  try {
-    int retval = 1;
-
-    if(i > 0) 
-      {
-        if(SQ_SUCCEEDED(sq_compilebuffer(vm, buffer, i, _SC("interactive console"), SQTrue)))
-          {
-            sq_pushroottable(vm);
-            if(SQ_SUCCEEDED(sq_call(vm, 1, retval, true))) 
-              {
-                // FIXME: This does only work when somebody is doing a 'return', i.e. almost never
-                if (sq_gettype(vm, -1) != OT_NULL)
-                  console << Scripting::squirrel2string(vm, -1) << std::endl;
-                // else
-                //   console << "(null)" << std::endl;
-              }
-          }
-      }
-  } catch(std::exception& e) {
-    std::cerr << "Couldn't execute command '" << str_ << "': "
-              << e.what() << "\n";
-  }
-
-  sq_settop(vm, oldtop);
-}
-
-//-------------------------------------------------------------------------------
-
-Console::Console()
-  : std::ostream(new ConsoleStreambuf(this)),
-    impl(new ConsoleImpl(*this))
-{
-}
-
-void
-Console::activate()
-{
-  // Get rid of all input events so that we don't double press
-  InputManager::clear();
-  impl->active = true;
-
-  SDL_EnableKeyRepeat(SDL_DEFAULT_REPEAT_DELAY, SDL_DEFAULT_REPEAT_INTERVAL);
-}
-
-void
-Console::deactive()
-{
-  impl->active = false;
-
-  SDL_EnableKeyRepeat(0, SDL_DEFAULT_REPEAT_INTERVAL);
-}
-
-bool
-Console::is_active() const
-{
-  return impl->active;
-}
-
-void
-Console::draw()
-{
-  impl->draw();
-}
-
-void
-Console::update(float delta)
-{
-  impl->update(delta);
-}
-
-void
-Console::add(char* buf, int len)
-{
-  impl->add(buf, len);
-}
-
-void
-Console::scroll(int lines)
-{
-  impl->scroll_offset += lines;
-  
-  if (impl->scroll_offset < 0)
-    impl->scroll_offset = 0;
-  else if (impl->scroll_offset >= int(impl->buffer.size()))
-    impl->scroll_offset = impl->buffer.size()-1;
-}
-
-void
-Console::execute(const std::string& str)
-{
-  impl->execute(str);
-}
-
-/* EOF */

Deleted: trunk/windstille/src/console.hpp
===================================================================
--- trunk/windstille/src/console.hpp	2009-02-12 08:24:12 UTC (rev 2469)
+++ trunk/windstille/src/console.hpp	2009-02-12 08:33:55 UTC (rev 2470)
@@ -1,56 +0,0 @@
-/*
-**  Windstille - A Sci-Fi Action-Adventure Game
-**  Copyright (C) 2005 Ingo Ruhnke <grumbel at gmx.de>
-**
-**  This program is free software: you can redistribute it and/or modify
-**  it under the terms of the GNU General Public License as published by
-**  the Free Software Foundation, either version 3 of the License, or
-**  (at your option) any later version.
-**  
-**  This program is distributed in the hope that it will be useful,
-**  but WITHOUT ANY WARRANTY; without even the implied warranty of
-**  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
-**  GNU General Public License for more details.
-**  
-**  You should have received a copy of the GNU General Public License
-**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
-*/
-
-#ifndef HEADER_WINDSTILLE_CONSOLE_HPP
-#define HEADER_WINDSTILLE_CONSOLE_HPP
-
-#include <vector>
-#include <sstream>
-
-class ConsoleImpl;
-
-class Console : public std::ostream
-{
-public:
-  Console();
-
-  void draw();
-  void update(float delta);
-
-  void activate();
-  void deactive();
-  bool is_active() const;
-
-  void scroll(int lines);
-
-  void add(char* buf, int len);
-  
-  /** execute the given string */
-  void execute(const std::string& str);
-private:
-  Console (const Console&);
-  Console& operator= (const Console&);
-
-  ConsoleImpl* impl;
-};
-
-extern Console console;
-
-#endif
-
-/* EOF */

Deleted: trunk/windstille/src/controller_def.cpp
===================================================================
--- trunk/windstille/src/controller_def.cpp	2009-02-12 08:24:12 UTC (rev 2469)
+++ trunk/windstille/src/controller_def.cpp	2009-02-12 08:33:55 UTC (rev 2470)
@@ -1,23 +0,0 @@
-/*
-**  Windstille - A Sci-Fi Action-Adventure Game
-**  Copyright (C) 2000,2005 Ingo Ruhnke <grumbel at gmx.de>
-**
-**  This program is free software: you can redistribute it and/or modify
-**  it under the terms of the GNU General Public License as published by
-**  the Free Software Foundation, either version 3 of the License, or
-**  (at your option) any later version.
-**  
-**  This program is distributed in the hope that it will be useful,
-**  but WITHOUT ANY WARRANTY; without even the implied warranty of
-**  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
-**  GNU General Public License for more details.
-**  
-**  You should have received a copy of the GNU General Public License
-**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
-*/
-
-#include "controller_def.hpp"
-
-ControllerDescription controller_description;
-
-/* EOF */

Deleted: trunk/windstille/src/controller_def.hpp
===================================================================
--- trunk/windstille/src/controller_def.hpp	2009-02-12 08:24:12 UTC (rev 2469)
+++ trunk/windstille/src/controller_def.hpp	2009-02-12 08:33:55 UTC (rev 2470)
@@ -1,72 +0,0 @@
-/*
-**  Windstille - A Sci-Fi Action-Adventure Game
-**  Copyright (C) 2000,2005 Ingo Ruhnke <grumbel at gmx.de>
-**
-**  This program is free software: you can redistribute it and/or modify
-**  it under the terms of the GNU General Public License as published by
-**  the Free Software Foundation, either version 3 of the License, or
-**  (at your option) any later version.
-**  
-**  This program is distributed in the hope that it will be useful,
-**  but WITHOUT ANY WARRANTY; without even the implied warranty of
-**  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
-**  GNU General Public License for more details.
-**  
-**  You should have received a copy of the GNU General Public License
-**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
-*/
-
-#ifndef HEADER_WINDSTILLE_CONTROLLER_DEF_HPP
-#define HEADER_WINDSTILLE_CONTROLLER_DEF_HPP
-
-#include <map>
-#include <string>
-#include "input/input_event.hpp"
-#include "input/controller_description.hpp"
-
-enum InputEventName
-  { 
-    MOUSE_MOTION_X, 
-    MOUSE_MOTION_Y, 
-
-    X_AXIS, // used to run left/right
-    Y_AXIS,  // used to aim up/down
-
-    X2_AXIS,
-    Y2_AXIS, 
-    
-    VIEW_CENTER_BUTTON,
-
-    PRIMARY_BUTTON,   // used to ok a dialog or for running
-    SECONDARY_BUTTON, // used to cancel a dialog or for jumping
-    TERTIARY_BUTTON,  // used to cancel a dialog or for jumping
-    PDA_BUTTON,       // display the PDA
-    INVENTORY_BUTTON, // display inventory button
-    
-    PAUSE_BUTTON,     // used to pause the game
-    AIM_BUTTON,       // used to draw the gun and aim
-
-    // Keys for menu navigation, they come with hardcoded defaults for
-    // the keyboard, a joystick might emmit them as well
-    ESCAPE_BUTTON,
-    ENTER_BUTTON,
-
-    MENU_UP_BUTTON,  
-    MENU_DOWN_BUTTON,
-    MENU_LEFT_BUTTON,
-    MENU_RIGHT_BUTTON,
-
-    LAST_EVENT
-  };
-
-#define JUMP_BUTTON   PRIMARY_BUTTON
-#define RUN_BUTTON    TERTIARY_BUTTON
-#define USE_BUTTON    SECONDARY_BUTTON
-#define OK_BUTTON     PRIMARY_BUTTON
-#define CANCEL_BUTTON SECONDARY_BUTTON
-
-extern ControllerDescription controller_description;
-
-#endif
-
-/* EOF */

Modified: trunk/windstille/src/display/display.cpp
===================================================================
--- trunk/windstille/src/display/display.cpp	2009-02-12 08:24:12 UTC (rev 2469)
+++ trunk/windstille/src/display/display.cpp	2009-02-12 08:33:55 UTC (rev 2470)
@@ -23,8 +23,8 @@
 #include <fstream>
 #include <stdexcept>
 #include <SDL.h>
-#include "console.hpp"
-#include "config.hpp"
+#include "app/console.hpp"
+#include "app/config.hpp"
 #include "math/math.hpp"
 #include "display/opengl_state.hpp"
 #include "display.hpp"

Modified: trunk/windstille/src/display/opengl_state.cpp
===================================================================
--- trunk/windstille/src/display/opengl_state.cpp	2009-02-12 08:24:12 UTC (rev 2469)
+++ trunk/windstille/src/display/opengl_state.cpp	2009-02-12 08:33:55 UTC (rev 2470)
@@ -23,7 +23,7 @@
 #include <iostream>
 #include "texture.hpp"
 #include "color.hpp"
-#include "globals.hpp"
+#include "app/globals.hpp"
 #include "display/display.hpp"
 #include "util/util.hpp"
 

Modified: trunk/windstille/src/display/surface_manager.cpp
===================================================================
--- trunk/windstille/src/display/surface_manager.cpp	2009-02-12 08:24:12 UTC (rev 2469)
+++ trunk/windstille/src/display/surface_manager.cpp	2009-02-12 08:33:55 UTC (rev 2470)
@@ -25,7 +25,7 @@
 #include <GL/glew.h>
 #include <GL/gl.h>
 #include "util/util.hpp"
-#include "globals.hpp"
+#include "app/globals.hpp"
 #include "texture.hpp"
 #include "surface.hpp"
 #include "texture_manager.hpp"

Modified: trunk/windstille/src/display/texture_manager.cpp
===================================================================
--- trunk/windstille/src/display/texture_manager.cpp	2009-02-12 08:24:12 UTC (rev 2469)
+++ trunk/windstille/src/display/texture_manager.cpp	2009-02-12 08:33:55 UTC (rev 2470)
@@ -25,7 +25,7 @@
 #include <GL/glew.h>
 #include <GL/gl.h>
 #include "util/util.hpp"
-#include "globals.hpp"
+#include "app/globals.hpp"
 #include "texture.hpp"
 #include "physfs/physfs_sdl.hpp"
 

Modified: trunk/windstille/src/engine/entity.cpp
===================================================================
--- trunk/windstille/src/engine/entity.cpp	2009-02-12 08:24:12 UTC (rev 2469)
+++ trunk/windstille/src/engine/entity.cpp	2009-02-12 08:33:55 UTC (rev 2470)
@@ -17,7 +17,7 @@
 */
 
 #include <assert.h>
-#include "globals.hpp"
+#include "app/globals.hpp"
 #include "sector.hpp"
 #include "tile/tile_map.hpp"
 #include "entity.hpp"

Modified: trunk/windstille/src/engine/script_manager.cpp
===================================================================
--- trunk/windstille/src/engine/script_manager.cpp	2009-02-12 08:24:12 UTC (rev 2469)
+++ trunk/windstille/src/engine/script_manager.cpp	2009-02-12 08:33:55 UTC (rev 2470)
@@ -11,7 +11,7 @@
 #include <sqstdmath.h>
 #include <sqstdstring.h>
 
-#include "console.hpp"
+#include "app/console.hpp"
 #include "scripting/wrapper.hpp"
 #include "scripting/util.hpp"
 #include "scripting/squirrel_error.hpp"

Modified: trunk/windstille/src/engine/sector.cpp
===================================================================
--- trunk/windstille/src/engine/sector.cpp	2009-02-12 08:24:12 UTC (rev 2469)
+++ trunk/windstille/src/engine/sector.cpp	2009-02-12 08:33:55 UTC (rev 2470)
@@ -20,7 +20,7 @@
 #include <sstream>
 #include <stdexcept>
 #include "util/sexpr_file_reader.hpp"
-#include "globals.hpp"
+#include "app/globals.hpp"
 #include "display/scene_context.hpp"
 #include "objects/background_gradient.hpp"
 #include "tile/tile_map.hpp"

Modified: trunk/windstille/src/font/fonts.cpp
===================================================================
--- trunk/windstille/src/font/fonts.cpp	2009-02-12 08:24:12 UTC (rev 2469)
+++ trunk/windstille/src/font/fonts.cpp	2009-02-12 08:33:55 UTC (rev 2470)
@@ -16,7 +16,7 @@
 **  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
-#include "globals.hpp"
+#include "app/globals.hpp"
 #include "border_font_effect.hpp"
 #include "fonts.hpp"
 

Deleted: trunk/windstille/src/globals.cpp
===================================================================
--- trunk/windstille/src/globals.cpp	2009-02-12 08:24:12 UTC (rev 2469)
+++ trunk/windstille/src/globals.cpp	2009-02-12 08:33:55 UTC (rev 2470)
@@ -1,41 +0,0 @@
-/*
-**  Windstille - A Sci-Fi Action-Adventure Game
-**  Copyright (C) 2000,2005 Ingo Ruhnke <grumbel at gmx.de>
-**
-**  This program is free software: you can redistribute it and/or modify
-**  it under the terms of the GNU General Public License as published by
-**  the Free Software Foundation, either version 3 of the License, or
-**  (at your option) any later version.
-**  
-**  This program is distributed in the hope that it will be useful,
-**  but WITHOUT ANY WARRANTY; without even the implied warranty of
-**  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
-**  GNU General Public License for more details.
-**  
-**  You should have received a copy of the GNU General Public License
-**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
-*/
-
-#include "globals.hpp"
-
-std::string datadir;
-
-int TILE_SIZE    = 32;
-int TILE_RESOLUTION = 64;
-
-float game_time = 0.0f;
-
-float game_speed = 1.0f;
-#ifdef DEBUG
-bool debug = true;
-#else
-bool debug = false;
-#endif
-bool collision_debug = false;
-bool sound_disabled  = false;
-
-bool sprite3dview    = false;
-bool sprite2dview    = false;
-bool particleview    = false;
-
-/* EOF */

Deleted: trunk/windstille/src/globals.hpp
===================================================================
--- trunk/windstille/src/globals.hpp	2009-02-12 08:24:12 UTC (rev 2469)
+++ trunk/windstille/src/globals.hpp	2009-02-12 08:33:55 UTC (rev 2470)
@@ -1,52 +0,0 @@
-/*
-**  Windstille - A Sci-Fi Action-Adventure Game
-**  Copyright (C) 2000 Ingo Ruhnke <grumbel at gmx.de>
-**
-**  This program is free software: you can redistribute it and/or modify
-**  it under the terms of the GNU General Public License as published by
-**  the Free Software Foundation, either version 3 of the License, or
-**  (at your option) any later version.
-**  
-**  This program is distributed in the hope that it will be useful,
-**  but WITHOUT ANY WARRANTY; without even the implied warranty of
-**  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
-**  GNU General Public License for more details.
-**  
-**  You should have received a copy of the GNU General Public License
-**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
-*/
-
-#ifndef HEADER_WINDSTILLE_GLOBALS_HPP
-#define HEADER_WINDSTILLE_GLOBALS_HPP
-
-#include <string>
-
-typedef enum { WEST, EAST} Direction;
-
-extern int TILE_SIZE;
-extern int TILE_RESOLUTION;
-
-const float GRAVITY = 1500;
-
-/** datadir => /usr/local/share/games/windstille/ */
-extern std::string datadir;
-
-/**
- * This is the global game time in seconds. Should be the same as normal time,
- * except that it stops when the game pauses
- */
-extern float game_time;
-
-extern float game_speed;
-
-extern bool debug;
-extern bool collision_debug;
-extern bool sprite3dview;
-extern bool sprite2dview;
-extern bool particleview;
-
-enum GameMainState { RUN_GAME, LOAD_MENU, LOAD_GAME_SESSION, QUIT_GAME };
-
-#endif
-
-/* EOF */

Modified: trunk/windstille/src/gui/root_component.cpp
===================================================================
--- trunk/windstille/src/gui/root_component.cpp	2009-02-12 08:24:12 UTC (rev 2469)
+++ trunk/windstille/src/gui/root_component.cpp	2009-02-12 08:33:55 UTC (rev 2470)
@@ -18,7 +18,7 @@
 
 #include <iostream>
 #include <algorithm>
-#include "console.hpp"
+#include "app/console.hpp"
 #include "input/controller.hpp"
 #include "root_component.hpp"
 

Modified: trunk/windstille/src/hud/dialog_manager.cpp
===================================================================
--- trunk/windstille/src/hud/dialog_manager.cpp	2009-02-12 08:24:12 UTC (rev 2469)
+++ trunk/windstille/src/hud/dialog_manager.cpp	2009-02-12 08:33:55 UTC (rev 2470)
@@ -25,7 +25,7 @@
 #include "engine/script_manager.hpp"
 #include "display/text_area.hpp"
 #include "display/display.hpp"
-#include "config.hpp"
+#include "app/config.hpp"
 
 DialogManager* DialogManager::current_ = 0;
 

Modified: trunk/windstille/src/hud/dialog_manager.hpp
===================================================================
--- trunk/windstille/src/hud/dialog_manager.hpp	2009-02-12 08:24:12 UTC (rev 2469)
+++ trunk/windstille/src/hud/dialog_manager.hpp	2009-02-12 08:33:55 UTC (rev 2470)
@@ -22,7 +22,7 @@
 #include <vector>
 #include <string>
 #include "sprite2d/sprite.hpp"
-#include "globals.hpp"
+#include "app/globals.hpp"
 #include "screen/screen.hpp"
 
 class TextArea;

Modified: trunk/windstille/src/hud/energy_bar.cpp
===================================================================
--- trunk/windstille/src/hud/energy_bar.cpp	2009-02-12 08:24:12 UTC (rev 2469)
+++ trunk/windstille/src/hud/energy_bar.cpp	2009-02-12 08:33:55 UTC (rev 2470)
@@ -16,7 +16,7 @@
 **  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
-#include "globals.hpp"
+#include "app/globals.hpp"
 #include "objects/player.hpp"
 #include "energy_bar.hpp"
 

Modified: trunk/windstille/src/input/controller.cpp
===================================================================
--- trunk/windstille/src/input/controller.cpp	2009-02-12 08:24:12 UTC (rev 2469)
+++ trunk/windstille/src/input/controller.cpp	2009-02-12 08:33:55 UTC (rev 2470)
@@ -18,7 +18,7 @@
 */
 
 #include <assert.h>
-#include "controller_def.hpp"
+#include "app/controller_def.hpp"
 #include "controller.hpp"
 
 Controller::Controller()

Modified: trunk/windstille/src/input/controller.hpp
===================================================================
--- trunk/windstille/src/input/controller.hpp	2009-02-12 08:24:12 UTC (rev 2469)
+++ trunk/windstille/src/input/controller.hpp	2009-02-12 08:33:55 UTC (rev 2470)
@@ -20,7 +20,7 @@
 #define HEADER_WINDSTILLE_INPUT_CONTROLLER_HPP
 
 #include <vector>
-#include "controller_def.hpp"
+#include "app/controller_def.hpp"
 #include "input_event.hpp"
 
 /** The Controller class presents the current state of the controller

Modified: trunk/windstille/src/input/input_configurator.cpp
===================================================================
--- trunk/windstille/src/input/input_configurator.cpp	2009-02-12 08:24:12 UTC (rev 2469)
+++ trunk/windstille/src/input/input_configurator.cpp	2009-02-12 08:33:55 UTC (rev 2470)
@@ -20,7 +20,7 @@
 #include <stdexcept>
 #include "display/display.hpp"
 #include "math/rect.hpp"
-#include "controller_def.hpp"
+#include "app/controller_def.hpp"
 #include "font/fonts.hpp"
 #include "screen/screen_manager.hpp"
 #include "input/input_manager_sdl.hpp"

Modified: trunk/windstille/src/input/input_manager_sdl.cpp
===================================================================
--- trunk/windstille/src/input/input_manager_sdl.cpp	2009-02-12 08:24:12 UTC (rev 2469)
+++ trunk/windstille/src/input/input_manager_sdl.cpp	2009-02-12 08:33:55 UTC (rev 2470)
@@ -25,9 +25,9 @@
 #include <stdio.h>
 #include <vector>
 #include "math/math.hpp"
-#include "config.hpp"
+#include "app/config.hpp"
 #include "util/file_reader.hpp"
-#include "controller_def.hpp"
+#include "app/controller_def.hpp"
 #include "input_manager_sdl.hpp"
 #ifdef HAVE_CWIID
 #include "wiimote.hpp"

Deleted: trunk/windstille/src/menu_manager.cpp
===================================================================
--- trunk/windstille/src/menu_manager.cpp	2009-02-12 08:24:12 UTC (rev 2469)
+++ trunk/windstille/src/menu_manager.cpp	2009-02-12 08:33:55 UTC (rev 2470)
@@ -1,633 +0,0 @@
-/*
-**  Windstille - A Sci-Fi Action-Adventure Game
-**  Copyright (C) 2005 Ingo Ruhnke <grumbel at gmx.de>
-**
-**  This program is free software: you can redistribute it and/or modify
-**  it under the terms of the GNU General Public License as published by
-**  the Free Software Foundation, either version 3 of the License, or
-**  (at your option) any later version.
-**  
-**  This program is distributed in the hope that it will be useful,
-**  but WITHOUT ANY WARRANTY; without even the implied warranty of
-**  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
-**  GNU General Public License for more details.
-**  
-**  You should have received a copy of the GNU General Public License
-**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
-*/
-
-#include <boost/bind.hpp>
-#include "config.hpp"
-#include "sound/sound_manager.hpp"
-#include "console.hpp"
-#include "display/display.hpp"
-#include "font/fonts.hpp"
-#include "screen/game_session.hpp"
-#include "gui/group_component.hpp"
-#include "gui/gui_manager.hpp"
-#include "gui/menu_component.hpp"
-#include "gui/root_component.hpp"
-#include "gui/text_view.hpp"
-#include "screen/particle_viewer.hpp"
-#include "screen/screen_manager.hpp"
-#include "engine/sector.hpp"
-#include "sprite3d/manager.hpp"
-#include "screen/sprite3dview.hpp"
-#include "screen/geometry_test.hpp"
-#include "screen/armature_test.hpp"
-#include "screen/navigation_test.hpp"
-#include "gui/menu_item.hpp"
-#ifdef HAVE_CWIID
-#include "input/wiimote.hpp"
-#endif
-#include "menu_manager.hpp"
-
-MenuManager menu_manager;
-
-MenuManager::MenuManager()
-{
-}
-
-void
-MenuManager::display_option_menu()
-{
-  using namespace gui;
-  GUIManager* manager = new GUIManager();
-
-  GroupComponent* group = new GroupComponent(Rectf(Vector(400-250, 300-170), Sizef(500, 340)), 
-                                             "Options",
-                                             manager->get_root());
-
-  // Begin Menu
-  MenuComponent* menu = new MenuComponent(Rectf(), true,
-                                          group);
-  group->pack(menu);
-
-  menu->set_font(Fonts::vera20);
-
-  SliderMenuItem* music_volume_item = new SliderMenuItem(menu,  "Master Volume",   
-                                                         config.get_int("master-volume"), 0, 100, 10);
-  music_volume_item->sig_change().connect(boost::bind(&MenuManager::menu_music_volume, this, _1));
-  menu->add_item(music_volume_item);
-
-  SliderMenuItem* sfx_volume_item   = new SliderMenuItem(menu,  "SFX Volume",   100, 0, 100, 10);
-  menu->add_item(sfx_volume_item);
-
-  SliderMenuItem* voice_volume_item = new SliderMenuItem(menu,  "Voice Volume", 100, 0, 100, 10);
-  menu->add_item(voice_volume_item);
-
-  EnumMenuItem* aspect_item = new EnumMenuItem(menu,  "Aspect Ratio", 0);
-  aspect_item->add_pair(0, "4:3");
-  aspect_item->add_pair(1, "5:4");
-  aspect_item->add_pair(2, "16:9");
-  aspect_item->add_pair(3, "16:10");
-  aspect_item->add_pair(4, "letterbox");
-  menu->add_item(aspect_item);
-  
-  EnumMenuItem* show_fps_item = new EnumMenuItem(menu,  "Show FPS", config.get_bool("show-fps"));
-  show_fps_item->add_pair(0, "off");
-  show_fps_item->add_pair(1, "on");
-  menu->add_item(show_fps_item);
-  show_fps_item->sig_change().connect(boost::bind(&MenuManager::menu_show_fps, this, _1));
-
-  EnumMenuItem* fullscreen_item = new EnumMenuItem(menu,  "Fullscreen", config.get_bool("fullscreen"));
-  fullscreen_item->add_pair(0, "off");
-  fullscreen_item->add_pair(1, "on");
-  menu->add_item(fullscreen_item);
-  fullscreen_item->sig_change().connect(boost::bind(&MenuManager::menu_fullscreen, this, _1));
-
-  EnumMenuItem* difficulty_item = new EnumMenuItem(menu,  "Difficulty", 1);
-  difficulty_item->add_pair(0, "easy");
-  difficulty_item->add_pair(1, "medium");
-  difficulty_item->add_pair(2, "hard");
-  menu->add_item(difficulty_item);
-
-  SliderMenuItem* gamma_item   = new SliderMenuItem(menu,  "Gamma",  100, 10, 200, 10);
-  gamma_item->sig_change().connect(boost::bind(&MenuManager::menu_gamma, this, _1));
-  menu->add_item(gamma_item);
-
-  #ifdef HAVE_CWIID
-  if (wiimote)
-    {
-      ButtonMenuItem* wiimote_button = new ButtonMenuItem(menu,  "Try to Connect Wiimote");
-      wiimote_button->sig_click().connect(boost::bind(&MenuManager::menu_wiimote, this));
-      menu->add_item(wiimote_button);
-    }
-  #endif
-
-  manager->get_root()->add_child(group);
-  group->layout();
-  screen_manager.push_overlay(manager);
-}
-
-void
-MenuManager::display_main_menu()
-{
-  using namespace gui;
-  GUIManager* manager = new GUIManager();
-
-  GroupComponent* text_group = new GroupComponent(Rectf(10, 500+20, 800-10, 600-10),
-                                                  "",
-                                                  manager->get_root());
-
-  TextView* text = new TextView(Rectf(), text_group);
-  text_group->pack(text);
-  text->set_font(Fonts::vera12);
-  text->set_text("Windstille 0.4.0 - Copyright (C) 2009 Ingo Ruhnke &lt;grumbel at gmx.de&gt;\n"
-                 "\n"
-                 "This program is free software: you can redistribute it and/or modify "
-                 "it under the terms of the GNU General Public License as published by "
-                 "the Free Software Foundation, either version 3 of the License, or "
-                 "(at your option) any later version.");
-
-  manager->get_root()->add_child(text_group);
-
-  GroupComponent* group = new GroupComponent(Rectf(Vector(400-25, 200), Sizef(250, 294)),
-                                             "",
-                                             manager->get_root());
-
-  // Begin Menu
-  MenuComponent* menu = new MenuComponent(Rectf(), false,
-                                          group);
-  group->pack(menu);
-
-  menu->set_font(Fonts::vera20);
-
-  ButtonMenuItem* select_scenario_button = new ButtonMenuItem(menu,  "Select Scenario");
-  select_scenario_button->sig_click().connect(boost::bind(&MenuManager::display_scenario_menu, this));
-  menu->add_item(select_scenario_button);
-
-  ButtonMenuItem* navigation_test_button = new ButtonMenuItem(menu,  "Navigation Test");
-  navigation_test_button->sig_click().connect(boost::bind(&MenuManager::menu_show_navigation_test, this));
-  menu->add_item(navigation_test_button);
-
-  ButtonMenuItem* armature_test_button = new ButtonMenuItem(menu,  "Armature Test");
-  armature_test_button->sig_click().connect(boost::bind(&MenuManager::menu_show_armature_test, this));
-  menu->add_item(armature_test_button);
-
-  ButtonMenuItem* geometry_test_button = new ButtonMenuItem(menu,  "Geometry Test");
-  geometry_test_button->sig_click().connect(boost::bind(&MenuManager::menu_show_geometry_test, this));
-  menu->add_item(geometry_test_button);
-
-  ButtonMenuItem* model_viewer_button = new ButtonMenuItem(menu,  "Model Viewer");
-  model_viewer_button->sig_click().connect(boost::bind(&MenuManager::display_models_menu, this));
-  menu->add_item(model_viewer_button);
-
-  ButtonMenuItem* particles_button = new ButtonMenuItem(menu,  "Particle Systems");
-  particles_button->sig_click().connect(boost::bind(&MenuManager::display_particle_menu, this));
-  menu->add_item(particles_button);
-
-  ButtonMenuItem* options_button = new ButtonMenuItem(menu,  "Options");
-  options_button->sig_click().connect(boost::bind(&MenuManager::display_option_menu, this));
-  menu->add_item(options_button);
-
-  ButtonMenuItem* credits_button = new ButtonMenuItem(menu,  "Credits");
-  credits_button->sig_click().connect(boost::bind(&MenuManager::display_credits, this));
-  menu->add_item(credits_button);
-
-  ButtonMenuItem* help_button = new ButtonMenuItem(menu,  "Help");
-  help_button->sig_click().connect(boost::bind(&MenuManager::display_help, this));
-  menu->add_item(help_button);
-
-  ButtonMenuItem* quit_button = new ButtonMenuItem(menu,  "Quit");
-  quit_button->sig_click().connect(boost::bind(&MenuManager::menu_quit, this));
-  menu->add_item(quit_button);
-  // End: Option Menu
-
-  manager->get_root()->add_child(group);
-  group->layout();
-  screen_manager.push_overlay(manager);
-}
-
-void
-MenuManager::display_pause_menu()
-{
-  using namespace gui;
-  GUIManager* manager = new GUIManager();
-
-  GroupComponent* group = new GroupComponent(Rectf(Vector(400-200, 300-170), Sizef(400, 300)), 
-                                             "Pause Menu",
-                                             manager->get_root());
-
-  // Begin Menu
-  MenuComponent* menu = new MenuComponent(Rectf(Vector(400-150, 200), Sizef(300, 500)), true,
-                                          group);
-  group->pack(menu);
-
-  menu->set_font(Fonts::vera20);
-
-  ButtonMenuItem* continue_button = new ButtonMenuItem(menu,  "Resume Game");
-  continue_button->sig_click().connect(boost::bind(&MenuManager::menu_continue, this));
-  menu->add_item(continue_button);
-
-  //  ButtonMenuItem* select_scenario_button = new ButtonMenuItem(menu,  "Select Scenario");
-  //  select_scenario_button->sig_click().connect(boost::bind(&MenuManager::display_scenario_menu, this));
-  // menu->add_item(select_scenario_button);
-
-  ButtonMenuItem* options_button = new ButtonMenuItem(menu,  "Options");
-  options_button->sig_click().connect(boost::bind(&MenuManager::display_option_menu, this));
-  menu->add_item(options_button);
-
-  ButtonMenuItem* debug_button = new ButtonMenuItem(menu,  "Debug");
-  debug_button->sig_click().connect(boost::bind(&MenuManager::display_debug_menu, this));
-  menu->add_item(debug_button);
-
-  ButtonMenuItem* credits_button = new ButtonMenuItem(menu,  "Credits");
-  credits_button->sig_click().connect(boost::bind(&MenuManager::display_credits, this));
-  menu->add_item(credits_button);
-
-  ButtonMenuItem* help_button = new ButtonMenuItem(menu,  "Help");
-  help_button->sig_click().connect(boost::bind(&MenuManager::display_help, this));
-  menu->add_item(help_button);
-
-  ButtonMenuItem* quit_button = new ButtonMenuItem(menu,  "Return to Title Screen");
-  quit_button->sig_click().connect(boost::bind(&MenuManager::menu_exit, this));
-  menu->add_item(quit_button);
-  // End: Option Menu
-
-  manager->get_root()->add_child(group);
-
-  screen_manager.push_overlay(manager); 
-}
-
-void
-MenuManager::display_models_menu()
-{
-  using namespace gui;
-  GUIManager* manager = new GUIManager();
-
-  GroupComponent* group = new GroupComponent(Rectf(Vector(400-275, 100), Sizef(550, 376)),  // 378
-                                             "Select Model",
-                                             manager->get_root());
-
-  MenuComponent* menu = new MenuComponent(Rectf(), true, group);
-  group->pack(menu);
-
-  menu->set_font(Fonts::vera20);
-
-  std::vector<std::string> models;
-  models.push_back("models/characters/bob/bob.wsprite");
-  models.push_back("models/characters/jane/jane.wsprite");
-  models.push_back("models/characters/monster/monster.wsprite");
-  models.push_back("models/characters/powersuit/powersuit.wsprite");
-  models.push_back("models/characters/sophie/sophie.wsprite");
-  models.push_back("models/characters/spider/spider.wsprite");
-  models.push_back("models/characters/vrdummy/vrdummy.wsprite");
-  models.push_back("models/characters/yagor/yagor.wsprite");
-  models.push_back("models/objects/grenade/grenade.wsprite");
-  models.push_back("models/objects/pistol/pistol.wsprite");
-  models.push_back("models/vehicles/shuttle/shuttle.wsprite");
-  models.push_back("models/vehicles/train/train.wsprite"); 
-
-  for(std::vector<std::string>::iterator i = models.begin(); i != models.end(); ++i)
-    {
-      ButtonMenuItem* scenario_button = new ButtonMenuItem(menu,  *i);
-
-      scenario_button->sig_click().connect(boost::bind(&MenuManager::menu_show_model, this, std::string(*i)));
-
-      menu->add_item(scenario_button);
-    }
-
-  manager->get_root()->add_child(group);
-
-  screen_manager.push_overlay(manager);  
-}
-
-void
-MenuManager::display_particle_menu()
-{
-  using namespace gui;
-  GUIManager* manager = new GUIManager();
-
-  GroupComponent* group = new GroupComponent(Rectf(Vector(400-200, 300-170), Sizef(400, 340)), 
-                                             "Particle Systems",
-                                             manager->get_root());
-
-  MenuComponent* menu = new MenuComponent(Rectf(), true, group);
-  group->pack(menu);
-
-  menu->set_font(Fonts::vera20);
-
-  std::vector<std::string> scenarios;
-  scenarios.push_back("particlesystems/fire.particles");
-  
-  for(std::vector<std::string>::iterator i = scenarios.begin(); i != scenarios.end(); ++i)
-    {
-      ButtonMenuItem* scenario_button = new ButtonMenuItem(menu,  *i);
-
-      scenario_button->sig_click().connect(boost::bind(&MenuManager::menu_show_particle_system, this, *i));
-
-      menu->add_item(scenario_button);
-    }
-
-  manager->get_root()->add_child(group);
-
-  screen_manager.push_overlay(manager); 
-}
-
-void
-MenuManager::display_scenario_menu()
-{
-  using namespace gui;
-  GUIManager* manager = new GUIManager();
-
-  GroupComponent* group = new GroupComponent(Rectf(Vector(400-200, 300-170), Sizef(400, 340)), 
-                                             "Select Scenario",
-                                             manager->get_root());
-
-  MenuComponent* menu = new MenuComponent(Rectf(), true, group);
-  group->pack(menu);
-
-  menu->set_font(Fonts::vera20);
-
-  std::vector<std::string> scenarios;
-  scenarios.push_back("levels/apartment.wst");
-  scenarios.push_back("levels/bluestone.wst");
-  scenarios.push_back("levels/forest.wst");
-  scenarios.push_back("levels/industrial.wst");
-  scenarios.push_back("levels/intro.wst");
-  scenarios.push_back("levels/newformat2.wst");
-  scenarios.push_back("levels/virtualreality.wst");
-  
-  for(std::vector<std::string>::iterator i = scenarios.begin(); i != scenarios.end(); ++i)
-    {
-      ButtonMenuItem* scenario_button = new ButtonMenuItem(menu,  *i);
-
-      scenario_button->sig_click().connect(boost::bind(&MenuManager::menu_start_scenario, this, *i));
-
-      menu->add_item(scenario_button);
-    }
-
-  manager->get_root()->add_child(group);
-
-  screen_manager.push_overlay(manager); 
-}
-
-void
-MenuManager::display_debug_menu()
-{
-  using namespace gui;
-  GUIManager* manager = new GUIManager();
-
-  GroupComponent* group = new GroupComponent(Rectf(Vector(400-250, 300-170), Sizef(500, 340)), 
-                                             "Debug",
-                                             manager->get_root());
-
-  // Begin Menu
-  MenuComponent* menu = new MenuComponent(Rectf(), true, group);
-  group->pack(menu);
-
-  menu->set_font(Fonts::vera20);
-
-  Color amb = Sector::current()->get_ambient_light();
-
-  SliderMenuItem* r_ambient_light_item = new SliderMenuItem(menu,  "Ambient Light (Red)", int(amb.r*100), 0, 100, 10);
-  r_ambient_light_item->sig_change().connect(boost::bind(&MenuManager::menu_ambient_light, this, _1, 0));
-  menu->add_item(r_ambient_light_item);
-
-  SliderMenuItem* g_ambient_light_item = new SliderMenuItem(menu,  "Ambient Light (Green)", int(amb.g*100), 0, 100, 10);
-  g_ambient_light_item->sig_change().connect(boost::bind(&MenuManager::menu_ambient_light, this, _1, 1));
-  menu->add_item(g_ambient_light_item);
-
-  SliderMenuItem* b_ambient_light_item = new SliderMenuItem(menu,  "Ambient Light (Blue)", int(amb.b*100), 0, 100, 10);
-  b_ambient_light_item->sig_change().connect(boost::bind(&MenuManager::menu_ambient_light, this, _1, 2));
-  menu->add_item(b_ambient_light_item);
-
-  manager->get_root()->add_child(group);
-
-  screen_manager.push_overlay(manager); 
-}
-
-void
-MenuManager::display_help()
-{
-  using namespace gui;
-  GUIManager* manager = new GUIManager();
-
-  GroupComponent* group = new GroupComponent(Rectf(Vector(400-250, 300-200), Sizef(500, 400)), 
-                                             "Help",
-                                             manager->get_root());
-
-  TextView* text = new TextView(Rectf(), group);
-  group->pack(text);
-
-  text->set_font(Fonts::vera12);
-  text->set_text("This is a tech-demo of Windstille. Its not meant "
-                 "to be playable in any way except a bit of walking around. "
-                 "It provides nothing to accomplish, just a few scenarios to "
-                 "load and look at. Enjoy what works, don't complain if something "
-                 "doesn't, since most stuff simply won't work anyway.\n"
-                 "\n"
-                 "Key Bindings\n"
-                 "============\n"
-                 "F1 - open the console\n"
-                 "F6 - mouse release\n"
-                 "F7 - mouse grap\n"
-                 "F8 - run gui test (broken)\n"
-                 "F9 - configure input\n"
-                 "F11 - toggle fullscreen\n"
-                 "F12 - do a screenshot\n"
-                 "\n"
-                 "cursor keys - walk\n"
-                 "d - run/cancel\n"
-                 "s - jump/ok\n"
-                 );
-  text->set_active(true);
-
-  manager->get_root()->add_child(group);
-  screen_manager.push_overlay(manager);
-}
-
-void
-MenuManager::display_credits()
-{
-  using namespace gui;
-  GUIManager* manager = new GUIManager();
-
-  GroupComponent* group = new GroupComponent(Rectf(Vector(400-250, 300-200), Sizef(500, 400)), 
-                                             "Credits",
-                                             manager->get_root());
-
-  TextView* text = new TextView(Rectf(), group);
-  group->pack(text);
-
-  text->set_font(Fonts::vera12);
-  text->set_text("Programming\n"
-                 "===========\n"
-                 "\n"
-                 "  Ingo Ruhnke - Grumbel - &lt;grumbel at gmx.de&gt;\n"
-                 "  Matthias Braun - MatzeB - matze at braunis.de\n"
-                 "  James Gregory -\n"
-                 "  David Kamphausen - Godrin - &lt;david.kamphausen at web.de&gt;\n"
-                 "  Mark Dillavou - Line72- &lt;line72 at line72.net&gt;\n"
-                 "\n"
-                 "Graphics\n"
-                 "========\n"
-                 "  Ingo Ruhnke - Grumbel - &lt;grumbel at gmx.de&gt;\n"
-                 "  Ken Hirsch - quickflash - &lt;khirsch11414 at yahoo.com&gt;\n"
-                 "\n"
-                 "0.2.0 Win32 Build\n"
-                 "==================\n"
-                 "  Robert Konrad &lt;rkon at gmx.de&gt;\n"
-                 "\n"
-                 "Music\n"
-                 "=====\n"
-                 "  Ralph Weinert &lt;r.weinert at bluewin.ch&gt;\n"
-                 "  Marek Moeckel - Wansti - &lt;wansti at gmx.de&gt;\n");
-  text->set_active(true);
-
-  manager->get_root()->add_child(group);
-  screen_manager.push_overlay(manager);
-}
-  
-// Callbacks
-
-void
-MenuManager::menu_show_model(std::string model)
-{
-  Sprite3DView* sprite3dview = new Sprite3DView();
-
-  sprite3dview->set_model(model);
-
-  // Launching Sprite3DView instead of game
-  screen_manager.push_screen(sprite3dview);
-  screen_manager.clear_overlay();
-}
-
-void
-MenuManager::menu_show_particle_system(std::string file)
-{
-  ParticleViewer* particle_viewer = new ParticleViewer();
-  particle_viewer->load(file);
-
-  screen_manager.push_screen(particle_viewer);
-  screen_manager.clear_overlay();
-}
-
-void
-MenuManager::menu_start_game()
-{
-  screen_manager.push_screen(new GameSession("levels/newformat2.wst"));
-  screen_manager.pop_overlay();
-}
-
-void
-MenuManager::menu_quit()
-{
-  //GameSession::current()->quit();
-  screen_manager.pop_overlay();
-  screen_manager.quit();
-}
-
-void
-MenuManager::menu_start_scenario(std::string scenario)
-{
-  std::cout << "Starting: " << scenario << std::endl;
-  screen_manager.push_screen(new GameSession(scenario));
-  screen_manager.clear_overlay();
- }
-
-void
-MenuManager::menu_show_fps(int i)
-{
-  config.set_bool("show-fps", i);
-}
-
-void
-MenuManager::menu_fullscreen(int i)
-{
-  config.set_bool("fullscreen", i);
-  Display::set_fullscreen(config.get_bool("fullscreen"));
-}
-
-void
-MenuManager::menu_continue()
-{
-  screen_manager.pop_overlay();
-}
-
-void
-MenuManager::menu_exit()
-{
-  // FIXME: Make this return to the title screen
-  screen_manager.pop_overlay();
-  screen_manager.pop_screen(); 
-}
-
-void
-MenuManager::menu_ambient_light(int i, int component)
-{
-  if (Sector::current())
-    {
-      Color amb = Sector::current()->get_ambient_light();
-
-      if (component == 0)
-        amb.r = i / 100.0f;
-      else if (component == 1)
-        amb.g = i / 100.0f;
-      else if (component == 2)
-        amb.b = i / 100.0f;
-
-      Sector::current()->set_ambient_light(amb);
-    }
-}
-
-void
-MenuManager::menu_show_geometry_test()
-{
-  screen_manager.push_screen(new GeometryTest());
-  screen_manager.clear_overlay();  
-}
-
-void
-MenuManager::menu_show_armature_test()
-{
-  screen_manager.push_screen(new ArmatureTest());
-  screen_manager.clear_overlay();  
-}
-
-void
-MenuManager::menu_show_navigation_test()
-{
-  screen_manager.push_screen(new NavigationTest());
-  screen_manager.clear_overlay();  
-}
-
-void
-MenuManager::menu_gamma(int i)
-{
-  float gamma = i / 100.0f;
-  SDL_SetGamma(gamma, gamma, gamma);
-}
-
-void
-MenuManager::menu_wiimote()
-{
-#ifdef HAVE_CWIID
-  if (wiimote && !wiimote->is_connected())
-    {
-      // FIXME: This never appears on screen due to timeout
-      console << "Trying to connect Wiimote: Press buttons 1 and 2 to connect" << std::endl;
-
-      wiimote->connect();
-
-      if (wiimote->is_connected())
-        console << "Wiimote connected" << std::endl;
-      else
-        console << "Wiimote connection failed" << std::endl;
-    }
-  else
-    {
-      console << "Wiimote already is connected" << std::endl;
-    }
-#endif
-}
-
-void
-MenuManager::menu_music_volume(int i)
-{
-  config.set_int("master-volume", i);
-  sound_manager->set_listener_gain((i/100.0f));
-}
-
-/* EOF */

Deleted: trunk/windstille/src/menu_manager.hpp
===================================================================
--- trunk/windstille/src/menu_manager.hpp	2009-02-12 08:24:12 UTC (rev 2469)
+++ trunk/windstille/src/menu_manager.hpp	2009-02-12 08:33:55 UTC (rev 2470)
@@ -1,68 +0,0 @@
-/*
-**  Windstille - A Sci-Fi Action-Adventure Game
-**  Copyright (C) 2005 Ingo Ruhnke <grumbel at gmx.de>
-**
-**  This program is free software: you can redistribute it and/or modify
-**  it under the terms of the GNU General Public License as published by
-**  the Free Software Foundation, either version 3 of the License, or
-**  (at your option) any later version.
-**  
-**  This program is distributed in the hope that it will be useful,
-**  but WITHOUT ANY WARRANTY; without even the implied warranty of
-**  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
-**  GNU General Public License for more details.
-**  
-**  You should have received a copy of the GNU General Public License
-**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
-*/
-
-#ifndef HEADER_WINDSTILLE_MENU_MANAGER_HPP
-#define HEADER_WINDSTILLE_MENU_MANAGER_HPP
-
-#include <vector>
-
-/** */
-class MenuManager
-{
-private:
-
-public:
-  MenuManager();
-
-  void display_option_menu();
-  void display_debug_menu();
-  void display_main_menu();
-  void display_pause_menu();
-  void display_scenario_menu();
-  void display_particle_menu();
-  void display_models_menu();
-  void display_credits();
-  void display_help();
-
-  // Callbacks
-  void menu_start_game();
-  void menu_quit();
-  void menu_exit();
-  void menu_show_fps(int i);
-  void menu_fullscreen(int i);
-  void menu_continue();
-  void menu_music_volume(int i);
-  void menu_ambient_light(int i, int component);
-  void menu_start_scenario(std::string scenario);
-  void menu_show_model(std::string scenario);
-  void menu_show_geometry_test();
-  void menu_show_armature_test();
-  void menu_show_navigation_test();
-  void menu_show_particle_system(std::string file);
-  void menu_gamma(int i);
-  void menu_wiimote();
-private:
-  MenuManager (const MenuManager&);
-  MenuManager& operator= (const MenuManager&);
-};
-
-extern MenuManager menu_manager;
-
-#endif
-
-/* EOF */

Deleted: trunk/windstille/src/mt19937ar.c
===================================================================
--- trunk/windstille/src/mt19937ar.c	2009-02-12 08:24:12 UTC (rev 2469)
+++ trunk/windstille/src/mt19937ar.c	2009-02-12 08:33:55 UTC (rev 2470)
@@ -1,190 +0,0 @@
-/* 
-   A C-program for MT19937, with initialization improved 2002/1/26.
-   Coded by Takuji Nishimura and Makoto Matsumoto.
-
-   Before using, initialize the state by using init_genrand(seed)  
-   or init_by_array(init_key, key_length).
-
-   Copyright (C) 1997 - 2002, Makoto Matsumoto and Takuji Nishimura,
-   All rights reserved.                          
-
-   Redistribution and use in source and binary forms, with or without
-   modification, are permitted provided that the following conditions
-   are met:
-
-     1. Redistributions of source code must retain the above copyright
-        notice, this list of conditions and the following disclaimer.
-
-     2. Redistributions in binary form must reproduce the above copyright
-        notice, this list of conditions and the following disclaimer in the
-        documentation and/or other materials provided with the distribution.
-
-     3. The names of its contributors may not be used to endorse or promote 
-        products derived from this software without specific prior written 
-        permission.
-
-   THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS
-   "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT
-   LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR
-   A PARTICULAR PURPOSE ARE DISCLAIMED.  IN NO EVENT SHALL THE COPYRIGHT OWNER OR
-   CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
-   EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
-   PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
-   PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
-   LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
-   NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
-   SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
-
-
-   Any feedback is very welcome.
-   http://www.math.sci.hiroshima-u.ac.jp/~m-mat/MT/emt.html
-   email: m-mat @ math.sci.hiroshima-u.ac.jp (remove space)
-*/
-
-#include <stdio.h>
-
-/* Period parameters */  
-#define N 624
-#define M 397
-#define MATRIX_A 0x9908b0dfUL   /* constant vector a */
-#define UPPER_MASK 0x80000000UL /* most significant w-r bits */
-#define LOWER_MASK 0x7fffffffUL /* least significant r bits */
-
-static unsigned long mt[N]; /* the array for the state vector  */
-static int mti=N+1; /* mti==N+1 means mt[N] is not initialized */
-
-/* initializes mt[N] with a seed */
-void init_genrand(unsigned long s)
-{
-    mt[0]= s & 0xffffffffUL;
-    for (mti=1; mti<N; mti++) {
-        mt[mti] = 
-	    (1812433253UL * (mt[mti-1] ^ (mt[mti-1] >> 30)) + mti); 
-        /* See Knuth TAOCP Vol2. 3rd Ed. P.106 for multiplier. */
-        /* In the previous versions, MSBs of the seed affect   */
-        /* only MSBs of the array mt[].                        */
-        /* 2002/01/09 modified by Makoto Matsumoto             */
-        mt[mti] &= 0xffffffffUL;
-        /* for >32 bit machines */
-    }
-}
-
-/* initialize by an array with array-length */
-/* init_key is the array for initializing keys */
-/* key_length is its length */
-/* slight change for C++, 2004/2/26 */
-void init_by_array(unsigned long init_key[], int key_length)
-{
-    int i, j, k;
-    init_genrand(19650218UL);
-    i=1; j=0;
-    k = (N>key_length ? N : key_length);
-    for (; k; k--) {
-        mt[i] = (mt[i] ^ ((mt[i-1] ^ (mt[i-1] >> 30)) * 1664525UL))
-          + init_key[j] + j; /* non linear */
-        mt[i] &= 0xffffffffUL; /* for WORDSIZE > 32 machines */
-        i++; j++;
-        if (i>=N) { mt[0] = mt[N-1]; i=1; }
-        if (j>=key_length) j=0;
-    }
-    for (k=N-1; k; k--) {
-        mt[i] = (mt[i] ^ ((mt[i-1] ^ (mt[i-1] >> 30)) * 1566083941UL))
-          - i; /* non linear */
-        mt[i] &= 0xffffffffUL; /* for WORDSIZE > 32 machines */
-        i++;
-        if (i>=N) { mt[0] = mt[N-1]; i=1; }
-    }
-
-    mt[0] = 0x80000000UL; /* MSB is 1; assuring non-zero initial array */ 
-}
-
-/* generates a random number on [0,0xffffffff]-interval */
-unsigned long genrand_int32(void)
-{
-    unsigned long y;
-    static unsigned long mag01[2]={0x0UL, MATRIX_A};
-    /* mag01[x] = x * MATRIX_A  for x=0,1 */
-
-    if (mti >= N) { /* generate N words at one time */
-        int kk;
-
-        if (mti == N+1)   /* if init_genrand() has not been called, */
-            init_genrand(5489UL); /* a default initial seed is used */
-
-        for (kk=0;kk<N-M;kk++) {
-            y = (mt[kk]&UPPER_MASK)|(mt[kk+1]&LOWER_MASK);
-            mt[kk] = mt[kk+M] ^ (y >> 1) ^ mag01[y & 0x1UL];
-        }
-        for (;kk<N-1;kk++) {
-            y = (mt[kk]&UPPER_MASK)|(mt[kk+1]&LOWER_MASK);
-            mt[kk] = mt[kk+(M-N)] ^ (y >> 1) ^ mag01[y & 0x1UL];
-        }
-        y = (mt[N-1]&UPPER_MASK)|(mt[0]&LOWER_MASK);
-        mt[N-1] = mt[M-1] ^ (y >> 1) ^ mag01[y & 0x1UL];
-
-        mti = 0;
-    }
-  
-    y = mt[mti++];
-
-    /* Tempering */
-    y ^= (y >> 11);
-    y ^= (y << 7) & 0x9d2c5680UL;
-    y ^= (y << 15) & 0xefc60000UL;
-    y ^= (y >> 18);
-
-    return y;
-}
-
-/* generates a random number on [0,0x7fffffff]-interval */
-long genrand_int31(void)
-{
-    return (long)(genrand_int32()>>1);
-}
-
-/* generates a random number on [0,1]-real-interval */
-double genrand_real1(void)
-{
-    return genrand_int32()*(1.0/4294967295.0); 
-    /* divided by 2^32-1 */ 
-}
-
-/* generates a random number on [0,1)-real-interval */
-double genrand_real2(void)
-{
-    return genrand_int32()*(1.0/4294967296.0); 
-    /* divided by 2^32 */
-}
-
-/* generates a random number on (0,1)-real-interval */
-double genrand_real3(void)
-{
-    return (((double)genrand_int32()) + 0.5)*(1.0/4294967296.0); 
-    /* divided by 2^32 */
-}
-
-/* generates a random number on [0,1) with 53-bit resolution*/
-double genrand_res53(void) 
-{ 
-    unsigned long a=genrand_int32()>>5, b=genrand_int32()>>6; 
-    return(a*67108864.0+b)*(1.0/9007199254740992.0); 
-} 
-/* These real versions are due to Isaku Wada, 2002/01/09 added */
-
-int main(void)
-{
-    int i;
-    unsigned long init[4]={0x123, 0x234, 0x345, 0x456}, length=4;
-    init_by_array(init, length);
-    printf("1000 outputs of genrand_int32()\n");
-    for (i=0; i<1000; i++) {
-      printf("%10lu ", genrand_int32());
-      if (i%5==4) printf("\n");
-    }
-    printf("\n1000 outputs of genrand_real2()\n");
-    for (i=0; i<1000; i++) {
-      printf("%10.8f ", genrand_real2());
-      if (i%5==4) printf("\n");
-    }
-    return 0;
-}

Modified: trunk/windstille/src/objects/bomb.cpp
===================================================================
--- trunk/windstille/src/objects/bomb.cpp	2009-02-12 08:24:12 UTC (rev 2469)
+++ trunk/windstille/src/objects/bomb.cpp	2009-02-12 08:33:55 UTC (rev 2470)
@@ -16,7 +16,7 @@
 **  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
-#include "globals.hpp"
+#include "app/globals.hpp"
 #include "engine/sector.hpp"
 #include "bomb.hpp"
 

Modified: trunk/windstille/src/objects/box.cpp
===================================================================
--- trunk/windstille/src/objects/box.cpp	2009-02-12 08:24:12 UTC (rev 2469)
+++ trunk/windstille/src/objects/box.cpp	2009-02-12 08:33:55 UTC (rev 2470)
@@ -19,7 +19,7 @@
 #include <stdexcept>
 #include <boost/bind.hpp>
 #include "box.hpp"
-#include "globals.hpp"
+#include "app/globals.hpp"
 #include "collision/collision_engine.hpp"
 #include "math/vector.hpp"
 #include "tile/tile_map.hpp"

Modified: trunk/windstille/src/objects/character.cpp
===================================================================
--- trunk/windstille/src/objects/character.cpp	2009-02-12 08:24:12 UTC (rev 2469)
+++ trunk/windstille/src/objects/character.cpp	2009-02-12 08:33:55 UTC (rev 2470)
@@ -23,7 +23,7 @@
 #include "hud/dialog_manager.hpp"
 #include "engine/script_manager.hpp"
 #include "physfs/physfs_stream.hpp"
-#include "console.hpp"
+#include "app/console.hpp"
 #include "sprite3d/manager.hpp"
 #include "util/util.hpp"
 

Modified: trunk/windstille/src/objects/hedgehog.cpp
===================================================================
--- trunk/windstille/src/objects/hedgehog.cpp	2009-02-12 08:24:12 UTC (rev 2469)
+++ trunk/windstille/src/objects/hedgehog.cpp	2009-02-12 08:33:55 UTC (rev 2470)
@@ -16,7 +16,7 @@
 **  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
-#include "globals.hpp"
+#include "app/globals.hpp"
 #include "player.hpp"
 #include "engine/sector.hpp"
 #include "hedgehog.hpp"

Modified: trunk/windstille/src/objects/nightvision.cpp
===================================================================
--- trunk/windstille/src/objects/nightvision.cpp	2009-02-12 08:24:12 UTC (rev 2469)
+++ trunk/windstille/src/objects/nightvision.cpp	2009-02-12 08:33:55 UTC (rev 2470)
@@ -16,7 +16,7 @@
 **  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
-#include "globals.hpp"
+#include "app/globals.hpp"
 #include "math/random.hpp"
 #include "math/matrix.hpp"
 #include "display/vertex_array_drawing_request.hpp"

Modified: trunk/windstille/src/objects/player.cpp
===================================================================
--- trunk/windstille/src/objects/player.cpp	2009-02-12 08:24:12 UTC (rev 2469)
+++ trunk/windstille/src/objects/player.cpp	2009-02-12 08:33:55 UTC (rev 2470)
@@ -21,10 +21,10 @@
 #include "engine/sector.hpp"
 #include "input/controller.hpp"
 #include "input/input_manager.hpp"
-#include "controller_def.hpp"
+#include "app/controller_def.hpp"
 #include "player.hpp"
 #include "objects/bomb.hpp"
-#include "globals.hpp"
+#include "app/globals.hpp"
 #include "hud/pda.hpp"
 #include "tile/tile.hpp"
 #include "sprite3d/manager.hpp"
@@ -35,7 +35,7 @@
 #include "laser_pointer.hpp"
 #include "collision/stair_contact.hpp"
 #include "screen/game_session.hpp"
-#include "console.hpp"
+#include "app/console.hpp"
 #include "grenade.hpp"
 #include "pistol.hpp"
 

Modified: trunk/windstille/src/objects/player.hpp
===================================================================
--- trunk/windstille/src/objects/player.hpp	2009-02-12 08:24:12 UTC (rev 2469)
+++ trunk/windstille/src/objects/player.hpp	2009-02-12 08:33:55 UTC (rev 2470)
@@ -25,7 +25,7 @@
 #include "sprite3d/sprite3d.hpp"
 #include "sound/sound_source.hpp"
 #include "math/vector.hpp"
-#include "globals.hpp"
+#include "app/globals.hpp"
 #include "engine/entity.hpp"
 #include "util/ref.hpp"
 #include "display/surface.hpp"

Modified: trunk/windstille/src/objects/scriptable_object.cpp
===================================================================
--- trunk/windstille/src/objects/scriptable_object.cpp	2009-02-12 08:24:12 UTC (rev 2469)
+++ trunk/windstille/src/objects/scriptable_object.cpp	2009-02-12 08:33:55 UTC (rev 2470)
@@ -17,7 +17,7 @@
 */
 
 
-#include "globals.hpp"
+#include "app/globals.hpp"
 #include "scriptable_object.hpp"
 #include "sprite2d/manager.hpp"
 #include "engine/script_manager.hpp"

Modified: trunk/windstille/src/objects/swarm.cpp
===================================================================
--- trunk/windstille/src/objects/swarm.cpp	2009-02-12 08:24:12 UTC (rev 2469)
+++ trunk/windstille/src/objects/swarm.cpp	2009-02-12 08:33:55 UTC (rev 2470)
@@ -16,7 +16,7 @@
 **  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
-#include "globals.hpp"
+#include "app/globals.hpp"
 #include "player.hpp"
 #include "engine/sector.hpp"
 #include "hedgehog.hpp"

Modified: trunk/windstille/src/particles/surface_drawer.cpp
===================================================================
--- trunk/windstille/src/particles/surface_drawer.cpp	2009-02-12 08:24:12 UTC (rev 2469)
+++ trunk/windstille/src/particles/surface_drawer.cpp	2009-02-12 08:33:55 UTC (rev 2470)
@@ -18,7 +18,7 @@
 
 #include "display/vertex_array_drawing_request.hpp"
 #include "particle_system.hpp"
-#include "../console.hpp" 
+#include "app/console.hpp" 
 #include "display/surface_manager.hpp"
 #include "surface_drawer.hpp"
 

Modified: trunk/windstille/src/screen/game_session.cpp
===================================================================
--- trunk/windstille/src/screen/game_session.cpp	2009-02-12 08:24:12 UTC (rev 2469)
+++ trunk/windstille/src/screen/game_session.cpp	2009-02-12 08:33:55 UTC (rev 2470)
@@ -24,10 +24,10 @@
 #include <sqstdio.h> 
 #include <sqstdaux.h> 
 
-#include "menu_manager.hpp"
+#include "app/menu_manager.hpp"
 #include "font/fonts.hpp"
 #include "engine/sector.hpp"
-#include "console.hpp"
+#include "app/console.hpp"
 #include "engine/game_object.hpp"
 #include "objects/player.hpp"
 #include "tile/tile_map.hpp"
@@ -35,7 +35,7 @@
 #include "view.hpp"
 #include "hud/energy_bar.hpp"
 #include "hud/dialog_manager.hpp"
-#include "windstille_main.hpp"
+#include "app/windstille_main.hpp"
 #include "display/scene_context.hpp"
 #include "scripting/util.hpp"
 #include "scripting/wrapper.hpp"

Modified: trunk/windstille/src/screen/game_session.hpp
===================================================================
--- trunk/windstille/src/screen/game_session.hpp	2009-02-12 08:24:12 UTC (rev 2469)
+++ trunk/windstille/src/screen/game_session.hpp	2009-02-12 08:33:55 UTC (rev 2470)
@@ -22,11 +22,11 @@
 #include <string>
 #include <squirrel.h>
 #include "display/scene_context.hpp"
-#include "console.hpp"
+#include "app/console.hpp"
 #include "screen.hpp"
 #include "hud/controller_help_window.hpp"
 #include "sprite2d/sprite.hpp"
-#include "globals.hpp"
+#include "app/globals.hpp"
 
 class PDA;
 class EnergyBar;

Modified: trunk/windstille/src/screen/geometry_test.cpp
===================================================================
--- trunk/windstille/src/screen/geometry_test.cpp	2009-02-12 08:24:12 UTC (rev 2469)
+++ trunk/windstille/src/screen/geometry_test.cpp	2009-02-12 08:33:55 UTC (rev 2470)
@@ -20,9 +20,9 @@
 #include <GL/gl.h>
 #include "geometry_test.hpp"
 #include "math/rect.hpp"
-#include "console.hpp"
+#include "app/console.hpp"
 #include "math/size.hpp"
-#include "controller_def.hpp"
+#include "app/controller_def.hpp"
 #include "input/controller.hpp"
 #include "screen_manager.hpp"
 #include "display/display.hpp"

Modified: trunk/windstille/src/screen/screen.cpp
===================================================================
--- trunk/windstille/src/screen/screen.cpp	2009-02-12 08:24:12 UTC (rev 2469)
+++ trunk/windstille/src/screen/screen.cpp	2009-02-12 08:33:55 UTC (rev 2470)
@@ -19,12 +19,12 @@
 #include <math.h>
 #include <iostream>
 #include "display/display.hpp"
-#include "windstille_main.hpp"
+#include "app/windstille_main.hpp"
 #include "screen.hpp"
 #include "font/fonts.hpp"
-#include "globals.hpp"
-#include "console.hpp"
-#include "config.hpp"
+#include "app/globals.hpp"
+#include "app/console.hpp"
+#include "app/config.hpp"
 #include "input/input_manager.hpp"
 #include "input/input_manager_sdl.hpp"
 #include "sound/sound_manager.hpp"

Modified: trunk/windstille/src/screen/screen_manager.cpp
===================================================================
--- trunk/windstille/src/screen/screen_manager.cpp	2009-02-12 08:24:12 UTC (rev 2469)
+++ trunk/windstille/src/screen/screen_manager.cpp	2009-02-12 08:33:55 UTC (rev 2470)
@@ -24,10 +24,10 @@
 #include "game_session.hpp"
 #include "input/input_manager_sdl.hpp"
 #include "display/display.hpp"
-#include "globals.hpp"
+#include "app/globals.hpp"
 #include "screen.hpp"
 #include "font/fonts.hpp"
-#include "config.hpp"
+#include "app/config.hpp"
 #include "input/input_manager.hpp"
 #include "input/input_configurator.hpp"
 #include "sound/sound_manager.hpp"

Modified: trunk/windstille/src/screen/sprite2dview.cpp
===================================================================
--- trunk/windstille/src/screen/sprite2dview.cpp	2009-02-12 08:24:12 UTC (rev 2469)
+++ trunk/windstille/src/screen/sprite2dview.cpp	2009-02-12 08:33:55 UTC (rev 2470)
@@ -23,7 +23,7 @@
 #include "display/display.hpp"
 #include "sprite2d/manager.hpp"
 #include "math/math.hpp"
-#include "console.hpp"
+#include "app/console.hpp"
 #include "input/controller.hpp"
 #include "display/surface_manager.hpp"
 #include "sprite2dview.hpp"

Modified: trunk/windstille/src/screen/sprite3dview.cpp
===================================================================
--- trunk/windstille/src/screen/sprite3dview.cpp	2009-02-12 08:24:12 UTC (rev 2469)
+++ trunk/windstille/src/screen/sprite3dview.cpp	2009-02-12 08:33:55 UTC (rev 2470)
@@ -19,7 +19,7 @@
 #include <iostream>
 #include "input/controller.hpp"
 #include "display/display.hpp"
-#include "console.hpp"
+#include "app/console.hpp"
 #include "font/ttf_font.hpp"
 #include "font/fonts.hpp"
 #include "screen_manager.hpp"

Modified: trunk/windstille/src/screen/title_screen.cpp
===================================================================
--- trunk/windstille/src/screen/title_screen.cpp	2009-02-12 08:24:12 UTC (rev 2469)
+++ trunk/windstille/src/screen/title_screen.cpp	2009-02-12 08:33:55 UTC (rev 2470)
@@ -17,7 +17,7 @@
 */
 
 #include <iostream>
-#include "menu_manager.hpp"
+#include "app/menu_manager.hpp"
 #include "title_screen.hpp"
 
 TitleScreen::TitleScreen()

Modified: trunk/windstille/src/scripting/interface.cpp
===================================================================
--- trunk/windstille/src/scripting/interface.cpp	2009-02-12 08:24:12 UTC (rev 2469)
+++ trunk/windstille/src/scripting/interface.cpp	2009-02-12 08:33:55 UTC (rev 2470)
@@ -28,7 +28,7 @@
 #include "engine/sector.hpp"
 #include "font/fonts.hpp"
 #include "engine/camera.hpp"
-#include "config.hpp"
+#include "app/config.hpp"
 #include "hud/pda.hpp"
 #include "util/sexpr_file_reader.hpp"
 #include "display/display.hpp"

Modified: trunk/windstille/src/sprite3d/data.cpp
===================================================================
--- trunk/windstille/src/sprite3d/data.cpp	2009-02-12 08:24:12 UTC (rev 2469)
+++ trunk/windstille/src/sprite3d/data.cpp	2009-02-12 08:33:55 UTC (rev 2470)
@@ -24,7 +24,7 @@
 #include <sstream>
 #include <stdexcept>
 #include "util/util.hpp"
-#include "globals.hpp"
+#include "app/globals.hpp"
 #include "display/texture_manager.hpp"
 #include "display/texture.hpp"
 

Modified: trunk/windstille/src/sprite3d/sprite3d.cpp
===================================================================
--- trunk/windstille/src/sprite3d/sprite3d.cpp	2009-02-12 08:24:12 UTC (rev 2469)
+++ trunk/windstille/src/sprite3d/sprite3d.cpp	2009-02-12 08:33:55 UTC (rev 2470)
@@ -28,7 +28,7 @@
 #include <physfs.h>
 #include "display/drawing_request.hpp"
 #include "display/scene_context.hpp"
-#include "globals.hpp"
+#include "app/globals.hpp"
 #include "util/util.hpp"
 #include "display/opengl_state.hpp"
 #include "sprite3d/manager.hpp"

Modified: trunk/windstille/src/tile/tile.cpp
===================================================================
--- trunk/windstille/src/tile/tile.cpp	2009-02-12 08:24:12 UTC (rev 2469)
+++ trunk/windstille/src/tile/tile.cpp	2009-02-12 08:33:55 UTC (rev 2470)
@@ -17,7 +17,7 @@
 */
 
 #include <iostream>
-#include "globals.hpp"
+#include "app/globals.hpp"
 #include "tile.hpp"
 
 Tile::Tile(unsigned int arg_colmap)

Modified: trunk/windstille/src/tile/tile_description.cpp
===================================================================
--- trunk/windstille/src/tile/tile_description.cpp	2009-02-12 08:24:12 UTC (rev 2469)
+++ trunk/windstille/src/tile/tile_description.cpp	2009-02-12 08:33:55 UTC (rev 2470)
@@ -22,7 +22,7 @@
 #include <SDL.h>
 #include <SDL_image.h>
 #include "physfs/physfs_sdl.hpp"
-#include "globals.hpp"
+#include "app/globals.hpp"
 #include "tile.hpp"
 #include "tile_packer.hpp"
 #include "tile_factory.hpp"

Modified: trunk/windstille/src/tile/tile_factory.cpp
===================================================================
--- trunk/windstille/src/tile/tile_factory.cpp	2009-02-12 08:24:12 UTC (rev 2469)
+++ trunk/windstille/src/tile/tile_factory.cpp	2009-02-12 08:33:55 UTC (rev 2470)
@@ -24,7 +24,7 @@
 #include <sstream>
 #include <iostream>
 #include <memory>
-#include "globals.hpp"
+#include "app/globals.hpp"
 #include "tile.hpp"
 #include "tile_packer.hpp"
 #include "tile_factory.hpp"

Modified: trunk/windstille/src/tile/tile_map.cpp
===================================================================
--- trunk/windstille/src/tile/tile_map.cpp	2009-02-12 08:24:12 UTC (rev 2469)
+++ trunk/windstille/src/tile/tile_map.cpp	2009-02-12 08:33:55 UTC (rev 2470)
@@ -22,7 +22,7 @@
 #include "tile_map.hpp"
 #include "tile.hpp"
 #include "tile_factory.hpp"
-#include "globals.hpp"
+#include "app/globals.hpp"
 #include "view.hpp"
 #include "display/vertex_array_drawing_request.hpp"
 #include "collision/collision_engine.hpp"

Modified: trunk/windstille/src/tile/tile_map.hpp
===================================================================
--- trunk/windstille/src/tile/tile_map.hpp	2009-02-12 08:24:12 UTC (rev 2469)
+++ trunk/windstille/src/tile/tile_map.hpp	2009-02-12 08:33:55 UTC (rev 2470)
@@ -21,7 +21,7 @@
 
 #include <string>
 
-#include "globals.hpp"
+#include "app/globals.hpp"
 #include "util/field.hpp"
 #include "engine/game_object.hpp"
 #include "display/scene_context.hpp"

Modified: trunk/windstille/src/tile/tile_packer.cpp
===================================================================
--- trunk/windstille/src/tile/tile_packer.cpp	2009-02-12 08:24:12 UTC (rev 2469)
+++ trunk/windstille/src/tile/tile_packer.cpp	2009-02-12 08:33:55 UTC (rev 2470)
@@ -20,7 +20,7 @@
 #include <GL/glew.h>
 #include <GL/gl.h>
 #include "display/texture.hpp"
-#include "globals.hpp"
+#include "app/globals.hpp"
 #include "tile_packer.hpp"
 #include "util/util.hpp"
 #include "display/blitter.hpp"

Deleted: trunk/windstille/src/windstille.hpp
===================================================================
--- trunk/windstille/src/windstille.hpp	2009-02-12 08:24:12 UTC (rev 2469)
+++ trunk/windstille/src/windstille.hpp	2009-02-12 08:33:55 UTC (rev 2470)
@@ -1,26 +0,0 @@
-/*
-**  Windstille - A Sci-Fi Action-Adventure Game
-**  Copyright (C) 2007 Ingo Ruhnke <grumbel at gmx.de>
-**
-**  This program is free software: you can redistribute it and/or modify
-**  it under the terms of the GNU General Public License as published by
-**  the Free Software Foundation, either version 3 of the License, or
-**  (at your option) any later version.
-**  
-**  This program is distributed in the hope that it will be useful,
-**  but WITHOUT ANY WARRANTY; without even the implied warranty of
-**  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
-**  GNU General Public License for more details.
-**  
-**  You should have received a copy of the GNU General Public License
-**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
-*/
-
-#ifndef HEADER_WINDSTILLE_WINDSTILLE_HPP
-#define HEADER_WINDSTILLE_WINDSTILLE_HPP
-
-#define WINDSTILLE_VERSION "0.4.0"
-
-#endif
-
-/* EOF */

Deleted: trunk/windstille/src/windstille_main.cpp
===================================================================
--- trunk/windstille/src/windstille_main.cpp	2009-02-12 08:24:12 UTC (rev 2469)
+++ trunk/windstille/src/windstille_main.cpp	2009-02-12 08:33:55 UTC (rev 2470)
@@ -1,382 +0,0 @@
-/*
-**  Windstille - A Sci-Fi Action-Adventure Game
-**  Copyright (C) 2000,2005 Ingo Ruhnke <grumbel at gmx.de>
-**
-**  This program is free software: you can redistribute it and/or modify
-**  it under the terms of the GNU General Public License as published by
-**  the Free Software Foundation, either version 3 of the License, or
-**  (at your option) any later version.
-**  
-**  This program is distributed in the hope that it will be useful,
-**  but WITHOUT ANY WARRANTY; without even the implied warranty of
-**  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
-**  GNU General Public License for more details.
-**  
-**  You should have received a copy of the GNU General Public License
-**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
-*/
-
-#include "windstille.hpp"
-
-#include <stdio.h>
-#include <physfs.h>
-
-#include "globals.hpp"
-#include "screen/screen.hpp"
-#include "windstille_main.hpp"
-#include "font/fonts.hpp"
-#include "screen/game_session.hpp"
-#include "screen/title_screen.hpp"
-#include "engine/sector.hpp"
-#include "input/input_manager.hpp"
-#include "sound/sound_manager.hpp"
-#include "tile/tile_factory.hpp"
-#include "engine/script_manager.hpp"
-#include "config.hpp"
-#include "util/util.hpp"
-#include "font/ttf_font.hpp"
-#include "display/display.hpp"
-#include "display/surface_manager.hpp"
-#include "display/texture_manager.hpp"
-#include "sprite3d/manager.hpp"
-#include "screen/screen_manager.hpp"
-#include "screen/sprite3dview.hpp"
-#include "screen/sprite2dview.hpp"
-#include "screen/particle_viewer.hpp"
-#include "sprite2d/manager.hpp"
-
-#ifdef WIN32
-#include "shlwapi.h"
-#define strcasecmp lstrcmpiA 
-#endif
-
-WindstilleMain::WindstilleMain()
-{
-}
-
-WindstilleMain::~WindstilleMain()
-{
-}
-
-int 
-WindstilleMain::main(int argc, char** argv)
-{
-  try {
-    config.parse_args(argc, argv);
-
-    init_physfs(argv[0]);
-    init_sdl();
-
-    config.load();
-    
-    config.parse_args(argc, argv);
-
-    init_modules();
-
-    { // Fill controller_description with data
-      controller_description.add_button("primary-button",   PRIMARY_BUTTON);
-      controller_description.add_button("secondary-button", SECONDARY_BUTTON);
-      controller_description.add_button("tertiary-button",  TERTIARY_BUTTON);
-
-      controller_description.add_button("menu-up-button",   MENU_UP_BUTTON);
-      controller_description.add_button("menu-down-button", MENU_DOWN_BUTTON);
-
-      controller_description.add_button("menu-left-button",  MENU_LEFT_BUTTON);
-      controller_description.add_button("menu-right-button", MENU_RIGHT_BUTTON);
-  
-      controller_description.add_button("view-center-button", VIEW_CENTER_BUTTON);
-
-      controller_description.add_button("pda-button",       PDA_BUTTON);
-      controller_description.add_button("inventory-button", INVENTORY_BUTTON);
-
-      controller_description.add_button("aim-button",       AIM_BUTTON);
-      controller_description.add_button("pause-button",     PAUSE_BUTTON);
-
-      controller_description.add_axis("x-axis", X_AXIS);
-      controller_description.add_axis("y-axis", Y_AXIS);
-
-      controller_description.add_axis("x2-axis", X2_AXIS);
-      controller_description.add_axis("y2-axis", Y2_AXIS);
-
-      controller_description.add_ball("mouse-motion-x", MOUSE_MOTION_X);
-      controller_description.add_ball("mouse-motion-y", MOUSE_MOTION_Y);
-    }
-    
-    {
-      InputManager::init();
-      
-      if (config.get<std::string>("primary-controller-file").is_set())
-        InputManager::load(config.get<std::string>("primary-controller-file").get());
-      else
-        InputManager::load("controller/keyboard.scm");
-
-      if (config.get<std::string>("secondary-controller-file").is_set())
-        InputManager::load(config.get<std::string>("secondary-controller-file").get());
-    }
-
-    if (debug) std::cout << "Initialising TileFactory" << std::endl;
-    TileFactory::init();
-    
-    if (debug) std::cout << "Starting file: '" << config.get_string("levelfile") << "'" 
-                         << std::endl;
-    
-    std::string levelfile;
-    if (config.get<std::string>("levelfile").is_set())
-      {
-        // FIXME: Looks a little hacky, doesn't it?
-        std::string leveldir = dirname(config.get_string("levelfile"));
-        PHYSFS_addToSearchPath(leveldir.c_str(), true);
-        levelfile = basename(config.get_string("levelfile"));
-      }
-
-    if (sprite3dview)
-      {
-        Sprite3DView* sprite3dview = new Sprite3DView();
-
-        if (!levelfile.empty())
-          sprite3dview->set_model(levelfile);
-
-        // Launching Sprite3DView instead of game
-        screen_manager.push_screen(sprite3dview);
-      }
-    else if (sprite2dview)
-      {
-        Sprite2DView* sprite2dview = new Sprite2DView();
-
-        if (!levelfile.empty())
-          sprite2dview->set_sprite(levelfile);
-
-        // Launching Sprite2DView instead of game
-        screen_manager.push_screen(sprite2dview);
-      }
-    else if (particleview)
-      {
-        ParticleViewer* particle_viewer = new ParticleViewer();
-        if (!levelfile.empty())
-          particle_viewer->load(levelfile);
-        screen_manager.push_screen(particle_viewer);
-      }
-    else
-      {
-        if (levelfile.empty())
-          {
-            //screen_manager.push_screen(new GameSession("levels/newformat2.wst"));
-            screen_manager.push_screen(new TitleScreen());
-          }
-        else
-          {
-            screen_manager.push_screen(new GameSession(levelfile));
-          }
-      }
-        
-    screen_manager.run();
-    
-    TileFactory::deinit();
-    InputManager::deinit();
-
-    deinit_modules();
-
-  } catch (std::exception& err) {
-    std::cout << "std::exception: " << err.what() << std::endl;
-  } catch (...) {
-    std::cout << "Error catched something unknown?!" << std::endl;
-  }
-
-  config.save();
-
-  SDL_Quit();
-  PHYSFS_deinit();
-
-  return 0;
-}
-
-void
-WindstilleMain::init_modules()
-{
-  if (debug) std::cout << "Initialising Freetype2" << std::endl;
-    
-  TTFFont::init();
-  
-  Display::init();
-
-  if (debug) std::cout << "Initialising Fonts" << std::endl;
-  Fonts::init(); 
-  sound_manager = new SoundManager();
-  sound_manager->set_listener_gain(config.get_int("master-volume")/100.0f);
-  sound_manager->enable_sound(config.get_bool("sound"));
-  sound_manager->enable_music(config.get_bool("music"));
-
-  if (debug) std::cout << "Initialising ScriptManager" << std::endl;
-  texture_manager  = new TextureManager();
-  surface_manager  = new SurfaceManager();
-  script_manager   = new ScriptManager();
-  sprite2d_manager = new SpriteManager();
-  sprite3d_manager = new sprite3d::Manager();
-
-  script_manager->run_script_file("scripts/windstille.nut");
-}
-
-void
-WindstilleMain::deinit_modules()
-{
-  delete sprite3d_manager;
-  sprite3d_manager = 0;
-
-  delete sprite2d_manager;
-  sprite2d_manager = 0;
-
-  delete script_manager;
-  script_manager = 0;
-
-  delete surface_manager;
-  surface_manager = 0;
-
-  delete texture_manager;
-  texture_manager = 0;
-  
-  delete sound_manager;
-  sound_manager = 0;
-  Fonts::deinit();
-
-  TTFFont::deinit();
-}
-
-void
-WindstilleMain::init_sdl()
-{
-#ifdef DEBUG
-  // I wanna have usefull backtraces in debug mode
-  if(SDL_Init(SDL_INIT_VIDEO | SDL_INIT_JOYSTICK | SDL_INIT_NOPARACHUTE) < 0) {
-#else
-  if(SDL_Init(SDL_INIT_VIDEO | SDL_INIT_JOYSTICK) < 0) {
-#endif
-    std::stringstream msg;
-    msg << "Couldn't initialize SDL: " << SDL_GetError();
-    throw std::runtime_error(msg.str());
-  }
-
-  SDL_EnableUNICODE(1);
-}
-
-void
-WindstilleMain::init_physfs(const char* argv0)
-{
-  if(!PHYSFS_init(argv0)) {
-    std::stringstream msg;
-    msg << "Couldn't initialize physfs: " << PHYSFS_getLastError();
-    throw std::runtime_error(msg.str());
-  }
-
-  // Initialize physfs (this is a slightly modified version of
-  // PHYSFS_setSaneConfig
-  const char* application = "windstille";
-  const char* userdir = PHYSFS_getUserDir();
-  const char* dirsep  = PHYSFS_getDirSeparator();
-  char* writedir = new char[strlen(userdir) + strlen(application) + 2];
-
-  // Set configuration directory
-  sprintf(writedir, "%s.%s", userdir, application);
-  if(!PHYSFS_setWriteDir(writedir)) {
-    // try to create the directory
-    char* mkdir = new char[strlen(application) + 2];
-    sprintf(mkdir, ".%s", application);
-    if(!PHYSFS_setWriteDir(userdir) || !PHYSFS_mkdir(mkdir)) {
-      std::ostringstream msg;
-      msg << "Failed creating configuration directory '"
-          << writedir << "': " << PHYSFS_getLastError();
-      delete[] writedir;
-      delete[] mkdir;
-      throw std::runtime_error(msg.str());
-    }
-    delete[] mkdir;
-
-    if(!PHYSFS_setWriteDir(writedir)) {
-      std::ostringstream msg;
-      msg << "Failed to use configuration directory '"
-          <<  writedir << "': " << PHYSFS_getLastError();
-      delete[] writedir;
-      throw std::runtime_error(msg.str());
-    }
-  }
-  PHYSFS_addToSearchPath(writedir, 0);
-  delete[] writedir;
-
-  // Search for archives and add them to the search path
-  const char* archiveExt = "zip";
-  char** rc = PHYSFS_enumerateFiles("/");
-  size_t extlen = strlen(archiveExt);
-
-  for(char** i = rc; *i != 0; ++i) {
-    size_t l = strlen(*i);
-    if((l > extlen) && ((*i)[l - extlen - 1] == '.')) {
-      const char* ext = (*i) + (l - extlen);
-
-      if(strcasecmp(ext, archiveExt) == 0) {
-        const char* d = PHYSFS_getRealDir(*i);
-        char* str = new char[strlen(d) + strlen(dirsep) + l + 1];
-        sprintf(str, "%s%s%s", d, dirsep, *i);
-        PHYSFS_addToSearchPath(str, 1);
-        delete[] str;
-      }
-    }
-  }
-
-  PHYSFS_freeList(rc);
-
-  // when started from source dir...
-  ::datadir = PHYSFS_getBaseDir();
-  ::datadir += "data/";
-  std::string testfname = ::datadir;
-  testfname += "tiles.scm";
-  bool sourcedir = false;
-  FILE* f = fopen(testfname.c_str(), "r");
-  if(f) {
-    fclose(f);
-    if(!PHYSFS_addToSearchPath(::datadir.c_str(), 1)) {
-      std::cout << "Warning: Couldn't add '" << ::datadir
-                << "' to physfs searchpath: " << PHYSFS_getLastError() << "\n";
-    } else {
-      sourcedir = true;
-    }
-  }
-
-  if(!sourcedir) {
-#if defined(APPDATADIR) || defined(ENABLE_BINRELOC)
-#ifdef ENABLE_BINRELOC
-    char* brdatadir = br_strcat(DATADIR, "/" PACKAGE_NAME);
-    ::datadir = brdatadir;
-    free(brdatadir);
-#else
-    ::datadir = APPDATADIR;
-#endif
-    if(!PHYSFS_addToSearchPath(::datadir.c_str(), 1)) {
-      std::cout << "Couldn't add '" << ::datadir
-        << "' to physfs searchpath: " << PHYSFS_getLastError() << "\n";
-    }
-#endif
-  }
-
-  // allow symbolic links
-  PHYSFS_permitSymbolicLinks(1);
-
-  //show search Path
-  if (debug)
-    {
-      std::cout << "SearchPath:" << std::endl;
-      char** search_path = PHYSFS_getSearchPath();
-      for(char** i = search_path; *i != NULL; i++)
-        std::cout << "  " << *i << std::endl;;
-      PHYSFS_freeList(search_path);
-    }
-}
-
-int main(int argc, char** argv)
-{
-  WindstilleMain main_app;
-
-  main_app.main(argc, argv);
-
-  return 0;
-}
-
-/* EOF */

Deleted: trunk/windstille/src/windstille_main.hpp
===================================================================
--- trunk/windstille/src/windstille_main.hpp	2009-02-12 08:24:12 UTC (rev 2469)
+++ trunk/windstille/src/windstille_main.hpp	2009-02-12 08:33:55 UTC (rev 2470)
@@ -1,71 +0,0 @@
-/*
-**  Windstille - A Sci-Fi Action-Adventure Game
-**  Copyright (C) 2000,2005 Ingo Ruhnke <grumbel at gmx.de>
-**
-**  This program is free software: you can redistribute it and/or modify
-**  it under the terms of the GNU General Public License as published by
-**  the Free Software Foundation, either version 3 of the License, or
-**  (at your option) any later version.
-**  
-**  This program is distributed in the hope that it will be useful,
-**  but WITHOUT ANY WARRANTY; without even the implied warranty of
-**  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
-**  GNU General Public License for more details.
-**  
-**  You should have received a copy of the GNU General Public License
-**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
-*/
-
-/*! \mainpage Windstille Documentation
- *
- * \section intro_sec Introduction
- *
- * Windstille is a classic 2d jump'n shoot game in which the player
- * will be placed in a foreign alien world and has to find its way
- * back into safety. Windstille is currently available for GNU/Linux
- * and Windows.  Its webpage at which one might find new versions,
- * source code, artworks and more informations is located at:
- *
- * http://windstille.berlios.de/
- *
- * The latest development version can be obtained by:
- * 
- * $ svn co svn://svn.berlios.de/windstille/trunk/windstille
- * 
- * Windstille is covered under the GNU GPL, which means that you can copy
- * and even modify it pretty much as you like, as long as you keep the
- * copyright headers in place and distribute the source too if you
- * distribute binaries, see the file COPYING for details.
- *
- * \section install_sec Installation
- *
- * To compile Windstille you need:
- *
- * OpenAL, OpenGL, SDL, SDL_image, freetype, libpng, physfs, boost, scons, bison, flex
- */
-
-#ifndef HEADER_WINDSTILLE_WINDSTILLE_MAIN_HPP
-#define HEADER_WINDSTILLE_WINDSTILLE_MAIN_HPP
-
-#include "screen/screen.hpp"
-
-struct SDL_Surface;
-
-class WindstilleMain
-{  
-public:
-  WindstilleMain();
-  ~WindstilleMain();
-
-  int main(int argc, char** argv);
-
-private:
-  void init_sdl();
-  void init_physfs(const char* argv0);
-  void init_modules();
-  void deinit_modules();
-};
-
-#endif
-
-/* EOF */



From grumbel at mail.berlios.de  Thu Feb 12 10:08:52 2009
From: grumbel at mail.berlios.de (grumbel at BerliOS)
Date: Thu, 12 Feb 2009 10:08:52 +0100
Subject: [Windstille-commit] r2471 - in trunk/windstille/src: . app engine
	gui math objects screen tile
Message-ID: <200902120908.n1C98qgH024208@sheep.berlios.de>

Author: grumbel
Date: 2009-02-12 10:08:50 +0100 (Thu, 12 Feb 2009)
New Revision: 2471

Added:
   trunk/windstille/src/engine/weapon.hpp
   trunk/windstille/src/screen/view.cpp
   trunk/windstille/src/screen/view.hpp
   trunk/windstille/src/weapons/
Removed:
   trunk/windstille/src/view.cpp
   trunk/windstille/src/view.hpp
   trunk/windstille/src/weapon.hpp
Modified:
   trunk/windstille/src/SConscript
   trunk/windstille/src/app/menu_manager.cpp
   trunk/windstille/src/gui/text_view.cpp
   trunk/windstille/src/math/rect.hpp
   trunk/windstille/src/objects/pistol.hpp
   trunk/windstille/src/objects/swarm.cpp
   trunk/windstille/src/tile/tile_map.cpp
Log:
Some more reorganisation, improved spacing in TextView

Modified: trunk/windstille/src/SConscript
===================================================================
--- trunk/windstille/src/SConscript	2009-02-12 08:33:55 UTC (rev 2470)
+++ trunk/windstille/src/SConscript	2009-02-12 09:08:50 UTC (rev 2471)
@@ -191,7 +191,7 @@
 'util/response_curve.cpp',
 'util/sexpr_file_reader.cpp',
 'util/util.cpp',
-'view.cpp',
+'screen/view.cpp',
 ])
 
 # EOF #

Modified: trunk/windstille/src/app/menu_manager.cpp
===================================================================
--- trunk/windstille/src/app/menu_manager.cpp	2009-02-12 08:33:55 UTC (rev 2470)
+++ trunk/windstille/src/app/menu_manager.cpp	2009-02-12 09:08:50 UTC (rev 2471)
@@ -126,7 +126,7 @@
   using namespace gui;
   GUIManager* manager = new GUIManager();
 
-  GroupComponent* text_group = new GroupComponent(Rectf(10, 500+20, 800-10, 600-10),
+  GroupComponent* text_group = new GroupComponent(Rectf(10, 500, 800-10, 600-10),
                                                   "",
                                                   manager->get_root());
 
@@ -142,7 +142,7 @@
 
   manager->get_root()->add_child(text_group);
 
-  GroupComponent* group = new GroupComponent(Rectf(Vector(400-25, 200), Sizef(250, 294)),
+  GroupComponent* group = new GroupComponent(Rectf(Vector(400-20, 200), Sizef(250, 254)),
                                              "",
                                              manager->get_root());
 

Copied: trunk/windstille/src/engine/weapon.hpp (from rev 2466, trunk/windstille/src/weapon.hpp)


Property changes on: trunk/windstille/src/engine/weapon.hpp
___________________________________________________________________
Name: svn:mergeinfo
   + 

Modified: trunk/windstille/src/gui/text_view.cpp
===================================================================
--- trunk/windstille/src/gui/text_view.cpp	2009-02-12 08:33:55 UTC (rev 2470)
+++ trunk/windstille/src/gui/text_view.cpp	2009-02-12 09:08:50 UTC (rev 2471)
@@ -62,7 +62,7 @@
 TextView::set_screen_rect(const Rectf& rect)
 {
   Component::set_screen_rect(rect);
-  text_area.set_rect(rect);
+  text_area.set_rect(rect.grow(-16.0f, -4.0f));
 }
 
 void

Modified: trunk/windstille/src/math/rect.hpp
===================================================================
--- trunk/windstille/src/math/rect.hpp	2009-02-12 08:33:55 UTC (rev 2470)
+++ trunk/windstille/src/math/rect.hpp	2009-02-12 09:08:50 UTC (rev 2471)
@@ -357,10 +357,17 @@
 	// Moves each edge f away from the center, thus width = old_width + 2*f
 	Rectf grow(float f) const {
 		return Rectf(left   - f, 
-						 top    - f,
-						 right  + f,
-						 bottom + f);
+                             top    - f,
+                             right  + f,
+                             bottom + f);
 	}
+
+        Rectf grow(float x, float y) const {
+		return Rectf(left   - x, 
+                             top    - y,
+                             right  + x,
+                             bottom + y);
+	}
 };
 
 inline Rect::Rect(const Rectf& rect)

Modified: trunk/windstille/src/objects/pistol.hpp
===================================================================
--- trunk/windstille/src/objects/pistol.hpp	2009-02-12 08:33:55 UTC (rev 2470)
+++ trunk/windstille/src/objects/pistol.hpp	2009-02-12 09:08:50 UTC (rev 2471)
@@ -20,7 +20,7 @@
 #define HEADER_WINDSTILLE_PISTOL_HPP
 
 #include "sprite3d/sprite3d.hpp"
-#include "weapon.hpp"
+#include "engine/weapon.hpp"
 
 class LaserPointer;
 

Modified: trunk/windstille/src/objects/swarm.cpp
===================================================================
--- trunk/windstille/src/objects/swarm.cpp	2009-02-12 08:33:55 UTC (rev 2470)
+++ trunk/windstille/src/objects/swarm.cpp	2009-02-12 09:08:50 UTC (rev 2471)
@@ -21,7 +21,7 @@
 #include "engine/sector.hpp"
 #include "hedgehog.hpp"
 #include "screen/game_session.hpp"
-#include "view.hpp"
+#include "screen/view.hpp"
 #include "display/vertex_array_drawing_request.hpp"
 #include "math/random.hpp"
 #include "swarm.hpp"

Copied: trunk/windstille/src/screen/view.cpp (from rev 2466, trunk/windstille/src/view.cpp)


Property changes on: trunk/windstille/src/screen/view.cpp
___________________________________________________________________
Name: svn:keywords
   + Id
Name: svn:mergeinfo
   + 
Name: svn:eol-style
   + native

Copied: trunk/windstille/src/screen/view.hpp (from rev 2468, trunk/windstille/src/view.hpp)


Property changes on: trunk/windstille/src/screen/view.hpp
___________________________________________________________________
Name: svn:keywords
   + Id
Name: svn:mergeinfo
   + 
Name: svn:eol-style
   + native

Modified: trunk/windstille/src/tile/tile_map.cpp
===================================================================
--- trunk/windstille/src/tile/tile_map.cpp	2009-02-12 08:33:55 UTC (rev 2470)
+++ trunk/windstille/src/tile/tile_map.cpp	2009-02-12 09:08:50 UTC (rev 2471)
@@ -23,7 +23,7 @@
 #include "tile.hpp"
 #include "tile_factory.hpp"
 #include "app/globals.hpp"
-#include "view.hpp"
+#include "screen/view.hpp"
 #include "display/vertex_array_drawing_request.hpp"
 #include "collision/collision_engine.hpp"
 #include <inttypes.h>

Deleted: trunk/windstille/src/view.cpp
===================================================================
--- trunk/windstille/src/view.cpp	2009-02-12 08:33:55 UTC (rev 2470)
+++ trunk/windstille/src/view.cpp	2009-02-12 09:08:50 UTC (rev 2471)
@@ -1,90 +0,0 @@
-/*
-**  Windstille - A Sci-Fi Action-Adventure Game
-**  Copyright (C) 2000,2005 Ingo Ruhnke <grumbel at gmx.de>
-**
-**  This program is free software: you can redistribute it and/or modify
-**  it under the terms of the GNU General Public License as published by
-**  the Free Software Foundation, either version 3 of the License, or
-**  (at your option) any later version.
-**  
-**  This program is distributed in the hope that it will be useful,
-**  but WITHOUT ANY WARRANTY; without even the implied warranty of
-**  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
-**  GNU General Public License for more details.
-**  
-**  You should have received a copy of the GNU General Public License
-**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
-*/
-
-#include <SDL.h>
-#include "display/display.hpp"
-#include "collision/collision_engine.hpp"
-#include "objects/player.hpp"
-#include "engine/sector.hpp"
-#include "view.hpp"
-
-View* View::current_ = 0;
-
-View::View()
-  : state(Display::get_width(), Display::get_height()),
-    zoom(1.0), transform(0, 0)
-{
-  current_ = this;
-}
-
-void
-View::draw (SceneContext& sc)
-{
-  // Casting here isn't really necessary, but should about some
-  // pixel-jitter when scrolling with subpixel values and pixel
-  // precise images.
-  if (camera.get_zoom() == 1.0)
-    state.set_pos(Vector(static_cast<int>(camera.get_pos().x),
-                         static_cast<int>(camera.get_pos().y)));
-  else
-    state.set_pos(camera.get_pos());
-
-  state.set_zoom(camera.get_zoom() + (zoom - 1.0f));
-  state.set_pos(state.get_pos() + Vector(transform.x, transform.y));
-
-  state.push(sc);
-  Sector::current()->draw(sc);
-  if (collision_debug)
-    Sector::current()->get_collision_engine()->draw(sc.highlight());
-  state.pop(sc);
-}
-
-void
-View::update (float delta, const Controller& controller)
-{
-  camera.update(delta);
-
-  Uint8 *keystate = SDL_GetKeyState(NULL);
-
-  if (keystate[SDLK_KP_PLUS])
-    zoom *= 1.0 + delta;
-  if (keystate[SDLK_KP_MINUS])
-    zoom *= 1.0 - delta;
-
-  if(controller.get_button_state(VIEW_CENTER_BUTTON)) {
-      transform = Vector(0, 0);
-      zoom = 1.0;
-  }
-
-  transform.x += 0.5f * controller.get_axis_state(X2_AXIS) / zoom;
-  transform.y += 0.5f * controller.get_axis_state(Y2_AXIS) / zoom;
-}
-
-Rectf
-View::get_clip_rect()
-{
-  return state.get_clip_rect();
-}
-
-Vector
-View::screen_to_world(const Vector& point)
-{
-  return state.screen_to_world(point);
-}
-
-/* EOF */

Deleted: trunk/windstille/src/view.hpp
===================================================================
--- trunk/windstille/src/view.hpp	2009-02-12 08:33:55 UTC (rev 2470)
+++ trunk/windstille/src/view.hpp	2009-02-12 09:08:50 UTC (rev 2471)
@@ -1,62 +0,0 @@
-/*
-**  Windstille - A Sci-Fi Action-Adventure Game
-**  Copyright (C) 2000,2005 Ingo Ruhnke <grumbel at gmx.de>
-**
-**  This program is free software: you can redistribute it and/or modify
-**  it under the terms of the GNU General Public License as published by
-**  the Free Software Foundation, either version 3 of the License, or
-**  (at your option) any later version.
-**  
-**  This program is distributed in the hope that it will be useful,
-**  but WITHOUT ANY WARRANTY; without even the implied warranty of
-**  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
-**  GNU General Public License for more details.
-**  
-**  You should have received a copy of the GNU General Public License
-**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
-*/
-
-#ifndef HEADER_WINDSTILLE_VIEW_HPP
-#define HEADER_WINDSTILLE_VIEW_HPP
-
-#include "display/graphic_context_state.hpp"
-#include "engine/camera.hpp"
-#include "math/vector.hpp"
-
-class Controller;
-class SceneContext;
-
-/** This class is the gui component which renders the world to the
-    screen */
-class View
-{
-private:
-  GraphicContextState state;
-  Camera camera;
-
-  // debugging helpers
-  float zoom;
-  Vector transform;
-
-public:
-  View();
-
-  GraphicContextState get_gc_state() { return state; }
-
-  /** @return the rectangle which represents the currently visible
-      area, everything outside of it doesn't have to be drawn */
-  Rectf get_clip_rect();
-  Vector screen_to_world(const Vector& point);
-
-  void draw(SceneContext& gc);
-  void update(float delta, const Controller& controller);
-
-  static View* current() { return current_; }
-
-protected:
-  static View* current_;
-};
-
-#endif
-
-/* EOF */

Deleted: trunk/windstille/src/weapon.hpp
===================================================================
--- trunk/windstille/src/weapon.hpp	2009-02-12 08:33:55 UTC (rev 2470)
+++ trunk/windstille/src/weapon.hpp	2009-02-12 09:08:50 UTC (rev 2471)
@@ -1,40 +0,0 @@
-/*
-**  Windstille - A Sci-Fi Action-Adventure Game
-**  Copyright (C) 2005 Ingo Ruhnke <grumbel at gmx.de>
-**
-**  This program is free software: you can redistribute it and/or modify
-**  it under the terms of the GNU General Public License as published by
-**  the Free Software Foundation, either version 3 of the License, or
-**  (at your option) any later version.
-**  
-**  This program is distributed in the hope that it will be useful,
-**  but WITHOUT ANY WARRANTY; without even the implied warranty of
-**  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
-**  GNU General Public License for more details.
-**  
-**  You should have received a copy of the GNU General Public License
-**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
-*/
-
-#ifndef HEADER_WINDSTILLE_WEAPON_HPP
-#define HEADER_WINDSTILLE_WEAPON_HPP
-
-/**
- * Base class for all weapons. This is not a GameObject because it will be
- * attached and handled by the Player object, not by the sector
- */
-class Weapon
-{
-public:
-  virtual ~Weapon()
-  {}
-  
-  virtual void draw(SceneContext& context) = 0;
-  virtual void update(float delta) = 0;
-
-  virtual void fire(bool enable) = 0;
-};
-
-#endif
-
-/* EOF */



From grumbel at mail.berlios.de  Thu Feb 12 11:55:29 2009
From: grumbel at mail.berlios.de (grumbel at BerliOS)
Date: Thu, 12 Feb 2009 11:55:29 +0100
Subject: [Windstille-commit] r2472 - in trunk/windstille/src: . sound
Message-ID: <200902121055.n1CAtTb5014396@sheep.berlios.de>

Author: grumbel
Date: 2009-02-12 11:55:28 +0100 (Thu, 12 Feb 2009)
New Revision: 2472

Added:
   trunk/windstille/src/sound/ogg_sound_file.cpp
   trunk/windstille/src/sound/ogg_sound_file.hpp
   trunk/windstille/src/sound/wav_sound_file.cpp
   trunk/windstille/src/sound/wav_sound_file.hpp
Modified:
   trunk/windstille/src/SConscript
   trunk/windstille/src/sound/sound_file.cpp
   trunk/windstille/src/sound/sound_file.hpp
   trunk/windstille/src/sound/sound_manager.cpp
Log:
Splitted Ogg and Wav into seperate classes, moved load_sound_file into SoundFile

Modified: trunk/windstille/src/SConscript
===================================================================
--- trunk/windstille/src/SConscript	2009-02-12 09:08:50 UTC (rev 2471)
+++ trunk/windstille/src/SConscript	2009-02-12 10:55:28 UTC (rev 2472)
@@ -169,6 +169,8 @@
 'scripting/util.cpp',
 'scripting/wrapper.cpp',
 'sound/sound_file.cpp',
+'sound/wav_sound_file.cpp',
+'sound/ogg_sound_file.cpp',
 'sound/sound_manager.cpp',
 'sound/sound_source.cpp',
 'sound/stream_sound_source.cpp',

Added: trunk/windstille/src/sound/ogg_sound_file.cpp
===================================================================
--- trunk/windstille/src/sound/ogg_sound_file.cpp	2009-02-12 09:08:50 UTC (rev 2471)
+++ trunk/windstille/src/sound/ogg_sound_file.cpp	2009-02-12 10:55:28 UTC (rev 2472)
@@ -0,0 +1,125 @@
+/*
+**  Windstille - A Sci-Fi Action-Adventure Game
+**  Copyright (C) 2005 Matthias Braun <matze at braunis.de>
+**
+**  This program is free software: you can redistribute it and/or modify
+**  it under the terms of the GNU General Public License as published by
+**  the Free Software Foundation, either version 3 of the License, or
+**  (at your option) any later version.
+**  
+**  This program is distributed in the hope that it will be useful,
+**  but WITHOUT ANY WARRANTY; without even the implied warranty of
+**  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+**  GNU General Public License for more details.
+**  
+**  You should have received a copy of the GNU General Public License
+**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
+*/
+
+#include "ogg_sound_file.hpp"
+
+OggSoundFile::OggSoundFile(PHYSFS_file* file)
+{
+  this->file = file;
+
+  ov_callbacks callbacks = { cb_read, cb_seek, cb_close, cb_tell };
+  ov_open_callbacks(file, &vorbis_file, 0, 0, callbacks);
+
+  vorbis_info* vi = ov_info(&vorbis_file, -1);
+  channels = vi->channels;
+  rate = vi->rate;
+  bits_per_sample = 16;
+  size = static_cast<size_t> (ov_pcm_total(&vorbis_file, -1) * 2);
+}
+
+OggSoundFile::~OggSoundFile()
+{
+  ov_clear(&vorbis_file);
+}
+
+size_t
+OggSoundFile::read(void* _buffer, size_t buffer_size)
+{
+  char* buffer = reinterpret_cast<char*> (_buffer);
+  int section = 0;
+  size_t totalBytesRead= 0;
+
+  while(buffer_size>0){
+    long bytesRead 
+      = ov_read(&vorbis_file, buffer, static_cast<int> (buffer_size), 0, 2, 1,
+          &section);
+    if(bytesRead==0){
+      break;
+    }
+    buffer_size -= bytesRead;
+    buffer += bytesRead;
+    totalBytesRead += bytesRead;
+  }
+  
+  return totalBytesRead;
+}
+
+void
+OggSoundFile::reset()
+{
+  ov_raw_seek(&vorbis_file, 0);
+}
+
+size_t
+OggSoundFile::cb_read(void* ptr, size_t size, size_t nmemb, void* source)
+{
+  PHYSFS_file* file = reinterpret_cast<PHYSFS_file*> (source);
+  
+  PHYSFS_sint64 res 
+    = PHYSFS_read(file, ptr, static_cast<PHYSFS_uint32> (size),
+        static_cast<PHYSFS_uint32> (nmemb));
+  if(res <= 0)
+    return 0;
+
+  return static_cast<size_t> (res);
+}
+
+int
+OggSoundFile::cb_seek(void* source, ogg_int64_t offset, int whence)
+{
+  PHYSFS_file* file = reinterpret_cast<PHYSFS_file*> (source);
+
+  switch(whence) {
+    case SEEK_SET:
+      if(PHYSFS_seek(file, static_cast<PHYSFS_uint64> (offset)) == 0)
+        return -1;
+      break;
+    case SEEK_CUR:
+      if(PHYSFS_seek(file, PHYSFS_tell(file) + offset) == 0)
+        return -1;
+      break;
+    case SEEK_END:
+      if(PHYSFS_seek(file, PHYSFS_fileLength(file) + offset) == 0)
+        return -1;
+      break;
+    default:
+#ifdef DEBUG
+      assert(false);
+#else
+      return -1;
+#endif
+  }
+  return 0;
+}
+  
+int
+OggSoundFile::cb_close(void* source)
+{
+  PHYSFS_file* file = reinterpret_cast<PHYSFS_file*> (source);
+  PHYSFS_close(file);
+  return 0;
+}
+
+long
+OggSoundFile::cb_tell(void* source)
+{
+  PHYSFS_file* file = reinterpret_cast<PHYSFS_file*> (source);
+  return static_cast<long> (PHYSFS_tell(file));
+}
+
+/* EOF */


Property changes on: trunk/windstille/src/sound/ogg_sound_file.cpp
___________________________________________________________________
Name: svn:keywords
   + Id
Name: svn:eol-style
   + native

Added: trunk/windstille/src/sound/ogg_sound_file.hpp
===================================================================
--- trunk/windstille/src/sound/ogg_sound_file.hpp	2009-02-12 09:08:50 UTC (rev 2471)
+++ trunk/windstille/src/sound/ogg_sound_file.hpp	2009-02-12 10:55:28 UTC (rev 2472)
@@ -0,0 +1,49 @@
+/*
+**  Windstille - A Sci-Fi Action-Adventure Game
+**  Copyright (C) 2005 Matthias Braun <matze at braunis.de>
+**
+**  This program is free software: you can redistribute it and/or modify
+**  it under the terms of the GNU General Public License as published by
+**  the Free Software Foundation, either version 3 of the License, or
+**  (at your option) any later version.
+**  
+**  This program is distributed in the hope that it will be useful,
+**  but WITHOUT ANY WARRANTY; without even the implied warranty of
+**  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+**  GNU General Public License for more details.
+**  
+**  You should have received a copy of the GNU General Public License
+**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
+*/
+
+#ifndef HEADER_WINDSTILLE_SOUND_OGG_SOUND_FILE_HPP
+#define HEADER_WINDSTILLE_SOUND_OGG_SOUND_FILE_HPP
+
+#include <vorbis/codec.h>
+#include <vorbis/vorbisfile.h>
+#include <physfs.h>
+
+#include "sound_file.hpp"
+
+class OggSoundFile : public SoundFile
+{
+public:
+  OggSoundFile(PHYSFS_file* file);
+  ~OggSoundFile();
+
+  size_t read(void* buffer, size_t buffer_size);
+  void reset();
+
+private:
+  static size_t cb_read(void* ptr, size_t size, size_t nmemb, void* source);
+  static int cb_seek(void* source, ogg_int64_t offset, int whence);
+  static int cb_close(void* source);
+  static long cb_tell(void* source);
+  
+  PHYSFS_file* file;
+  OggVorbis_File vorbis_file;
+};
+
+#endif
+
+/* EOF */


Property changes on: trunk/windstille/src/sound/ogg_sound_file.hpp
___________________________________________________________________
Name: svn:keywords
   + Id
Name: svn:eol-style
   + native

Modified: trunk/windstille/src/sound/sound_file.cpp
===================================================================
--- trunk/windstille/src/sound/sound_file.cpp	2009-02-12 09:08:50 UTC (rev 2471)
+++ trunk/windstille/src/sound/sound_file.cpp	2009-02-12 10:55:28 UTC (rev 2472)
@@ -29,279 +29,15 @@
 #include <sstream>
 #include <assert.h>
 #include <physfs.h>
-#include <vorbis/codec.h>
-#include <vorbis/vorbisfile.h>
 
-class WavSoundFile : public SoundFile
-{
-public:
-  WavSoundFile(PHYSFS_file* file);
-  ~WavSoundFile();
+#include "ogg_sound_file.hpp"
+#include "wav_sound_file.hpp"
 
-  size_t read(void* buffer, size_t buffer_size);
-  void reset();
+#include <fstream>
 
-private:
-  PHYSFS_file* file;
-  
-  PHYSFS_sint64 datastart;
-};
-
-static inline uint32_t read32LE(PHYSFS_file* file)
+SoundFile*
+SoundFile::load(const std::string& filename)
 {
-  uint32_t result;
-  if(PHYSFS_readULE32(file, &result) == 0)
-    throw std::runtime_error("file too short");
-
-  return result;
-}
-
-static inline uint16_t read16LE(PHYSFS_file* file)
-{
-  uint16_t result;
-  if(PHYSFS_readULE16(file, &result) == 0)
-    throw std::runtime_error("file too short");
-
-  return result;
-}
-
-WavSoundFile::WavSoundFile(PHYSFS_file* file)
-{
-  this->file = file;
-
-  char magic[4];
-  if(PHYSFS_read(file, magic, sizeof(magic), 1) != 1)
-    throw std::runtime_error("Couldn't read file magic (not a wave file)");
-  if(strncmp(magic, "RIFF", 4) != 0) {
-    printf("MAGIC: %4s.\n", magic);
-    throw std::runtime_error("file is not a RIFF wav file");
-  }
-
-  uint32_t wavelen = read32LE(file);
-  (void) wavelen;
-  
-  if(PHYSFS_read(file, magic, sizeof(magic), 1) != 1)
-    throw std::runtime_error("Couldn't read chunk header (not a wav file?)");
-  if(strncmp(magic, "WAVE", 4) != 0)
-    throw std::runtime_error("file is not a valid RIFF/WAVE file");
-
-  char chunkmagic[4];
-  uint32_t chunklen;
-
-  // search audio data format chunk
-  do {
-    if(PHYSFS_read(file, chunkmagic, sizeof(chunkmagic), 1) != 1)
-      throw std::runtime_error("EOF while searching format chunk");    
-    chunklen = read32LE(file);
-    
-    if(strncmp(chunkmagic, "fmt ", 4) == 0)
-      break;
-
-    if(strncmp(chunkmagic, "fact", 4) == 0
-        || strncmp(chunkmagic, "LIST", 4) == 0) {
-      // skip chunk
-      if(PHYSFS_seek(file, PHYSFS_tell(file) + chunklen) == 0)
-        throw std::runtime_error("EOF while searching fmt chunk");
-    } else {
-      throw std::runtime_error("complex WAVE files not supported");
-    }
-  } while(true); 
-
-  if(chunklen < 16)
-    throw std::runtime_error("Format chunk too short");
- 
-  // parse format
-  uint16_t encoding = read16LE(file);
-  if(encoding != 1)
-    throw std::runtime_error("only PCM encoding supported");
-  channels = read16LE(file);
-  rate = read32LE(file);
-  uint32_t byterate = read32LE(file);
-  (void) byterate;
-  uint16_t blockalign = read16LE(file);
-  (void) blockalign;
-  bits_per_sample = read16LE(file);
-
-  if(chunklen > 16) {
-    if(PHYSFS_seek(file, PHYSFS_tell(file) + (chunklen-16)) == 0)
-      throw std::runtime_error("EOF while reading reast of format chunk");
-  }
-
-  // set file offset to DATA chunk data
-  do {
-    if(PHYSFS_read(file, chunkmagic, sizeof(chunkmagic), 1) != 1)
-      throw std::runtime_error("EOF while searching data chunk");    
-    chunklen = read32LE(file);
-
-    if(strncmp(chunkmagic, "data", 4) == 0)
-      break;
-
-    // skip chunk
-    if(PHYSFS_seek(file, PHYSFS_tell(file) + chunklen) == 0)
-      throw std::runtime_error("EOF while searching fmt chunk");
-  } while(true);
-
-  datastart = PHYSFS_tell(file);
-  size = static_cast<size_t> (chunklen);
-}
-
-WavSoundFile::~WavSoundFile()
-{
-  PHYSFS_close(file);
-}
-
-void
-WavSoundFile::reset()
-{
-  if(PHYSFS_seek(file, datastart) == 0)
-    throw std::runtime_error("Couldn't seek to data start");
-}
-
-size_t
-WavSoundFile::read(void* buffer, size_t buffer_size)
-{
-  PHYSFS_sint64 end = datastart + size;
-  PHYSFS_sint64 cur = PHYSFS_tell(file);
-  if(cur >= end)
-    return 0;
-  
-  size_t readsize = std::min(static_cast<size_t> (end - cur), buffer_size);
-  if(PHYSFS_read(file, buffer, readsize, 1) != 1)
-    throw std::runtime_error("read error while reading samples");
-
-  return readsize;
-}
-
-//---------------------------------------------------------------------------
-
-class OggSoundFile : public SoundFile
-{
-public:
-  OggSoundFile(PHYSFS_file* file);
-  ~OggSoundFile();
-
-  size_t read(void* buffer, size_t buffer_size);
-  void reset();
-
-private:
-  static size_t cb_read(void* ptr, size_t size, size_t nmemb, void* source);
-  static int cb_seek(void* source, ogg_int64_t offset, int whence);
-  static int cb_close(void* source);
-  static long cb_tell(void* source);
-  
-  PHYSFS_file* file;
-  OggVorbis_File vorbis_file;
-};
-
-OggSoundFile::OggSoundFile(PHYSFS_file* file)
-{
-  this->file = file;
-
-  ov_callbacks callbacks = { cb_read, cb_seek, cb_close, cb_tell };
-  ov_open_callbacks(file, &vorbis_file, 0, 0, callbacks);
-
-  vorbis_info* vi = ov_info(&vorbis_file, -1);
-  channels = vi->channels;
-  rate = vi->rate;
-  bits_per_sample = 16;
-  size = static_cast<size_t> (ov_pcm_total(&vorbis_file, -1) * 2);
-}
-
-OggSoundFile::~OggSoundFile()
-{
-  ov_clear(&vorbis_file);
-}
-
-size_t
-OggSoundFile::read(void* _buffer, size_t buffer_size)
-{
-  char* buffer = reinterpret_cast<char*> (_buffer);
-  int section = 0;
-  size_t totalBytesRead= 0;
-
-  while(buffer_size>0){
-    long bytesRead 
-      = ov_read(&vorbis_file, buffer, static_cast<int> (buffer_size), 0, 2, 1,
-          &section);
-    if(bytesRead==0){
-      break;
-    }
-    buffer_size -= bytesRead;
-    buffer += bytesRead;
-    totalBytesRead += bytesRead;
-  }
-  
-  return totalBytesRead;
-}
-
-void
-OggSoundFile::reset()
-{
-  ov_raw_seek(&vorbis_file, 0);
-}
-
-size_t
-OggSoundFile::cb_read(void* ptr, size_t size, size_t nmemb, void* source)
-{
-  PHYSFS_file* file = reinterpret_cast<PHYSFS_file*> (source);
-  
-  PHYSFS_sint64 res 
-    = PHYSFS_read(file, ptr, static_cast<PHYSFS_uint32> (size),
-        static_cast<PHYSFS_uint32> (nmemb));
-  if(res <= 0)
-    return 0;
-
-  return static_cast<size_t> (res);
-}
-
-int
-OggSoundFile::cb_seek(void* source, ogg_int64_t offset, int whence)
-{
-  PHYSFS_file* file = reinterpret_cast<PHYSFS_file*> (source);
-
-  switch(whence) {
-    case SEEK_SET:
-      if(PHYSFS_seek(file, static_cast<PHYSFS_uint64> (offset)) == 0)
-        return -1;
-      break;
-    case SEEK_CUR:
-      if(PHYSFS_seek(file, PHYSFS_tell(file) + offset) == 0)
-        return -1;
-      break;
-    case SEEK_END:
-      if(PHYSFS_seek(file, PHYSFS_fileLength(file) + offset) == 0)
-        return -1;
-      break;
-    default:
-#ifdef DEBUG
-      assert(false);
-#else
-      return -1;
-#endif
-  }
-  return 0;
-}
-  
-int
-OggSoundFile::cb_close(void* source)
-{
-  PHYSFS_file* file = reinterpret_cast<PHYSFS_file*> (source);
-  PHYSFS_close(file);
-  return 0;
-}
-
-long
-OggSoundFile::cb_tell(void* source)
-{
-  PHYSFS_file* file = reinterpret_cast<PHYSFS_file*> (source);
-  return static_cast<long> (PHYSFS_tell(file));
-}
-
-//---------------------------------------------------------------------------
-
-#include <fstream>
-SoundFile* load_sound_file(const std::string& filename)
-{
   PHYSFS_file* file = PHYSFS_openRead(filename.c_str());
   if(!file) {
     std::stringstream msg;

Modified: trunk/windstille/src/sound/sound_file.hpp
===================================================================
--- trunk/windstille/src/sound/sound_file.hpp	2009-02-12 09:08:50 UTC (rev 2471)
+++ trunk/windstille/src/sound/sound_file.hpp	2009-02-12 10:55:28 UTC (rev 2472)
@@ -36,10 +36,10 @@
   int bits_per_sample;
   /// size in bytes
   size_t size;
+
+  static SoundFile* load(const std::string& filename);
 };
 
-SoundFile* load_sound_file(const std::string& filename);
-
 #endif
 
 /* EOF */

Modified: trunk/windstille/src/sound/sound_manager.cpp
===================================================================
--- trunk/windstille/src/sound/sound_manager.cpp	2009-02-12 09:08:50 UTC (rev 2471)
+++ trunk/windstille/src/sound/sound_manager.cpp	2009-02-12 10:55:28 UTC (rev 2472)
@@ -67,7 +67,7 @@
 SoundManager::load_file_into_buffer(const std::string& filename)
 {
   // open sound file
-  std::auto_ptr<SoundFile> file (load_sound_file(filename));
+  std::auto_ptr<SoundFile> file(SoundFile::load(filename));
   
   ALenum format = get_sample_format(file.get());
   ALuint buffer;
@@ -178,7 +178,7 @@
 
   try {
     StreamSoundSource* newmusic 
-      = new StreamSoundSource(load_sound_file(filename));
+      = new StreamSoundSource(SoundFile::load(filename));
 
     alSourcef(newmusic->source, AL_ROLLOFF_FACTOR, 0);
  

Added: trunk/windstille/src/sound/wav_sound_file.cpp
===================================================================
--- trunk/windstille/src/sound/wav_sound_file.cpp	2009-02-12 09:08:50 UTC (rev 2471)
+++ trunk/windstille/src/sound/wav_sound_file.cpp	2009-02-12 10:55:28 UTC (rev 2472)
@@ -0,0 +1,148 @@
+/*
+**  Windstille - A Sci-Fi Action-Adventure Game
+**  Copyright (C) 2005 Matthias Braun <matze at braunis.de>
+**
+**  This program is free software: you can redistribute it and/or modify
+**  it under the terms of the GNU General Public License as published by
+**  the Free Software Foundation, either version 3 of the License, or
+**  (at your option) any later version.
+**  
+**  This program is distributed in the hope that it will be useful,
+**  but WITHOUT ANY WARRANTY; without even the implied warranty of
+**  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+**  GNU General Public License for more details.
+**  
+**  You should have received a copy of the GNU General Public License
+**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
+*/
+
+#include <string.h>
+#include <stdexcept>
+#include "wav_sound_file.hpp"
+
+static inline uint32_t read32LE(PHYSFS_file* file)
+{
+  uint32_t result;
+  if(PHYSFS_readULE32(file, &result) == 0)
+    throw std::runtime_error("file too short");
+
+  return result;
+}
+
+static inline uint16_t read16LE(PHYSFS_file* file)
+{
+  uint16_t result;
+  if(PHYSFS_readULE16(file, &result) == 0)
+    throw std::runtime_error("file too short");
+
+  return result;
+}
+
+WavSoundFile::WavSoundFile(PHYSFS_file* file)
+{
+  this->file = file;
+
+  char magic[4];
+  if(PHYSFS_read(file, magic, sizeof(magic), 1) != 1)
+    throw std::runtime_error("Couldn't read file magic (not a wave file)");
+  if(strncmp(magic, "RIFF", 4) != 0) {
+    printf("MAGIC: %4s.\n", magic);
+    throw std::runtime_error("file is not a RIFF wav file");
+  }
+
+  uint32_t wavelen = read32LE(file);
+  (void) wavelen;
+  
+  if(PHYSFS_read(file, magic, sizeof(magic), 1) != 1)
+    throw std::runtime_error("Couldn't read chunk header (not a wav file?)");
+  if(strncmp(magic, "WAVE", 4) != 0)
+    throw std::runtime_error("file is not a valid RIFF/WAVE file");
+
+  char chunkmagic[4];
+  uint32_t chunklen;
+
+  // search audio data format chunk
+  do {
+    if(PHYSFS_read(file, chunkmagic, sizeof(chunkmagic), 1) != 1)
+      throw std::runtime_error("EOF while searching format chunk");    
+    chunklen = read32LE(file);
+    
+    if(strncmp(chunkmagic, "fmt ", 4) == 0)
+      break;
+
+    if(strncmp(chunkmagic, "fact", 4) == 0
+        || strncmp(chunkmagic, "LIST", 4) == 0) {
+      // skip chunk
+      if(PHYSFS_seek(file, PHYSFS_tell(file) + chunklen) == 0)
+        throw std::runtime_error("EOF while searching fmt chunk");
+    } else {
+      throw std::runtime_error("complex WAVE files not supported");
+    }
+  } while(true); 
+
+  if(chunklen < 16)
+    throw std::runtime_error("Format chunk too short");
+ 
+  // parse format
+  uint16_t encoding = read16LE(file);
+  if(encoding != 1)
+    throw std::runtime_error("only PCM encoding supported");
+  channels = read16LE(file);
+  rate = read32LE(file);
+  uint32_t byterate = read32LE(file);
+  (void) byterate;
+  uint16_t blockalign = read16LE(file);
+  (void) blockalign;
+  bits_per_sample = read16LE(file);
+
+  if(chunklen > 16) {
+    if(PHYSFS_seek(file, PHYSFS_tell(file) + (chunklen-16)) == 0)
+      throw std::runtime_error("EOF while reading reast of format chunk");
+  }
+
+  // set file offset to DATA chunk data
+  do {
+    if(PHYSFS_read(file, chunkmagic, sizeof(chunkmagic), 1) != 1)
+      throw std::runtime_error("EOF while searching data chunk");    
+    chunklen = read32LE(file);
+
+    if(strncmp(chunkmagic, "data", 4) == 0)
+      break;
+
+    // skip chunk
+    if(PHYSFS_seek(file, PHYSFS_tell(file) + chunklen) == 0)
+      throw std::runtime_error("EOF while searching fmt chunk");
+  } while(true);
+
+  datastart = PHYSFS_tell(file);
+  size = static_cast<size_t> (chunklen);
+}
+
+WavSoundFile::~WavSoundFile()
+{
+  PHYSFS_close(file);
+}
+
+void
+WavSoundFile::reset()
+{
+  if(PHYSFS_seek(file, datastart) == 0)
+    throw std::runtime_error("Couldn't seek to data start");
+}
+
+size_t
+WavSoundFile::read(void* buffer, size_t buffer_size)
+{
+  PHYSFS_sint64 end = datastart + size;
+  PHYSFS_sint64 cur = PHYSFS_tell(file);
+  if(cur >= end)
+    return 0;
+  
+  size_t readsize = std::min(static_cast<size_t> (end - cur), buffer_size);
+  if(PHYSFS_read(file, buffer, readsize, 1) != 1)
+    throw std::runtime_error("read error while reading samples");
+
+  return readsize;
+}
+
+/* EOF */


Property changes on: trunk/windstille/src/sound/wav_sound_file.cpp
___________________________________________________________________
Name: svn:keywords
   + Id
Name: svn:eol-style
   + native

Added: trunk/windstille/src/sound/wav_sound_file.hpp
===================================================================
--- trunk/windstille/src/sound/wav_sound_file.hpp	2009-02-12 09:08:50 UTC (rev 2471)
+++ trunk/windstille/src/sound/wav_sound_file.hpp	2009-02-12 10:55:28 UTC (rev 2472)
@@ -0,0 +1,42 @@
+/*
+**  Windstille - A Sci-Fi Action-Adventure Game
+**  Copyright (C) 2005 Matthias Braun <matze at braunis.de>
+**
+**  This program is free software: you can redistribute it and/or modify
+**  it under the terms of the GNU General Public License as published by
+**  the Free Software Foundation, either version 3 of the License, or
+**  (at your option) any later version.
+**  
+**  This program is distributed in the hope that it will be useful,
+**  but WITHOUT ANY WARRANTY; without even the implied warranty of
+**  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+**  GNU General Public License for more details.
+**  
+**  You should have received a copy of the GNU General Public License
+**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
+*/
+
+#ifndef HEADER_WINDSTILLE_SOUND_WAV_SOUND_FILE_HPP
+#define HEADER_WINDSTILLE_SOUND_WAV_SOUND_FILE_HPP
+
+#include <physfs.h>
+#include "sound_file.hpp"
+
+class WavSoundFile : public SoundFile
+{
+public:
+  WavSoundFile(PHYSFS_file* file);
+  ~WavSoundFile();
+
+  size_t read(void* buffer, size_t buffer_size);
+  void reset();
+
+private:
+  PHYSFS_file* file;
+  
+  PHYSFS_sint64 datastart;
+};
+
+#endif
+
+/* EOF */


Property changes on: trunk/windstille/src/sound/wav_sound_file.hpp
___________________________________________________________________
Name: svn:keywords
   + Id
Name: svn:eol-style
   + native



From grumbel at mail.berlios.de  Thu Feb 12 14:17:31 2009
From: grumbel at mail.berlios.de (grumbel at BerliOS)
Date: Thu, 12 Feb 2009 14:17:31 +0100
Subject: [Windstille-commit] r2473 - in trunk/windstille/src: . collision
Message-ID: <200902121317.n1CDHVd6014556@sheep.berlios.de>

Author: grumbel
Date: 2009-02-12 14:17:27 +0100 (Thu, 12 Feb 2009)
New Revision: 2473

Removed:
   trunk/windstille/src/collision/ladder_contact.cpp
   trunk/windstille/src/collision/ladder_contact.hpp
Modified:
   trunk/windstille/src/SConscript
Log:
Removed empty LadderContact class

Modified: trunk/windstille/src/SConscript
===================================================================
--- trunk/windstille/src/SConscript	2009-02-12 10:55:28 UTC (rev 2472)
+++ trunk/windstille/src/SConscript	2009-02-12 13:17:27 UTC (rev 2473)
@@ -55,7 +55,6 @@
 'collision/collision_engine.cpp',
 'collision/collision_object.cpp',
 'collision/collision_test.cpp',
-'collision/ladder_contact.cpp',
 'collision/stair_contact.cpp',
 'display/blitter.cpp',
 'display/display.cpp',

Deleted: trunk/windstille/src/collision/ladder_contact.cpp
===================================================================
--- trunk/windstille/src/collision/ladder_contact.cpp	2009-02-12 10:55:28 UTC (rev 2472)
+++ trunk/windstille/src/collision/ladder_contact.cpp	2009-02-12 13:17:27 UTC (rev 2473)
@@ -1,47 +0,0 @@
-/*
-**  Windstille - A Sci-Fi Action-Adventure Game
-**  Copyright (C) 2005 Ingo Ruhnke <grumbel at gmx.de>
-**
-**  This program is free software: you can redistribute it and/or modify
-**  it under the terms of the GNU General Public License as published by
-**  the Free Software Foundation, either version 3 of the License, or
-**  (at your option) any later version.
-**  
-**  This program is distributed in the hope that it will be useful,
-**  but WITHOUT ANY WARRANTY; without even the implied warranty of
-**  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
-**  GNU General Public License for more details.
-**  
-**  You should have received a copy of the GNU General Public License
-**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
-*/
-
-#include "ladder_contact.hpp"
-
-LadderContact::LadderContact()
-{
-}
-
-void
-LadderContact::update(float delta)
-{
-}
-
-void
-LadderContact::advance(float s)
-{
-}
-
-bool
-LadderContact::is_active() const
-{
-  return true;
-}
-
-Vector
-LadderContact::get_pos() const
-{
-  return Vector();
-}
-
-/* EOF */

Deleted: trunk/windstille/src/collision/ladder_contact.hpp
===================================================================
--- trunk/windstille/src/collision/ladder_contact.hpp	2009-02-12 10:55:28 UTC (rev 2472)
+++ trunk/windstille/src/collision/ladder_contact.hpp	2009-02-12 13:17:27 UTC (rev 2473)
@@ -1,43 +0,0 @@
-/*
-**  Windstille - A Sci-Fi Action-Adventure Game
-**  Copyright (C) 2005 Ingo Ruhnke <grumbel at gmx.de>
-**
-**  This program is free software: you can redistribute it and/or modify
-**  it under the terms of the GNU General Public License as published by
-**  the Free Software Foundation, either version 3 of the License, or
-**  (at your option) any later version.
-**  
-**  This program is distributed in the hope that it will be useful,
-**  but WITHOUT ANY WARRANTY; without even the implied warranty of
-**  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
-**  GNU General Public License for more details.
-**  
-**  You should have received a copy of the GNU General Public License
-**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
-*/
-
-#ifndef HEADER_WINDSTILLE_COLLISION_LADDER_CONTACT_HPP
-#define HEADER_WINDSTILLE_COLLISION_LADDER_CONTACT_HPP
-
-#include "math/vector.hpp"
-#include "contact.hpp"
-
-/** */
-class LadderContact : public Contact
-{
-private:
-public:
-  LadderContact();
-
-  void update(float delta);
-  void advance(float s);
-  bool is_active() const;
-  Vector get_pos() const;
-private:
-  LadderContact (const LadderContact&);
-  LadderContact& operator= (const LadderContact&);
-};
-
-#endif
-
-/* EOF */



From grumbel at mail.berlios.de  Thu Feb 12 15:38:39 2009
From: grumbel at mail.berlios.de (grumbel at BerliOS)
Date: Thu, 12 Feb 2009 15:38:39 +0100
Subject: [Windstille-commit] r2474 - in trunk/windstille: . src
Message-ID: <200902121438.n1CEcdI7021159@sheep.berlios.de>

Author: grumbel
Date: 2009-02-12 15:38:39 +0100 (Thu, 12 Feb 2009)
New Revision: 2474

Modified:
   trunk/windstille/TODO
   trunk/windstille/src/SConscript
Log:
Removed some junk

Modified: trunk/windstille/TODO
===================================================================
--- trunk/windstille/TODO	2009-02-12 13:17:27 UTC (rev 2473)
+++ trunk/windstille/TODO	2009-02-12 14:38:39 UTC (rev 2474)
@@ -9,6 +9,7 @@
   - Sprite2D
   - Sprite3D
   - particle systems
+  - Dialog/Conversation
 
 * unify copyright header and #ifdef guards
 
@@ -18,6 +19,22 @@
   spawn_object("shockwave", {pos=[0,0]})
 
 * miniswig causes bison++ to crash
+
+* find a astyle/bcpp/whatever configuration that matches the current
+  coding style, maybe a little script that uses Emacs would do
+
+* write a LucasArts-like dialog system (i.e. non-blocking text, instead of JRPG like boxes with portraits)
+
+* PDA needs scrolling text thing (right analog stick?)
+
+* mouse support for menu
+
+* Add more markup to TextArea: 
+    <font color="#ffbbcc"></font>: Use arbitary color
+    <b></b>: make text properly bold
+    <i></i>: make text properly italic 
+
+* Specify the capabilites that the different subsystems need to have
 
 Windstille Bugs
 ===============

Modified: trunk/windstille/src/SConscript
===================================================================
--- trunk/windstille/src/SConscript	2009-02-12 13:17:27 UTC (rev 2473)
+++ trunk/windstille/src/SConscript	2009-02-12 14:38:39 UTC (rev 2474)
@@ -31,14 +31,9 @@
     env.Append(CPPDEFINES = 'HAVE_CWIID')
     env.Append(LIBS = 'cwiid')
 
-# env.Clone(LIBS = ['a', 'b'])
-
-env.foo = 5
 env.ParseConfig('sdl-config --cflags --libs')
 env.ParseConfig('freetype-config --libs --cflags')
 
-# env['ENV']['LSBCC_SHAREDLIBS'] = 'png2:SDL:SDL_image:vorbis:ogg:openal:physfs'
-
 env.Program('../windstille', [
 'app/config.cpp',
 'app/console.cpp',



From grumbel at mail.berlios.de  Thu Feb 12 15:46:02 2009
From: grumbel at mail.berlios.de (grumbel at BerliOS)
Date: Thu, 12 Feb 2009 15:46:02 +0100
Subject: [Windstille-commit] r2475 - in trunk/windstille: . src/display
	src/math src/objects src/particles src/scripting src/sound
	src/sprite2d src/sprite3d
Message-ID: <200902121446.n1CEk29G022741@sheep.berlios.de>

Author: grumbel
Date: 2009-02-12 15:46:01 +0100 (Thu, 12 Feb 2009)
New Revision: 2475

Modified:
   trunk/windstille/config.h
   trunk/windstille/src/display/display.cpp
   trunk/windstille/src/display/framebuffer.cpp
   trunk/windstille/src/display/render_buffer.cpp
   trunk/windstille/src/math/quaternion.cpp
   trunk/windstille/src/math/vector.cpp
   trunk/windstille/src/objects/laser_pointer.cpp
   trunk/windstille/src/objects/spider_mine.cpp
   trunk/windstille/src/objects/test_object.cpp
   trunk/windstille/src/particles/deform_drawer.cpp
   trunk/windstille/src/scripting/squirrel_error.cpp
   trunk/windstille/src/sound/sound_file.cpp
   trunk/windstille/src/sound/sound_source.cpp
   trunk/windstille/src/sound/stream_sound_source.cpp
   trunk/windstille/src/sprite2d/data.cpp
   trunk/windstille/src/sprite2d/manager.cpp
   trunk/windstille/src/sprite3d/manager.cpp
   trunk/windstille/src/sprite3d/sprite3d.cpp
Log:
Removed some unneeded config.h includes

Modified: trunk/windstille/config.h
===================================================================
--- trunk/windstille/config.h	2009-02-12 14:38:39 UTC (rev 2474)
+++ trunk/windstille/config.h	2009-02-12 14:46:01 UTC (rev 2475)
@@ -1,97 +1,3 @@
-/* config.h.  Generated from config.h.in by configure.  */
-/* config.h.in.  Generated from configure.ac by autoheader.  */
+// empty placeholder file, since some external libraries/tools need it
 
-/* Include pthread support for binary relocation? */
-/* #undef BR_PTHREAD */
-
-/* Use binary relocation? */
-/* #undef ENABLE_BINRELOC */
-
-/* Use the Apple OpenGL framework. */
-/* #undef HAVE_APPLE_OPENGL_FRAMEWORK */
-
-/* Define to 1 if you have the <dirent.h> header file, and it defines `DIR'.
-   */
-#define HAVE_DIRENT_H 1
-
-/* Define if you have the iconv() function. */
-#define HAVE_ICONV 1
-
-/* Define to 1 if you have the <inttypes.h> header file. */
-#define HAVE_INTTYPES_H 1
-
-/* Define to 1 if you have the `pthread' library (-lpthread). */
-/* #undef HAVE_LIBPTHREAD */
-
-/* Define to 1 if you have the <memory.h> header file. */
-#define HAVE_MEMORY_H 1
-
-/* Define to 1 if you have the <ndir.h> header file, and it defines `DIR'. */
-/* #undef HAVE_NDIR_H */
-
-/* Define if you have POSIX threads libraries and header files. */
-#define HAVE_PTHREAD 1
-
-/* Define to 1 if you have the <stdint.h> header file. */
-#define HAVE_STDINT_H 1
-
-/* Define to 1 if you have the <stdlib.h> header file. */
-#define HAVE_STDLIB_H 1
-
-/* Define to 1 if you have the <strings.h> header file. */
-#define HAVE_STRINGS_H 1
-
-/* Define to 1 if you have the <string.h> header file. */
-#define HAVE_STRING_H 1
-
-/* Define to 1 if you have the <sys/dir.h> header file, and it defines `DIR'.
-   */
-/* #undef HAVE_SYS_DIR_H */
-
-/* Define to 1 if you have the <sys/ndir.h> header file, and it defines `DIR'.
-   */
-/* #undef HAVE_SYS_NDIR_H */
-
-/* Define to 1 if you have the <sys/stat.h> header file. */
-#define HAVE_SYS_STAT_H 1
-
-/* Define to 1 if you have the <sys/types.h> header file. */
-#define HAVE_SYS_TYPES_H 1
-
-/* Define to 1 if you have the <unistd.h> header file. */
-#define HAVE_UNISTD_H 1
-
-/* Define to 1 if you have the <windows.h> header file. */
-/* #undef HAVE_WINDOWS_H */
-
-/* Define as const if the declaration of iconv() needs const. */
-#define ICONV_CONST 
-
-/* Define to the address where bug reports for this package should be sent. */
-#define PACKAGE_BUGREPORT "matze at braunis.de"
-
-/* Define to the full name of this package. */
-#define PACKAGE_NAME "windstille"
-
-/* Define to the full name and version of this package. */
-#define PACKAGE_STRING "windstille 0.3.0"
-
-/* Define to the one symbol short name of this package. */
-#define PACKAGE_TARNAME "windstille"
-
-/* Define to the version of this package. */
-#define PACKAGE_VERSION "0.3.0"
-
-/* Define to necessary symbol if this constant uses a non-standard name on
-   your system. */
-/* #undef PTHREAD_CREATE_JOINABLE */
-
-/* Define to 1 if you have the ANSI C header files. */
-#define STDC_HEADERS 1
-
-/* Define to 1 if you can safely include both <sys/time.h> and <time.h>. */
-#define TIME_WITH_SYS_TIME 1
-
-/* Define to 1 if `lex' declares `yytext' as a `char *' by default, not a
-   `char[]'. */
-#define YYTEXT_POINTER 1
+/* EOF */

Modified: trunk/windstille/src/display/display.cpp
===================================================================
--- trunk/windstille/src/display/display.cpp	2009-02-12 14:38:39 UTC (rev 2474)
+++ trunk/windstille/src/display/display.cpp	2009-02-12 14:46:01 UTC (rev 2475)
@@ -15,7 +15,6 @@
 **  You should have received a copy of the GNU General Public License
 **  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
-#include <config.h>
 
 #include <png.h>
 #include <math.h>

Modified: trunk/windstille/src/display/framebuffer.cpp
===================================================================
--- trunk/windstille/src/display/framebuffer.cpp	2009-02-12 14:38:39 UTC (rev 2474)
+++ trunk/windstille/src/display/framebuffer.cpp	2009-02-12 14:46:01 UTC (rev 2475)
@@ -15,7 +15,6 @@
 **  You should have received a copy of the GNU General Public License
 **  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
-#include <config.h>
 
 #include <GL/glew.h>
 #include <GL/gl.h>

Modified: trunk/windstille/src/display/render_buffer.cpp
===================================================================
--- trunk/windstille/src/display/render_buffer.cpp	2009-02-12 14:38:39 UTC (rev 2474)
+++ trunk/windstille/src/display/render_buffer.cpp	2009-02-12 14:46:01 UTC (rev 2475)
@@ -15,7 +15,6 @@
 **  You should have received a copy of the GNU General Public License
 **  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
-#include <config.h>
 
 #include <GL/glew.h>
 #include <GL/gl.h>

Modified: trunk/windstille/src/math/quaternion.cpp
===================================================================
--- trunk/windstille/src/math/quaternion.cpp	2009-02-12 14:38:39 UTC (rev 2474)
+++ trunk/windstille/src/math/quaternion.cpp	2009-02-12 14:46:01 UTC (rev 2475)
@@ -16,8 +16,6 @@
 **  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
-#include <config.h>
-
 #include "quaternion.hpp"
 
 #include <math.h>

Modified: trunk/windstille/src/math/vector.cpp
===================================================================
--- trunk/windstille/src/math/vector.cpp	2009-02-12 14:38:39 UTC (rev 2474)
+++ trunk/windstille/src/math/vector.cpp	2009-02-12 14:46:01 UTC (rev 2475)
@@ -15,7 +15,6 @@
 //  along with this program; if not, write to the Free Software
 //  Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA.
 
-#include <config.h>
 #include <cmath>
 #include <iostream>
 #include "math/vector.hpp"

Modified: trunk/windstille/src/objects/laser_pointer.cpp
===================================================================
--- trunk/windstille/src/objects/laser_pointer.cpp	2009-02-12 14:38:39 UTC (rev 2474)
+++ trunk/windstille/src/objects/laser_pointer.cpp	2009-02-12 14:46:01 UTC (rev 2475)
@@ -15,7 +15,6 @@
 **  You should have received a copy of the GNU General Public License
 **  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
-#include <config.h>
 
 #include "display/vertex_array_drawing_request.hpp"
 #include "objects/player.hpp"

Modified: trunk/windstille/src/objects/spider_mine.cpp
===================================================================
--- trunk/windstille/src/objects/spider_mine.cpp	2009-02-12 14:38:39 UTC (rev 2474)
+++ trunk/windstille/src/objects/spider_mine.cpp	2009-02-12 14:46:01 UTC (rev 2475)
@@ -16,8 +16,6 @@
 **  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
-#include <config.h>
-
 #include "spider_mine.hpp"
 #include "player.hpp"
 #include "sprite2d/manager.hpp"

Modified: trunk/windstille/src/objects/test_object.cpp
===================================================================
--- trunk/windstille/src/objects/test_object.cpp	2009-02-12 14:38:39 UTC (rev 2474)
+++ trunk/windstille/src/objects/test_object.cpp	2009-02-12 14:46:01 UTC (rev 2475)
@@ -18,7 +18,6 @@
 
 #include <iostream>
 #include <stdexcept>
-#include <config.h>
 
 #include "test_object.hpp"
 #include "sprite3d/manager.hpp"

Modified: trunk/windstille/src/particles/deform_drawer.cpp
===================================================================
--- trunk/windstille/src/particles/deform_drawer.cpp	2009-02-12 14:38:39 UTC (rev 2474)
+++ trunk/windstille/src/particles/deform_drawer.cpp	2009-02-12 14:46:01 UTC (rev 2475)
@@ -15,7 +15,6 @@
 **  You should have received a copy of the GNU General Public License
 **  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
-#include <config.h>
 
 #include <GL/glew.h>
 #include <GL/gl.h>

Modified: trunk/windstille/src/scripting/squirrel_error.cpp
===================================================================
--- trunk/windstille/src/scripting/squirrel_error.cpp	2009-02-12 14:38:39 UTC (rev 2474)
+++ trunk/windstille/src/scripting/squirrel_error.cpp	2009-02-12 14:46:01 UTC (rev 2475)
@@ -1,4 +1,20 @@
-#include <config.h>
+/*
+**  Windstille - A Sci-Fi Action-Adventure Game
+**  Copyright (C) 2005 Matthias Braun <matze at braunis.de>
+**
+**  This program is free software: you can redistribute it and/or modify
+**  it under the terms of the GNU General Public License as published by
+**  the Free Software Foundation, either version 3 of the License, or
+**  (at your option) any later version.
+**  
+**  This program is distributed in the hope that it will be useful,
+**  but WITHOUT ANY WARRANTY; without even the implied warranty of
+**  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+**  GNU General Public License for more details.
+**  
+**  You should have received a copy of the GNU General Public License
+**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
+*/
 
 #include "squirrel_error.hpp"
 #include <sstream>

Modified: trunk/windstille/src/sound/sound_file.cpp
===================================================================
--- trunk/windstille/src/sound/sound_file.cpp	2009-02-12 14:38:39 UTC (rev 2474)
+++ trunk/windstille/src/sound/sound_file.cpp	2009-02-12 14:46:01 UTC (rev 2475)
@@ -17,7 +17,6 @@
 */
 
 /** Used SDL_mixer and glest source as reference */
-#include <config.h>
 
 #include "sound_file.hpp"
 

Modified: trunk/windstille/src/sound/sound_source.cpp
===================================================================
--- trunk/windstille/src/sound/sound_source.cpp	2009-02-12 14:38:39 UTC (rev 2474)
+++ trunk/windstille/src/sound/sound_source.cpp	2009-02-12 14:46:01 UTC (rev 2475)
@@ -16,8 +16,6 @@
 **  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
-#include <config.h>
-
 #include "sound_source.hpp"
 #include "sound_manager.hpp"
 

Modified: trunk/windstille/src/sound/stream_sound_source.cpp
===================================================================
--- trunk/windstille/src/sound/stream_sound_source.cpp	2009-02-12 14:38:39 UTC (rev 2474)
+++ trunk/windstille/src/sound/stream_sound_source.cpp	2009-02-12 14:46:01 UTC (rev 2475)
@@ -16,8 +16,6 @@
 **  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
-#include <config.h>
-
 #include <SDL.h>
 #include "stream_sound_source.hpp"
 #include "sound_manager.hpp"

Modified: trunk/windstille/src/sprite2d/data.cpp
===================================================================
--- trunk/windstille/src/sprite2d/data.cpp	2009-02-12 14:38:39 UTC (rev 2474)
+++ trunk/windstille/src/sprite2d/data.cpp	2009-02-12 14:46:01 UTC (rev 2475)
@@ -17,8 +17,6 @@
 **  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
-#include <config.h>
-
 #include "sprite2d/data.hpp"
 
 #include <physfs.h>

Modified: trunk/windstille/src/sprite2d/manager.cpp
===================================================================
--- trunk/windstille/src/sprite2d/manager.cpp	2009-02-12 14:38:39 UTC (rev 2474)
+++ trunk/windstille/src/sprite2d/manager.cpp	2009-02-12 14:46:01 UTC (rev 2475)
@@ -17,8 +17,6 @@
 **  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
-#include <config.h>
-
 #include "sprite2d/manager.hpp"
 #include "sprite2d/data.hpp"
 #include "sprite2d/sprite.hpp"

Modified: trunk/windstille/src/sprite3d/manager.cpp
===================================================================
--- trunk/windstille/src/sprite3d/manager.cpp	2009-02-12 14:38:39 UTC (rev 2474)
+++ trunk/windstille/src/sprite3d/manager.cpp	2009-02-12 14:46:01 UTC (rev 2475)
@@ -16,8 +16,6 @@
 **  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
-#include <config.h>
-
 #include "sprite3d/manager.hpp"
 #include "sprite3d/data.hpp"
 #include "sprite3d/sprite3d.hpp"

Modified: trunk/windstille/src/sprite3d/sprite3d.cpp
===================================================================
--- trunk/windstille/src/sprite3d/sprite3d.cpp	2009-02-12 14:38:39 UTC (rev 2474)
+++ trunk/windstille/src/sprite3d/sprite3d.cpp	2009-02-12 14:46:01 UTC (rev 2475)
@@ -16,8 +16,6 @@
 **  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
-#include <config.h>
-
 #include "sprite3d/sprite3d.hpp"
 
 #include <assert.h>



From grumbel at mail.berlios.de  Thu Feb 12 16:28:23 2009
From: grumbel at mail.berlios.de (grumbel at BerliOS)
Date: Thu, 12 Feb 2009 16:28:23 +0100
Subject: [Windstille-commit] r2476 - trunk/windstille/src/app
Message-ID: <200902121528.n1CFSNYW026920@sheep.berlios.de>

Author: grumbel
Date: 2009-02-12 16:28:23 +0100 (Thu, 12 Feb 2009)
New Revision: 2476

Modified:
   trunk/windstille/src/app/menu_manager.cpp
Log:
Use WINDSTILLE_VERSION macro for title screen

Modified: trunk/windstille/src/app/menu_manager.cpp
===================================================================
--- trunk/windstille/src/app/menu_manager.cpp	2009-02-12 14:46:01 UTC (rev 2475)
+++ trunk/windstille/src/app/menu_manager.cpp	2009-02-12 15:28:23 UTC (rev 2476)
@@ -40,6 +40,7 @@
 #ifdef HAVE_CWIID
 #include "input/wiimote.hpp"
 #endif
+#include "app/windstille.hpp"
 #include "menu_manager.hpp"
 
 MenuManager menu_manager;
@@ -133,7 +134,7 @@
   TextView* text = new TextView(Rectf(), text_group);
   text_group->pack(text);
   text->set_font(Fonts::vera12);
-  text->set_text("Windstille 0.4.0 - Copyright (C) 2009 Ingo Ruhnke &lt;grumbel at gmx.de&gt;\n"
+  text->set_text("Windstille " WINDSTILLE_VERSION " - Copyright (C) 2009 Ingo Ruhnke &lt;grumbel at gmx.de&gt;\n"
                  "\n"
                  "This program is free software: you can redistribute it and/or modify "
                  "it under the terms of the GNU General Public License as published by "



From grumbel at mail.berlios.de  Thu Feb 12 17:17:30 2009
From: grumbel at mail.berlios.de (grumbel at BerliOS)
Date: Thu, 12 Feb 2009 17:17:30 +0100
Subject: [Windstille-commit] r2477 - in trunk/windstille/src: app display
	font gui hud screen
Message-ID: <200902121617.n1CGHUfR032163@sheep.berlios.de>

Author: grumbel
Date: 2009-02-12 17:17:28 +0100 (Thu, 12 Feb 2009)
New Revision: 2477

Modified:
   trunk/windstille/src/app/console.cpp
   trunk/windstille/src/display/drawing_context.cpp
   trunk/windstille/src/font/ttf_font.cpp
   trunk/windstille/src/font/ttf_font.hpp
   trunk/windstille/src/gui/button.cpp
   trunk/windstille/src/gui/group_component.cpp
   trunk/windstille/src/gui/label.cpp
   trunk/windstille/src/gui/list_view.cpp
   trunk/windstille/src/gui/menu_item.cpp
   trunk/windstille/src/gui/menu_item.hpp
   trunk/windstille/src/gui/tab_component.cpp
   trunk/windstille/src/hud/conversation.cpp
   trunk/windstille/src/hud/inventory.cpp
   trunk/windstille/src/screen/game_session.cpp
   trunk/windstille/src/screen/screen_manager.cpp
   trunk/windstille/src/screen/sprite3dview.cpp
Log:
Use Vector instead of float/float in TTFFont

Modified: trunk/windstille/src/app/console.cpp
===================================================================
--- trunk/windstille/src/app/console.cpp	2009-02-12 15:28:23 UTC (rev 2476)
+++ trunk/windstille/src/app/console.cpp	2009-02-12 16:17:28 UTC (rev 2477)
@@ -167,7 +167,7 @@
           if (buffer[i].display_time > 4.0f && !console.is_active())
             alpha = 1.0f - (buffer[i].display_time - 4.0f);
 
-          Fonts::ttffont->draw(x_pos, y, buffer[i].message, Color(0.88f, 0.88f, 1.0f, alpha));
+          Fonts::ttffont->draw(Vector(x_pos, y), buffer[i].message, Color(0.88f, 0.88f, 1.0f, alpha));
         }
       y -= Fonts::ttffont->get_height() + 2;
     }
@@ -183,7 +183,7 @@
             str += "_";
         }
 
-      Fonts::ttffont->draw(x_pos, y_pos, "> " + str, Color(1.0f, 1.0f, 1.0f));
+      Fonts::ttffont->draw(Vector(x_pos, y_pos), "> " + str, Color(1.0f, 1.0f, 1.0f));
     }
 }
 

Modified: trunk/windstille/src/display/drawing_context.cpp
===================================================================
--- trunk/windstille/src/display/drawing_context.cpp	2009-02-12 15:28:23 UTC (rev 2476)
+++ trunk/windstille/src/display/drawing_context.cpp	2009-02-12 16:17:28 UTC (rev 2477)
@@ -71,7 +71,7 @@
   void draw(const Texture& tmp_texture) {
     glPushMatrix();
     glMultMatrixf(modelview.matrix);
-    Fonts::ttffont->draw(int(pos.x), int(pos.y), text);
+    Fonts::ttffont->draw(pos, text);
     glPopMatrix();
   }
 };

Modified: trunk/windstille/src/font/ttf_font.cpp
===================================================================
--- trunk/windstille/src/font/ttf_font.cpp	2009-02-12 15:28:23 UTC (rev 2476)
+++ trunk/windstille/src/font/ttf_font.cpp	2009-02-12 16:17:28 UTC (rev 2477)
@@ -177,11 +177,11 @@
 }
 
 void
-TTFFont::draw(float x_pos, float y_pos, const std::string& str, const Color& color)
+TTFFont::draw(const Vector& pos_, const std::string& str, const Color& color)
 {
   // FIXME: Little bit hacky to throw it just in
-  x_pos = static_cast<int>(x_pos);
-  y_pos = static_cast<int>(y_pos);
+  Vector pos(static_cast<int>(pos_.x),
+             static_cast<int>(pos_.y));
 
   OpenGLState state;
 
@@ -200,30 +200,30 @@
       const TTFCharacter& character = impl->characters[*i];
       
       glTexCoord2f(character.uv.left, character.uv.top);
-      glVertex2f(x_pos + character.pos.left + mx,
-                 y_pos + character.pos.top  + my);
+      glVertex2f(pos.x + character.pos.left + mx,
+                 pos.y + character.pos.top  + my);
 
       glTexCoord2f(character.uv.right, character.uv.top);
-      glVertex2f(x_pos + character.pos.right + mx, 
-                 y_pos + character.pos.top   + my);
+      glVertex2f(pos.x + character.pos.right + mx, 
+                 pos.y + character.pos.top   + my);
 
       glTexCoord2f(character.uv.right, character.uv.bottom);
-      glVertex2f(x_pos + character.pos.right  + mx, 
-                 y_pos + character.pos.bottom + my);
+      glVertex2f(pos.x + character.pos.right  + mx, 
+                 pos.y + character.pos.bottom + my);
 
       glTexCoord2f(character.uv.left, character.uv.bottom);
-      glVertex2f(x_pos + character.pos.left   + mx, 
-                 y_pos + character.pos.bottom + my);
+      glVertex2f(pos.x + character.pos.left   + mx, 
+                 pos.y + character.pos.bottom + my);
 
-      x_pos += character.advance;       
+      pos.x += character.advance;       
     }
   glEnd();
 }
 
 void
-TTFFont::draw_center(float x_pos, float y_pos, const std::string& str, const Color& color)
+TTFFont::draw_center(const Vector& pos, const std::string& str, const Color& color)
 {
-  draw(x_pos - get_width(str)/2, y_pos, str, color);
+  draw(Vector(pos.x - get_width(str)/2, pos.y), str, color);
 }
 
 int

Modified: trunk/windstille/src/font/ttf_font.hpp
===================================================================
--- trunk/windstille/src/font/ttf_font.hpp	2009-02-12 15:28:23 UTC (rev 2476)
+++ trunk/windstille/src/font/ttf_font.hpp	2009-02-12 16:17:28 UTC (rev 2477)
@@ -73,8 +73,8 @@
   Texture get_texture() const;
 
   const TTFCharacter& get_character(int c) const;
-  void draw(float x_pos, float y_pos, const std::string& str, const Color& color = Color(1.0f, 1.0f, 1.0f));
-  void draw_center(float x_pos, float y_pos, const std::string& str, const Color& color = Color(1.0f, 1.0f, 1.0f));
+  void draw(const Vector& pos, const std::string& str, const Color& color = Color(1.0f, 1.0f, 1.0f));
+  void draw_center(const Vector& pos, const std::string& str, const Color& color = Color(1.0f, 1.0f, 1.0f));
 
 private:
   TTFFontImpl* impl;

Modified: trunk/windstille/src/gui/button.cpp
===================================================================
--- trunk/windstille/src/gui/button.cpp	2009-02-12 15:28:23 UTC (rev 2476)
+++ trunk/windstille/src/gui/button.cpp	2009-02-12 16:17:28 UTC (rev 2477)
@@ -45,11 +45,11 @@
 {
   Display::fill_rect(rect, Color(0.0f, 0.0f, 0.0f, 0.5f));
   Display::draw_rect(rect, Color(1.0f, 1.0f, 1.0f, 0.5f));
-  Fonts::vera20->draw_center(rect.left + rect.get_width()/2, rect.top + rect.get_height()/2,
-                                label,
-                                is_active()
-                                ? Color(1.0f, 1.0f, 1.0f, 1.0f) 
-                                : Color(1.0f, 1.0f, 1.0f, 0.5f));
+  Fonts::vera20->draw_center(Vector(rect.left + rect.get_width()/2, rect.top + rect.get_height()/2),
+                             label,
+                             is_active()
+                             ? Color(1.0f, 1.0f, 1.0f, 1.0f) 
+                             : Color(1.0f, 1.0f, 1.0f, 0.5f));
 }
 
 void

Modified: trunk/windstille/src/gui/group_component.cpp
===================================================================
--- trunk/windstille/src/gui/group_component.cpp	2009-02-12 15:28:23 UTC (rev 2476)
+++ trunk/windstille/src/gui/group_component.cpp	2009-02-12 16:17:28 UTC (rev 2477)
@@ -46,7 +46,7 @@
   if (!title.empty())
     {
       TTFFont* font = Fonts::vera20;
-      font->draw_center(rect.left + rect.get_width()/2, rect.top + font->get_height() + 5, 
+      font->draw_center(Vector(rect.left + rect.get_width()/2, rect.top + font->get_height() + 5), 
                         title, Color(1.0f, 1.0f, 1.0f));
 
       Display::fill_rect(Rectf(rect.left  + 8, rect.top + font->get_height() + 16,

Modified: trunk/windstille/src/gui/label.cpp
===================================================================
--- trunk/windstille/src/gui/label.cpp	2009-02-12 15:28:23 UTC (rev 2476)
+++ trunk/windstille/src/gui/label.cpp	2009-02-12 16:17:28 UTC (rev 2477)
@@ -36,7 +36,7 @@
 {
   //Display::fill_rect(rect, Color(0.0f, 0.0f, 0.0f, 0.5f));
   //Display::draw_rect(rect, Color(1.0f, 1.0f, 1.0f, 0.5f));
-  Fonts::vera12->draw(int(rect.left + 5/*+ rect.get_width()/2*/), int(rect.top + rect.get_height()/2 + 3),
+  Fonts::vera12->draw(Vector(rect.left + 5/*+ rect.get_width()/2*/, rect.top + rect.get_height()/2 + 3),
                       label,
                       Color(1.0f, 1.0f, 1.0f, 1.0f));
 }

Modified: trunk/windstille/src/gui/list_view.cpp
===================================================================
--- trunk/windstille/src/gui/list_view.cpp	2009-02-12 15:28:23 UTC (rev 2476)
+++ trunk/windstille/src/gui/list_view.cpp	2009-02-12 16:17:28 UTC (rev 2477)
@@ -45,11 +45,11 @@
   for(int i = 0; i < int(columns.size()); ++i)
     {
       // FIXME: Poor mans outline effect
-      font->draw_center(x + columns[i].width/2 + 1, y - 1, columns[i].title);
-      font->draw_center(x + columns[i].width/2 - 1, y - 1, columns[i].title);
-      font->draw_center(x + columns[i].width/2 + 1, y + 1, columns[i].title);
-      font->draw_center(x + columns[i].width/2 - 1, y + 1, columns[i].title);
-      font->draw_center(x + columns[i].width/2, y, columns[i].title, Color(0.0f, 0.0f, 0.0f));
+      font->draw_center(Vector(x + columns[i].width/2 + 1, y - 1), columns[i].title);
+      font->draw_center(Vector(x + columns[i].width/2 - 1, y - 1), columns[i].title);
+      font->draw_center(Vector(x + columns[i].width/2 + 1, y + 1), columns[i].title);
+      font->draw_center(Vector(x + columns[i].width/2 - 1, y + 1), columns[i].title);
+      font->draw_center(Vector(x + columns[i].width/2, y), columns[i].title, Color(0.0f, 0.0f, 0.0f));
       x += columns[i].width;
     }
 
@@ -66,7 +66,7 @@
           
       for(int i = 0; i < int(items[j].columns.size()) && i < int(columns.size()); ++i)
         {
-          font->draw(x + padding, y, items[j].columns[i]);
+          font->draw(Vector(x + padding, y), items[j].columns[i]);
             
           x += columns[i].width;
         }

Modified: trunk/windstille/src/gui/menu_item.cpp
===================================================================
--- trunk/windstille/src/gui/menu_item.cpp	2009-02-12 15:28:23 UTC (rev 2476)
+++ trunk/windstille/src/gui/menu_item.cpp	2009-02-12 16:17:28 UTC (rev 2477)
@@ -46,14 +46,14 @@
     font_color = Color(0.75f, 0.75f, 0.75f, 1.0f);
   }
 
-  font->draw(rect.left + font->get_height(), rect.top + font->get_height()/2.0f + rect.get_height()/2.0f - 2.0f,
+  font->draw(Vector(rect.left + font->get_height(), rect.top + font->get_height()/2.0f + rect.get_height()/2.0f - 2.0f),
              label, font_color);
-      
 }
 
 void
 MenuItem::update(float delta)
 {
+  
 }
 
 EnumMenuItem::EnumMenuItem(MenuComponent* parent_, 
@@ -109,8 +109,8 @@
       font_color = Color(0.75f, 0.75f, 0.75f, 1.0f);
     }
 
-  font->draw(rect.right - font->get_height() - font->get_width(labels[index].label),
-             rect.top + font->get_height()/2.0f + rect.get_height()/2.0f - 2.0f,
+  font->draw(Vector(rect.right - font->get_height() - font->get_width(labels[index].label),
+                    rect.top + font->get_height()/2.0f + rect.get_height()/2.0f - 2.0f),
              labels[index].label,
              font_color);
 }

Modified: trunk/windstille/src/gui/menu_item.hpp
===================================================================
--- trunk/windstille/src/gui/menu_item.hpp	2009-02-12 15:28:23 UTC (rev 2476)
+++ trunk/windstille/src/gui/menu_item.hpp	2009-02-12 16:17:28 UTC (rev 2477)
@@ -28,21 +28,26 @@
 
 class MenuComponent;
 
-class MenuItem {
+class MenuItem 
+{
 public:
   MenuComponent* parent;
   std::string label;
 
   MenuItem(MenuComponent* parent_, const std::string& label_);
   virtual ~MenuItem() {}
+
   virtual void incr() =0;
   virtual void decr() =0;
+
   virtual void click() =0;
+
   virtual void draw(const Rectf& rect, bool is_active);
   virtual void update(float delta);
 };
 
-class EnumMenuItem : public MenuItem {
+class EnumMenuItem : public MenuItem 
+{
 private: // FIXME: Convert this into a generic enum/value slider
   struct EnumValue {
     std::string label;
@@ -68,7 +73,8 @@
 
 /** A slider widget for use in volume controls, gamma controls and
     things like that */
-class SliderMenuItem : public MenuItem {
+class SliderMenuItem : public MenuItem 
+{
 public:
   int value;
   int min_value;
@@ -86,7 +92,8 @@
   boost::signal<void (int)>& sig_change() { return on_change; }
 };
 
-class ButtonMenuItem : public MenuItem {
+class ButtonMenuItem : public MenuItem 
+{
 public:
   boost::signal<void ()> on_click;
 

Modified: trunk/windstille/src/gui/tab_component.cpp
===================================================================
--- trunk/windstille/src/gui/tab_component.cpp	2009-02-12 15:28:23 UTC (rev 2476)
+++ trunk/windstille/src/gui/tab_component.cpp	2009-02-12 16:17:28 UTC (rev 2477)
@@ -59,12 +59,12 @@
 
       Display::draw_rounded_rect(tab_rect, 5.0f, Color(1.0f, 1.0f, 1.0f, 0.5f));
 
-      Fonts::vera20->draw_center(rect.left + tab_width * i + tab_width/2,
-                                    rect.top + Fonts::vera20->get_height(),
-                                    tabs[i].label,
-                                    tabs[current_tab].component->is_active()
-                                    ? Color(1.0f, 1.0f, 1.0f, 0.5f) 
-                                    : Color(1.0f, 1.0f, 1.0f, 1.0f));
+      Fonts::vera20->draw_center(Vector(rect.left + tab_width * i + tab_width/2,
+                                        rect.top + Fonts::vera20->get_height()),
+                                 tabs[i].label,
+                                 tabs[current_tab].component->is_active()
+                                 ? Color(1.0f, 1.0f, 1.0f, 0.5f) 
+                                 : Color(1.0f, 1.0f, 1.0f, 1.0f));
     }
 
   tabs[current_tab].component->draw();

Modified: trunk/windstille/src/hud/conversation.cpp
===================================================================
--- trunk/windstille/src/hud/conversation.cpp	2009-02-12 15:28:23 UTC (rev 2476)
+++ trunk/windstille/src/hud/conversation.cpp	2009-02-12 16:17:28 UTC (rev 2477)
@@ -92,18 +92,18 @@
           
           Display::fill_arc(pos, 42.0f, start, end, Color(1.0f, 1.0f, 1.0f, 0.5f), 24);
           Display::fill_rounded_rect(rect, 5.0f, Color(0.5f, 0.5f, 0.5f, 0.75f));
-          Fonts::vera20->draw_center(textpos.x + distance * offset.x,
-                                     textpos.y + distance * offset.y, 
+          Fonts::vera20->draw_center(Vector(textpos.x + distance * offset.x,
+                                            textpos.y + distance * offset.y), 
                                      choices[i].topic, Color(1.0f, 1.0f, 1.0f));
 
-          Fonts::vera20->draw_center(400, 600 - 64,
+          Fonts::vera20->draw_center(Vector(400, 600 - 64),
                                      choices[i].text, Color(1.0f, 1.0f, 1.0f));
         }
       else
         {
           Display::fill_rounded_rect(rect, 5.0f, Color(0.25f, 0.25f, 0.25f, 0.75f));
-          Fonts::vera20->draw_center(textpos.x + distance * offset.x,
-                                     textpos.y + distance * offset.y,
+          Fonts::vera20->draw_center(Vector(textpos.x + distance * offset.x,
+                                            textpos.y + distance * offset.y),
                                      choices[i].topic, Color(0.5f, 0.5f, 0.5f));
         }
 

Modified: trunk/windstille/src/hud/inventory.cpp
===================================================================
--- trunk/windstille/src/hud/inventory.cpp	2009-02-12 15:28:23 UTC (rev 2476)
+++ trunk/windstille/src/hud/inventory.cpp	2009-02-12 16:17:28 UTC (rev 2477)
@@ -102,7 +102,7 @@
       if (i == 0 && moving == 0)
         {
           slothighlight.draw(draw_pos);
-          Fonts::vera20->draw_center(draw_pos.x, draw_pos.y - 64, item.name);
+          Fonts::vera20->draw_center(Vector(draw_pos.x, draw_pos.y - 64), item.name);
         }
       else
         {

Modified: trunk/windstille/src/screen/game_session.cpp
===================================================================
--- trunk/windstille/src/screen/game_session.cpp	2009-02-12 15:28:23 UTC (rev 2476)
+++ trunk/windstille/src/screen/game_session.cpp	2009-02-12 16:17:28 UTC (rev 2477)
@@ -173,7 +173,7 @@
   if (pause)
     {
       if ((SDL_GetTicks() / 1000) % 2)
-        Fonts::vera20->draw(Display::get_width()/2, Display::get_height()/2, "Pause");
+        Fonts::vera20->draw(Vector(Display::get_width()/2, Display::get_height()/2), "Pause");
     }
 }
 

Modified: trunk/windstille/src/screen/screen_manager.cpp
===================================================================
--- trunk/windstille/src/screen/screen_manager.cpp	2009-02-12 15:28:23 UTC (rev 2476)
+++ trunk/windstille/src/screen/screen_manager.cpp	2009-02-12 16:17:28 UTC (rev 2477)
@@ -319,7 +319,7 @@
   
   char output[20];
   snprintf(output, sizeof(output), "FPS: %d", last_fps);
-  Fonts::ttffont->draw(Display::get_width() - 100, 30, output);
+  Fonts::ttffont->draw(Vector(Display::get_width() - 100, 30), output);
 }
 
 void

Modified: trunk/windstille/src/screen/sprite3dview.cpp
===================================================================
--- trunk/windstille/src/screen/sprite3dview.cpp	2009-02-12 15:28:23 UTC (rev 2476)
+++ trunk/windstille/src/screen/sprite3dview.cpp	2009-02-12 16:17:28 UTC (rev 2477)
@@ -84,11 +84,11 @@
   for(int i = 0; i < int(actions.size()); ++i)
     {
       if (i == current_action)
-        Fonts::vera12->draw(x, y,
-                               actions[i], Color(1.0f, 1.0f, 1.0f));
+        Fonts::vera12->draw(Vector(x, y),
+                            actions[i], Color(1.0f, 1.0f, 1.0f));
       else
-        Fonts::vera12->draw(x, y,
-                               actions[i], Color(0.7f, 0.7f, 0.7f));
+        Fonts::vera12->draw(Vector(x, y),
+                            actions[i], Color(0.7f, 0.7f, 0.7f));
 
 
       y += line_height;



From grumbel at mail.berlios.de  Thu Feb 12 17:33:45 2009
From: grumbel at mail.berlios.de (grumbel at BerliOS)
Date: Thu, 12 Feb 2009 17:33:45 +0100
Subject: [Windstille-commit] r2478 - in trunk/windstille/src: app armature
	collision display engine font gui hud math navigation objects
	particles screen scripting sound sprite2d sprite3d tile util
Message-ID: <200902121633.n1CGXjGF000963@sheep.berlios.de>

Author: grumbel
Date: 2009-02-12 17:33:35 +0100 (Thu, 12 Feb 2009)
New Revision: 2478

Modified:
   trunk/windstille/src/app/console.cpp
   trunk/windstille/src/app/menu_manager.cpp
   trunk/windstille/src/armature/ipo_curve.cpp
   trunk/windstille/src/armature/ipo_curve.hpp
   trunk/windstille/src/armature/mesh.hpp
   trunk/windstille/src/collision/collision_data.hpp
   trunk/windstille/src/collision/collision_engine.cpp
   trunk/windstille/src/collision/collision_engine.hpp
   trunk/windstille/src/collision/collision_object.cpp
   trunk/windstille/src/collision/collision_object.hpp
   trunk/windstille/src/collision/contact.hpp
   trunk/windstille/src/collision/stair_contact.cpp
   trunk/windstille/src/collision/stair_contact.hpp
   trunk/windstille/src/display/display.cpp
   trunk/windstille/src/display/display.hpp
   trunk/windstille/src/display/drawing_context.cpp
   trunk/windstille/src/display/drawing_context.hpp
   trunk/windstille/src/display/drawing_request.hpp
   trunk/windstille/src/display/graphic_context_state.cpp
   trunk/windstille/src/display/graphic_context_state.hpp
   trunk/windstille/src/display/surface.cpp
   trunk/windstille/src/display/surface.hpp
   trunk/windstille/src/display/surface_drawing_parameters.hpp
   trunk/windstille/src/display/text_area.cpp
   trunk/windstille/src/display/text_area.hpp
   trunk/windstille/src/display/vertex_array_drawing_request.cpp
   trunk/windstille/src/display/vertex_array_drawing_request.hpp
   trunk/windstille/src/engine/camera.cpp
   trunk/windstille/src/engine/camera.hpp
   trunk/windstille/src/engine/entity.cpp
   trunk/windstille/src/engine/entity.hpp
   trunk/windstille/src/engine/physics.cpp
   trunk/windstille/src/engine/physics.hpp
   trunk/windstille/src/engine/sector.cpp
   trunk/windstille/src/font/ttf_font.cpp
   trunk/windstille/src/font/ttf_font.hpp
   trunk/windstille/src/gui/automap.cpp
   trunk/windstille/src/gui/automap.hpp
   trunk/windstille/src/gui/button.cpp
   trunk/windstille/src/gui/grid_component.cpp
   trunk/windstille/src/gui/group_component.cpp
   trunk/windstille/src/gui/label.cpp
   trunk/windstille/src/gui/list_view.cpp
   trunk/windstille/src/gui/menu_item.cpp
   trunk/windstille/src/gui/slider.cpp
   trunk/windstille/src/gui/tab_component.cpp
   trunk/windstille/src/hud/controller_help_window.cpp
   trunk/windstille/src/hud/conversation.cpp
   trunk/windstille/src/hud/conversation.hpp
   trunk/windstille/src/hud/dialog_manager.cpp
   trunk/windstille/src/hud/energy_bar.cpp
   trunk/windstille/src/hud/inventory.cpp
   trunk/windstille/src/hud/pda.cpp
   trunk/windstille/src/math/line.cpp
   trunk/windstille/src/math/line.hpp
   trunk/windstille/src/math/origin.cpp
   trunk/windstille/src/math/origin.hpp
   trunk/windstille/src/math/point.hpp
   trunk/windstille/src/math/rect.hpp
   trunk/windstille/src/math/vector.cpp
   trunk/windstille/src/math/vector.hpp
   trunk/windstille/src/navigation/navigation_graph.cpp
   trunk/windstille/src/navigation/navigation_graph.hpp
   trunk/windstille/src/navigation/node.cpp
   trunk/windstille/src/navigation/node.hpp
   trunk/windstille/src/navigation/segment.cpp
   trunk/windstille/src/navigation/segment.hpp
   trunk/windstille/src/navigation/segment_position.cpp
   trunk/windstille/src/navigation/segment_position.hpp
   trunk/windstille/src/objects/background_gradient.cpp
   trunk/windstille/src/objects/bomb.hpp
   trunk/windstille/src/objects/box.cpp
   trunk/windstille/src/objects/elevator.cpp
   trunk/windstille/src/objects/grenade.cpp
   trunk/windstille/src/objects/grenade.hpp
   trunk/windstille/src/objects/hedgehog.cpp
   trunk/windstille/src/objects/laser_pointer.cpp
   trunk/windstille/src/objects/liquid.cpp
   trunk/windstille/src/objects/nightvision.cpp
   trunk/windstille/src/objects/pistol.cpp
   trunk/windstille/src/objects/player.cpp
   trunk/windstille/src/objects/player.hpp
   trunk/windstille/src/objects/scriptable_object.cpp
   trunk/windstille/src/objects/shockwave.cpp
   trunk/windstille/src/objects/shockwave.hpp
   trunk/windstille/src/objects/spider_mine.cpp
   trunk/windstille/src/objects/spider_mine.hpp
   trunk/windstille/src/objects/swarm.cpp
   trunk/windstille/src/objects/swarm.hpp
   trunk/windstille/src/objects/test_object.cpp
   trunk/windstille/src/objects/test_object.hpp
   trunk/windstille/src/objects/vrdummy.cpp
   trunk/windstille/src/particles/deform_drawer.cpp
   trunk/windstille/src/particles/particle_system.cpp
   trunk/windstille/src/particles/spark_drawer.cpp
   trunk/windstille/src/particles/surface_drawer.cpp
   trunk/windstille/src/screen/game_session.cpp
   trunk/windstille/src/screen/geometry_test.cpp
   trunk/windstille/src/screen/geometry_test.hpp
   trunk/windstille/src/screen/navigation_test.cpp
   trunk/windstille/src/screen/navigation_test.hpp
   trunk/windstille/src/screen/particle_viewer.cpp
   trunk/windstille/src/screen/particle_viewer.hpp
   trunk/windstille/src/screen/screen_manager.cpp
   trunk/windstille/src/screen/sprite2dview.cpp
   trunk/windstille/src/screen/sprite2dview.hpp
   trunk/windstille/src/screen/sprite3dview.cpp
   trunk/windstille/src/screen/title_screen.cpp
   trunk/windstille/src/screen/view.cpp
   trunk/windstille/src/screen/view.hpp
   trunk/windstille/src/scripting/game_objects.cpp
   trunk/windstille/src/scripting/interface.cpp
   trunk/windstille/src/sound/sound_manager.cpp
   trunk/windstille/src/sound/sound_manager.hpp
   trunk/windstille/src/sound/sound_source.cpp
   trunk/windstille/src/sound/sound_source.hpp
   trunk/windstille/src/sprite2d/data.cpp
   trunk/windstille/src/sprite2d/data.hpp
   trunk/windstille/src/sprite2d/sprite.cpp
   trunk/windstille/src/sprite2d/sprite.hpp
   trunk/windstille/src/sprite3d/sprite3d.cpp
   trunk/windstille/src/sprite3d/sprite3d.hpp
   trunk/windstille/src/tile/tile_map.cpp
   trunk/windstille/src/tile/tile_map.hpp
   trunk/windstille/src/tile/tile_packer.cpp
   trunk/windstille/src/util/file_reader_impl.hpp
   trunk/windstille/src/util/getter.cpp
   trunk/windstille/src/util/getter.hpp
Log:
Renamed Vector to Vector2f

Modified: trunk/windstille/src/app/console.cpp
===================================================================
--- trunk/windstille/src/app/console.cpp	2009-02-12 16:17:28 UTC (rev 2477)
+++ trunk/windstille/src/app/console.cpp	2009-02-12 16:33:35 UTC (rev 2478)
@@ -167,7 +167,7 @@
           if (buffer[i].display_time > 4.0f && !console.is_active())
             alpha = 1.0f - (buffer[i].display_time - 4.0f);
 
-          Fonts::ttffont->draw(Vector(x_pos, y), buffer[i].message, Color(0.88f, 0.88f, 1.0f, alpha));
+          Fonts::ttffont->draw(Vector2f(x_pos, y), buffer[i].message, Color(0.88f, 0.88f, 1.0f, alpha));
         }
       y -= Fonts::ttffont->get_height() + 2;
     }
@@ -183,7 +183,7 @@
             str += "_";
         }
 
-      Fonts::ttffont->draw(Vector(x_pos, y_pos), "> " + str, Color(1.0f, 1.0f, 1.0f));
+      Fonts::ttffont->draw(Vector2f(x_pos, y_pos), "> " + str, Color(1.0f, 1.0f, 1.0f));
     }
 }
 

Modified: trunk/windstille/src/app/menu_manager.cpp
===================================================================
--- trunk/windstille/src/app/menu_manager.cpp	2009-02-12 16:17:28 UTC (rev 2477)
+++ trunk/windstille/src/app/menu_manager.cpp	2009-02-12 16:33:35 UTC (rev 2478)
@@ -55,7 +55,7 @@
   using namespace gui;
   GUIManager* manager = new GUIManager();
 
-  GroupComponent* group = new GroupComponent(Rectf(Vector(400-250, 300-170), Sizef(500, 340)), 
+  GroupComponent* group = new GroupComponent(Rectf(Vector2f(400-250, 300-170), Sizef(500, 340)), 
                                              "Options",
                                              manager->get_root());
 
@@ -143,7 +143,7 @@
 
   manager->get_root()->add_child(text_group);
 
-  GroupComponent* group = new GroupComponent(Rectf(Vector(400-20, 200), Sizef(250, 254)),
+  GroupComponent* group = new GroupComponent(Rectf(Vector2f(400-20, 200), Sizef(250, 254)),
                                              "",
                                              manager->get_root());
 
@@ -206,12 +206,12 @@
   using namespace gui;
   GUIManager* manager = new GUIManager();
 
-  GroupComponent* group = new GroupComponent(Rectf(Vector(400-200, 300-170), Sizef(400, 300)), 
+  GroupComponent* group = new GroupComponent(Rectf(Vector2f(400-200, 300-170), Sizef(400, 300)), 
                                              "Pause Menu",
                                              manager->get_root());
 
   // Begin Menu
-  MenuComponent* menu = new MenuComponent(Rectf(Vector(400-150, 200), Sizef(300, 500)), true,
+  MenuComponent* menu = new MenuComponent(Rectf(Vector2f(400-150, 200), Sizef(300, 500)), true,
                                           group);
   group->pack(menu);
 
@@ -257,7 +257,7 @@
   using namespace gui;
   GUIManager* manager = new GUIManager();
 
-  GroupComponent* group = new GroupComponent(Rectf(Vector(400-275, 100), Sizef(550, 376)),  // 378
+  GroupComponent* group = new GroupComponent(Rectf(Vector2f(400-275, 100), Sizef(550, 376)),  // 378
                                              "Select Model",
                                              manager->get_root());
 
@@ -300,7 +300,7 @@
   using namespace gui;
   GUIManager* manager = new GUIManager();
 
-  GroupComponent* group = new GroupComponent(Rectf(Vector(400-200, 300-170), Sizef(400, 340)), 
+  GroupComponent* group = new GroupComponent(Rectf(Vector2f(400-200, 300-170), Sizef(400, 340)), 
                                              "Particle Systems",
                                              manager->get_root());
 
@@ -332,7 +332,7 @@
   using namespace gui;
   GUIManager* manager = new GUIManager();
 
-  GroupComponent* group = new GroupComponent(Rectf(Vector(400-200, 300-170), Sizef(400, 340)), 
+  GroupComponent* group = new GroupComponent(Rectf(Vector2f(400-200, 300-170), Sizef(400, 340)), 
                                              "Select Scenario",
                                              manager->get_root());
 
@@ -370,7 +370,7 @@
   using namespace gui;
   GUIManager* manager = new GUIManager();
 
-  GroupComponent* group = new GroupComponent(Rectf(Vector(400-250, 300-170), Sizef(500, 340)), 
+  GroupComponent* group = new GroupComponent(Rectf(Vector2f(400-250, 300-170), Sizef(500, 340)), 
                                              "Debug",
                                              manager->get_root());
 
@@ -405,7 +405,7 @@
   using namespace gui;
   GUIManager* manager = new GUIManager();
 
-  GroupComponent* group = new GroupComponent(Rectf(Vector(400-250, 300-200), Sizef(500, 400)), 
+  GroupComponent* group = new GroupComponent(Rectf(Vector2f(400-250, 300-200), Sizef(500, 400)), 
                                              "Help",
                                              manager->get_root());
 
@@ -445,7 +445,7 @@
   using namespace gui;
   GUIManager* manager = new GUIManager();
 
-  GroupComponent* group = new GroupComponent(Rectf(Vector(400-250, 300-200), Sizef(500, 400)), 
+  GroupComponent* group = new GroupComponent(Rectf(Vector2f(400-250, 300-200), Sizef(500, 400)), 
                                              "Credits",
                                              manager->get_root());
 

Modified: trunk/windstille/src/armature/ipo_curve.cpp
===================================================================
--- trunk/windstille/src/armature/ipo_curve.cpp	2009-02-12 16:17:28 UTC (rev 2477)
+++ trunk/windstille/src/armature/ipo_curve.cpp	2009-02-12 16:33:35 UTC (rev 2478)
@@ -30,8 +30,8 @@
 IpoCurve::evalutate(float x)
 {
   // find bezier points left and right from t
-  Vector left;
-  Vector right;
+  Vector2f left;
+  Vector2f right;
 
   // calculate the value t from x
   float t;

Modified: trunk/windstille/src/armature/ipo_curve.hpp
===================================================================
--- trunk/windstille/src/armature/ipo_curve.hpp	2009-02-12 16:17:28 UTC (rev 2477)
+++ trunk/windstille/src/armature/ipo_curve.hpp	2009-02-12 16:33:35 UTC (rev 2478)
@@ -21,10 +21,10 @@
 
 struct BezierPoint
 {
-  Vector handle_left;
-  Vector handle_right;
+  Vector2f handle_left;
+  Vector2f handle_right;
 
-  Vector pos;
+  Vector2f pos;
 };
 
 /** */

Modified: trunk/windstille/src/armature/mesh.hpp
===================================================================
--- trunk/windstille/src/armature/mesh.hpp	2009-02-12 16:17:28 UTC (rev 2477)
+++ trunk/windstille/src/armature/mesh.hpp	2009-02-12 16:33:35 UTC (rev 2478)
@@ -42,7 +42,7 @@
 {
   Vector3 pos;
   Vector3 normal;
-  Vector  texcoord;
+  Vector2f  texcoord;
 
   Vector3 render_pos;
 

Modified: trunk/windstille/src/collision/collision_data.hpp
===================================================================
--- trunk/windstille/src/collision/collision_data.hpp	2009-02-12 16:17:28 UTC (rev 2477)
+++ trunk/windstille/src/collision/collision_data.hpp	2009-02-12 16:33:35 UTC (rev 2478)
@@ -34,7 +34,7 @@
    * It's the normal vector of the side/face that we collided with. The vector
    * points away from the object we collided with.
    */
-  Vector direction;
+  Vector2f direction;
   
   // size of time frame
   float delta; 

Modified: trunk/windstille/src/collision/collision_engine.cpp
===================================================================
--- trunk/windstille/src/collision/collision_engine.cpp	2009-02-12 16:17:28 UTC (rev 2477)
+++ trunk/windstille/src/collision/collision_engine.cpp	2009-02-12 16:33:35 UTC (rev 2478)
@@ -88,7 +88,7 @@
     }
 }
 
-Vector unstuck_direction(const Rectf &a, const Rectf &b, float delta, float unstuck_velocity)
+Vector2f unstuck_direction(const Rectf &a, const Rectf &b, float delta, float unstuck_velocity)
 {
   // The distance A needs to unstuck from B in the given direction
   float left   = fabsf(a.right - b.left);
@@ -104,23 +104,23 @@
   add = 50;
   //  grace=0;
 
-  Vector dir;
+  Vector2f dir;
 
   if (left < right && left < top && left < bottom)
     {
-      dir = Vector(std::min(left/2 + grace, add), 0);
+      dir = Vector2f(std::min(left/2 + grace, add), 0);
     }
   else if (right < left && right < top && right < bottom)
     {
-      dir = Vector(-std::min(right/2 + grace, add), 0);
+      dir = Vector2f(-std::min(right/2 + grace, add), 0);
     }
   else if (top < left && top < right && top < bottom)
     {
-      dir = Vector( 0, std::min(top/2 + grace, add));
+      dir = Vector2f( 0, std::min(top/2 + grace, add));
     }
   else // (bottom < left && bottom < right && bottom < top)
     {
-      dir = Vector( 0, -std::min(bottom/2 + grace, add));
+      dir = Vector2f( 0, -std::min(bottom/2 + grace, add));
     }
   return dir;
 }
@@ -247,7 +247,7 @@
       target.right += add;
     }
 
-  b.pos = Vector(target.left-b.primitive.left, target.top-b.primitive.top);
+  b.pos = Vector2f(target.left-b.primitive.left, target.top-b.primitive.top);
 }
 
 void
@@ -267,7 +267,7 @@
   rb.top    += b.get_pos().y;
   rb.bottom += b.get_pos().y;
 
-  Vector dir = unstuck_direction (ra, rb, delta, unstuck_velocity);
+  Vector2f dir = unstuck_direction (ra, rb, delta, unstuck_velocity);
 
   if (a.unstuck_movable())
     a.pos -= dir;
@@ -403,7 +403,7 @@
 // LEFT means b1 is left of b2
 CollisionData
 CollisionEngine::collide(const Rectf& b1, const Rectf& b2,
-                         const Vector& b1_v, const Vector& b2_v,
+                         const Vector2f& b1_v, const Vector2f& b2_v,
                          float delta)
 {
   SweepResult result0 = simple_sweep_1d(b1.left, b1.get_width(),  b1_v.x,
@@ -426,12 +426,12 @@
 	      if(b1.left < b2.left)
 		{
 		  result.state=CollisionData::COLLISION;
-		  result.direction=Vector(-1, 0);
+		  result.direction=Vector2f(-1, 0);
 		}
 	      else
 		{
 		  result.state=CollisionData::COLLISION;
-		  result.direction=Vector(1, 0);
+		  result.direction=Vector2f(1, 0);
 		}
 	      result.col_time=result0.t0;
 	    }
@@ -441,12 +441,12 @@
 	      if(b1.top < b2.top)
 		{
 		  result.state=CollisionData::COLLISION;
-		  result.direction=Vector(0, -1);
+		  result.direction=Vector2f(0, -1);
 		}
 	      else
 		{
 		  result.state=CollisionData::COLLISION;
-		  result.direction=Vector(0, 1);
+		  result.direction=Vector2f(0, 1);
 		}
 	      result.col_time=result1.t0;
 	    }
@@ -577,7 +577,7 @@
   assert(a.get_type() == CollisionObject::TILEMAP);
   assert(b.get_type() == CollisionObject::RECTANGLE);
 
-  Vector vel = b.get_velocity() - a.get_velocity();
+  Vector2f vel = b.get_velocity() - a.get_velocity();
 
   if (vel.x == 0.0f && vel.y == 0.0f)
     return result;
@@ -716,9 +716,9 @@
 	      result.col_time = time;
 	      
 	      if (tx < ty)
-		result.direction=Vector(c_sign (vel.x), 0);
+		result.direction=Vector2f(c_sign (vel.x), 0);
 	      else
-		result.direction=Vector(0, c_sign (vel.y));
+		result.direction=Vector2f(0, c_sign (vel.y));
 	      return result;
 	    }
 	}
@@ -730,8 +730,8 @@
   return result;
 }
 
-Vector
-CollisionEngine::raycast(const Vector& pos, float angle)
+Vector2f
+CollisionEngine::raycast(const Vector2f& pos, float angle)
 {
   for(Objects::iterator i = objects.begin(); i != objects.end(); ++i)
     {
@@ -741,7 +741,7 @@
         }
     }
 
-  return Vector(0, 0);
+  return Vector2f(0, 0);
 }
 
 /* EOF */

Modified: trunk/windstille/src/collision/collision_engine.hpp
===================================================================
--- trunk/windstille/src/collision/collision_engine.hpp	2009-02-12 16:17:28 UTC (rev 2477)
+++ trunk/windstille/src/collision/collision_engine.hpp	2009-02-12 16:33:35 UTC (rev 2478)
@@ -46,12 +46,12 @@
   /** Shoots a ray from \a pos into direction \a angle, returns the
       position were the ray collides with the tilemap FIXME: Should be
       extended to handle objects as well */
-  Vector raycast(const Vector& pos, float angle);
+  Vector2f raycast(const Vector2f& pos, float angle);
 private:
   void unstuck(CollisionObject& a, CollisionObject& b, float delta);
   CollisionData collide(CollisionObject& a, CollisionObject& b, float delta);
   CollisionData collide(const Rectf& b1, const Rectf& b2,
-                        const Vector& b1_v, const Vector& b2_v,
+                        const Vector2f& b1_v, const Vector2f& b2_v,
                         float delta);
   CollisionData collide_tilemap(CollisionObject& a, CollisionObject& b, float delta);
 

Modified: trunk/windstille/src/collision/collision_object.cpp
===================================================================
--- trunk/windstille/src/collision/collision_object.cpp	2009-02-12 16:17:28 UTC (rev 2477)
+++ trunk/windstille/src/collision/collision_object.cpp	2009-02-12 16:33:35 UTC (rev 2478)
@@ -34,8 +34,8 @@
   object_type        = RECTANGLE;
   is_unstuckable     = true;
   is_unstuck_movable = true;
-  velocity           = Vector(0,0);
-  pos                = Vector(0,0);
+  velocity           = Vector2f(0,0);
+  pos                = Vector2f(0,0);
   game_object        = game_object;
 
   is_domains    = DOMAIN_PLAYER  | DOMAIN_ENEMY;
@@ -48,8 +48,8 @@
   object_type        = TILEMAP;
   is_unstuckable     = true;
   is_unstuck_movable = false;
-  velocity           = Vector(0,0);
-  pos                = Vector(0,0);
+  velocity           = Vector2f(0,0);
+  pos                = Vector2f(0,0);
   game_object        = 0;
 
   is_domains    = DOMAIN_TILEMAP;
@@ -63,7 +63,7 @@
 void
 CollisionObject::draw(DrawingContext& dc)
 {
-  Vector v = get_pos ();
+  Vector2f v = get_pos ();
   Rectf  r = primitive;
 
   r += v;
@@ -72,9 +72,9 @@
   
   dc.draw_rect(r, Color(0.6f, 0.6f, 0.6f), 100.0f);
   
-  dc.draw_line(Vector(r.left + r.get_width ()/2,
+  dc.draw_line(Vector2f(r.left + r.get_width ()/2,
                       r.top  + r.get_height ()/2),
-               Vector(r.left + r.get_width ()/2  + get_velocity ().x,
+               Vector2f(r.left + r.get_width ()/2  + get_velocity ().x,
                       r.top  + r.get_height ()/2 + get_velocity ().y),
                Color(1.0f, 0, 1.0f), 100.0f);
 }
@@ -85,25 +85,25 @@
 }
 
 void 
-CollisionObject::set_velocity(const Vector &m)
+CollisionObject::set_velocity(const Vector2f &m)
 {
   velocity=m;
 }
 
-Vector
+Vector2f
 CollisionObject::get_pos() const
 {
   return pos;
 }
 
-Vector
+Vector2f
 CollisionObject::get_velocity() const
 {
   return velocity;
 }
 
 void
-CollisionObject::set_pos(const Vector& p)
+CollisionObject::set_pos(const Vector2f& p)
 {
   // FIXME: Do this somewhat more clever to avoid stuck issues
   pos = p;

Modified: trunk/windstille/src/collision/collision_object.hpp
===================================================================
--- trunk/windstille/src/collision/collision_object.hpp	2009-02-12 16:17:28 UTC (rev 2477)
+++ trunk/windstille/src/collision/collision_object.hpp	2009-02-12 16:33:35 UTC (rev 2478)
@@ -45,10 +45,10 @@
   ObjectType object_type;
 
   /// position of the object
-  Vector pos;
+  Vector2f pos;
 
   /// velocity of the object
-  Vector velocity;
+  Vector2f velocity;
 
   GameObject* game_object;
 
@@ -86,8 +86,8 @@
       or deceleration is involved, so the velocity stays constant for
       the CollisionObject unless you change it with a new call to
       set_velocity */
-  void set_velocity(const Vector &v);
-  Vector get_velocity() const;
+  void set_velocity(const Vector2f &v);
+  Vector2f get_velocity() const;
 
   /** Sets the CollisionObject to the given pos, it should only be
       called to set the initial position and *not* to update the
@@ -98,8 +98,8 @@
       probally be changed so that the object is unstuck here without
       affecting other objects and then the real placement position is
       returned */
-  void set_pos(const Vector& p);
-  Vector get_pos() const;
+  void set_pos(const Vector2f& p);
+  Vector2f get_pos() const;
 
   void set_game_object(GameObject* game_object);
   GameObject* get_game_object() const;

Modified: trunk/windstille/src/collision/contact.hpp
===================================================================
--- trunk/windstille/src/collision/contact.hpp	2009-02-12 16:17:28 UTC (rev 2477)
+++ trunk/windstille/src/collision/contact.hpp	2009-02-12 16:33:35 UTC (rev 2478)
@@ -31,7 +31,7 @@
   virtual void update(float delta) =0;
   virtual void advance(float s) =0;
   virtual bool is_active() const =0;
-  virtual Vector get_pos() const =0;
+  virtual Vector2f get_pos() const =0;
 private:
   Contact (const Contact&);
   Contact& operator= (const Contact&);

Modified: trunk/windstille/src/collision/stair_contact.cpp
===================================================================
--- trunk/windstille/src/collision/stair_contact.cpp	2009-02-12 16:17:28 UTC (rev 2477)
+++ trunk/windstille/src/collision/stair_contact.cpp	2009-02-12 16:33:35 UTC (rev 2478)
@@ -99,14 +99,14 @@
     }
 }
 
-Vector
+Vector2f
 StairContact::get_pos() const
 {
   if (tile_type & TILE_RIGHT)
-    return Vector(pos.x * 32 + 16 + 32 * advancement,
+    return Vector2f(pos.x * 32 + 16 + 32 * advancement,
                   pos.y * 32 + 16 + 32 * advancement);
   else // (tile_type & TILE_LEFT)
-    return Vector(pos.x * 32 + 16 + 32 * advancement,
+    return Vector2f(pos.x * 32 + 16 + 32 * advancement,
                   pos.y * 32 + 16 - 32 * advancement);
 }
 

Modified: trunk/windstille/src/collision/stair_contact.hpp
===================================================================
--- trunk/windstille/src/collision/stair_contact.hpp	2009-02-12 16:17:28 UTC (rev 2477)
+++ trunk/windstille/src/collision/stair_contact.hpp	2009-02-12 16:33:35 UTC (rev 2478)
@@ -50,7 +50,7 @@
   void advance(float s);
 
   /** Get the current position in world coordinates */
-  Vector get_pos() const;
+  Vector2f get_pos() const;
 
   /** Return false when the given contact has left the stairs */
   bool is_active() const;

Modified: trunk/windstille/src/display/display.cpp
===================================================================
--- trunk/windstille/src/display/display.cpp	2009-02-12 16:17:28 UTC (rev 2477)
+++ trunk/windstille/src/display/display.cpp	2009-02-12 16:33:35 UTC (rev 2478)
@@ -43,20 +43,20 @@
 void
 Display::draw_segment(const Line& line, const Color& color)
 {
-  Vector normal = (line.p2 - line.p1);
+  Vector2f normal = (line.p2 - line.p1);
 
-  normal = Vector(-normal.y, normal.x);
+  normal = Vector2f(-normal.y, normal.x);
   normal.normalize();
   normal *= -32.0f;
   
-  Vector p3 = line.p1 + 0.5f * (line.p2 - line.p1);
+  Vector2f p3 = line.p1 + 0.5f * (line.p2 - line.p1);
 
   draw_line(line,   color);
   draw_line(p3, p3 + normal, Color(0.0f, 1.0f, 1.0f));
 }
 
 void
-Display::draw_line(const Vector& pos1, const Vector& pos2, const Color& color)
+Display::draw_line(const Vector2f& pos1, const Vector2f& pos2, const Color& color)
 {
   OpenGLState state;
 
@@ -300,7 +300,7 @@
 }
 
 void
-Display::draw_circle(const Vector& pos, float radius, const Color& color, int segments)
+Display::draw_circle(const Vector2f& pos, float radius, const Color& color, int segments)
 {
   assert(segments >= 0);
 
@@ -327,7 +327,7 @@
 }
 
 void
-Display::fill_circle(const Vector& pos, float radius, const Color& color, int segments)
+Display::fill_circle(const Vector2f& pos, float radius, const Color& color, int segments)
 {
   assert(segments >= 0);
 
@@ -354,7 +354,7 @@
 }
 
 void
-Display::draw_arc(const Vector& pos, float radius, float start, float end, const Color& color, int segments)
+Display::draw_arc(const Vector2f& pos, float radius, float start, float end, const Color& color, int segments)
 {
   assert(segments >= 0);
 
@@ -394,7 +394,7 @@
 }
 
 void
-Display::fill_arc(const Vector& pos, float radius, float start, float end, const Color& color, int segments)
+Display::fill_arc(const Vector2f& pos, float radius, float start, float end, const Color& color, int segments)
 {
   assert(segments >= 0);
 

Modified: trunk/windstille/src/display/display.hpp
===================================================================
--- trunk/windstille/src/display/display.hpp	2009-02-12 16:17:28 UTC (rev 2477)
+++ trunk/windstille/src/display/display.hpp	2009-02-12 16:33:35 UTC (rev 2478)
@@ -43,13 +43,13 @@
   static void draw_segment(const Line& line, const Color& color);
 
   static void draw_line(const Line& line, const Color& color);
-  static void draw_line(const Vector& pos1, const Vector& pos2, const Color& color);
+  static void draw_line(const Vector2f& pos1, const Vector2f& pos2, const Color& color);
 
-  static void draw_circle(const Vector& pos, float radius, const Color& color, int segments = 16);
-  static void fill_circle(const Vector& pos, float radius, const Color& color, int segments = 16);
+  static void draw_circle(const Vector2f& pos, float radius, const Color& color, int segments = 16);
+  static void fill_circle(const Vector2f& pos, float radius, const Color& color, int segments = 16);
 
-  static void draw_arc(const Vector& pos, float radius, float start, float end, const Color& color, int segments = 16);
-  static void fill_arc(const Vector& pos, float radius, float start, float end, const Color& color, int segments = 16);
+  static void draw_arc(const Vector2f& pos, float radius, float start, float end, const Color& color, int segments = 16);
+  static void fill_arc(const Vector2f& pos, float radius, float start, float end, const Color& color, int segments = 16);
 
   static int  get_width();
   static int  get_height();

Modified: trunk/windstille/src/display/drawing_context.cpp
===================================================================
--- trunk/windstille/src/display/drawing_context.cpp	2009-02-12 16:17:28 UTC (rev 2477)
+++ trunk/windstille/src/display/drawing_context.cpp	2009-02-12 16:33:35 UTC (rev 2478)
@@ -43,7 +43,7 @@
   Color color;
 public:
   FillScreenDrawingRequest(const Color& color_) 
-    : DrawingRequest(Vector(0, 0), -1000.0f), color(color_)
+    : DrawingRequest(Vector2f(0, 0), -1000.0f), color(color_)
   {
   }
   virtual ~FillScreenDrawingRequest() {}
@@ -62,7 +62,7 @@
 private:
   std::string text;
 public:
-  TextDrawingRequest(const std::string& text_, const Vector& pos_, float z_pos_, const Matrix& modelview_)
+  TextDrawingRequest(const std::string& text_, const Vector2f& pos_, float z_pos_, const Matrix& modelview_)
     : DrawingRequest(pos_, z_pos_, modelview_),
       text(text_)
   {}
@@ -139,7 +139,7 @@
 }
 
 void
-DrawingContext::draw(const Sprite& sprite,  const Vector& pos, float z_pos)
+DrawingContext::draw(const Sprite& sprite,  const Vector2f& pos, float z_pos)
 {
   draw(sprite.get_current_surface(),
        SurfaceDrawingParameters()
@@ -161,14 +161,14 @@
 DrawingContext::draw(Surface surface, float x, float y, float z, float )
 {
   draw(new SurfaceDrawingRequest(surface,
-                                 SurfaceDrawingParameters().set_pos(Vector(x, y)),
+                                 SurfaceDrawingParameters().set_pos(Vector2f(x, y)),
                                  z, modelview_stack.back()));
 }
 
 void
 DrawingContext::draw(const std::string& text, float x, float y, float z)
 { 
-  draw(new TextDrawingRequest(text, Vector(x, y), z, modelview_stack.back()));
+  draw(new TextDrawingRequest(text, Vector2f(x, y), z, modelview_stack.back()));
 }
 
 void
@@ -266,15 +266,15 @@
 DrawingContext::get_clip_rect()
 {
   // FIXME: Need to check the modelview matrix
-  return Rectf(Vector(modelview_stack.back()[12],
+  return Rectf(Vector2f(modelview_stack.back()[12],
                       modelview_stack.back()[13]),
                Sizef(800, 600));
 }
 
 void
-DrawingContext::draw_line(const Vector& pos1, const Vector& pos2, const Color& color, float z_pos)
+DrawingContext::draw_line(const Vector2f& pos1, const Vector2f& pos2, const Color& color, float z_pos)
 {
-  VertexArrayDrawingRequest* array = new VertexArrayDrawingRequest(Vector(0, 0), z_pos, modelview_stack.back());
+  VertexArrayDrawingRequest* array = new VertexArrayDrawingRequest(Vector2f(0, 0), z_pos, modelview_stack.back());
 
   array->set_mode(GL_LINES);
   array->set_blend_func(GL_SRC_ALPHA, GL_ONE_MINUS_SRC_ALPHA);
@@ -291,7 +291,7 @@
 void
 DrawingContext::draw_rect(const Rectf& rect, const Color& color, float z_pos)
 {
-  VertexArrayDrawingRequest* array = new VertexArrayDrawingRequest(Vector(0, 0), z_pos, modelview_stack.back());
+  VertexArrayDrawingRequest* array = new VertexArrayDrawingRequest(Vector2f(0, 0), z_pos, modelview_stack.back());
 
   array->set_mode(GL_LINE_STRIP);
   array->set_blend_func(GL_SRC_ALPHA, GL_ONE_MINUS_SRC_ALPHA);
@@ -317,7 +317,7 @@
 void
 DrawingContext::fill_rect(const Rectf& rect, const Color& color, float z_pos)
 {
-  VertexArrayDrawingRequest* array = new VertexArrayDrawingRequest(Vector(0, 0), z_pos, modelview_stack.back());
+  VertexArrayDrawingRequest* array = new VertexArrayDrawingRequest(Vector2f(0, 0), z_pos, modelview_stack.back());
 
   array->set_mode(GL_QUADS);
   array->set_blend_func(GL_SRC_ALPHA, GL_ONE_MINUS_SRC_ALPHA);

Modified: trunk/windstille/src/display/drawing_context.hpp
===================================================================
--- trunk/windstille/src/display/drawing_context.hpp	2009-02-12 16:17:28 UTC (rev 2477)
+++ trunk/windstille/src/display/drawing_context.hpp	2009-02-12 16:33:35 UTC (rev 2478)
@@ -60,14 +60,14 @@
       queue */
   void fill_screen(const Color& color);
 
-  void draw_line(const Vector& pos1, const Vector& pos2, const Color& color, float z_pos);
+  void draw_line(const Vector2f& pos1, const Vector2f& pos2, const Color& color, float z_pos);
 
   void draw_rect(const Rectf& rect, const Color& color, float z_pos);
   void fill_rect(const Rectf& rect, const Color& color, float z_pos);
 
   /*{ */
   void draw(DrawingRequest* request);
-  void draw(const Sprite&   sprite,  const Vector& pos, float z = 0);
+  void draw(const Sprite&   sprite,  const Vector2f& pos, float z = 0);
   void draw(const std::string& text,    float x, float y, float z = 0);
   void draw(const Surface surface, float x, float y, float z = 0, float alpha = 0);
   void draw(const Surface surface, const SurfaceDrawingParameters& params, float z_pos);

Modified: trunk/windstille/src/display/drawing_request.hpp
===================================================================
--- trunk/windstille/src/display/drawing_request.hpp	2009-02-12 16:17:28 UTC (rev 2477)
+++ trunk/windstille/src/display/drawing_request.hpp	2009-02-12 16:33:35 UTC (rev 2478)
@@ -29,12 +29,12 @@
 class DrawingRequest
 {
 protected:
-  Vector  pos;
+  Vector2f  pos;
   float   z_pos;
   Matrix  modelview;
 
 public:
-  DrawingRequest(const Vector& pos_, float z_pos = 0,  const Matrix& modelview_ = Matrix::identity())
+  DrawingRequest(const Vector2f& pos_, float z_pos = 0,  const Matrix& modelview_ = Matrix::identity())
     : pos(pos_), z_pos(z_pos), modelview(modelview_)
   {}
   virtual ~DrawingRequest() {}

Modified: trunk/windstille/src/display/graphic_context_state.cpp
===================================================================
--- trunk/windstille/src/display/graphic_context_state.cpp	2009-02-12 16:17:28 UTC (rev 2477)
+++ trunk/windstille/src/display/graphic_context_state.cpp	2009-02-12 16:33:35 UTC (rev 2478)
@@ -27,7 +27,7 @@
   int width;
   int height;
   
-  Vector offset;
+  Vector2f offset;
   float zoom;
   float rotation;
 };
@@ -37,7 +37,7 @@
 {
   impl->width  = 1;
   impl->height = 1; 
-  impl->offset = Vector(0,0);
+  impl->offset = Vector2f(0,0);
   impl->zoom   = 1.0f;
   impl->rotation = 0;
 }
@@ -47,7 +47,7 @@
 {  
   impl->width  = w;
   impl->height = h;
-  impl->offset = Vector(0,0); 
+  impl->offset = Vector2f(0,0); 
   impl->zoom   = 1.0f;
   impl->rotation = 0;
 }
@@ -81,28 +81,28 @@
 Rectf
 GraphicContextState::get_clip_rect()
 {
-  return Rectf(Vector(-impl->offset.x,
+  return Rectf(Vector2f(-impl->offset.x,
                          -impl->offset.y),
                Sizef(get_width()  / impl->zoom,
                      get_height() / impl->zoom));
 }
 
 void
-GraphicContextState::set_pos(const Vector& pos)
+GraphicContextState::set_pos(const Vector2f& pos)
 {
   impl->offset.x = -pos.x + (get_width()/2  / impl->zoom);
   impl->offset.y = -pos.y + (get_height()/2 / impl->zoom);
 }
 
-Vector
+Vector2f
 GraphicContextState::get_pos() const
 {
-  return Vector(-impl->offset.x + (get_width()/2  / impl->zoom),
+  return Vector2f(-impl->offset.x + (get_width()/2  / impl->zoom),
                    -impl->offset.y + (get_height()/2  / impl->zoom));
 }
 
 void
-GraphicContextState::set_zoom(const Vector& pos, float z)
+GraphicContextState::set_zoom(const Vector2f& pos, float z)
 {
   float old_zoom = impl->zoom;
   set_zoom(z);
@@ -147,10 +147,10 @@
   impl->offset.y = (get_height() / (2*impl->zoom)) - center_y;
 }
 
-Vector
-GraphicContextState::screen_to_world(const Vector& pos_)
+Vector2f
+GraphicContextState::screen_to_world(const Vector2f& pos_)
 {
-  Vector pos(pos_.x, pos_.y);
+  Vector2f pos(pos_.x, pos_.y);
   float sa = sin(-impl->rotation/180.0f*M_PI);
   float ca = cos(-impl->rotation/180.0f*M_PI);
 
@@ -160,7 +160,7 @@
   pos.x = impl->width/2  + (ca * dx - sa * dy);
   pos.y = impl->height/2 + (sa * dx + ca * dy);
 
-  Vector p((float(pos.x) / impl->zoom) - impl->offset.x, 
+  Vector2f p((float(pos.x) / impl->zoom) - impl->offset.x, 
               (float(pos.y) / impl->zoom) - impl->offset.y);
 
   return p;

Modified: trunk/windstille/src/display/graphic_context_state.hpp
===================================================================
--- trunk/windstille/src/display/graphic_context_state.hpp	2009-02-12 16:17:28 UTC (rev 2477)
+++ trunk/windstille/src/display/graphic_context_state.hpp	2009-02-12 16:33:35 UTC (rev 2478)
@@ -54,19 +54,19 @@
   float get_rotation();
 
   /** Move the center of the visible area to pos */
-  void      set_pos(const Vector& pos);
-  Vector get_pos() const;
+  void      set_pos(const Vector2f& pos);
+  Vector2f get_pos() const;
 
   /** Set zoom to z, while ensuring that the screen position \a pos
       (normaly the position of the mouse pointer) stays in the same
       position even after zoomed in/out */
-  void  set_zoom(const Vector& pos, float z);
+  void  set_zoom(const Vector2f& pos, float z);
   void  set_zoom(float z);
   float get_zoom(); 
 
   void zoom_to (const Rectf& rect);
 
-  Vector screen_to_world(const Vector& pos);
+  Vector2f screen_to_world(const Vector2f& pos);
 
 private:
   boost::shared_ptr<GraphicContextStateImpl> impl;

Modified: trunk/windstille/src/display/surface.cpp
===================================================================
--- trunk/windstille/src/display/surface.cpp	2009-02-12 16:17:28 UTC (rev 2477)
+++ trunk/windstille/src/display/surface.cpp	2009-02-12 16:33:35 UTC (rev 2478)
@@ -112,7 +112,7 @@
 }
 
 void
-Surface::draw(const Vector& pos) const
+Surface::draw(const Vector2f& pos) const
 {
   OpenGLState state;
   state.enable(GL_BLEND);

Modified: trunk/windstille/src/display/surface.hpp
===================================================================
--- trunk/windstille/src/display/surface.hpp	2009-02-12 16:17:28 UTC (rev 2477)
+++ trunk/windstille/src/display/surface.hpp	2009-02-12 16:33:35 UTC (rev 2478)
@@ -58,7 +58,7 @@
   /** Returns texture coordinates for the Surface rectangle */
   Rectf get_uv() const;
 
-  void draw(const Vector& pos) const;
+  void draw(const Vector2f& pos) const;
   void draw(const SurfaceDrawingParameters& params) const;
 
   /** true if the Texture is valid and usable, false if not */

Modified: trunk/windstille/src/display/surface_drawing_parameters.hpp
===================================================================
--- trunk/windstille/src/display/surface_drawing_parameters.hpp	2009-02-12 16:17:28 UTC (rev 2477)
+++ trunk/windstille/src/display/surface_drawing_parameters.hpp	2009-02-12 16:33:35 UTC (rev 2478)
@@ -33,7 +33,7 @@
   GLenum blendfunc_src;
   GLenum blendfunc_dst;
 
-  Vector pos;
+  Vector2f pos;
 
   /** Includes color and alpha settings */
   Color   color;
@@ -47,7 +47,7 @@
     blendfunc_src = GL_SRC_ALPHA;
     blendfunc_dst = GL_ONE_MINUS_SRC_ALPHA;
 
-    pos = Vector(0, 0);
+    pos = Vector2f(0, 0);
     
     color = Color(1.0f, 1.0f, 1.0f, 1.0f);
   
@@ -73,7 +73,7 @@
     return *this; 
   }
 
-  SurfaceDrawingParameters& set_pos(const Vector& p) 
+  SurfaceDrawingParameters& set_pos(const Vector2f& p) 
   { 
     pos = p;
     return *this;

Modified: trunk/windstille/src/display/text_area.cpp
===================================================================
--- trunk/windstille/src/display/text_area.cpp	2009-02-12 16:17:28 UTC (rev 2477)
+++ trunk/windstille/src/display/text_area.cpp	2009-02-12 16:33:35 UTC (rev 2478)
@@ -47,7 +47,7 @@
   bool letter_by_letter;
   bool progress_complete;
   std::vector<TextAreaCommand> commands;
-  Vector cursor_pos;
+  Vector2f cursor_pos;
 };
 
 TextArea::TextArea(const Rectf& rect, bool letter_by_letter)
@@ -358,7 +358,7 @@
   glEnd();
   glPopMatrix();
 
-  impl->cursor_pos = Vector(x_pos + impl->rect.left, y_pos + impl->rect.top);
+  impl->cursor_pos = Vector2f(x_pos + impl->rect.left, y_pos + impl->rect.top);
 }
 
 void
@@ -373,7 +373,7 @@
   return impl->rect;
 }
 
-Vector
+Vector2f
 TextArea::get_cursor_pos() const
 {
   return impl->cursor_pos;

Modified: trunk/windstille/src/display/text_area.hpp
===================================================================
--- trunk/windstille/src/display/text_area.hpp	2009-02-12 16:17:28 UTC (rev 2477)
+++ trunk/windstille/src/display/text_area.hpp	2009-02-12 16:33:35 UTC (rev 2478)
@@ -58,7 +58,7 @@
 
   /** Return the position of the last character in the TextArea,
       usefull to display a blinking cursor or things like that */
-  Vector get_cursor_pos() const;
+  Vector2f get_cursor_pos() const;
 private:
   TextAreaImpl* impl;
 };

Modified: trunk/windstille/src/display/vertex_array_drawing_request.cpp
===================================================================
--- trunk/windstille/src/display/vertex_array_drawing_request.cpp	2009-02-12 16:17:28 UTC (rev 2477)
+++ trunk/windstille/src/display/vertex_array_drawing_request.cpp	2009-02-12 16:33:35 UTC (rev 2478)
@@ -21,7 +21,7 @@
 #include "display/opengl_state.hpp"
 #include "vertex_array_drawing_request.hpp"
 
-VertexArrayDrawingRequest::VertexArrayDrawingRequest(const Vector& pos_, float z_pos_, 
+VertexArrayDrawingRequest::VertexArrayDrawingRequest(const Vector2f& pos_, float z_pos_, 
                                                      const Matrix& modelview_)
   : DrawingRequest(pos_, z_pos_, modelview_)
 {
@@ -99,7 +99,7 @@
 }
 
 void
-VertexArrayDrawingRequest::vertex(const Vector& vec, float z)
+VertexArrayDrawingRequest::vertex(const Vector2f& vec, float z)
 {
   vertex(vec.x, vec.y, z);
 }

Modified: trunk/windstille/src/display/vertex_array_drawing_request.hpp
===================================================================
--- trunk/windstille/src/display/vertex_array_drawing_request.hpp	2009-02-12 16:17:28 UTC (rev 2477)
+++ trunk/windstille/src/display/vertex_array_drawing_request.hpp	2009-02-12 16:33:35 UTC (rev 2478)
@@ -40,13 +40,13 @@
   std::vector<float> vertices;
 
 public:
-  VertexArrayDrawingRequest(const Vector& pos_, float z_pos_, const Matrix& modelview_);
+  VertexArrayDrawingRequest(const Vector2f& pos_, float z_pos_, const Matrix& modelview_);
 
   void draw(const Texture& tmp_texture);
   void draw(int start, int end);
 
   void vertex(float x, float y, float z = 0.0f);
-  void vertex(const Vector& vec, float z = 0.0f);
+  void vertex(const Vector2f& vec, float z = 0.0f);
 
   void texcoord(float u, float v);
   void color(const Color& color);

Modified: trunk/windstille/src/engine/camera.cpp
===================================================================
--- trunk/windstille/src/engine/camera.cpp	2009-02-12 16:17:28 UTC (rev 2477)
+++ trunk/windstille/src/engine/camera.cpp	2009-02-12 16:33:35 UTC (rev 2478)
@@ -83,7 +83,7 @@
         int hscroll_threshold = 100;
         int vscroll_threshold = 150;
 
-        Vector tpos = Player::current()->get_pos();
+        Vector2f tpos = Player::current()->get_pos();
 
         float dist = tpos.x - pos.x;
         if (dist > hscroll_threshold)

Modified: trunk/windstille/src/engine/camera.hpp
===================================================================
--- trunk/windstille/src/engine/camera.hpp	2009-02-12 16:17:28 UTC (rev 2477)
+++ trunk/windstille/src/engine/camera.hpp	2009-02-12 16:33:35 UTC (rev 2478)
@@ -31,11 +31,11 @@
 
   struct PathPoint
   {
-    Vector pos;
+    Vector2f pos;
     float  zoom;
     float  rotation;
 
-    PathPoint(const Vector& pos_, float zoom_, float rotation_ = 0.0f)
+    PathPoint(const Vector2f& pos_, float zoom_, float rotation_ = 0.0f)
       : pos(pos_), zoom(zoom_), rotation(rotation_) {}
 
     bool operator==(const PathPoint& p) {
@@ -50,7 +50,7 @@
    * Position of the camera, ie. where the center of the screen should
    * be located
    */
-  Vector pos;
+  Vector2f pos;
   
   /**
    * Zoom of the Camera, 1.0 means no zoom, 2.0 means everything will
@@ -69,7 +69,7 @@
 
   void   update(float delta);
 
-  Vector get_pos() const { return pos; }
+  Vector2f get_pos() const { return pos; }
   void   set_pos(float x, float y);
 
   void   set_zoom(float zoom_);

Modified: trunk/windstille/src/engine/entity.cpp
===================================================================
--- trunk/windstille/src/engine/entity.cpp	2009-02-12 16:17:28 UTC (rev 2477)
+++ trunk/windstille/src/engine/entity.cpp	2009-02-12 16:33:35 UTC (rev 2478)
@@ -34,7 +34,7 @@
 }
 
 void
-Entity::set_pos(Vector pos)
+Entity::set_pos(Vector2f pos)
 {
   this->pos = pos;
 }

Modified: trunk/windstille/src/engine/entity.hpp
===================================================================
--- trunk/windstille/src/engine/entity.hpp	2009-02-12 16:17:28 UTC (rev 2477)
+++ trunk/windstille/src/engine/entity.hpp	2009-02-12 16:33:35 UTC (rev 2478)
@@ -36,8 +36,8 @@
   bool on_ground() const;
   bool in_wall() const;
   
-  Vector pos;
-  Vector velocity;
+  Vector2f pos;
+  Vector2f velocity;
   bool useable;
   std::string use_verb;
   
@@ -46,10 +46,10 @@
   Entity();
   virtual ~Entity();
    
-  virtual Vector get_pos() const
+  virtual Vector2f get_pos() const
   { return pos; }
 
-  virtual void set_pos(Vector pos);
+  virtual void set_pos(Vector2f pos);
 
   /** Called once per frame to allow the object to draw itself */
   virtual void draw(SceneContext& gc) = 0;

Modified: trunk/windstille/src/engine/physics.cpp
===================================================================
--- trunk/windstille/src/engine/physics.cpp	2009-02-12 16:17:28 UTC (rev 2477)
+++ trunk/windstille/src/engine/physics.cpp	2009-02-12 16:33:35 UTC (rev 2478)
@@ -63,12 +63,12 @@
   // we could calculate this cheaper if we'd do it once for both objects and not
   // each object on it's own...
 
-  Vector other_collision_vel 
+  Vector2f other_collision_vel 
     = data.direction * (other.velocity() * data.direction);
-  Vector collision_vel
+  Vector2f collision_vel
     = data.direction * (velocity() * data.direction);
   
-  Vector new_v = collision_vel * (mass - other.mass);
+  Vector2f new_v = collision_vel * (mass - other.mass);
   new_v += other_collision_vel * (2 * other.mass);
   new_v /= mass + other.mass;
 
@@ -82,7 +82,7 @@
 Physics::bounce_collision(const CollisionData& data)
 {
   printf("bounce collision.\n");
-  Vector collision_vel = data.direction * (velocity() * data.direction);
+  Vector2f collision_vel = data.direction * (velocity() * data.direction);
 
   velocity() -= collision_vel * (1.0 + bounciness);
   //force -= collision_vel * (1.0f + bounciness) * mass / data.delta;
@@ -94,15 +94,15 @@
 Physics::update(float delta)
 {
   // add gravity force (TODO make it configurable per Sector)
-  force += Vector(0, 9.81 * mass);
+  force += Vector2f(0, 9.81 * mass);
 
   //force -= velocity() * air_friction;
   
-  Vector acceleration = force / mass;
+  Vector2f acceleration = force / mass;
   velocity() += acceleration * delta;
   pos() += velocity() * delta;
 
-  force = Vector(0, 0);
+  force = Vector2f(0, 0);
 }
 
 /* EOF */

Modified: trunk/windstille/src/engine/physics.hpp
===================================================================
--- trunk/windstille/src/engine/physics.hpp	2009-02-12 16:17:28 UTC (rev 2477)
+++ trunk/windstille/src/engine/physics.hpp	2009-02-12 16:33:35 UTC (rev 2478)
@@ -31,9 +31,9 @@
   void update(float delta);
   void register_collobj(CollisionObject& object);
 
-  Vector& pos() const
+  Vector2f& pos() const
   { return entity->pos; }
-  Vector& velocity() const
+  Vector2f& velocity() const
   { return entity->velocity; }
 
 private:
@@ -45,7 +45,7 @@
   Entity* entity;
   float mass;
   float bounciness;
-  Vector force;
+  Vector2f force;
   float air_friction;
   float contact_friction;
 };

Modified: trunk/windstille/src/engine/sector.cpp
===================================================================
--- trunk/windstille/src/engine/sector.cpp	2009-02-12 16:17:28 UTC (rev 2477)
+++ trunk/windstille/src/engine/sector.cpp	2009-02-12 16:33:35 UTC (rev 2478)
@@ -85,7 +85,7 @@
     player = new Player();
     add(player);
   }
-  player->set_pos(Vector(300,200));
+  player->set_pos(Vector2f(300,200));
 }
 
 Sector::~Sector()

Modified: trunk/windstille/src/font/ttf_font.cpp
===================================================================
--- trunk/windstille/src/font/ttf_font.cpp	2009-02-12 16:17:28 UTC (rev 2477)
+++ trunk/windstille/src/font/ttf_font.cpp	2009-02-12 16:33:35 UTC (rev 2478)
@@ -177,10 +177,10 @@
 }
 
 void
-TTFFont::draw(const Vector& pos_, const std::string& str, const Color& color)
+TTFFont::draw(const Vector2f& pos_, const std::string& str, const Color& color)
 {
   // FIXME: Little bit hacky to throw it just in
-  Vector pos(static_cast<int>(pos_.x),
+  Vector2f pos(static_cast<int>(pos_.x),
              static_cast<int>(pos_.y));
 
   OpenGLState state;
@@ -221,9 +221,9 @@
 }
 
 void
-TTFFont::draw_center(const Vector& pos, const std::string& str, const Color& color)
+TTFFont::draw_center(const Vector2f& pos, const std::string& str, const Color& color)
 {
-  draw(Vector(pos.x - get_width(str)/2, pos.y), str, color);
+  draw(Vector2f(pos.x - get_width(str)/2, pos.y), str, color);
 }
 
 int

Modified: trunk/windstille/src/font/ttf_font.hpp
===================================================================
--- trunk/windstille/src/font/ttf_font.hpp	2009-02-12 16:17:28 UTC (rev 2477)
+++ trunk/windstille/src/font/ttf_font.hpp	2009-02-12 16:33:35 UTC (rev 2478)
@@ -73,8 +73,8 @@
   Texture get_texture() const;
 
   const TTFCharacter& get_character(int c) const;
-  void draw(const Vector& pos, const std::string& str, const Color& color = Color(1.0f, 1.0f, 1.0f));
-  void draw_center(const Vector& pos, const std::string& str, const Color& color = Color(1.0f, 1.0f, 1.0f));
+  void draw(const Vector2f& pos, const std::string& str, const Color& color = Color(1.0f, 1.0f, 1.0f));
+  void draw_center(const Vector2f& pos, const std::string& str, const Color& color = Color(1.0f, 1.0f, 1.0f));
 
 private:
   TTFFontImpl* impl;

Modified: trunk/windstille/src/gui/automap.cpp
===================================================================
--- trunk/windstille/src/gui/automap.cpp	2009-02-12 16:17:28 UTC (rev 2477)
+++ trunk/windstille/src/gui/automap.cpp	2009-02-12 16:33:35 UTC (rev 2478)
@@ -89,7 +89,7 @@
 {
   Display::push_cliprect(Rect(get_screen_rect()));
   surface.draw(SurfaceDrawingParameters()
-               .set_pos(Vector(rect.left, rect.top) + pos)
+               .set_pos(Vector2f(rect.left, rect.top) + pos)
                .set_color(Color(1.0f, 1.0f, 1.0f, is_active() ? 0.8f : 0.5f))
                .set_scale(zoom));
   Display::pop_cliprect();

Modified: trunk/windstille/src/gui/automap.hpp
===================================================================
--- trunk/windstille/src/gui/automap.hpp	2009-02-12 16:17:28 UTC (rev 2477)
+++ trunk/windstille/src/gui/automap.hpp	2009-02-12 16:33:35 UTC (rev 2478)
@@ -29,7 +29,7 @@
 {
 private:
   Surface surface;
-  Vector  pos;
+  Vector2f  pos;
   float   zoom;
 
 public:

Modified: trunk/windstille/src/gui/button.cpp
===================================================================
--- trunk/windstille/src/gui/button.cpp	2009-02-12 16:17:28 UTC (rev 2477)
+++ trunk/windstille/src/gui/button.cpp	2009-02-12 16:33:35 UTC (rev 2478)
@@ -45,7 +45,7 @@
 {
   Display::fill_rect(rect, Color(0.0f, 0.0f, 0.0f, 0.5f));
   Display::draw_rect(rect, Color(1.0f, 1.0f, 1.0f, 0.5f));
-  Fonts::vera20->draw_center(Vector(rect.left + rect.get_width()/2, rect.top + rect.get_height()/2),
+  Fonts::vera20->draw_center(Vector2f(rect.left + rect.get_width()/2, rect.top + rect.get_height()/2),
                              label,
                              is_active()
                              ? Color(1.0f, 1.0f, 1.0f, 1.0f) 

Modified: trunk/windstille/src/gui/grid_component.cpp
===================================================================
--- trunk/windstille/src/gui/grid_component.cpp	2009-02-12 16:17:28 UTC (rev 2477)
+++ trunk/windstille/src/gui/grid_component.cpp	2009-02-12 16:33:35 UTC (rev 2478)
@@ -215,7 +215,7 @@
           grid(x, y) = ComponentBox(component, Size(colspan, rowspan));
         }
 
-      component->set_screen_rect(Rectf(Vector(rect.left + x * (rect.get_width() /grid.get_width())  + padding,
+      component->set_screen_rect(Rectf(Vector2f(rect.left + x * (rect.get_width() /grid.get_width())  + padding,
                                               rect.top  + y * (rect.get_height()/grid.get_height()) + padding),
                                        Sizef((rect.get_width()/grid.get_width())   * colspan - 2*padding,
                                              (rect.get_height()/grid.get_height()) * rowspan - 2*padding)));

Modified: trunk/windstille/src/gui/group_component.cpp
===================================================================
--- trunk/windstille/src/gui/group_component.cpp	2009-02-12 16:17:28 UTC (rev 2477)
+++ trunk/windstille/src/gui/group_component.cpp	2009-02-12 16:33:35 UTC (rev 2478)
@@ -46,7 +46,7 @@
   if (!title.empty())
     {
       TTFFont* font = Fonts::vera20;
-      font->draw_center(Vector(rect.left + rect.get_width()/2, rect.top + font->get_height() + 5), 
+      font->draw_center(Vector2f(rect.left + rect.get_width()/2, rect.top + font->get_height() + 5), 
                         title, Color(1.0f, 1.0f, 1.0f));
 
       Display::fill_rect(Rectf(rect.left  + 8, rect.top + font->get_height() + 16,

Modified: trunk/windstille/src/gui/label.cpp
===================================================================
--- trunk/windstille/src/gui/label.cpp	2009-02-12 16:17:28 UTC (rev 2477)
+++ trunk/windstille/src/gui/label.cpp	2009-02-12 16:33:35 UTC (rev 2478)
@@ -36,7 +36,7 @@
 {
   //Display::fill_rect(rect, Color(0.0f, 0.0f, 0.0f, 0.5f));
   //Display::draw_rect(rect, Color(1.0f, 1.0f, 1.0f, 0.5f));
-  Fonts::vera12->draw(Vector(rect.left + 5/*+ rect.get_width()/2*/, rect.top + rect.get_height()/2 + 3),
+  Fonts::vera12->draw(Vector2f(rect.left + 5/*+ rect.get_width()/2*/, rect.top + rect.get_height()/2 + 3),
                       label,
                       Color(1.0f, 1.0f, 1.0f, 1.0f));
 }

Modified: trunk/windstille/src/gui/list_view.cpp
===================================================================
--- trunk/windstille/src/gui/list_view.cpp	2009-02-12 16:17:28 UTC (rev 2477)
+++ trunk/windstille/src/gui/list_view.cpp	2009-02-12 16:33:35 UTC (rev 2478)
@@ -45,11 +45,11 @@
   for(int i = 0; i < int(columns.size()); ++i)
     {
       // FIXME: Poor mans outline effect
-      font->draw_center(Vector(x + columns[i].width/2 + 1, y - 1), columns[i].title);
-      font->draw_center(Vector(x + columns[i].width/2 - 1, y - 1), columns[i].title);
-      font->draw_center(Vector(x + columns[i].width/2 + 1, y + 1), columns[i].title);
-      font->draw_center(Vector(x + columns[i].width/2 - 1, y + 1), columns[i].title);
-      font->draw_center(Vector(x + columns[i].width/2, y), columns[i].title, Color(0.0f, 0.0f, 0.0f));
+      font->draw_center(Vector2f(x + columns[i].width/2 + 1, y - 1), columns[i].title);
+      font->draw_center(Vector2f(x + columns[i].width/2 - 1, y - 1), columns[i].title);
+      font->draw_center(Vector2f(x + columns[i].width/2 + 1, y + 1), columns[i].title);
+      font->draw_center(Vector2f(x + columns[i].width/2 - 1, y + 1), columns[i].title);
+      font->draw_center(Vector2f(x + columns[i].width/2, y), columns[i].title, Color(0.0f, 0.0f, 0.0f));
       x += columns[i].width;
     }
 
@@ -66,7 +66,7 @@
           
       for(int i = 0; i < int(items[j].columns.size()) && i < int(columns.size()); ++i)
         {
-          font->draw(Vector(x + padding, y), items[j].columns[i]);
+          font->draw(Vector2f(x + padding, y), items[j].columns[i]);
             
           x += columns[i].width;
         }

Modified: trunk/windstille/src/gui/menu_item.cpp
===================================================================
--- trunk/windstille/src/gui/menu_item.cpp	2009-02-12 16:17:28 UTC (rev 2477)
+++ trunk/windstille/src/gui/menu_item.cpp	2009-02-12 16:33:35 UTC (rev 2478)
@@ -46,7 +46,7 @@
     font_color = Color(0.75f, 0.75f, 0.75f, 1.0f);
   }
 
-  font->draw(Vector(rect.left + font->get_height(), rect.top + font->get_height()/2.0f + rect.get_height()/2.0f - 2.0f),
+  font->draw(Vector2f(rect.left + font->get_height(), rect.top + font->get_height()/2.0f + rect.get_height()/2.0f - 2.0f),
              label, font_color);
 }
 
@@ -109,7 +109,7 @@
       font_color = Color(0.75f, 0.75f, 0.75f, 1.0f);
     }
 
-  font->draw(Vector(rect.right - font->get_height() - font->get_width(labels[index].label),
+  font->draw(Vector2f(rect.right - font->get_height() - font->get_width(labels[index].label),
                     rect.top + font->get_height()/2.0f + rect.get_height()/2.0f - 2.0f),
              labels[index].label,
              font_color);
@@ -171,13 +171,13 @@
       color = Color(0.75f, 0.75f, 0.75f, 1.0f);
     }
 
-  Display::fill_rounded_rect(Rectf(Vector(rect.right - 4 - total_width, rect.top + 4),
+  Display::fill_rounded_rect(Rectf(Vector2f(rect.right - 4 - total_width, rect.top + 4),
                                    Sizef(width, rect.get_height() - 8)), 
                              5.0f,
                              Color(0.75f*color.r, 0.75f*color.g, 0.75f*color.b, color.a));
 
 
-  Display::draw_rounded_rect(Rectf(Vector(rect.right - 4 - total_width, rect.top + 4),
+  Display::draw_rounded_rect(Rectf(Vector2f(rect.right - 4 - total_width, rect.top + 4),
                                    Sizef(total_width, rect.get_height() - 8)), 
                              5.0f,
                              color);

Modified: trunk/windstille/src/gui/slider.cpp
===================================================================
--- trunk/windstille/src/gui/slider.cpp	2009-02-12 16:17:28 UTC (rev 2477)
+++ trunk/windstille/src/gui/slider.cpp	2009-02-12 16:33:35 UTC (rev 2478)
@@ -69,7 +69,7 @@
   Display::draw_rect(rect, Color(1.0f, 1.0f, 1.0f, 0.5f));
   
   int width = 30;
-  Rectf slider_rect(Vector(rect.left + (rect.get_width()-width) * ((pos-min)/float(max - min)),
+  Rectf slider_rect(Vector2f(rect.left + (rect.get_width()-width) * ((pos-min)/float(max - min)),
                            rect.top + 2),
                     Sizef(width, rect.get_height()-4));
   if (is_active())

Modified: trunk/windstille/src/gui/tab_component.cpp
===================================================================
--- trunk/windstille/src/gui/tab_component.cpp	2009-02-12 16:17:28 UTC (rev 2477)
+++ trunk/windstille/src/gui/tab_component.cpp	2009-02-12 16:33:35 UTC (rev 2478)
@@ -48,7 +48,7 @@
   float tab_width = rect.get_width()/tabs.size();
   for(int i = 0; i != int(tabs.size()); ++i)
     {
-      Rectf tab_rect(Vector(rect.left + tab_width * i + 10,
+      Rectf tab_rect(Vector2f(rect.left + tab_width * i + 10,
                             rect.top),
                      Sizef(tab_width - 20, Fonts::vera20->get_height() + 6));
 
@@ -59,7 +59,7 @@
 
       Display::draw_rounded_rect(tab_rect, 5.0f, Color(1.0f, 1.0f, 1.0f, 0.5f));
 
-      Fonts::vera20->draw_center(Vector(rect.left + tab_width * i + tab_width/2,
+      Fonts::vera20->draw_center(Vector2f(rect.left + tab_width * i + tab_width/2,
                                         rect.top + Fonts::vera20->get_height()),
                                  tabs[i].label,
                                  tabs[current_tab].component->is_active()

Modified: trunk/windstille/src/hud/controller_help_window.cpp
===================================================================
--- trunk/windstille/src/hud/controller_help_window.cpp	2009-02-12 16:17:28 UTC (rev 2477)
+++ trunk/windstille/src/hud/controller_help_window.cpp	2009-02-12 16:33:35 UTC (rev 2478)
@@ -68,13 +68,13 @@
 
   Controller controller = InputManager::get_controller();
   
-  Rectf crect(Vector(rect.right - 100, rect.top - 100 - 8.0f),
+  Rectf crect(Vector2f(rect.right - 100, rect.top - 100 - 8.0f),
               Size(100, 100));
 
   Display::fill_rounded_rect(crect, 10.0f, Color(1.0f, 1.0f, 1.0f, 0.2f));
   Display::draw_rounded_rect(crect, 10.0f, Color(1.0f, 1.0f, 1.0f, 0.5f));
 
-  Vector pos(crect.left + crect.get_width()/2  + controller.get_axis_state(X_AXIS) * (crect.get_width()-16.0f)/2,
+  Vector2f pos(crect.left + crect.get_width()/2  + controller.get_axis_state(X_AXIS) * (crect.get_width()-16.0f)/2,
              crect.top  + crect.get_height()/2 + controller.get_axis_state(Y_AXIS)   * (crect.get_width()-16.0f)/2);
 
   Display::fill_circle(pos, 10.0f, Color(0.8f, 0, 0));
@@ -84,16 +84,16 @@
     {
       if (controller.get_button_state(i))
         {
-          Display::fill_circle(Vector(crect.left - 16.0f, crect.top + (crect.get_height()-20)/3 * i + 10.0f),
+          Display::fill_circle(Vector2f(crect.left - 16.0f, crect.top + (crect.get_height()-20)/3 * i + 10.0f),
                                10.0f, Color(0.8f, 0, 0));
-          Display::draw_circle(Vector(crect.left - 16.0f, crect.top + (crect.get_height()-20)/3 * i + 10.0f),
+          Display::draw_circle(Vector2f(crect.left - 16.0f, crect.top + (crect.get_height()-20)/3 * i + 10.0f),
                                10.0f, Color(1.0f, 0.0f, 0.0f));
         }
       else
         {
-          Display::fill_circle(Vector(crect.left - 16.0f, crect.top + (crect.get_height()-20)/3 * i + 10.0f),
+          Display::fill_circle(Vector2f(crect.left - 16.0f, crect.top + (crect.get_height()-20)/3 * i + 10.0f),
                                10.0f, Color(1.0f, 1.0f, 1.0f, 0.2f));
-          Display::draw_circle(Vector(crect.left - 16.0f, crect.top + (crect.get_height()-20)/3 * i + 10.0f),
+          Display::draw_circle(Vector2f(crect.left - 16.0f, crect.top + (crect.get_height()-20)/3 * i + 10.0f),
                                10.0f,  Color(1.0f, 1.0f, 1.0f, 0.5f));
         }
     }

Modified: trunk/windstille/src/hud/conversation.cpp
===================================================================
--- trunk/windstille/src/hud/conversation.cpp	2009-02-12 16:17:28 UTC (rev 2477)
+++ trunk/windstille/src/hud/conversation.cpp	2009-02-12 16:33:35 UTC (rev 2478)
@@ -72,7 +72,7 @@
 
   for(int i = 0; i < choices.size(); ++i)
     { // FIXME:
-      Vector offset(0.0f, 1.0f);
+      Vector2f offset(0.0f, 1.0f);
       offset = offset.rotate(math::deg2rad(segment*i) - M_PI/2);
 
       float start = -segment/2 - 90.0f + segment*i;
@@ -80,11 +80,11 @@
       
       float distance = 160.0f;
 
-      Vector textpos = pos + Vector(0, 16.0f);
+      Vector2f textpos = pos + Vector2f(0, 16.0f);
       // FIXME: Doesn't handle multi line text
       Sizef size(Fonts::vera20->get_width(choices[i].topic) + 50,
                  Fonts::vera20->get_height() + 30);
-      Rectf  rect(textpos + distance * offset - Vector(size.width/2, size.height - 15), size);
+      Rectf  rect(textpos + distance * offset - Vector2f(size.width/2, size.height - 15), size);
 
       if (i == selection)
         {
@@ -92,17 +92,17 @@
           
           Display::fill_arc(pos, 42.0f, start, end, Color(1.0f, 1.0f, 1.0f, 0.5f), 24);
           Display::fill_rounded_rect(rect, 5.0f, Color(0.5f, 0.5f, 0.5f, 0.75f));
-          Fonts::vera20->draw_center(Vector(textpos.x + distance * offset.x,
+          Fonts::vera20->draw_center(Vector2f(textpos.x + distance * offset.x,
                                             textpos.y + distance * offset.y), 
                                      choices[i].topic, Color(1.0f, 1.0f, 1.0f));
 
-          Fonts::vera20->draw_center(Vector(400, 600 - 64),
+          Fonts::vera20->draw_center(Vector2f(400, 600 - 64),
                                      choices[i].text, Color(1.0f, 1.0f, 1.0f));
         }
       else
         {
           Display::fill_rounded_rect(rect, 5.0f, Color(0.25f, 0.25f, 0.25f, 0.75f));
-          Fonts::vera20->draw_center(Vector(textpos.x + distance * offset.x,
+          Fonts::vera20->draw_center(Vector2f(textpos.x + distance * offset.x,
                                             textpos.y + distance * offset.y),
                                      choices[i].topic, Color(0.5f, 0.5f, 0.5f));
         }
@@ -130,7 +130,7 @@
 
   grow = fabs(sinf(time * 3.0f)) * 4.0f;
 
-  direction = Vector(controller.get_axis_state(X_AXIS),
+  direction = Vector2f(controller.get_axis_state(X_AXIS),
                      controller.get_axis_state(Y_AXIS));
 
   if (fabs(controller.get_axis_state(X_AXIS)) > 0.3f ||

Modified: trunk/windstille/src/hud/conversation.hpp
===================================================================
--- trunk/windstille/src/hud/conversation.hpp	2009-02-12 16:17:28 UTC (rev 2477)
+++ trunk/windstille/src/hud/conversation.hpp	2009-02-12 16:33:35 UTC (rev 2478)
@@ -28,8 +28,8 @@
 class Conversation : public Screen
 {
 private:
-  Vector pos;
-  Vector direction;
+  Vector2f pos;
+  Vector2f direction;
   bool   active;
   int    selection;
   float  grow;

Modified: trunk/windstille/src/hud/dialog_manager.cpp
===================================================================
--- trunk/windstille/src/hud/dialog_manager.cpp	2009-02-12 16:17:28 UTC (rev 2477)
+++ trunk/windstille/src/hud/dialog_manager.cpp	2009-02-12 16:33:35 UTC (rev 2478)
@@ -99,7 +99,7 @@
     Display::draw_rounded_rect(rect, 16.0f,
                                Color(0.6f, 1.0f, 1.0f, 0.8f));
   
-    portrait.draw(Vector(pos.x + portrait_border_x,
+    portrait.draw(Vector2f(pos.x + portrait_border_x,
                          pos.y + portrait_border_y));
   }
   
@@ -107,7 +107,7 @@
 
   if (text_area->is_progress_complete())
     {
-      const Vector& pos = text_area->get_cursor_pos();
+      const Vector2f& pos = text_area->get_cursor_pos();
       Rectf cursor(pos.x + 8, pos.y + 8, pos.x + 24, pos.y + 24);
       Display::fill_rect(cursor, Color(1.0, 1.0, 1.0, fabs(sin(SDL_GetTicks() / 1000.0f * M_PI * 3.0f))));
     }

Modified: trunk/windstille/src/hud/energy_bar.cpp
===================================================================
--- trunk/windstille/src/hud/energy_bar.cpp	2009-02-12 16:17:28 UTC (rev 2477)
+++ trunk/windstille/src/hud/energy_bar.cpp	2009-02-12 16:33:35 UTC (rev 2478)
@@ -41,13 +41,13 @@
       float green = (i/float(max_energy));
       Sprite sprite = bar;
       sprite.set_color(Color(red, green, 0, 1.0f));
-      sprite.draw(Vector(15 + (i * 10), 15));
+      sprite.draw(Vector2f(15 + (i * 10), 15));
     }
 
   for(int i = energy; i < max_energy; ++i)
     {
       bar.set_color(Color(.5f, .5f, .5f, .5f));
-      bar.draw(Vector(15 + (i * 10), 15));
+      bar.draw(Vector2f(15 + (i * 10), 15));
     }
 }
 

Modified: trunk/windstille/src/hud/inventory.cpp
===================================================================
--- trunk/windstille/src/hud/inventory.cpp	2009-02-12 16:17:28 UTC (rev 2477)
+++ trunk/windstille/src/hud/inventory.cpp	2009-02-12 16:33:35 UTC (rev 2478)
@@ -89,7 +89,7 @@
 void
 InventoryImpl::draw()
 {
-  Vector pos = Vector(400, 300); // View::current()->screen_Player::currently->get_pos();
+  Vector2f pos = Vector2f(400, 300); // View::current()->screen_Player::currently->get_pos();
 
   int num_items = items.size();
   float step_angle = (2*M_PI) / num_items;
@@ -97,19 +97,19 @@
   for(int i = 0; i < int(items.size()); ++i)
     {
       const InventoryItem& item = items[(i+current_item)%items.size()];
-      Vector draw_pos = pos + Vector(128, 0).rotate(step_angle * i - M_PI/2 + add_angle);
+      Vector2f draw_pos = pos + Vector2f(128, 0).rotate(step_angle * i - M_PI/2 + add_angle);
 
       if (i == 0 && moving == 0)
         {
           slothighlight.draw(draw_pos);
-          Fonts::vera20->draw_center(Vector(draw_pos.x, draw_pos.y - 64), item.name);
+          Fonts::vera20->draw_center(Vector2f(draw_pos.x, draw_pos.y - 64), item.name);
         }
       else
         {
           slot.draw(draw_pos);
         }
 
-      item.sprite.draw(draw_pos - Vector(32,32));
+      item.sprite.draw(draw_pos - Vector2f(32,32));
     }
 }
 

Modified: trunk/windstille/src/hud/pda.cpp
===================================================================
--- trunk/windstille/src/hud/pda.cpp	2009-02-12 16:17:28 UTC (rev 2477)
+++ trunk/windstille/src/hud/pda.cpp	2009-02-12 16:33:35 UTC (rev 2478)
@@ -52,7 +52,7 @@
 
       Rectf rect = text_area->get_rect().grow(8.0f);
 
-      background.draw(Vector(30, 30));
+      background.draw(Vector2f(30, 30));
       
       rect.top += 56;
       Display::fill_rounded_rect(rect, 16.0f, Color(0.3f, 0.3f, 0.5f, 0.5f));

Modified: trunk/windstille/src/math/line.cpp
===================================================================
--- trunk/windstille/src/math/line.cpp	2009-02-12 16:17:28 UTC (rev 2477)
+++ trunk/windstille/src/math/line.cpp	2009-02-12 16:33:35 UTC (rev 2478)
@@ -19,8 +19,8 @@
 #include <iostream>
 #include "line.hpp"
 
-Line::Line(const Vector& p1_,
-           const Vector& p2_)
+Line::Line(const Vector2f& p1_,
+           const Vector2f& p2_)
   : p1(p1_), p2(p2_)
 {
 }
@@ -63,7 +63,7 @@
 }
 
 bool
-Line::intersect(const Line& line, Vector& colpos) const
+Line::intersect(const Line& line, Vector2f& colpos) const
 {
   float ua, ub;
   bool do_collide = intersect(line, ua, ub);
@@ -74,7 +74,7 @@
 }
 
 float
-Line::distance(const Vector& p3) const
+Line::distance(const Vector2f& p3) const
 {
   const float& x1 = p1.x;
   const float& y1 = p1.y;
@@ -99,7 +99,7 @@
     }
   else // (u >= 0.0f && u <= 1.0f)
     {
-      Vector p4(x1 + u * (x2 - x1),
+      Vector2f p4(x1 + u * (x2 - x1),
                 y1 + u * (y2 - y1));
 
       return (p4 - p3).length();

Modified: trunk/windstille/src/math/line.hpp
===================================================================
--- trunk/windstille/src/math/line.hpp	2009-02-12 16:17:28 UTC (rev 2477)
+++ trunk/windstille/src/math/line.hpp	2009-02-12 16:33:35 UTC (rev 2478)
@@ -26,13 +26,13 @@
 {
 private:
 public:
-  Vector p1;
-  Vector p2;
+  Vector2f p1;
+  Vector2f p2;
 
   Line() {}
   
-  Line(const Vector& p1,
-       const Vector& p2);  
+  Line(const Vector2f& p1,
+       const Vector2f& p2);  
   
   float length() const;
 
@@ -43,10 +43,10 @@
   bool intersect(const Line& line_b, float& ua, float& ub) const;
 
   /** Calculate if and where two lines intersect */
-  bool intersect(const Line& line, Vector& colpos) const;
+  bool intersect(const Line& line, Vector2f& colpos) const;
 
   /** Calculate the minimal distance between this line and the point p */
-  float distance(const Vector& p) const;
+  float distance(const Vector2f& p) const;
 };
 
 #endif

Modified: trunk/windstille/src/math/origin.cpp
===================================================================
--- trunk/windstille/src/math/origin.cpp	2009-02-12 16:17:28 UTC (rev 2477)
+++ trunk/windstille/src/math/origin.cpp	2009-02-12 16:33:35 UTC (rev 2478)
@@ -64,37 +64,37 @@
 	}
 }
 
-Vector calc_origin(Origin origin, const Sizef &size)
+Vector2f calc_origin(Origin origin, const Sizef &size)
 {
 	switch(origin)
 	{
 	case origin::top_left:
 	default:
-		return Vector(0, 0);
+		return Vector2f(0, 0);
 		break;
 	case origin::top_center:
-		return Vector(size.width / 2, 0);
+		return Vector2f(size.width / 2, 0);
 		break;
 	case origin::top_right:
-		return Vector(size.width, 0);
+		return Vector2f(size.width, 0);
 		break;
 	case origin::center_left:
-		return Vector(0, size.height / 2);
+		return Vector2f(0, size.height / 2);
 		break;
 	case origin::center:
-		return Vector(size.width / 2, size.height / 2);
+		return Vector2f(size.width / 2, size.height / 2);
 		break;
 	case origin::center_right:
-		return Vector(size.width, size.height / 2);
+		return Vector2f(size.width, size.height / 2);
 		break;
 	case origin::bottom_left:
-		return Vector(0, size.height);
+		return Vector2f(0, size.height);
 		break;
 	case origin::bottom_center:
-		return Vector(size.width / 2, size.height);
+		return Vector2f(size.width / 2, size.height);
 		break;
 	case origin::bottom_right:
-		return Vector(size.width, size.height);
+		return Vector2f(size.width, size.height);
 		break;
 	}
 }

Modified: trunk/windstille/src/math/origin.hpp
===================================================================
--- trunk/windstille/src/math/origin.hpp	2009-02-12 16:17:28 UTC (rev 2477)
+++ trunk/windstille/src/math/origin.hpp	2009-02-12 16:33:35 UTC (rev 2478)
@@ -64,6 +64,6 @@
 //- !group=Display/Display 2D!
 //- !header=display.h!
 Point  calc_origin(Origin origin, const Size &size);
-Vector calc_origin(Origin origin, const Sizef &size);
+Vector2f calc_origin(Origin origin, const Sizef &size);
 
 #endif

Modified: trunk/windstille/src/math/point.hpp
===================================================================
--- trunk/windstille/src/math/point.hpp	2009-02-12 16:17:28 UTC (rev 2477)
+++ trunk/windstille/src/math/point.hpp	2009-02-12 16:33:35 UTC (rev 2478)
@@ -40,7 +40,7 @@
 #include <cmath>
 #include "vector.hpp"
 
-class Vector;
+class Vector2f;
 
 //: 2D (x,y) point structure.
 //- !group=Core/Math!
@@ -62,7 +62,7 @@
 	Point(const Point &p)
 	{ x = p.x; y = p.y; }
 
-	explicit Point(const Vector& p);
+	explicit Point(const Vector2f& p);
 
 // Operations:
 public:
@@ -138,7 +138,7 @@
 	int y;
 };
 
-inline Point::Point(const Vector& p)
+inline Point::Point(const Vector2f& p)
   : x(static_cast<int>(p.x)),
     y(static_cast<int>(p.y))
 {}

Modified: trunk/windstille/src/math/rect.hpp
===================================================================
--- trunk/windstille/src/math/rect.hpp	2009-02-12 16:17:28 UTC (rev 2477)
+++ trunk/windstille/src/math/rect.hpp	2009-02-12 16:33:35 UTC (rev 2478)
@@ -223,7 +223,7 @@
 	Rectf(float new_left, float new_top, float new_right, float new_bottom)
 	{ left = new_left; top = new_top; right = new_right; bottom = new_bottom; }
 
-	Rectf(const Vector &p, const Sizef &size)
+	Rectf(const Vector2f &p, const Sizef &size)
 	{ left = p.x; top = p.y; right = left + size.width; bottom = top + size.height; }
 
 	Rectf(const Rectf &rect)
@@ -238,11 +238,11 @@
 	{ left -= r.left; top -= r.top; right -= r.right; bottom -= r.bottom; return *this; }
 	
 	//: Rect += Point operator.
-	Rectf &operator+=(const Vector &p)
+	Rectf &operator+=(const Vector2f &p)
 	{ left += p.x; top += p.y; right += p.x; bottom += p.y; return *this; }
 
 	//: Rect -= Point operator.
-	Rectf &operator-=(const Vector &p)
+	Rectf &operator-=(const Vector2f &p)
 	{ left -= p.x; top -= p.y; right -= p.x; bottom -= p.y; return *this; }
 
 	//: Rect + Rect operator.
@@ -254,11 +254,11 @@
 	{ return Rectf(left - r.left, top - r.top, right - r.right, bottom - r.bottom); }
 
 	//: Rect + Point operator.
-	Rectf operator+(const Vector &p) const
+	Rectf operator+(const Vector2f &p) const
 	{ return Rectf(left + p.x, top + p.y, right + p.x, bottom + p.y); }
 
 	//: Rect - Point operator.
-	Rectf operator-(const Vector &p) const
+	Rectf operator-(const Vector2f &p) const
 	{ return Rectf(left - p.x, top - p.y, right - p.x, bottom - p.y); }
 
 	//: Rect == Rect operator.
@@ -293,7 +293,7 @@
 	Sizef get_size() const { return Sizef(right - left, bottom - top); }
 	
 	//: Returns true if point is inside the rectangle.
-	bool is_inside(const Vector &p) const { return (p.x >= left && p.y >= top && p.x <= right && p.y <= bottom); }
+	bool is_inside(const Vector2f &p) const { return (p.x >= left && p.y >= top && p.x <= right && p.y <= bottom); }
 	
 	//: Returns true if rectangle passed is overlapping or inside this rectangle.
 	bool is_overlapped(const Rectf &r) const 
@@ -344,7 +344,7 @@
 	//param x, y: Offsets applied negatively to each corner of the rectangle
 	void apply_alignment(Origin origin, float x, float y)
 	{
-		Vector offset = calc_origin(origin, get_size());
+		Vector2f offset = calc_origin(origin, get_size());
 		offset.x -= x;
 		offset.y -= y;
 		

Modified: trunk/windstille/src/math/vector.cpp
===================================================================
--- trunk/windstille/src/math/vector.cpp	2009-02-12 16:17:28 UTC (rev 2477)
+++ trunk/windstille/src/math/vector.cpp	2009-02-12 16:33:35 UTC (rev 2478)
@@ -20,60 +20,60 @@
 #include "math/vector.hpp"
 
 void
-Vector::normalize()
+Vector2f::normalize()
 {
   float mag = magnitude();
   x /= mag;
   y /= mag;
 }
 
-Vector Vector::unit() const
+Vector2f Vector2f::unit() const
 {
   return *this / magnitude();
 }
 
 float
-Vector::magnitude() const
+Vector2f::magnitude() const
 {
   return sqrt(x*x + y*y);
 }
 
-Vector
-Vector::rotate(float angle) const
+Vector2f
+Vector2f::rotate(float angle) const
 {
   float len = magnitude();
-  return Vector(len * cos(angle), len * sin(angle));
+  return Vector2f(len * cos(angle), len * sin(angle));
 }
 
-Vector
-Vector::project(const Vector& b)
+Vector2f
+Vector2f::project(const Vector2f& b)
 {
   float dp = this->dot(b);
-  return Vector((dp / (b.x*b.x + b.y*b.y) ) * b.x,
+  return Vector2f((dp / (b.x*b.x + b.y*b.y) ) * b.x,
                 (dp / (b.x*b.x + b.y*b.y) ) * b.y);
 }
 
 float
-Vector::dot(const Vector& b)
+Vector2f::dot(const Vector2f& b)
 {
   return (x * b.x + y * b.y);
 }
 
 bool
-Vector::is_null() const
+Vector2f::is_null() const
 {
   return (x == 0.0f && y == 0.0f);
 }
 
-std::ostream& operator<<(std::ostream& s, const Vector& v)
+std::ostream& operator<<(std::ostream& s, const Vector2f& v)
 {
   s << "(" << v.x << ", " << v.y << ")";
   return s;
 }
 
-Vector operator*(float s, const Vector& v)
+Vector2f operator*(float s, const Vector2f& v)
 {
-  return Vector(v.x * s, v.y * s);
+  return Vector2f(v.x * s, v.y * s);
 }
 
 /* EOF */

Modified: trunk/windstille/src/math/vector.hpp
===================================================================
--- trunk/windstille/src/math/vector.hpp	2009-02-12 16:17:28 UTC (rev 2477)
+++ trunk/windstille/src/math/vector.hpp	2009-02-12 16:33:35 UTC (rev 2478)
@@ -21,83 +21,83 @@
 #include <iosfwd>
 
 /** Simple two dimensional vector. */
-class Vector
+class Vector2f
 {
 public:
-  Vector(float nx, float ny)
+  Vector2f(float nx, float ny)
       : x(nx), y(ny)
   { }
-  Vector(const Vector& other)
+  Vector2f(const Vector2f& other)
       : x(other.x), y(other.y)
   { }
-  Vector()
+  Vector2f()
       : x(0), y(0)
   { }
 
-  bool operator ==(const Vector& other) const
+  bool operator ==(const Vector2f& other) const
     {
       return x == other.x && y == other.y;
     }
 
-  bool operator !=(const Vector& other) const
+  bool operator !=(const Vector2f& other) const
     {
       return !(x == other.x && y == other.y);
     }
 
-  const Vector& operator=(const Vector& other)
+  const Vector2f& operator=(const Vector2f& other)
   {
     x = other.x;
     y = other.y;
     return *this;
   }
 
-  Vector operator+(const Vector& other) const
+  Vector2f operator+(const Vector2f& other) const
     {
-      return Vector(x + other.x, y + other.y);
+      return Vector2f(x + other.x, y + other.y);
     }
 
-  Vector operator-(const Vector& other) const
+  Vector2f operator-(const Vector2f& other) const
     {
-      return Vector(x - other.x, y - other.y);
+      return Vector2f(x - other.x, y - other.y);
     }
 
-  Vector operator*(float s) const
+  Vector2f operator*(float s) const
     {
-      return Vector(x * s, y * s);
+      return Vector2f(x * s, y * s);
     }
 
-  Vector operator/(float s) const
+  Vector2f operator/(float s) const
     {
-      return Vector(x / s, y / s);
+      return Vector2f(x / s, y / s);
     }
 
-  Vector operator-() const
+  Vector2f operator-() const
     {
-      return Vector(-x, -y);
+      return Vector2f(-x, -y);
     }
 
-  const Vector& operator +=(const Vector& other)
+  const Vector2f& operator +=(const Vector2f& other)
   {
     x += other.x;
     y += other.y;
     return *this;
   }
 
-  const Vector& operator -=(const Vector& other)
+  const Vector2f& operator -=(const Vector2f& other)
   {
     x -= other.x;
     y -= other.y;
     return *this;
   }
 
-  const Vector& operator *=(float val)
+  const Vector2f& operator *=(float val)
   {
     x *= val;
     y *= val;
     return *this;
   }
 
-  const Vector& operator /=(float val)
+  const Vector2f& operator /=(float val)
   {
     x /= val;
     y /= val;
@@ -106,24 +106,24 @@
 
   /** Takes angle in radian and returns a copy of the vector rotated
       by \a angle */
-  Vector rotate(float angle) const;
+  Vector2f rotate(float angle) const;
 
   /// Scalar product of 2 vectors
-  float operator*(const Vector& other) const
+  float operator*(const Vector2f& other) const
     {
       return x*other.x + y*other.y;
     }
 
   /** Project vecter a onto vector b and return the resulting vector */
-  Vector project(const Vector& b);
+  Vector2f project(const Vector2f& b);
 
   float magnitude() const;
   float length() const { return magnitude(); }
 
-  Vector unit() const;
+  Vector2f unit() const;
   void   normalize();
 
-  float dot(const Vector& b);
+  float dot(const Vector2f& b);
 
   bool is_null() const;
 
@@ -133,8 +133,8 @@
   // for such simple stuff :)
 };
 
-std::ostream& operator<<(std::ostream& s, const Vector& v);
-Vector        operator*(float s, const Vector& v);
+std::ostream& operator<<(std::ostream& s, const Vector2f& v);
+Vector2f        operator*(float s, const Vector2f& v);
 
 #endif
 

Modified: trunk/windstille/src/navigation/navigation_graph.cpp
===================================================================
--- trunk/windstille/src/navigation/navigation_graph.cpp	2009-02-12 16:17:28 UTC (rev 2477)
+++ trunk/windstille/src/navigation/navigation_graph.cpp	2009-02-12 16:33:35 UTC (rev 2478)
@@ -42,7 +42,7 @@
 }
 
 NodeHandle
-NavigationGraph::add_node(const Vector& pos)
+NavigationGraph::add_node(const Vector2f& pos)
 {
   Node* node = new Node(pos);
   nodes.push_back(node);
@@ -144,7 +144,7 @@
 }
 
 std::vector<NodeHandle>
-NavigationGraph::find_nodes(const Vector& pos, float radius)
+NavigationGraph::find_nodes(const Vector2f& pos, float radius)
 {
   // FIXME: Optimize this with spatial tree thingy
   std::vector<NodeHandle> ret;
@@ -162,7 +162,7 @@
 }
 
 std::vector<SegmentHandle>
-NavigationGraph::find_segments(const Vector& pos, float radius)
+NavigationGraph::find_segments(const Vector2f& pos, float radius)
 {
   std::vector<SegmentHandle> ret;
  
@@ -180,7 +180,7 @@
 }
 
 NodeHandle
-NavigationGraph::find_closest_node(const Vector& pos, float radius)
+NavigationGraph::find_closest_node(const Vector2f& pos, float radius)
 {
   // FIXME: Optimize this with spatial tree thingy
   Node* node = 0;
@@ -200,7 +200,7 @@
 }
 
 SegmentHandle
-NavigationGraph::find_closest_segment(const Vector& pos, float radius)
+NavigationGraph::find_closest_segment(const Vector2f& pos, float radius)
 {
   Segment* segment   = 0;
   float min_distance = radius;
@@ -231,7 +231,7 @@
 
   for(Nodes::iterator i = nodes.begin(); i != nodes.end(); ++i)
     {
-      Display::fill_rect(Rectf((*i)->get_pos() - Vector(4,4), Sizef(9, 9)),
+      Display::fill_rect(Rectf((*i)->get_pos() - Vector2f(4,4), Sizef(9, 9)),
                          Color(1.0f, 1.0f, 0.0f));
     }
 }
@@ -250,7 +250,7 @@
         {
           if (i->get_name() == "node")
             {
-              Vector pos;
+              Vector2f pos;
               if (i->get("pos", pos))
                 {
                   Node* node = new Node(pos);

Modified: trunk/windstille/src/navigation/navigation_graph.hpp
===================================================================
--- trunk/windstille/src/navigation/navigation_graph.hpp	2009-02-12 16:17:28 UTC (rev 2477)
+++ trunk/windstille/src/navigation/navigation_graph.hpp	2009-02-12 16:33:35 UTC (rev 2478)
@@ -81,7 +81,7 @@
 
   // FIXME: It might be worth it to return handles that can be
   // validated instead of pure pointers
-  NodeHandle    add_node(const Vector& pos);
+  NodeHandle    add_node(const Vector2f& pos);
   SegmentHandle add_segment(NodeHandle node1, NodeHandle node2);
 
   void remove_node(NodeHandle node);
@@ -93,15 +93,15 @@
   std::vector<SegmentPosition> find_intersections(const Line& line);
 
   /** Find nodes that are near within the \a radius */
-  std::vector<NodeHandle> find_nodes(const Vector& pos, float radius);
+  std::vector<NodeHandle> find_nodes(const Vector2f& pos, float radius);
 
   /** Find the closest node, limit search to nodes in radius */
-  NodeHandle find_closest_node(const Vector& pos, float radius);
+  NodeHandle find_closest_node(const Vector2f& pos, float radius);
 
-  SegmentHandle find_closest_segment(const Vector& pos, float radius);
+  SegmentHandle find_closest_segment(const Vector2f& pos, float radius);
 
   /** Find segments that are near the given point */
-  std::vector<SegmentHandle> find_segments(const Vector& pos, float radius);
+  std::vector<SegmentHandle> find_segments(const Vector2f& pos, float radius);
 
   /** Draw the navigation graph, for debugging only */
   void draw();

Modified: trunk/windstille/src/navigation/node.cpp
===================================================================
--- trunk/windstille/src/navigation/node.cpp	2009-02-12 16:17:28 UTC (rev 2477)
+++ trunk/windstille/src/navigation/node.cpp	2009-02-12 16:33:35 UTC (rev 2478)
@@ -19,7 +19,7 @@
 #include <algorithm>
 #include "node.hpp"
 
-Node::Node(const Vector& pos_)
+Node::Node(const Vector2f& pos_)
   : pos(pos_)
     // FIXME: Do something with id
 {

Modified: trunk/windstille/src/navigation/node.hpp
===================================================================
--- trunk/windstille/src/navigation/node.hpp	2009-02-12 16:17:28 UTC (rev 2477)
+++ trunk/windstille/src/navigation/node.hpp	2009-02-12 16:33:35 UTC (rev 2478)
@@ -28,7 +28,7 @@
 class Node
 {
 private:
-  Vector pos;
+  Vector2f pos;
   
 public:
   /** Segments connected to this node */
@@ -36,11 +36,11 @@
   Segments segments;
 
 public:
-  Node(const Vector& pos_);
+  Node(const Vector2f& pos_);
   ~Node();
 
-  Vector get_pos() const { return pos; }
-  void   set_pos(const Vector& p) { pos = p; }
+  Vector2f get_pos() const { return pos; }
+  void   set_pos(const Vector2f& p) { pos = p; }
 
   /** Connect the given segment to the node, the position is used to
       mark the end of the segment that is actually connected */

Modified: trunk/windstille/src/navigation/segment.cpp
===================================================================
--- trunk/windstille/src/navigation/segment.cpp	2009-02-12 16:17:28 UTC (rev 2477)
+++ trunk/windstille/src/navigation/segment.cpp	2009-02-12 16:33:35 UTC (rev 2478)
@@ -49,7 +49,7 @@
               node2->get_pos());
 }
 
-Vector
+Vector2f
 Segment::get_vector() const
 {
   return node2->get_pos() - node1->get_pos();

Modified: trunk/windstille/src/navigation/segment.hpp
===================================================================
--- trunk/windstille/src/navigation/segment.hpp	2009-02-12 16:17:28 UTC (rev 2477)
+++ trunk/windstille/src/navigation/segment.hpp	2009-02-12 16:33:35 UTC (rev 2478)
@@ -47,7 +47,7 @@
   Properties get_properties()  const { return properties; }
 
   Line   get_line() const;
-  Vector get_vector() const;
+  Vector2f get_vector() const;
   
 private:
   Segment (const Segment&);

Modified: trunk/windstille/src/navigation/segment_position.cpp
===================================================================
--- trunk/windstille/src/navigation/segment_position.cpp	2009-02-12 16:17:28 UTC (rev 2477)
+++ trunk/windstille/src/navigation/segment_position.cpp	2009-02-12 16:33:35 UTC (rev 2478)
@@ -43,8 +43,8 @@
 void
 SegmentPosition::advance(float& adv, Node*& next_node)
 {
-  Vector p1 = segment->get_node1()->get_pos();
-  Vector p2 = segment->get_node2()->get_pos();
+  Vector2f p1 = segment->get_node1()->get_pos();
+  Vector2f p2 = segment->get_node2()->get_pos();
   
   float length = (p2 - p1).length();
   
@@ -76,15 +76,15 @@
 }
 
 void
-SegmentPosition::advance(Vector& adv, Node*& next_node)
+SegmentPosition::advance(Vector2f& adv, Node*& next_node)
 {
   // FIXME: This might be optimizable
-  Vector p1 = segment->get_node1()->get_pos();
-  Vector p2 = segment->get_node2()->get_pos();
+  Vector2f p1 = segment->get_node1()->get_pos();
+  Vector2f p2 = segment->get_node2()->get_pos();
   
-  Vector segment_v = p2 - p1;
+  Vector2f segment_v = p2 - p1;
 
-  Vector proj = adv.project(segment_v);
+  Vector2f proj = adv.project(segment_v);
 
   float angle = atan2(segment_v.y, segment_v.x) - atan2(proj.y, proj.x);
 
@@ -98,18 +98,19 @@
   // Move forward
   advance(advf, next_node);
   
-  // Calculate the rest Vector
+  // Calculate the rest Vector2f
+  // Calculate the rest Vector2f
   if (advf == 0.0f)
-    adv = Vector(0,0);
+    adv = Vector2f(0,0);
   else
     adv -= (proj * ((proj.length() - advf)/proj.length()));
 }
 
-Vector
+Vector2f
 SegmentPosition::get_pos() const
 {
-  Vector p1 = segment->get_node1()->get_pos();
-  Vector p2 = segment->get_node2()->get_pos();
+  Vector2f p1 = segment->get_node1()->get_pos();
+  Vector2f p2 = segment->get_node2()->get_pos();
 
   return p1 + pos*(p2 - p1);
 }

Modified: trunk/windstille/src/navigation/segment_position.hpp
===================================================================
--- trunk/windstille/src/navigation/segment_position.hpp	2009-02-12 16:17:28 UTC (rev 2477)
+++ trunk/windstille/src/navigation/segment_position.hpp	2009-02-12 16:33:35 UTC (rev 2478)
@@ -65,12 +65,12 @@
    * @param[out] next_node if the advance ends at a node, it gets
    *                       returned in next_node
    */  
-  void advance(Vector& adv, Node*& next_node);
+  void advance(Vector2f& adv, Node*& next_node);
 
   Segment* get_segment() const { return segment; }
   float    get_float_pos() const { return pos; }
 
-  Vector get_pos() const;
+  Vector2f get_pos() const;
 };
 
 #endif

Modified: trunk/windstille/src/objects/background_gradient.cpp
===================================================================
--- trunk/windstille/src/objects/background_gradient.cpp	2009-02-12 16:17:28 UTC (rev 2477)
+++ trunk/windstille/src/objects/background_gradient.cpp	2009-02-12 16:33:35 UTC (rev 2478)
@@ -67,7 +67,7 @@
   Color bottomcolor(0.5f, 0.5f, 1.0f);
 
   Rect rect(0, 0, 800, 600);
-  VertexArrayDrawingRequest* array = new VertexArrayDrawingRequest(Vector(0, 0), z_pos, 
+  VertexArrayDrawingRequest* array = new VertexArrayDrawingRequest(Vector2f(0, 0), z_pos, 
                                                                    sc.color().get_modelview());
 
   array->set_mode(GL_QUAD_STRIP);

Modified: trunk/windstille/src/objects/bomb.hpp
===================================================================
--- trunk/windstille/src/objects/bomb.hpp	2009-02-12 16:17:28 UTC (rev 2477)
+++ trunk/windstille/src/objects/bomb.hpp	2009-02-12 16:33:35 UTC (rev 2478)
@@ -32,7 +32,7 @@
   Sprite highlight;
   Sprite explolight;
 
-  Vector pos;
+  Vector2f pos;
   float count;
   enum { COUNTDOWN, EXPLODE } state;
   bool exploded;

Modified: trunk/windstille/src/objects/box.cpp
===================================================================
--- trunk/windstille/src/objects/box.cpp	2009-02-12 16:17:28 UTC (rev 2477)
+++ trunk/windstille/src/objects/box.cpp	2009-02-12 16:33:35 UTC (rev 2478)
@@ -32,7 +32,7 @@
   float width  = 64.0f;
   float height = 64.0f;
   std::string spritename;
-  Vector vel;
+  Vector2f vel;
 
   props.get("sprite", spritename);
   props.get("pos", pos);
@@ -50,7 +50,7 @@
   
   colobj = new CollisionObject(this, Rectf(0, 0, width, height));
   colobj->set_velocity(vel);
-  colobj->set_pos(Vector(pos.x, pos.y));
+  colobj->set_pos(Vector2f(pos.x, pos.y));
 
   Sector::current()->get_collision_engine()->add(colobj);
 
@@ -69,20 +69,20 @@
   if ((data.direction.x > 0 && colobj->get_velocity().x < 0) ||
       (data.direction.x < 0 && colobj->get_velocity().x > 0))
     {
-      colobj->set_velocity(Vector(-colobj->get_velocity().x, colobj->get_velocity().y));
+      colobj->set_velocity(Vector2f(-colobj->get_velocity().x, colobj->get_velocity().y));
     }
   
   if ((data.direction.y > 0 && colobj->get_velocity().y < 0) ||
       (data.direction.y < 0 && colobj->get_velocity().y > 0))
     {
-      colobj->set_velocity(Vector(colobj->get_velocity().x, -colobj->get_velocity().y));
+      colobj->set_velocity(Vector2f(colobj->get_velocity().x, -colobj->get_velocity().y));
     }
 }
 
 void 
 Box::update(float delta)
 {
-  colobj->set_velocity(Vector(colobj->get_velocity().x, 
+  colobj->set_velocity(Vector2f(colobj->get_velocity().x, 
                               colobj->get_velocity().y + gravity * delta));
 
   sprite.update(delta);

Modified: trunk/windstille/src/objects/elevator.cpp
===================================================================
--- trunk/windstille/src/objects/elevator.cpp	2009-02-12 16:17:28 UTC (rev 2477)
+++ trunk/windstille/src/objects/elevator.cpp	2009-02-12 16:33:35 UTC (rev 2478)
@@ -36,7 +36,7 @@
 
   sprite = Sprite(spritename);
   size  = Size(128, 64);
-  colobject = new CollisionObject(this, Rectf(Vector(0,0), size));
+  colobject = new CollisionObject(this, Rectf(Vector2f(0,0), size));
   Sector::current()->get_collision_engine()->add(colobject);
   colobject->set_pos(pos);
 }

Modified: trunk/windstille/src/objects/grenade.cpp
===================================================================
--- trunk/windstille/src/objects/grenade.cpp	2009-02-12 16:17:28 UTC (rev 2477)
+++ trunk/windstille/src/objects/grenade.cpp	2009-02-12 16:33:35 UTC (rev 2478)
@@ -49,7 +49,7 @@
 }
 
 void
-Grenade::set_velocity(const Vector& velocity)
+Grenade::set_velocity(const Vector2f& velocity)
 {
   this->velocity = velocity;
 }

Modified: trunk/windstille/src/objects/grenade.hpp
===================================================================
--- trunk/windstille/src/objects/grenade.hpp	2009-02-12 16:17:28 UTC (rev 2477)
+++ trunk/windstille/src/objects/grenade.hpp	2009-02-12 16:33:35 UTC (rev 2478)
@@ -31,7 +31,7 @@
 
   void draw(SceneContext& sc);
   void update(float delta);
-  void set_velocity(const Vector& vel);
+  void set_velocity(const Vector2f& vel);
 
 private:
   Sprite3D sprite;

Modified: trunk/windstille/src/objects/hedgehog.cpp
===================================================================
--- trunk/windstille/src/objects/hedgehog.cpp	2009-02-12 16:17:28 UTC (rev 2477)
+++ trunk/windstille/src/objects/hedgehog.cpp	2009-02-12 16:33:35 UTC (rev 2478)
@@ -94,7 +94,7 @@
           velocity.y += GRAVITY * delta;
         }
       
-      Vector old_pos = pos;
+      Vector2f old_pos = pos;
       pos += velocity * delta;
       
       if ((was_on_ground && !on_ground()) || in_wall())
@@ -106,7 +106,7 @@
     
   // Check if the player got hit
   // FIXME: Insert pixel perfect collision detection here
-  Vector player_pos = Player::current()->get_pos();
+  Vector2f player_pos = Player::current()->get_pos();
   if (pos.x - 20 < player_pos.x
         && pos.x + 20 > player_pos.x
         && pos.y - 20 < player_pos.y

Modified: trunk/windstille/src/objects/laser_pointer.cpp
===================================================================
--- trunk/windstille/src/objects/laser_pointer.cpp	2009-02-12 16:17:28 UTC (rev 2477)
+++ trunk/windstille/src/objects/laser_pointer.cpp	2009-02-12 16:33:35 UTC (rev 2478)
@@ -56,15 +56,15 @@
 LaserPointer::draw(SceneContext& sc)
 {
   TileMap* tilemap = Sector::current()->get_tilemap();
-  Vector pos = Player::current()->get_pos();
+  Vector2f pos = Player::current()->get_pos();
   pos.y -= 80;
-  Vector target; // = Sector::current()->get_collision_engine()->raycast(pos, angle);
+  Vector2f target; // = Sector::current()->get_collision_engine()->raycast(pos, angle);
 
   // Ray position in Tile units
   int x = static_cast<int>(pos.x / TILE_SIZE);
   int y = static_cast<int>(pos.y / TILE_SIZE);
 
-  Vector direction(cos(angle) * 100.0f, sin(angle) * 100.0f);
+  Vector2f direction(cos(angle) * 100.0f, sin(angle) * 100.0f);
 
   int step_x = (direction.x > 0) ? 1 : -1;
   int step_y = (direction.y > 0) ? 1 : -1;
@@ -80,12 +80,12 @@
   while(x >= 0 && x < tilemap->get_width() &&
         y >= 0 && y < tilemap->get_height())
     {
-      //sc.color().fill_rect(Rectf(Vector(x * TILE_SIZE, y * TILE_SIZE), Size(TILE_SIZE, TILE_SIZE)), 
+      //sc.color().fill_rect(Rectf(Vector2f(x * TILE_SIZE, y * TILE_SIZE), Size(TILE_SIZE, TILE_SIZE)), 
       //                     Color(1.0, 1.0, 1.0, 0.5), 500);
 
       if (tilemap->get_pixel(x, y))
         {
-          //return Vector(x * TILE_SIZE, y * TILE_SIZE);
+          //return Vector2f(x * TILE_SIZE, y * TILE_SIZE);
           goto done;
         }
 
@@ -105,10 +105,10 @@
     }
   
  done:
-  target = pos + Vector(t * direction.x, t * direction.y);
+  target = pos + Vector2f(t * direction.x, t * direction.y);
   
-  Vector ray = target - pos;
-  VertexArrayDrawingRequest* array = new VertexArrayDrawingRequest(Vector(0,0), 10000,
+  Vector2f ray = target - pos;
+  VertexArrayDrawingRequest* array = new VertexArrayDrawingRequest(Vector2f(0,0), 10000,
                                                                    sc.highlight().get_modelview());
   array->set_mode(GL_LINES);
   array->set_texture(noise);

Modified: trunk/windstille/src/objects/liquid.cpp
===================================================================
--- trunk/windstille/src/objects/liquid.cpp	2009-02-12 16:17:28 UTC (rev 2477)
+++ trunk/windstille/src/objects/liquid.cpp	2009-02-12 16:33:35 UTC (rev 2478)
@@ -60,7 +60,7 @@
 {
   float texscale = 1.0f/128.0f;
   {
-    VertexArrayDrawingRequest* array = new VertexArrayDrawingRequest(Vector(pos.x, pos.y), 10000,
+    VertexArrayDrawingRequest* array = new VertexArrayDrawingRequest(Vector2f(pos.x, pos.y), 10000,
                                                                      sc.light().get_modelview());
     array->set_texture(texture);
     array->set_mode(GL_QUAD_STRIP);
@@ -89,7 +89,7 @@
     sc.color().draw(array);
   }
   {
-    VertexArrayDrawingRequest* array = new VertexArrayDrawingRequest(Vector(pos.x, pos.y), 10000,
+    VertexArrayDrawingRequest* array = new VertexArrayDrawingRequest(Vector2f(pos.x, pos.y), 10000,
                                                                      sc.light().get_modelview());
     array->set_texture(texture);
     array->set_mode(GL_QUAD_STRIP);

Modified: trunk/windstille/src/objects/nightvision.cpp
===================================================================
--- trunk/windstille/src/objects/nightvision.cpp	2009-02-12 16:17:28 UTC (rev 2477)
+++ trunk/windstille/src/objects/nightvision.cpp	2009-02-12 16:33:35 UTC (rev 2478)
@@ -48,12 +48,12 @@
     {
       nightvision.set_alpha(1.0f);
       nightvision.set_blend_func(GL_ONE, GL_ZERO);
-      sc.light().draw(nightvision, Vector(0, 0), 10000);
+      sc.light().draw(nightvision, Vector2f(0, 0), 10000);
     }
 
   if (1)
     {
-      VertexArrayDrawingRequest* array = new VertexArrayDrawingRequest(Vector(0, 0), 10000,
+      VertexArrayDrawingRequest* array = new VertexArrayDrawingRequest(Vector2f(0, 0), 10000,
                                                                        sc.light().get_modelview());
       array->set_mode(GL_QUADS);
       array->set_texture(noise);
@@ -110,7 +110,7 @@
       sc.highlight().set_modelview(Matrix::identity());
       nightvision.set_alpha(0.5f);
       nightvision.set_blend_func(GL_SRC_ALPHA, GL_ONE);
-      sc.highlight().draw(nightvision, Vector(0, 0), 10000);
+      sc.highlight().draw(nightvision, Vector2f(0, 0), 10000);
       sc.highlight().pop_modelview();
     }
 }

Modified: trunk/windstille/src/objects/pistol.cpp
===================================================================
--- trunk/windstille/src/objects/pistol.cpp	2009-02-12 16:17:28 UTC (rev 2477)
+++ trunk/windstille/src/objects/pistol.cpp	2009-02-12 16:33:35 UTC (rev 2478)
@@ -34,7 +34,7 @@
 void
 Pistol::draw(SceneContext& sc)
 {
-  sprite.draw(sc.color(), Vector(0, 0), 1000);
+  sprite.draw(sc.color(), Vector2f(0, 0), 1000);
   // Disabled for now and done in the player class
   //if(laser_pointer)
   //  laser_pointer->draw(sc);

Modified: trunk/windstille/src/objects/player.cpp
===================================================================
--- trunk/windstille/src/objects/player.cpp	2009-02-12 16:17:28 UTC (rev 2477)
+++ trunk/windstille/src/objects/player.cpp	2009-02-12 16:33:35 UTC (rev 2478)
@@ -105,8 +105,8 @@
                                Color(1.0f, 0.0f, 0.0f, 0.5f), 10000.0f);
     }
 
-  //sc.highlight().draw(flashlighthighlight, pos - Vector(40, 80), 100.0f);
-  //sc.light().draw(flashlight, pos - Vector(40, 80), 100.0f);
+  //sc.highlight().draw(flashlighthighlight, pos - Vector2f(40, 80), 100.0f);
+  //sc.light().draw(flashlight, pos - Vector2f(40, 80), 100.0f);
   sprite.draw(sc.color(), pos, z_pos);
 
   Entity* obj = find_useable_entity();
@@ -232,7 +232,7 @@
 Player::set_stand()
 {
   try_set_action("Stand");
-  velocity = Vector(0, 0);
+  velocity = Vector2f(0, 0);
   state = STAND;
 }
 
@@ -305,7 +305,7 @@
            controller.get_axis_state(Y_AXIS) < -0.5f)
     contact->advance(WALK_SPEED * delta * 0.7f);
 
-  velocity = Vector(0, 0);
+  velocity = Vector2f(0, 0);
   c_object->set_pos(contact->get_pos());
 
   if (!contact->is_active())
@@ -356,8 +356,8 @@
     {
       // TODO remove me later, just here for testing
       Grenade* grenade = new Grenade();
-      grenade->set_pos(get_pos() + Vector(50, -300));
-      grenade->set_velocity(Vector(20, -10));
+      grenade->set_pos(get_pos() + Vector2f(50, -300));
+      grenade->set_velocity(Vector2f(20, -10));
       Sector::current()->add(grenade);
       
       sprite.set_action("PullGun");
@@ -508,7 +508,7 @@
   try_set_action("StandtoListen", backwards ? -1.0 : 1.0);
   if(!backwards) {
     sprite.set_next_action("Listen");
-    velocity = Vector(0, 0);
+    velocity = Vector2f(0, 0);
   } else {
     sprite.set_next_action("Stand");
   }
@@ -750,7 +750,7 @@
 {
   // copy velocity, as "velocity" is the wanted velocity, whereas
   // cur_vel is the velocity in the current delta-frame
-  Vector cur_vel = c_object->get_velocity(); 
+  Vector2f cur_vel = c_object->get_velocity(); 
   if (data.direction.y != 0)
     {
       cur_vel.y = 0;
@@ -766,7 +766,7 @@
 }
 
 void 
-Player::set_pos(Vector pos)
+Player::set_pos(Vector2f pos)
 {
   Entity::set_pos(pos);
   c_object->set_pos(pos);

Modified: trunk/windstille/src/objects/player.hpp
===================================================================
--- trunk/windstille/src/objects/player.hpp	2009-02-12 16:17:28 UTC (rev 2477)
+++ trunk/windstille/src/objects/player.hpp	2009-02-12 16:33:35 UTC (rev 2478)
@@ -115,7 +115,7 @@
 
   Entity* find_useable_entity();
 
-  virtual void set_pos(Vector pos);
+  virtual void set_pos(Vector2f pos);
 
 private:
   /*

Modified: trunk/windstille/src/objects/scriptable_object.cpp
===================================================================
--- trunk/windstille/src/objects/scriptable_object.cpp	2009-02-12 16:17:28 UTC (rev 2477)
+++ trunk/windstille/src/objects/scriptable_object.cpp	2009-02-12 16:33:35 UTC (rev 2478)
@@ -74,7 +74,7 @@
 void
 ScriptableObject::draw(SceneContext& sc)
 {
-  Vector tmp_pos = pos;
+  Vector2f tmp_pos = pos;
 
   if (parent)
     tmp_pos += parent->get_pos();

Modified: trunk/windstille/src/objects/shockwave.cpp
===================================================================
--- trunk/windstille/src/objects/shockwave.cpp	2009-02-12 16:17:28 UTC (rev 2477)
+++ trunk/windstille/src/objects/shockwave.cpp	2009-02-12 16:33:35 UTC (rev 2478)
@@ -30,7 +30,7 @@
   ShaderProgram shader_program;
   float radius;
 
-  ShockwaveDrawingRequest(const Vector& pos, 
+  ShockwaveDrawingRequest(const Vector2f& pos, 
                           const Texture&       noise_,
                           const ShaderProgram& shader_program_,
                           float r,

Modified: trunk/windstille/src/objects/shockwave.hpp
===================================================================
--- trunk/windstille/src/objects/shockwave.hpp	2009-02-12 16:17:28 UTC (rev 2477)
+++ trunk/windstille/src/objects/shockwave.hpp	2009-02-12 16:33:35 UTC (rev 2478)
@@ -27,7 +27,7 @@
 class Shockwave : public GameObject
 {
 private:
-  Vector        pos;
+  Vector2f        pos;
   Texture       noise;
   ShaderProgram shader_program;
   float radius;

Modified: trunk/windstille/src/objects/spider_mine.cpp
===================================================================
--- trunk/windstille/src/objects/spider_mine.cpp	2009-02-12 16:17:28 UTC (rev 2477)
+++ trunk/windstille/src/objects/spider_mine.cpp	2009-02-12 16:33:35 UTC (rev 2478)
@@ -96,7 +96,7 @@
   jump_time += delta;
 
   // !line72 - I should be using the real collision stuff for this
-  Vector player_pos = player->get_pos();
+  Vector2f player_pos = player->get_pos();
   
   // check for explosion
   if (state == JUMP && jump_time > 0.3) {

Modified: trunk/windstille/src/objects/spider_mine.hpp
===================================================================
--- trunk/windstille/src/objects/spider_mine.hpp	2009-02-12 16:17:28 UTC (rev 2477)
+++ trunk/windstille/src/objects/spider_mine.hpp	2009-02-12 16:33:35 UTC (rev 2478)
@@ -28,7 +28,7 @@
   Sprite sprite;
   Sprite explode;
   Sprite explode_light;
-  Vector initial_position;
+  Vector2f initial_position;
   float walk_speed;
   float jump_time;
   enum { WAIT, ATTACK, RETURN, JUMP, EXPLODE } state;

Modified: trunk/windstille/src/objects/swarm.cpp
===================================================================
--- trunk/windstille/src/objects/swarm.cpp	2009-02-12 16:17:28 UTC (rev 2477)
+++ trunk/windstille/src/objects/swarm.cpp	2009-02-12 16:33:35 UTC (rev 2478)
@@ -58,7 +58,7 @@
 void
 Swarm::draw(SceneContext& sc)
 {
-  VertexArrayDrawingRequest* array = new VertexArrayDrawingRequest(Vector(0, 0), 
+  VertexArrayDrawingRequest* array = new VertexArrayDrawingRequest(Vector2f(0, 0), 
                                                                    1000.0f, sc.highlight().get_modelview());
 
   array->set_mode(GL_QUADS);
@@ -99,7 +99,7 @@
   int x, y;
   SDL_GetMouseState(&x, &y);
   
-  target = GameSession::current()->get_view()->screen_to_world(Vector(x, y));
+  target = GameSession::current()->get_view()->screen_to_world(Vector2f(x, y));
 
   for(Agents::iterator i = agents.begin(); i != agents.end(); ++i)
     {

Modified: trunk/windstille/src/objects/swarm.hpp
===================================================================
--- trunk/windstille/src/objects/swarm.hpp	2009-02-12 16:17:28 UTC (rev 2477)
+++ trunk/windstille/src/objects/swarm.hpp	2009-02-12 16:33:35 UTC (rev 2478)
@@ -24,8 +24,8 @@
 class SwarmAgent
 {
 public:
-  Vector pos;
-  Vector last_pos;
+  Vector2f pos;
+  Vector2f last_pos;
   float  angle;
   float  speed;
   float  max_speed;
@@ -39,7 +39,7 @@
   typedef std::vector<SwarmAgent> Agents;
   Agents agents;
 
-  Vector target;
+  Vector2f target;
 
   float turn_speed; 
 public:

Modified: trunk/windstille/src/objects/test_object.cpp
===================================================================
--- trunk/windstille/src/objects/test_object.cpp	2009-02-12 16:17:28 UTC (rev 2477)
+++ trunk/windstille/src/objects/test_object.cpp	2009-02-12 16:33:35 UTC (rev 2478)
@@ -24,7 +24,7 @@
 
 TestObject::TestObject(FileReader& props)
 {
-  pos = Vector(0, 0);
+  pos = Vector2f(0, 0);
   std::string spritename;
 
   props.get("sprite", spritename);
@@ -51,7 +51,7 @@
     sc.translate(pos.x, pos.y);
     sc.mult_modelview(sprite.get_attachment_point_matrix(i->attachpoint));
     
-    i->sprite.draw(sc.color(), Vector(0, 0), 100);
+    i->sprite.draw(sc.color(), Vector2f(0, 0), 100);
     sc.pop_modelview();
   }                                                                        
 }
@@ -89,7 +89,7 @@
 }
 
 void
-TestObject::set_pos(const Vector& pos)
+TestObject::set_pos(const Vector2f& pos)
 {
   this->pos = pos;
 }

Modified: trunk/windstille/src/objects/test_object.hpp
===================================================================
--- trunk/windstille/src/objects/test_object.hpp	2009-02-12 16:17:28 UTC (rev 2477)
+++ trunk/windstille/src/objects/test_object.hpp	2009-02-12 16:33:35 UTC (rev 2478)
@@ -36,7 +36,7 @@
   void set_sprite(const std::string& filename);
   void set_action(const std::string& action);
   void set_vflip(bool vflip);
-  void set_pos(const Vector& pos);
+  void set_pos(const Vector2f& pos);
   void attach(const std::string& spritename,
 		      const std::string& attachement_point);
 
@@ -47,7 +47,7 @@
     Sprite3D::PointID attachpoint;
   };
   std::vector<AttachedSprite> attached_sprites;
-  Vector pos;
+  Vector2f pos;
 };
 
 #endif

Modified: trunk/windstille/src/objects/vrdummy.cpp
===================================================================
--- trunk/windstille/src/objects/vrdummy.cpp	2009-02-12 16:17:28 UTC (rev 2477)
+++ trunk/windstille/src/objects/vrdummy.cpp	2009-02-12 16:33:35 UTC (rev 2478)
@@ -45,7 +45,7 @@
   sc.highlight().push_modelview();
   sc.highlight().translate(pos.x, pos.y);
   sc.highlight().rotate(rotation, 0.0f, 1.0f, 0.0f);
-  sprite.draw(sc.highlight(), Vector(0, 0), 1200.0f);
+  sprite.draw(sc.highlight(), Vector2f(0, 0), 1200.0f);
   sc.highlight().pop_modelview();
 
   sc.highlight().draw(highlight, pos, 1500.0f);
@@ -58,9 +58,9 @@
   rotation += delta * 90.0f;
   jump_time += delta;
   
-  if (jump_time >= 1.0f && velocity == Vector(0, 0)) 
+  if (jump_time >= 1.0f && velocity == Vector2f(0, 0)) 
     {
-      velocity = Vector(rnd.drand(-300.0f, 300.0f),
+      velocity = Vector2f(rnd.drand(-300.0f, 300.0f),
                         rnd.drand(-300.0f, 300.0f));
     }
 
@@ -68,7 +68,7 @@
     {
       jump_time = 0.0f;
       
-      velocity = Vector(0, 0);
+      velocity = Vector2f(0, 0);
     }
 
   pos += velocity * delta;

Modified: trunk/windstille/src/particles/deform_drawer.cpp
===================================================================
--- trunk/windstille/src/particles/deform_drawer.cpp	2009-02-12 16:17:28 UTC (rev 2477)
+++ trunk/windstille/src/particles/deform_drawer.cpp	2009-02-12 16:33:35 UTC (rev 2478)
@@ -34,7 +34,7 @@
   ParticleSystem&   psys;
   ShaderProgram&    shader_program;
 
-  DeformDrawerRequest(const Vector& pos_, float z_pos,  const Matrix& modelview_,
+  DeformDrawerRequest(const Vector2f& pos_, float z_pos,  const Matrix& modelview_,
                       Framebuffer& framebuffer_, Surface& surface_, ParticleSystem& psys_,
                       ShaderProgram& shader_program_)
     : DrawingRequest(pos_, z_pos, modelview_),
@@ -177,7 +177,7 @@
 void
 DeformDrawer::draw(DrawingContext& dc, ParticleSystem& psys)
 {
-  dc.draw(new DeformDrawerRequest(Vector(400, 300), 1200, dc.get_modelview(), 
+  dc.draw(new DeformDrawerRequest(Vector2f(400, 300), 1200, dc.get_modelview(), 
                                   framebuffer, surface, psys, shader_program));
 }
 

Modified: trunk/windstille/src/particles/particle_system.cpp
===================================================================
--- trunk/windstille/src/particles/particle_system.cpp	2009-02-12 16:17:28 UTC (rev 2477)
+++ trunk/windstille/src/particles/particle_system.cpp	2009-02-12 16:33:35 UTC (rev 2478)
@@ -73,7 +73,7 @@
 
   props.get("z-pos", z_pos);
 
-  Vector p_gravity;
+  Vector2f p_gravity;
   if (props.get("gravity", p_gravity))
     set_gravity(p_gravity.x, p_gravity.y);
 
@@ -81,30 +81,30 @@
   if (props.get("cycles",  p_cycles))
     set_cycles(p_cycles);
 
-  Vector spawn_pos;
+  Vector2f spawn_pos;
   if (props.get("spawn-point", spawn_pos))
     set_spawn_point(spawn_pos.x, spawn_pos.y);
 
-  Vector p_pos;
+  Vector2f p_pos;
   if (props.get("pos", p_pos))
     set_pos(p_pos.x, p_pos.y);
   
-  Vector p_cone;
+  Vector2f p_cone;
   if (props.get("cone", p_cone))
     set_cone(p_cone.x, p_cone.y);
 
-  Vector p_size;
+  Vector2f p_size;
   if (props.get("size", p_size))
     set_size(p_size.x, p_size.y);
 
-  Vector p_aspect;
+  Vector2f p_aspect;
   if (props.get("aspect", p_aspect))
     set_aspect(p_aspect.x, p_aspect.y);
 
   props.get("color-begin", color_start);
   props.get("color-end",   color_stop);
   
-  Vector p_speed;
+  Vector2f p_speed;
   if (props.get("velocity", p_speed))
     set_velocity(p_speed.x, p_speed.y);
 

Modified: trunk/windstille/src/particles/spark_drawer.cpp
===================================================================
--- trunk/windstille/src/particles/spark_drawer.cpp	2009-02-12 16:17:28 UTC (rev 2477)
+++ trunk/windstille/src/particles/spark_drawer.cpp	2009-02-12 16:33:35 UTC (rev 2478)
@@ -33,7 +33,7 @@
 void
 SparkDrawer::draw(DrawingContext& dc, ParticleSystem& psys) 
 {
-  VertexArrayDrawingRequest* buffer = new VertexArrayDrawingRequest(Vector(0, 0), psys.get_z_pos(),
+  VertexArrayDrawingRequest* buffer = new VertexArrayDrawingRequest(Vector2f(0, 0), psys.get_z_pos(),
                                                                     dc.get_modelview());
   if (width == 1.0f)
     {

Modified: trunk/windstille/src/particles/surface_drawer.cpp
===================================================================
--- trunk/windstille/src/particles/surface_drawer.cpp	2009-02-12 16:17:28 UTC (rev 2477)
+++ trunk/windstille/src/particles/surface_drawer.cpp	2009-02-12 16:33:35 UTC (rev 2478)
@@ -88,7 +88,7 @@
 SurfaceDrawer::draw(DrawingContext& dc, ParticleSystem& psys) 
 {          
   VertexArrayDrawingRequest* buffer 
-    = new VertexArrayDrawingRequest(Vector(psys.get_x_pos(), psys.get_y_pos()), psys.get_z_pos(),
+    = new VertexArrayDrawingRequest(Vector2f(psys.get_x_pos(), psys.get_y_pos()), psys.get_z_pos(),
                                     dc.get_modelview());
 
   buffer->set_mode(GL_QUADS);

Modified: trunk/windstille/src/screen/game_session.cpp
===================================================================
--- trunk/windstille/src/screen/game_session.cpp	2009-02-12 16:17:28 UTC (rev 2477)
+++ trunk/windstille/src/screen/game_session.cpp	2009-02-12 16:33:35 UTC (rev 2478)
@@ -173,7 +173,7 @@
   if (pause)
     {
       if ((SDL_GetTicks() / 1000) % 2)
-        Fonts::vera20->draw(Vector(Display::get_width()/2, Display::get_height()/2), "Pause");
+        Fonts::vera20->draw(Vector2f(Display::get_width()/2, Display::get_height()/2), "Pause");
     }
 }
 
@@ -375,7 +375,7 @@
         
     case SDL_MOUSEBUTTONDOWN:
       {
-        Vector real_pos = GameSession::current()->get_view()->screen_to_world(Vector(event.button.x,
+        Vector2f real_pos = GameSession::current()->get_view()->screen_to_world(Vector2f(event.button.x,
                                                                                   event.button.y));      
         console << "Click at: " << int(real_pos.x) << ", " << int(real_pos.y) << std::endl;
       }

Modified: trunk/windstille/src/screen/geometry_test.cpp
===================================================================
--- trunk/windstille/src/screen/geometry_test.cpp	2009-02-12 16:17:28 UTC (rev 2477)
+++ trunk/windstille/src/screen/geometry_test.cpp	2009-02-12 16:33:35 UTC (rev 2478)
@@ -32,11 +32,11 @@
   point_count = 0;
   had_prev_collision = true;
 
-  line1 = Line(Vector(300, 300),
-               Vector(500, 300));
+  line1 = Line(Vector2f(300, 300),
+               Vector2f(500, 300));
 
-  line2 = Line(Vector(400, 200),
-               Vector(400, 400));
+  line2 = Line(Vector2f(400, 200),
+               Vector2f(400, 400));
 
   cursor  = line1.p1;
   cursor2 = line1.p2;
@@ -51,23 +51,23 @@
   Display::draw_line(line1, Color(0.0f, 1.0f, 0.0f));
   Display::draw_line(line2, Color(0.0f, 1.0f, 0.0f));
 
-  Display::fill_rect(Rectf(cursor - Vector(2,2), Sizef(5,5)),  Color(1.0f, 0.0f, 1.0f));
-  Display::fill_rect(Rectf(cursor2 - Vector(2,2), Sizef(5,5)), Color(1.0f, 1.0f, 0.0f));
+  Display::fill_rect(Rectf(cursor - Vector2f(2,2), Sizef(5,5)),  Color(1.0f, 0.0f, 1.0f));
+  Display::fill_rect(Rectf(cursor2 - Vector2f(2,2), Sizef(5,5)), Color(1.0f, 1.0f, 0.0f));
 
-  Display::fill_rect(Rectf(collision_point - Vector(3,3), Sizef(7,7)), Color(1.0f, 1.0f, 1.0f));
+  Display::fill_rect(Rectf(collision_point - Vector2f(3,3), Sizef(7,7)), Color(1.0f, 1.0f, 1.0f));
 
   // Try vector projection
-  Vector a(line1.p2 - line1.p1);
-  Vector b(line2.p2 - line2.p1);
-  Vector c(a.project(b));
+  Vector2f a(line1.p2 - line1.p1);
+  Vector2f b(line2.p2 - line2.p1);
+  Vector2f c(a.project(b));
   
   Display::draw_line(line1.p1, line1.p1 + c, Color(1.0f, 1.0f, 1.0f, 0.5f));
 
   int segments = std::max(0, int(cursor.y / 10));
 
-  Display::fill_arc(Vector(200, 200), 100.0f, cursor.x, cursor2.x, Color(1.0f, 1.0f, 1.0f, 0.5f), segments);
-  Display::draw_arc(Vector(200, 200), 100.0f, cursor.x, cursor2.x, Color(1.0f, 1.0f, 1.0f), segments);
-  Display::draw_circle(Vector(200, 200), 128.0f, Color(1.0f, 1.0f, 1.0f), segments);
+  Display::fill_arc(Vector2f(200, 200), 100.0f, cursor.x, cursor2.x, Color(1.0f, 1.0f, 1.0f, 0.5f), segments);
+  Display::draw_arc(Vector2f(200, 200), 100.0f, cursor.x, cursor2.x, Color(1.0f, 1.0f, 1.0f), segments);
+  Display::draw_circle(Vector2f(200, 200), 128.0f, Color(1.0f, 1.0f, 1.0f), segments);
 }
 
 void
@@ -123,7 +123,7 @@
       if (had_prev_collision)
         console << "No Collision" << std::endl;
       had_prev_collision = false;
-      collision_point = Vector(32, 32);
+      collision_point = Vector2f(32, 32);
     }
 }
 

Modified: trunk/windstille/src/screen/geometry_test.hpp
===================================================================
--- trunk/windstille/src/screen/geometry_test.hpp	2009-02-12 16:17:28 UTC (rev 2477)
+++ trunk/windstille/src/screen/geometry_test.hpp	2009-02-12 16:33:35 UTC (rev 2478)
@@ -27,9 +27,9 @@
 class GeometryTest : public Screen
 {
 private:
-  Vector cursor;
-  Vector cursor2;
-  Vector collision_point;
+  Vector2f cursor;
+  Vector2f cursor2;
+  Vector2f collision_point;
 
   int point_count;
 

Modified: trunk/windstille/src/screen/navigation_test.cpp
===================================================================
--- trunk/windstille/src/screen/navigation_test.cpp	2009-02-12 16:17:28 UTC (rev 2477)
+++ trunk/windstille/src/screen/navigation_test.cpp	2009-02-12 16:33:35 UTC (rev 2478)
@@ -48,10 +48,10 @@
     std::cout << "NavigationTest: " << err.what() << std::endl;
   }
 
-  NodeHandle node1 = graph->add_node(Vector(100, 200));
-  NodeHandle node2 = graph->add_node(Vector(300, 400));
-  //Node* node3 = graph->add_node(Vector(500, 300));
-  //Node* node4 = graph->add_node(Vector(700, 400));
+  NodeHandle node1 = graph->add_node(Vector2f(100, 200));
+  NodeHandle node2 = graph->add_node(Vector2f(300, 400));
+  //Node* node3 = graph->add_node(Vector2f(500, 300));
+  //Node* node4 = graph->add_node(Vector2f(700, 400));
 
   graph->add_segment(node1, node2);
   //graph->add_segment(node2, node3);
@@ -66,7 +66,7 @@
   glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);
   graph->draw();
 
-  Display::fill_rect(Rectf(cursor - Vector(2,2), Sizef(5,5)),  Color(1.0f, 1.0f, 1.0f));
+  Display::fill_rect(Rectf(cursor - Vector2f(2,2), Sizef(5,5)),  Color(1.0f, 1.0f, 1.0f));
   Display::draw_circle(cursor, 32.0f, Color(1.0f, 1.0f, 1.0f, 0.5f));
 
   std::vector<NodeHandle> nodes = graph->find_nodes(cursor, 128.0f);
@@ -77,7 +77,7 @@
 
   if (node_to_connect)
     {
-      Display::fill_rect(Rectf(node_to_connect->get_pos() - Vector(2,2), Sizef(5,5)),  
+      Display::fill_rect(Rectf(node_to_connect->get_pos() - Vector2f(2,2), Sizef(5,5)),  
                          Color(1.0f, 1.0f, 1.0f));
       Display::draw_line(node_to_connect->get_pos(), cursor, Color(1.0f, 1.0f, 1.0f, 0.5f));
     }
@@ -109,10 +109,10 @@
       screen_manager.pop_screen();
     }
 
-  cursor += Vector(controller.get_axis_state(X_AXIS) * 500.0f * delta,
+  cursor += Vector2f(controller.get_axis_state(X_AXIS) * 500.0f * delta,
                    controller.get_axis_state(Y_AXIS) * 500.0f * delta);
 
-  stick = Vector(controller.get_axis_state(X2_AXIS),
+  stick = Vector2f(controller.get_axis_state(X2_AXIS),
                  controller.get_axis_state(Y2_AXIS));
 
   if (controller.button_was_pressed(PRIMARY_BUTTON))
@@ -158,7 +158,7 @@
       Node* next_node;
       //float advance = 512.0f * controller.get_axis_state(X2_AXIS) * delta;
       
-      Vector advance = delta * 512.0f * stick;
+      Vector2f advance = delta * 512.0f * stick;
       connection->advance(advance, next_node);
 
       player = connection->get_pos();
@@ -176,7 +176,7 @@
             {
               if (connection->get_segment() != i->segment)
                 { // Find out into the direction of which segment the stick is pointing
-                  Vector proj = stick.project(i->segment->get_vector());
+                  Vector2f proj = stick.project(i->segment->get_vector());
                   
                   if (proj.length() > length)
                     {
@@ -215,7 +215,7 @@
     }
   else
     { // handle non connection based movement
-      player += Vector(0.0f, 100.0f) * delta;
+      player += Vector2f(0.0f, 100.0f) * delta;
       
       player.x += 512.0f * stick.x * delta;
 

Modified: trunk/windstille/src/screen/navigation_test.hpp
===================================================================
--- trunk/windstille/src/screen/navigation_test.hpp	2009-02-12 16:17:28 UTC (rev 2477)
+++ trunk/windstille/src/screen/navigation_test.hpp	2009-02-12 16:33:35 UTC (rev 2478)
@@ -31,10 +31,10 @@
 class NavigationTest : public Screen
 {
 private:
-  Vector cursor;
-  Vector stick;
-  Vector player;
-  Vector old_player;
+  Vector2f cursor;
+  Vector2f stick;
+  Vector2f player;
+  Vector2f old_player;
   
   NavigationGraph* graph;
   SegmentPosition* connection;

Modified: trunk/windstille/src/screen/particle_viewer.cpp
===================================================================
--- trunk/windstille/src/screen/particle_viewer.cpp	2009-02-12 16:17:28 UTC (rev 2477)
+++ trunk/windstille/src/screen/particle_viewer.cpp	2009-02-12 16:33:35 UTC (rev 2478)
@@ -137,7 +137,7 @@
 
   for(int y = -background.get_width(); y < 600 + background.get_height(); y += background.get_height())
     for(int x = -background.get_width(); x < 800 + background.get_width(); x += background.get_width())
-      sc.color().draw(background, Vector(x + int(pos.x) % background.get_width(),
+      sc.color().draw(background, Vector2f(x + int(pos.x) % background.get_width(),
                                          y + int(pos.y) % background.get_height()), -900);
 
   sc.translate(400 + pos.x, 600 + pos.y);

Modified: trunk/windstille/src/screen/particle_viewer.hpp
===================================================================
--- trunk/windstille/src/screen/particle_viewer.hpp	2009-02-12 16:17:28 UTC (rev 2477)
+++ trunk/windstille/src/screen/particle_viewer.hpp	2009-02-12 16:33:35 UTC (rev 2478)
@@ -40,7 +40,7 @@
   Systems systems;
   Sprite background;
 
-  Vector pos;
+  Vector2f pos;
   bool   show_gui;
   gui::GUIManager* manager;
   gui::TabComponent* tab;

Modified: trunk/windstille/src/screen/screen_manager.cpp
===================================================================
--- trunk/windstille/src/screen/screen_manager.cpp	2009-02-12 16:17:28 UTC (rev 2477)
+++ trunk/windstille/src/screen/screen_manager.cpp	2009-02-12 16:33:35 UTC (rev 2478)
@@ -319,7 +319,7 @@
   
   char output[20];
   snprintf(output, sizeof(output), "FPS: %d", last_fps);
-  Fonts::ttffont->draw(Vector(Display::get_width() - 100, 30), output);
+  Fonts::ttffont->draw(Vector2f(Display::get_width() - 100, 30), output);
 }
 
 void

Modified: trunk/windstille/src/screen/sprite2dview.cpp
===================================================================
--- trunk/windstille/src/screen/sprite2dview.cpp	2009-02-12 16:17:28 UTC (rev 2477)
+++ trunk/windstille/src/screen/sprite2dview.cpp	2009-02-12 16:33:35 UTC (rev 2478)
@@ -64,7 +64,7 @@
     mode = SLIDESHOW; 
 
   zoom = 1.0f;
-  pos  = Vector(0,0);
+  pos  = Vector2f(0,0);
   display_time = 0.0f;
   show_thumbnail = false;
   ignore_delta = false;
@@ -110,16 +110,16 @@
     case SLIDESHOW:
       if (aspect > 4.0/3.0)
         {
-          sprite.draw(Vector(-offset, 0));
+          sprite.draw(Vector2f(-offset, 0));
         }
       else
         {
-          sprite.draw(Vector(0, -offset));
+          sprite.draw(Vector2f(0, -offset));
         }
 
       if (new_sprite)
         {
-          new_sprite.draw(Vector(0,0));
+          new_sprite.draw(Vector2f(0,0));
         }
 
       if (show_thumbnail)
@@ -137,7 +137,7 @@
               height *= scale;
               small.set_scale(scale);
 
-              small.draw(Vector(DISPLAY_W - width,
+              small.draw(Vector2f(DISPLAY_W - width,
                                 DISPLAY_H - height));
             }
           else
@@ -148,7 +148,7 @@
               height *= scale;
               small.set_scale(scale);
 
-              small.draw(Vector(DISPLAY_W - width,
+              small.draw(Vector2f(DISPLAY_W - width,
                                 DISPLAY_H - height));
             }
         }        

Modified: trunk/windstille/src/screen/sprite2dview.hpp
===================================================================
--- trunk/windstille/src/screen/sprite2dview.hpp	2009-02-12 16:17:28 UTC (rev 2477)
+++ trunk/windstille/src/screen/sprite2dview.hpp	2009-02-12 16:33:35 UTC (rev 2478)
@@ -38,7 +38,7 @@
   
   // Manual Mode Variables
   float  zoom;
-  Vector pos;
+  Vector2f pos;
 
   // Slideshow variables
   float width;

Modified: trunk/windstille/src/screen/sprite3dview.cpp
===================================================================
--- trunk/windstille/src/screen/sprite3dview.cpp	2009-02-12 16:17:28 UTC (rev 2477)
+++ trunk/windstille/src/screen/sprite3dview.cpp	2009-02-12 16:33:35 UTC (rev 2478)
@@ -66,7 +66,7 @@
   // Rotate
   sc.mult_modelview(rotation.to_matrix());  
   sc.translate(0, 64.0f); // FIXME: use object height/2 instead of 64
-  sprite.draw(sc.color(), Vector(0,0), 0); 
+  sprite.draw(sc.color(), Vector2f(0,0), 0); 
   sc.pop_modelview();
 
   //Matrix matrix = sc.color().get_modelview();
@@ -84,10 +84,10 @@
   for(int i = 0; i < int(actions.size()); ++i)
     {
       if (i == current_action)
-        Fonts::vera12->draw(Vector(x, y),
+        Fonts::vera12->draw(Vector2f(x, y),
                             actions[i], Color(1.0f, 1.0f, 1.0f));
       else
-        Fonts::vera12->draw(Vector(x, y),
+        Fonts::vera12->draw(Vector2f(x, y),
                             actions[i], Color(0.7f, 0.7f, 0.7f));
 
 

Modified: trunk/windstille/src/screen/title_screen.cpp
===================================================================
--- trunk/windstille/src/screen/title_screen.cpp	2009-02-12 16:17:28 UTC (rev 2477)
+++ trunk/windstille/src/screen/title_screen.cpp	2009-02-12 16:33:35 UTC (rev 2478)
@@ -38,7 +38,7 @@
 void
 TitleScreen::draw()
 {
-  background.draw(Vector(0, 0));
+  background.draw(Vector2f(0, 0));
 }
 
 void

Modified: trunk/windstille/src/screen/view.cpp
===================================================================
--- trunk/windstille/src/screen/view.cpp	2009-02-12 16:17:28 UTC (rev 2477)
+++ trunk/windstille/src/screen/view.cpp	2009-02-12 16:33:35 UTC (rev 2478)
@@ -39,13 +39,13 @@
   // pixel-jitter when scrolling with subpixel values and pixel
   // precise images.
   if (camera.get_zoom() == 1.0)
-    state.set_pos(Vector(static_cast<int>(camera.get_pos().x),
+    state.set_pos(Vector2f(static_cast<int>(camera.get_pos().x),
                          static_cast<int>(camera.get_pos().y)));
   else
     state.set_pos(camera.get_pos());
 
   state.set_zoom(camera.get_zoom() + (zoom - 1.0f));
-  state.set_pos(state.get_pos() + Vector(transform.x, transform.y));
+  state.set_pos(state.get_pos() + Vector2f(transform.x, transform.y));
 
   state.push(sc);
   Sector::current()->draw(sc);
@@ -67,7 +67,7 @@
     zoom *= 1.0 - delta;
 
   if(controller.get_button_state(VIEW_CENTER_BUTTON)) {
-      transform = Vector(0, 0);
+      transform = Vector2f(0, 0);
       zoom = 1.0;
   }
 
@@ -81,8 +81,8 @@
   return state.get_clip_rect();
 }
 
-Vector
-View::screen_to_world(const Vector& point)
+Vector2f
+View::screen_to_world(const Vector2f& point)
 {
   return state.screen_to_world(point);
 }

Modified: trunk/windstille/src/screen/view.hpp
===================================================================
--- trunk/windstille/src/screen/view.hpp	2009-02-12 16:17:28 UTC (rev 2477)
+++ trunk/windstille/src/screen/view.hpp	2009-02-12 16:33:35 UTC (rev 2478)
@@ -36,7 +36,7 @@
 
   // debugging helpers
   float zoom;
-  Vector transform;
+  Vector2f transform;
 
 public:
   View();
@@ -46,7 +46,7 @@
   /** @return the rectangle which represents the currently visible
       area, everything outside of it doesn't have to be drawn */
   Rectf get_clip_rect();
-  Vector screen_to_world(const Vector& point);
+  Vector2f screen_to_world(const Vector2f& point);
 
   void draw(SceneContext& gc);
   void update(float delta, const Controller& controller);

Modified: trunk/windstille/src/scripting/game_objects.cpp
===================================================================
--- trunk/windstille/src/scripting/game_objects.cpp	2009-02-12 16:17:28 UTC (rev 2477)
+++ trunk/windstille/src/scripting/game_objects.cpp	2009-02-12 16:33:35 UTC (rev 2478)
@@ -68,7 +68,7 @@
 void
 TestObject::set_pos(float x, float y)
 {
-  obj()->set_pos(Vector(x, y));
+  obj()->set_pos(Vector2f(x, y));
 }
 
 void

Modified: trunk/windstille/src/scripting/interface.cpp
===================================================================
--- trunk/windstille/src/scripting/interface.cpp	2009-02-12 16:17:28 UTC (rev 2477)
+++ trunk/windstille/src/scripting/interface.cpp	2009-02-12 16:33:35 UTC (rev 2478)
@@ -100,7 +100,7 @@
 
 void camera_add_point(float x, float y, float zoom)
 {
-  camera_path.push_back(Camera::PathPoint(Vector(x, y), zoom));
+  camera_path.push_back(Camera::PathPoint(Vector2f(x, y), zoom));
 }
 
 void camera_end_path()

Modified: trunk/windstille/src/sound/sound_manager.cpp
===================================================================
--- trunk/windstille/src/sound/sound_manager.cpp	2009-02-12 16:17:28 UTC (rev 2477)
+++ trunk/windstille/src/sound/sound_manager.cpp	2009-02-12 16:33:35 UTC (rev 2478)
@@ -112,13 +112,13 @@
 }
 
 void
-SoundManager::play(const std::string& filename, const Vector& pos)
+SoundManager::play(const std::string& filename, const Vector2f& pos)
 {
   try {
     SoundSource* source = create_sound_source(filename);
     if(source == 0)
       return;
-    if(pos == Vector(-1, -1)) {
+    if(pos == Vector2f(-1, -1)) {
       alSourcef(source->source, AL_ROLLOFF_FACTOR, 0);
     } else {
       source->set_position(pos);
@@ -202,13 +202,13 @@
 }
 
 void
-SoundManager::set_listener_position(const Vector& pos)
+SoundManager::set_listener_position(const Vector2f& pos)
 {
   alListener3f(AL_POSITION, pos.x, pos.y, 0);
 }
 
 void
-SoundManager::set_listener_velocity(const Vector& vel)
+SoundManager::set_listener_velocity(const Vector2f& vel)
 {
   alListener3f(AL_VELOCITY, vel.x, vel.y, 0);
 }

Modified: trunk/windstille/src/sound/sound_manager.hpp
===================================================================
--- trunk/windstille/src/sound/sound_manager.hpp	2009-02-12 16:17:28 UTC (rev 2477)
+++ trunk/windstille/src/sound/sound_manager.hpp	2009-02-12 16:33:35 UTC (rev 2478)
@@ -52,10 +52,10 @@
   /**
    * Convenience function to simply play a sound at a given position.
    */
-  void play(const std::string& name, const Vector& pos = Vector(-1, -1));
+  void play(const std::string& name, const Vector2f& pos = Vector2f(-1, -1));
 
-  void set_listener_position(const Vector& position);
-  void set_listener_velocity(const Vector& velocity);
+  void set_listener_position(const Vector2f& position);
+  void set_listener_velocity(const Vector2f& velocity);
   void set_listener_gain(float volume);
 
   void enable_music(bool music_enabled);

Modified: trunk/windstille/src/sound/sound_source.cpp
===================================================================
--- trunk/windstille/src/sound/sound_source.cpp	2009-02-12 16:17:28 UTC (rev 2477)
+++ trunk/windstille/src/sound/sound_source.cpp	2009-02-12 16:33:35 UTC (rev 2478)
@@ -62,13 +62,13 @@
 }
 
 void
-SoundSource::set_position(const Vector& position)
+SoundSource::set_position(const Vector2f& position)
 {
   alSource3f(source, AL_POSITION, position.x, position.y, 0);
 }
 
 void
-SoundSource::set_velocity(const Vector& velocity)
+SoundSource::set_velocity(const Vector2f& velocity)
 {
   alSource3f(source, AL_VELOCITY, velocity.x, velocity.y, 0);
 }

Modified: trunk/windstille/src/sound/sound_source.hpp
===================================================================
--- trunk/windstille/src/sound/sound_source.hpp	2009-02-12 16:17:28 UTC (rev 2477)
+++ trunk/windstille/src/sound/sound_source.hpp	2009-02-12 16:33:35 UTC (rev 2478)
@@ -35,8 +35,8 @@
   void set_looping(bool looping);
   /// Set volume (0.0 is silent, 1.0 is normal)
   void set_gain(float gain);
-  void set_position(const Vector& position);
-  void set_velocity(const Vector& position);
+  void set_position(const Vector2f& position);
+  void set_velocity(const Vector2f& position);
   void set_reference_distance(float distance);
 
 protected:

Modified: trunk/windstille/src/sprite2d/data.cpp
===================================================================
--- trunk/windstille/src/sprite2d/data.cpp	2009-02-12 16:17:28 UTC (rev 2477)
+++ trunk/windstille/src/sprite2d/data.cpp	2009-02-12 16:33:35 UTC (rev 2478)
@@ -53,7 +53,7 @@
               action->name   = "default";
               action->speed  = 1.0;
               action->scale  = 1.0f;
-              action->offset = Vector(0, 0);
+              action->offset = Vector2f(0, 0);
               action->surfaces.push_back(Surface(filename));
               actions.push_back(action.release());
             }
@@ -78,7 +78,7 @@
           action->name   = "default";
           action->speed  = 1.0;
           action->scale  = 1.0f;
-          action->offset = Vector(0, 0);
+          action->offset = Vector2f(0, 0);
           action->surfaces.push_back(Surface(pngfile));
           actions.push_back(action.release());
         }
@@ -116,7 +116,7 @@
   std::auto_ptr<SpriteAction> action (new SpriteAction);
   action->speed = 1.0;
   action->scale = 1.0f;
-  action->offset = Vector(0, 0);
+  action->offset = Vector2f(0, 0);
  
   reader.get("name", action->name);
   reader.get("speed", action->speed);

Modified: trunk/windstille/src/sprite2d/data.hpp
===================================================================
--- trunk/windstille/src/sprite2d/data.hpp	2009-02-12 16:17:28 UTC (rev 2477)
+++ trunk/windstille/src/sprite2d/data.hpp	2009-02-12 16:33:35 UTC (rev 2478)
@@ -36,7 +36,7 @@
 
   std::string name;
   float       speed;
-  Vector      offset;
+  Vector2f      offset;
   float       scale;
   Surfaces    surfaces;
 };

Modified: trunk/windstille/src/sprite2d/sprite.cpp
===================================================================
--- trunk/windstille/src/sprite2d/sprite.cpp	2009-02-12 16:17:28 UTC (rev 2477)
+++ trunk/windstille/src/sprite2d/sprite.cpp	2009-02-12 16:33:35 UTC (rev 2478)
@@ -172,14 +172,14 @@
   return current_action->surfaces[ static_cast<int> (frame) ];
 }
 
-Vector
+Vector2f
 Sprite::get_offset() const
 {
   return current_action->offset;
 }
 
 void
-Sprite::draw(const Vector& pos) const
+Sprite::draw(const Vector2f& pos) const
 {
   // FIXME: Sprite needs to get a whole list with possible parameters
   // (color, blendfunc, ...), not just alpha

Modified: trunk/windstille/src/sprite2d/sprite.hpp
===================================================================
--- trunk/windstille/src/sprite2d/sprite.hpp	2009-02-12 16:17:28 UTC (rev 2477)
+++ trunk/windstille/src/sprite2d/sprite.hpp	2009-02-12 16:33:35 UTC (rev 2478)
@@ -65,7 +65,7 @@
   ~Sprite();
 
   void update(float delta);
-  void draw(const Vector& pos) const;
+  void draw(const Vector2f& pos) const;
 
   void  set_action(const std::string& name);
   const std::string& get_action() const;
@@ -96,7 +96,7 @@
 
   Surface get_current_surface() const;
 
-  Vector get_offset() const;
+  Vector2f get_offset() const;
 
   int get_width() const;
   int get_height() const;

Modified: trunk/windstille/src/sprite3d/sprite3d.cpp
===================================================================
--- trunk/windstille/src/sprite3d/sprite3d.cpp	2009-02-12 16:17:28 UTC (rev 2477)
+++ trunk/windstille/src/sprite3d/sprite3d.cpp	2009-02-12 16:33:35 UTC (rev 2478)
@@ -241,7 +241,7 @@
   const Sprite3D* sprite;
 
 public:
-  Sprite3DDrawingRequest(const Sprite3D* sprite, const Vector& pos, float z_pos,
+  Sprite3DDrawingRequest(const Sprite3D* sprite, const Vector2f& pos, float z_pos,
                        const Matrix& modelview)
     : DrawingRequest(pos, z_pos, modelview), sprite(sprite)
   {}
@@ -303,7 +303,7 @@
 }
 
 void
-Sprite3D::draw(DrawingContext& dc, const Vector& pos, float z_pos) const
+Sprite3D::draw(DrawingContext& dc, const Vector2f& pos, float z_pos) const
 {
   dc.draw(new Sprite3DDrawingRequest(this, pos, z_pos, dc.get_modelview()));
 }
@@ -311,7 +311,7 @@
 void
 Sprite3D::draw(DrawingContext& dc, const Matrix& , float ) const
 {
-  dc.draw(new Sprite3DDrawingRequest(this, Vector(0, 0), 0.0f, dc.get_modelview()));
+  dc.draw(new Sprite3DDrawingRequest(this, Vector2f(0, 0), 0.0f, dc.get_modelview()));
 }
 
 static inline float interpolate(float v1, float v2, float t)
@@ -320,7 +320,7 @@
 }
 
 void
-Sprite3D::draw(const Vector& pos, const Matrix& modelview) const
+Sprite3D::draw(const Vector2f& pos, const Matrix& modelview) const
 {
   glMatrixMode(GL_MODELVIEW);
   glPushMatrix(); 

Modified: trunk/windstille/src/sprite3d/sprite3d.hpp
===================================================================
--- trunk/windstille/src/sprite3d/sprite3d.hpp	2009-02-12 16:17:28 UTC (rev 2477)
+++ trunk/windstille/src/sprite3d/sprite3d.hpp	2009-02-12 16:33:35 UTC (rev 2478)
@@ -54,7 +54,7 @@
    * You should call this every frame
    */
   void update(float delta);
-  void draw(DrawingContext& sc, const Vector& pos, float z_pos) const;
+  void draw(DrawingContext& sc, const Vector2f& pos, float z_pos) const;
   void draw(DrawingContext& sc, const Matrix& matrix, float z_pos) const;
   
   /**
@@ -123,7 +123,7 @@
   
 private:  
   friend class Sprite3DDrawingRequest;
-  void draw(const Vector& pos, const Matrix& modelview) const;
+  void draw(const Vector2f& pos, const Matrix& modelview) const;
   
   struct Frame {
     const sprite3d::Action* action;

Modified: trunk/windstille/src/tile/tile_map.cpp
===================================================================
--- trunk/windstille/src/tile/tile_map.cpp	2009-02-12 16:17:28 UTC (rev 2477)
+++ trunk/windstille/src/tile/tile_map.cpp	2009-02-12 16:33:35 UTC (rev 2478)
@@ -136,7 +136,7 @@
             VertexArrayDrawingRequest*& request = requests[packer];
             if (!request)
               {
-                request = new VertexArrayDrawingRequest(Vector(0, 0), z_pos,
+                request = new VertexArrayDrawingRequest(Vector2f(0, 0), z_pos,
                                                         sc.color().get_modelview());
                 request->set_mode(GL_QUADS);
                 request->set_blend_func(GL_SRC_ALPHA, GL_ONE_MINUS_SRC_ALPHA);
@@ -219,8 +219,8 @@
     }
 }
 
-Vector
-TileMap::raycast(const Vector& pos, float angle)
+Vector2f
+TileMap::raycast(const Vector2f& pos, float angle)
 {
   ////////////////////////////////////////////
   // FIXME: This code is buggy, use code from LaserPointer instead
@@ -230,7 +230,7 @@
   int x = static_cast<int>(pos.x / TILE_SIZE);
   int y = static_cast<int>(pos.y / TILE_SIZE);
 
-  Vector direction(cos(angle) * 100.0f, sin(angle) * 100.0f);
+  Vector2f direction(cos(angle) * 100.0f, sin(angle) * 100.0f);
 
   int step_x = (direction.x > 0) ? 1 : -1;
   int step_y = (direction.y > 0) ? 1 : -1;
@@ -249,7 +249,7 @@
       Tile* tile = field(x, y);  
       if (tile && tile->colmap)
         {
-          return pos + Vector(t * direction.x, t * direction.y);
+          return pos + Vector2f(t * direction.x, t * direction.y);
         }
 
       // move one tile
@@ -268,7 +268,7 @@
     }
 
   // Ray got out of the map
-  return pos + Vector(t * direction.x, t * direction.y);
+  return pos + Vector2f(t * direction.x, t * direction.y);
 }
 
 /* EOF */

Modified: trunk/windstille/src/tile/tile_map.hpp
===================================================================
--- trunk/windstille/src/tile/tile_map.hpp	2009-02-12 16:17:28 UTC (rev 2477)
+++ trunk/windstille/src/tile/tile_map.hpp	2009-02-12 16:33:35 UTC (rev 2478)
@@ -56,7 +56,7 @@
 
   /** Shoots a ray from \a pos into direction \a angle, returns the
       position were the ray collides with the tilemap */
-  Vector raycast(const Vector& pos, float angle);
+  Vector2f raycast(const Vector2f& pos, float angle);
 };
 
 #endif

Modified: trunk/windstille/src/tile/tile_packer.cpp
===================================================================
--- trunk/windstille/src/tile/tile_packer.cpp	2009-02-12 16:17:28 UTC (rev 2477)
+++ trunk/windstille/src/tile/tile_packer.cpp	2009-02-12 16:33:35 UTC (rev 2478)
@@ -96,7 +96,7 @@
 
   assert_gl("updating tilepacker texture");
 
-  Rectf rect(Vector(static_cast<float>(impl->x_pos+1)/impl->width, 
+  Rectf rect(Vector2f(static_cast<float>(impl->x_pos+1)/impl->width, 
                     static_cast<float>(impl->y_pos+1)/impl->height), 
              Sizef(static_cast<float>(TILE_RESOLUTION)/impl->width, 
                    static_cast<float>(TILE_RESOLUTION)/impl->height));

Modified: trunk/windstille/src/util/file_reader_impl.hpp
===================================================================
--- trunk/windstille/src/util/file_reader_impl.hpp	2009-02-12 16:17:28 UTC (rev 2477)
+++ trunk/windstille/src/util/file_reader_impl.hpp	2009-02-12 16:33:35 UTC (rev 2478)
@@ -24,7 +24,7 @@
 
 class Size;
 class Color;
-class Vector;
+class Vector2f;
 class Vector3;
 
 class FileReader;

Modified: trunk/windstille/src/util/getter.cpp
===================================================================
--- trunk/windstille/src/util/getter.cpp	2009-02-12 16:17:28 UTC (rev 2477)
+++ trunk/windstille/src/util/getter.cpp	2009-02-12 16:33:35 UTC (rev 2478)
@@ -24,7 +24,7 @@
 #include "file_reader.hpp"
 #include "getter.hpp"
 
-bool get(FileReader& reader, const char* name, Vector&  value)
+bool get(FileReader& reader, const char* name, Vector2f&  value)
 {
   std::vector<float> floats;
   if (reader.get(name, floats) && floats.size() == 2) {

Modified: trunk/windstille/src/util/getter.hpp
===================================================================
--- trunk/windstille/src/util/getter.hpp	2009-02-12 16:17:28 UTC (rev 2477)
+++ trunk/windstille/src/util/getter.hpp	2009-02-12 16:33:35 UTC (rev 2478)
@@ -24,14 +24,14 @@
 class FileReader;
 class Quaternion;
 class Color;
-class Vector;
+class Vector2f;
 class Vector3;
 class Matrix;
 
 bool get(FileReader& reader, const char* name, Matrix& value);
 bool get(FileReader& reader, const char* name, Quaternion& value);
 bool get(FileReader& reader, const char* name, Color& value);
-bool get(FileReader& reader, const char* name, Vector&  value);
+bool get(FileReader& reader, const char* name, Vector2f& value);
 bool get(FileReader& reader, const char* name, Vector3& value);
 
 // Primitive types



From grumbel at mail.berlios.de  Thu Feb 12 17:38:12 2009
From: grumbel at mail.berlios.de (grumbel at BerliOS)
Date: Thu, 12 Feb 2009 17:38:12 +0100
Subject: [Windstille-commit] r2479 - in trunk/windstille/src: . armature
	collision display engine math navigation objects particles
	screen sound sprite2d sprite3d util
Message-ID: <200902121638.n1CGcC0L001227@sheep.berlios.de>

Author: grumbel
Date: 2009-02-12 17:38:11 +0100 (Thu, 12 Feb 2009)
New Revision: 2479

Added:
   trunk/windstille/src/math/vector2f.cpp
   trunk/windstille/src/math/vector2f.hpp
Removed:
   trunk/windstille/src/math/vector.cpp
   trunk/windstille/src/math/vector.hpp
Modified:
   trunk/windstille/src/SConscript
   trunk/windstille/src/armature/mesh.hpp
   trunk/windstille/src/collision/collision_data.hpp
   trunk/windstille/src/collision/collision_object.hpp
   trunk/windstille/src/display/drawing_context.hpp
   trunk/windstille/src/display/drawing_request.hpp
   trunk/windstille/src/display/graphic_context_state.hpp
   trunk/windstille/src/display/surface.cpp
   trunk/windstille/src/display/surface_drawing_parameters.hpp
   trunk/windstille/src/engine/entity.hpp
   trunk/windstille/src/math/line.hpp
   trunk/windstille/src/math/origin.hpp
   trunk/windstille/src/math/point.hpp
   trunk/windstille/src/math/rect.hpp
   trunk/windstille/src/navigation/node.hpp
   trunk/windstille/src/navigation/segment.hpp
   trunk/windstille/src/navigation/segment_position.hpp
   trunk/windstille/src/objects/box.cpp
   trunk/windstille/src/objects/player.hpp
   trunk/windstille/src/objects/test_object.hpp
   trunk/windstille/src/particles/particle_system.cpp
   trunk/windstille/src/screen/geometry_test.hpp
   trunk/windstille/src/screen/view.hpp
   trunk/windstille/src/sound/sound_manager.hpp
   trunk/windstille/src/sound/sound_source.hpp
   trunk/windstille/src/sprite2d/data.hpp
   trunk/windstille/src/sprite2d/sprite.hpp
   trunk/windstille/src/sprite3d/sprite3d.hpp
   trunk/windstille/src/util/getter.cpp
   trunk/windstille/src/util/sexpr_file_reader.cpp
Log:
Renamed Vector to Vector2f

Modified: trunk/windstille/src/SConscript
===================================================================
--- trunk/windstille/src/SConscript	2009-02-12 16:33:35 UTC (rev 2478)
+++ trunk/windstille/src/SConscript	2009-02-12 16:38:11 UTC (rev 2479)
@@ -116,7 +116,7 @@
 'math/quaternion.cpp',
 'math/random.cpp',
 'math/rect.cpp',
-'math/vector.cpp',
+'math/vector2f.cpp',
 'navigation/navigation_graph.cpp',
 'navigation/node.cpp',
 'navigation/properties.cpp',

Modified: trunk/windstille/src/armature/mesh.hpp
===================================================================
--- trunk/windstille/src/armature/mesh.hpp	2009-02-12 16:33:35 UTC (rev 2478)
+++ trunk/windstille/src/armature/mesh.hpp	2009-02-12 16:38:11 UTC (rev 2479)
@@ -23,7 +23,7 @@
 #include <GL/gl.h>
 #include <string>
 #include <vector>
-#include "math/vector.hpp"
+#include "math/vector2f.hpp"
 #include "math/vector3.hpp"
 #include "display/texture.hpp"
 

Modified: trunk/windstille/src/collision/collision_data.hpp
===================================================================
--- trunk/windstille/src/collision/collision_data.hpp	2009-02-12 16:33:35 UTC (rev 2478)
+++ trunk/windstille/src/collision/collision_data.hpp	2009-02-12 16:38:11 UTC (rev 2479)
@@ -21,7 +21,7 @@
 #define HEADER_WINDSTILLE_COLLISION_COLLISION_DATA_HPP
 
 #include <iostream>
-#include "math/vector.hpp"
+#include "math/vector2f.hpp"
 
 class CollisionObject;
 

Modified: trunk/windstille/src/collision/collision_object.hpp
===================================================================
--- trunk/windstille/src/collision/collision_object.hpp	2009-02-12 16:33:35 UTC (rev 2478)
+++ trunk/windstille/src/collision/collision_object.hpp	2009-02-12 16:38:11 UTC (rev 2479)
@@ -21,7 +21,7 @@
 #define HEADER_WINDSTILLE_COLLISION_COLLISION_OBJECT_HPP
 
 #include <boost/signals.hpp>
-#include "math/vector.hpp"
+#include "math/vector2f.hpp"
 #include "math/rect.hpp"
 #include "collision_data.hpp"
 

Modified: trunk/windstille/src/display/drawing_context.hpp
===================================================================
--- trunk/windstille/src/display/drawing_context.hpp	2009-02-12 16:33:35 UTC (rev 2478)
+++ trunk/windstille/src/display/drawing_context.hpp	2009-02-12 16:38:11 UTC (rev 2479)
@@ -19,7 +19,7 @@
 #ifndef HEADER_WINDSTILLE_DISPLAY_DRAWING_CONTEXT_HPP
 #define HEADER_WINDSTILLE_DISPLAY_DRAWING_CONTEXT_HPP
 
-#include "math/vector.hpp"
+#include "math/vector2f.hpp"
 #include "math/matrix.hpp"
 #include "math/rect.hpp"
 #include <vector>

Modified: trunk/windstille/src/display/drawing_request.hpp
===================================================================
--- trunk/windstille/src/display/drawing_request.hpp	2009-02-12 16:33:35 UTC (rev 2478)
+++ trunk/windstille/src/display/drawing_request.hpp	2009-02-12 16:38:11 UTC (rev 2479)
@@ -19,7 +19,7 @@
 #ifndef HEADER_WINDSTILLE_DISPLAY_DRAWING_REQUEST_HPP
 #define HEADER_WINDSTILLE_DISPLAY_DRAWING_REQUEST_HPP
 
-#include "math/vector.hpp"
+#include "math/vector2f.hpp"
 #include "math/rect.hpp"
 #include "math/matrix.hpp"
 #include "texture.hpp"

Modified: trunk/windstille/src/display/graphic_context_state.hpp
===================================================================
--- trunk/windstille/src/display/graphic_context_state.hpp	2009-02-12 16:33:35 UTC (rev 2478)
+++ trunk/windstille/src/display/graphic_context_state.hpp	2009-02-12 16:38:11 UTC (rev 2479)
@@ -19,7 +19,7 @@
 #define HEADER_WINDSTILLE_GRAPHIC_CONTEXT_STATE_HPP
 
 #include "math/rect.hpp"
-#include "math/vector.hpp"
+#include "math/vector2f.hpp"
 #include <boost/shared_ptr.hpp>
 
 class SceneContext;

Modified: trunk/windstille/src/display/surface.cpp
===================================================================
--- trunk/windstille/src/display/surface.cpp	2009-02-12 16:33:35 UTC (rev 2478)
+++ trunk/windstille/src/display/surface.cpp	2009-02-12 16:38:11 UTC (rev 2479)
@@ -17,7 +17,7 @@
 */
 
 #include "surface.hpp"
-#include "math/vector.hpp"
+#include "math/vector2f.hpp"
 #include "display/opengl_state.hpp"
 #include "surface_drawing_parameters.hpp"
 #include "surface_manager.hpp"

Modified: trunk/windstille/src/display/surface_drawing_parameters.hpp
===================================================================
--- trunk/windstille/src/display/surface_drawing_parameters.hpp	2009-02-12 16:33:35 UTC (rev 2478)
+++ trunk/windstille/src/display/surface_drawing_parameters.hpp	2009-02-12 16:38:11 UTC (rev 2479)
@@ -21,7 +21,7 @@
 
 #include <GL/glew.h>
 #include <GL/gl.h>
-#include "math/vector.hpp"
+#include "math/vector2f.hpp"
 #include "color.hpp"
 
 /** Helper class which holds all the parameters that you can tweak

Modified: trunk/windstille/src/engine/entity.hpp
===================================================================
--- trunk/windstille/src/engine/entity.hpp	2009-02-12 16:33:35 UTC (rev 2478)
+++ trunk/windstille/src/engine/entity.hpp	2009-02-12 16:38:11 UTC (rev 2479)
@@ -20,7 +20,7 @@
 #define HEADER_WINDSTILLE_ENTITY_HPP
 
 #include <boost/signal.hpp>
-#include "math/vector.hpp"
+#include "math/vector2f.hpp"
 #include "engine/game_object.hpp"
 #include "collision/collision_object.hpp"
 

Modified: trunk/windstille/src/math/line.hpp
===================================================================
--- trunk/windstille/src/math/line.hpp	2009-02-12 16:33:35 UTC (rev 2478)
+++ trunk/windstille/src/math/line.hpp	2009-02-12 16:38:11 UTC (rev 2479)
@@ -19,7 +19,7 @@
 #ifndef HEADER_WINDSTILLE_MATH_LINE_HPP
 #define HEADER_WINDSTILLE_MATH_LINE_HPP
 
-#include "math/vector.hpp"
+#include "math/vector2f.hpp"
 
 /** */
 class Line

Modified: trunk/windstille/src/math/origin.hpp
===================================================================
--- trunk/windstille/src/math/origin.hpp	2009-02-12 16:33:35 UTC (rev 2478)
+++ trunk/windstille/src/math/origin.hpp	2009-02-12 16:38:11 UTC (rev 2479)
@@ -35,7 +35,7 @@
 
 #include "size.hpp"
 #include "point.hpp"
-#include "vector.hpp"
+#include "vector2f.hpp"
 
 namespace origin {
 

Modified: trunk/windstille/src/math/point.hpp
===================================================================
--- trunk/windstille/src/math/point.hpp	2009-02-12 16:33:35 UTC (rev 2478)
+++ trunk/windstille/src/math/point.hpp	2009-02-12 16:38:11 UTC (rev 2479)
@@ -38,7 +38,7 @@
 #endif
 
 #include <cmath>
-#include "vector.hpp"
+#include "vector2f.hpp"
 
 class Vector2f;
 

Modified: trunk/windstille/src/math/rect.hpp
===================================================================
--- trunk/windstille/src/math/rect.hpp	2009-02-12 16:33:35 UTC (rev 2478)
+++ trunk/windstille/src/math/rect.hpp	2009-02-12 16:38:11 UTC (rev 2479)
@@ -31,7 +31,7 @@
 #define __MATH_RECT_HPP__
 
 #include "math/origin.hpp"
-#include "math/vector.hpp"
+#include "math/vector2f.hpp"
 #include "math/size.hpp"
 
 class Rectf;

Deleted: trunk/windstille/src/math/vector.cpp
===================================================================
--- trunk/windstille/src/math/vector.cpp	2009-02-12 16:33:35 UTC (rev 2478)
+++ trunk/windstille/src/math/vector.cpp	2009-02-12 16:38:11 UTC (rev 2479)
@@ -1,79 +0,0 @@
-//  SuperTux -  A Jump'n Run
-//  Copyright (C) 2004 Matthias Braun <matze at braunis.de
-//
-//  This program is free software; you can redistribute it and/or
-//  modify it under the terms of the GNU General Public License
-//  as published by the Free Software Foundation; either version 2
-//  of the License, or (at your option) any later version.
-//
-//  This program is distributed in the hope that it will be useful,
-//  but WITHOUT ANY WARRANTY; without even the implied warranty of
-//  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
-//  GNU General Public License for more details.
-//
-//  You should have received a copy of the GNU General Public License
-//  along with this program; if not, write to the Free Software
-//  Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA.
-
-#include <cmath>
-#include <iostream>
-#include "math/vector.hpp"
-
-void
-Vector2f::normalize()
-{
-  float mag = magnitude();
-  x /= mag;
-  y /= mag;
-}
-
-Vector2f Vector2f::unit() const
-{
-  return *this / magnitude();
-}
-
-float
-Vector2f::magnitude() const
-{
-  return sqrt(x*x + y*y);
-}
-
-Vector2f
-Vector2f::rotate(float angle) const
-{
-  float len = magnitude();
-  return Vector2f(len * cos(angle), len * sin(angle));
-}
-
-Vector2f
-Vector2f::project(const Vector2f& b)
-{
-  float dp = this->dot(b);
-  return Vector2f((dp / (b.x*b.x + b.y*b.y) ) * b.x,
-                (dp / (b.x*b.x + b.y*b.y) ) * b.y);
-}
-
-float
-Vector2f::dot(const Vector2f& b)
-{
-  return (x * b.x + y * b.y);
-}
-
-bool
-Vector2f::is_null() const
-{
-  return (x == 0.0f && y == 0.0f);
-}
-
-std::ostream& operator<<(std::ostream& s, const Vector2f& v)
-{
-  s << "(" << v.x << ", " << v.y << ")";
-  return s;
-}
-
-Vector2f operator*(float s, const Vector2f& v)
-{
-  return Vector2f(v.x * s, v.y * s);
-}
-
-/* EOF */

Deleted: trunk/windstille/src/math/vector.hpp
===================================================================
--- trunk/windstille/src/math/vector.hpp	2009-02-12 16:33:35 UTC (rev 2478)
+++ trunk/windstille/src/math/vector.hpp	2009-02-12 16:38:11 UTC (rev 2479)
@@ -1,140 +0,0 @@
-//  SuperTux -  A Jump'n Run
-//  Copyright (C) 2004 Matthias Braun <matze at braunis.de>
-//
-//  This program is free software; you can redistribute it and/or
-//  modify it under the terms of the GNU General Public License
-//  as published by the Free Software Foundation; either version 2
-//  of the License, or (at your option) any later version.
-//
-//  This program is distributed in the hope that it will be useful,
-//  but WITHOUT ANY WARRANTY; without even the implied warranty of
-//  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
-//  GNU General Public License for more details.
-//
-//  You should have received a copy of the GNU General Public License
-//  along with this program; if not, write to the Free Software
-//  Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA.
-
-#ifndef SUPERTUX_VECTOR_H
-#define SUPERTUX_VECTOR_H
-
-#include <iosfwd>
-
-/** Simple two dimensional vector. */
-class Vector2f
-{
-public:
-  Vector2f(float nx, float ny)
-      : x(nx), y(ny)
-  { }
-  Vector2f(const Vector2f& other)
-      : x(other.x), y(other.y)
-  { }
-  Vector2f()
-      : x(0), y(0)
-  { }
-
-  bool operator ==(const Vector2f& other) const
-    {
-      return x == other.x && y == other.y;
-    }
-
-  bool operator !=(const Vector2f& other) const
-    {
-      return !(x == other.x && y == other.y);
-    }
-
-  const Vector2f& operator=(const Vector2f& other)
-  {
-    x = other.x;
-    y = other.y;
-    return *this;
-  }
-
-  Vector2f operator+(const Vector2f& other) const
-    {
-      return Vector2f(x + other.x, y + other.y);
-    }
-
-  Vector2f operator-(const Vector2f& other) const
-    {
-      return Vector2f(x - other.x, y - other.y);
-    }
-
-  Vector2f operator*(float s) const
-    {
-      return Vector2f(x * s, y * s);
-    }
-
-  Vector2f operator/(float s) const
-    {
-      return Vector2f(x / s, y / s);
-    }
-
-  Vector2f operator-() const
-    {
-      return Vector2f(-x, -y);
-    }
-
-  const Vector2f& operator +=(const Vector2f& other)
-  {
-    x += other.x;
-    y += other.y;
-    return *this;
-  }
-
-  const Vector2f& operator -=(const Vector2f& other)
-  {
-    x -= other.x;
-    y -= other.y;
-    return *this;
-  }
-
-  const Vector2f& operator *=(float val)
-  {
-    x *= val;
-    y *= val;
-    return *this;
-  }
-
-  const Vector2f& operator /=(float val)
-  {
-    x /= val;
-    y /= val;
-    return *this;
-  }
-
-  /** Takes angle in radian and returns a copy of the vector rotated
-      by \a angle */
-  Vector2f rotate(float angle) const;
-
-  /// Scalar product of 2 vectors
-  float operator*(const Vector2f& other) const
-    {
-      return x*other.x + y*other.y;
-    }
-
-  /** Project vecter a onto vector b and return the resulting vector */
-  Vector2f project(const Vector2f& b);
-
-  float magnitude() const;
-  float length() const { return magnitude(); }
-
-  Vector2f unit() const;
-  void   normalize();
-
-  float dot(const Vector2f& b);
-
-  bool is_null() const;
-
-  // ... add the other operators as needed, I'm too lazy now ...
-
-  float x, y; // leave this public, get/set methods just give me headaches
-  // for such simple stuff :)
-};
-
-std::ostream& operator<<(std::ostream& s, const Vector2f& v);
-Vector2f        operator*(float s, const Vector2f& v);
-
-#endif
-

Copied: trunk/windstille/src/math/vector2f.cpp (from rev 2478, trunk/windstille/src/math/vector.cpp)
===================================================================
--- trunk/windstille/src/math/vector.cpp	2009-02-12 16:33:35 UTC (rev 2478)
+++ trunk/windstille/src/math/vector2f.cpp	2009-02-12 16:38:11 UTC (rev 2479)
@@ -0,0 +1,79 @@
+//  SuperTux -  A Jump'n Run
+//  Copyright (C) 2004 Matthias Braun <matze at braunis.de
+//
+//  This program is free software; you can redistribute it and/or
+//  modify it under the terms of the GNU General Public License
+//  as published by the Free Software Foundation; either version 2
+//  of the License, or (at your option) any later version.
+//
+//  This program is distributed in the hope that it will be useful,
+//  but WITHOUT ANY WARRANTY; without even the implied warranty of
+//  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+//  GNU General Public License for more details.
+//
+//  You should have received a copy of the GNU General Public License
+//  along with this program; if not, write to the Free Software
+//  Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA.
+
+#include <cmath>
+#include <iostream>
+#include "math/vector2f.hpp"
+
+void
+Vector2f::normalize()
+{
+  float mag = magnitude();
+  x /= mag;
+  y /= mag;
+}
+
+Vector2f Vector2f::unit() const
+{
+  return *this / magnitude();
+}
+
+float
+Vector2f::magnitude() const
+{
+  return sqrt(x*x + y*y);
+}
+
+Vector2f
+Vector2f::rotate(float angle) const
+{
+  float len = magnitude();
+  return Vector2f(len * cos(angle), len * sin(angle));
+}
+
+Vector2f
+Vector2f::project(const Vector2f& b)
+{
+  float dp = this->dot(b);
+  return Vector2f((dp / (b.x*b.x + b.y*b.y) ) * b.x,
+                (dp / (b.x*b.x + b.y*b.y) ) * b.y);
+}
+
+float
+Vector2f::dot(const Vector2f& b)
+{
+  return (x * b.x + y * b.y);
+}
+
+bool
+Vector2f::is_null() const
+{
+  return (x == 0.0f && y == 0.0f);
+}
+
+std::ostream& operator<<(std::ostream& s, const Vector2f& v)
+{
+  s << "(" << v.x << ", " << v.y << ")";
+  return s;
+}
+
+Vector2f operator*(float s, const Vector2f& v)
+{
+  return Vector2f(v.x * s, v.y * s);
+}
+
+/* EOF */


Property changes on: trunk/windstille/src/math/vector2f.cpp
___________________________________________________________________
Name: svn:mergeinfo
   + 

Copied: trunk/windstille/src/math/vector2f.hpp (from rev 2478, trunk/windstille/src/math/vector.hpp)


Property changes on: trunk/windstille/src/math/vector2f.hpp
___________________________________________________________________
Name: svn:mergeinfo
   + 
Name: svn:eol-style
   + native

Modified: trunk/windstille/src/navigation/node.hpp
===================================================================
--- trunk/windstille/src/navigation/node.hpp	2009-02-12 16:33:35 UTC (rev 2478)
+++ trunk/windstille/src/navigation/node.hpp	2009-02-12 16:38:11 UTC (rev 2479)
@@ -20,7 +20,7 @@
 #define HEADER_WINDSTILLE_NAVIGATION_NODE_HPP
 
 #include <vector>
-#include "math/vector.hpp"
+#include "math/vector2f.hpp"
 
 #include "segment_position.hpp"
 

Modified: trunk/windstille/src/navigation/segment.hpp
===================================================================
--- trunk/windstille/src/navigation/segment.hpp	2009-02-12 16:33:35 UTC (rev 2478)
+++ trunk/windstille/src/navigation/segment.hpp	2009-02-12 16:38:11 UTC (rev 2479)
@@ -20,7 +20,7 @@
 #define HEADER_WINDSTILLE_NAVIGATION_SEGMENT_HPP
 
 #include "math/line.hpp"
-#include "math/vector.hpp"
+#include "math/vector2f.hpp"
 #include "properties.hpp"
 
 class Node;

Modified: trunk/windstille/src/navigation/segment_position.hpp
===================================================================
--- trunk/windstille/src/navigation/segment_position.hpp	2009-02-12 16:33:35 UTC (rev 2478)
+++ trunk/windstille/src/navigation/segment_position.hpp	2009-02-12 16:38:11 UTC (rev 2479)
@@ -19,7 +19,7 @@
 #ifndef HEADER_WINDSTILLE_NAVIGATION_SEGMENT_POSITION_HPP
 #define HEADER_WINDSTILLE_NAVIGATION_SEGMENT_POSITION_HPP
 
-#include "math/vector.hpp"
+#include "math/vector2f.hpp"
 
 class Segment;
 class Node;

Modified: trunk/windstille/src/objects/box.cpp
===================================================================
--- trunk/windstille/src/objects/box.cpp	2009-02-12 16:33:35 UTC (rev 2478)
+++ trunk/windstille/src/objects/box.cpp	2009-02-12 16:38:11 UTC (rev 2479)
@@ -21,7 +21,7 @@
 #include "box.hpp"
 #include "app/globals.hpp"
 #include "collision/collision_engine.hpp"
-#include "math/vector.hpp"
+#include "math/vector2f.hpp"
 #include "tile/tile_map.hpp"
 #include "math/random.hpp"
 #include "sprite2d/manager.hpp"

Modified: trunk/windstille/src/objects/player.hpp
===================================================================
--- trunk/windstille/src/objects/player.hpp	2009-02-12 16:33:35 UTC (rev 2478)
+++ trunk/windstille/src/objects/player.hpp	2009-02-12 16:38:11 UTC (rev 2479)
@@ -24,7 +24,7 @@
 #include "input/controller.hpp"
 #include "sprite3d/sprite3d.hpp"
 #include "sound/sound_source.hpp"
-#include "math/vector.hpp"
+#include "math/vector2f.hpp"
 #include "app/globals.hpp"
 #include "engine/entity.hpp"
 #include "util/ref.hpp"

Modified: trunk/windstille/src/objects/test_object.hpp
===================================================================
--- trunk/windstille/src/objects/test_object.hpp	2009-02-12 16:33:35 UTC (rev 2478)
+++ trunk/windstille/src/objects/test_object.hpp	2009-02-12 16:38:11 UTC (rev 2479)
@@ -22,7 +22,7 @@
 #include <vector>
 #include "engine/game_object.hpp"
 #include "sprite3d/sprite3d.hpp"
-#include "math/vector.hpp"
+#include "math/vector2f.hpp"
 
 class TestObject : public GameObject
 {

Modified: trunk/windstille/src/particles/particle_system.cpp
===================================================================
--- trunk/windstille/src/particles/particle_system.cpp	2009-02-12 16:33:35 UTC (rev 2478)
+++ trunk/windstille/src/particles/particle_system.cpp	2009-02-12 16:38:11 UTC (rev 2479)
@@ -20,7 +20,7 @@
 #include <iostream>
 #include "particle_system.hpp"
 #include "display/scene_context.hpp"
-#include "math/vector.hpp"
+#include "math/vector2f.hpp"
 #include "display/color.hpp"
 #include "util/file_reader.hpp"
 #include "spark_drawer.hpp"

Modified: trunk/windstille/src/screen/geometry_test.hpp
===================================================================
--- trunk/windstille/src/screen/geometry_test.hpp	2009-02-12 16:33:35 UTC (rev 2478)
+++ trunk/windstille/src/screen/geometry_test.hpp	2009-02-12 16:38:11 UTC (rev 2479)
@@ -20,7 +20,7 @@
 #define HEADER_WINDSTILLE_GEOMETRY_TEST_HPP
 
 #include "screen.hpp"
-#include "math/vector.hpp"
+#include "math/vector2f.hpp"
 #include "math/line.hpp"
 
 /** */

Modified: trunk/windstille/src/screen/view.hpp
===================================================================
--- trunk/windstille/src/screen/view.hpp	2009-02-12 16:33:35 UTC (rev 2478)
+++ trunk/windstille/src/screen/view.hpp	2009-02-12 16:38:11 UTC (rev 2479)
@@ -21,7 +21,7 @@
 
 #include "display/graphic_context_state.hpp"
 #include "engine/camera.hpp"
-#include "math/vector.hpp"
+#include "math/vector2f.hpp"
 
 class Controller;
 class SceneContext;

Modified: trunk/windstille/src/sound/sound_manager.hpp
===================================================================
--- trunk/windstille/src/sound/sound_manager.hpp	2009-02-12 16:33:35 UTC (rev 2478)
+++ trunk/windstille/src/sound/sound_manager.hpp	2009-02-12 16:38:11 UTC (rev 2479)
@@ -26,7 +26,7 @@
 #include <AL/alc.h>
 #include <AL/al.h>
 
-#include "math/vector.hpp"
+#include "math/vector2f.hpp"
 
 typedef void* SoundHandle;
 

Modified: trunk/windstille/src/sound/sound_source.hpp
===================================================================
--- trunk/windstille/src/sound/sound_source.hpp	2009-02-12 16:33:35 UTC (rev 2478)
+++ trunk/windstille/src/sound/sound_source.hpp	2009-02-12 16:38:11 UTC (rev 2479)
@@ -20,7 +20,7 @@
 #define HEADER_WINDSTILLE_SOUND_SOUND_SOURCE_HPP
 
 #include <AL/al.h>
-#include "math/vector.hpp"
+#include "math/vector2f.hpp"
 
 class SoundSource
 {

Modified: trunk/windstille/src/sprite2d/data.hpp
===================================================================
--- trunk/windstille/src/sprite2d/data.hpp	2009-02-12 16:33:35 UTC (rev 2478)
+++ trunk/windstille/src/sprite2d/data.hpp	2009-02-12 16:38:11 UTC (rev 2479)
@@ -26,7 +26,7 @@
 #include <GL/gl.h>
 #include "util/util.hpp"
 #include "util/file_reader.hpp"
-#include "math/vector.hpp"
+#include "math/vector2f.hpp"
 #include "display/surface.hpp"
 #include "util/ref.hpp"
 

Modified: trunk/windstille/src/sprite2d/sprite.hpp
===================================================================
--- trunk/windstille/src/sprite2d/sprite.hpp	2009-02-12 16:33:35 UTC (rev 2478)
+++ trunk/windstille/src/sprite2d/sprite.hpp	2009-02-12 16:38:11 UTC (rev 2479)
@@ -25,7 +25,7 @@
 #include <GL/gl.h>
 #include "display/color.hpp"
 #include "display/surface.hpp"
-#include "math/vector.hpp"
+#include "math/vector2f.hpp"
 #include "math/matrix.hpp"
 #include "manager.hpp"
 

Modified: trunk/windstille/src/sprite3d/sprite3d.hpp
===================================================================
--- trunk/windstille/src/sprite3d/sprite3d.hpp	2009-02-12 16:33:35 UTC (rev 2478)
+++ trunk/windstille/src/sprite3d/sprite3d.hpp	2009-02-12 16:38:11 UTC (rev 2479)
@@ -23,7 +23,7 @@
 #include <stdint.h>
 #include "engine/game_object.hpp"
 #include "display/scene_context.hpp"
-#include "math/vector.hpp"
+#include "math/vector2f.hpp"
 #include "math/matrix.hpp"
 #include "sprite3d/data.hpp"
 

Modified: trunk/windstille/src/util/getter.cpp
===================================================================
--- trunk/windstille/src/util/getter.cpp	2009-02-12 16:33:35 UTC (rev 2478)
+++ trunk/windstille/src/util/getter.cpp	2009-02-12 16:38:11 UTC (rev 2479)
@@ -16,7 +16,7 @@
 **  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
-#include "math/vector.hpp"
+#include "math/vector2f.hpp"
 #include "math/vector3.hpp"
 #include "math/quaternion.hpp"
 #include "math/matrix.hpp"

Modified: trunk/windstille/src/util/sexpr_file_reader.cpp
===================================================================
--- trunk/windstille/src/util/sexpr_file_reader.cpp	2009-02-12 16:33:35 UTC (rev 2478)
+++ trunk/windstille/src/util/sexpr_file_reader.cpp	2009-02-12 16:38:11 UTC (rev 2479)
@@ -22,7 +22,7 @@
 #include "lisp/getters.hpp"
 #include "display/color.hpp"
 #include "math/size.hpp"
-#include "math/vector.hpp"
+#include "math/vector2f.hpp"
 #include "math/vector3.hpp"
 #include "file_reader_impl.hpp"
 #include "sexpr_file_reader.hpp"



From grumbel at mail.berlios.de  Thu Feb 12 17:55:44 2009
From: grumbel at mail.berlios.de (grumbel at BerliOS)
Date: Thu, 12 Feb 2009 17:55:44 +0100
Subject: [Windstille-commit] r2480 - trunk/windstille/src/gui
Message-ID: <200902121655.n1CGti33002808@sheep.berlios.de>

Author: grumbel
Date: 2009-02-12 17:55:43 +0100 (Thu, 12 Feb 2009)
New Revision: 2480

Modified:
   trunk/windstille/src/gui/menu_component.cpp
   trunk/windstille/src/gui/menu_item.cpp
   trunk/windstille/src/gui/menu_item.hpp
Log:
Added simplistic fade effect to the menu

Modified: trunk/windstille/src/gui/menu_component.cpp
===================================================================
--- trunk/windstille/src/gui/menu_component.cpp	2009-02-12 16:38:11 UTC (rev 2479)
+++ trunk/windstille/src/gui/menu_component.cpp	2009-02-12 16:55:43 UTC (rev 2480)
@@ -101,6 +101,11 @@
 void
 MenuComponent::update(float delta, const Controller& controller)
 {
+  for(Items::size_type i = 0; i < items.size(); ++i)
+    {
+      items[i]->update(delta);
+    }
+
   for(InputEventLst::const_iterator i = controller.get_events().begin(); 
       i != controller.get_events().end(); 
       ++i)

Modified: trunk/windstille/src/gui/menu_item.cpp
===================================================================
--- trunk/windstille/src/gui/menu_item.cpp	2009-02-12 16:38:11 UTC (rev 2479)
+++ trunk/windstille/src/gui/menu_item.cpp	2009-02-12 16:55:43 UTC (rev 2480)
@@ -27,7 +27,8 @@
 
 MenuItem::MenuItem(MenuComponent* parent_, const std::string& label_)
   : parent(parent_),
-    label(label_)
+    label(label_),
+    fade_timer(0.0f)
 {}
 
 void
@@ -36,15 +37,29 @@
   Color font_color;
   TTFFont* font = parent->get_font();
   
-  if (is_active) {
-    Display::fill_rounded_rect(rect, 5.0f, Color(0.5f, 0.5f, 0.5f, 0.75f));
-    Display::draw_rounded_rect(rect, 5.0f, Color(1.0f, 1.0f, 1.0f, 1.0f));
-    font_color = Color(1.0f, 1.0f, 1.0f);
-  } else {
-    //Display::fill_rounded_rect(rect, 5.0f, Color(0.3f, 0.3f, 0.3f, 0.75f));
-    //Display::draw_rounded_rect(rect, 5.0f, Color(1.0f, 1.0f, 1.0f, 0.75f));
-    font_color = Color(0.75f, 0.75f, 0.75f, 1.0f);
-  }
+  if (is_active) 
+    {
+      Display::fill_rounded_rect(rect, 5.0f, Color(0.5f, 0.5f, 0.5f, 0.75f));
+      Display::draw_rounded_rect(rect, 5.0f, Color(1.0f, 1.0f, 1.0f, 1.0f));
+      font_color = Color(1.0f, 1.0f, 1.0f);
+      fade_timer = 1.0f;
+    } 
+  else 
+    {
+      if (fade_timer != 0.0f)
+        {
+          Display::fill_rounded_rect(rect, 5.0f, Color(0.5f, 0.5f, 0.5f, 0.75f * fade_timer));
+          Display::draw_rounded_rect(rect, 5.0f, Color(1.0f, 1.0f, 1.0f, 1.0f * fade_timer));
+          font_color = Color(0.75f + 0.25f * fade_timer, 
+                             0.75f + 0.25f * fade_timer, 
+                             0.75f + 0.25f * fade_timer, 
+                             1.0f);
+        }
+      else
+        {
+          font_color = Color(0.75f, 0.75f, 0.75f, 1.0f);
+        }
+    }
 
   font->draw(Vector2f(rect.left + font->get_height(), rect.top + font->get_height()/2.0f + rect.get_height()/2.0f - 2.0f),
              label, font_color);
@@ -53,7 +68,10 @@
 void
 MenuItem::update(float delta)
 {
-  
+  if (fade_timer > 0.0f)
+    fade_timer -= delta / 0.25f;
+  else
+    fade_timer = 0.0f;
 }
 
 EnumMenuItem::EnumMenuItem(MenuComponent* parent_, 
@@ -114,12 +132,6 @@
              labels[index].label,
              font_color);
 }
-
-void 
-EnumMenuItem::update(float delta)
-{
-  MenuItem::update(delta);
-}
 
 SliderMenuItem::SliderMenuItem(MenuComponent* parent_, 
                                const std::string& label_,
@@ -182,12 +194,6 @@
                              5.0f,
                              color);
 }
-
-void
-SliderMenuItem::update(float delta)
-{
-  MenuItem::update(delta);
-}
 
 ButtonMenuItem::ButtonMenuItem(MenuComponent* parent_, const std::string& label_)
   : MenuItem(parent_, label_)
@@ -207,11 +213,6 @@
 {
   MenuItem::draw(rect, is_active);
 }
-
-void
-ButtonMenuItem::update(float)
-{
-}
 
 } // namespace gui
 

Modified: trunk/windstille/src/gui/menu_item.hpp
===================================================================
--- trunk/windstille/src/gui/menu_item.hpp	2009-02-12 16:38:11 UTC (rev 2479)
+++ trunk/windstille/src/gui/menu_item.hpp	2009-02-12 16:55:43 UTC (rev 2480)
@@ -30,10 +30,12 @@
 
 class MenuItem 
 {
-public:
+protected:
   MenuComponent* parent;
   std::string label;
+  float fade_timer;
 
+public:
   MenuItem(MenuComponent* parent_, const std::string& label_);
   virtual ~MenuItem() {}
 
@@ -67,7 +69,6 @@
   void decr();
   void click() {}
   void draw(const Rectf& rect, bool is_active);
-  void update(float);
   boost::signal<void (int)>& sig_change() { return on_change; }
 };
 
@@ -88,7 +89,6 @@
   void decr();
   void click() {}
   void draw(const Rectf& rect, bool is_active);
-  void update(float);
   boost::signal<void (int)>& sig_change() { return on_change; }
 };
 
@@ -103,7 +103,6 @@
   void decr() {}
   void click();
   void draw(const Rectf& rect, bool is_active);
-  void update(float);
   boost::signal<void ()>& sig_click() { return on_click; }
 };
 



From grumbel at mail.berlios.de  Thu Feb 12 19:51:13 2009
From: grumbel at mail.berlios.de (grumbel at BerliOS)
Date: Thu, 12 Feb 2009 19:51:13 +0100
Subject: [Windstille-commit] r2481 - in trunk/windstille/src: app armature
	gui navigation screen tile
Message-ID: <200902121851.n1CIpDbH012025@sheep.berlios.de>

Author: grumbel
Date: 2009-02-12 19:51:05 +0100 (Thu, 12 Feb 2009)
New Revision: 2481

Modified:
   trunk/windstille/src/app/menu_manager.cpp
   trunk/windstille/src/armature/armature.cpp
   trunk/windstille/src/gui/group_component.cpp
   trunk/windstille/src/gui/group_component.hpp
   trunk/windstille/src/gui/menu_component.cpp
   trunk/windstille/src/gui/root_component.cpp
   trunk/windstille/src/navigation/navigation_graph.cpp
   trunk/windstille/src/screen/particle_viewer.cpp
   trunk/windstille/src/screen/particle_viewer.hpp
   trunk/windstille/src/screen/screen_manager.cpp
   trunk/windstille/src/screen/screen_manager.hpp
   trunk/windstille/src/tile/tile_factory.cpp
Log:
Pluging some memory holes

Modified: trunk/windstille/src/app/menu_manager.cpp
===================================================================
--- trunk/windstille/src/app/menu_manager.cpp	2009-02-12 16:55:43 UTC (rev 2480)
+++ trunk/windstille/src/app/menu_manager.cpp	2009-02-12 18:51:05 UTC (rev 2481)
@@ -16,6 +16,7 @@
 **  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
+#include <memory>
 #include <boost/bind.hpp>
 #include "config.hpp"
 #include "sound/sound_manager.hpp"
@@ -298,32 +299,29 @@
 MenuManager::display_particle_menu()
 {
   using namespace gui;
-  GUIManager* manager = new GUIManager();
+  std::auto_ptr<GUIManager> manager(new GUIManager());
 
-  GroupComponent* group = new GroupComponent(Rectf(Vector2f(400-200, 300-170), Sizef(400, 340)), 
-                                             "Particle Systems",
-                                             manager->get_root());
+  std::auto_ptr<GroupComponent> group(new GroupComponent(Rectf(Vector2f(400-200, 300-170), Sizef(400, 340)), 
+                                                         "Particle Systems",
+                                                         manager->get_root()));
 
-  MenuComponent* menu = new MenuComponent(Rectf(), true, group);
-  group->pack(menu);
+  MenuComponent* menu(new MenuComponent(Rectf(), true, group.get()));
 
   menu->set_font(Fonts::vera20);
+  group->pack(menu);
 
   std::vector<std::string> scenarios;
   scenarios.push_back("particlesystems/fire.particles");
   
   for(std::vector<std::string>::iterator i = scenarios.begin(); i != scenarios.end(); ++i)
     {
-      ButtonMenuItem* scenario_button = new ButtonMenuItem(menu,  *i);
-
+      std::auto_ptr<ButtonMenuItem> scenario_button(new ButtonMenuItem(menu, *i));
       scenario_button->sig_click().connect(boost::bind(&MenuManager::menu_show_particle_system, this, *i));
-
-      menu->add_item(scenario_button);
+      menu->add_item(scenario_button.release());
     }
 
-  manager->get_root()->add_child(group);
-
-  screen_manager.push_overlay(manager); 
+  manager->get_root()->add_child(group.release());
+  screen_manager.push_overlay(manager.release());
 }
 
 void

Modified: trunk/windstille/src/armature/armature.cpp
===================================================================
--- trunk/windstille/src/armature/armature.cpp	2009-02-12 16:55:43 UTC (rev 2480)
+++ trunk/windstille/src/armature/armature.cpp	2009-02-12 18:51:05 UTC (rev 2481)
@@ -31,6 +31,13 @@
   parse(reader);
 }
 
+Armature::~Armature()
+{
+  for(Bones::iterator i = bones.begin(); i != bones.end(); ++i)
+    delete *i;
+  bones.clear();
+}
+
 void
 Armature::parse(FileReader& reader)
 {

Modified: trunk/windstille/src/gui/group_component.cpp
===================================================================
--- trunk/windstille/src/gui/group_component.cpp	2009-02-12 16:55:43 UTC (rev 2480)
+++ trunk/windstille/src/gui/group_component.cpp	2009-02-12 18:51:05 UTC (rev 2481)
@@ -26,15 +26,13 @@
 
 GroupComponent::GroupComponent(const Rectf& rect, const std::string& title_, Component* parent)
   : Component(rect, parent),
-    title(title_),
-    child(0)
+    title(title_)
 {
   
 }
 
 GroupComponent::~GroupComponent()
 {
-  
 }
 
 void
@@ -54,22 +52,22 @@
                          Color(1.0f, 1.0f, 1.0f, 0.5f));
     }
 
-  if (child)
+  if (child.get())
     child->draw();
 }
 
 void
 GroupComponent::update(float delta, const Controller& controller)
 {
-  if (child)
+  if (child.get())
     child->update(delta, controller);
 }
 
 void
 GroupComponent::pack(Component* component)
 {
-  assert(child == 0);
-  child = component;
+  assert(child.get() == 0);
+  child = std::auto_ptr<Component>(component);
 
   int padding = 6;
   child->set_screen_rect(Rectf(rect.left + padding,
@@ -83,7 +81,7 @@
 bool
 GroupComponent::is_active() const
 {
-  if (child)
+  if (child.get())
     return child->is_active();
   else
     return false;

Modified: trunk/windstille/src/gui/group_component.hpp
===================================================================
--- trunk/windstille/src/gui/group_component.hpp	2009-02-12 16:55:43 UTC (rev 2480)
+++ trunk/windstille/src/gui/group_component.hpp	2009-02-12 18:51:05 UTC (rev 2481)
@@ -19,6 +19,7 @@
 #ifndef HEADER_WINDSTILLE_GUI_GROUP_COMPONENT_HPP
 #define HEADER_WINDSTILLE_GUI_GROUP_COMPONENT_HPP
 
+#include <memory>
 #include <string>
 #include "component.hpp"
 
@@ -29,11 +30,11 @@
 {
 private:
   std::string title;
-  Component* child;
+  std::auto_ptr<Component> child;
 
 public:
   GroupComponent(const Rectf& rect, const std::string& title_, Component* parent);
-  ~GroupComponent();
+  virtual ~GroupComponent();
 
   void draw();
   void update(float delta, const Controller& controller);
@@ -42,6 +43,7 @@
   
   bool is_active() const;
   void layout();
+
 private:
   GroupComponent (const GroupComponent&);
   GroupComponent& operator= (const GroupComponent&);

Modified: trunk/windstille/src/gui/menu_component.cpp
===================================================================
--- trunk/windstille/src/gui/menu_component.cpp	2009-02-12 16:55:43 UTC (rev 2480)
+++ trunk/windstille/src/gui/menu_component.cpp	2009-02-12 18:51:05 UTC (rev 2481)
@@ -41,9 +41,8 @@
 MenuComponent::~MenuComponent()
 {
   for(Items::iterator i = items.begin(); i != items.end(); ++i)
-    {
       delete *i;
-    }
+  items.clear();
 }
 
 void

Modified: trunk/windstille/src/gui/root_component.cpp
===================================================================
--- trunk/windstille/src/gui/root_component.cpp	2009-02-12 16:55:43 UTC (rev 2480)
+++ trunk/windstille/src/gui/root_component.cpp	2009-02-12 18:51:05 UTC (rev 2481)
@@ -33,6 +33,9 @@
 
 RootComponent::~RootComponent()
 {
+  for(Children::iterator i = children.begin(); i != children.end(); ++i)
+    delete *i;
+  children.clear();
 }
 
 void

Modified: trunk/windstille/src/navigation/navigation_graph.cpp
===================================================================
--- trunk/windstille/src/navigation/navigation_graph.cpp	2009-02-12 16:55:43 UTC (rev 2480)
+++ trunk/windstille/src/navigation/navigation_graph.cpp	2009-02-12 18:51:05 UTC (rev 2481)
@@ -36,9 +36,11 @@
 {
   for(Segments::iterator i = segments.begin(); i != segments.end(); ++i)
     delete *i;
+  segments.clear();
 
   for (Nodes::iterator i = nodes.begin(); i != nodes.end(); ++i)
     delete *i;
+  nodes.clear();
 }
 
 NodeHandle

Modified: trunk/windstille/src/screen/particle_viewer.cpp
===================================================================
--- trunk/windstille/src/screen/particle_viewer.cpp	2009-02-12 16:55:43 UTC (rev 2480)
+++ trunk/windstille/src/screen/particle_viewer.cpp	2009-02-12 18:51:05 UTC (rev 2481)
@@ -89,7 +89,7 @@
 
   using namespace gui;
 
-  manager = new GUIManager();
+  manager = std::auto_ptr<gui::GUIManager>(new GUIManager());
   tab = new TabComponent(Rectf(200, 50, 600, 250), manager->get_root());
   
   manager->get_root()->add_child(tab);

Modified: trunk/windstille/src/screen/particle_viewer.hpp
===================================================================
--- trunk/windstille/src/screen/particle_viewer.hpp	2009-02-12 16:55:43 UTC (rev 2480)
+++ trunk/windstille/src/screen/particle_viewer.hpp	2009-02-12 18:51:05 UTC (rev 2481)
@@ -19,6 +19,7 @@
 #ifndef HEADER_WINDSTILLE_PARTICLE_VIEWER_HPP
 #define HEADER_WINDSTILLE_PARTICLE_VIEWER_HPP
 
+#include <memory>
 #include "screen.hpp"
 #include "sprite2d/sprite.hpp"
 #include "gui/gui_manager.hpp"
@@ -42,7 +43,7 @@
 
   Vector2f pos;
   bool   show_gui;
-  gui::GUIManager* manager;
+  std::auto_ptr<gui::GUIManager> manager;
   gui::TabComponent* tab;
 
   typedef std::vector<ParticleSystemGUI*> ParticleSystemGUIs;

Modified: trunk/windstille/src/screen/screen_manager.cpp
===================================================================
--- trunk/windstille/src/screen/screen_manager.cpp	2009-02-12 16:55:43 UTC (rev 2480)
+++ trunk/windstille/src/screen/screen_manager.cpp	2009-02-12 18:51:05 UTC (rev 2481)
@@ -69,6 +69,13 @@
 
 ScreenManager::~ScreenManager()
 {
+  for(std::vector<Screen*>::iterator i = screens.begin(); i != screens.end(); ++i)
+    delete *i;
+  screens.clear();
+    
+  for(std::vector<Screen*>::iterator i = overlay_screens.begin(); i != overlay_screens.end(); ++i)
+    delete *i;
+  overlay_screens.clear();
 }
 
 void
@@ -130,9 +137,11 @@
         {
         case PUSH_SCREEN:
           overlay_screens.push_back(overlay_screen_screen);
+          overlay_screen_screen = 0;
           break;
 
         case POP_SCREEN:
+          delete overlay_screens.back();
           overlay_screens.pop_back();
           break;
 
@@ -152,10 +161,12 @@
         {
         case PUSH_SCREEN:
           screens.push_back(screen_screen);
+          screen_screen = 0;
           screens.back()->on_startup();
           break;
 
         case POP_SCREEN:
+          delete screens.back();
           screens.pop_back();
           if (!screens.empty())
             screens.back()->on_startup();
@@ -325,6 +336,8 @@
 void
 ScreenManager::push_screen(Screen* s)
 {
+  assert(screen_screen == 0);
+
   screen_action = PUSH_SCREEN;
   screen_screen = s;
 }
@@ -338,6 +351,8 @@
 void
 ScreenManager::push_overlay(Screen* s)
 {
+  assert(overlay_screen_screen == 0);
+
   overlay_screen_action = PUSH_SCREEN;
   overlay_screen_screen = s;
 }

Modified: trunk/windstille/src/screen/screen_manager.hpp
===================================================================
--- trunk/windstille/src/screen/screen_manager.hpp	2009-02-12 16:55:43 UTC (rev 2480)
+++ trunk/windstille/src/screen/screen_manager.hpp	2009-02-12 18:51:05 UTC (rev 2481)
@@ -56,9 +56,11 @@
   /** Breaks out of the run() function */
   void quit();
 
+  /** Push a screen, the screen will be delete'ed once it is no longer needed */
   void push_screen(Screen* s);
   void pop_screen();
 
+  /** Push an overlay screen, the screen will be delete'ed once it is no longer needed */
   void push_overlay(Screen* s);
   void pop_overlay();
   void clear_overlay();

Modified: trunk/windstille/src/tile/tile_factory.cpp
===================================================================
--- trunk/windstille/src/tile/tile_factory.cpp	2009-02-12 16:55:43 UTC (rev 2480)
+++ trunk/windstille/src/tile/tile_factory.cpp	2009-02-12 18:51:05 UTC (rev 2481)
@@ -88,15 +88,16 @@
 TileFactory::~TileFactory()
 {
   for(Tiles::iterator i = tiles.begin(); i != tiles.end(); ++i)
-    {
-      delete *i;
-    }
+    delete *i;
   tiles.clear();
 
   for(std::vector<TileDescription*>::iterator i = descriptions.begin(); i != descriptions.end(); ++i)
-    {
-      delete *i;
-    }
+    delete *i;
+  descriptions.clear();
+
+  for(TilePackers::iterator i = packers.begin(); i != packers.end(); ++i)
+    delete *i;
+  packers.clear();
 }
 
 void



From grumbel at mail.berlios.de  Thu Feb 12 19:59:10 2009
From: grumbel at mail.berlios.de (grumbel at BerliOS)
Date: Thu, 12 Feb 2009 19:59:10 +0100
Subject: [Windstille-commit] r2482 - trunk/windstille/src/app
Message-ID: <200902121859.n1CIxA7a003682@sheep.berlios.de>

Author: grumbel
Date: 2009-02-12 19:59:09 +0100 (Thu, 12 Feb 2009)
New Revision: 2482

Modified:
   trunk/windstille/src/app/menu_manager.cpp
Log:
Added std::auto_ptr's

Modified: trunk/windstille/src/app/menu_manager.cpp
===================================================================
--- trunk/windstille/src/app/menu_manager.cpp	2009-02-12 18:51:05 UTC (rev 2481)
+++ trunk/windstille/src/app/menu_manager.cpp	2009-02-12 18:59:09 UTC (rev 2482)
@@ -54,15 +54,14 @@
 MenuManager::display_option_menu()
 {
   using namespace gui;
-  GUIManager* manager = new GUIManager();
+  std::auto_ptr<GUIManager> manager(new GUIManager());
 
-  GroupComponent* group = new GroupComponent(Rectf(Vector2f(400-250, 300-170), Sizef(500, 340)), 
-                                             "Options",
-                                             manager->get_root());
+  std::auto_ptr<GroupComponent> group(new GroupComponent(Rectf(Vector2f(400-250, 300-170), Sizef(500, 340)), 
+                                                         "Options",
+                                                         manager->get_root()));
 
   // Begin Menu
-  MenuComponent* menu = new MenuComponent(Rectf(), true,
-                                          group);
+  MenuComponent* menu = new MenuComponent(Rectf(), true, group.get());
   group->pack(menu);
 
   menu->set_font(Fonts::vera20);
@@ -108,31 +107,31 @@
   gamma_item->sig_change().connect(boost::bind(&MenuManager::menu_gamma, this, _1));
   menu->add_item(gamma_item);
 
-  #ifdef HAVE_CWIID
+#ifdef HAVE_CWIID
   if (wiimote)
     {
       ButtonMenuItem* wiimote_button = new ButtonMenuItem(menu,  "Try to Connect Wiimote");
       wiimote_button->sig_click().connect(boost::bind(&MenuManager::menu_wiimote, this));
       menu->add_item(wiimote_button);
     }
-  #endif
+#endif
 
-  manager->get_root()->add_child(group);
+  manager->get_root()->add_child(group.release());
   group->layout();
-  screen_manager.push_overlay(manager);
+  screen_manager.push_overlay(manager.release());
 }
 
 void
 MenuManager::display_main_menu()
 {
   using namespace gui;
-  GUIManager* manager = new GUIManager();
+  std::auto_ptr<GUIManager> manager(new GUIManager());
 
-  GroupComponent* text_group = new GroupComponent(Rectf(10, 500, 800-10, 600-10),
-                                                  "",
-                                                  manager->get_root());
+  std::auto_ptr<GroupComponent> text_group(new GroupComponent(Rectf(10, 500, 800-10, 600-10),
+                                                              "",
+                                                              manager->get_root()));
 
-  TextView* text = new TextView(Rectf(), text_group);
+  TextView* text = new TextView(Rectf(), text_group.get());
   text_group->pack(text);
   text->set_font(Fonts::vera12);
   text->set_text("Windstille " WINDSTILLE_VERSION " - Copyright (C) 2009 Ingo Ruhnke &lt;grumbel at gmx.de&gt;\n"
@@ -142,15 +141,14 @@
                  "the Free Software Foundation, either version 3 of the License, or "
                  "(at your option) any later version.");
 
-  manager->get_root()->add_child(text_group);
+  manager->get_root()->add_child(text_group.release());
 
-  GroupComponent* group = new GroupComponent(Rectf(Vector2f(400-20, 200), Sizef(250, 254)),
-                                             "",
-                                             manager->get_root());
+  std::auto_ptr<GroupComponent> group(new GroupComponent(Rectf(Vector2f(400-20, 200), Sizef(250, 254)),
+                                                         "",
+                                                         manager->get_root()));
 
   // Begin Menu
-  MenuComponent* menu = new MenuComponent(Rectf(), false,
-                                          group);
+  MenuComponent* menu = new MenuComponent(Rectf(), false, group.get());
   group->pack(menu);
 
   menu->set_font(Fonts::vera20);
@@ -196,24 +194,24 @@
   menu->add_item(quit_button);
   // End: Option Menu
 
-  manager->get_root()->add_child(group);
+  manager->get_root()->add_child(group.release());
   group->layout();
-  screen_manager.push_overlay(manager);
+  screen_manager.push_overlay(manager.release());
 }
 
 void
 MenuManager::display_pause_menu()
 {
   using namespace gui;
-  GUIManager* manager = new GUIManager();
+  std::auto_ptr<GUIManager> manager(new GUIManager());
 
-  GroupComponent* group = new GroupComponent(Rectf(Vector2f(400-200, 300-170), Sizef(400, 300)), 
-                                             "Pause Menu",
-                                             manager->get_root());
+  std::auto_ptr<GroupComponent> group(new GroupComponent(Rectf(Vector2f(400-200, 300-170), Sizef(400, 300)), 
+                                                         "Pause Menu",
+                                                         manager->get_root()));
 
   // Begin Menu
   MenuComponent* menu = new MenuComponent(Rectf(Vector2f(400-150, 200), Sizef(300, 500)), true,
-                                          group);
+                                          group.get());
   group->pack(menu);
 
   menu->set_font(Fonts::vera20);
@@ -247,22 +245,21 @@
   menu->add_item(quit_button);
   // End: Option Menu
 
-  manager->get_root()->add_child(group);
-
-  screen_manager.push_overlay(manager); 
+  manager->get_root()->add_child(group.release());
+  screen_manager.push_overlay(manager.release()); 
 }
 
 void
 MenuManager::display_models_menu()
 {
   using namespace gui;
-  GUIManager* manager = new GUIManager();
+  std::auto_ptr<GUIManager> manager(new GUIManager());
 
-  GroupComponent* group = new GroupComponent(Rectf(Vector2f(400-275, 100), Sizef(550, 376)),  // 378
-                                             "Select Model",
-                                             manager->get_root());
+  std::auto_ptr<GroupComponent> group(new GroupComponent(Rectf(Vector2f(400-275, 100), Sizef(550, 376)),  // 378
+                                                         "Select Model",
+                                                         manager->get_root()));
 
-  MenuComponent* menu = new MenuComponent(Rectf(), true, group);
+  MenuComponent* menu = new MenuComponent(Rectf(), true, group.get());
   group->pack(menu);
 
   menu->set_font(Fonts::vera20);
@@ -290,9 +287,8 @@
       menu->add_item(scenario_button);
     }
 
-  manager->get_root()->add_child(group);
-
-  screen_manager.push_overlay(manager);  
+  manager->get_root()->add_child(group.release());
+  screen_manager.push_overlay(manager.release());  
 }
 
 void
@@ -328,13 +324,13 @@
 MenuManager::display_scenario_menu()
 {
   using namespace gui;
-  GUIManager* manager = new GUIManager();
+  std::auto_ptr<GUIManager> manager(new GUIManager());
 
-  GroupComponent* group = new GroupComponent(Rectf(Vector2f(400-200, 300-170), Sizef(400, 340)), 
-                                             "Select Scenario",
-                                             manager->get_root());
+  std::auto_ptr<GroupComponent> group(new GroupComponent(Rectf(Vector2f(400-200, 300-170), Sizef(400, 340)), 
+                                                         "Select Scenario",
+                                                         manager->get_root()));
 
-  MenuComponent* menu = new MenuComponent(Rectf(), true, group);
+  MenuComponent* menu = new MenuComponent(Rectf(), true, group.get());
   group->pack(menu);
 
   menu->set_font(Fonts::vera20);
@@ -357,23 +353,22 @@
       menu->add_item(scenario_button);
     }
 
-  manager->get_root()->add_child(group);
-
-  screen_manager.push_overlay(manager); 
+  manager->get_root()->add_child(group.release());
+  screen_manager.push_overlay(manager.release());
 }
 
 void
 MenuManager::display_debug_menu()
 {
   using namespace gui;
-  GUIManager* manager = new GUIManager();
+  std::auto_ptr<GUIManager> manager(new GUIManager());
 
-  GroupComponent* group = new GroupComponent(Rectf(Vector2f(400-250, 300-170), Sizef(500, 340)), 
-                                             "Debug",
-                                             manager->get_root());
+  std::auto_ptr<GroupComponent> group(new GroupComponent(Rectf(Vector2f(400-250, 300-170), Sizef(500, 340)), 
+                                                         "Debug",
+                                                         manager->get_root()));
 
   // Begin Menu
-  MenuComponent* menu = new MenuComponent(Rectf(), true, group);
+  MenuComponent* menu = new MenuComponent(Rectf(), true, group.get());
   group->pack(menu);
 
   menu->set_font(Fonts::vera20);
@@ -392,22 +387,22 @@
   b_ambient_light_item->sig_change().connect(boost::bind(&MenuManager::menu_ambient_light, this, _1, 2));
   menu->add_item(b_ambient_light_item);
 
-  manager->get_root()->add_child(group);
+  manager->get_root()->add_child(group.release());
 
-  screen_manager.push_overlay(manager); 
+  screen_manager.push_overlay(manager.release()); 
 }
 
 void
 MenuManager::display_help()
 {
   using namespace gui;
-  GUIManager* manager = new GUIManager();
+  std::auto_ptr<GUIManager> manager(new GUIManager());
 
-  GroupComponent* group = new GroupComponent(Rectf(Vector2f(400-250, 300-200), Sizef(500, 400)), 
-                                             "Help",
-                                             manager->get_root());
+  std::auto_ptr<GroupComponent> group(new GroupComponent(Rectf(Vector2f(400-250, 300-200), Sizef(500, 400)), 
+                                                         "Help",
+                                                         manager->get_root()));
 
-  TextView* text = new TextView(Rectf(), group);
+  TextView* text = new TextView(Rectf(), group.get());
   group->pack(text);
 
   text->set_font(Fonts::vera12);
@@ -433,21 +428,21 @@
                  );
   text->set_active(true);
 
-  manager->get_root()->add_child(group);
-  screen_manager.push_overlay(manager);
+  manager->get_root()->add_child(group.release());
+  screen_manager.push_overlay(manager.release());
 }
 
 void
 MenuManager::display_credits()
 {
   using namespace gui;
-  GUIManager* manager = new GUIManager();
+  std::auto_ptr<GUIManager> manager(new GUIManager());
 
-  GroupComponent* group = new GroupComponent(Rectf(Vector2f(400-250, 300-200), Sizef(500, 400)), 
-                                             "Credits",
-                                             manager->get_root());
+  std::auto_ptr<GroupComponent> group(new GroupComponent(Rectf(Vector2f(400-250, 300-200), Sizef(500, 400)), 
+                                                         "Credits",
+                                                         manager->get_root()));
 
-  TextView* text = new TextView(Rectf(), group);
+  TextView* text = new TextView(Rectf(), group.get());
   group->pack(text);
 
   text->set_font(Fonts::vera12);
@@ -475,8 +470,8 @@
                  "  Marek Moeckel - Wansti - &lt;wansti at gmx.de&gt;\n");
   text->set_active(true);
 
-  manager->get_root()->add_child(group);
-  screen_manager.push_overlay(manager);
+  manager->get_root()->add_child(group.release());
+  screen_manager.push_overlay(manager.release());
 }
   
 // Callbacks
@@ -524,7 +519,7 @@
   std::cout << "Starting: " << scenario << std::endl;
   screen_manager.push_screen(new GameSession(scenario));
   screen_manager.clear_overlay();
- }
+}
 
 void
 MenuManager::menu_show_fps(int i)



From grumbel at mail.berlios.de  Thu Feb 12 20:17:31 2009
From: grumbel at mail.berlios.de (grumbel at BerliOS)
Date: Thu, 12 Feb 2009 20:17:31 +0100
Subject: [Windstille-commit] r2483 - trunk/windstille/src/app
Message-ID: <200902121917.n1CJHVal005279@sheep.berlios.de>

Author: grumbel
Date: 2009-02-12 20:17:30 +0100 (Thu, 12 Feb 2009)
New Revision: 2483

Modified:
   trunk/windstille/src/app/menu_manager.cpp
Log:
Added some more std::auto_ptr's

Modified: trunk/windstille/src/app/menu_manager.cpp
===================================================================
--- trunk/windstille/src/app/menu_manager.cpp	2009-02-12 18:59:09 UTC (rev 2482)
+++ trunk/windstille/src/app/menu_manager.cpp	2009-02-12 19:17:30 UTC (rev 2483)
@@ -77,42 +77,42 @@
   SliderMenuItem* voice_volume_item = new SliderMenuItem(menu,  "Voice Volume", 100, 0, 100, 10);
   menu->add_item(voice_volume_item);
 
-  EnumMenuItem* aspect_item = new EnumMenuItem(menu,  "Aspect Ratio", 0);
+  std::auto_ptr<EnumMenuItem> aspect_item(new EnumMenuItem(menu,  "Aspect Ratio", 0));
   aspect_item->add_pair(0, "4:3");
   aspect_item->add_pair(1, "5:4");
   aspect_item->add_pair(2, "16:9");
   aspect_item->add_pair(3, "16:10");
   aspect_item->add_pair(4, "letterbox");
-  menu->add_item(aspect_item);
+  menu->add_item(aspect_item.release());
   
-  EnumMenuItem* show_fps_item = new EnumMenuItem(menu,  "Show FPS", config.get_bool("show-fps"));
+  std::auto_ptr<EnumMenuItem> show_fps_item(new EnumMenuItem(menu,  "Show FPS", config.get_bool("show-fps")));
   show_fps_item->add_pair(0, "off");
   show_fps_item->add_pair(1, "on");
-  menu->add_item(show_fps_item);
   show_fps_item->sig_change().connect(boost::bind(&MenuManager::menu_show_fps, this, _1));
+  menu->add_item(show_fps_item.release());
 
-  EnumMenuItem* fullscreen_item = new EnumMenuItem(menu,  "Fullscreen", config.get_bool("fullscreen"));
+  std::auto_ptr<EnumMenuItem> fullscreen_item(new EnumMenuItem(menu,  "Fullscreen", config.get_bool("fullscreen")));
   fullscreen_item->add_pair(0, "off");
   fullscreen_item->add_pair(1, "on");
-  menu->add_item(fullscreen_item);
   fullscreen_item->sig_change().connect(boost::bind(&MenuManager::menu_fullscreen, this, _1));
+  menu->add_item(fullscreen_item.release());
 
-  EnumMenuItem* difficulty_item = new EnumMenuItem(menu,  "Difficulty", 1);
+  std::auto_ptr<EnumMenuItem> difficulty_item(new EnumMenuItem(menu,  "Difficulty", 1));
   difficulty_item->add_pair(0, "easy");
   difficulty_item->add_pair(1, "medium");
   difficulty_item->add_pair(2, "hard");
-  menu->add_item(difficulty_item);
+  menu->add_item(difficulty_item.release());
 
-  SliderMenuItem* gamma_item   = new SliderMenuItem(menu,  "Gamma",  100, 10, 200, 10);
+  std::auto_ptr<SliderMenuItem> gamma_item(new SliderMenuItem(menu,  "Gamma",  100, 10, 200, 10));
   gamma_item->sig_change().connect(boost::bind(&MenuManager::menu_gamma, this, _1));
-  menu->add_item(gamma_item);
+  menu->add_item(gamma_item.release());
 
 #ifdef HAVE_CWIID
   if (wiimote)
     {
-      ButtonMenuItem* wiimote_button = new ButtonMenuItem(menu,  "Try to Connect Wiimote");
+      std::auto_ptr<ButtonMenuItem> wiimote_button(new ButtonMenuItem(menu,  "Try to Connect Wiimote"));
       wiimote_button->sig_click().connect(boost::bind(&MenuManager::menu_wiimote, this));
-      menu->add_item(wiimote_button);
+      menu->add_item(wiimote_button.release());
     }
 #endif
 
@@ -153,45 +153,45 @@
 
   menu->set_font(Fonts::vera20);
 
-  ButtonMenuItem* select_scenario_button = new ButtonMenuItem(menu,  "Select Scenario");
+  std::auto_ptr<ButtonMenuItem> select_scenario_button(new ButtonMenuItem(menu,  "Select Scenario"));
   select_scenario_button->sig_click().connect(boost::bind(&MenuManager::display_scenario_menu, this));
-  menu->add_item(select_scenario_button);
+  menu->add_item(select_scenario_button.release());
 
-  ButtonMenuItem* navigation_test_button = new ButtonMenuItem(menu,  "Navigation Test");
+  std::auto_ptr<ButtonMenuItem> navigation_test_button(new ButtonMenuItem(menu,  "Navigation Test"));
   navigation_test_button->sig_click().connect(boost::bind(&MenuManager::menu_show_navigation_test, this));
-  menu->add_item(navigation_test_button);
+  menu->add_item(navigation_test_button.release());
 
-  ButtonMenuItem* armature_test_button = new ButtonMenuItem(menu,  "Armature Test");
+  std::auto_ptr<ButtonMenuItem> armature_test_button(new ButtonMenuItem(menu,  "Armature Test"));
   armature_test_button->sig_click().connect(boost::bind(&MenuManager::menu_show_armature_test, this));
-  menu->add_item(armature_test_button);
+  menu->add_item(armature_test_button.release());
 
-  ButtonMenuItem* geometry_test_button = new ButtonMenuItem(menu,  "Geometry Test");
+  std::auto_ptr<ButtonMenuItem> geometry_test_button(new ButtonMenuItem(menu,  "Geometry Test"));
   geometry_test_button->sig_click().connect(boost::bind(&MenuManager::menu_show_geometry_test, this));
-  menu->add_item(geometry_test_button);
+  menu->add_item(geometry_test_button.release());
 
-  ButtonMenuItem* model_viewer_button = new ButtonMenuItem(menu,  "Model Viewer");
+  std::auto_ptr<ButtonMenuItem> model_viewer_button(new ButtonMenuItem(menu,  "Model Viewer"));
   model_viewer_button->sig_click().connect(boost::bind(&MenuManager::display_models_menu, this));
-  menu->add_item(model_viewer_button);
+  menu->add_item(model_viewer_button.release());
 
-  ButtonMenuItem* particles_button = new ButtonMenuItem(menu,  "Particle Systems");
+  std::auto_ptr<ButtonMenuItem> particles_button(new ButtonMenuItem(menu,  "Particle Systems"));
   particles_button->sig_click().connect(boost::bind(&MenuManager::display_particle_menu, this));
-  menu->add_item(particles_button);
+  menu->add_item(particles_button.release());
 
-  ButtonMenuItem* options_button = new ButtonMenuItem(menu,  "Options");
+  std::auto_ptr<ButtonMenuItem> options_button(new ButtonMenuItem(menu,  "Options"));
   options_button->sig_click().connect(boost::bind(&MenuManager::display_option_menu, this));
-  menu->add_item(options_button);
+  menu->add_item(options_button.release());
 
-  ButtonMenuItem* credits_button = new ButtonMenuItem(menu,  "Credits");
+  std::auto_ptr<ButtonMenuItem> credits_button(new ButtonMenuItem(menu,  "Credits"));
   credits_button->sig_click().connect(boost::bind(&MenuManager::display_credits, this));
-  menu->add_item(credits_button);
+  menu->add_item(credits_button.release());
 
-  ButtonMenuItem* help_button = new ButtonMenuItem(menu,  "Help");
+  std::auto_ptr<ButtonMenuItem> help_button(new ButtonMenuItem(menu,  "Help"));
   help_button->sig_click().connect(boost::bind(&MenuManager::display_help, this));
-  menu->add_item(help_button);
+  menu->add_item(help_button.release());
 
-  ButtonMenuItem* quit_button = new ButtonMenuItem(menu,  "Quit");
+  std::auto_ptr<ButtonMenuItem> quit_button(new ButtonMenuItem(menu,  "Quit"));
   quit_button->sig_click().connect(boost::bind(&MenuManager::menu_quit, this));
-  menu->add_item(quit_button);
+  menu->add_item(quit_button.release());
   // End: Option Menu
 
   manager->get_root()->add_child(group.release());
@@ -216,33 +216,33 @@
 
   menu->set_font(Fonts::vera20);
 
-  ButtonMenuItem* continue_button = new ButtonMenuItem(menu,  "Resume Game");
+  std::auto_ptr<ButtonMenuItem> continue_button(new ButtonMenuItem(menu,  "Resume Game"));
   continue_button->sig_click().connect(boost::bind(&MenuManager::menu_continue, this));
-  menu->add_item(continue_button);
+  menu->add_item(continue_button.release());
 
-  //  ButtonMenuItem* select_scenario_button = new ButtonMenuItem(menu,  "Select Scenario");
+  //  std::auto_ptr<ButtonMenuItem> select_scenario_button(new ButtonMenuItem(menu,  "Select Scenario"));
   //  select_scenario_button->sig_click().connect(boost::bind(&MenuManager::display_scenario_menu, this));
   // menu->add_item(select_scenario_button);
 
-  ButtonMenuItem* options_button = new ButtonMenuItem(menu,  "Options");
+  std::auto_ptr<ButtonMenuItem> options_button(new ButtonMenuItem(menu,  "Options"));
   options_button->sig_click().connect(boost::bind(&MenuManager::display_option_menu, this));
-  menu->add_item(options_button);
+  menu->add_item(options_button.release());
 
-  ButtonMenuItem* debug_button = new ButtonMenuItem(menu,  "Debug");
+  std::auto_ptr<ButtonMenuItem> debug_button(new ButtonMenuItem(menu,  "Debug"));
   debug_button->sig_click().connect(boost::bind(&MenuManager::display_debug_menu, this));
-  menu->add_item(debug_button);
+  menu->add_item(debug_button.release());
 
-  ButtonMenuItem* credits_button = new ButtonMenuItem(menu,  "Credits");
+  std::auto_ptr<ButtonMenuItem> credits_button(new ButtonMenuItem(menu,  "Credits"));
   credits_button->sig_click().connect(boost::bind(&MenuManager::display_credits, this));
-  menu->add_item(credits_button);
+  menu->add_item(credits_button.release());
 
-  ButtonMenuItem* help_button = new ButtonMenuItem(menu,  "Help");
+  std::auto_ptr<ButtonMenuItem> help_button(new ButtonMenuItem(menu,  "Help"));
   help_button->sig_click().connect(boost::bind(&MenuManager::display_help, this));
-  menu->add_item(help_button);
+  menu->add_item(help_button.release());
 
-  ButtonMenuItem* quit_button = new ButtonMenuItem(menu,  "Return to Title Screen");
+  std::auto_ptr<ButtonMenuItem> quit_button(new ButtonMenuItem(menu,  "Return to Title Screen"));
   quit_button->sig_click().connect(boost::bind(&MenuManager::menu_exit, this));
-  menu->add_item(quit_button);
+  menu->add_item(quit_button.release());
   // End: Option Menu
 
   manager->get_root()->add_child(group.release());
@@ -280,11 +280,9 @@
 
   for(std::vector<std::string>::iterator i = models.begin(); i != models.end(); ++i)
     {
-      ButtonMenuItem* scenario_button = new ButtonMenuItem(menu,  *i);
-
+      std::auto_ptr<ButtonMenuItem> scenario_button(new ButtonMenuItem(menu,  *i));
       scenario_button->sig_click().connect(boost::bind(&MenuManager::menu_show_model, this, std::string(*i)));
-
-      menu->add_item(scenario_button);
+      menu->add_item(scenario_button.release());
     }
 
   manager->get_root()->add_child(group.release());
@@ -346,11 +344,9 @@
   
   for(std::vector<std::string>::iterator i = scenarios.begin(); i != scenarios.end(); ++i)
     {
-      ButtonMenuItem* scenario_button = new ButtonMenuItem(menu,  *i);
-
+      std::auto_ptr<ButtonMenuItem> scenario_button(new ButtonMenuItem(menu,  *i));
       scenario_button->sig_click().connect(boost::bind(&MenuManager::menu_start_scenario, this, *i));
-
-      menu->add_item(scenario_button);
+      menu->add_item(scenario_button.release());
     }
 
   manager->get_root()->add_child(group.release());
@@ -375,20 +371,19 @@
 
   Color amb = Sector::current()->get_ambient_light();
 
-  SliderMenuItem* r_ambient_light_item = new SliderMenuItem(menu,  "Ambient Light (Red)", int(amb.r*100), 0, 100, 10);
+  std::auto_ptr<SliderMenuItem> r_ambient_light_item(new SliderMenuItem(menu,  "Ambient Light (Red)", int(amb.r*100), 0, 100, 10));
   r_ambient_light_item->sig_change().connect(boost::bind(&MenuManager::menu_ambient_light, this, _1, 0));
-  menu->add_item(r_ambient_light_item);
+  menu->add_item(r_ambient_light_item.release());
 
-  SliderMenuItem* g_ambient_light_item = new SliderMenuItem(menu,  "Ambient Light (Green)", int(amb.g*100), 0, 100, 10);
+  std::auto_ptr<SliderMenuItem> g_ambient_light_item(new SliderMenuItem(menu,  "Ambient Light (Green)", int(amb.g*100), 0, 100, 10));
   g_ambient_light_item->sig_change().connect(boost::bind(&MenuManager::menu_ambient_light, this, _1, 1));
-  menu->add_item(g_ambient_light_item);
+  menu->add_item(g_ambient_light_item.release());
 
-  SliderMenuItem* b_ambient_light_item = new SliderMenuItem(menu,  "Ambient Light (Blue)", int(amb.b*100), 0, 100, 10);
+  std::auto_ptr<SliderMenuItem> b_ambient_light_item(new SliderMenuItem(menu,  "Ambient Light (Blue)", int(amb.b*100), 0, 100, 10));
   b_ambient_light_item->sig_change().connect(boost::bind(&MenuManager::menu_ambient_light, this, _1, 2));
-  menu->add_item(b_ambient_light_item);
+  menu->add_item(b_ambient_light_item.release());
 
   manager->get_root()->add_child(group.release());
-
   screen_manager.push_overlay(manager.release()); 
 }
 
@@ -479,22 +474,22 @@
 void
 MenuManager::menu_show_model(std::string model)
 {
-  Sprite3DView* sprite3dview = new Sprite3DView();
+  std::auto_ptr<Sprite3DView> sprite3dview(new Sprite3DView());
 
   sprite3dview->set_model(model);
 
   // Launching Sprite3DView instead of game
-  screen_manager.push_screen(sprite3dview);
+  screen_manager.push_screen(sprite3dview.release());
   screen_manager.clear_overlay();
 }
 
 void
 MenuManager::menu_show_particle_system(std::string file)
 {
-  ParticleViewer* particle_viewer = new ParticleViewer();
+  std::auto_ptr<ParticleViewer> particle_viewer(new ParticleViewer());
   particle_viewer->load(file);
 
-  screen_manager.push_screen(particle_viewer);
+  screen_manager.push_screen(particle_viewer.release());
   screen_manager.clear_overlay();
 }
 



From grumbel at mail.berlios.de  Thu Feb 12 20:33:37 2009
From: grumbel at mail.berlios.de (grumbel at BerliOS)
Date: Thu, 12 Feb 2009 20:33:37 +0100
Subject: [Windstille-commit] r2484 - trunk/windstille/src/app
Message-ID: <200902121933.n1CJXbCv006721@sheep.berlios.de>

Author: grumbel
Date: 2009-02-12 20:33:36 +0100 (Thu, 12 Feb 2009)
New Revision: 2484

Modified:
   trunk/windstille/src/app/menu_manager.cpp
Log:
Added some more std::auto_ptr's

Modified: trunk/windstille/src/app/menu_manager.cpp
===================================================================
--- trunk/windstille/src/app/menu_manager.cpp	2009-02-12 19:17:30 UTC (rev 2483)
+++ trunk/windstille/src/app/menu_manager.cpp	2009-02-12 19:33:36 UTC (rev 2484)
@@ -66,16 +66,16 @@
 
   menu->set_font(Fonts::vera20);
 
-  SliderMenuItem* music_volume_item = new SliderMenuItem(menu,  "Master Volume",   
-                                                         config.get_int("master-volume"), 0, 100, 10);
+  std::auto_ptr<SliderMenuItem> music_volume_item(new SliderMenuItem(menu,  "Master Volume",   
+                                                                     config.get_int("master-volume"), 0, 100, 10));
   music_volume_item->sig_change().connect(boost::bind(&MenuManager::menu_music_volume, this, _1));
-  menu->add_item(music_volume_item);
+  menu->add_item(music_volume_item.release());
 
-  SliderMenuItem* sfx_volume_item   = new SliderMenuItem(menu,  "SFX Volume",   100, 0, 100, 10);
-  menu->add_item(sfx_volume_item);
+  std::auto_ptr<SliderMenuItem> sfx_volume_item(new SliderMenuItem(menu,  "SFX Volume",   100, 0, 100, 10));
+  menu->add_item(sfx_volume_item.release());
 
-  SliderMenuItem* voice_volume_item = new SliderMenuItem(menu,  "Voice Volume", 100, 0, 100, 10);
-  menu->add_item(voice_volume_item);
+  std::auto_ptr<SliderMenuItem> voice_volume_item(new SliderMenuItem(menu,  "Voice Volume", 100, 0, 100, 10));
+  menu->add_item(voice_volume_item.release());
 
   std::auto_ptr<EnumMenuItem> aspect_item(new EnumMenuItem(menu,  "Aspect Ratio", 0));
   aspect_item->add_pair(0, "4:3");



From grumbel at mail.berlios.de  Thu Feb 12 21:39:55 2009
From: grumbel at mail.berlios.de (grumbel at BerliOS)
Date: Thu, 12 Feb 2009 21:39:55 +0100
Subject: [Windstille-commit] r2485 - in trunk/windstille/src: app gui
Message-ID: <200902122039.n1CKdt7g013946@sheep.berlios.de>

Author: grumbel
Date: 2009-02-12 21:39:54 +0100 (Thu, 12 Feb 2009)
New Revision: 2485

Modified:
   trunk/windstille/src/app/menu_manager.cpp
   trunk/windstille/src/gui/group_component.cpp
   trunk/windstille/src/gui/group_component.hpp
Log:
Removed unimplemented layout() call

Modified: trunk/windstille/src/app/menu_manager.cpp
===================================================================
--- trunk/windstille/src/app/menu_manager.cpp	2009-02-12 19:33:36 UTC (rev 2484)
+++ trunk/windstille/src/app/menu_manager.cpp	2009-02-12 20:39:54 UTC (rev 2485)
@@ -117,7 +117,6 @@
 #endif
 
   manager->get_root()->add_child(group.release());
-  group->layout();
   screen_manager.push_overlay(manager.release());
 }
 
@@ -195,7 +194,6 @@
   // End: Option Menu
 
   manager->get_root()->add_child(group.release());
-  group->layout();
   screen_manager.push_overlay(manager.release());
 }
 

Modified: trunk/windstille/src/gui/group_component.cpp
===================================================================
--- trunk/windstille/src/gui/group_component.cpp	2009-02-12 19:33:36 UTC (rev 2484)
+++ trunk/windstille/src/gui/group_component.cpp	2009-02-12 20:39:54 UTC (rev 2485)
@@ -87,14 +87,6 @@
     return false;
 }
 
-void
-GroupComponent::layout()
-{
-  // FIXME: implement me
-  // child->get_prefered_width();
-  // child->get_prefered_height();
-}
-
 } // namespace gui
 
 /* EOF */

Modified: trunk/windstille/src/gui/group_component.hpp
===================================================================
--- trunk/windstille/src/gui/group_component.hpp	2009-02-12 19:33:36 UTC (rev 2484)
+++ trunk/windstille/src/gui/group_component.hpp	2009-02-12 20:39:54 UTC (rev 2485)
@@ -42,7 +42,6 @@
   void pack(Component* component);
   
   bool is_active() const;
-  void layout();
 
 private:
   GroupComponent (const GroupComponent&);



From grumbel at mail.berlios.de  Thu Feb 12 22:10:44 2009
From: grumbel at mail.berlios.de (grumbel at BerliOS)
Date: Thu, 12 Feb 2009 22:10:44 +0100
Subject: [Windstille-commit] r2486 - trunk/windstille/src/gui
Message-ID: <200902122110.n1CLAiI7025904@sheep.berlios.de>

Author: grumbel
Date: 2009-02-12 22:10:43 +0100 (Thu, 12 Feb 2009)
New Revision: 2486

Modified:
   trunk/windstille/src/gui/group_component.cpp
   trunk/windstille/src/gui/group_component.hpp
Log:
Added get_child_rect()

Modified: trunk/windstille/src/gui/group_component.cpp
===================================================================
--- trunk/windstille/src/gui/group_component.cpp	2009-02-12 20:39:54 UTC (rev 2485)
+++ trunk/windstille/src/gui/group_component.cpp	2009-02-12 21:10:43 UTC (rev 2486)
@@ -69,15 +69,21 @@
   assert(child.get() == 0);
   child = std::auto_ptr<Component>(component);
 
-  int padding = 6;
-  child->set_screen_rect(Rectf(rect.left + padding,
-                               rect.top  + padding + (title.empty() ? 0 : Fonts::vera20->get_height() + 24),
-                               rect.right  - padding,
-                               rect.bottom - padding
-                               ));
+  child->set_screen_rect(get_child_rect());
   child->set_active(true);
 }
 
+Rectf
+GroupComponent::get_child_rect() const
+{
+  int padding = 6;
+
+  return Rectf(rect.left + padding,
+               rect.top  + padding + (title.empty() ? 0 : Fonts::vera20->get_height() + 24),
+               rect.right  - padding,
+               rect.bottom - padding);
+}
+
 bool
 GroupComponent::is_active() const
 {

Modified: trunk/windstille/src/gui/group_component.hpp
===================================================================
--- trunk/windstille/src/gui/group_component.hpp	2009-02-12 20:39:54 UTC (rev 2485)
+++ trunk/windstille/src/gui/group_component.hpp	2009-02-12 21:10:43 UTC (rev 2486)
@@ -43,6 +43,8 @@
   
   bool is_active() const;
 
+  Rectf get_child_rect() const;
+
 private:
   GroupComponent (const GroupComponent&);
   GroupComponent& operator= (const GroupComponent&);



From grumbel at mail.berlios.de  Thu Feb 12 22:12:47 2009
From: grumbel at mail.berlios.de (grumbel at BerliOS)
Date: Thu, 12 Feb 2009 22:12:47 +0100
Subject: [Windstille-commit] r2487 - trunk/windstille/src/app
Message-ID: <200902122112.n1CLClTp026116@sheep.berlios.de>

Author: grumbel
Date: 2009-02-12 22:12:47 +0100 (Thu, 12 Feb 2009)
New Revision: 2487

Modified:
   trunk/windstille/src/app/menu_manager.cpp
Log:
Turned remaining pointer into std::auto_ptr's

Modified: trunk/windstille/src/app/menu_manager.cpp
===================================================================
--- trunk/windstille/src/app/menu_manager.cpp	2009-02-12 21:10:43 UTC (rev 2486)
+++ trunk/windstille/src/app/menu_manager.cpp	2009-02-12 21:12:47 UTC (rev 2487)
@@ -61,23 +61,22 @@
                                                          manager->get_root()));
 
   // Begin Menu
-  MenuComponent* menu = new MenuComponent(Rectf(), true, group.get());
-  group->pack(menu);
+  std::auto_ptr<MenuComponent> menu(new MenuComponent(group->get_child_rect(), true, group.get()));
 
   menu->set_font(Fonts::vera20);
 
-  std::auto_ptr<SliderMenuItem> music_volume_item(new SliderMenuItem(menu,  "Master Volume",   
+  std::auto_ptr<SliderMenuItem> music_volume_item(new SliderMenuItem(menu.get(), "Master Volume",   
                                                                      config.get_int("master-volume"), 0, 100, 10));
   music_volume_item->sig_change().connect(boost::bind(&MenuManager::menu_music_volume, this, _1));
   menu->add_item(music_volume_item.release());
 
-  std::auto_ptr<SliderMenuItem> sfx_volume_item(new SliderMenuItem(menu,  "SFX Volume",   100, 0, 100, 10));
+  std::auto_ptr<SliderMenuItem> sfx_volume_item(new SliderMenuItem(menu.get(), "SFX Volume",   100, 0, 100, 10));
   menu->add_item(sfx_volume_item.release());
 
-  std::auto_ptr<SliderMenuItem> voice_volume_item(new SliderMenuItem(menu,  "Voice Volume", 100, 0, 100, 10));
+  std::auto_ptr<SliderMenuItem> voice_volume_item(new SliderMenuItem(menu.get(), "Voice Volume", 100, 0, 100, 10));
   menu->add_item(voice_volume_item.release());
 
-  std::auto_ptr<EnumMenuItem> aspect_item(new EnumMenuItem(menu,  "Aspect Ratio", 0));
+  std::auto_ptr<EnumMenuItem> aspect_item(new EnumMenuItem(menu.get(), "Aspect Ratio", 0));
   aspect_item->add_pair(0, "4:3");
   aspect_item->add_pair(1, "5:4");
   aspect_item->add_pair(2, "16:9");
@@ -85,37 +84,38 @@
   aspect_item->add_pair(4, "letterbox");
   menu->add_item(aspect_item.release());
   
-  std::auto_ptr<EnumMenuItem> show_fps_item(new EnumMenuItem(menu,  "Show FPS", config.get_bool("show-fps")));
+  std::auto_ptr<EnumMenuItem> show_fps_item(new EnumMenuItem(menu.get(), "Show FPS", config.get_bool("show-fps")));
   show_fps_item->add_pair(0, "off");
   show_fps_item->add_pair(1, "on");
   show_fps_item->sig_change().connect(boost::bind(&MenuManager::menu_show_fps, this, _1));
   menu->add_item(show_fps_item.release());
 
-  std::auto_ptr<EnumMenuItem> fullscreen_item(new EnumMenuItem(menu,  "Fullscreen", config.get_bool("fullscreen")));
+  std::auto_ptr<EnumMenuItem> fullscreen_item(new EnumMenuItem(menu.get(), "Fullscreen", config.get_bool("fullscreen")));
   fullscreen_item->add_pair(0, "off");
   fullscreen_item->add_pair(1, "on");
   fullscreen_item->sig_change().connect(boost::bind(&MenuManager::menu_fullscreen, this, _1));
   menu->add_item(fullscreen_item.release());
 
-  std::auto_ptr<EnumMenuItem> difficulty_item(new EnumMenuItem(menu,  "Difficulty", 1));
+  std::auto_ptr<EnumMenuItem> difficulty_item(new EnumMenuItem(menu.get(), "Difficulty", 1));
   difficulty_item->add_pair(0, "easy");
   difficulty_item->add_pair(1, "medium");
   difficulty_item->add_pair(2, "hard");
   menu->add_item(difficulty_item.release());
 
-  std::auto_ptr<SliderMenuItem> gamma_item(new SliderMenuItem(menu,  "Gamma",  100, 10, 200, 10));
+  std::auto_ptr<SliderMenuItem> gamma_item(new SliderMenuItem(menu.get(), "Gamma",  100, 10, 200, 10));
   gamma_item->sig_change().connect(boost::bind(&MenuManager::menu_gamma, this, _1));
   menu->add_item(gamma_item.release());
 
 #ifdef HAVE_CWIID
   if (wiimote)
     {
-      std::auto_ptr<ButtonMenuItem> wiimote_button(new ButtonMenuItem(menu,  "Try to Connect Wiimote"));
+      std::auto_ptr<ButtonMenuItem> wiimote_button(new ButtonMenuItem(menu.get(), "Try to Connect Wiimote"));
       wiimote_button->sig_click().connect(boost::bind(&MenuManager::menu_wiimote, this));
       menu->add_item(wiimote_button.release());
     }
 #endif
 
+  group->pack(menu.release());
   manager->get_root()->add_child(group.release());
   screen_manager.push_overlay(manager.release());
 }
@@ -130,8 +130,7 @@
                                                               "",
                                                               manager->get_root()));
 
-  TextView* text = new TextView(Rectf(), text_group.get());
-  text_group->pack(text);
+  std::auto_ptr<TextView> text(new TextView(text_group->get_child_rect(), text_group.get()));
   text->set_font(Fonts::vera12);
   text->set_text("Windstille " WINDSTILLE_VERSION " - Copyright (C) 2009 Ingo Ruhnke &lt;grumbel at gmx.de&gt;\n"
                  "\n"
@@ -139,7 +138,7 @@
                  "it under the terms of the GNU General Public License as published by "
                  "the Free Software Foundation, either version 3 of the License, or "
                  "(at your option) any later version.");
-
+  text_group->pack(text.release());
   manager->get_root()->add_child(text_group.release());
 
   std::auto_ptr<GroupComponent> group(new GroupComponent(Rectf(Vector2f(400-20, 200), Sizef(250, 254)),
@@ -147,52 +146,52 @@
                                                          manager->get_root()));
 
   // Begin Menu
-  MenuComponent* menu = new MenuComponent(Rectf(), false, group.get());
-  group->pack(menu);
+  std::auto_ptr<MenuComponent> menu(new MenuComponent(group->get_child_rect(), false, group.get()));
 
   menu->set_font(Fonts::vera20);
 
-  std::auto_ptr<ButtonMenuItem> select_scenario_button(new ButtonMenuItem(menu,  "Select Scenario"));
+  std::auto_ptr<ButtonMenuItem> select_scenario_button(new ButtonMenuItem(menu.get(), "Select Scenario"));
   select_scenario_button->sig_click().connect(boost::bind(&MenuManager::display_scenario_menu, this));
   menu->add_item(select_scenario_button.release());
 
-  std::auto_ptr<ButtonMenuItem> navigation_test_button(new ButtonMenuItem(menu,  "Navigation Test"));
+  std::auto_ptr<ButtonMenuItem> navigation_test_button(new ButtonMenuItem(menu.get(), "Navigation Test"));
   navigation_test_button->sig_click().connect(boost::bind(&MenuManager::menu_show_navigation_test, this));
   menu->add_item(navigation_test_button.release());
 
-  std::auto_ptr<ButtonMenuItem> armature_test_button(new ButtonMenuItem(menu,  "Armature Test"));
+  std::auto_ptr<ButtonMenuItem> armature_test_button(new ButtonMenuItem(menu.get(), "Armature Test"));
   armature_test_button->sig_click().connect(boost::bind(&MenuManager::menu_show_armature_test, this));
   menu->add_item(armature_test_button.release());
 
-  std::auto_ptr<ButtonMenuItem> geometry_test_button(new ButtonMenuItem(menu,  "Geometry Test"));
+  std::auto_ptr<ButtonMenuItem> geometry_test_button(new ButtonMenuItem(menu.get(), "Geometry Test"));
   geometry_test_button->sig_click().connect(boost::bind(&MenuManager::menu_show_geometry_test, this));
   menu->add_item(geometry_test_button.release());
 
-  std::auto_ptr<ButtonMenuItem> model_viewer_button(new ButtonMenuItem(menu,  "Model Viewer"));
+  std::auto_ptr<ButtonMenuItem> model_viewer_button(new ButtonMenuItem(menu.get(), "Model Viewer"));
   model_viewer_button->sig_click().connect(boost::bind(&MenuManager::display_models_menu, this));
   menu->add_item(model_viewer_button.release());
 
-  std::auto_ptr<ButtonMenuItem> particles_button(new ButtonMenuItem(menu,  "Particle Systems"));
+  std::auto_ptr<ButtonMenuItem> particles_button(new ButtonMenuItem(menu.get(), "Particle Systems"));
   particles_button->sig_click().connect(boost::bind(&MenuManager::display_particle_menu, this));
   menu->add_item(particles_button.release());
 
-  std::auto_ptr<ButtonMenuItem> options_button(new ButtonMenuItem(menu,  "Options"));
+  std::auto_ptr<ButtonMenuItem> options_button(new ButtonMenuItem(menu.get(), "Options"));
   options_button->sig_click().connect(boost::bind(&MenuManager::display_option_menu, this));
   menu->add_item(options_button.release());
 
-  std::auto_ptr<ButtonMenuItem> credits_button(new ButtonMenuItem(menu,  "Credits"));
+  std::auto_ptr<ButtonMenuItem> credits_button(new ButtonMenuItem(menu.get(), "Credits"));
   credits_button->sig_click().connect(boost::bind(&MenuManager::display_credits, this));
   menu->add_item(credits_button.release());
 
-  std::auto_ptr<ButtonMenuItem> help_button(new ButtonMenuItem(menu,  "Help"));
+  std::auto_ptr<ButtonMenuItem> help_button(new ButtonMenuItem(menu.get(), "Help"));
   help_button->sig_click().connect(boost::bind(&MenuManager::display_help, this));
   menu->add_item(help_button.release());
 
-  std::auto_ptr<ButtonMenuItem> quit_button(new ButtonMenuItem(menu,  "Quit"));
+  std::auto_ptr<ButtonMenuItem> quit_button(new ButtonMenuItem(menu.get(), "Quit"));
   quit_button->sig_click().connect(boost::bind(&MenuManager::menu_quit, this));
   menu->add_item(quit_button.release());
   // End: Option Menu
 
+  group->pack(menu.release());
   manager->get_root()->add_child(group.release());
   screen_manager.push_overlay(manager.release());
 }
@@ -208,41 +207,40 @@
                                                          manager->get_root()));
 
   // Begin Menu
-  MenuComponent* menu = new MenuComponent(Rectf(Vector2f(400-150, 200), Sizef(300, 500)), true,
-                                          group.get());
-  group->pack(menu);
-
+  std::auto_ptr<MenuComponent> menu(new MenuComponent(Rectf(Vector2f(400-150, 200), Sizef(300, 500)), true,
+                                                      group.get()));
   menu->set_font(Fonts::vera20);
 
-  std::auto_ptr<ButtonMenuItem> continue_button(new ButtonMenuItem(menu,  "Resume Game"));
+  std::auto_ptr<ButtonMenuItem> continue_button(new ButtonMenuItem(menu.get(), "Resume Game"));
   continue_button->sig_click().connect(boost::bind(&MenuManager::menu_continue, this));
   menu->add_item(continue_button.release());
 
-  //  std::auto_ptr<ButtonMenuItem> select_scenario_button(new ButtonMenuItem(menu,  "Select Scenario"));
+  //  std::auto_ptr<ButtonMenuItem> select_scenario_button(new ButtonMenuItem(menu.get(), "Select Scenario"));
   //  select_scenario_button->sig_click().connect(boost::bind(&MenuManager::display_scenario_menu, this));
   // menu->add_item(select_scenario_button);
 
-  std::auto_ptr<ButtonMenuItem> options_button(new ButtonMenuItem(menu,  "Options"));
+  std::auto_ptr<ButtonMenuItem> options_button(new ButtonMenuItem(menu.get(), "Options"));
   options_button->sig_click().connect(boost::bind(&MenuManager::display_option_menu, this));
   menu->add_item(options_button.release());
 
-  std::auto_ptr<ButtonMenuItem> debug_button(new ButtonMenuItem(menu,  "Debug"));
+  std::auto_ptr<ButtonMenuItem> debug_button(new ButtonMenuItem(menu.get(), "Debug"));
   debug_button->sig_click().connect(boost::bind(&MenuManager::display_debug_menu, this));
   menu->add_item(debug_button.release());
 
-  std::auto_ptr<ButtonMenuItem> credits_button(new ButtonMenuItem(menu,  "Credits"));
+  std::auto_ptr<ButtonMenuItem> credits_button(new ButtonMenuItem(menu.get(), "Credits"));
   credits_button->sig_click().connect(boost::bind(&MenuManager::display_credits, this));
   menu->add_item(credits_button.release());
 
-  std::auto_ptr<ButtonMenuItem> help_button(new ButtonMenuItem(menu,  "Help"));
+  std::auto_ptr<ButtonMenuItem> help_button(new ButtonMenuItem(menu.get(), "Help"));
   help_button->sig_click().connect(boost::bind(&MenuManager::display_help, this));
   menu->add_item(help_button.release());
 
-  std::auto_ptr<ButtonMenuItem> quit_button(new ButtonMenuItem(menu,  "Return to Title Screen"));
+  std::auto_ptr<ButtonMenuItem> quit_button(new ButtonMenuItem(menu.get(), "Return to Title Screen"));
   quit_button->sig_click().connect(boost::bind(&MenuManager::menu_exit, this));
   menu->add_item(quit_button.release());
   // End: Option Menu
 
+  group->pack(menu.release());
   manager->get_root()->add_child(group.release());
   screen_manager.push_overlay(manager.release()); 
 }
@@ -257,9 +255,7 @@
                                                          "Select Model",
                                                          manager->get_root()));
 
-  MenuComponent* menu = new MenuComponent(Rectf(), true, group.get());
-  group->pack(menu);
-
+  std::auto_ptr<MenuComponent> menu(new MenuComponent(group->get_child_rect(), true, group.get()));
   menu->set_font(Fonts::vera20);
 
   std::vector<std::string> models;
@@ -278,11 +274,12 @@
 
   for(std::vector<std::string>::iterator i = models.begin(); i != models.end(); ++i)
     {
-      std::auto_ptr<ButtonMenuItem> scenario_button(new ButtonMenuItem(menu,  *i));
+      std::auto_ptr<ButtonMenuItem> scenario_button(new ButtonMenuItem(menu.get(), *i));
       scenario_button->sig_click().connect(boost::bind(&MenuManager::menu_show_model, this, std::string(*i)));
       menu->add_item(scenario_button.release());
     }
 
+  group->pack(menu.release());
   manager->get_root()->add_child(group.release());
   screen_manager.push_overlay(manager.release());  
 }
@@ -297,21 +294,20 @@
                                                          "Particle Systems",
                                                          manager->get_root()));
 
-  MenuComponent* menu(new MenuComponent(Rectf(), true, group.get()));
-
+  std::auto_ptr<MenuComponent> menu(new MenuComponent(group->get_child_rect(), true, group.get()));
   menu->set_font(Fonts::vera20);
-  group->pack(menu);
 
   std::vector<std::string> scenarios;
   scenarios.push_back("particlesystems/fire.particles");
   
   for(std::vector<std::string>::iterator i = scenarios.begin(); i != scenarios.end(); ++i)
     {
-      std::auto_ptr<ButtonMenuItem> scenario_button(new ButtonMenuItem(menu, *i));
+      std::auto_ptr<ButtonMenuItem> scenario_button(new ButtonMenuItem(menu.get(), *i));
       scenario_button->sig_click().connect(boost::bind(&MenuManager::menu_show_particle_system, this, *i));
       menu->add_item(scenario_button.release());
     }
 
+  group->pack(menu.release());
   manager->get_root()->add_child(group.release());
   screen_manager.push_overlay(manager.release());
 }
@@ -326,9 +322,7 @@
                                                          "Select Scenario",
                                                          manager->get_root()));
 
-  MenuComponent* menu = new MenuComponent(Rectf(), true, group.get());
-  group->pack(menu);
-
+  std::auto_ptr<MenuComponent> menu(new MenuComponent(group->get_child_rect(), true, group.get()));
   menu->set_font(Fonts::vera20);
 
   std::vector<std::string> scenarios;
@@ -342,11 +336,12 @@
   
   for(std::vector<std::string>::iterator i = scenarios.begin(); i != scenarios.end(); ++i)
     {
-      std::auto_ptr<ButtonMenuItem> scenario_button(new ButtonMenuItem(menu,  *i));
+      std::auto_ptr<ButtonMenuItem> scenario_button(new ButtonMenuItem(menu.get(), *i));
       scenario_button->sig_click().connect(boost::bind(&MenuManager::menu_start_scenario, this, *i));
       menu->add_item(scenario_button.release());
     }
 
+  group->pack(menu.release());
   manager->get_root()->add_child(group.release());
   screen_manager.push_overlay(manager.release());
 }
@@ -362,25 +357,24 @@
                                                          manager->get_root()));
 
   // Begin Menu
-  MenuComponent* menu = new MenuComponent(Rectf(), true, group.get());
-  group->pack(menu);
-
+  std::auto_ptr<MenuComponent> menu(new MenuComponent(group->get_child_rect(), true, group.get()));
   menu->set_font(Fonts::vera20);
 
   Color amb = Sector::current()->get_ambient_light();
 
-  std::auto_ptr<SliderMenuItem> r_ambient_light_item(new SliderMenuItem(menu,  "Ambient Light (Red)", int(amb.r*100), 0, 100, 10));
+  std::auto_ptr<SliderMenuItem> r_ambient_light_item(new SliderMenuItem(menu.get(), "Ambient Light (Red)", int(amb.r*100), 0, 100, 10));
   r_ambient_light_item->sig_change().connect(boost::bind(&MenuManager::menu_ambient_light, this, _1, 0));
   menu->add_item(r_ambient_light_item.release());
 
-  std::auto_ptr<SliderMenuItem> g_ambient_light_item(new SliderMenuItem(menu,  "Ambient Light (Green)", int(amb.g*100), 0, 100, 10));
+  std::auto_ptr<SliderMenuItem> g_ambient_light_item(new SliderMenuItem(menu.get(), "Ambient Light (Green)", int(amb.g*100), 0, 100, 10));
   g_ambient_light_item->sig_change().connect(boost::bind(&MenuManager::menu_ambient_light, this, _1, 1));
   menu->add_item(g_ambient_light_item.release());
 
-  std::auto_ptr<SliderMenuItem> b_ambient_light_item(new SliderMenuItem(menu,  "Ambient Light (Blue)", int(amb.b*100), 0, 100, 10));
+  std::auto_ptr<SliderMenuItem> b_ambient_light_item(new SliderMenuItem(menu.get(), "Ambient Light (Blue)", int(amb.b*100), 0, 100, 10));
   b_ambient_light_item->sig_change().connect(boost::bind(&MenuManager::menu_ambient_light, this, _1, 2));
   menu->add_item(b_ambient_light_item.release());
 
+  group->pack(menu.release());
   manager->get_root()->add_child(group.release());
   screen_manager.push_overlay(manager.release()); 
 }
@@ -395,8 +389,7 @@
                                                          "Help",
                                                          manager->get_root()));
 
-  TextView* text = new TextView(Rectf(), group.get());
-  group->pack(text);
+  std::auto_ptr<TextView> text(new TextView(group->get_child_rect(), group.get()));
 
   text->set_font(Fonts::vera12);
   text->set_text("This is a tech-demo of Windstille. Its not meant "
@@ -421,6 +414,7 @@
                  );
   text->set_active(true);
 
+  group->pack(text.release());
   manager->get_root()->add_child(group.release());
   screen_manager.push_overlay(manager.release());
 }
@@ -435,8 +429,7 @@
                                                          "Credits",
                                                          manager->get_root()));
 
-  TextView* text = new TextView(Rectf(), group.get());
-  group->pack(text);
+  std::auto_ptr<TextView> text(new TextView(group->get_child_rect(), group.get()));
 
   text->set_font(Fonts::vera12);
   text->set_text("Programming\n"
@@ -463,6 +456,7 @@
                  "  Marek Moeckel - Wansti - &lt;wansti at gmx.de&gt;\n");
   text->set_active(true);
 
+  group->pack(text.release());
   manager->get_root()->add_child(group.release());
   screen_manager.push_overlay(manager.release());
 }



From grumbel at mail.berlios.de  Thu Feb 12 22:58:37 2009
From: grumbel at mail.berlios.de (grumbel at BerliOS)
Date: Thu, 12 Feb 2009 22:58:37 +0100
Subject: [Windstille-commit] r2488 - in trunk/windstille/src: app collision
	engine hud math objects screen sprite3d util
Message-ID: <200902122158.n1CLwbL2000677@sheep.berlios.de>

Author: grumbel
Date: 2009-02-12 22:58:35 +0100 (Thu, 12 Feb 2009)
New Revision: 2488

Modified:
   trunk/windstille/src/app/console.cpp
   trunk/windstille/src/app/console.hpp
   trunk/windstille/src/collision/collision_engine.cpp
   trunk/windstille/src/collision/collision_engine.hpp
   trunk/windstille/src/engine/entity.hpp
   trunk/windstille/src/engine/sector.cpp
   trunk/windstille/src/engine/sector.hpp
   trunk/windstille/src/hud/controller_help_window.cpp
   trunk/windstille/src/hud/controller_help_window.hpp
   trunk/windstille/src/hud/conversation.cpp
   trunk/windstille/src/math/size.hpp
   trunk/windstille/src/objects/player.cpp
   trunk/windstille/src/objects/player.hpp
   trunk/windstille/src/screen/game_session.cpp
   trunk/windstille/src/screen/game_session.hpp
   trunk/windstille/src/screen/particle_viewer.cpp
   trunk/windstille/src/screen/particle_viewer.hpp
   trunk/windstille/src/sprite3d/sprite3d.cpp
   trunk/windstille/src/util/sexpr_file_reader.cpp
Log:
Some more auto_ptr's and memleak fixes, also made -Wall a little happier

Modified: trunk/windstille/src/app/console.cpp
===================================================================
--- trunk/windstille/src/app/console.cpp	2009-02-12 21:12:47 UTC (rev 2487)
+++ trunk/windstille/src/app/console.cpp	2009-02-12 21:58:35 UTC (rev 2488)
@@ -528,6 +528,10 @@
 {
 }
 
+Console::~Console()
+{
+}
+
 void
 Console::activate()
 {

Modified: trunk/windstille/src/app/console.hpp
===================================================================
--- trunk/windstille/src/app/console.hpp	2009-02-12 21:12:47 UTC (rev 2487)
+++ trunk/windstille/src/app/console.hpp	2009-02-12 21:58:35 UTC (rev 2488)
@@ -19,6 +19,7 @@
 #ifndef HEADER_WINDSTILLE_CONSOLE_HPP
 #define HEADER_WINDSTILLE_CONSOLE_HPP
 
+#include <memory>
 #include <vector>
 #include <sstream>
 
@@ -28,6 +29,7 @@
 {
 public:
   Console();
+  ~Console();
 
   void draw();
   void update(float delta);
@@ -42,11 +44,12 @@
   
   /** execute the given string */
   void execute(const std::string& str);
+
 private:
   Console (const Console&);
   Console& operator= (const Console&);
 
-  ConsoleImpl* impl;
+  std::auto_ptr<ConsoleImpl> impl;
 };
 
 extern Console console;

Modified: trunk/windstille/src/collision/collision_engine.cpp
===================================================================
--- trunk/windstille/src/collision/collision_engine.cpp	2009-02-12 21:12:47 UTC (rev 2487)
+++ trunk/windstille/src/collision/collision_engine.cpp	2009-02-12 21:58:35 UTC (rev 2488)
@@ -35,6 +35,9 @@
 
 CollisionEngine::~CollisionEngine()
 {
+  for(Objects::iterator i = objects.begin(); i != objects.end(); ++i)
+      delete *i;
+  objects.clear();
 }
 
 void

Modified: trunk/windstille/src/collision/collision_engine.hpp
===================================================================
--- trunk/windstille/src/collision/collision_engine.hpp	2009-02-12 21:12:47 UTC (rev 2487)
+++ trunk/windstille/src/collision/collision_engine.hpp	2009-02-12 21:58:35 UTC (rev 2488)
@@ -47,6 +47,7 @@
       position were the ray collides with the tilemap FIXME: Should be
       extended to handle objects as well */
   Vector2f raycast(const Vector2f& pos, float angle);
+
 private:
   void unstuck(CollisionObject& a, CollisionObject& b, float delta);
   CollisionData collide(CollisionObject& a, CollisionObject& b, float delta);

Modified: trunk/windstille/src/engine/entity.hpp
===================================================================
--- trunk/windstille/src/engine/entity.hpp	2009-02-12 21:12:47 UTC (rev 2487)
+++ trunk/windstille/src/engine/entity.hpp	2009-02-12 21:58:35 UTC (rev 2488)
@@ -42,6 +42,7 @@
   std::string use_verb;
   
   Entity* parent;
+
 public:
   Entity();
   virtual ~Entity();

Modified: trunk/windstille/src/engine/sector.cpp
===================================================================
--- trunk/windstille/src/engine/sector.cpp	2009-02-12 21:12:47 UTC (rev 2487)
+++ trunk/windstille/src/engine/sector.cpp	2009-02-12 21:58:35 UTC (rev 2488)
@@ -66,8 +66,8 @@
       "}", "");
   
   if (debug) std::cout << "Creating new Sector" << std::endl;
-  collision_engine = new CollisionEngine();
-  navigation_graph = new NavigationGraph();
+  collision_engine = std::auto_ptr<CollisionEngine>(new CollisionEngine());
+  navigation_graph = std::auto_ptr<NavigationGraph>(new NavigationGraph());
 
   current_ = this;
   interactive_tilemap = 0;
@@ -94,9 +94,6 @@
     (*i)->unref();
   for(Objects::iterator i = new_objects.begin(); i != new_objects.end(); ++i)
     (*i)->unref();
-
-  delete navigation_graph;
-  delete collision_engine;
 }
 
 void
@@ -140,12 +137,14 @@
 Sector::add_object(FileReader& reader)
 {
   if(reader.get_name() == "tilemap") {
-    TileMap* tilemap = new TileMap(reader);
-    add(tilemap);
+    std::auto_ptr<TileMap> tilemap(new TileMap(reader));
+
     if (tilemap->get_name() == "interactive")
-      interactive_tilemap = tilemap;
+      interactive_tilemap = tilemap.get();
     else if (tilemap->get_name() == "interactivebackground")
-      interactivebackground_tilemap = tilemap;
+      interactivebackground_tilemap = tilemap.get();
+
+    add(tilemap.release());
   } else if(reader.get_name() == "background") {
     // TODO
   } else if (reader.get_name() == "background-gradient") {
@@ -278,7 +277,7 @@
 
   // remove object from table
   sq_pushstring(v, object->get_name().c_str(), object->get_name().size());
-  if(SQ_FAILED(sq_deleteslot(v, -2, SQFalse) < 0)) {
+  if(SQ_FAILED(sq_deleteslot(v, -2, SQFalse))) {
     std::ostringstream msg;
     msg << "Couldn't remove squirrel object for '" << object->get_name()
         << "'";

Modified: trunk/windstille/src/engine/sector.hpp
===================================================================
--- trunk/windstille/src/engine/sector.hpp	2009-02-12 21:12:47 UTC (rev 2487)
+++ trunk/windstille/src/engine/sector.hpp	2009-02-12 21:58:35 UTC (rev 2488)
@@ -19,6 +19,7 @@
 #ifndef HEADER_WINDSTILLE_SECTOR_HPP
 #define HEADER_WINDSTILLE_SECTOR_HPP
 
+#include <memory>
 #include <string>
 #include <vector>
 #include "display/color.hpp"
@@ -59,8 +60,8 @@
   TileMap* interactive_tilemap;
   TileMap* interactivebackground_tilemap;
 
-  CollisionEngine* collision_engine;
-  NavigationGraph* navigation_graph;
+  std::auto_ptr<CollisionEngine> collision_engine;
+  std::auto_ptr<NavigationGraph> navigation_graph;
 
   Player* player;
 
@@ -99,7 +100,7 @@
   void add(GameObject*);
   void add_object(FileReader& reader);
 
-  CollisionEngine* get_collision_engine() const { return collision_engine; }
+  CollisionEngine* get_collision_engine() const { return collision_engine.get(); }
 
   GameObject* get_object(const std::string& name) const;
 

Modified: trunk/windstille/src/hud/controller_help_window.cpp
===================================================================
--- trunk/windstille/src/hud/controller_help_window.cpp	2009-02-12 21:12:47 UTC (rev 2487)
+++ trunk/windstille/src/hud/controller_help_window.cpp	2009-02-12 21:58:35 UTC (rev 2488)
@@ -16,6 +16,7 @@
 **  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
+#include <memory>
 #include "input/input_manager.hpp"
 #include "display/display.hpp"
 #include "display/text_area.hpp"
@@ -27,7 +28,7 @@
 class ControllerHelpWindowImpl
 {
 public:
-  TextArea* text_area;
+  std::auto_ptr<TextArea> text_area;
   bool active;
 };
 
@@ -39,9 +40,9 @@
   int height = 120;
   
   impl->active = false;
-  impl->text_area = new TextArea(Rect(Point(Display::get_width() - width - 16,
-                                            Display::get_height() - height - 16),
-                                      Size(width, height)), false);
+  impl->text_area = std::auto_ptr<TextArea>(new TextArea(Rect(Point(Display::get_width() - width - 16,
+                                                                    Display::get_height() - height - 16),
+                                                              Size(width, height)), false));
   impl->text_area->set_font(Fonts::ttffont);
   impl->text_area->set_text("Control Help\n"
                             "------------\n"

Modified: trunk/windstille/src/hud/controller_help_window.hpp
===================================================================
--- trunk/windstille/src/hud/controller_help_window.hpp	2009-02-12 21:12:47 UTC (rev 2487)
+++ trunk/windstille/src/hud/controller_help_window.hpp	2009-02-12 21:58:35 UTC (rev 2488)
@@ -28,7 +28,7 @@
 class ControllerHelpWindow : public Screen
 {
 public:
-  ControllerHelpWindow();
+  ControllerHelpWindow(); 
 
   void draw();
   void update(float delta, const Controller& controller);

Modified: trunk/windstille/src/hud/conversation.cpp
===================================================================
--- trunk/windstille/src/hud/conversation.cpp	2009-02-12 21:12:47 UTC (rev 2487)
+++ trunk/windstille/src/hud/conversation.cpp	2009-02-12 21:58:35 UTC (rev 2488)
@@ -70,7 +70,7 @@
 
   float segment = 360.0f / choices.size();
 
-  for(int i = 0; i < choices.size(); ++i)
+  for(int i = 0; i < (int)choices.size(); ++i)
     { // FIXME:
       Vector2f offset(0.0f, 1.0f);
       offset = offset.rotate(math::deg2rad(segment*i) - M_PI/2);

Modified: trunk/windstille/src/math/size.hpp
===================================================================
--- trunk/windstille/src/math/size.hpp	2009-02-12 21:12:47 UTC (rev 2487)
+++ trunk/windstille/src/math/size.hpp	2009-02-12 21:58:35 UTC (rev 2488)
@@ -50,7 +50,8 @@
 	//param width: Initial width of size structure.
 	//param height: Initial height of size structure.
 	//param size: Size structure to construct this one from.
-	Size() { return; }
+	Size() 
+        : width(0), height(0) { }
 
 	Size(int width, int height)
 	: width(width), height(height) { }

Modified: trunk/windstille/src/objects/player.cpp
===================================================================
--- trunk/windstille/src/objects/player.cpp	2009-02-12 21:12:47 UTC (rev 2487)
+++ trunk/windstille/src/objects/player.cpp	2009-02-12 21:58:35 UTC (rev 2488)
@@ -51,7 +51,6 @@
   flashlighthighlight("images/flashlighthighlight.sprite"),
   state(STAND)
 {
-  //laser_pointer = new LaserPointer();
   sprite = Sprite3D("models/characters/jane/jane.wsprite");
   pos.x = 320;
   pos.y = 200;
@@ -77,13 +76,12 @@
   z_pos = 100.0f;
 
   contact = 0;
-  weapon = new Pistol();
-  laser_pointer = ((Pistol*) weapon)->laser_pointer;
+  weapon = std::auto_ptr<Weapon>(new Pistol());
+  laser_pointer = ((Pistol*)weapon.get())->laser_pointer;
 }
 
 Player::~Player()
 {
-  //delete laser_pointer;
 }
 
 void
@@ -246,8 +244,8 @@
         Point p(int(pos.x)/32, (int(pos.y)/32 + 1));
         unsigned int col = tilemap->get_pixel(p.x, p.y);
 
-        if ((col & TILE_STAIRS) && (get_direction() == WEST && (col & TILE_LEFT) ||
-                                    get_direction() == EAST && (col & TILE_RIGHT)))
+        if ((col & TILE_STAIRS) && ((get_direction() == WEST && (col & TILE_LEFT)) ||
+                                    (get_direction() == EAST && (col & TILE_RIGHT))))
           {
             delete contact;
             contact = new StairContact(tilemap, p);
@@ -272,8 +270,8 @@
         Point p(int(pos.x)/32 + ((get_direction() == WEST) ? -1 : +1), (int(pos.y)/32));
         unsigned int col = tilemap->get_pixel(p.x, p.y);
 
-        if ((col & TILE_STAIRS) && (get_direction() == EAST && (col & TILE_LEFT) ||
-                                    get_direction() == WEST && (col & TILE_RIGHT)))
+        if ((col & TILE_STAIRS) && ((get_direction() == EAST && (col & TILE_LEFT)) ||
+                                    (get_direction() == WEST && (col & TILE_RIGHT))))
           {
             delete contact;
             contact = new StairContact(tilemap, p);
@@ -405,8 +403,8 @@
     return;
   }
 
-  if(get_direction() == WEST && controller.get_axis_state(X_AXIS) > 0.5f
-     || get_direction() == EAST && controller.get_axis_state(X_AXIS) < -0.5f) {
+  if ((get_direction() == WEST && controller.get_axis_state(X_AXIS) > 0.5f) ||
+      (get_direction() == EAST && controller.get_axis_state(X_AXIS) < -0.5f)) {
     leave_walk();
     set_turnaround();
     return;
@@ -494,8 +492,8 @@
       set_walk(WEST);
     }
   } 
-  if(sprite.get_rot() && controller.get_axis_state(X_AXIS) > 0.5f
-     || !sprite.get_rot() && controller.get_axis_state(X_AXIS) < -0.5f) {
+  if((sprite.get_rot() && controller.get_axis_state(X_AXIS) > 0.5f) ||
+     (!sprite.get_rot() && controller.get_axis_state(X_AXIS) < -0.5f)) {
     sprite.set_speed(-1.0);
     sprite.set_next_action("Walk");
     state = WALK;

Modified: trunk/windstille/src/objects/player.hpp
===================================================================
--- trunk/windstille/src/objects/player.hpp	2009-02-12 21:12:47 UTC (rev 2487)
+++ trunk/windstille/src/objects/player.hpp	2009-02-12 21:58:35 UTC (rev 2488)
@@ -55,7 +55,7 @@
 
   LaserPointer* laser_pointer;
   Contact* contact;
-  Weapon* weapon;
+  std::auto_ptr<Weapon> weapon;
 
 public:
   enum State

Modified: trunk/windstille/src/screen/game_session.cpp
===================================================================
--- trunk/windstille/src/screen/game_session.cpp	2009-02-12 21:12:47 UTC (rev 2487)
+++ trunk/windstille/src/screen/game_session.cpp	2009-02-12 21:58:35 UTC (rev 2488)
@@ -65,7 +65,7 @@
 
   float fadeout_value;
   float fade_time;
-  Sector* sector;
+  std::auto_ptr<Sector> sector;
   View    view;
 
   std::string filename;
@@ -98,7 +98,6 @@
   Screen* current_gui;
 
   GameSessionImpl() {
-    sector         = 0;
     current_gui    = 0;
     cutscene_mode  = false;
     cutscene_value = 0.0f;
@@ -108,7 +107,6 @@
     fade_time      = 1.0f;
   }
   ~GameSessionImpl() {
-    delete sector;
   }
 
   void draw();
@@ -306,10 +304,9 @@
 void
 GameSession::set_sector(const std::string& )
 {
-  delete impl->sector;
-  impl->sector = new Sector(impl->filename);
+  impl->sector = std::auto_ptr<Sector>(new Sector(impl->filename));
  
-  GameObject::set_world(impl->sector);
+  GameObject::set_world(impl->sector.get());
 
   //FIXME: does the TestObject class still need to exist?
   //sector->add(new TestObject());

Modified: trunk/windstille/src/screen/game_session.hpp
===================================================================
--- trunk/windstille/src/screen/game_session.hpp	2009-02-12 21:12:47 UTC (rev 2487)
+++ trunk/windstille/src/screen/game_session.hpp	2009-02-12 21:58:35 UTC (rev 2488)
@@ -48,8 +48,8 @@
 public:
   static GameSession* current() { return current_; } 
 
-  GameSession (const std::string& arg_filename);
-  ~GameSession ();
+  GameSession(const std::string& arg_filename);
+  virtual ~GameSession();
 
   View* get_view();
 

Modified: trunk/windstille/src/screen/particle_viewer.cpp
===================================================================
--- trunk/windstille/src/screen/particle_viewer.cpp	2009-02-12 21:12:47 UTC (rev 2487)
+++ trunk/windstille/src/screen/particle_viewer.cpp	2009-02-12 21:58:35 UTC (rev 2488)
@@ -97,16 +97,28 @@
 
 ParticleViewer::~ParticleViewer()
 {
+  for(Systems::iterator i = systems.begin(); i != systems.end(); ++i)
+    delete *i;
+  systems.clear();
+
+  for(ParticleSystemGUIs::iterator i = guis.begin(); i != guis.end(); ++i)
+    delete *i;
+  guis.clear();
 }
 
 void
 ParticleViewer::load(const std::string& filename)
 {
   std::cout << "ParticleViewer: loading " << filename << std::endl;
-  
+
+  // Cleanup
   for(Systems::iterator i = systems.begin(); i != systems.end(); ++i)
     delete *i;
   systems.clear();
+
+  for(ParticleSystemGUIs::iterator i = guis.begin(); i != guis.end(); ++i)
+    delete *i;
+  guis.clear();
   
   FileReader root_reader = FileReader::parse(filename);
   if(root_reader.get_name() != "particle-systems") {

Modified: trunk/windstille/src/screen/particle_viewer.hpp
===================================================================
--- trunk/windstille/src/screen/particle_viewer.hpp	2009-02-12 21:12:47 UTC (rev 2487)
+++ trunk/windstille/src/screen/particle_viewer.hpp	2009-02-12 21:58:35 UTC (rev 2488)
@@ -48,6 +48,7 @@
 
   typedef std::vector<ParticleSystemGUI*> ParticleSystemGUIs;
   ParticleSystemGUIs guis;
+
 public:
   ParticleViewer();
   ~ParticleViewer();

Modified: trunk/windstille/src/sprite3d/sprite3d.cpp
===================================================================
--- trunk/windstille/src/sprite3d/sprite3d.cpp	2009-02-12 21:12:47 UTC (rev 2487)
+++ trunk/windstille/src/sprite3d/sprite3d.cpp	2009-02-12 21:58:35 UTC (rev 2488)
@@ -167,8 +167,8 @@
 void
 Sprite3D::set_speed(float speed)
 {
-  if(speed < 0 && frame1.speed >= 0
-      || speed >= 0 && frame1.speed < 0) {
+  if((speed < 0 && frame1.speed >= 0) ||
+     (speed >= 0 && frame1.speed < 0)) {
     blend_time = 1.0 - blend_time;
     std::swap(frame1, frame2);
   }

Modified: trunk/windstille/src/util/sexpr_file_reader.cpp
===================================================================
--- trunk/windstille/src/util/sexpr_file_reader.cpp	2009-02-12 21:12:47 UTC (rev 2487)
+++ trunk/windstille/src/util/sexpr_file_reader.cpp	2009-02-12 21:58:35 UTC (rev 2488)
@@ -33,9 +33,8 @@
   /** Pointer to the top-most lisp element, only here for purpose of
       being able to delete it */
   const lisp::Lisp* root;
-
-  bool  delete_sexpr;
   const lisp::Lisp* sexpr;
+  bool  delete_sexpr;
 
   SExprFileReaderImpl(const lisp::Lisp* root_, const lisp::Lisp* sexpr_)
     : root(root_),



From grumbel at mail.berlios.de  Thu Feb 12 23:56:12 2009
From: grumbel at mail.berlios.de (grumbel at BerliOS)
Date: Thu, 12 Feb 2009 23:56:12 +0100
Subject: [Windstille-commit] r2489 - trunk/windstille/src/screen
Message-ID: <200902122256.n1CMuCNV012397@sheep.berlios.de>

Author: grumbel
Date: 2009-02-12 23:56:11 +0100 (Thu, 12 Feb 2009)
New Revision: 2489

Modified:
   trunk/windstille/src/screen/navigation_test.cpp
   trunk/windstille/src/screen/navigation_test.hpp
   trunk/windstille/src/screen/particle_viewer.cpp
Log:
More std::auto_ptr

Modified: trunk/windstille/src/screen/navigation_test.cpp
===================================================================
--- trunk/windstille/src/screen/navigation_test.cpp	2009-02-12 21:58:35 UTC (rev 2488)
+++ trunk/windstille/src/screen/navigation_test.cpp	2009-02-12 22:56:11 UTC (rev 2489)
@@ -33,14 +33,12 @@
 NavigationTest::NavigationTest()
   : cursor(400, 300),
     player(200,200),
-    graph(0),
+    graph(new NavigationGraph()),
     connection(0),
     selected_segment(0),
     selected_node(0),
     node_to_connect(0)
 {
-  graph = new NavigationGraph();
-
   try {
     FileReader reader = FileReader::parse("navigation.nav");
     graph->load(reader);
@@ -90,7 +88,7 @@
 
   Display::fill_circle(player, 12.0f, Color(0.0f, 0.0f, 1.0f, 1.0f));
 
-  if (connection)
+  if (connection.get())
     {
       Display::fill_circle(connection->get_pos(), 16.0f, Color(0.0f, 0.0f, 1.0f, 0.5f));
       Display::fill_circle(connection->get_pos(), 8.0f, Color(0.0f, 1.0f, 1.0f));
@@ -152,7 +150,7 @@
       player = old_player = cursor;
     }
 
-  if (connection)
+  if (connection.get())
     { 
       // Handle the movement of the connection
       Node* next_node;
@@ -189,8 +187,7 @@
           if (!next_segment.segment)
             {
               std::cout << "Dead End" << std::endl;
-              delete connection;
-              connection = 0;
+              connection.reset();
 
               // FIXME: Voodoo to fix connection/deadend cicles
               player += stick;
@@ -205,8 +202,7 @@
 
       if (controller.get_button_state(AIM_BUTTON))
         {         
-          delete connection;
-          connection = 0;
+          connection.reset();
 
           // FIXME: Voodoo to fix connection/dedaend cicles
           player += stick;
@@ -227,7 +223,7 @@
       std::vector<SegmentPosition> positions = graph->find_intersections(Line(old_player, player));
       if (!positions.empty()) {
         std::cout << "Doing connection" << std::endl;
-        connection = new SegmentPosition(positions.front());
+        connection.reset(new SegmentPosition(positions.front()));
       }
     }
   
@@ -255,10 +251,9 @@
   else
     selected_segment = 0;
 
-  if (connection && !graph->valid(connection->get_segment()))
+  if (connection.get() && !graph->valid(connection->get_segment()))
     {
-      delete connection;
-      connection = 0;
+      connection.reset();
     }
 
   old_player = player;

Modified: trunk/windstille/src/screen/navigation_test.hpp
===================================================================
--- trunk/windstille/src/screen/navigation_test.hpp	2009-02-12 21:58:35 UTC (rev 2488)
+++ trunk/windstille/src/screen/navigation_test.hpp	2009-02-12 22:56:11 UTC (rev 2489)
@@ -36,8 +36,8 @@
   Vector2f player;
   Vector2f old_player;
   
-  NavigationGraph* graph;
-  SegmentPosition* connection;
+  std::auto_ptr<NavigationGraph> graph;
+  std::auto_ptr<SegmentPosition> connection;
 
   SegmentHandle selected_segment;
   NodeHandle    selected_node;

Modified: trunk/windstille/src/screen/particle_viewer.cpp
===================================================================
--- trunk/windstille/src/screen/particle_viewer.cpp	2009-02-12 21:58:35 UTC (rev 2488)
+++ trunk/windstille/src/screen/particle_viewer.cpp	2009-02-12 22:56:11 UTC (rev 2489)
@@ -35,13 +35,14 @@
 
 class ParticleSystemGUI
 {
-public:
+private:
   ParticleSystem* psystem;
   gui::GridComponent* grid;
   gui::Slider* gravity_slider;
   gui::Slider* velocity_slider;
   gui::Slider* count_slider;
   
+public:
   ParticleSystemGUI(gui::Component* parent, ParticleSystem* psystem_)
     : psystem(psystem_)
   {



From grumbel at mail.berlios.de  Thu Feb 12 23:56:27 2009
From: grumbel at mail.berlios.de (grumbel at BerliOS)
Date: Thu, 12 Feb 2009 23:56:27 +0100
Subject: [Windstille-commit] r2490 - trunk/windstille
Message-ID: <200902122256.n1CMuRud012554@sheep.berlios.de>

Author: grumbel
Date: 2009-02-12 23:56:26 +0100 (Thu, 12 Feb 2009)
New Revision: 2490

Modified:
   trunk/windstille/TODO
Log:
Some TODO points

Modified: trunk/windstille/TODO
===================================================================
--- trunk/windstille/TODO	2009-02-12 22:56:11 UTC (rev 2489)
+++ trunk/windstille/TODO	2009-02-12 22:56:26 UTC (rev 2490)
@@ -35,6 +35,24 @@
     <i></i>: make text properly italic 
 
 * Specify the capabilites that the different subsystems need to have
+
+* conversations really should be data with hooks for scripts, not pure
+  scripts
+
+* menu_manager.cpp doesn't use auto_ptr everywhere since
+  pack(Component* ) needs to be done before some other actions, which
+  can't be done in a streightforward manner with auto_ptr
+
+  pack(child)
+    child->set_rect()     
+  child->add_item(menuitem) <- doesn't work when size isn't set
+
+* figure out why running the game engine is extremely slow in
+  valgrind, while pause menu is fast
+
+* make Console not derive from ostream
+
+* GridComponent and ParticleViewer leak
 
 Windstille Bugs
 ===============



From grumbel at mail.berlios.de  Fri Feb 13 11:07:13 2009
From: grumbel at mail.berlios.de (grumbel at BerliOS)
Date: Fri, 13 Feb 2009 11:07:13 +0100
Subject: [Windstille-commit] r2491 - trunk/windstille/src/screen
Message-ID: <200902131007.n1DA7DXN024556@sheep.berlios.de>

Author: grumbel
Date: 2009-02-13 11:07:12 +0100 (Fri, 13 Feb 2009)
New Revision: 2491

Modified:
   trunk/windstille/src/screen/screen_manager.cpp
Log:
Added check so that incorrect use doesn't cause crash

Modified: trunk/windstille/src/screen/screen_manager.cpp
===================================================================
--- trunk/windstille/src/screen/screen_manager.cpp	2009-02-12 22:56:26 UTC (rev 2490)
+++ trunk/windstille/src/screen/screen_manager.cpp	2009-02-13 10:07:12 UTC (rev 2491)
@@ -141,8 +141,15 @@
           break;
 
         case POP_SCREEN:
-          delete overlay_screens.back();
-          overlay_screens.pop_back();
+          if (overlay_screens.empty())
+            {
+              std::cout << "Error: ScreenManager: trying to pop_overlay with empty stack" << std::endl;
+            }
+          else
+            {
+              delete overlay_screens.back();
+              overlay_screens.pop_back();
+            }
           break;
 
         case CLEAR_SCREENS:



From grumbel at mail.berlios.de  Fri Feb 13 11:07:36 2009
From: grumbel at mail.berlios.de (grumbel at BerliOS)
Date: Fri, 13 Feb 2009 11:07:36 +0100
Subject: [Windstille-commit] r2492 - in trunk/windstille/src: app armature
	font gui particles screen sprite3d
Message-ID: <200902131007.n1DA7aBK024654@sheep.berlios.de>

Author: grumbel
Date: 2009-02-13 11:07:35 +0100 (Fri, 13 Feb 2009)
New Revision: 2492

Modified:
   trunk/windstille/src/app/windstille_main.cpp
   trunk/windstille/src/armature/armature.cpp
   trunk/windstille/src/armature/pose.cpp
   trunk/windstille/src/font/fonts.cpp
   trunk/windstille/src/gui/grid_component.cpp
   trunk/windstille/src/gui/grid_component.hpp
   trunk/windstille/src/gui/gui_manager.cpp
   trunk/windstille/src/gui/gui_manager.hpp
   trunk/windstille/src/gui/slider.cpp
   trunk/windstille/src/particles/particle_system.cpp
   trunk/windstille/src/particles/particle_system.hpp
   trunk/windstille/src/screen/armature_test.cpp
   trunk/windstille/src/screen/armature_test.hpp
   trunk/windstille/src/screen/particle_viewer.cpp
   trunk/windstille/src/sprite3d/sprite3d.cpp
Log:
Added some more std::auto_ptr

Modified: trunk/windstille/src/app/windstille_main.cpp
===================================================================
--- trunk/windstille/src/app/windstille_main.cpp	2009-02-13 10:07:12 UTC (rev 2491)
+++ trunk/windstille/src/app/windstille_main.cpp	2009-02-13 10:07:35 UTC (rev 2492)
@@ -131,23 +131,23 @@
 
     if (sprite3dview)
       {
-        Sprite3DView* sprite3dview = new Sprite3DView();
+        std::auto_ptr<Sprite3DView> sprite3dview(new Sprite3DView());
 
         if (!levelfile.empty())
           sprite3dview->set_model(levelfile);
 
         // Launching Sprite3DView instead of game
-        screen_manager.push_screen(sprite3dview);
+        screen_manager.push_screen(sprite3dview.release());
       }
     else if (sprite2dview)
       {
-        Sprite2DView* sprite2dview = new Sprite2DView();
+        std::auto_ptr<Sprite2DView> sprite2dview(new Sprite2DView());
 
         if (!levelfile.empty())
           sprite2dview->set_sprite(levelfile);
 
         // Launching Sprite2DView instead of game
-        screen_manager.push_screen(sprite2dview);
+        screen_manager.push_screen(sprite2dview.release());
       }
     else if (particleview)
       {

Modified: trunk/windstille/src/armature/armature.cpp
===================================================================
--- trunk/windstille/src/armature/armature.cpp	2009-02-13 10:07:12 UTC (rev 2491)
+++ trunk/windstille/src/armature/armature.cpp	2009-02-13 10:07:35 UTC (rev 2492)
@@ -57,7 +57,7 @@
         {
           if (i->get_name() == "bone")
             {
-              Bone* bone = new Bone();
+              std::auto_ptr<Bone> bone(new Bone());
               if (!(i->get("name",     bone->name) &&
                     i->get("children", bone->children_names) &&
                     i->get("parent",   bone->parent_name) &&
@@ -66,12 +66,11 @@
                     i->get("head",     bone->offset)))
                 {
                   std::cout << "Error: some Bone attribute missing" << std::endl;
-                  delete bone;
                 }
               else
                 {
                   bone->render_matrix = bone->quat.to_matrix();
-                  bones.push_back(bone);
+                  bones.push_back(bone.release());
                 }
             }
           else

Modified: trunk/windstille/src/armature/pose.cpp
===================================================================
--- trunk/windstille/src/armature/pose.cpp	2009-02-13 10:07:12 UTC (rev 2491)
+++ trunk/windstille/src/armature/pose.cpp	2009-02-13 10:07:35 UTC (rev 2492)
@@ -59,4 +59,8 @@
   //std::cout << "Pose: " << name << " " << bones.size() << std::endl;
 }
 
+Pose::~Pose()
+{
+}
+
 /* EOF */

Modified: trunk/windstille/src/font/fonts.cpp
===================================================================
--- trunk/windstille/src/font/fonts.cpp	2009-02-13 10:07:12 UTC (rev 2491)
+++ trunk/windstille/src/font/fonts.cpp	2009-02-13 10:07:35 UTC (rev 2492)
@@ -29,15 +29,13 @@
 void
 Fonts::init()
 {
-  BorderFontEffect* border_effect = new BorderFontEffect(1);
+  std::auto_ptr<BorderFontEffect> border_effect(new BorderFontEffect(1));
 
   ttffont = new TTFFont("fonts/VeraMono.ttf", 12);
   vera12  = new TTFFont("fonts/Vera.ttf", 12);
   vera16  = new TTFFont("fonts/Vera.ttf", 16);
   vera20  = new TTFFont("fonts/Vera.ttf", 20);
   vera28  = new TTFFont("fonts/Vera.ttf", 28);
-
-  delete border_effect;
 }
 
 void

Modified: trunk/windstille/src/gui/grid_component.cpp
===================================================================
--- trunk/windstille/src/gui/grid_component.cpp	2009-02-13 10:07:12 UTC (rev 2491)
+++ trunk/windstille/src/gui/grid_component.cpp	2009-02-13 10:07:35 UTC (rev 2492)
@@ -40,6 +40,9 @@
 
 GridComponent::~GridComponent()
 {
+  for(Grid::iterator i = grid.begin(); i != grid.end(); ++i)
+    delete i->component;
+  grid.clear();
 }
 
 void
@@ -196,15 +199,19 @@
   assert(x < grid.get_width());
   assert(y < grid.get_height());
 
-  if (grid(x, y).component != 0)
+  if (grid(x, y).component)
     {
       std::cout << "Warning component already at: " << x << ", " << y << ", ignoring" << std::endl;
+      delete component;
     }
   else
     {
       Rectf rect = get_screen_rect();
+
       if (colspan == 1 && rowspan == 1)
-        grid(x, y) = ComponentBox(component, Size(colspan, rowspan));
+        {
+          grid(x, y) = ComponentBox(component, Size(colspan, rowspan));
+        }
       else
         {
           for(int iy = 0; iy < rowspan; ++iy)
@@ -216,7 +223,7 @@
         }
 
       component->set_screen_rect(Rectf(Vector2f(rect.left + x * (rect.get_width() /grid.get_width())  + padding,
-                                              rect.top  + y * (rect.get_height()/grid.get_height()) + padding),
+                                                rect.top  + y * (rect.get_height()/grid.get_height()) + padding),
                                        Sizef((rect.get_width()/grid.get_width())   * colspan - 2*padding,
                                              (rect.get_height()/grid.get_height()) * rowspan - 2*padding)));
     }

Modified: trunk/windstille/src/gui/grid_component.hpp
===================================================================
--- trunk/windstille/src/gui/grid_component.hpp	2009-02-13 10:07:12 UTC (rev 2491)
+++ trunk/windstille/src/gui/grid_component.hpp	2009-02-13 10:07:35 UTC (rev 2492)
@@ -55,7 +55,7 @@
 public:
   GridComponent(FileReader& reader, Component* parent);
   GridComponent(const Rectf& rect, int weight, int height, Component* parent);
-  ~GridComponent();
+  virtual ~GridComponent();
   
   void draw();
   void update(float delta, const Controller& controller);

Modified: trunk/windstille/src/gui/gui_manager.cpp
===================================================================
--- trunk/windstille/src/gui/gui_manager.cpp	2009-02-13 10:07:12 UTC (rev 2491)
+++ trunk/windstille/src/gui/gui_manager.cpp	2009-02-13 10:07:35 UTC (rev 2492)
@@ -32,12 +32,11 @@
 
 GUIManager::GUIManager()
 {
-  root = new RootComponent(Rectf(0,0,800,600));
+  root = std::auto_ptr<RootComponent>(new RootComponent(Rectf(0,0,800,600)));
 }
 
 GUIManager::~GUIManager()
 {
-  delete root;
 }
 
 void
@@ -52,7 +51,8 @@
   root->update(delta, controller);
 
   if (!root->is_active())
-    { //FIXME: This doesn't work when GUI isn't an overlay
+    {
+      //FIXME: This doesn't work when GUI isn't an overlay
       screen_manager.pop_overlay();
     }
 }
@@ -60,7 +60,7 @@
 RootComponent*
 GUIManager::get_root() const
 {
-  return root;
+  return root.get();
 }
 
 } // namespace gui

Modified: trunk/windstille/src/gui/gui_manager.hpp
===================================================================
--- trunk/windstille/src/gui/gui_manager.hpp	2009-02-13 10:07:12 UTC (rev 2491)
+++ trunk/windstille/src/gui/gui_manager.hpp	2009-02-13 10:07:35 UTC (rev 2492)
@@ -29,7 +29,7 @@
 class GUIManager : public Screen
 {
 private:
-  RootComponent* root;
+  std::auto_ptr<RootComponent> root;
 
 public:
   GUIManager();

Modified: trunk/windstille/src/gui/slider.cpp
===================================================================
--- trunk/windstille/src/gui/slider.cpp	2009-02-13 10:07:12 UTC (rev 2491)
+++ trunk/windstille/src/gui/slider.cpp	2009-02-13 10:07:35 UTC (rev 2492)
@@ -70,7 +70,7 @@
   
   int width = 30;
   Rectf slider_rect(Vector2f(rect.left + (rect.get_width()-width) * ((pos-min)/float(max - min)),
-                           rect.top + 2),
+                             rect.top + 2),
                     Sizef(width, rect.get_height()-4));
   if (is_active())
     {

Modified: trunk/windstille/src/particles/particle_system.cpp
===================================================================
--- trunk/windstille/src/particles/particle_system.cpp	2009-02-13 10:07:12 UTC (rev 2491)
+++ trunk/windstille/src/particles/particle_system.cpp	2009-02-13 10:07:35 UTC (rev 2492)
@@ -31,8 +31,8 @@
 ParticleSystem::ParticleSystem(FileReader& props)
 {
   // Init some defaults
-  randomizer = new PointRandomizer;
-  drawer     = 0;
+  randomizer = std::auto_ptr<Randomizer>(new PointRandomizer());
+
   x_pos      = 320.0f;
   y_pos      = 240.0f;
   z_pos      = 0;
@@ -213,8 +213,8 @@
 
 ParticleSystem::ParticleSystem()
 {
-  randomizer = new PointRandomizer;
-  drawer     = 0;
+  randomizer = std::auto_ptr<Randomizer>(new PointRandomizer);
+
   x_pos      = 320.0f;
   y_pos      = 240.0f;
   z_pos      = 0;
@@ -242,21 +242,18 @@
 
 ParticleSystem::~ParticleSystem()
 {
-  delete randomizer;
-  delete drawer;
 }
 
 void
 ParticleSystem::set_drawer(Drawer* drawer_)
 {
-  delete drawer;
-  drawer = drawer_;
+  drawer = std::auto_ptr<Drawer>(drawer_);
 }
   
 void
 ParticleSystem::draw(SceneContext& sc)
 {
-  if (drawer)
+  if (drawer.get())
     {
       drawer->draw(sc.get_layer(layer), *this);
     }
@@ -337,7 +334,6 @@
 void
 ParticleSystem::set_cycles(float num)
 {
-  (void) num;
 }
 
 void
@@ -357,30 +353,26 @@
 void
 ParticleSystem::set_point_distribution()
 {
-  delete randomizer;
-  randomizer = new PointRandomizer();
+  randomizer = std::auto_ptr<Randomizer>(new PointRandomizer());
 }
 
 void
 ParticleSystem::set_line_distribution(float x1, float y1,
                                       float x2, float y2)
 {
-  delete randomizer;
-  randomizer = new LineRandomizer(x1, y1, x2, y2);
+  randomizer = std::auto_ptr<Randomizer>(new LineRandomizer(x1, y1, x2, y2));
 }
 
 void
 ParticleSystem::set_circle_distribution(float radius)
 {
-  delete randomizer;
-  randomizer = new CircleRandomizer(radius);
+  randomizer = std::auto_ptr<Randomizer>(new CircleRandomizer(radius));
 }
 
 void
 ParticleSystem::set_rect_distribution(const Rectf& rect)
 {
-  delete randomizer;
-  randomizer = new RectRandomizer(rect);
+  randomizer = std::auto_ptr<Randomizer>(new RectRandomizer(rect));
 }
 
 void

Modified: trunk/windstille/src/particles/particle_system.hpp
===================================================================
--- trunk/windstille/src/particles/particle_system.hpp	2009-02-13 10:07:12 UTC (rev 2491)
+++ trunk/windstille/src/particles/particle_system.hpp	2009-02-13 10:07:35 UTC (rev 2492)
@@ -61,8 +61,8 @@
   float life_time;
 
   /** Places the particle in its initial position */
-  Randomizer* randomizer;
-  Drawer* drawer;
+  std::auto_ptr<Randomizer> randomizer;
+  std::auto_ptr<Drawer>     drawer;
 
   float spawn_x;
   float spawn_y;
@@ -94,6 +94,7 @@
   Color color_stop;
 private:
   void spawn(Particle& particle);
+
 public:
   ParticleSystem();
   ParticleSystem(FileReader& props);

Modified: trunk/windstille/src/screen/armature_test.cpp
===================================================================
--- trunk/windstille/src/screen/armature_test.cpp	2009-02-13 10:07:12 UTC (rev 2491)
+++ trunk/windstille/src/screen/armature_test.cpp	2009-02-13 10:07:35 UTC (rev 2492)
@@ -31,10 +31,10 @@
 ArmatureTest::ArmatureTest()
 {
   FileReader model_reader = FileReader::parse("armature/mesh.mesh");
-  model = new Model(model_reader, "armature/");
+  model = std::auto_ptr<Model>(new Model(model_reader, "armature/"));
 
   FileReader armature_reader = FileReader::parse("armature/armature.arm");
-  armature = new Armature(armature_reader);
+  armature = std::auto_ptr<Armature>(new Armature(armature_reader));
 
   std::vector<std::string> file_lst;
   {
@@ -59,6 +59,13 @@
   time = 0.0f;
 }
 
+ArmatureTest::~ArmatureTest()
+{
+  for(std::vector<Pose*>::iterator i = poses.begin(); i != poses.end(); ++i)
+    delete *i;
+  poses.clear();
+}
+
 void
 ArmatureTest::draw()
 {
@@ -89,7 +96,7 @@
 
   pose_idx = int(time * 5.0f) % poses.size();
   armature->apply(*poses[pose_idx]);
-  model->apply(armature);
+  model->apply(armature.get());
 
   if (controller.button_was_pressed(ESCAPE_BUTTON) ||
       controller.button_was_pressed(PAUSE_BUTTON))

Modified: trunk/windstille/src/screen/armature_test.hpp
===================================================================
--- trunk/windstille/src/screen/armature_test.hpp	2009-02-13 10:07:12 UTC (rev 2491)
+++ trunk/windstille/src/screen/armature_test.hpp	2009-02-13 10:07:35 UTC (rev 2492)
@@ -19,6 +19,7 @@
 #ifndef HEADER_WINDSTILLE_ARMATURE_TEST_HPP
 #define HEADER_WINDSTILLE_ARMATURE_TEST_HPP
 
+#include <memory>
 #include "armature/armature.hpp"
 #include "armature/model.hpp"
 #include "screen.hpp"
@@ -27,8 +28,8 @@
 class ArmatureTest : public Screen
 {
 private:
-  Model* model;
-  Armature* armature;
+  std::auto_ptr<Model>    model;
+  std::auto_ptr<Armature> armature;
   std::vector<Pose*> poses;
   
   int pose_idx;
@@ -40,6 +41,7 @@
 
 public:
   ArmatureTest();
+  ~ArmatureTest();
 
   void draw();
   void update(float delta, const Controller& controller);

Modified: trunk/windstille/src/screen/particle_viewer.cpp
===================================================================
--- trunk/windstille/src/screen/particle_viewer.cpp	2009-02-13 10:07:12 UTC (rev 2491)
+++ trunk/windstille/src/screen/particle_viewer.cpp	2009-02-13 10:07:35 UTC (rev 2492)
@@ -47,6 +47,7 @@
     : psystem(psystem_)
   {
     using namespace gui;
+
     grid = new GridComponent(Rectf(200, 120, 600, 220), 2, 3, parent);
     grid->set_padding(4);
 
@@ -88,12 +89,8 @@
   background = Sprite("images/greychess.sprite");
   show_gui = false;
 
-  using namespace gui;
-
-  manager = std::auto_ptr<gui::GUIManager>(new GUIManager());
-  tab = new TabComponent(Rectf(200, 50, 600, 250), manager->get_root());
-  
-  manager->get_root()->add_child(tab);
+  manager = std::auto_ptr<gui::GUIManager>(new gui::GUIManager());
+  manager->get_root()->add_child(tab = new gui::TabComponent(Rectf(200, 50, 600, 250), manager->get_root()));
 }
 
 ParticleViewer::~ParticleViewer()
@@ -182,9 +179,8 @@
 
       if (controller.button_was_pressed(OK_BUTTON))
         {
-          // FIXME: Disable GUI, since its crashy
-          // show_gui = true;
-          // manager->get_root()->get_focus()->set_active(true);
+          show_gui = true;
+          manager->get_root()->get_focus()->set_active(true);
         }
       else if (controller.button_was_pressed(CANCEL_BUTTON) ||
                controller.button_was_pressed(ESCAPE_BUTTON))

Modified: trunk/windstille/src/sprite3d/sprite3d.cpp
===================================================================
--- trunk/windstille/src/sprite3d/sprite3d.cpp	2009-02-13 10:07:12 UTC (rev 2491)
+++ trunk/windstille/src/sprite3d/sprite3d.cpp	2009-02-13 10:07:35 UTC (rev 2492)
@@ -361,7 +361,7 @@
       state.bind_texture(mesh.texture);
 
       // blend between frame1 + frame2
-	  float* verts = new float[mesh.vertex_count * 3];
+      float* verts = new float[mesh.vertex_count * 3];
       if(frame1.rot == frame2.rot) {
         for(uint16_t v = 0; v < mesh.vertex_count*3; ++v) {
           float v1 = vertices1.vertices[v];
@@ -396,7 +396,7 @@
       glDrawElements(GL_TRIANGLES, mesh.triangle_count * 3, GL_UNSIGNED_SHORT,
                      &*mesh.vertex_indices.begin());
 
-	  delete[] verts;
+      delete[] verts;
     }
 
   assert_gl("rendering 3d sprite");      



From grumbel at mail.berlios.de  Fri Feb 13 15:16:09 2009
From: grumbel at mail.berlios.de (grumbel at BerliOS)
Date: Fri, 13 Feb 2009 15:16:09 +0100
Subject: [Windstille-commit] r2493 - trunk/windstille/external
Message-ID: <200902131416.n1DEG9gV006487@sheep.berlios.de>

Author: grumbel
Date: 2009-02-13 15:16:09 +0100 (Fri, 13 Feb 2009)
New Revision: 2493

Modified:
   trunk/windstille/external/SConscript
Log:
scquirrel gets its own set of CXXFLAGS

Modified: trunk/windstille/external/SConscript
===================================================================
--- trunk/windstille/external/SConscript	2009-02-13 10:07:35 UTC (rev 2492)
+++ trunk/windstille/external/SConscript	2009-02-13 14:16:09 UTC (rev 2493)
@@ -10,7 +10,7 @@
 if features['64bit']:
     squirrel_env.Append(CPPDEFINES = '_SQ64')
 
-squirrel_env.Append(CXXFLAGS = conf_env['CXXFLAGS'])
+# squirrel_env.Append(CXXFLAGS = conf_env['CXXFLAGS'])
 
 squirrel_env.Library('squirrel',
                      glob.glob('SQUIRREL2/squirrel/*.cpp') +



From grumbel at mail.berlios.de  Fri Feb 13 15:16:30 2009
From: grumbel at mail.berlios.de (grumbel at BerliOS)
Date: Fri, 13 Feb 2009 15:16:30 +0100
Subject: [Windstille-commit] r2494 - trunk/windstille
Message-ID: <200902131416.n1DEGUNh006550@sheep.berlios.de>

Author: grumbel
Date: 2009-02-13 15:16:30 +0100 (Fri, 13 Feb 2009)
New Revision: 2494

Modified:
   trunk/windstille/TODO
Log:
Added some gprof results

Modified: trunk/windstille/TODO
===================================================================
--- trunk/windstille/TODO	2009-02-13 14:16:09 UTC (rev 2493)
+++ trunk/windstille/TODO	2009-02-13 14:16:30 UTC (rev 2494)
@@ -53,6 +53,17 @@
 * make Console not derive from ostream
 
 * GridComponent and ParticleViewer leak
+
+* Screens might fit better into app/
+
+* gprof results:
+
+ 16.90      0.60     0.60    47535     0.00     0.00  TileMap::draw(SceneContext&)
+ 15.21      1.14     0.54 37910690     0.00     0.00  VertexArrayDrawingRequest::texcoord(float, float)
+ 14.37      1.65     0.51 37974070     0.00     0.00  VertexArrayDrawingRequest::vertex(float, float, float)
+ 11.55      2.06     0.41    79225     0.00     0.00  Sprite3D::draw(Vector2f const&, Matrix const&) const
+
+
 
 Windstille Bugs
 ===============



From grumbel at mail.berlios.de  Fri Feb 13 23:10:09 2009
From: grumbel at mail.berlios.de (grumbel at BerliOS)
Date: Fri, 13 Feb 2009 23:10:09 +0100
Subject: [Windstille-commit] r2495 - trunk/media/images/locations
Message-ID: <200902132210.n1DMA9BS009137@sheep.berlios.de>

Author: grumbel
Date: 2009-02-13 23:07:47 +0100 (Fri, 13 Feb 2009)
New Revision: 2495

Added:
   trunk/media/images/locations/elevator2.xcf
   trunk/media/images/locations/forest.xcf
   trunk/media/images/locations/tunnel.xcf
Log:
Some more sketches

Added: trunk/media/images/locations/elevator2.xcf
===================================================================
(Binary files differ)


Property changes on: trunk/media/images/locations/elevator2.xcf
___________________________________________________________________
Name: svn:mime-type
   + application/x-xcf

Added: trunk/media/images/locations/forest.xcf
===================================================================
(Binary files differ)


Property changes on: trunk/media/images/locations/forest.xcf
___________________________________________________________________
Name: svn:mime-type
   + application/x-xcf

Added: trunk/media/images/locations/tunnel.xcf
===================================================================
(Binary files differ)


Property changes on: trunk/media/images/locations/tunnel.xcf
___________________________________________________________________
Name: svn:mime-type
   + application/x-xcf



From grumbel at mail.berlios.de  Sat Feb 14 10:07:59 2009
From: grumbel at mail.berlios.de (grumbel at BerliOS)
Date: Sat, 14 Feb 2009 10:07:59 +0100
Subject: [Windstille-commit] r2496 - trunk/windstille/src/objects
Message-ID: <200902140907.n1E97xir003873@sheep.berlios.de>

Author: grumbel
Date: 2009-02-14 10:07:58 +0100 (Sat, 14 Feb 2009)
New Revision: 2496

Modified:
   trunk/windstille/src/objects/swarm.cpp
Log:
Use math::normalize_angle() instead of custom function

Modified: trunk/windstille/src/objects/swarm.cpp
===================================================================
--- trunk/windstille/src/objects/swarm.cpp	2009-02-13 22:07:47 UTC (rev 2495)
+++ trunk/windstille/src/objects/swarm.cpp	2009-02-14 09:07:58 UTC (rev 2496)
@@ -17,13 +17,14 @@
 */
 
 #include "app/globals.hpp"
-#include "player.hpp"
+#include "display/vertex_array_drawing_request.hpp"
 #include "engine/sector.hpp"
-#include "hedgehog.hpp"
+#include "math/math.hpp"
+#include "math/random.hpp"
+#include "player.hpp"
 #include "screen/game_session.hpp"
 #include "screen/view.hpp"
-#include "display/vertex_array_drawing_request.hpp"
-#include "math/random.hpp"
+
 #include "swarm.hpp"
 
 Swarm::Swarm(FileReader& props)
@@ -85,14 +86,6 @@
   sc.highlight().draw(array);
 }
 
-static float normalize(float angle)
-{
-  // brings angle into [0,2*M_PI[ range
-  float ret = fmod(static_cast<float>(fmod(angle, static_cast<float>(2*M_PI)) + 2*M_PI), static_cast<float>(2*M_PI));
-  assert(ret >= 0 && ret < 2*M_PI);
-  return ret;
-}
-
 void
 Swarm::update(float delta)
 {
@@ -109,7 +102,7 @@
       float dy = target.y - i->pos.y;
 
       float target_angle   = atan2f(dy, dx);
-      float relative_angle = normalize(target_angle - i->angle);
+      float relative_angle = math::normalize_angle(target_angle - i->angle);
       
       if (sqrt(dx*dx + (dy*dy)*2.0f) > 50.0f) // swarm range
         {



From grumbel at mail.berlios.de  Sat Feb 14 10:09:00 2009
From: grumbel at mail.berlios.de (grumbel at BerliOS)
Date: Sat, 14 Feb 2009 10:09:00 +0100
Subject: [Windstille-commit] r2497 - trunk/windstille/src/app
Message-ID: <200902140909.n1E990pF003964@sheep.berlios.de>

Author: grumbel
Date: 2009-02-14 10:08:59 +0100 (Sat, 14 Feb 2009)
New Revision: 2497

Modified:
   trunk/windstille/src/app/windstille_main.cpp
Log:
Properly return return value of main, moved some code into init/deinit_modules

Modified: trunk/windstille/src/app/windstille_main.cpp
===================================================================
--- trunk/windstille/src/app/windstille_main.cpp	2009-02-14 09:07:58 UTC (rev 2496)
+++ trunk/windstille/src/app/windstille_main.cpp	2009-02-14 09:08:59 UTC (rev 2497)
@@ -72,51 +72,7 @@
     config.parse_args(argc, argv);
 
     init_modules();
-
-    { // Fill controller_description with data
-      controller_description.add_button("primary-button",   PRIMARY_BUTTON);
-      controller_description.add_button("secondary-button", SECONDARY_BUTTON);
-      controller_description.add_button("tertiary-button",  TERTIARY_BUTTON);
-
-      controller_description.add_button("menu-up-button",   MENU_UP_BUTTON);
-      controller_description.add_button("menu-down-button", MENU_DOWN_BUTTON);
-
-      controller_description.add_button("menu-left-button",  MENU_LEFT_BUTTON);
-      controller_description.add_button("menu-right-button", MENU_RIGHT_BUTTON);
-  
-      controller_description.add_button("view-center-button", VIEW_CENTER_BUTTON);
-
-      controller_description.add_button("pda-button",       PDA_BUTTON);
-      controller_description.add_button("inventory-button", INVENTORY_BUTTON);
-
-      controller_description.add_button("aim-button",       AIM_BUTTON);
-      controller_description.add_button("pause-button",     PAUSE_BUTTON);
-
-      controller_description.add_axis("x-axis", X_AXIS);
-      controller_description.add_axis("y-axis", Y_AXIS);
-
-      controller_description.add_axis("x2-axis", X2_AXIS);
-      controller_description.add_axis("y2-axis", Y2_AXIS);
-
-      controller_description.add_ball("mouse-motion-x", MOUSE_MOTION_X);
-      controller_description.add_ball("mouse-motion-y", MOUSE_MOTION_Y);
-    }
     
-    {
-      InputManager::init();
-      
-      if (config.get<std::string>("primary-controller-file").is_set())
-        InputManager::load(config.get<std::string>("primary-controller-file").get());
-      else
-        InputManager::load("controller/keyboard.scm");
-
-      if (config.get<std::string>("secondary-controller-file").is_set())
-        InputManager::load(config.get<std::string>("secondary-controller-file").get());
-    }
-
-    if (debug) std::cout << "Initialising TileFactory" << std::endl;
-    TileFactory::init();
-    
     if (debug) std::cout << "Starting file: '" << config.get_string("levelfile") << "'" 
                          << std::endl;
     
@@ -171,9 +127,6 @@
         
     screen_manager.run();
     
-    TileFactory::deinit();
-    InputManager::deinit();
-
     deinit_modules();
 
   } catch (std::exception& err) {
@@ -214,11 +167,58 @@
   sprite3d_manager = new sprite3d::Manager();
 
   script_manager->run_script_file("scripts/windstille.nut");
+
+  { // Fill controller_description with data
+    controller_description.add_button("primary-button",   PRIMARY_BUTTON);
+    controller_description.add_button("secondary-button", SECONDARY_BUTTON);
+    controller_description.add_button("tertiary-button",  TERTIARY_BUTTON);
+
+    controller_description.add_button("menu-up-button",   MENU_UP_BUTTON);
+    controller_description.add_button("menu-down-button", MENU_DOWN_BUTTON);
+
+    controller_description.add_button("menu-left-button",  MENU_LEFT_BUTTON);
+    controller_description.add_button("menu-right-button", MENU_RIGHT_BUTTON);
+  
+    controller_description.add_button("view-center-button", VIEW_CENTER_BUTTON);
+
+    controller_description.add_button("pda-button",       PDA_BUTTON);
+    controller_description.add_button("inventory-button", INVENTORY_BUTTON);
+
+    controller_description.add_button("aim-button",       AIM_BUTTON);
+    controller_description.add_button("pause-button",     PAUSE_BUTTON);
+
+    controller_description.add_axis("x-axis", X_AXIS);
+    controller_description.add_axis("y-axis", Y_AXIS);
+
+    controller_description.add_axis("x2-axis", X2_AXIS);
+    controller_description.add_axis("y2-axis", Y2_AXIS);
+
+    controller_description.add_ball("mouse-motion-x", MOUSE_MOTION_X);
+    controller_description.add_ball("mouse-motion-y", MOUSE_MOTION_Y);
+  }
+    
+  {
+    InputManager::init();
+      
+    if (config.get<std::string>("primary-controller-file").is_set())
+      InputManager::load(config.get<std::string>("primary-controller-file").get());
+    else
+      InputManager::load("controller/keyboard.scm");
+
+    if (config.get<std::string>("secondary-controller-file").is_set())
+      InputManager::load(config.get<std::string>("secondary-controller-file").get());
+  }
+
+  if (debug) std::cout << "Initialising TileFactory" << std::endl;
+  TileFactory::init();
 }
 
 void
 WindstilleMain::deinit_modules()
 {
+  TileFactory::deinit();
+  InputManager::deinit();
+
   delete sprite3d_manager;
   sprite3d_manager = 0;
 
@@ -372,11 +372,7 @@
 
 int main(int argc, char** argv)
 {
-  WindstilleMain main_app;
-
-  main_app.main(argc, argv);
-
-  return 0;
+  return WindstilleMain().main(argc, argv);
 }
 
 /* EOF */



From grumbel at mail.berlios.de  Sat Feb 14 17:10:06 2009
From: grumbel at mail.berlios.de (grumbel at BerliOS)
Date: Sat, 14 Feb 2009 17:10:06 +0100
Subject: [Windstille-commit] r2498 - in trunk/windstille/src: . editor
Message-ID: <200902141610.n1EGA65Z020169@sheep.berlios.de>

Author: grumbel
Date: 2009-02-14 17:10:05 +0100 (Sat, 14 Feb 2009)
New Revision: 2498

Added:
   trunk/windstille/src/editor/
   trunk/windstille/src/editor/SConstruct
   trunk/windstille/src/editor/editor.cpp
   trunk/windstille/src/editor/windstille.glade
Log:
Gtk based editor (just empty 'hello world' app)


Property changes on: trunk/windstille/src/editor
___________________________________________________________________
Name: svn:ignore
   + editor
.sconsign.dblite


Added: trunk/windstille/src/editor/SConstruct
===================================================================
--- trunk/windstille/src/editor/SConstruct	2009-02-14 09:08:59 UTC (rev 2497)
+++ trunk/windstille/src/editor/SConstruct	2009-02-14 16:10:05 UTC (rev 2498)
@@ -0,0 +1,14 @@
+# -*- python -*-
+
+env = Environment(CXXFLAGS=['-Wall', '-Werror', '-O2', '-g'],
+                  LIBS = ['GL', 'GLEW'])
+
+env.ParseConfig('pkg-config libpng --libs --cflags')
+env.ParseConfig('sdl-config --cflags --libs')
+env.ParseConfig('Magick++-config --libs --cppflags')
+env.ParseConfig('pkg-config --cflags --libs libcurl')
+env.ParseConfig('pkg-config --cflags --libs gtkmm-2.4 libglademm-2.4 gtkglextmm-1.2')
+
+env.Program('editor', ['editor.cpp'])
+
+# EOF #

Added: trunk/windstille/src/editor/editor.cpp
===================================================================
--- trunk/windstille/src/editor/editor.cpp	2009-02-14 09:08:59 UTC (rev 2497)
+++ trunk/windstille/src/editor/editor.cpp	2009-02-14 16:10:05 UTC (rev 2498)
@@ -0,0 +1,49 @@
+/*
+**  Galapix - an image viewer for large image collections
+**  Copyright (C) 2008 Ingo Ruhnke <grumbel at gmx.de>
+**
+**  This program is free software: you can redistribute it and/or modify
+**  it under the terms of the GNU General Public License as published by
+**  the Free Software Foundation, either version 3 of the License, or
+**  (at your option) any later version.
+**
+**  This program is distributed in the hope that it will be useful,
+**  but WITHOUT ANY WARRANTY; without even the implied warranty of
+**  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+**  GNU General Public License for more details.
+**
+**  You should have received a copy of the GNU General Public License
+**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
+*/
+
+#include <gtkglmm.h>
+#include <gtkmm.h>
+#include <gtkmm/gl/widget.h>
+#include <libglademm/xml.h>
+#include <iostream>
+
+int main(int argc, char** argv)
+{
+  try 
+    {
+      Gtk::Main kit(&argc, &argv);
+      Gtk::GL::init(&argc, &argv);
+
+      Glib::RefPtr<Gnome::Glade::Xml> xml = Gnome::Glade::Xml::create("windstille.glade");
+
+      Gtk::Window& window = dynamic_cast<Gtk::Window&>(*xml->get_widget("window1"));
+
+      // Gtk::ScrolledWindow& hbox = dynamic_cast<Gtk::ScrolledWindow&>(*xml->get_widget("scrolledwindow1"));
+      window.show();
+
+      Gtk::Main::run(window);
+    }
+  catch(...)
+    {
+      std::cout << "Unknown exception catched" << std::endl;
+    }
+
+  return 0;
+}
+
+/* EOF */


Property changes on: trunk/windstille/src/editor/editor.cpp
___________________________________________________________________
Name: svn:keywords
   + Id
Name: svn:eol-style
   + native

Added: trunk/windstille/src/editor/windstille.glade
===================================================================
--- trunk/windstille/src/editor/windstille.glade	2009-02-14 09:08:59 UTC (rev 2497)
+++ trunk/windstille/src/editor/windstille.glade	2009-02-14 16:10:05 UTC (rev 2498)
@@ -0,0 +1,235 @@
+<?xml version="1.0" encoding="UTF-8" standalone="no"?>
+<!DOCTYPE glade-interface SYSTEM "glade-2.0.dtd">
+<!--Generated with glade3 3.4.5 on Sat Feb 14 17:05:50 2009 -->
+<glade-interface>
+  <widget class="GtkWindow" id="window1">
+    <property name="default_width">1024</property>
+    <property name="default_height">768</property>
+    <child>
+      <widget class="GtkVBox" id="vbox1">
+        <property name="visible">True</property>
+        <child>
+          <widget class="GtkMenuBar" id="menubar1">
+            <property name="visible">True</property>
+            <child>
+              <widget class="GtkMenuItem" id="menuitem1">
+                <property name="visible">True</property>
+                <property name="label" translatable="yes">_File</property>
+                <property name="use_underline">True</property>
+                <child>
+                  <widget class="GtkMenu" id="menu1">
+                    <property name="visible">True</property>
+                    <child>
+                      <widget class="GtkImageMenuItem" id="imagemenuitem1">
+                        <property name="visible">True</property>
+                        <property name="label" translatable="yes">gtk-new</property>
+                        <property name="use_underline">True</property>
+                        <property name="use_stock">True</property>
+                      </widget>
+                    </child>
+                    <child>
+                      <widget class="GtkImageMenuItem" id="imagemenuitem2">
+                        <property name="visible">True</property>
+                        <property name="label" translatable="yes">gtk-open</property>
+                        <property name="use_underline">True</property>
+                        <property name="use_stock">True</property>
+                      </widget>
+                    </child>
+                    <child>
+                      <widget class="GtkImageMenuItem" id="imagemenuitem3">
+                        <property name="visible">True</property>
+                        <property name="label" translatable="yes">gtk-save</property>
+                        <property name="use_underline">True</property>
+                        <property name="use_stock">True</property>
+                      </widget>
+                    </child>
+                    <child>
+                      <widget class="GtkImageMenuItem" id="imagemenuitem4">
+                        <property name="visible">True</property>
+                        <property name="label" translatable="yes">gtk-save-as</property>
+                        <property name="use_underline">True</property>
+                        <property name="use_stock">True</property>
+                      </widget>
+                    </child>
+                    <child>
+                      <widget class="GtkSeparatorMenuItem" id="separatormenuitem1">
+                        <property name="visible">True</property>
+                      </widget>
+                    </child>
+                    <child>
+                      <widget class="GtkImageMenuItem" id="imagemenuitem5">
+                        <property name="visible">True</property>
+                        <property name="label" translatable="yes">gtk-quit</property>
+                        <property name="use_underline">True</property>
+                        <property name="use_stock">True</property>
+                      </widget>
+                    </child>
+                  </widget>
+                </child>
+              </widget>
+            </child>
+            <child>
+              <widget class="GtkMenuItem" id="menuitem2">
+                <property name="visible">True</property>
+                <property name="label" translatable="yes">_Edit</property>
+                <property name="use_underline">True</property>
+                <child>
+                  <widget class="GtkMenu" id="menu2">
+                    <property name="visible">True</property>
+                    <child>
+                      <widget class="GtkImageMenuItem" id="imagemenuitem6">
+                        <property name="visible">True</property>
+                        <property name="label" translatable="yes">gtk-cut</property>
+                        <property name="use_underline">True</property>
+                        <property name="use_stock">True</property>
+                      </widget>
+                    </child>
+                    <child>
+                      <widget class="GtkImageMenuItem" id="imagemenuitem7">
+                        <property name="visible">True</property>
+                        <property name="label" translatable="yes">gtk-copy</property>
+                        <property name="use_underline">True</property>
+                        <property name="use_stock">True</property>
+                      </widget>
+                    </child>
+                    <child>
+                      <widget class="GtkImageMenuItem" id="imagemenuitem8">
+                        <property name="visible">True</property>
+                        <property name="label" translatable="yes">gtk-paste</property>
+                        <property name="use_underline">True</property>
+                        <property name="use_stock">True</property>
+                      </widget>
+                    </child>
+                    <child>
+                      <widget class="GtkImageMenuItem" id="imagemenuitem9">
+                        <property name="visible">True</property>
+                        <property name="label" translatable="yes">gtk-delete</property>
+                        <property name="use_underline">True</property>
+                        <property name="use_stock">True</property>
+                      </widget>
+                    </child>
+                  </widget>
+                </child>
+              </widget>
+            </child>
+            <child>
+              <widget class="GtkMenuItem" id="menuitem3">
+                <property name="visible">True</property>
+                <property name="label" translatable="yes">_View</property>
+                <property name="use_underline">True</property>
+              </widget>
+            </child>
+            <child>
+              <widget class="GtkMenuItem" id="menuitem4">
+                <property name="visible">True</property>
+                <property name="label" translatable="yes">_Help</property>
+                <property name="use_underline">True</property>
+                <child>
+                  <widget class="GtkMenu" id="menu3">
+                    <property name="visible">True</property>
+                    <child>
+                      <widget class="GtkImageMenuItem" id="imagemenuitem10">
+                        <property name="visible">True</property>
+                        <property name="label" translatable="yes">gtk-about</property>
+                        <property name="use_underline">True</property>
+                        <property name="use_stock">True</property>
+                      </widget>
+                    </child>
+                  </widget>
+                </child>
+              </widget>
+            </child>
+          </widget>
+          <packing>
+            <property name="expand">False</property>
+          </packing>
+        </child>
+        <child>
+          <widget class="GtkToolbar" id="toolbar1">
+            <property name="visible">True</property>
+            <child>
+              <widget class="GtkToolButton" id="toolbutton1">
+                <property name="visible">True</property>
+                <property name="stock_id">gtk-about</property>
+              </widget>
+              <packing>
+                <property name="homogeneous">True</property>
+              </packing>
+            </child>
+          </widget>
+          <packing>
+            <property name="expand">False</property>
+            <property name="position">1</property>
+          </packing>
+        </child>
+        <child>
+          <widget class="GtkHBox" id="hbox1">
+            <property name="visible">True</property>
+            <child>
+              <widget class="GtkToolbar" id="toolbar2">
+                <property name="visible">True</property>
+                <property name="orientation">GTK_ORIENTATION_VERTICAL</property>
+                <child>
+                  <widget class="GtkToolButton" id="toolbutton2">
+                    <property name="visible">True</property>
+                    <property name="stock_id">gtk-about</property>
+                  </widget>
+                  <packing>
+                    <property name="homogeneous">True</property>
+                  </packing>
+                </child>
+              </widget>
+              <packing>
+                <property name="expand">False</property>
+              </packing>
+            </child>
+            <child>
+              <widget class="GtkHPaned" id="hpaned1">
+                <property name="visible">True</property>
+                <property name="can_focus">True</property>
+                <child>
+                  <widget class="GtkTextView" id="textview1">
+                    <property name="visible">True</property>
+                    <property name="can_focus">True</property>
+                    <property name="text" translatable="yes">Place Windstille here</property>
+                  </widget>
+                  <packing>
+                    <property name="resize">False</property>
+                    <property name="shrink">True</property>
+                  </packing>
+                </child>
+                <child>
+                  <widget class="GtkTextView" id="textview2">
+                    <property name="visible">True</property>
+                    <property name="can_focus">True</property>
+                    <property name="text" translatable="yes">Add Object Selector here</property>
+                  </widget>
+                  <packing>
+                    <property name="resize">False</property>
+                    <property name="shrink">True</property>
+                  </packing>
+                </child>
+              </widget>
+              <packing>
+                <property name="position">1</property>
+              </packing>
+            </child>
+          </widget>
+          <packing>
+            <property name="position">2</property>
+          </packing>
+        </child>
+        <child>
+          <widget class="GtkLabel" id="label1">
+            <property name="visible">True</property>
+            <property name="label" translatable="yes">Status Bar</property>
+          </widget>
+          <packing>
+            <property name="expand">False</property>
+            <property name="position">3</property>
+          </packing>
+        </child>
+      </widget>
+    </child>
+  </widget>
+</glade-interface>



From grumbel at mail.berlios.de  Sun Feb 15 13:42:30 2009
From: grumbel at mail.berlios.de (grumbel at BerliOS)
Date: Sun, 15 Feb 2009 13:42:30 +0100
Subject: [Windstille-commit] r2499 - trunk/windstille/src/editor
Message-ID: <200902151242.n1FCgUOE012856@sheep.berlios.de>

Author: grumbel
Date: 2009-02-15 13:42:30 +0100 (Sun, 15 Feb 2009)
New Revision: 2499

Modified:
   trunk/windstille/src/editor/SConstruct
   trunk/windstille/src/editor/windstille.glade
Log:
Minor stuff

Modified: trunk/windstille/src/editor/SConstruct
===================================================================
--- trunk/windstille/src/editor/SConstruct	2009-02-14 16:10:05 UTC (rev 2498)
+++ trunk/windstille/src/editor/SConstruct	2009-02-15 12:42:30 UTC (rev 2499)
@@ -9,6 +9,7 @@
 env.ParseConfig('pkg-config --cflags --libs libcurl')
 env.ParseConfig('pkg-config --cflags --libs gtkmm-2.4 libglademm-2.4 gtkglextmm-1.2')
 
-env.Program('editor', ['editor.cpp'])
+env.Program('editor', ['editor.cpp',
+                       'windstille_widget.cpp'])
 
 # EOF #

Modified: trunk/windstille/src/editor/windstille.glade
===================================================================
--- trunk/windstille/src/editor/windstille.glade	2009-02-14 16:10:05 UTC (rev 2498)
+++ trunk/windstille/src/editor/windstille.glade	2009-02-15 12:42:30 UTC (rev 2499)
@@ -1,6 +1,6 @@
 <?xml version="1.0" encoding="UTF-8" standalone="no"?>
 <!DOCTYPE glade-interface SYSTEM "glade-2.0.dtd">
-<!--Generated with glade3 3.4.5 on Sat Feb 14 17:05:50 2009 -->
+<!--Generated with glade3 3.4.5 on Sat Feb 14 18:05:56 2009 -->
 <glade-interface>
   <widget class="GtkWindow" id="window1">
     <property name="default_width">1024</property>
@@ -188,15 +188,7 @@
                 <property name="visible">True</property>
                 <property name="can_focus">True</property>
                 <child>
-                  <widget class="GtkTextView" id="textview1">
-                    <property name="visible">True</property>
-                    <property name="can_focus">True</property>
-                    <property name="text" translatable="yes">Place Windstille here</property>
-                  </widget>
-                  <packing>
-                    <property name="resize">False</property>
-                    <property name="shrink">True</property>
-                  </packing>
+                  <placeholder/>
                 </child>
                 <child>
                   <widget class="GtkTextView" id="textview2">
@@ -220,9 +212,9 @@
           </packing>
         </child>
         <child>
-          <widget class="GtkLabel" id="label1">
+          <widget class="GtkStatusbar" id="statusbar1">
             <property name="visible">True</property>
-            <property name="label" translatable="yes">Status Bar</property>
+            <property name="spacing">2</property>
           </widget>
           <packing>
             <property name="expand">False</property>



From grumbel at mail.berlios.de  Sun Feb 15 13:48:46 2009
From: grumbel at mail.berlios.de (grumbel at BerliOS)
Date: Sun, 15 Feb 2009 13:48:46 +0100
Subject: [Windstille-commit] r2500 - in trunk/windstille/src/editor: .
	catalog
Message-ID: <200902151248.n1FCmkn2013580@sheep.berlios.de>

Author: grumbel
Date: 2009-02-15 13:48:45 +0100 (Sun, 15 Feb 2009)
New Revision: 2500

Added:
   trunk/windstille/src/editor/catalog/
   trunk/windstille/src/editor/catalog/windstille.xml
   trunk/windstille/src/editor/glade.sh
   trunk/windstille/src/editor/module/
   trunk/windstille/src/editor/windstille-editor.sh
   trunk/windstille/src/editor/windstille_widget.cpp
   trunk/windstille/src/editor/windstille_widget.hpp
Log:
Some trying around with custom components

Added: trunk/windstille/src/editor/catalog/windstille.xml
===================================================================
--- trunk/windstille/src/editor/catalog/windstille.xml	2009-02-15 12:42:30 UTC (rev 2499)
+++ trunk/windstille/src/editor/catalog/windstille.xml	2009-02-15 12:48:45 UTC (rev 2500)
@@ -0,0 +1,15 @@
+<?xml version="1.0" encoding="UTF-8"?>
+
+<glade-catalog name="windstille" library="windstille" depends="gtk+">
+
+  <!-- <init-function>my_catalog_init</init-function> -->
+
+  <glade-widget-classes>
+    <glade-widget-class name="WindstilleSector" generic-name="windstille-sector" title="WindstilleSector"/>
+  </glade-widget-classes>
+
+  <glade-widget-group name="foo" title="Foo">
+    <glade-widget-class-ref name="WindstilleSector" />
+  </glade-widget-group>
+
+</glade-catalog>

Added: trunk/windstille/src/editor/glade.sh
===================================================================
--- trunk/windstille/src/editor/glade.sh	2009-02-15 12:42:30 UTC (rev 2499)
+++ trunk/windstille/src/editor/glade.sh	2009-02-15 12:48:45 UTC (rev 2500)
@@ -0,0 +1,11 @@
+#!/bin/sh
+
+GLADE_CATALOG_PATH=catalog/
+export GLADE_CATALOG_PATH
+
+GLADE_MODULE_PATH=module/
+export GLADE_MODULE_PATH
+
+exec glade-3 windstille.glade
+
+# EOF #


Property changes on: trunk/windstille/src/editor/glade.sh
___________________________________________________________________
Name: svn:executable
   + *

Added: trunk/windstille/src/editor/windstille-editor.sh
===================================================================
--- trunk/windstille/src/editor/windstille-editor.sh	2009-02-15 12:42:30 UTC (rev 2499)
+++ trunk/windstille/src/editor/windstille-editor.sh	2009-02-15 12:48:45 UTC (rev 2500)
@@ -0,0 +1,11 @@
+#!/bin/sh
+
+GLADE_CATALOG_PATH=catalog/
+export GLADE_CATALOG_PATH
+
+GLADE_MODULE_PATH=module/
+export GLADE_MODULE_PATH
+
+exec ./editor
+
+# EOF #


Property changes on: trunk/windstille/src/editor/windstille-editor.sh
___________________________________________________________________
Name: svn:executable
   + *

Added: trunk/windstille/src/editor/windstille_widget.cpp
===================================================================
--- trunk/windstille/src/editor/windstille_widget.cpp	2009-02-15 12:42:30 UTC (rev 2499)
+++ trunk/windstille/src/editor/windstille_widget.cpp	2009-02-15 12:48:45 UTC (rev 2500)
@@ -0,0 +1,193 @@
+/*
+**  Windstille - A Sci-Fi Action-Adventure Game
+**  Copyright (C) 2000,2005 Ingo Ruhnke <grumbel at gmx.de>
+**
+**  This program is free software: you can redistribute it and/or modify
+**  it under the terms of the GNU General Public License as published by
+**  the Free Software Foundation, either version 3 of the License, or
+**  (at your option) any later version.
+**  
+**  This program is distributed in the hope that it will be useful,
+**  but WITHOUT ANY WARRANTY; without even the implied warranty of
+**  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+**  GNU General Public License for more details.
+**  
+**  You should have received a copy of the GNU General Public License
+**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
+*/
+
+#include <GL/glew.h>
+#include <GL/gl.h>
+#include <GL/glu.h>
+
+#include <gtkmm.h>
+
+#include "windstille_widget.hpp"
+
+WindstilleWidget::WindstilleWidget()
+{
+  Glib::RefPtr<Gdk::GL::Config> glconfig;
+
+  glconfig = Gdk::GL::Config::create(Gdk::GL::MODE_RGB    |
+                                     Gdk::GL::MODE_DEPTH  |
+                                     Gdk::GL::MODE_DOUBLE);
+  if (!glconfig)
+    {
+      std::cerr << "*** Cannot find the double-buffered visual.\n"
+                << "*** Trying single-buffered visual.\n";
+
+      // Try single-buffered visual
+      glconfig = Gdk::GL::Config::create(Gdk::GL::MODE_RGB   |
+                                         Gdk::GL::MODE_DEPTH);
+      if (!glconfig)
+        {
+          throw std::runtime_error("*** Cannot find any OpenGL-capable visual.");
+        }
+    }
+ 
+  set_gl_capability(glconfig);
+
+  add_events(Gdk::POINTER_MOTION_MASK | Gdk::BUTTON_PRESS_MASK | Gdk::BUTTON_RELEASE_MASK |
+             Gdk::KEY_PRESS_MASK      | Gdk::KEY_RELEASE_MASK | 
+             Gdk::ENTER_NOTIFY_MASK   | Gdk::LEAVE_NOTIFY_MASK);
+
+  // Gdk::POINTER_MOTION_HINT_MASK |
+  // Gdk::BUTTON_MOTION_MASK | Gdk::BUTTON1_MOTION_MASK | Gdk::BUTTON2_MOTION_MASK |
+  // Gdk::BUTTON3_MOTION_MASK | 
+
+  set_flags(get_flags()|Gtk::CAN_FOCUS);
+
+  signal_button_release_event().connect(sigc::mem_fun(this, &WindstilleWidget::mouse_up));
+  signal_button_press_event().connect(sigc::mem_fun(this, &WindstilleWidget::mouse_down));
+  signal_motion_notify_event().connect(sigc::mem_fun(this, &WindstilleWidget::mouse_move));
+  signal_scroll_event().connect(sigc::mem_fun(this, &WindstilleWidget::scroll));
+
+  signal_key_press_event().connect(sigc::mem_fun(this, &WindstilleWidget::key_press));
+  signal_key_release_event().connect(sigc::mem_fun(this, &WindstilleWidget::key_release));
+
+
+  Glib::signal_timeout().connect(sigc::mem_fun(this, &WindstilleWidget::on_timeout),
+                                 33);
+}
+
+WindstilleWidget::~WindstilleWidget()
+{
+}
+
+bool
+WindstilleWidget::on_timeout()
+{
+  return true;
+}
+
+void
+WindstilleWidget::on_realize()
+{
+  Gtk::DrawingArea::on_realize();
+
+  Glib::RefPtr<Gdk::GL::Window> glwindow = get_gl_window();
+
+  if (!glwindow->gl_begin(get_gl_context()))
+    return;
+
+  //Framebuffer::init();
+  //Framebuffer::reshape(Size(get_width(), get_height()));
+
+  glwindow->gl_end();
+}
+
+bool
+WindstilleWidget::on_configure_event(GdkEventConfigure* event)
+{
+  Glib::RefPtr<Gdk::GL::Window> glwindow = get_gl_window();
+
+  // *** OpenGL BEGIN ***
+  if (!glwindow->gl_begin(get_gl_context()))
+    return false;
+
+  //Framebuffer::reshape(Size(get_width(), get_height()));
+
+  glwindow->gl_end();
+  // *** OpenGL END ***
+
+  return true;
+}
+
+bool
+WindstilleWidget::on_expose_event(GdkEventExpose* event)
+{
+  Glib::RefPtr<Gdk::GL::Window> glwindow = get_gl_window();
+
+  if (!glwindow->gl_begin(get_gl_context()))
+    return false;
+
+  //viewer->draw();
+
+  // Swap buffers.
+  if (glwindow->is_double_buffered())
+    glwindow->swap_buffers();
+  else
+    glFlush();
+
+  glwindow->gl_end();
+
+  return true;
+}
+
+bool
+WindstilleWidget::mouse_move(GdkEventMotion* event)
+{
+  //std::cout << "Motion: " << event->x << ", " << event->y << std::endl;
+  
+  // Trigger redraw
+  // queue_draw();
+
+  return true;
+}
+
+bool
+WindstilleWidget::mouse_down(GdkEventButton* event)
+{
+  grab_focus();
+  //std::cout << "Button Press: " << event->x << ", " << event->y << " - " << event->button << std::endl;
+  // viewer->on_mouse_button_down(Vector2i(event->x, event->y), event->button);
+  return false;
+}
+
+bool
+WindstilleWidget::scroll(GdkEventScroll* event)
+{
+  if (event->direction == GDK_SCROLL_UP)
+    {
+      //viewer->get_state().zoom(1.1f, Vector2i(event->x, event->y));
+    }
+  else if (event->direction == GDK_SCROLL_DOWN)
+    {
+      //viewer->get_state().zoom(1.0f/1.1f, Vector2i(event->x, event->y));
+    }
+  return false;
+}
+
+bool
+WindstilleWidget::mouse_up(GdkEventButton* event)
+{
+  //std::cout << "Button Release: " << event->x << ", " << event->y << " - " << event->button << std::endl;
+  //viewer->on_mouse_button_up(Vector2i(event->x, event->y), event->button);
+  return false;
+}
+
+bool
+WindstilleWidget::key_press(GdkEventKey* event)
+{
+  std::cout << "KeyPress: " << (int)event->keyval << std::endl;
+  return true;
+}
+
+bool
+WindstilleWidget::key_release(GdkEventKey* event)
+{ // /usr/include/gtk-2.0/gdk/gdkkeysyms.h
+  std::cout << "KeyRelease: " << (int)event->keyval << std::endl;
+  return true;
+}
+
+/* EOF */


Property changes on: trunk/windstille/src/editor/windstille_widget.cpp
___________________________________________________________________
Name: svn:keywords
   + Id
Name: svn:eol-style
   + native

Added: trunk/windstille/src/editor/windstille_widget.hpp
===================================================================
--- trunk/windstille/src/editor/windstille_widget.hpp	2009-02-15 12:42:30 UTC (rev 2499)
+++ trunk/windstille/src/editor/windstille_widget.hpp	2009-02-15 12:48:45 UTC (rev 2500)
@@ -0,0 +1,57 @@
+/*
+**  Windstille - A Sci-Fi Action-Adventure Game
+**  Copyright (C) 2000,2005 Ingo Ruhnke <grumbel at gmx.de>
+**
+**  This program is free software: you can redistribute it and/or modify
+**  it under the terms of the GNU General Public License as published by
+**  the Free Software Foundation, either version 3 of the License, or
+**  (at your option) any later version.
+**  
+**  This program is distributed in the hope that it will be useful,
+**  but WITHOUT ANY WARRANTY; without even the implied warranty of
+**  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+**  GNU General Public License for more details.
+**  
+**  You should have received a copy of the GNU General Public License
+**  along with this program.  If not, see <http://www.gnu.org/licenses/>.
+*/
+
+#ifndef HEADER_WINDSTILLE_WIDGET_HPP
+#define HEADER_WINDSTILLE_WIDGET_HPP
+
+#include <iostream>
+#include <gtkglmm.h>
+#include <gtkmm/gl/widget.h>
+
+class WindstilleWidget 
+  : public Gtk::DrawingArea,
+    public Gtk::GL::Widget<WindstilleWidget>
+{
+private:
+    
+
+public:
+  WindstilleWidget();
+  virtual ~WindstilleWidget();
+
+  virtual void on_realize();
+  virtual bool on_timeout();
+  virtual bool on_configure_event(GdkEventConfigure* event);
+  virtual bool on_expose_event(GdkEventExpose* event);
+
+  virtual bool mouse_move(GdkEventMotion* event);
+  virtual bool mouse_down (GdkEventButton* event);
+  virtual bool mouse_up(GdkEventButton* event);
+  virtual bool scroll(GdkEventScroll* event);
+
+  virtual bool key_press(GdkEventKey* event);
+  virtual bool key_release(GdkEventKey* event);
+
+private:
+  WindstilleWidget (const WindstilleWidget&);
+  WindstilleWidget& operator= (const WindstilleWidget&);
+};
+
+#endif
+
+/* EOF */


Property changes on: trunk/windstille/src/editor/windstille_widget.hpp
___________________________________________________________________
Name: svn:keywords
   + Id
Name: svn:eol-style
   + native



From grumbel at mail.berlios.de  Sun Feb 15 13:54:01 2009
From: grumbel at mail.berlios.de (grumbel at BerliOS)
Date: Sun, 15 Feb 2009 13:54:01 +0100
Subject: [Windstille-commit] r2501 - in trunk/windstille/src: app display
	editor engine hud math objects screen tile util
Message-ID: <200902151254.n1FCs1OB014128@sheep.berlios.de>

Author: grumbel
Date: 2009-02-15 13:53:57 +0100 (Sun, 15 Feb 2009)
New Revision: 2501

Modified:
   trunk/windstille/src/app/config.hpp
   trunk/windstille/src/app/console.hpp
   trunk/windstille/src/app/controller_def.hpp
   trunk/windstille/src/app/globals.hpp
   trunk/windstille/src/app/menu_manager.hpp
   trunk/windstille/src/app/weapon.hpp
   trunk/windstille/src/app/windstille.hpp
   trunk/windstille/src/app/windstille_main.hpp
   trunk/windstille/src/display/color.hpp
   trunk/windstille/src/display/graphic_context_state.hpp
   trunk/windstille/src/display/text_area.hpp
   trunk/windstille/src/editor/windstille_widget.hpp
   trunk/windstille/src/engine/camera.hpp
   trunk/windstille/src/engine/entity.hpp
   trunk/windstille/src/engine/game_object.hpp
   trunk/windstille/src/engine/physics.hpp
   trunk/windstille/src/engine/script_manager.hpp
   trunk/windstille/src/engine/sector.hpp
   trunk/windstille/src/engine/weapon.hpp
   trunk/windstille/src/hud/controller_help_window.hpp
   trunk/windstille/src/hud/conversation.hpp
   trunk/windstille/src/hud/dialog_manager.hpp
   trunk/windstille/src/hud/energy_bar.hpp
   trunk/windstille/src/hud/inventory.hpp
   trunk/windstille/src/hud/pda.hpp
   trunk/windstille/src/math/math.hpp
   trunk/windstille/src/math/random.hpp
   trunk/windstille/src/objects/box.hpp
   trunk/windstille/src/objects/character.hpp
   trunk/windstille/src/objects/elevator.hpp
   trunk/windstille/src/objects/grenade.hpp
   trunk/windstille/src/objects/laser_pointer.hpp
   trunk/windstille/src/objects/liquid.hpp
   trunk/windstille/src/objects/pistol.hpp
   trunk/windstille/src/objects/player.hpp
   trunk/windstille/src/objects/scriptable_object.hpp
   trunk/windstille/src/objects/trigger.hpp
   trunk/windstille/src/screen/armature_test.hpp
   trunk/windstille/src/screen/game_session.hpp
   trunk/windstille/src/screen/geometry_test.hpp
   trunk/windstille/src/screen/navigation_test.hpp
   trunk/windstille/src/screen/particle_viewer.hpp
   trunk/windstille/src/screen/screen.hpp
   trunk/windstille/src/screen/screen_manager.hpp
   trunk/windstille/src/screen/sprite2dview.hpp
   trunk/windstille/src/screen/sprite3dview.hpp
   trunk/windstille/src/screen/title_screen.hpp
   trunk/windstille/src/screen/view.hpp
   trunk/windstille/src/tile/tile.hpp
   trunk/windstille/src/tile/tile_description.hpp
   trunk/windstille/src/tile/tile_factory.hpp
   trunk/windstille/src/tile/tile_map.hpp
   trunk/windstille/src/tile/tile_packer.hpp
   trunk/windstille/src/util/baby_xml.hpp
   trunk/windstille/src/util/field.hpp
   trunk/windstille/src/util/file_reader.hpp
   trunk/windstille/src/util/file_reader_impl.hpp
   trunk/windstille/src/util/getter.hpp
   trunk/windstille/src/util/handle.hpp
   trunk/windstille/src/util/ref.hpp
   trunk/windstille/src/util/refcounter.hpp
   trunk/windstille/src/util/response_curve.hpp
   trunk/windstille/src/util/sexpr_file_reader.hpp
   trunk/windstille/src/util/util.hpp
Log:
Little update on include guards

Modified: trunk/windstille/src/app/config.hpp
===================================================================
--- trunk/windstille/src/app/config.hpp	2009-02-15 12:48:45 UTC (rev 2500)
+++ trunk/windstille/src/app/config.hpp	2009-02-15 12:53:57 UTC (rev 2501)
@@ -16,8 +16,8 @@
 **  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
-#ifndef HEADER_WINDSTILLE_CONFIG_HPP
-#define HEADER_WINDSTILLE_CONFIG_HPP
+#ifndef HEADER_WINDSTILLE_APP_CONFIG_HPP
+#define HEADER_WINDSTILLE_APP_CONFIG_HPP
 
 #include <map>
 #include <string>

Modified: trunk/windstille/src/app/console.hpp
===================================================================
--- trunk/windstille/src/app/console.hpp	2009-02-15 12:48:45 UTC (rev 2500)
+++ trunk/windstille/src/app/console.hpp	2009-02-15 12:53:57 UTC (rev 2501)
@@ -16,8 +16,8 @@
 **  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
-#ifndef HEADER_WINDSTILLE_CONSOLE_HPP
-#define HEADER_WINDSTILLE_CONSOLE_HPP
+#ifndef HEADER_WINDSTILLE_APP_CONSOLE_HPP
+#define HEADER_WINDSTILLE_APP_CONSOLE_HPP
 
 #include <memory>
 #include <vector>

Modified: trunk/windstille/src/app/controller_def.hpp
===================================================================
--- trunk/windstille/src/app/controller_def.hpp	2009-02-15 12:48:45 UTC (rev 2500)
+++ trunk/windstille/src/app/controller_def.hpp	2009-02-15 12:53:57 UTC (rev 2501)
@@ -16,8 +16,8 @@
 **  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
-#ifndef HEADER_WINDSTILLE_CONTROLLER_DEF_HPP
-#define HEADER_WINDSTILLE_CONTROLLER_DEF_HPP
+#ifndef HEADER_WINDSTILLE_APP_CONTROLLER_DEF_HPP
+#define HEADER_WINDSTILLE_APP_CONTROLLER_DEF_HPP
 
 #include <map>
 #include <string>

Modified: trunk/windstille/src/app/globals.hpp
===================================================================
--- trunk/windstille/src/app/globals.hpp	2009-02-15 12:48:45 UTC (rev 2500)
+++ trunk/windstille/src/app/globals.hpp	2009-02-15 12:53:57 UTC (rev 2501)
@@ -16,8 +16,8 @@
 **  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
-#ifndef HEADER_WINDSTILLE_GLOBALS_HPP
-#define HEADER_WINDSTILLE_GLOBALS_HPP
+#ifndef HEADER_WINDSTILLE_APP_GLOBALS_HPP
+#define HEADER_WINDSTILLE_APP_GLOBALS_HPP
 
 #include <string>
 

Modified: trunk/windstille/src/app/menu_manager.hpp
===================================================================
--- trunk/windstille/src/app/menu_manager.hpp	2009-02-15 12:48:45 UTC (rev 2500)
+++ trunk/windstille/src/app/menu_manager.hpp	2009-02-15 12:53:57 UTC (rev 2501)
@@ -16,8 +16,8 @@
 **  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
-#ifndef HEADER_WINDSTILLE_MENU_MANAGER_HPP
-#define HEADER_WINDSTILLE_MENU_MANAGER_HPP
+#ifndef HEADER_WINDSTILLE_APP_MENU_MANAGER_HPP
+#define HEADER_WINDSTILLE_APP_MENU_MANAGER_HPP
 
 #include <vector>
 

Modified: trunk/windstille/src/app/weapon.hpp
===================================================================
--- trunk/windstille/src/app/weapon.hpp	2009-02-15 12:48:45 UTC (rev 2500)
+++ trunk/windstille/src/app/weapon.hpp	2009-02-15 12:53:57 UTC (rev 2501)
@@ -16,8 +16,8 @@
 **  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
-#ifndef HEADER_WINDSTILLE_WEAPON_HPP
-#define HEADER_WINDSTILLE_WEAPON_HPP
+#ifndef HEADER_WINDSTILLE_APP_WEAPON_HPP
+#define HEADER_WINDSTILLE_APP_WEAPON_HPP
 
 /**
  * Base class for all weapons. This is not a GameObject because it will be

Modified: trunk/windstille/src/app/windstille.hpp
===================================================================
--- trunk/windstille/src/app/windstille.hpp	2009-02-15 12:48:45 UTC (rev 2500)
+++ trunk/windstille/src/app/windstille.hpp	2009-02-15 12:53:57 UTC (rev 2501)
@@ -16,8 +16,8 @@
 **  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
-#ifndef HEADER_WINDSTILLE_WINDSTILLE_HPP
-#define HEADER_WINDSTILLE_WINDSTILLE_HPP
+#ifndef HEADER_WINDSTILLE_APP_WINDSTILLE_HPP
+#define HEADER_WINDSTILLE_APP_WINDSTILLE_HPP
 
 #define WINDSTILLE_VERSION "0.4.0"
 

Modified: trunk/windstille/src/app/windstille_main.hpp
===================================================================
--- trunk/windstille/src/app/windstille_main.hpp	2009-02-15 12:48:45 UTC (rev 2500)
+++ trunk/windstille/src/app/windstille_main.hpp	2009-02-15 12:53:57 UTC (rev 2501)
@@ -44,8 +44,8 @@
  * OpenAL, OpenGL, SDL, SDL_image, freetype, libpng, physfs, boost, scons, bison, flex
  */
 
-#ifndef HEADER_WINDSTILLE_WINDSTILLE_MAIN_HPP
-#define HEADER_WINDSTILLE_WINDSTILLE_MAIN_HPP
+#ifndef HEADER_WINDSTILLE_APP_WINDSTILLE_MAIN_HPP
+#define HEADER_WINDSTILLE_APP_WINDSTILLE_MAIN_HPP
 
 #include "screen/screen.hpp"
 

Modified: trunk/windstille/src/display/color.hpp
===================================================================
--- trunk/windstille/src/display/color.hpp	2009-02-15 12:48:45 UTC (rev 2500)
+++ trunk/windstille/src/display/color.hpp	2009-02-15 12:53:57 UTC (rev 2501)
@@ -16,8 +16,8 @@
 **  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
-#ifndef HEADER_WINDSTILLE_COLOR_HPP
-#define HEADER_WINDSTILLE_COLOR_HPP
+#ifndef HEADER_WINDSTILLE_DISPLAY_COLOR_HPP
+#define HEADER_WINDSTILLE_DISPLAY_COLOR_HPP
 
 class Color
 {

Modified: trunk/windstille/src/display/graphic_context_state.hpp
===================================================================
--- trunk/windstille/src/display/graphic_context_state.hpp	2009-02-15 12:48:45 UTC (rev 2500)
+++ trunk/windstille/src/display/graphic_context_state.hpp	2009-02-15 12:53:57 UTC (rev 2501)
@@ -15,8 +15,8 @@
 //  along with this program; if not, write to the Free Software
 //  Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA.
 
-#ifndef HEADER_WINDSTILLE_GRAPHIC_CONTEXT_STATE_HPP
-#define HEADER_WINDSTILLE_GRAPHIC_CONTEXT_STATE_HPP
+#ifndef HEADER_WINDSTILLE_DISPLAY_GRAPHIC_CONTEXT_STATE_HPP
+#define HEADER_WINDSTILLE_DISPLAY_GRAPHIC_CONTEXT_STATE_HPP
 
 #include "math/rect.hpp"
 #include "math/vector2f.hpp"

Modified: trunk/windstille/src/display/text_area.hpp
===================================================================
--- trunk/windstille/src/display/text_area.hpp	2009-02-15 12:48:45 UTC (rev 2500)
+++ trunk/windstille/src/display/text_area.hpp	2009-02-15 12:53:57 UTC (rev 2501)
@@ -16,8 +16,8 @@
 **  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
-#ifndef HEADER_WINDSTILLE_TEXT_AREA_HPP
-#define HEADER_WINDSTILLE_TEXT_AREA_HPP
+#ifndef HEADER_WINDSTILLE_DISPLAY_TEXT_AREA_HPP
+#define HEADER_WINDSTILLE_DISPLAY_TEXT_AREA_HPP
 
 #include "math/rect.hpp"
 #include <string>

Modified: trunk/windstille/src/editor/windstille_widget.hpp
===================================================================
--- trunk/windstille/src/editor/windstille_widget.hpp	2009-02-15 12:48:45 UTC (rev 2500)
+++ trunk/windstille/src/editor/windstille_widget.hpp	2009-02-15 12:53:57 UTC (rev 2501)
@@ -16,8 +16,8 @@
 **  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
-#ifndef HEADER_WINDSTILLE_WIDGET_HPP
-#define HEADER_WINDSTILLE_WIDGET_HPP
+#ifndef HEADER_WINDSTILLE_EDITOR_WINDSTILLE_WIDGET_HPP
+#define HEADER_WINDSTILLE_EDITOR_WINDSTILLE_WIDGET_HPP
 
 #include <iostream>
 #include <gtkglmm.h>

Modified: trunk/windstille/src/engine/camera.hpp
===================================================================
--- trunk/windstille/src/engine/camera.hpp	2009-02-15 12:48:45 UTC (rev 2500)
+++ trunk/windstille/src/engine/camera.hpp	2009-02-15 12:53:57 UTC (rev 2501)
@@ -16,8 +16,8 @@
 **  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
-#ifndef HEADER_WINDSTILLE_CAMERA_HPP
-#define HEADER_WINDSTILLE_CAMERA_HPP
+#ifndef HEADER_WINDSTILLE_ENGINE_CAMERA_HPP
+#define HEADER_WINDSTILLE_ENGINE_CAMERA_HPP
 
 /** 
  * This class manages the virtual camera movement, it follows the

Modified: trunk/windstille/src/engine/entity.hpp
===================================================================
--- trunk/windstille/src/engine/entity.hpp	2009-02-15 12:48:45 UTC (rev 2500)
+++ trunk/windstille/src/engine/entity.hpp	2009-02-15 12:53:57 UTC (rev 2501)
@@ -16,8 +16,8 @@
 **  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
-#ifndef HEADER_WINDSTILLE_ENTITY_HPP
-#define HEADER_WINDSTILLE_ENTITY_HPP
+#ifndef HEADER_WINDSTILLE_ENGINE_ENTITY_HPP
+#define HEADER_WINDSTILLE_ENGINE_ENTITY_HPP
 
 #include <boost/signal.hpp>
 #include "math/vector2f.hpp"

Modified: trunk/windstille/src/engine/game_object.hpp
===================================================================
--- trunk/windstille/src/engine/game_object.hpp	2009-02-15 12:48:45 UTC (rev 2500)
+++ trunk/windstille/src/engine/game_object.hpp	2009-02-15 12:53:57 UTC (rev 2501)
@@ -16,8 +16,8 @@
 **  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
-#ifndef HEADER_WINDSTILLE_GAME_OBJECT_HPP
-#define HEADER_WINDSTILLE_GAME_OBJECT_HPP
+#ifndef HEADER_WINDSTILLE_ENGINE_GAME_OBJECT_HPP
+#define HEADER_WINDSTILLE_ENGINE_GAME_OBJECT_HPP
 
 #include <string>
 #include "util/file_reader.hpp"

Modified: trunk/windstille/src/engine/physics.hpp
===================================================================
--- trunk/windstille/src/engine/physics.hpp	2009-02-15 12:48:45 UTC (rev 2500)
+++ trunk/windstille/src/engine/physics.hpp	2009-02-15 12:53:57 UTC (rev 2501)
@@ -16,8 +16,8 @@
 **  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
-#ifndef HEADER_WINDSTILLE_PHYSICS_HPP
-#define HEADER_WINDSTILLE_PHYSICS_HPP
+#ifndef HEADER_WINDSTILLE_ENGINE_PHYSICS_HPP
+#define HEADER_WINDSTILLE_ENGINE_PHYSICS_HPP
 
 #include "collision/collision_data.hpp"
 #include "entity.hpp"

Modified: trunk/windstille/src/engine/script_manager.hpp
===================================================================
--- trunk/windstille/src/engine/script_manager.hpp	2009-02-15 12:48:45 UTC (rev 2500)
+++ trunk/windstille/src/engine/script_manager.hpp	2009-02-15 12:53:57 UTC (rev 2501)
@@ -16,8 +16,8 @@
 **  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
-#ifndef HEADER_WINDSTILLE_SCRIPT_MANAGER_HPP
-#define HEADER_WINDSTILLE_SCRIPT_MANAGER_HPP
+#ifndef HEADER_WINDSTILLE_ENGINE_SCRIPT_MANAGER_HPP
+#define HEADER_WINDSTILLE_ENGINE_SCRIPT_MANAGER_HPP
 
 #include <vector>
 #include <list>

Modified: trunk/windstille/src/engine/sector.hpp
===================================================================
--- trunk/windstille/src/engine/sector.hpp	2009-02-15 12:48:45 UTC (rev 2500)
+++ trunk/windstille/src/engine/sector.hpp	2009-02-15 12:53:57 UTC (rev 2501)
@@ -16,8 +16,8 @@
 **  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
-#ifndef HEADER_WINDSTILLE_SECTOR_HPP
-#define HEADER_WINDSTILLE_SECTOR_HPP
+#ifndef HEADER_WINDSTILLE_ENGINE_SECTOR_HPP
+#define HEADER_WINDSTILLE_ENGINE_SECTOR_HPP
 
 #include <memory>
 #include <string>

Modified: trunk/windstille/src/engine/weapon.hpp
===================================================================
--- trunk/windstille/src/engine/weapon.hpp	2009-02-15 12:48:45 UTC (rev 2500)
+++ trunk/windstille/src/engine/weapon.hpp	2009-02-15 12:53:57 UTC (rev 2501)
@@ -16,8 +16,8 @@
 **  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
-#ifndef HEADER_WINDSTILLE_WEAPON_HPP
-#define HEADER_WINDSTILLE_WEAPON_HPP
+#ifndef HEADER_WINDSTILLE_ENGINE_WEAPON_HPP
+#define HEADER_WINDSTILLE_ENGINE_WEAPON_HPP
 
 /**
  * Base class for all weapons. This is not a GameObject because it will be

Modified: trunk/windstille/src/hud/controller_help_window.hpp
===================================================================
--- trunk/windstille/src/hud/controller_help_window.hpp	2009-02-15 12:48:45 UTC (rev 2500)
+++ trunk/windstille/src/hud/controller_help_window.hpp	2009-02-15 12:53:57 UTC (rev 2501)
@@ -16,8 +16,8 @@
 **  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
-#ifndef HEADER_WINDSTILLE_CONTROLLER_HELP_WINDOW_HPP
-#define HEADER_WINDSTILLE_CONTROLLER_HELP_WINDOW_HPP
+#ifndef HEADER_WINDSTILLE_HUD_CONTROLLER_HELP_WINDOW_HPP
+#define HEADER_WINDSTILLE_HUD_CONTROLLER_HELP_WINDOW_HPP
 
 #include "screen/screen.hpp"
 #include <boost/shared_ptr.hpp>

Modified: trunk/windstille/src/hud/conversation.hpp
===================================================================
--- trunk/windstille/src/hud/conversation.hpp	2009-02-15 12:48:45 UTC (rev 2500)
+++ trunk/windstille/src/hud/conversation.hpp	2009-02-15 12:53:57 UTC (rev 2501)
@@ -16,8 +16,8 @@
 **  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
-#ifndef HEADER_WINDSTILLE_CONVERSATION_HPP
-#define HEADER_WINDSTILLE_CONVERSATION_HPP
+#ifndef HEADER_WINDSTILLE_HUD_CONVERSATION_HPP
+#define HEADER_WINDSTILLE_HUD_CONVERSATION_HPP
 
 #include <vector>
 #include <string>

Modified: trunk/windstille/src/hud/dialog_manager.hpp
===================================================================
--- trunk/windstille/src/hud/dialog_manager.hpp	2009-02-15 12:48:45 UTC (rev 2500)
+++ trunk/windstille/src/hud/dialog_manager.hpp	2009-02-15 12:53:57 UTC (rev 2501)
@@ -16,8 +16,8 @@
 **  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
-#ifndef HEADER_WINDSTILLE_DIALOG_MANAGER_HPP
-#define HEADER_WINDSTILLE_DIALOG_MANAGER_HPP
+#ifndef HEADER_WINDSTILLE_HUD_DIALOG_MANAGER_HPP
+#define HEADER_WINDSTILLE_HUD_DIALOG_MANAGER_HPP
 
 #include <vector>
 #include <string>

Modified: trunk/windstille/src/hud/energy_bar.hpp
===================================================================
--- trunk/windstille/src/hud/energy_bar.hpp	2009-02-15 12:48:45 UTC (rev 2500)
+++ trunk/windstille/src/hud/energy_bar.hpp	2009-02-15 12:53:57 UTC (rev 2501)
@@ -16,8 +16,8 @@
 **  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
-#ifndef HEADER_WINDSTILLE_ENERGY_BAR_HPP
-#define HEADER_WINDSTILLE_ENERGY_BAR_HPP
+#ifndef HEADER_WINDSTILLE_HUD_ENERGY_BAR_HPP
+#define HEADER_WINDSTILLE_HUD_ENERGY_BAR_HPP
 
 #include "screen/screen.hpp"
 #include "sprite2d/sprite.hpp"

Modified: trunk/windstille/src/hud/inventory.hpp
===================================================================
--- trunk/windstille/src/hud/inventory.hpp	2009-02-15 12:48:45 UTC (rev 2500)
+++ trunk/windstille/src/hud/inventory.hpp	2009-02-15 12:53:57 UTC (rev 2501)
@@ -16,8 +16,8 @@
 **  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
-#ifndef HEADER_WINDSTILLE_INVENTORY_HPP
-#define HEADER_WINDSTILLE_INVENTORY_HPP
+#ifndef HEADER_WINDSTILLE_HUD_INVENTORY_HPP
+#define HEADER_WINDSTILLE_HUD_INVENTORY_HPP
 
 #include "screen/screen.hpp"
 #include <boost/shared_ptr.hpp>

Modified: trunk/windstille/src/hud/pda.hpp
===================================================================
--- trunk/windstille/src/hud/pda.hpp	2009-02-15 12:48:45 UTC (rev 2500)
+++ trunk/windstille/src/hud/pda.hpp	2009-02-15 12:53:57 UTC (rev 2501)
@@ -16,8 +16,8 @@
 **  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
-#ifndef HEADER_WINDSTILLE_PDA_HPP
-#define HEADER_WINDSTILLE_PDA_HPP
+#ifndef HEADER_WINDSTILLE_HUD_PDA_HPP
+#define HEADER_WINDSTILLE_HUD_PDA_HPP
 
 #include "sprite2d/sprite.hpp"
 #include "screen/screen.hpp"

Modified: trunk/windstille/src/math/math.hpp
===================================================================
--- trunk/windstille/src/math/math.hpp	2009-02-15 12:48:45 UTC (rev 2500)
+++ trunk/windstille/src/math/math.hpp	2009-02-15 12:53:57 UTC (rev 2501)
@@ -16,8 +16,8 @@
 **  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
-#ifndef HEADER_WINDSTILLE_MATH_HPP
-#define HEADER_WINDSTILLE_MATH_HPP
+#ifndef HEADER_WINDSTILLE_MATH_MATH_HPP
+#define HEADER_WINDSTILLE_MATH_MATH_HPP
 
 #include <assert.h>
 #include <math.h>

Modified: trunk/windstille/src/math/random.hpp
===================================================================
--- trunk/windstille/src/math/random.hpp	2009-02-15 12:48:45 UTC (rev 2500)
+++ trunk/windstille/src/math/random.hpp	2009-02-15 12:53:57 UTC (rev 2501)
@@ -16,8 +16,8 @@
 **  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
-#ifndef HEADER_WINDSTILLE_RANDOM_HPP
-#define HEADER_WINDSTILLE_RANDOM_HPP
+#ifndef HEADER_WINDSTILLE_MATH_RANDOM_HPP
+#define HEADER_WINDSTILLE_MATH_RANDOM_HPP
 
 /** */
 class Random

Modified: trunk/windstille/src/objects/box.hpp
===================================================================
--- trunk/windstille/src/objects/box.hpp	2009-02-15 12:48:45 UTC (rev 2500)
+++ trunk/windstille/src/objects/box.hpp	2009-02-15 12:53:57 UTC (rev 2501)
@@ -16,8 +16,8 @@
 **  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
-#ifndef HEADER_WINDSTILLE_BOX_HPP
-#define HEADER_WINDSTILLE_BOX_HPP
+#ifndef HEADER_WINDSTILLE_OBJECTS_BOX_HPP
+#define HEADER_WINDSTILLE_OBJECTS_BOX_HPP
 
 #include "engine/entity.hpp"
 #include "collision/collision_object.hpp"

Modified: trunk/windstille/src/objects/character.hpp
===================================================================
--- trunk/windstille/src/objects/character.hpp	2009-02-15 12:48:45 UTC (rev 2500)
+++ trunk/windstille/src/objects/character.hpp	2009-02-15 12:53:57 UTC (rev 2501)
@@ -16,8 +16,8 @@
 **  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
-#ifndef HEADER_WINDSTILLE_CHARACTER_HPP
-#define HEADER_WINDSTILLE_CHARACTER_HPP
+#ifndef HEADER_WINDSTILLE_OBJECTS_CHARACTER_HPP
+#define HEADER_WINDSTILLE_OBJECTS_CHARACTER_HPP
 
 #include "engine/entity.hpp"
 #include "sprite3d/sprite3d.hpp"

Modified: trunk/windstille/src/objects/elevator.hpp
===================================================================
--- trunk/windstille/src/objects/elevator.hpp	2009-02-15 12:48:45 UTC (rev 2500)
+++ trunk/windstille/src/objects/elevator.hpp	2009-02-15 12:53:57 UTC (rev 2501)
@@ -16,8 +16,8 @@
 **  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
-#ifndef HEADER_WINDSTILLE_ELEVATOR_HPP
-#define HEADER_WINDSTILLE_ELEVATOR_HPP
+#ifndef HEADER_WINDSTILLE_OBJECTS_ELEVATOR_HPP
+#define HEADER_WINDSTILLE_OBJECTS_ELEVATOR_HPP
 
 #include "engine/entity.hpp"
 #include "sprite2d/sprite.hpp"

Modified: trunk/windstille/src/objects/grenade.hpp
===================================================================
--- trunk/windstille/src/objects/grenade.hpp	2009-02-15 12:48:45 UTC (rev 2500)
+++ trunk/windstille/src/objects/grenade.hpp	2009-02-15 12:53:57 UTC (rev 2501)
@@ -15,8 +15,8 @@
 **  You should have received a copy of the GNU General Public License
 **  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
-#ifndef HEADER_WINDSTILLE_GRENADE_HPP
-#define HEADER_WINDSTILLE_GRENADE_HPP
+#ifndef HEADER_WINDSTILLE_OBJECTS_GRENADE_HPP
+#define HEADER_WINDSTILLE_OBJECTS_GRENADE_HPP
 
 #include "engine/entity.hpp"
 #include "engine/physics.hpp"

Modified: trunk/windstille/src/objects/laser_pointer.hpp
===================================================================
--- trunk/windstille/src/objects/laser_pointer.hpp	2009-02-15 12:48:45 UTC (rev 2500)
+++ trunk/windstille/src/objects/laser_pointer.hpp	2009-02-15 12:53:57 UTC (rev 2501)
@@ -16,8 +16,8 @@
 **  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
-#ifndef HEADER_WINDSTILLE_LASER_POINTER_HPP
-#define HEADER_WINDSTILLE_LASER_POINTER_HPP
+#ifndef HEADER_WINDSTILLE_OBJECTS_LASER_POINTER_HPP
+#define HEADER_WINDSTILLE_OBJECTS_LASER_POINTER_HPP
 
 #include "sprite2d/sprite.hpp"
 #include "display/texture.hpp"

Modified: trunk/windstille/src/objects/liquid.hpp
===================================================================
--- trunk/windstille/src/objects/liquid.hpp	2009-02-15 12:48:45 UTC (rev 2500)
+++ trunk/windstille/src/objects/liquid.hpp	2009-02-15 12:53:57 UTC (rev 2501)
@@ -16,8 +16,8 @@
 **  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
-#ifndef HEADER_WINDSTILLE_LIQUID_HPP
-#define HEADER_WINDSTILLE_LIQUID_HPP
+#ifndef HEADER_WINDSTILLE_OBJECTS_LIQUID_HPP
+#define HEADER_WINDSTILLE_OBJECTS_LIQUID_HPP
 
 #include <vector>
 #include "engine/entity.hpp"

Modified: trunk/windstille/src/objects/pistol.hpp
===================================================================
--- trunk/windstille/src/objects/pistol.hpp	2009-02-15 12:48:45 UTC (rev 2500)
+++ trunk/windstille/src/objects/pistol.hpp	2009-02-15 12:53:57 UTC (rev 2501)
@@ -16,8 +16,8 @@
 **  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
-#ifndef HEADER_WINDSTILLE_PISTOL_HPP
-#define HEADER_WINDSTILLE_PISTOL_HPP
+#ifndef HEADER_WINDSTILLE_OBJECTS_PISTOL_HPP
+#define HEADER_WINDSTILLE_OBJECTS_PISTOL_HPP
 
 #include "sprite3d/sprite3d.hpp"
 #include "engine/weapon.hpp"

Modified: trunk/windstille/src/objects/player.hpp
===================================================================
--- trunk/windstille/src/objects/player.hpp	2009-02-15 12:48:45 UTC (rev 2500)
+++ trunk/windstille/src/objects/player.hpp	2009-02-15 12:53:57 UTC (rev 2501)
@@ -16,8 +16,8 @@
 **  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
-#ifndef HEADER_WINDSTILLE_PLAYER_HPP
-#define HEADER_WINDSTILLE_PLAYER_HPP
+#ifndef HEADER_WINDSTILLE_OBJECTS_PLAYER_HPP
+#define HEADER_WINDSTILLE_OBJECTS_PLAYER_HPP
 
 #include <memory>
 #include "sprite2d/sprite.hpp"

Modified: trunk/windstille/src/objects/scriptable_object.hpp
===================================================================
--- trunk/windstille/src/objects/scriptable_object.hpp	2009-02-15 12:48:45 UTC (rev 2500)
+++ trunk/windstille/src/objects/scriptable_object.hpp	2009-02-15 12:53:57 UTC (rev 2501)
@@ -17,8 +17,8 @@
 */
 
 
-#ifndef HEADER_WINDSTILLE_SCRIPTABLE_OBJECT_HPP
-#define HEADER_WINDSTILLE_SCRIPTABLE_OBJECT_HPP
+#ifndef HEADER_WINDSTILLE_OBJECTS_SCRIPTABLE_OBJECT_HPP
+#define HEADER_WINDSTILLE_OBJECTS_SCRIPTABLE_OBJECT_HPP
 
 #include <string>
 #include "engine/entity.hpp"

Modified: trunk/windstille/src/objects/trigger.hpp
===================================================================
--- trunk/windstille/src/objects/trigger.hpp	2009-02-15 12:48:45 UTC (rev 2500)
+++ trunk/windstille/src/objects/trigger.hpp	2009-02-15 12:53:57 UTC (rev 2501)
@@ -16,8 +16,8 @@
 **  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
-#ifndef HEADER_WINDSTILLE_TRIGGER_HPP
-#define HEADER_WINDSTILLE_TRIGGER_HPP
+#ifndef HEADER_WINDSTILLE_OBJECTS_TRIGGER_HPP
+#define HEADER_WINDSTILLE_OBJECTS_TRIGGER_HPP
 
 #include <vector>
 #include "engine/game_object.hpp"

Modified: trunk/windstille/src/screen/armature_test.hpp
===================================================================
--- trunk/windstille/src/screen/armature_test.hpp	2009-02-15 12:48:45 UTC (rev 2500)
+++ trunk/windstille/src/screen/armature_test.hpp	2009-02-15 12:53:57 UTC (rev 2501)
@@ -16,8 +16,8 @@
 **  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
-#ifndef HEADER_WINDSTILLE_ARMATURE_TEST_HPP
-#define HEADER_WINDSTILLE_ARMATURE_TEST_HPP
+#ifndef HEADER_WINDSTILLE_SCREEN_ARMATURE_TEST_HPP
+#define HEADER_WINDSTILLE_SCREEN_ARMATURE_TEST_HPP
 
 #include <memory>
 #include "armature/armature.hpp"

Modified: trunk/windstille/src/screen/game_session.hpp
===================================================================
--- trunk/windstille/src/screen/game_session.hpp	2009-02-15 12:48:45 UTC (rev 2500)
+++ trunk/windstille/src/screen/game_session.hpp	2009-02-15 12:53:57 UTC (rev 2501)
@@ -16,8 +16,8 @@
 **  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
-#ifndef HEADER_WINDSTILLE_GAME_SESSION_HPP
-#define HEADER_WINDSTILLE_GAME_SESSION_HPP
+#ifndef HEADER_WINDSTILLE_SCREEN_GAME_SESSION_HPP
+#define HEADER_WINDSTILLE_SCREEN_GAME_SESSION_HPP
 
 #include <string>
 #include <squirrel.h>

Modified: trunk/windstille/src/screen/geometry_test.hpp
===================================================================
--- trunk/windstille/src/screen/geometry_test.hpp	2009-02-15 12:48:45 UTC (rev 2500)
+++ trunk/windstille/src/screen/geometry_test.hpp	2009-02-15 12:53:57 UTC (rev 2501)
@@ -16,8 +16,8 @@
 **  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
-#ifndef HEADER_WINDSTILLE_GEOMETRY_TEST_HPP
-#define HEADER_WINDSTILLE_GEOMETRY_TEST_HPP
+#ifndef HEADER_WINDSTILLE_SCREEN_GEOMETRY_TEST_HPP
+#define HEADER_WINDSTILLE_SCREEN_GEOMETRY_TEST_HPP
 
 #include "screen.hpp"
 #include "math/vector2f.hpp"

Modified: trunk/windstille/src/screen/navigation_test.hpp
===================================================================
--- trunk/windstille/src/screen/navigation_test.hpp	2009-02-15 12:48:45 UTC (rev 2500)
+++ trunk/windstille/src/screen/navigation_test.hpp	2009-02-15 12:53:57 UTC (rev 2501)
@@ -16,8 +16,8 @@
 **  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
-#ifndef HEADER_WINDSTILLE_NAVIGATION_TEST_HPP
-#define HEADER_WINDSTILLE_NAVIGATION_TEST_HPP
+#ifndef HEADER_WINDSTILLE_SCREEN_NAVIGATION_TEST_HPP
+#define HEADER_WINDSTILLE_SCREEN_NAVIGATION_TEST_HPP
 
 #include "navigation/navigation_graph.hpp"
 #include "screen.hpp"

Modified: trunk/windstille/src/screen/particle_viewer.hpp
===================================================================
--- trunk/windstille/src/screen/particle_viewer.hpp	2009-02-15 12:48:45 UTC (rev 2500)
+++ trunk/windstille/src/screen/particle_viewer.hpp	2009-02-15 12:53:57 UTC (rev 2501)
@@ -16,8 +16,8 @@
 **  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
-#ifndef HEADER_WINDSTILLE_PARTICLE_VIEWER_HPP
-#define HEADER_WINDSTILLE_PARTICLE_VIEWER_HPP
+#ifndef HEADER_WINDSTILLE_SCREEN_PARTICLE_VIEWER_HPP
+#define HEADER_WINDSTILLE_SCREEN_PARTICLE_VIEWER_HPP
 
 #include <memory>
 #include "screen.hpp"

Modified: trunk/windstille/src/screen/screen.hpp
===================================================================
--- trunk/windstille/src/screen/screen.hpp	2009-02-15 12:48:45 UTC (rev 2500)
+++ trunk/windstille/src/screen/screen.hpp	2009-02-15 12:53:57 UTC (rev 2501)
@@ -16,8 +16,8 @@
 **  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
-#ifndef HEADER_WINDSTILLE_SCREEN_HPP
-#define HEADER_WINDSTILLE_SCREEN_HPP
+#ifndef HEADER_WINDSTILLE_SCREEN_SCREEN_HPP
+#define HEADER_WINDSTILLE_SCREEN_SCREEN_HPP
 
 #include <SDL.h>
 

Modified: trunk/windstille/src/screen/screen_manager.hpp
===================================================================
--- trunk/windstille/src/screen/screen_manager.hpp	2009-02-15 12:48:45 UTC (rev 2500)
+++ trunk/windstille/src/screen/screen_manager.hpp	2009-02-15 12:53:57 UTC (rev 2501)
@@ -16,8 +16,8 @@
 **  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
-#ifndef HEADER_WINDSTILLE_SCREEN_MANAGER_HPP
-#define HEADER_WINDSTILLE_SCREEN_MANAGER_HPP
+#ifndef HEADER_WINDSTILLE_SCREEN_SCREEN_MANAGER_HPP
+#define HEADER_WINDSTILLE_SCREEN_SCREEN_MANAGER_HPP
 
 class Screen;
 

Modified: trunk/windstille/src/screen/sprite2dview.hpp
===================================================================
--- trunk/windstille/src/screen/sprite2dview.hpp	2009-02-15 12:48:45 UTC (rev 2500)
+++ trunk/windstille/src/screen/sprite2dview.hpp	2009-02-15 12:53:57 UTC (rev 2501)
@@ -16,8 +16,8 @@
 **  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
-#ifndef HEADER_WINDSTILLE_SPRITE2DVIEW_HPP
-#define HEADER_WINDSTILLE_SPRITE2DVIEW_HPP
+#ifndef HEADER_WINDSTILLE_SCREEN_SPRITE2DVIEW_HPP
+#define HEADER_WINDSTILLE_SCREEN_SPRITE2DVIEW_HPP
 
 #include "display/scene_context.hpp"
 #include "sprite2d/sprite.hpp"

Modified: trunk/windstille/src/screen/sprite3dview.hpp
===================================================================
--- trunk/windstille/src/screen/sprite3dview.hpp	2009-02-15 12:48:45 UTC (rev 2500)
+++ trunk/windstille/src/screen/sprite3dview.hpp	2009-02-15 12:53:57 UTC (rev 2501)
@@ -16,8 +16,8 @@
 **  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
-#ifndef HEADER_WINDSTILLE_SPRITE3DVIEW_HPP
-#define HEADER_WINDSTILLE_SPRITE3DVIEW_HPP
+#ifndef HEADER_WINDSTILLE_SCREEN_SPRITE3DVIEW_HPP
+#define HEADER_WINDSTILLE_SCREEN_SPRITE3DVIEW_HPP
 
 #include "display/scene_context.hpp"
 #include "sprite3d/sprite3d.hpp"

Modified: trunk/windstille/src/screen/title_screen.hpp
===================================================================
--- trunk/windstille/src/screen/title_screen.hpp	2009-02-15 12:48:45 UTC (rev 2500)
+++ trunk/windstille/src/screen/title_screen.hpp	2009-02-15 12:53:57 UTC (rev 2501)
@@ -16,8 +16,8 @@
 **  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
-#ifndef HEADER_WINDSTILLE_TITLE_SCREEN_HPP
-#define HEADER_WINDSTILLE_TITLE_SCREEN_HPP
+#ifndef HEADER_WINDSTILLE_SCREEN_TITLE_SCREEN_HPP
+#define HEADER_WINDSTILLE_SCREEN_TITLE_SCREEN_HPP
 
 #include "sprite2d/sprite.hpp"
 #include "screen.hpp"

Modified: trunk/windstille/src/screen/view.hpp
===================================================================
--- trunk/windstille/src/screen/view.hpp	2009-02-15 12:48:45 UTC (rev 2500)
+++ trunk/windstille/src/screen/view.hpp	2009-02-15 12:53:57 UTC (rev 2501)
@@ -16,8 +16,8 @@
 **  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
-#ifndef HEADER_WINDSTILLE_VIEW_HPP
-#define HEADER_WINDSTILLE_VIEW_HPP
+#ifndef HEADER_WINDSTILLE_SCREEN_VIEW_HPP
+#define HEADER_WINDSTILLE_SCREEN_VIEW_HPP
 
 #include "display/graphic_context_state.hpp"
 #include "engine/camera.hpp"

Modified: trunk/windstille/src/tile/tile.hpp
===================================================================
--- trunk/windstille/src/tile/tile.hpp	2009-02-15 12:48:45 UTC (rev 2500)
+++ trunk/windstille/src/tile/tile.hpp	2009-02-15 12:53:57 UTC (rev 2501)
@@ -16,8 +16,8 @@
 **  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
-#ifndef HEADER_WINDSTILLE_TILE_HPP
-#define HEADER_WINDSTILLE_TILE_HPP
+#ifndef HEADER_WINDSTILLE_TILE_TILE_HPP
+#define HEADER_WINDSTILLE_TILE_TILE_HPP
 
 #include <assert.h>
 #include <GL/glew.h>

Modified: trunk/windstille/src/tile/tile_description.hpp
===================================================================
--- trunk/windstille/src/tile/tile_description.hpp	2009-02-15 12:48:45 UTC (rev 2500)
+++ trunk/windstille/src/tile/tile_description.hpp	2009-02-15 12:53:57 UTC (rev 2501)
@@ -16,8 +16,8 @@
 **  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
-#ifndef HEADER_WINDSTILLE_TILE_DESCRIPTION_HPP
-#define HEADER_WINDSTILLE_TILE_DESCRIPTION_HPP
+#ifndef HEADER_WINDSTILLE_TILE_TILE_DESCRIPTION_HPP
+#define HEADER_WINDSTILLE_TILE_TILE_DESCRIPTION_HPP
 
 #include <vector>
 #include <string>

Modified: trunk/windstille/src/tile/tile_factory.hpp
===================================================================
--- trunk/windstille/src/tile/tile_factory.hpp	2009-02-15 12:48:45 UTC (rev 2500)
+++ trunk/windstille/src/tile/tile_factory.hpp	2009-02-15 12:53:57 UTC (rev 2501)
@@ -16,8 +16,8 @@
 **  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
-#ifndef HEADER_WINDSTILLE_TILE_FACTORY_HPP
-#define HEADER_WINDSTILLE_TILE_FACTORY_HPP
+#ifndef HEADER_WINDSTILLE_TILE_TILE_FACTORY_HPP
+#define HEADER_WINDSTILLE_TILE_TILE_FACTORY_HPP
 
 #include <map>
 #include <string>

Modified: trunk/windstille/src/tile/tile_map.hpp
===================================================================
--- trunk/windstille/src/tile/tile_map.hpp	2009-02-15 12:48:45 UTC (rev 2500)
+++ trunk/windstille/src/tile/tile_map.hpp	2009-02-15 12:53:57 UTC (rev 2501)
@@ -16,8 +16,8 @@
 **  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
-#ifndef HEADER_WINDSTILLE_TILE_MAP_HPP
-#define HEADER_WINDSTILLE_TILE_MAP_HPP
+#ifndef HEADER_WINDSTILLE_TILE_TILE_MAP_HPP
+#define HEADER_WINDSTILLE_TILE_TILE_MAP_HPP
 
 #include <string>
 

Modified: trunk/windstille/src/tile/tile_packer.hpp
===================================================================
--- trunk/windstille/src/tile/tile_packer.hpp	2009-02-15 12:48:45 UTC (rev 2500)
+++ trunk/windstille/src/tile/tile_packer.hpp	2009-02-15 12:53:57 UTC (rev 2501)
@@ -16,8 +16,8 @@
 **  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
-#ifndef HEADER_WINDSTILLE_TILE_PACKER_HPP
-#define HEADER_WINDSTILLE_TILE_PACKER_HPP
+#ifndef HEADER_WINDSTILLE_TILE_TILE_PACKER_HPP
+#define HEADER_WINDSTILLE_TILE_TILE_PACKER_HPP
 
 #include <SDL.h>
 #include <GL/glew.h>

Modified: trunk/windstille/src/util/baby_xml.hpp
===================================================================
--- trunk/windstille/src/util/baby_xml.hpp	2009-02-15 12:48:45 UTC (rev 2500)
+++ trunk/windstille/src/util/baby_xml.hpp	2009-02-15 12:53:57 UTC (rev 2501)
@@ -16,8 +16,8 @@
 **  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
-#ifndef HEADER_WINDSTILLE_BABY_XML_HPP
-#define HEADER_WINDSTILLE_BABY_XML_HPP
+#ifndef HEADER_WINDSTILLE_UTIL_BABY_XML_HPP
+#define HEADER_WINDSTILLE_UTIL_BABY_XML_HPP
 
 #include <string>
 #include <vector>

Modified: trunk/windstille/src/util/field.hpp
===================================================================
--- trunk/windstille/src/util/field.hpp	2009-02-15 12:48:45 UTC (rev 2500)
+++ trunk/windstille/src/util/field.hpp	2009-02-15 12:53:57 UTC (rev 2501)
@@ -16,8 +16,8 @@
 **  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
-#ifndef HEADER_WINDSTILLE_FIELD_HPP
-#define HEADER_WINDSTILLE_FIELD_HPP
+#ifndef HEADER_WINDSTILLE_UTIL_FIELD_HPP
+#define HEADER_WINDSTILLE_UTIL_FIELD_HPP
 
 #include <vector>
 #include <assert.h>

Modified: trunk/windstille/src/util/file_reader.hpp
===================================================================
--- trunk/windstille/src/util/file_reader.hpp	2009-02-15 12:48:45 UTC (rev 2500)
+++ trunk/windstille/src/util/file_reader.hpp	2009-02-15 12:53:57 UTC (rev 2501)
@@ -16,8 +16,8 @@
 **  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
-#ifndef HEADER_WINDSTILLE_FILE_READER_HPP
-#define HEADER_WINDSTILLE_FILE_READER_HPP
+#ifndef HEADER_WINDSTILLE_UTIL_FILE_READER_HPP
+#define HEADER_WINDSTILLE_UTIL_FILE_READER_HPP
 
 #include <string>
 #include <vector>

Modified: trunk/windstille/src/util/file_reader_impl.hpp
===================================================================
--- trunk/windstille/src/util/file_reader_impl.hpp	2009-02-15 12:48:45 UTC (rev 2500)
+++ trunk/windstille/src/util/file_reader_impl.hpp	2009-02-15 12:53:57 UTC (rev 2501)
@@ -16,8 +16,8 @@
 **  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
-#ifndef HEADER_WINDSTILLE_FILE_READER_IMPL_HPP
-#define HEADER_WINDSTILLE_FILE_READER_IMPL_HPP
+#ifndef HEADER_WINDSTILLE_UTIL_FILE_READER_IMPL_HPP
+#define HEADER_WINDSTILLE_UTIL_FILE_READER_IMPL_HPP
 
 #include <vector>
 #include <string>

Modified: trunk/windstille/src/util/getter.hpp
===================================================================
--- trunk/windstille/src/util/getter.hpp	2009-02-15 12:48:45 UTC (rev 2500)
+++ trunk/windstille/src/util/getter.hpp	2009-02-15 12:53:57 UTC (rev 2501)
@@ -16,8 +16,8 @@
 **  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
-#ifndef HEADER_WINDSTILLE_GETTER_HPP
-#define HEADER_WINDSTILLE_GETTER_HPP
+#ifndef HEADER_WINDSTILLE_UTIL_GETTER_HPP
+#define HEADER_WINDSTILLE_UTIL_GETTER_HPP
 
 #include "file_reader.hpp"
 

Modified: trunk/windstille/src/util/handle.hpp
===================================================================
--- trunk/windstille/src/util/handle.hpp	2009-02-15 12:48:45 UTC (rev 2500)
+++ trunk/windstille/src/util/handle.hpp	2009-02-15 12:53:57 UTC (rev 2501)
@@ -16,8 +16,8 @@
 **  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
-#ifndef HEADER_WINDSTILLE_HANDLE_HPP
-#define HEADER_WINDSTILLE_HANDLE_HPP
+#ifndef HEADER_WINDSTILLE_UTIL_HANDLE_HPP
+#define HEADER_WINDSTILLE_UTIL_HANDLE_HPP
 
 #include <vector>
 

Modified: trunk/windstille/src/util/ref.hpp
===================================================================
--- trunk/windstille/src/util/ref.hpp	2009-02-15 12:48:45 UTC (rev 2500)
+++ trunk/windstille/src/util/ref.hpp	2009-02-15 12:53:57 UTC (rev 2501)
@@ -16,8 +16,8 @@
 **  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
-#ifndef HEADER_WINDSTILLE_REF_HPP
-#define HEADER_WINDSTILLE_REF_HPP
+#ifndef HEADER_WINDSTILLE_UTIL_REF_HPP
+#define HEADER_WINDSTILLE_UTIL_REF_HPP
 
 /** This class behaves like a pointer to a refcounted object, but increments the
  * reference count when new objects are assigned and decrements the refcounter

Modified: trunk/windstille/src/util/refcounter.hpp
===================================================================
--- trunk/windstille/src/util/refcounter.hpp	2009-02-15 12:48:45 UTC (rev 2500)
+++ trunk/windstille/src/util/refcounter.hpp	2009-02-15 12:53:57 UTC (rev 2501)
@@ -16,8 +16,8 @@
 **  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
-#ifndef HEADER_WINDSTILLE_REFCOUNTER_HPP
-#define HEADER_WINDSTILLE_REFCOUNTER_HPP
+#ifndef HEADER_WINDSTILLE_UTIL_REFCOUNTER_HPP
+#define HEADER_WINDSTILLE_UTIL_REFCOUNTER_HPP
 
 #include <assert.h>
 

Modified: trunk/windstille/src/util/response_curve.hpp
===================================================================
--- trunk/windstille/src/util/response_curve.hpp	2009-02-15 12:48:45 UTC (rev 2500)
+++ trunk/windstille/src/util/response_curve.hpp	2009-02-15 12:53:57 UTC (rev 2501)
@@ -16,8 +16,8 @@
 **  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
-#ifndef HEADER_WINDSTILLE_RESPONSE_CURVE_HPP
-#define HEADER_WINDSTILLE_RESPONSE_CURVE_HPP
+#ifndef HEADER_WINDSTILLE_UTIL_RESPONSE_CURVE_HPP
+#define HEADER_WINDSTILLE_UTIL_RESPONSE_CURVE_HPP
 
 #include <vector>
 

Modified: trunk/windstille/src/util/sexpr_file_reader.hpp
===================================================================
--- trunk/windstille/src/util/sexpr_file_reader.hpp	2009-02-15 12:48:45 UTC (rev 2500)
+++ trunk/windstille/src/util/sexpr_file_reader.hpp	2009-02-15 12:53:57 UTC (rev 2501)
@@ -16,8 +16,8 @@
 **  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
-#ifndef HEADER_WINDSTILLE_SEXPR_FILE_READER_HPP
-#define HEADER_WINDSTILLE_SEXPR_FILE_READER_HPP
+#ifndef HEADER_WINDSTILLE_UTIL_SEXPR_FILE_READER_HPP
+#define HEADER_WINDSTILLE_UTIL_SEXPR_FILE_READER_HPP
 
 #include "file_reader.hpp"
 #include "lisp/lisp.hpp"

Modified: trunk/windstille/src/util/util.hpp
===================================================================
--- trunk/windstille/src/util/util.hpp	2009-02-15 12:48:45 UTC (rev 2500)
+++ trunk/windstille/src/util/util.hpp	2009-02-15 12:53:57 UTC (rev 2501)
@@ -16,8 +16,8 @@
 **  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 
-#ifndef HEADER_WINDSTILLE_UTIL_HPP
-#define HEADER_WINDSTILLE_UTIL_HPP
+#ifndef HEADER_WINDSTILLE_UTIL_UTIL_HPP
+#define HEADER_WINDSTILLE_UTIL_UTIL_HPP
 
 #include <string>
 #include <stdexcept>



From grumbel at mail.berlios.de  Sun Feb 15 17:05:31 2009
From: grumbel at mail.berlios.de (grumbel at BerliOS)
Date: Sun, 15 Feb 2009 17:05:31 +0100
Subject: [Windstille-commit] r2502 - trunk/htdocs
Message-ID: <200902151605.n1FG5Vu2031810@sheep.berlios.de>

Author: grumbel
Date: 2009-02-15 17:05:31 +0100 (Sun, 15 Feb 2009)
New Revision: 2502

Modified:
   trunk/htdocs/news.xml
Log:
--- some unknown new stuff (automatically inserted by the upload script) ---

Modified: trunk/htdocs/news.xml
===================================================================
--- trunk/htdocs/news.xml	2009-02-15 12:53:57 UTC (rev 2501)
+++ trunk/htdocs/news.xml	2009-02-15 16:05:31 UTC (rev 2502)
@@ -3,6 +3,11 @@
   
   <section title="News">
     <news>
+      <item date="15. Feb 2009">
+        Some Windstille development is going on again, check out the 
+        <a href="http://grumbel.blogspot.com/search/label/Windstille">Blog</a>.
+      </item>
+
       <item date="20. Oct 2007">
         Windows build of the 0.3.0 release is available
       </item>
@@ -10,13 +15,13 @@
       <item date="13. Jun 2007">
         <a href="download.html">Windstille 0.3.0</a> is out, featuring:
         <ul>
-<li>near complete rewrite of the engine</li>
-<li>3D sprites</li>
-<li>light effects</li>
-<li>particle system</li>
-<li>model viewer</li>
-<li>menu system</li>
-<li>scripting</li>
+          <li>near complete rewrite of the engine</li>
+          <li>3D sprites</li>
+          <li>light effects</li>
+          <li>particle system</li>
+          <li>model viewer</li>
+          <li>menu system</li>
+          <li>scripting</li>
         </ul>
       </item>
 
@@ -32,8 +37,8 @@
         with a little luck we might have something actually playable
         ready in a few month. All development specific information is
         now collected in the <a
-        href="http://windstille.berlios.de/wiki/index.php/Main_Page">Windstille
-        Development Wiki</a>.
+                                href="http://windstille.berlios.de/wiki/index.php/Main_Page">Windstille
+          Development Wiki</a>.
       </item>
 
       <item date="3. Jun 2005">
@@ -42,9 +47,9 @@
 
       <item date="5. Nov 2004">
         We now have a <a
-        href="http://windstille.berlios.de/phpBB2">forum</a> where you
+                         href="http://windstille.berlios.de/phpBB2">forum</a> where you
         can post suggestion, comments and whatever you want. <em>Forum
-        is currently no longer online.</em>
+          is currently no longer online.</em>
       </item>
 
       <item date="3. Nov 2004">
@@ -57,30 +62,30 @@
       <item date="24. Oct 2004">
         A video of a fire effect created by the particle system that
         will be used in Windstille is now available in the <a
-        href="screenshots.html#effects">effects subsection</a>
+                                                              href="screenshots.html#effects">effects subsection</a>
       </item>
 
       <item date="16. Oct 2004">
         Some more screenshots of hour hero and some more sketches of
         scenery are available in the <a href="artworks.html">artwork
-        section</a> are available.
+          section</a> are available.
       </item>
 
       <item date="06. Oct 2004">
         Some new lighting effects are now in the <a
-        href="screenshots.html#effects">artwork section</a>.
+                                                    href="screenshots.html#effects">artwork section</a>.
       </item>
 
       <item date="04. Oct 2004">
         Not much news in the last few months, but don't worry, its not
         dead yet, just developing rather slowly and jumpy. The <a
-        href="artworks.html">artwork section</a> contains some new
+                                                                  href="artworks.html">artwork section</a> contains some new
         pieces (<a href="artworks.html#hero">here</a> and <a
-        href="screenshots.html#effects">here</a>) of graphics which might
+                                                             href="screenshots.html#effects">here</a>) of graphics which might
         be worth a look. You want to see the Windstille artwork in its
         purest or rawest form, you can now find it in the <a
-      href="http://undone.clanlib.org/~grumbel/show.cgi?search=windstille">Game
-      Media Repository</a>.
+                                                             href="http://undone.clanlib.org/~grumbel/show.cgi?search=windstille">Game
+          Media Repository</a>.
       </item>
 
       <item date="08. Feb 2004">
@@ -91,15 +96,15 @@
       <item date="08. Feb 2004">
         Thanks to <a href="mailto:rkon at gmx.de">Robert Konrad</a> we
         now have a Win32 build of the <a href="download.html">0.2.0
-        Windstille release</a>, known bugs for that release include
+          Windstille release</a>, known bugs for that release include
         the lack of the exit-trigger, so once you have reached the
         exit, you have to press Escape.
       </item>
 
       <item date="02. Feb 2004">
         Added another, a bit more detailed, <a
-        href="images/artwork10.jpg">artwork of the Windstille
-        hero</a>. Win32 release will hopefully follow real soon. Hint:
+                                               href="images/artwork10.jpg">artwork of the Windstille
+          hero</a>. Win32 release will hopefully follow real soon. Hint:
         If anybody wants to help maintaining the Win32 builds and thus
         lead to faster release cycles and less workload on myself,
         tools for doing that (MinGW, ClanLib, Voribs, etc.) are all
@@ -117,7 +122,7 @@
 	but it should ensure that following Windows ports should be doable
 	in relativly small amounts of time.
       </item>
-    
+      
       <item date="13. Aug 2003">
         <a href="download.html">Windstille 0.1.0</a> is out, both the
         full source and a static binary for GNU/Linux are provided,
@@ -128,13 +133,13 @@
 
       <item date="09. Aug 2003">
         Added a few <a href="screenshots.html#pseudoscreen">pseudo
-        screenshots</a>, aka artworks that use in-game graphics and a
+          screenshots</a>, aka artworks that use in-game graphics and a
         few other things to emulate special effects.
       </item>
 
       <item date="07. Aug 2003">
         Added a few <a href="screenshots.html#posingtest">posing
-        tests</a>, rewrote the <a href="index.html">introduction</a>.
+          tests</a>, rewrote the <a href="index.html">introduction</a>.
       </item>
 
       <item date="04. Aug 2003">



From grumbel at mail.berlios.de  Sun Feb 15 17:09:33 2009
From: grumbel at mail.berlios.de (grumbel at BerliOS)
Date: Sun, 15 Feb 2009 17:09:33 +0100
Subject: [Windstille-commit] r2503 - trunk/htdocs
Message-ID: <200902151609.n1FG9Xnv032298@sheep.berlios.de>

Author: grumbel
Date: 2009-02-15 17:09:33 +0100 (Sun, 15 Feb 2009)
New Revision: 2503

Modified:
   trunk/htdocs/news.xml
Log:
--- some unknown new stuff (automatically inserted by the upload script) ---

Modified: trunk/htdocs/news.xml
===================================================================
--- trunk/htdocs/news.xml	2009-02-15 16:05:31 UTC (rev 2502)
+++ trunk/htdocs/news.xml	2009-02-15 16:09:33 UTC (rev 2503)
@@ -5,7 +5,9 @@
     <news>
       <item date="15. Feb 2009">
         Some Windstille development is going on again, check out the 
-        <a href="http://grumbel.blogspot.com/search/label/Windstille">Blog</a>.
+        <a href="http://grumbel.blogspot.com/search/label/Windstille">Blog</a>. Windstille
+        Wiki is going to be restructured, so its not updated anymore
+        at the moment.
       </item>
 
       <item date="20. Oct 2007">



From grumbel at mail.berlios.de  Mon Feb 16 23:19:04 2009
From: grumbel at mail.berlios.de (grumbel at BerliOS)
Date: Mon, 16 Feb 2009 23:19:04 +0100
Subject: [Windstille-commit] r2505 - in trunk/media/wiki: . obsolete
Message-ID: <200902162219.n1GMJ405022821@sheep.berlios.de>

Author: grumbel
Date: 2009-02-16 23:19:03 +0100 (Mon, 16 Feb 2009)
New Revision: 2505

Added:
   trunk/media/wiki/Blender.wiki
   trunk/media/wiki/Blender2WSprite.wiki
   trunk/media/wiki/Characters.wiki
   trunk/media/wiki/Drawing Model.wiki
   trunk/media/wiki/Locations.wiki
   trunk/media/wiki/Navigation Mesh.wiki
   trunk/media/wiki/Sprite.wiki
   trunk/media/wiki/TODO
   trunk/media/wiki/Vehicles.wiki
   trunk/media/wiki/WSprite.wiki
   trunk/media/wiki/Weapons.wiki
   trunk/media/wiki/Windstille.wiki
Removed:
   trunk/media/wiki/Index.wiki
   trunk/media/wiki/Windstille Drawing Model.wiki
   trunk/media/wiki/models.txt
   trunk/media/wiki/obsolete/Blender.wiki
   trunk/media/wiki/obsolete/Characters.wiki
   trunk/media/wiki/obsolete/Locations.wiki
   trunk/media/wiki/wsprite_fileformat.txt
Modified:
   trunk/media/wiki/Particles.wiki
   trunk/media/wiki/default.css
   trunk/media/wiki/template.xml
   trunk/media/wiki/wiki2html.py
Log:
Some more reorganisation

Copied: trunk/media/wiki/Blender.wiki (from rev 2504, trunk/media/wiki/obsolete/Blender.wiki)

Added: trunk/media/wiki/Blender2WSprite.wiki
===================================================================
--- trunk/media/wiki/Blender2WSprite.wiki	2009-02-16 21:22:36 UTC (rev 2504)
+++ trunk/media/wiki/Blender2WSprite.wiki	2009-02-16 22:19:03 UTC (rev 2505)
@@ -0,0 +1,62 @@
+{{{
+Notes about blender models:
+
+- You can install the exporter by placing it in your $HOME/.blender/scripts
+  directory. Best would be to create a symlink:
+  
+     ln -s contrib/windstille_exporter.py $HOME/.blender/scripts
+     
+- 1 blender unit corresponds to 32pixels in game
+  (if you use the default 800x600 game resolution)
+- When looking at a character turned left from the side, coordinate axes are:
+    z -> up
+    y -> right
+    x -> front
+  (the exporter will convert these to windstille coordinates which are
+   x->right, y -> down, z -> back)
+- Each blender object should use the same texture on all it's faces.
+   (you can have multiple objects per model of course)
+- You should animate your models with armatures. The exporter will grab all
+  defined actions for the armature and export these. You are only allowed to
+  have 1 armature object in the scene at the moment
+- Empty Objects whose names start with A: are exported as attachement points
+- Take a look at the console output to see warnings and errors from the script
+- You should specify additional attributes for the actions by creating a blender
+  textobject with name "actionconfig". You can then specify lines like this
+  (this example states that for action MyActionName frames 5 - 40 should be
+   exported every 8th frame should be exported and the animation should be
+   played back with speed 5.7 later. The speed and samplerate part are optional)
+
+  # Sampe actionconfig file
+
+  MyActionName 5 - 40
+  AnotherAction 1 - 30 speed 5.0
+
+  You can append additional options at the line. They are each optional but you
+  have to specify them in this order.
+    speed FLOAT_NUMBER      the default fps speed the animation should be played
+    samplerate INT_NUMBER   only sample every nth frame in blender
+    marker NAME INT_NUMBER  remembers a named marker at a specific frame. These
+                            markers will be used by the program for purposes
+                            like finding out when you can safely change
+                            animations. You can specify multiple markers.
+
+- Windstille has some keys that make debugging animations alot easier:
+    Numpad 2,4,6,8 can be used to move the camera around
+    Numpad +,- zoom in and out.
+    Numpad 1,3 slow down and accelerate the game
+
+    So you can easily zoom in and watch your animation in slow motion with
+    these keys.
+
+(- Only for information you don't have to care about this: UVs in blender are
+    u -> right
+    v -> up
+  UVs in windstille are
+    u -> right
+    v -> down
+  Rotations from windstille rotation compared with blender rotations:
+    ws.x = blend.y
+    ws.y = blend.z
+    ws.z = blend.x )
+}}}

Copied: trunk/media/wiki/Characters.wiki (from rev 2504, trunk/media/wiki/obsolete/Characters.wiki)

Copied: trunk/media/wiki/Drawing Model.wiki (from rev 2504, trunk/media/wiki/Windstille Drawing Model.wiki)

Deleted: trunk/media/wiki/Index.wiki
===================================================================
--- trunk/media/wiki/Index.wiki	2009-02-16 21:22:36 UTC (rev 2504)
+++ trunk/media/wiki/Index.wiki	2009-02-16 22:19:03 UTC (rev 2505)
@@ -1,26 +0,0 @@
-= Structure of the Wiki
-
-== Plot/Story
-
-* [[Backstory]]
-* [[Characters]]
-* [[Weapons]]
-* [[Vehicles]]
-* [[Locations]]
-
-== Engine
-
-* [[Particles]]
-* [[Navigation Mesh]]
-* [[Scripting]]
-* [[Drawing Model]]
-* [[Editor]]
-* Sector
-* Scene
-
-
-== Misc
-
-* [[PDA]]
-
-# EOF #

Copied: trunk/media/wiki/Locations.wiki (from rev 2504, trunk/media/wiki/obsolete/Locations.wiki)

Added: trunk/media/wiki/Navigation Mesh.wiki
===================================================================

Modified: trunk/media/wiki/Particles.wiki
===================================================================
--- trunk/media/wiki/Particles.wiki	2009-02-16 21:22:36 UTC (rev 2504)
+++ trunk/media/wiki/Particles.wiki	2009-02-16 22:19:03 UTC (rev 2505)
@@ -1,6 +1,59 @@
 ToDo: Document current particle systems and document possible
 shortcommings and missing features
 
-= Drawer
+== Drawer
 
-= Variables
+== Variables
+
+== Example
+
+{{{
+;; -*- scheme -*-
+
+(particle-systems
+ ;; Fire sparks
+ (particle-system
+  (drawer (spark-drawer (color 1.0 0.5 0.5)))
+  (z-pos 900)
+  (pos 0 32)
+  (layer "highlight")
+  (velocity 400 650)
+  (cone -115 -65)
+  (gravity 0  1)
+  (distribution (line-distribution (x1 -50)  (y1 0) (x2 50) (y2 0))))
+  
+ ;; Fire smoke
+ (particle-system
+  (pos 0 32)
+  (lifetime 8)
+  (count 30)
+  (z-pos -200)
+  (drawer (surface-drawer (image "images/particles/smoke2.png")
+                          (blendfunc-src "src_alpha")
+                          (blendfunc-dst "one_minus_src_alpha")))
+  (velocity 10 20)
+  (cone -115 -65)
+  (gravity 0 -0.05)
+  (size 1.0 3.0)
+  (distribution (line-distribution (x1 -50) (y1 0) (x2 50) (y2 0))))
+ 
+ 
+ ;; Fire itself
+ (particle-system
+  (pos 0 0)
+  (count 75)
+  (z-pos 1000)
+  (layer "highlight")
+  (velocity 200 300)
+  (cone -95 -85)
+  (gravity 0 -0.05)
+  (size 1.5 1.0)
+  (distribution (line-distribution (x1 -50) (y1 0) (x2 50) (y2 0)))
+  (drawer (surface-drawer (image "images/particles/smoke.png")
+                          (blendfunc-src "src_alpha")
+                          (blendfunc-dst "one"))))
+)
+
+;; EOF ;;
+}}}
+ 
\ No newline at end of file

Added: trunk/media/wiki/Sprite.wiki
===================================================================
--- trunk/media/wiki/Sprite.wiki	2009-02-16 21:22:36 UTC (rev 2504)
+++ trunk/media/wiki/Sprite.wiki	2009-02-16 22:19:03 UTC (rev 2505)
@@ -0,0 +1,24 @@
+= C++ Specification:
+
+{{{
+SpriteAction:
+  std::string name;
+  float       speed;
+  Vector2f    offset;
+  float       scale;
+
+SpriteData:
+  SpriteAction[] actions;
+}}}
+
+= .sprite File Format:
+
+{{{
+(sprite
+  (action
+    (name "default")
+    (images "streetlamp-highlight.png")
+    (offset -111 -215)
+  )
+)
+}}}
\ No newline at end of file

Added: trunk/media/wiki/TODO
===================================================================
--- trunk/media/wiki/TODO	2009-02-16 21:22:36 UTC (rev 2504)
+++ trunk/media/wiki/TODO	2009-02-16 22:19:03 UTC (rev 2505)
@@ -0,0 +1,5 @@
+Somebody is eating up empty in {{{ }}} sections
+
+ http://creoleparser.googlepages.com/CheatSheetPlus.html
+
+Do something with actions.dia
\ No newline at end of file

Added: trunk/media/wiki/Vehicles.wiki
===================================================================

Added: trunk/media/wiki/WSprite.wiki
===================================================================
--- trunk/media/wiki/WSprite.wiki	2009-02-16 21:22:36 UTC (rev 2504)
+++ trunk/media/wiki/WSprite.wiki	2009-02-16 22:19:03 UTC (rev 2505)
@@ -0,0 +1,40 @@
+{{{
+Header
+    char     magic[4] (= W3DS)
+    uint16_t format_version      (=2 at the moment)
+    uint16_t mesh_count
+    uint16_t attachement_point_count
+    uint16_t action_count
+
+Mesh Header (x mesh_count)
+    char     texturename[64]
+    uint16_t triangle_count
+    uint16_t vertex_count
+
+    uint16_t vertexnum    (x 3*triangle_count) # three vertex indexes per face
+    float    normal[3]    (x triangle_count)   # one normal per face
+    float    texcoord[2]  (x vertex_count)     # one uv coordinate per vertex
+
+Attachement Point Header x attachement_point_count
+    char name[64]
+
+Action Header (x action_count)
+    char     name[64]
+    float    speed
+    uint16_t marker_count
+    uint16_t frame_count
+
+  Marker (x marker_count)
+    char     name[64]
+    uint16_t frame_count
+
+  MeshData (x frame_count)
+    (x frame_count)
+      (x mesh_count)
+        (x mesh.vertex_count)
+          float[3] vertex_location
+
+      (x attachement_point_count)
+        float locX, locY, locZ
+        float rotW, rotX, rotY, rotZ (it's a quaternion)
+}}}

Added: trunk/media/wiki/Weapons.wiki
===================================================================

Deleted: trunk/media/wiki/Windstille Drawing Model.wiki
===================================================================
--- trunk/media/wiki/Windstille Drawing Model.wiki	2009-02-16 21:22:36 UTC (rev 2504)
+++ trunk/media/wiki/Windstille Drawing Model.wiki	2009-02-16 22:19:03 UTC (rev 2505)
@@ -1,81 +0,0 @@
-= Drawing Operations =
-To bring images on screen you have to execute drawing operations. There are several different types of drawing operations. Each of them depend on a number of parameters.
-
-== Common Parameters ==
-These parameters are used for all drawing operations
-* Position, Rotation, Scale -- These 3 values together are called a modelview transform and are encoded as a 4x4 Matrix
-* Color -- the color is multiplied with each pixel that is drawn
-* blend_sfactor, blend_dfactor -- factors that are used for blending pixels with alpha values on screen (see glBlendFunc for details)
-
-== Text ==
-Writes text on the screen. Parameters:
-* Font -- The font that is used to write the characters (the font has additional attributes like color of the text)
-
-== Surface ==
-Draws a 2d bitmap (called Surface) on screen. Parameters:
-* Surface -- a pointer to a surface (a surface contains the opengl texture handle and uv coordinates)
-
-== Sprite3D ==
-Draws a 3d model on screen. See Sprite3D class for more details. Parameters:
-* Sprite3D -- the 3d sprite that should be drawn
-
-== VertexArray ==
-Executes a drawing command for opengl primiteves. (Typically used for GL_QUAD and GL_TRIANGLE)
-* texture -- texture handle of the opengl texture
-* type -- opengl primitive type
-* vertex list
-* normal list (optional, specified per vertex)
-* color list (optional, specified per vertex)
-
-= State Model and Transform Stack =
-When looking at typical code that does drawing operations, one observes that the
-common parameters are often the same for several drawing operations. It is convenient to 
-not have to specify all parameters again and again for each
-drawing operation. So we created a state machine that maintains a "current" value
-for each of the common parameters.
-
-You can also observe that most of the time the things you want to draw are
-given in a local coordinate system only. Typically you apply a "camera"
-transform to them or have even deeper parent/child relations where the
-coordinate system is relative to the parent. These cases can nicely be handled
-by a stack for the Position, Rotate and Scale attributes. Positions, Rotations
-and Scales are now specified relative to the topmost stack element. You can now simply push
-the transformation from child coordinate system to parent coordinate system on the stack
-and draw all childs in their own coordinate system.
-
-= Foreground/Background and Z-Positions =
-We're presenting a (pseudo) 3d dimensional world on a 2d dimensional screen.
-Handling Foreground and Background requires us to sort the Drawing Operations
-so that stuff in the foreground is drawn after stuff in the background and
-obscures the background.
-
-It's very difficult to enforce a certain drawing order in the code, so we're
-introducing the concept of a z-position. DrawingOperations with higher
-z-positions will be executed after drawing operations with lower z-positions.
-This means that we can't execute the drawing operations imediately anymore, but
-we have to store the information needed to execute them. We call this info a
-Drawing Request. We fill a list with all Drawing Requests and sort them
-according to their z-positions and finally execute them in the correct order.
-
-= Implementation =
-The basic block of the implementation is the DrawingRequest class. It stores all
-information needed to execute a drawing operation. You can create custom subclasses from this class and override
-the draw() function to execute your custom drawing operations. You can expect
-that all common parameters that are maintained by the DrawingContext are already
-setup when the draw() function is called.
-
-The DrawingContext class is responsible for the state management and maintains
-the modelview transform stack.
-
-= Optimisations =
-To correctly implement the drawing operations we have to create snaphots of the
-current drawing state and append it to all DrawingRequests. You can observe that
-for most drawing operations in a typical scene these snapshots contain identical
-values except for the position.
-
-So we factor out the modelview and color+blendfunctions used in DrawingRequests
-to point to a shared block that is used by multiple Drawing Requests. This not
-only reduces memory consumption but also allows for more efficient restoring of
-the drawing state in opengl. As we can now compare the pointers of the
-ModelView and color+blenfunc objects and only reset these values if the
-pointers are different.
\ No newline at end of file

Copied: trunk/media/wiki/Windstille.wiki (from rev 2504, trunk/media/wiki/Index.wiki)
===================================================================
--- trunk/media/wiki/Index.wiki	2009-02-16 21:22:36 UTC (rev 2504)
+++ trunk/media/wiki/Windstille.wiki	2009-02-16 22:19:03 UTC (rev 2505)
@@ -0,0 +1,27 @@
+== Plot/Story
+
+* [[Backstory]]
+* [[Characters]]
+* [[Weapons]]
+* [[Vehicles]]
+* [[Locations]]
+
+== Engine
+
+* [[Particles]]
+* [[Navigation Mesh]]
+* [[Scripting]]
+* [[Drawing Model]]
+* [[Editor]]
+
+== Misc
+
+* [[PDA]]
+
+== File Formats
+
+* [[Blender]]
+* [[Blender2WSprite]]
+* [[WSprite]]
+* [[Sprite]]
+


Property changes on: trunk/media/wiki/Windstille.wiki
___________________________________________________________________
Name: svn:mergeinfo
   + 

Modified: trunk/media/wiki/default.css
===================================================================
--- trunk/media/wiki/default.css	2009-02-16 21:22:36 UTC (rev 2504)
+++ trunk/media/wiki/default.css	2009-02-16 22:19:03 UTC (rev 2505)
@@ -39,7 +39,7 @@
   border-width: thin;
   border-color: rgb(150, 150, 150);
   background: rgb(220, 220, 220);
-  white-space: pre-wrap;
+  white-space: pre;
 
   margin-left: 1em;
   margin-right: 1em;

Deleted: trunk/media/wiki/models.txt
===================================================================
--- trunk/media/wiki/models.txt	2009-02-16 21:22:36 UTC (rev 2504)
+++ trunk/media/wiki/models.txt	2009-02-16 22:19:03 UTC (rev 2505)
@@ -1,60 +0,0 @@
-Notes about blender models:
-
-- You can install the exporter by placing it in your $HOME/.blender/scripts
-  directory. Best would be to create a symlink:
-  
-     ln -s contrib/windstille_exporter.py $HOME/.blender/scripts
-     
-- 1 blender unit corresponds to 32pixels in game
-  (if you use the default 800x600 game resolution)
-- When looking at a character turned left from the side, coordinate axes are:
-    z -> up
-    y -> right
-    x -> front
-  (the exporter will convert these to windstille coordinates which are
-   x->right, y -> down, z -> back)
-- Each blender object should use the same texture on all it's faces.
-   (you can have multiple objects per model of course)
-- You should animate your models with armatures. The exporter will grab all
-  defined actions for the armature and export these. You are only allowed to
-  have 1 armature object in the scene at the moment
-- Empty Objects whose names start with A: are exported as attachement points
-- Take a look at the console output to see warnings and errors from the script
-- You should specify additional attributes for the actions by creating a blender
-  textobject with name "actionconfig". You can then specify lines like this
-  (this example states that for action MyActionName frames 5 - 40 should be
-   exported every 8th frame should be exported and the animation should be
-   played back with speed 5.7 later. The speed and samplerate part are optional)
-
-  # Sampe actionconfig file
-
-  MyActionName 5 - 40
-  AnotherAction 1 - 30 speed 5.0
-
-  You can append additional options at the line. They are each optional but you
-  have to specify them in this order.
-    speed FLOAT_NUMBER      the default fps speed the animation should be played
-    samplerate INT_NUMBER   only sample every nth frame in blender
-    marker NAME INT_NUMBER  remembers a named marker at a specific frame. These
-                            markers will be used by the program for purposes
-                            like finding out when you can safely change
-                            animations. You can specify multiple markers.
-
-- Windstille has some keys that make debugging animations alot easier:
-    Numpad 2,4,6,8 can be used to move the camera around
-    Numpad +,- zoom in and out.
-    Numpad 1,3 slow down and accelerate the game
-
-    So you can easily zoom in and watch your animation in slow motion with
-    these keys.
-
-(- Only for information you don't have to care about this: UVs in blender are
-    u -> right
-    v -> up
-  UVs in windstille are
-    u -> right
-    v -> down
-  Rotations from windstille rotation compared with blender rotations:
-    ws.x = blend.y
-    ws.y = blend.z
-    ws.z = blend.x )

Deleted: trunk/media/wiki/obsolete/Blender.wiki
===================================================================
--- trunk/media/wiki/obsolete/Blender.wiki	2009-02-16 21:22:36 UTC (rev 2504)
+++ trunk/media/wiki/obsolete/Blender.wiki	2009-02-16 22:19:03 UTC (rev 2505)
@@ -1,20 +0,0 @@
-There are plenty of ways to construct Blender models (*.blend) in a way that they don't work properly on other machines, this text shall give a little guideline on things to keep in mind.
-
-== Textures ==
-
-* The path to the texture must be relative, not absolute, this can be accomplished with the "Relative Path" option in the file dialog when selecting a texture
-* Images must not be packed, the texture screen (Shift-F10) has a toggle button for that
-
-== Links ==
-
-
-
-== Armatures ==
-
-Armatures and character models should stay seperate.
-
-
-== Lighting ==
-
-Since the models are meant to be used in a game, all the lighting is the job of the game engine, not the .blend file. Model files should thus be free of light sources.
-

Deleted: trunk/media/wiki/obsolete/Characters.wiki
===================================================================
--- trunk/media/wiki/obsolete/Characters.wiki	2009-02-16 21:22:36 UTC (rev 2504)
+++ trunk/media/wiki/obsolete/Characters.wiki	2009-02-16 22:19:03 UTC (rev 2505)
@@ -1,43 +0,0 @@
-No names have yet been selected for the different characters, so fell free to suggest some.
-
-= Player (Jane) =
-
-http://windstille.berlios.de/images/artwork13_small.jpg
-
-Relativly new in the mercenary business, started to hire at Northern Star when she turned 18, wanted to get away from home as quickly as possible, wanted to see the stars, visit other worlds and the like. Worked as miner for some years now, visited a bunch of colonies, however quickly become sick of the mining business. She is now out of the mining business and tries to start a new living here on this colonie.
-
-= AI =
-
-The controller programm of the Virtual Reality, has some intelligence and personality on his own.
-
-= Pilot =
-
-The person who controls the shuttle and brings Jane to wherever she needs to go. Might actually be Yagor himself, not yet decided.
-
-=Boss (Yagor)=
-http://pingus.seul.org/~grumbel/tmp/windstille-yagor-small.png
-
-The person for which Jane works. Has been in the merc business for a while and has worked for a short period of time together with Sophie, before she went solo. Somewhat of a father person to Jane.
-
-= Veteran (Sophie) =
-
-http://windstille.berlios.de/images/artwork11_small.jpg
-
-Veteran in the mercenary work, has worked on a bunch of different colonies and has been on this one for quite some years. She knows how stuff works here and how to get what is needed. Has lots of connections to different people around on this colonie. For most part see prefers to work alone. Tough women overall.
-
-= Jeff =
-http://pingus.seul.org/~grumbel/tmp/windstille-jeff.png
-
-A sunnyboy, always sees the bright side of life. He works in the same business as Jane and every once in a while they clash together. While Jane might not like him much, Jeff sees their relationship a little differently.
-
-= Barkeeper (Bob) =
-
-http://windstille.berlios.de/images/barkeeper_small.jpg
-
-A valuable informant in this city. He knows most people around and he knows where the good jobs are to find. If something is happening his bar is the place where people exchange information. He might not be the most friendly looking guy, but once you know him for a while one shouldn't have to much throuble to get along with him. He tries his best to keep his bar a save place.
-
-= Mineral Worker =
-
-http://windstille.berlios.de/images/worker_small.jpg
-
-One of the many contract workers which work for the Northern Star Mining cooroperation. The NSM often hires people and send them out to the different colonies to dig for resources. Their income is connected to the amount of resources which they collect, so if stuff doesn't work that right, they might quickly lose interesting, since only resources bring them income. Most of the time they are send out to a colonie for a few weeks or month, then send to another one, once the given resource region is harvested. Overall they can be hard workers, but only if the resources can motivate them.
\ No newline at end of file

Deleted: trunk/media/wiki/obsolete/Locations.wiki
===================================================================
--- trunk/media/wiki/obsolete/Locations.wiki	2009-02-16 21:22:36 UTC (rev 2504)
+++ trunk/media/wiki/obsolete/Locations.wiki	2009-02-16 22:19:03 UTC (rev 2505)
@@ -1,41 +0,0 @@
-Realistically, milestone 1 is only going to be able to have a very limited number of locations. This is an attempt to keep track of what locations we actually intend to create  - which requires art, level design, coding the required game objects, populating the location with characters and bad guys, and including the location in the plot.
-
-== VR Training ==
-
-* Used for the opening tutorial for the game.
-
-* provides a number of sub rooms to allow the player to train all kinds of stuff
-
-== City ==
-
-* Jane's apartment
-
-This is where the game opens. Perhaps it could be reused for other things, too?
-
-* Street / roof tops
-
-Maybe we will have a sector that just represents walking about the city? I don't know.
-
-* Bar
-
-Used for meeting some of the characters, perhaps you may go here for jobs, or whatever.
-
-* Train station
-
-Maybe this isn't needed, but we have a train model and train stations are a good location for meeting characters and travelling, and they also add to the feel that you are in a living city.
-
-* Shuttle port
-
-Where you get on shuttles to take you away from the city
-
-== Forest ==
-
-This is where the Milestone 1 powersuit mission takes place.
-
-* Above ground
-
-Will contain trees, and maybe some swamp or something too. The idea seems to be that on the forest surface your enemies are the local wildlife, not humans or aliens or whatever. The final boss is a huge spider (though they could be put below ground, see below)
-
-* Underground
-
-Both man made mines and natural labyrinth. Quite possibly it will contain some robots of various sorts for bad guys, perhaps also spiders.
\ No newline at end of file

Modified: trunk/media/wiki/template.xml
===================================================================
--- trunk/media/wiki/template.xml	2009-02-16 21:22:36 UTC (rev 2504)
+++ trunk/media/wiki/template.xml	2009-02-16 22:19:03 UTC (rev 2505)
@@ -18,7 +18,7 @@
     </div>
     <div id="navbar">
       <a href="News.html">News</a> |
-      <a href="Main Page.html">Main Page</a><br/>
+      <a href="Windstille.html">Index</a><br/>
     </div>
     <div id="body">
       <h1>${title}</h1>

Modified: trunk/media/wiki/wiki2html.py
===================================================================
--- trunk/media/wiki/wiki2html.py	2009-02-16 21:22:36 UTC (rev 2504)
+++ trunk/media/wiki/wiki2html.py	2009-02-16 22:19:03 UTC (rev 2505)
@@ -11,7 +11,7 @@
 def file2string(filename):
     f = open(filename)
     s = f.read()
-    f.close()   
+    f.close()
     return s
 
 class Wiki2HTML:

Deleted: trunk/media/wiki/wsprite_fileformat.txt
===================================================================
--- trunk/media/wiki/wsprite_fileformat.txt	2009-02-16 21:22:36 UTC (rev 2504)
+++ trunk/media/wiki/wsprite_fileformat.txt	2009-02-16 22:19:03 UTC (rev 2505)
@@ -1,41 +0,0 @@
-Header
-    char     magic[4] (= W3DS)
-    uint16_t format_version      (=2 at the moment)
-    uint16_t mesh_count
-    uint16_t attachement_point_count
-    uint16_t action_count
-
-Mesh Header (x mesh_count)
-    char     texturename[64]
-    uint16_t triangle_count
-    uint16_t vertex_count
-
-    uint16_t vertexnum    (x 3*triangle_count) # three vertex indexes per face
-    float    normal[3]    (x triangle_count)   # one normal per face
-    float    texcoord[2]  (x vertex_count)     # one uv coordinate per vertex
-
-Attachement Point Header x attachement_point_count
-    char name[64]
-
-Action Header (x action_count)
-    char     name[64]
-    float    speed
-    uint16_t marker_count
-    uint16_t frame_count
-
-  Marker (x marker_count)
-    char     name[64]
-    uint16_t frame_count
-
-  MeshData (x frame_count)
-    (x frame_count)
-      (x mesh_count)
-        (x mesh.vertex_count)
-          float[3] vertex_location
-
-      (x attachement_point_count)
-        float locX, locY, locZ
-        float rotW, rotX, rotY, rotZ (it's a quaternion)
-
-
-# EOF #



From grumbel at mail.berlios.de  Mon Feb 16 22:22:40 2009
From: grumbel at mail.berlios.de (grumbel at BerliOS)
Date: Mon, 16 Feb 2009 22:22:40 +0100
Subject: [Windstille-commit] r2504 - in trunk/media/wiki: . obsolete
Message-ID: <200902162122.n1GLMeBc016592@sheep.berlios.de>

Author: grumbel
Date: 2009-02-16 22:22:36 +0100 (Mon, 16 Feb 2009)
New Revision: 2504

Added:
   trunk/media/wiki/Actions.wiki
   trunk/media/wiki/Backstory.wiki
   trunk/media/wiki/Drawing Primitives.wiki
   trunk/media/wiki/Editor.wiki
   trunk/media/wiki/Fighting.wiki
   trunk/media/wiki/Graphics.wiki
   trunk/media/wiki/Index.wiki
   trunk/media/wiki/PDA.wiki
   trunk/media/wiki/Particles.wiki
   trunk/media/wiki/Rebirth.wiki
   trunk/media/wiki/Scripting.wiki
   trunk/media/wiki/Windstille Drawing Model.wiki
   trunk/media/wiki/obsolete/
   trunk/media/wiki/obsolete/Basic Features.wiki
   trunk/media/wiki/obsolete/Blender.wiki
   trunk/media/wiki/obsolete/Characters.wiki
   trunk/media/wiki/obsolete/Collision Detection.wiki
   trunk/media/wiki/obsolete/Controls.wiki
   trunk/media/wiki/obsolete/Design Discussion CheckList.wiki
   trunk/media/wiki/obsolete/Dialog.wiki
   trunk/media/wiki/obsolete/GUI.wiki
   trunk/media/wiki/obsolete/Getting Started.wiki
   trunk/media/wiki/obsolete/IRC Meeting 1.wiki
   trunk/media/wiki/obsolete/IRC Meeting 2 Brainstorming Summary.wiki
   trunk/media/wiki/obsolete/IRC Meeting 2.wiki
   trunk/media/wiki/obsolete/Ideas.wiki
   trunk/media/wiki/obsolete/Jobs.wiki
   trunk/media/wiki/obsolete/Level Format.wiki
   trunk/media/wiki/obsolete/Locations.wiki
   trunk/media/wiki/obsolete/Main Page.wiki
   trunk/media/wiki/obsolete/News.wiki
   trunk/media/wiki/obsolete/Overview.wiki
   trunk/media/wiki/obsolete/People.wiki
   trunk/media/wiki/obsolete/Plot Events.wiki
   trunk/media/wiki/obsolete/Plot.wiki
   trunk/media/wiki/obsolete/Prefab.wiki
   trunk/media/wiki/obsolete/Prototypes.wiki
   trunk/media/wiki/obsolete/Roadmap.wiki
   trunk/media/wiki/obsolete/Similar Games.wiki
   trunk/media/wiki/obsolete/Sprite Format.wiki
   trunk/media/wiki/obsolete/Talk:Collision Detection.wiki
   trunk/media/wiki/obsolete/Talk:Dialog.wiki
   trunk/media/wiki/obsolete/Talk:Graphics.wiki
   trunk/media/wiki/obsolete/Tile Specification Format.wiki
   trunk/media/wiki/obsolete/Tilemap.wiki
Removed:
   trunk/media/wiki/Actions.wiki
   trunk/media/wiki/Backstory.wiki
   trunk/media/wiki/Basic Features.wiki
   trunk/media/wiki/Blender.wiki
   trunk/media/wiki/Characters.wiki
   trunk/media/wiki/Collision Detection.wiki
   trunk/media/wiki/Controls.wiki
   trunk/media/wiki/Design Discussion CheckList.wiki
   trunk/media/wiki/Dialog.wiki
   trunk/media/wiki/Fighting.wiki
   trunk/media/wiki/GUI.wiki
   trunk/media/wiki/Getting Started.wiki
   trunk/media/wiki/Graphics.wiki
   trunk/media/wiki/IRC Meeting 1.wiki
   trunk/media/wiki/IRC Meeting 2 Brainstorming Summary.wiki
   trunk/media/wiki/IRC Meeting 2.wiki
   trunk/media/wiki/Ideas.wiki
   trunk/media/wiki/Jobs.wiki
   trunk/media/wiki/Level Format.wiki
   trunk/media/wiki/Locations.wiki
   trunk/media/wiki/Main Page.wiki
   trunk/media/wiki/News.wiki
   trunk/media/wiki/Overview.wiki
   trunk/media/wiki/PDA.wiki
   trunk/media/wiki/People.wiki
   trunk/media/wiki/Plot Events.wiki
   trunk/media/wiki/Plot.wiki
   trunk/media/wiki/Prefab.wiki
   trunk/media/wiki/Prototypes.wiki
   trunk/media/wiki/Rebirth.wiki
   trunk/media/wiki/Roadmap.wiki
   trunk/media/wiki/Scripting.wiki
   trunk/media/wiki/Similar Games.wiki
   trunk/media/wiki/Sprite Format.wiki
   trunk/media/wiki/Talk:Collision Detection.wiki
   trunk/media/wiki/Talk:Dialog.wiki
   trunk/media/wiki/Talk:Graphics.wiki
   trunk/media/wiki/Tile Specification Format.wiki
   trunk/media/wiki/Tilemap.wiki
   trunk/media/wiki/Windstille Drawing Model.wiki
Log:
Moved lots of wiki pages to obsolete/, trying to start with a clean slate

Deleted: trunk/media/wiki/Actions.wiki
===================================================================
--- trunk/media/wiki/Actions.wiki	2009-02-15 16:09:33 UTC (rev 2503)
+++ trunk/media/wiki/Actions.wiki	2009-02-16 21:22:36 UTC (rev 2504)
@@ -1,141 +0,0 @@
-The game has basically 3 different control modes, one is with the powersuit, one is for player without the powersuit and a seperate mode is there for the player with his weapon equiped without the powersuit.
-
-== Moving around without a gun / Adventure Mode
-
-Moving around without the gun puts you basically into an adventure-mode, ie. a mode where you don't spend most of your time fighting, but talking to people, exploring city, factories and stuff.
-
-== Gunfights without the powersuit
-
-When you meet somebody in the adventure mode that you need to fight, you have the ability to draw your gun.  This mode should focus on allowing the player to perform a close-distance gun fight, walking/jumping in this mode is limited to what makes sense with a drawn gun.
-
-== Fighting with the powersuit
-
-When you have the powersuit equiped the gameplay changes quite a bit in that it gives you much more strength, higher jumps, power for your weapons and simply different weapons. However the powersuit is not allowed in some areas and won't be of much use in other, ie. when you want to sneak into enemy territory. The powersuit will also not be available at its full strength from the beginning of the game.
-
-== Movement
-
-Below follows some older information which was previously at the webpage, might not be 100% accurate as to what is planed and might need further cleanup
-
-=== Jumps
-=== Sit
-
-http://windstille.berlios.de/images/sit.jpg
-
-=== Run/Walk
-
-We might have seperate walk and run actions (basically like in Super Mario), don't know if that will work out well, so we might end up with only a run action.
-
-=== Hang
-
-http://windstille.berlios.de/images/posing4.jpg
-
-=== Climb
-
-The Hero should be able to climb both wall and roof ladders.
-
-http://windstille.berlios.de/images/posing2.jpg
-
-=== Swim/Underwater
-
-Swimming should basically be a 'endless' jump. You might also be able to simply walk underwater. [FIXME: This doesn't fit dogether with the otherwise planed realistic movement]
-Weapons
-
-Will we need different weapon stages like Turrican or static ones? (Weaponstage <-> Hero's energie!?)
-
-=== Jetpack
-
-The game will have a jetpack, I am currently not sure if we have it as a item which you can use all the time or just in some special events/levels.
-
-http://windstille.berlios.de/images/jetpack.png
-
-=== Actions Diagram
-
-The following diagram tries to illustrate possible actions and how the engine should switch between them.
-http://www.stud.uni-karlsruhe.de/~uxsm/windstille-actions.png
-
-== Shoot
-
-Should the hero be able to shoot in different directions or should be stick to a MegaMan like shooting?
-
-=== Surround
-
-Basically a turrican style surround shooting. Not sure how the thing will shoot (ice-freeze, flamethrower, normal). I kind of like it to behavice like a flamethrower to remove slime or other poison liquids on the ceiling or ground, which are immune against and unreachable with other weapons.
-
-http://windstille.berlios.de/images/surround.jpg
-
-
-=== Light/Torch
-
-http://windstille.berlios.de/images/flashlight.png
-http://windstille.berlios.de/images/flashlight2.png
-
-=== Machinegun
-
-http://windstille.berlios.de/images/machinegun.png
-
-=== Plasmagun
-
-http://windstille.berlios.de/images/plasmagun.png
-
-=== Lasergun
-=== Flamegun
-
-http://windstille.berlios.de/images/flamegun.png
-
-=== Rocketlauncher
-
-Rocketlauncher can hold missiles:
-
-* Missile
-* Homing Missile
-
-=== Smart Bomb - Shockwave
-
-Turrican 2 style, but maybe circular, which basically means that the bomb will not erase anything on the screen, but only these enemies which are reachable from the heros position.
-
-http://windstille.berlios.de/images/shockwave.jpg
-
-== Items
-
-* Power Up
-* Machinegun ammunition
-* Plasmagun ammunition
-* Laser energie
-
-== Enemies
-
-=== Respawn
-
-Big enemies, final bosses and similar things should not respawn. Small standard enemies should respawn at specific events (level/section change).
-Levels
-
-The game will not be sperated into normal levels, instead it will consist of 'sections', where one can more or less move freely around. Translating between section will be done via special events (like the water-thing in another world) or via doors (where one has to find the keys before passing them). Moving forward and backward should basically possible, but there might be points-of-no-return. Some kind of guidance system should always show you where to go, so that one doesn't lost himself in a level.
-
-== Different types of assault suits
-
-=== Standard
-
-=== Ice
-
-might protect against ice water and give better grip on ice
-
-=== Fire/Lava
-
-protect better against lava and hot regions
-
-=== Level File Format
-
-The level file format will be at its basic level tile based, support for multiple overlapping tiles would be nice, the tile size will be 128x128. In addition the map might support brushes, meaning you can insert (animated) surface objects at arbitrary positions, not sure how this will influence the collision map.
-
-A flewible controller api should be provided for remapping the buttons to specific gamepads.
-
-== Weapon Select
-
-* [[http://windstille.berlios.de/images/weaponitemselect.jpg]]
-
-== Animations
-
-* [[http://pingus.seul.org/~grumbel/tmp/windstille-files/anim1.png]]
-* [[http://pingus.seul.org/~grumbel/tmp/windstille-files/anim2.png]]
-* [[http://pingus.seul.org/~grumbel/tmp/windstille-files/anim3.png]]
-* [[http://pingus.seul.org/~grumbel/tmp/windstille-files/anim4.png]]
\ No newline at end of file

Added: trunk/media/wiki/Actions.wiki
===================================================================
--- trunk/media/wiki/Actions.wiki	2009-02-15 16:09:33 UTC (rev 2503)
+++ trunk/media/wiki/Actions.wiki	2009-02-16 21:22:36 UTC (rev 2504)
@@ -0,0 +1,141 @@
+The game has basically 3 different control modes, one is with the powersuit, one is for player without the powersuit and a seperate mode is there for the player with his weapon equiped without the powersuit.
+
+== Moving around without a gun / Adventure Mode
+
+Moving around without the gun puts you basically into an adventure-mode, ie. a mode where you don't spend most of your time fighting, but talking to people, exploring city, factories and stuff.
+
+== Gunfights without the powersuit
+
+When you meet somebody in the adventure mode that you need to fight, you have the ability to draw your gun.  This mode should focus on allowing the player to perform a close-distance gun fight, walking/jumping in this mode is limited to what makes sense with a drawn gun.
+
+== Fighting with the powersuit
+
+When you have the powersuit equiped the gameplay changes quite a bit in that it gives you much more strength, higher jumps, power for your weapons and simply different weapons. However the powersuit is not allowed in some areas and won't be of much use in other, ie. when you want to sneak into enemy territory. The powersuit will also not be available at its full strength from the beginning of the game.
+
+== Movement
+
+Below follows some older information which was previously at the webpage, might not be 100% accurate as to what is planed and might need further cleanup
+
+=== Jumps
+=== Sit
+
+http://windstille.berlios.de/images/sit.jpg
+
+=== Run/Walk
+
+We might have seperate walk and run actions (basically like in Super Mario), don't know if that will work out well, so we might end up with only a run action.
+
+=== Hang
+
+http://windstille.berlios.de/images/posing4.jpg
+
+=== Climb
+
+The Hero should be able to climb both wall and roof ladders.
+
+http://windstille.berlios.de/images/posing2.jpg
+
+=== Swim/Underwater
+
+Swimming should basically be a 'endless' jump. You might also be able to simply walk underwater. [FIXME: This doesn't fit dogether with the otherwise planed realistic movement]
+Weapons
+
+Will we need different weapon stages like Turrican or static ones? (Weaponstage <-> Hero's energie!?)
+
+=== Jetpack
+
+The game will have a jetpack, I am currently not sure if we have it as a item which you can use all the time or just in some special events/levels.
+
+http://windstille.berlios.de/images/jetpack.png
+
+=== Actions Diagram
+
+The following diagram tries to illustrate possible actions and how the engine should switch between them.
+http://www.stud.uni-karlsruhe.de/~uxsm/windstille-actions.png
+
+== Shoot
+
+Should the hero be able to shoot in different directions or should be stick to a MegaMan like shooting?
+
+=== Surround
+
+Basically a turrican style surround shooting. Not sure how the thing will shoot (ice-freeze, flamethrower, normal). I kind of like it to behavice like a flamethrower to remove slime or other poison liquids on the ceiling or ground, which are immune against and unreachable with other weapons.
+
+http://windstille.berlios.de/images/surround.jpg
+
+
+=== Light/Torch
+
+http://windstille.berlios.de/images/flashlight.png
+http://windstille.berlios.de/images/flashlight2.png
+
+=== Machinegun
+
+http://windstille.berlios.de/images/machinegun.png
+
+=== Plasmagun
+
+http://windstille.berlios.de/images/plasmagun.png
+
+=== Lasergun
+=== Flamegun
+
+http://windstille.berlios.de/images/flamegun.png
+
+=== Rocketlauncher
+
+Rocketlauncher can hold missiles:
+
+* Missile
+* Homing Missile
+
+=== Smart Bomb - Shockwave
+
+Turrican 2 style, but maybe circular, which basically means that the bomb will not erase anything on the screen, but only these enemies which are reachable from the heros position.
+
+http://windstille.berlios.de/images/shockwave.jpg
+
+== Items
+
+* Power Up
+* Machinegun ammunition
+* Plasmagun ammunition
+* Laser energie
+
+== Enemies
+
+=== Respawn
+
+Big enemies, final bosses and similar things should not respawn. Small standard enemies should respawn at specific events (level/section change).
+Levels
+
+The game will not be sperated into normal levels, instead it will consist of 'sections', where one can more or less move freely around. Translating between section will be done via special events (like the water-thing in another world) or via doors (where one has to find the keys before passing them). Moving forward and backward should basically possible, but there might be points-of-no-return. Some kind of guidance system should always show you where to go, so that one doesn't lost himself in a level.
+
+== Different types of assault suits
+
+=== Standard
+
+=== Ice
+
+might protect against ice water and give better grip on ice
+
+=== Fire/Lava
+
+protect better against lava and hot regions
+
+=== Level File Format
+
+The level file format will be at its basic level tile based, support for multiple overlapping tiles would be nice, the tile size will be 128x128. In addition the map might support brushes, meaning you can insert (animated) surface objects at arbitrary positions, not sure how this will influence the collision map.
+
+A flewible controller api should be provided for remapping the buttons to specific gamepads.
+
+== Weapon Select
+
+* [[http://windstille.berlios.de/images/weaponitemselect.jpg]]
+
+== Animations
+
+* [[http://pingus.seul.org/~grumbel/tmp/windstille-files/anim1.png]]
+* [[http://pingus.seul.org/~grumbel/tmp/windstille-files/anim2.png]]
+* [[http://pingus.seul.org/~grumbel/tmp/windstille-files/anim3.png]]
+* [[http://pingus.seul.org/~grumbel/tmp/windstille-files/anim4.png]]
\ No newline at end of file


Property changes on: trunk/media/wiki/Actions.wiki
___________________________________________________________________
Name: svn:mergeinfo
   + 

Deleted: trunk/media/wiki/Backstory.wiki
===================================================================
--- trunk/media/wiki/Backstory.wiki	2009-02-15 16:09:33 UTC (rev 2503)
+++ trunk/media/wiki/Backstory.wiki	2009-02-16 21:22:36 UTC (rev 2504)
@@ -1,93 +0,0 @@
-== 2025 - Landing on the Moon, again
-
-In preparation for the mission to Mars mankind planed a research mission to moon with the goal to setup a small colony 
-
-== 2032 - Landing on Mars
-
-Fifthy years late, but mankind had finally made it to Mars. The two year trip brought many new insights into long time travel and also ignited the interest in space colonisation again.
-
-== 2040 - Moon Colony
-
-The Moon colony, once started as a testbed for the Mars mission, was now nearing its 15 anniversary. It no longer was limited to the two base modules with which it ones started, it now had grown into a small village and got frequent visits not only from the national space agencies but also from private enterprises. Space tourism has moved to whole new levels with the Moon Colony
-
-== 2050 - Space Telescope
-
-With the help of the Moon Colony a new space telescope was assembled, one good enough to discover planets and collect information about them.
-
-== 2060 - Project Longshot
-
-Project Longshot once started as an idea in the late 1970's now became reality. The telescopes had discovered a planet system around Alpha Centauri B and it was now Longshot job to profide some close up views, but as always with space travel, this wasn't going to be a short journey.
-
-== 2110 - Arrival
-
-Longshot entered the planet system of Alpha Centauri B, it was the first time a man-made object had done so.  As programmed Longshot launched a couple of small daughter satellites to do the closer inspection, while Longshot itself, to heavy to slow down, would continue through the system and into the void of space.
-
-On their journey through the system the satelites produced some very detailed images of the planets and also discovered dozens of moons formerly unknown moons and smaller planets.
-
-One planet, called Central, seemed perfect for collonisation, it had already a very earthlike athmosphere and plenty of water, in fact it consists to nine tenth out of water, which meant it had only little land to offer, but that should be more then enough to get a colonie started. Later collonisation could then happen via city-ships and similar land-creating endevours. The land that was there should be enough for a few decades to come.
-
-The other was Hoti, it had an athmosphere, not breathable, but not toxic either, a simple oxygen masks should be enough to protect the population outside and inside the city there could be a decent athmosphere. 
-
-The last canditat was named Nugani, it was a moon close to the gas giant Ensani. 
-
-== 2220 - Collonisation
-
-The Longshot drones had collected information about the new system for many decades and it became clear that the system provided habitatable planets. Plans for collonisation where put into place. 
-
-Along with those ships carriing the people, automatic ships where send that should handle the terraforming.
-
-== 2263 - Collonisation - Phase 1
-
-The trip to Alpha Centauri took fourthy years. A handful of landing capsules where lost on entry, but that is probably to be expected on such a riski trip. 
-
-As planed the terraforming started. While the atmosphere wasn't toxic by itself, it lacked enough oxigen to sustain human settlements, so the first few decades where spend in environment suits or with oxigen masks. 
-
-== 2312 - Terraforming
-
-The robotic probes arrive and terraforming begins.
-
-== 2380 - Collonisation - Phase 2
-
-With the terraforming making progress it become clear that it wouldn't take much longer till the atmosphere of Zeta-12 become breathable. So the humans got ready to move to Alpha Centauri B.
-
-A dozens ships where build, each with the ability to carry 16 entry capsules, each carring around 40 people. 640 people per ship 25 ships in total.
-
-== 2382 - Collonisation - Corruption
-
-Unknown by the earth government, the company Red Star, had build a handful of collonisation ships themselves. While NStars ships flow in a large group, so that they could give each other support on the long journey, the ships of Red Star where build for speed. They where build to overtake the NStar fleed and arrive at Alpha Centauri B first. The idea was simple, new land was freely available and whoever got there first was the one who could land claim to it. And Red Star was prepared to do exactly that. Not only where their ships faster, they also carried plenty of guns to protect their land. NStars fleed wasn't equiped or prepared for a war, they where launched with the expection to be the first.
-
-== 2423 - Athmosphere on Zeta-12 becomes breathable
-
-150 years after the terraforming had begone, Zeta-12 become ready for human habitants. The oxigen levels still were not up to earth standards, so cities had some additional oxigen supply going, but one no longer suffocated in the plain athmosphere. 
-
-The human settle ships arrive.
-
-== 2424 - Arrivial, Evil Supprise
-
-One collonisation ship gets shoot out of the sky by RedStar.
-
-== 2425 - Touchdown - Colonization on Zeta-12 begins
-
-In preparation to touchdown all humans in hibernation have been woken up, after all things could go wrong when entering the athmosphere and it might be important that they can evocuate the capsules fast enough. 
-
-== 2434 - multiple cities have been build on Zeta-12 
-
-
-
-== 2497 - Jane enters the world
-
-
-
-== 2517 - The main game begins
-
-
-== 
-
-
-= Planets
-
-Zeta-12: A moon around a large gas giant, a cold place, but parts are keep warm through tectonic activity.
-
-Central: A central very earth like planet, lots of water, very little land.
-
-Hoti: A desert like planet close to the sun, very warm, only the poles are habitatable.

Added: trunk/media/wiki/Backstory.wiki
===================================================================
--- trunk/media/wiki/Backstory.wiki	2009-02-15 16:09:33 UTC (rev 2503)
+++ trunk/media/wiki/Backstory.wiki	2009-02-16 21:22:36 UTC (rev 2504)
@@ -0,0 +1,93 @@
+== 2025 - Landing on the Moon, again
+
+In preparation for the mission to Mars mankind planed a research mission to moon with the goal to setup a small colony 
+
+== 2032 - Landing on Mars
+
+Fifthy years late, but mankind had finally made it to Mars. The two year trip brought many new insights into long time travel and also ignited the interest in space colonisation again.
+
+== 2040 - Moon Colony
+
+The Moon colony, once started as a testbed for the Mars mission, was now nearing its 15 anniversary. It no longer was limited to the two base modules with which it ones started, it now had grown into a small village and got frequent visits not only from the national space agencies but also from private enterprises. Space tourism has moved to whole new levels with the Moon Colony
+
+== 2050 - Space Telescope
+
+With the help of the Moon Colony a new space telescope was assembled, one good enough to discover planets and collect information about them.
+
+== 2060 - Project Longshot
+
+Project Longshot once started as an idea in the late 1970's now became reality. The telescopes had discovered a planet system around Alpha Centauri B and it was now Longshot job to profide some close up views, but as always with space travel, this wasn't going to be a short journey.
+
+== 2110 - Arrival
+
+Longshot entered the planet system of Alpha Centauri B, it was the first time a man-made object had done so.  As programmed Longshot launched a couple of small daughter satellites to do the closer inspection, while Longshot itself, to heavy to slow down, would continue through the system and into the void of space.
+
+On their journey through the system the satelites produced some very detailed images of the planets and also discovered dozens of moons formerly unknown moons and smaller planets.
+
+One planet, called Central, seemed perfect for collonisation, it had already a very earthlike athmosphere and plenty of water, in fact it consists to nine tenth out of water, which meant it had only little land to offer, but that should be more then enough to get a colonie started. Later collonisation could then happen via city-ships and similar land-creating endevours. The land that was there should be enough for a few decades to come.
+
+The other was Hoti, it had an athmosphere, not breathable, but not toxic either, a simple oxygen masks should be enough to protect the population outside and inside the city there could be a decent athmosphere. 
+
+The last canditat was named Nugani, it was a moon close to the gas giant Ensani. 
+
+== 2220 - Collonisation
+
+The Longshot drones had collected information about the new system for many decades and it became clear that the system provided habitatable planets. Plans for collonisation where put into place. 
+
+Along with those ships carriing the people, automatic ships where send that should handle the terraforming.
+
+== 2263 - Collonisation - Phase 1
+
+The trip to Alpha Centauri took fourthy years. A handful of landing capsules where lost on entry, but that is probably to be expected on such a riski trip. 
+
+As planed the terraforming started. While the atmosphere wasn't toxic by itself, it lacked enough oxigen to sustain human settlements, so the first few decades where spend in environment suits or with oxigen masks. 
+
+== 2312 - Terraforming
+
+The robotic probes arrive and terraforming begins.
+
+== 2380 - Collonisation - Phase 2
+
+With the terraforming making progress it become clear that it wouldn't take much longer till the atmosphere of Zeta-12 become breathable. So the humans got ready to move to Alpha Centauri B.
+
+A dozens ships where build, each with the ability to carry 16 entry capsules, each carring around 40 people. 640 people per ship 25 ships in total.
+
+== 2382 - Collonisation - Corruption
+
+Unknown by the earth government, the company Red Star, had build a handful of collonisation ships themselves. While NStars ships flow in a large group, so that they could give each other support on the long journey, the ships of Red Star where build for speed. They where build to overtake the NStar fleed and arrive at Alpha Centauri B first. The idea was simple, new land was freely available and whoever got there first was the one who could land claim to it. And Red Star was prepared to do exactly that. Not only where their ships faster, they also carried plenty of guns to protect their land. NStars fleed wasn't equiped or prepared for a war, they where launched with the expection to be the first.
+
+== 2423 - Athmosphere on Zeta-12 becomes breathable
+
+150 years after the terraforming had begone, Zeta-12 become ready for human habitants. The oxigen levels still were not up to earth standards, so cities had some additional oxigen supply going, but one no longer suffocated in the plain athmosphere. 
+
+The human settle ships arrive.
+
+== 2424 - Arrivial, Evil Supprise
+
+One collonisation ship gets shoot out of the sky by RedStar.
+
+== 2425 - Touchdown - Colonization on Zeta-12 begins
+
+In preparation to touchdown all humans in hibernation have been woken up, after all things could go wrong when entering the athmosphere and it might be important that they can evocuate the capsules fast enough. 
+
+== 2434 - multiple cities have been build on Zeta-12 
+
+
+
+== 2497 - Jane enters the world
+
+
+
+== 2517 - The main game begins
+
+
+== 
+
+
+= Planets
+
+Zeta-12: A moon around a large gas giant, a cold place, but parts are keep warm through tectonic activity.
+
+Central: A central very earth like planet, lots of water, very little land.
+
+Hoti: A desert like planet close to the sun, very warm, only the poles are habitatable.


Property changes on: trunk/media/wiki/Backstory.wiki
___________________________________________________________________
Name: svn:mergeinfo
   + 

Deleted: trunk/media/wiki/Basic Features.wiki
===================================================================
--- trunk/media/wiki/Basic Features.wiki	2009-02-15 16:09:33 UTC (rev 2503)
+++ trunk/media/wiki/Basic Features.wiki	2009-02-16 21:22:36 UTC (rev 2504)
@@ -1,38 +0,0 @@
-This is a list of basic features we should either get from additional libraries or write small classes ourself.
-
-= Basics =
-* Setting up Fullscreen/Windowed OpenGL Context, the mode should be switchable at runtime
-* Gathering Input from Keyboard/Joystick/Mouse
-* Allow input to be configurable
-* Demo recording/playback of input
-* Some structured file format parser/writer for config, map, tile- and sprite-definition files
-* Optionally support for a binary format, since loading large tilemaps from a structured text file is slow
-* Some way to store/retrieve translated strings (tinygettext)
-
-= Graphics =
-* Loading images (png, jpeg would be a nice addition but is not mandatory) and creating opengl textures from them
-* A system that gathers all drawing commands, sorts them and maybe optimizes them for opengl
-* The drawing system should be statefull to allow translation and maybe scaling and rotating of following drawing commands. It should be possible to maintain a stack of such transformations.
-
-== Fonts ==
-* We need Fonts to display Text on screen
-* Fonts might be based on TTF for easier scaling/unicode support etc.
-* it should be possible to apply some effects to fonts, black-border, color gradients, glow, etc.
-* Fonts sholud be antialised
-
-== Sprites ==
-* Several Animations that can be switched. Animations are defined from a series of images. Speed of the animation or even single frames should be freely adjustable.
-* It should be possible to freely define the origin point of a sprite
-* Animation images can be extracted from bigger images (texture coordinate animation)
-* Support for reversing animations and mirroring/flipping the images will reduce the number of images needed.
-* We might have to extend sprites to support the 3 layer displaying of windstille
-* Sprites should be defined in datafiles, so that properties like framerate and such are easily changable
-* Sprites can come in the form of 2D (generated from pngs) and 3D sprites (generated from blender models)
-
-= Sound =
-* A way to send sound to the soundcard.
-* Load wav and ogg files
-* Stream ogg files for background music
-* Mix several sound sources together
-* Positional audio (we could also build a fake solution with adjuts panning/volume)
-* Effects applied to sound streams (echo, reverb, etc)
\ No newline at end of file

Deleted: trunk/media/wiki/Blender.wiki
===================================================================
--- trunk/media/wiki/Blender.wiki	2009-02-15 16:09:33 UTC (rev 2503)
+++ trunk/media/wiki/Blender.wiki	2009-02-16 21:22:36 UTC (rev 2504)
@@ -1,20 +0,0 @@
-There are plenty of ways to construct Blender models (*.blend) in a way that they don't work properly on other machines, this text shall give a little guideline on things to keep in mind.
-
-== Textures ==
-
-* The path to the texture must be relative, not absolute, this can be accomplished with the "Relative Path" option in the file dialog when selecting a texture
-* Images must not be packed, the texture screen (Shift-F10) has a toggle button for that
-
-== Links ==
-
-
-
-== Armatures ==
-
-Armatures and character models should stay seperate.
-
-
-== Lighting ==
-
-Since the models are meant to be used in a game, all the lighting is the job of the game engine, not the .blend file. Model files should thus be free of light sources.
-

Deleted: trunk/media/wiki/Characters.wiki
===================================================================
--- trunk/media/wiki/Characters.wiki	2009-02-15 16:09:33 UTC (rev 2503)
+++ trunk/media/wiki/Characters.wiki	2009-02-16 21:22:36 UTC (rev 2504)
@@ -1,43 +0,0 @@
-No names have yet been selected for the different characters, so fell free to suggest some.
-
-= Player (Jane) =
-
-http://windstille.berlios.de/images/artwork13_small.jpg
-
-Relativly new in the mercenary business, started to hire at Northern Star when she turned 18, wanted to get away from home as quickly as possible, wanted to see the stars, visit other worlds and the like. Worked as miner for some years now, visited a bunch of colonies, however quickly become sick of the mining business. She is now out of the mining business and tries to start a new living here on this colonie.
-
-= AI =
-
-The controller programm of the Virtual Reality, has some intelligence and personality on his own.
-
-= Pilot =
-
-The person who controls the shuttle and brings Jane to wherever she needs to go. Might actually be Yagor himself, not yet decided.
-
-=Boss (Yagor)=
-http://pingus.seul.org/~grumbel/tmp/windstille-yagor-small.png
-
-The person for which Jane works. Has been in the merc business for a while and has worked for a short period of time together with Sophie, before she went solo. Somewhat of a father person to Jane.
-
-= Veteran (Sophie) =
-
-http://windstille.berlios.de/images/artwork11_small.jpg
-
-Veteran in the mercenary work, has worked on a bunch of different colonies and has been on this one for quite some years. She knows how stuff works here and how to get what is needed. Has lots of connections to different people around on this colonie. For most part see prefers to work alone. Tough women overall.
-
-= Jeff =
-http://pingus.seul.org/~grumbel/tmp/windstille-jeff.png
-
-A sunnyboy, always sees the bright side of life. He works in the same business as Jane and every once in a while they clash together. While Jane might not like him much, Jeff sees their relationship a little differently.
-
-= Barkeeper (Bob) =
-
-http://windstille.berlios.de/images/barkeeper_small.jpg
-
-A valuable informant in this city. He knows most people around and he knows where the good jobs are to find. If something is happening his bar is the place where people exchange information. He might not be the most friendly looking guy, but once you know him for a while one shouldn't have to much throuble to get along with him. He tries his best to keep his bar a save place.
-
-= Mineral Worker =
-
-http://windstille.berlios.de/images/worker_small.jpg
-
-One of the many contract workers which work for the Northern Star Mining cooroperation. The NSM often hires people and send them out to the different colonies to dig for resources. Their income is connected to the amount of resources which they collect, so if stuff doesn't work that right, they might quickly lose interesting, since only resources bring them income. Most of the time they are send out to a colonie for a few weeks or month, then send to another one, once the given resource region is harvested. Overall they can be hard workers, but only if the resources can motivate them.
\ No newline at end of file

Deleted: trunk/media/wiki/Collision Detection.wiki
===================================================================
--- trunk/media/wiki/Collision Detection.wiki	2009-02-15 16:09:33 UTC (rev 2503)
+++ trunk/media/wiki/Collision Detection.wiki	2009-02-16 21:22:36 UTC (rev 2504)
@@ -1,63 +0,0 @@
-Basic features that need to be handled by the physic/collision engine: 
-
-* properly detection of the side at which two boxes collide so that the game can react as expected (player pushes a box, player jumps on a moving platform from below, player jumps on an enemy vs gets hit by an enemy, etc.)
-* allow to stack crates, boxes and stuff
-* allow to shoot in a stack of boxes and let the stack collapse
-* conveyor belts
-* slopes in the tilemap (not that important)
-
-Stuff that is not needed:
-
-* rotating boxes, while probally pretty, they cause more trouble then good, both on the programming side as well as on the gameplay side (what happens when you jump on a box which has a 45 degree angel?)
-
-== Collision Domains ==
-
-The collision detection should seperate different kind of objects into different collision domains, so that objects that are not in the same domain aren't checked at all against each other. Domains could be:
-
-* CollidesWithPlayer
-* CollidesWithEnemy
-* CollidesWithProjectile
-* ...
-
-Domains could be implemented as a simple 'unsigned int' for the CollisionObject
-
-== Collision Callback ==
-
-Once a collision occured the engine should give the object usefull feedback for resolving the collision, the engine should *not* resolve collisions on its own. The engine should instead move the object as close to the other object as possible and then call the callback:
-
- CollisionObject::collision(CollisionEvent& collision);
-
- struct CollisionEvent
- {
-  // is NONE actually needed?
-  enum State { NONE, STUCK, COLLISION, CONTACTBREAK } state;
- 
-  // should be enough no need for a vector IMHO
-  enum Side  { TOP, BOTTOM, LEFT, RIGHT };
- 
-  // the object which with 'this' collided
-  CollisionObject* object;
- 
-  // the amount of time that has not yet been used up
-  float rest_delta;
- };
-
-Collision resolution could then either mean to change the direction, to simply halt or to attach oneself to the other object (ie. that is how moving platforms should find the player).
-
-== Movement ==
-
-All movement from objects that collide *must* happen via the collision engine, this should happen via a simple CollisionObject::set_velocity(x, y) or CollisionObject::set_positio(x, y) call, no actually forces or other physics should come into play, since most objects simply won't react physical correct.
-
-== Implementation ==
-
-To detect the time and point of collision the standard sweepcheck should be used, this check needs to be performed for all possible object combination, after that the detected collisions should be sorted after the their time and then resolved one after another. Since the collision response might actually lead to new collisions, the check needs to be redone again for the involved objects (maybe for all objects?!). This is done up to the point where all time for all objects is used up.
-
-CollisionObject should *not* be a parent of entity. This has the simple reason that a entity might need multiple CollisionObject. Imagine a large robot with multiple legs, each of the feet is represented by a CollisionObject, the whole robot however should be handled as a single entity, which would be impossible if Entity derives from CollisionObject (unless of course you add a heapload of useless grouping features to the collision engine).
-
-== Attachments/Contacts ==
-
-There should be a way to link objects together, this linking might either be primitive, ie. simple parenting without taking care if objects connect at all, or more complex, ie. a box that is standing ontop of another box. The collision engine should check when such a contact is no longer in place and give an appropriate event. There should also be a way to detect the angle of the contact point so that you can move objects at other speed when they walk up/down a slope.
-
-== Links ==
-
-[[http://www.harveycartel.org/metanet/tutorials.html]] has plenty of very good docu about collision detection between different object types.
\ No newline at end of file

Deleted: trunk/media/wiki/Controls.wiki
===================================================================
--- trunk/media/wiki/Controls.wiki	2009-02-15 16:09:33 UTC (rev 2503)
+++ trunk/media/wiki/Controls.wiki	2009-02-16 21:22:36 UTC (rev 2504)
@@ -1,54 +0,0 @@
-Controls in Windtille will be configurable, this works by mapping keyboard keys, joystick buttons or whatever input device you have available to a virtual controller. This virtual controller will be more or less SNES like, meaning you have:
-
-http://pingus.seul.org/~grumbel/tmp/windstille-vcontroller-2005-08-08.png
-
-* a primary button, used for jumping or reloading
-* a secondary button, used for running or shooting
-* a tertiary button, used for using items
-* a 'select' button, used to open the PDA/Inventory
-* a aim button, used to switch between normal mode and shooting
-* a pause button
-
-When using the a keyboard this can be mapped as:
-
-* 'wasd' for primary, secondary, tertiary and 'select'
-* 'shift' for aim
-* 'p' for pause
-* 'cursorkeys' for steering
-* 'enter' + 'escape' for confirm/cancel
-
-Controls in general should be context sensitive meaning there don't necessarily is a hard mapping between a button and what you do, this could for example mean that the jump executed when you are standing infront of a ledge is a different one than when standing on normal ground or on the edge of a cliff or that when you walk against a wall you halt or when walking against a box you automatically start to push the box.
-
-[[http://pingus.seul.org/~grumbel/tmp/windstille-control-scheme.jpg|Picture of some Control Modes]]
-
-Controlls for powersuit and non-powersuit mode will be rather similar, except some details.
-
-== Human without gun ==
-
-* left/right: walk to the left or right
-* down: duck
-* down, left/right: sneak/crawl
-* primary + up: jump up
-* primary: jump forward
-* secondary + left/right: run to the left or right
-* tertiary: use nearest object
-* aim: draw gun
-* pda: show PDA
-
-== Human with gun and aiming ==
-
-* left/right: retreat or walk forward without turning around
-* up/down: aim up or down
-* secondary: shoot
-* primary: reload
-* tertiary: throw granate
-
-== Additional 'modeless' Controls ==
-
-* start/pause: pauses the game and shows the options menu (fullscreen/window mode, etc.)
-
-== Open Questions ==
-
-* Should drawing the weapon be a push&hold or a toggle? => should be configurable
-* What about Turrican-style surround shooting? => can be done via aiming
-* Is the three-mode style gun usage to complicated (pull, aim, shoot)? => yes, aiming should automatically draw the gun as well
\ No newline at end of file

Deleted: trunk/media/wiki/Design Discussion CheckList.wiki
===================================================================
--- trunk/media/wiki/Design Discussion CheckList.wiki	2009-02-15 16:09:33 UTC (rev 2503)
+++ trunk/media/wiki/Design Discussion CheckList.wiki	2009-02-16 21:22:36 UTC (rev 2504)
@@ -1,25 +0,0 @@
-We should complete the following things before starting real work:
-
-* Decide about (main) Programming Language and Coding Style
-* Make some sketches about the overal story of the game
-* Have a detailed story for milestone1
-* Complete scripts for the cutscenes
-* Sketches and desriptions of the characters
-* Define possible actions and how to control them
-* How are maps constructed
-* Sketches and descriptions for the enemies. Don't forget to describe their behaviour
-* Create a sketch of the menus and describe their functions
-* Weapon sketches with description and how they are controlled
-* Try to split the work to people actively helping on the project. So that everyone has his own part he works on. This avoids everyone focusing on everything which often leads to bugs because you don't understand other peoples code/intentions or because some areas are left unattended.
-
-Engine Design:
-* Outline the features needed for the engine
-* Decide about technology
-* Fix file formats (map, tiles, sprites/animations, scripts)
-* How should collision detection and response be handled. Basically think about game mechanics.
-* Create a rough class hirarchy
-* Identify where scripts should be used and design a scripting API
-* What interactions are needed between GameObjects, how to handle them
-* How do we handle savegames, do we need to have serialisation support across the project or will we do simpler solutions?
-
-PS: Its actually more Milestone2 or better Milestone3 then Milestone1, the former release was fully playable as well, it simply didn't provided that much.
\ No newline at end of file

Deleted: trunk/media/wiki/Dialog.wiki
===================================================================
--- trunk/media/wiki/Dialog.wiki	2009-02-15 16:09:33 UTC (rev 2503)
+++ trunk/media/wiki/Dialog.wiki	2009-02-16 21:22:36 UTC (rev 2504)
@@ -1,84 +0,0 @@
-It is logical if each character you speak to has their own, singular script file to represent converations with that character. When you start a conversation with that character in game, their corresponding dialog script file will be loaded and run. When the conversation ends, the script will be pushed off the stack (or whatever the correct terminology is). If dialogs become non blocking, then dialog manager will have to pause running of the dialog script until you make a choice whilst the rest of the game keeps running, but they can be left blocking for now, probably forever.
-
-Each dialog function below should be thought of like a page in a "Choose your own story" book, or like a foward-linked list - it has no state with regards to a stack, but is instead a self contained unit, which includes forward links to other dialogs depending what option you choose. This means that dialog can jump across to a shared branch, which would not be possible if you just used a lot of nested switch statements (if you look at the dialog in a point and click adventure or an RPG, you will see there is a lot of branch-hopping).
-
-Example pseudo code:
-
-{{{
-//first we need to decide where in out story-book/linked-list like structure to start
-if (t_spiderquest.famous_for_killing_big_spider)
-	//haven't actually written this function, this just demonstrates namespacing
-	congratulations();
-else if (knows_you_mercenary)
-	offer_job();
-else if (seen_before)
-	hello_again();
-else
-	intro();
-
-function intro()
-{
-	seen_before = true;
-	add_question("Hey, my name's Bob, you new around here?");
-	add_answers("Yes, I am.", "Go away.");
-	switch(get_answer()) {
-	case 0:
-        ask_questions();
-	  break;
-	case 1:
-	  bye();
-	}
-}
-
-function hello_again()
-{
-	add_question("Hello again.");
-	add_answers("Hey.", "Bye.");
-	switch(get_answer()) {
-	case 0:
-	  ask_questions();
-	  break;
-	case 1:
-	  bye();
-	}
-}
-
-function ask_questions()
-{
-	add_question("So what you doing here?");
-	add_answers("I work as a mercenary.", "Not much.");
-	switch(get_answer()) {
-	case 0:
-	  knows_you_mercenary = true;
-	  offer_job();
-	  break;
-	case 1:
-	  bye();
-	}
-}
-
-function offer_job()
-{
-	add_question("Looking for work?");
-	add_answers("I might be, if the offer is good enough.", "No thanks.");
-	switch(get_answer()) {
-	case 0:
-	  knows_your_job = true;
-	  //I haven't actually written this function in this pseudo-code
-	  details_of_job();
-	  break;
-	case 1:
-	  bye();
-	}
-}
-
-function bye()
-{
-	if (knows_your_job)
-		add_question("Feel free to come back if you need a job");
-	else
-		add_question("See you again some time, maybe");
-      get_answer();
-	return;
-}
-}}}
\ No newline at end of file

Added: trunk/media/wiki/Drawing Primitives.wiki
===================================================================
--- trunk/media/wiki/Drawing Primitives.wiki	2009-02-15 16:09:33 UTC (rev 2503)
+++ trunk/media/wiki/Drawing Primitives.wiki	2009-02-16 21:22:36 UTC (rev 2504)
@@ -0,0 +1,62 @@
+= Drawing Primitives
+
+== Sprite
+
+Simple rectangular sprite that is rotabable and scaleable.
+
+{{{
+Sprite {
+  Vector2f position;
+  float    rotation;
+  float    scale;
+}
+}}}
+
+== Simple Quad
+
+Same as sprite, except that its four vertices can be moved
+independently around.
+
+{{{
+Quad {
+  Vector2f position[4];
+}
+}}}
+
+== Textured Quad
+
+A quad that is filled with a repeating textured.
+
+{{{
+TexturedQuad {
+  Vector2f position[4];
+
+  float    texture_rotation;
+  float    texture_scale;
+  Vector2f texture_offset;
+}
+}}}
+
+== Rope
+
+A series of points that is connected by a thick textured line to
+represent ropes or pipes. Begin/end could use seperate textures.
+
+{{{
+Rope {
+  Vector2f position[N];
+  float    thickness;
+}
+}}}
+
+== Group
+
+Groups allow docking multiple primitives together.
+
+{{{
+Group {
+  DrawingPrimitives primitives[N];
+  float rotation;
+  float scale;
+}
+

Added: trunk/media/wiki/Editor.wiki
===================================================================
--- trunk/media/wiki/Editor.wiki	2009-02-15 16:09:33 UTC (rev 2503)
+++ trunk/media/wiki/Editor.wiki	2009-02-16 21:22:36 UTC (rev 2504)
@@ -0,0 +1,3 @@
+The Windstille Editor will follow a sandbox model. The engine shall be
+flexible enough that it can run inside the editor and be manipulated.
+

Deleted: trunk/media/wiki/Fighting.wiki
===================================================================
--- trunk/media/wiki/Fighting.wiki	2009-02-15 16:09:33 UTC (rev 2503)
+++ trunk/media/wiki/Fighting.wiki	2009-02-16 21:22:36 UTC (rev 2504)
@@ -1,19 +0,0 @@
-Some thoughts on fighting in Windstille.
-
-== Human Mode ==
-
-Another World had a very interesting way to fight. You had a gun that you could charge, in three stages:
-
-# fire a normal shoot
-# build a shield infront of you
-# fire a huge blast that will crack a shild or destroy a wall
-
-Enemies only used shields and normal shoots and shields had a limited amount of time how long they hold, multiple shields were possible. A single shoot that hit would kill an enemy or you. So you had to constantly keep your shield up while at the same time trying to charge up a powershoot to destroy the enemies shield.
-
-Flashback is somewhat similar, but here you can survive a few hits and the shield isn't a weapon firing mode, but a seperate item. Shield only opens up for a second and closes again, so it all depends on your timing to open the shield shortly before the enemy fires a shoot. Enemies don't use any shields if I remember correctly.
-
-AstroyBoy uses a rather special weapon based fight system, each punch to an enemy fills up your powermeter, once its full you can fire a special attack, so fighting focuses on filling up the meter and starting special attacks so that they hit the most enemies.
-
-Dancing Stage like where you have to press a given number of buttons to be successfull
-
-Viewtifull Joe like where a direction to dodge is shown shortly before the enemies action, so you can dodge.

Added: trunk/media/wiki/Fighting.wiki
===================================================================
--- trunk/media/wiki/Fighting.wiki	2009-02-15 16:09:33 UTC (rev 2503)
+++ trunk/media/wiki/Fighting.wiki	2009-02-16 21:22:36 UTC (rev 2504)
@@ -0,0 +1,19 @@
+Some thoughts on fighting in Windstille.
+
+== Human Mode ==
+
+Another World had a very interesting way to fight. You had a gun that you could charge, in three stages:
+
+# fire a normal shoot
+# build a shield infront of you
+# fire a huge blast that will crack a shild or destroy a wall
+
+Enemies only used shields and normal shoots and shields had a limited amount of time how long they hold, multiple shields were possible. A single shoot that hit would kill an enemy or you. So you had to constantly keep your shield up while at the same time trying to charge up a powershoot to destroy the enemies shield.
+
+Flashback is somewhat similar, but here you can survive a few hits and the shield isn't a weapon firing mode, but a seperate item. Shield only opens up for a second and closes again, so it all depends on your timing to open the shield shortly before the enemy fires a shoot. Enemies don't use any shields if I remember correctly.
+
+AstroyBoy uses a rather special weapon based fight system, each punch to an enemy fills up your powermeter, once its full you can fire a special attack, so fighting focuses on filling up the meter and starting special attacks so that they hit the most enemies.
+
+Dancing Stage like where you have to press a given number of buttons to be successfull
+
+Viewtifull Joe like where a direction to dodge is shown shortly before the enemies action, so you can dodge.


Property changes on: trunk/media/wiki/Fighting.wiki
___________________________________________________________________
Name: svn:mergeinfo
   + 

Deleted: trunk/media/wiki/GUI.wiki
===================================================================
--- trunk/media/wiki/GUI.wiki	2009-02-15 16:09:33 UTC (rev 2503)
+++ trunk/media/wiki/GUI.wiki	2009-02-16 21:22:36 UTC (rev 2504)
@@ -1,9 +0,0 @@
-* player-energiebar
-* weapon-energiebar
-* current weapon icon
-* armor/player icon
-* map/radar
-
-== Weapon Select ==
-
-http://windstille.berlios.de/images/weaponitemselect.jpg
\ No newline at end of file

Deleted: trunk/media/wiki/Getting Started.wiki
===================================================================
--- trunk/media/wiki/Getting Started.wiki	2009-02-15 16:09:33 UTC (rev 2503)
+++ trunk/media/wiki/Getting Started.wiki	2009-02-16 21:22:36 UTC (rev 2504)
@@ -1,42 +0,0 @@
-To get Windstille up and running you basically need these things:
-
-== Subversion ==
-
-http://subversion.tigris.org/
-      
-Description: A compelling replacement for CVS
-
-== ClanLib 0.7 SVN  Version ==
-
-It is available via:
-
-{{{svn checkout https://clanlib.org/svn/ClanLib/Development/ClanLib-0.7 ClanLib-0.7}}}
-
-This is required by the Flexlay level editor but not by Windstille itself. ClanLib itself also needs some additional libraries and programs to compile like pkg-config, libjpeg, libpng, libvorbis and some other things, however all those should come with your distro, so it shouldn't be to much trouble to install them. Check the [[http://www.clanlib.org/subversion.html|Official ClanLib Webpage]] for details.
-
-== Flexlay SVN Version - Windstille's Level Editor ==
-
-Flexlay is the editor that is used for Windstille, it is not required to run Windstille, but if you want to help develop it might prove rather useful, so it's recommended that you get it, it requires:
-
-* the development version of ClanLib
-* Ruby 1.8
-* Swig 1.3.24
-* [[http://www.scons.org|SCons]] (to build)
-
-You can get it via:
-
- svn checkout svn://svn.berlios.de/flexlay/trunk/
-
-Check the [[http://flexlay.berlios.de/|Official Flexlay Webpage]] for details.
-
-== Windstille SVN Version ==
-
-Dependencies:
-
-* SDL
-* SDL_image
-* [[http://icculus.org/physfs/|PhysicsFS]]
-* [[http://www.openal.org/|OpenAL]]
-* [[http://www.perforce.com/jam/jam.html|Jam]] (to build)
-
- svn checkout svn://svn.berlios.de/windstille/trunk/
\ No newline at end of file

Deleted: trunk/media/wiki/Graphics.wiki
===================================================================
--- trunk/media/wiki/Graphics.wiki	2009-02-15 16:09:33 UTC (rev 2503)
+++ trunk/media/wiki/Graphics.wiki	2009-02-16 21:22:36 UTC (rev 2504)
@@ -1,38 +0,0 @@
-= Drawing Model =
-
-[[Windstille Drawing Model]]
-
-= Layers =
-
-The current graphics engine works by using three layers, to each of the layers you can draw independly. They are only later down the pipeline flushed down to the screen. The multiple layers are necessary for once to properly sort the graphics and secondly they are needed to create certain effects. The layer are:
-
-== Color Layer ==
-
-This is a normal layer, it contains just good old graphics as you would expect and is drawn as if you would draw directly to the screen.
-
-== Light Layer ==
-
-This layer specifies which areas of the screen are visible and which aren't. At start everything is invisible (black), to make stuff visible one uses white. One can also use other colors, red, green, etc. The light layer is later multiplied with the color layer, thus everything that is black (0) gets blended out and everything else gets lit by the color found in the light layer. Drawing to this layer should almost always happen via additive blending.
-
-== Highlight Layer ==
-
-The highlight layer is drawn ontop of the light layer, it is meant for lense-flares, glows and other effects that should be 100% visible all of the time and not covered by the light-layers shadow. It is the same as the color layer, only that the light layer doesn't get multiplied with it. Drawing should again be happening mostly additive, since thats gets closest to how real light acts.
-
-= 3D Sprites =
-
-The idea behind 3D sprites is to avoid the annoying and disk-space consuming procedure of converting all animations into 2D images. This should also allow to much easier apply different skins to the models and change cloth or the like. Bone animation and ragdoll physics would be nice, but for the first few releases (or probally ever) simple keyframe animation would be enough. Bone deform animation can be exported by something like this (only code to get the actual mesh data, no file writing there): 
-
-{{{
-import Blender
-from Blender import NMesh
-
-for i in xrange(1,30):
-        Blender.Set("curframe", i)
-        mesh = NMesh.GetRawFromObject("Plane")
-        obj = NMesh.PutRaw(mesh)
-        obj.setLocation(0, i*5, 0)
-}}}
-
-= GLSL Effects =
-
-GLSL, OpenGLs shader language, allows to do some very nice effects (fire, glass, shockwaves, etc.) the [[http://windstille.berlios.de/screenshots.html|Windstille webpage]] has some videos of them. The good news is that they are rather easy to implement, the bad news is that one needs some framework to implement them properly, ie. first of one needs to get them through ClanLib and secondly for most effects one needs a copy of the current framebuffer, which however is rather expensive to read, so its hard to get. They are also rather GPU heavy, so when not handled with care they won't work on low-end graphic cards (GeforceFX5200, ATI9200) and they don't work at all on even older cards, so they would need to be optional.
\ No newline at end of file

Added: trunk/media/wiki/Graphics.wiki
===================================================================
--- trunk/media/wiki/Graphics.wiki	2009-02-15 16:09:33 UTC (rev 2503)
+++ trunk/media/wiki/Graphics.wiki	2009-02-16 21:22:36 UTC (rev 2504)
@@ -0,0 +1,38 @@
+= Drawing Model =
+
+[[Windstille Drawing Model]]
+
+= Layers =
+
+The current graphics engine works by using three layers, to each of the layers you can draw independly. They are only later down the pipeline flushed down to the screen. The multiple layers are necessary for once to properly sort the graphics and secondly they are needed to create certain effects. The layer are:
+
+== Color Layer ==
+
+This is a normal layer, it contains just good old graphics as you would expect and is drawn as if you would draw directly to the screen.
+
+== Light Layer ==
+
+This layer specifies which areas of the screen are visible and which aren't. At start everything is invisible (black), to make stuff visible one uses white. One can also use other colors, red, green, etc. The light layer is later multiplied with the color layer, thus everything that is black (0) gets blended out and everything else gets lit by the color found in the light layer. Drawing to this layer should almost always happen via additive blending.
+
+== Highlight Layer ==
+
+The highlight layer is drawn ontop of the light layer, it is meant for lense-flares, glows and other effects that should be 100% visible all of the time and not covered by the light-layers shadow. It is the same as the color layer, only that the light layer doesn't get multiplied with it. Drawing should again be happening mostly additive, since thats gets closest to how real light acts.
+
+= 3D Sprites =
+
+The idea behind 3D sprites is to avoid the annoying and disk-space consuming procedure of converting all animations into 2D images. This should also allow to much easier apply different skins to the models and change cloth or the like. Bone animation and ragdoll physics would be nice, but for the first few releases (or probally ever) simple keyframe animation would be enough. Bone deform animation can be exported by something like this (only code to get the actual mesh data, no file writing there): 
+
+{{{
+import Blender
+from Blender import NMesh
+
+for i in xrange(1,30):
+        Blender.Set("curframe", i)
+        mesh = NMesh.GetRawFromObject("Plane")
+        obj = NMesh.PutRaw(mesh)
+        obj.setLocation(0, i*5, 0)
+}}}
+
+= GLSL Effects =
+
+GLSL, OpenGLs shader language, allows to do some very nice effects (fire, glass, shockwaves, etc.) the [[http://windstille.berlios.de/screenshots.html|Windstille webpage]] has some videos of them. The good news is that they are rather easy to implement, the bad news is that one needs some framework to implement them properly, ie. first of one needs to get them through ClanLib and secondly for most effects one needs a copy of the current framebuffer, which however is rather expensive to read, so its hard to get. They are also rather GPU heavy, so when not handled with care they won't work on low-end graphic cards (GeforceFX5200, ATI9200) and they don't work at all on even older cards, so they would need to be optional.
\ No newline at end of file


Property changes on: trunk/media/wiki/Graphics.wiki
___________________________________________________________________
Name: svn:mergeinfo
   + 

Deleted: trunk/media/wiki/IRC Meeting 1.wiki
===================================================================
--- trunk/media/wiki/IRC Meeting 1.wiki	2009-02-15 16:09:33 UTC (rev 2503)
+++ trunk/media/wiki/IRC Meeting 1.wiki	2009-02-16 21:22:36 UTC (rev 2504)
@@ -1,526 +0,0 @@
-Saturday, 25. June 2005
-18:00 GMT (http://wwp.greenwichmeantime.com/)
-Server: irc.freenode.net
-Channel: #windstille
-
---> You are now talking on #windstille
-
---- Topic for #windstille is Meeting at 18:00GMT - 15min to go
-
---- Topic for #windstille set by grumbel at Sat Jun 25 19:47:21 2005
-
---- #windstille :[freenode-info] help freenode weed out clonebots, please register your IRC nick and auto-identify: http://freenode.net/faq.shtml#nicksetup
-
-<quickflash> [13:00] <quickflash> grumbel: main issue with with unpacking is that images can't be relative I'm pretty sure
-
-<grumbel_> quickflash: doesn't pressing the 'relative path' button help?
-
-<quickflash> maybe, never noticed that button
-
-<grumbel_> is in the load dialog
-
-<grumbel_> when you load a image
-
-<-- grumbel has quit (Read error: 145 (Connection timed out))
-
---- You are now known as grumbel
-
--NickServ- This nickname is owned by someone else
-
--NickServ- If this is your nickname, type /msg NickServ IDENTIFY <password>
-
-<jamesg> So is it 18:00 GMT?
-
-<grumbel> jamesg: yep
-
-<jamesg> MazteB and godrin already said they couldn't make it, so I guess this is everyone who will be here
-
-<grumbel> yep, think so
-
-<jamesg> so what is up for discussion?
-
-<quickflash> grumbel: are you logging
-
-<grumbel> jamesg: good question :)
-
-<grumbel> quickflash: unless my xchat crashes I will have a log
-
-<jamesg> Opera can't log, which is dumb, maybe I should get a proper IRC client some time
-
-<grumbel> line72, PauloMorfeo, straver: interesting in helping developing?
-
-<line72> yes
-
-<grumbel> line72: which area? graphics, prog, story, etc?
-
-<jamesg> is WolfganB just logging?
-
-<line72> mainly programming
-
-<line72> some graphics (2d and 3d)
-
-<straver> yes, but I ca't ufor two weeks
-
-<grumbel> jamesg: not sure
-
-<WolfgangB> ?
-
-<line72> Its me and several others from our gamedev club are going to help out
-
-<grumbel> WolfgangB: hi, wanna help too?
-
-<WolfgangB> ther should be a log function somewhere
-
-<quickflash> let
-
-<jamesg> wolfgang, I just meant, are you really here or had you just left an IRC client connected to log the conversation whilst you went out. Obviousuly not.
-
-<jamesg> So at least to start with we have quite a few people then.
-
-<WolfgangB> grumbel, yes, i can do some programming. 
-
-<grumbel> http://windstille.berlios.de/wiki/index.php/Jobs has some tasks available
-
-<WolfgangB> okay, i learnd something about blender in lincity 
-
-<WolfgangB> but it will look like the placeholder images :)
-
-<quickflash> I'll work on animations and voices...
-
-<grumbel> anybody interesting in writing a opengl based ttf font system?
-
-<jamesg> are the clanlib fonts not good enough?
-
-<quickflash> no system fonts in linux
-
-<grumbel> jamesg: a) we might get rid of clanlib b) bitmap fonts are rather throuble some with multiple encodings
-
-<straver> I'll most likely do some programming but I'll wait and see what tasks are left
-
-<grumbel> the bitmap fonts are fine as long as one doesn't need a different fontsize or something different than latin1
-
-<grumbel> past has however shown that sooner or later people always want to translate to non-latin1 languages
-
-<line72> nehe has a tutorial on using freetype2 with opengl
-
-<quickflash> yeah, thought I'd seen that before
-
---- grumbel has changed the topic to: Meeting at 18:00GMT - now
-
-<grumbel> the ttf support is not really urgend, just some thing that we might need sooner or later, so if anybody wanna pick that task..
-
-<jamesg> If someone wants to add support for non-European languages then fair enough, but given the amount of other work to do I don't think it's a priority
-
-<WolfgangB> if there is voice-acting, localisation will be difficult alyway.
-
-<grumbel> jamesg: it really depends if you switch away from clanlib, if we do, then it might be better to start with ttf renderer then doing a bitmap renderer
-
-<grumbel> WolfgangB: simply switch voice acting off
-
-<quickflash> ok, so let's talk about clanlib: use or don't use...
-
-<line72> what's the option if we don't use it
-
-<WolfgangB> oh, so voice is just reading on screen texts, no replacement for them?
-
-<grumbel> line72: write stuff ourself & recycle supertux code
-
-<grumbel> WolfgangB: yes
-
-<jamesg> and recycle ClanLib code too, possibly?
-
-<grumbel> jamesg: yep, that too
-
-<line72> so, is this going to be 2d or 3d ?
-
-<quickflash> mix
-
-<line72> meaning we render everything in 3d, or we create 3d models, animated them, and generate 2d sprites from them ?
-
-<grumbel> line72: tilemaps will be 2d, some sprites will be 2d and we will have 3d sprites, ie. simple meshes
-
-<quickflash> 3d sprites will be used when it makes sense for memory
-
-<grumbel> and when the graphic requires it
-
-<grumbel> one thing are characters which will most likly be all 3d
-
-<grumbel> other thing are stuff like cars or spaceships that might need to rotate to land/start
-
-<straver> but that's easy in 2d withopengl anyway
-
-<quickflash> yes, but then you get large textures
-
-<jamesg> so what would be the advantage of leaving clanlib, other than reducing dependencies?
-
-<WolfgangB> have a system you can understand in shorter time?
-
-<grumbel> straver: the other two axes which are not z
-
-<grumbel> straver: if you do that in 3d than you get *huge* texture
-
-<grumbel> straver: 640x480 * 24 frames per second like
-
-<jamesg> clanlib is no harder to understand than ano other library
-
-<line72> my only issue with clanlib is we need the cvs version
-
-<grumbel> line72: that IMHO a non-issue
-
-<jamesg> the only change to clanlib cvs in the past week was a win32 makefile fix, by me. It doesn't change much, the issue is just that they haven't made a new release for ages.
-
-<grumbel> the important parts go more into the direction of how hard is it to add shader support to clanlib
-
-<grumbel> or how much of clanlib do we really need
-
-<grumbel> jamesg: nothing clanlib fix is to change the near/far clipping planes from -1/1 to something larger, however not yet commited
-
-<grumbel> anyway, thats more the kind of problems I expect if we stay with clanlib
-
-<jamesg> Well, anyway, if we drop clanlib because it's easier for people writing graphics code then I won't complain, but I don't think we should rewrite a whole load of code just to reduce dependencies. There could be a new ClanLib release to coincide with Windstille, or otherwise just before release ClanLib could be copied into its own directory in Windstille.
-
-<grumbel> jamesg: yep
-
-<quickflash> clanlib release is just waiting for someone to do it...
-
-<jamesg> so the decision on clanlib should be made by whoever it is who is coding graphics stuff?
-
-<grumbel> jamesg: I would say we simply continue as we are and see if there is any clanlib left after a while
-
-<jamesg> ok
-
-<grumbel> ie. adding opengl based ttf font handling or switching tilemap to raw gl is all rather independed of clanlib
-
-<jamesg> what other potentially controversial issues are there to discuss before we can discuss division of tasks?
-
-<grumbel> question to all: have you actually played flashback or looked at least at the video in the "Similar Games" section in the wiki?
-
-<grumbel> just so that everybody has a basic idea with what we start
-
-<jamesg> I have played it briefly, so I know how it works.
-
-<WolfgangB> no, i heard about the whole thing just yesterday
-
-<quickflash> I couldn't get the avi to play
-
-<grumbel> playing "Another World"/"Out of this World" and/or "Prince of Persia" might help as well
-
-<line72> watching it now
-
-<WolfgangB> i compiled windstille and looked at it, thats about it
-
-<quickflash> prince of persia I recall
-
---> egore (~egore at vpn120.rz.uni-mannheim.de) has joined #windstille
-
-<jamesg> to make the avi play open it up i na hex editor and change the two occurences of "FCMP" or whatever it is to "XVID"
-
-<quickflash> rotoscoped animation
-
-<grumbel> quickflash: flashback is basically the same, except you have a gun and you walk around in a city
-
-<grumbel> quickflash: at least in some levels
-
-<jamesg> I played the original prince of persia a bit, too
-
-<grumbel> if somebody could explain me how to encode videos in linux that actually work that would be helpfull...
-
-<grumbel> stuff that mplayer produces is seldomly usable 
-
-<jamesg> encode them in a less advanced format - MPEG4 is all well and good but support varies
-
-<jamesg> even after editing the second video it still crashes vlc
-
-<WolfgangB> mplayer says "Video: no video" to the first one.
-
-<egore> grumbel: kmenc15 or kino are quite helpfull
-
-<WolfgangB> its working with xine. strange
-
-<jamesg> it's because it uses the codec fourcc "FCMP" or something which is very new and most players don't yet realise that it is the same as MPEG4
-
-<jamesg> but anyway, back to windstille
-
-<grumbel> here a little screenshot: http://www.classicgaming.com/rotw/flash2.gif
-
-<grumbel> anyway, point is windstille will have at least two basic modes
-
-<grumbel> one will be that girl in normal cloth with realistic movement and abiliies
-
-<jamesg> apparently I meant fmp4, not fcmp
-
-<grumbel> the other will be girl in powersuit and thus more strength, faster, higher jumps, etc.
-
-<grumbel> without the powersuit will be more or less an adventure mode, one where you walk around, buy stuff, talk to people 
-
-<grumbel> maybe infiltrate some factory, sneak around and such
-
-<grumbel> powersuit will be used outside of the city, on alien plants or in space
-
-<grumbel> thats basically what we are aiming at
-
-<grumbel> don't have much idea yet how the powersuit should play
-
-<grumbel> something metroid-ish maybe, but then I don't like that jumps at all
-
-<quickflash> metroidish
-
-<WolfgangB> so its supertux with different graphics?
-
-<grumbel> WolfgangB: nothing like supertux
-
-<straver> I got the impression the game was supposed to be nonlinear
-
-<grumbel> more like gta as sidescroller
-
-<jamesg> So I take it the player will have a gun, but the gun will be flashback like (very slow rate of fire, time consuming to aim) than like metroid (hold down fire button)?
-
-<grumbel> jamesg: in human mode definitivly
-
-<jamesg> and in power suit mode too?
-
-<straver> will the player be able to buy new weapons and upgrade the powersuit and so?
-
-<grumbel> in powersuit mode I am not sure, but even there I would prefer something that is a lot less fast then metroid
-
-<grumbel> something that gives you a realistic feel for the powersuit and not the ability to jump around like a flubber
-
-<jamesg> if even in powersuit mode it will be quite slow paced, might it not be simpler if powersuit mode was a bit less different to normal mode than you are proposing? I.e., same control system, same basic gameplay style, just you cna jump higher and take more damage
-
-<grumbel> straver: most likly
-
-<grumbel> straver: however I am not so sure how much freedom is usefull there
-
-<grumbel> jamesg: not sure, but powersuit should really feel different and more then just higher jumps
-
-<jamesg> So what is the difference?
-
-<grumbel> well, I want powersuit mode to be slower then metroid, but thats still a lot faster then flashback
-
-<grumbel> so it might mean to take something like metroid controls and replace the spin-jump with something more realistic
-
-<jamesg> so, ok, in power suit mode will you shoot bad guys by a) aiming a firing once or b) jumping on to a platform and holding down the fire button?
-
-<grumbel> depends on the weapon I would say
-
-<grumbel> ie. you could use a handgun or a bazooker style thing
-
-<grumbel> depending on what the current mission offers
-
-<jamesg> ok
-
-<grumbel> powersuit mode might provide a auto-lock-on or so on enemies
-
-<straver> and what control method are we going to use. I really like the abuse mouse/keyboard control.
-
-<grumbel> definitvly not abuse like
-
-<grumbel> I hate them
-
-<grumbel> currently I am aiming for cursorkeys + wasd
-
-<grumbel> so left/right -> walk
-
-<grumbel> one button to run
-
-<grumbel> one to use/talk
-
-<straver> what's so bad with mouse aim? gives you more precision
-
-<grumbel> one to draw the gun
-
-<grumbel> straver: I don't like precision, it simply feels rather unnatural
-
-<WolfgangB> gamepad support?
-
-<grumbel> beside from that you don't need precision
-
-<PauloMorfeo> (19:11:23) grumbel: Sorry, i was playing TA::Spring :P I don't expect to have enough time to do helping around this GOTM, unfortunatly... But i may do some things like voices if/when needed! (or something that doesn't require much time nor much learning to do)
-
-<jamesg> So will we start off working on both game modes at once, or concentrate on just one to start with?
-
-<grumbel> PauloMorfeo: ok
-
-<grumbel> jamesg: starting with human mode I would say
-
-<grumbel> since thats rather clear how it should look like
-
-<grumbel> so first step would be to get the virtual environment ready, add doors, scripting, dialog
-
-<grumbel> then start creating the city 
-
-<jamesg> OK
-
-<grumbel> and somewhere inbetween there toy around with powersuit tests
-
-<jamesg> MazteB said he would do scripting?
-
-<grumbel> jamesg: yep
-
-<WolfgangB> grumbel, what language was planed for scripting?
-
-<grumbel> its already in supertux and looks quite nice
-
-<grumbel> WolfgangB: squirrel
-
-<jamesg> it seems like we need scripting quite soon because lots of other stuff relies on it - e.g. I imagine doors will be implemented as scriptable objects? Is he going to do it soon?
-
-<egore> WolfgangB: supertux uses it's own, afaik
-
-<grumbel> he is currently playing around with openal
-
-<grumbel> but scripting would be the next step
-
-<grumbel> doors themself don't need scripting, a 'sector'  property would already be enough
-
-<grumbel> egore: its squirrel in supertux
-
-<egore> grumbel: ah, ok
-
-<egore> grumbel: now that you mention it, I remember it :D
-
-<line72> should we start assigning tasks ?
-
-<PauloMorfeo> I supose it would be more like taking task onto self rather than assigning...
-
-<WolfgangB> so whats the technical difference between windstille and supertux? Sounds more or less the same to me.
-
-<grumbel> WolfgangB: well, technically its of course similar, gameplay wise however not
-
-<egore> and supertux is more in direction of SDL, while windstille goes towards clanlib
-
-<grumbel> graphically its a bit different since windstille supports lightmapping and 3d sprites
-
-<PauloMorfeo> Grumbel: Is it suposed to scrool like SuperTux or to change screens like the old one... Forget it, i remember, it scrools!
-
-<WolfgangB> would it be easier to change the gameplay in supertux than create something new?
-
-<grumbel> PauloMorfeo: its supposed to scroll around, not screen switches
-
-<grumbel> WolfgangB: no
-
-<PauloMorfeo> Yes, i remember from playing that little demo!
-
-<grumbel> http://pingus.seul.org/~grumbel/tmp/windstille-screenshot-2005-06-25-5.png
-
-<grumbel> thats how windstille looks right now
-
-<grumbel> on the right is a particle based fire
-
-<grumbel> on the left a 3d sprite
-
-<grumbel> in the middle a old 2d sprite
-
-<grumbel> surrounded by light
-
-<grumbel> the glow of the vr-tiles is a seperate highlight-layer
-
-<grumbel> the different layers can be switched on and off via 1,2,3,4
-
-<grumbel> about the 'story'/beginning of the game: game should start in a virtual environment where the player learns the basic movement
-
-<grumbel> after that he leaves the VR, walk a bit around in his apartment, gets phonecall and is called over to a bar in the city
-
-<grumbel> where he then gets the first mission assigned 
-
-<quickflash> http://esoteric.clanlib.org/~khirsch/windstille/Run.avi
-
-<quickflash> I think the head is coming down to fast when the front foot hits, what do you think?
-
-<quickflash> grumbel: about the story... Think if you want voice acting, perhaps make the boss a guy
-
-<quickflash> mainly because women voices are limited :)
-
-<grumbel> quickflash: that run needs quite a bit more work, arm position is wrong, hands should be much higher
-
-<grumbel> not enough up/down of the whole body 
-
-<grumbel> and the leg makes an unnatural quick leap forward
-
-<grumbel> and overall it needs more speed
-
-<line72> hey, I have to run, is there a good place for me to get started with the code ?
-
-<grumbel> line72: http://windstille.berlios.de/wiki/index.php/Jobs has some small tasks every once in a while
-
-<line72> k, i'll play with the code tonight and see what I can do, later
-
-<grumbel> just some more images: http://pingus.seul.org/~grumbel/tmp/windstille-shower.png
-
-<grumbel> thats how the apartment will look like
-
-<grumbel> thats how the subway might look like: http://pingus.seul.org/~grumbel/tmp/windstille-elevator.png
-
-<grumbel> and this is url has basically all sketches around windstille: http://pingus.seul.org/~grumbel/tmp/windstille-files/
-
-<grumbel> and here a whole bunch of random gameplay ideas: http://pingus.seul.org/~grumbel/tmp/puzzles.png
-
-<grumbel> btw. one can zoom in and out with a/o in windstille at the moment
-
-<grumbel> F10 toggles fps 
-
-<grumbel> F11 toggles fullscreen
-
-<grumbel> F12 screenshots
-
-<grumbel> graphic engine also supports rotating the playfield
-
---> PauloMorfe1 (~Augusto at es-217-129-26-108.netvisao.pt) has joined #Windstille
-
-<WolfgangB> is it possible to jump so hight that you reach the upper board?
-
-<grumbel> however beside shaking the screen that might not be so usefull
-
-<grumbel> WolfgangB: nope, but you can press left at startup then you land on the platform to the left
-
-<grumbel> am planing to lowering/shrinking the platforms: http://pingus.seul.org/~grumbel/tmp/windstille-upjumpsketch.png
-
-<-- PauloMorfeo has quit (Read error: 110 (Connection timed out))
-
-<grumbel> so that you would be able to jump up and grab the ledge and pull yourself up
-
-<grumbel> when human
-
---- PauloMorfe1 is now known as PauloMorfeo
-
-<grumbel> anybody interested in implementing a quake-like console for windstille?
-
-<grumbel> would be of little use at the moment, but once we have scripting such things can be extremly helpfull
-
-<WolfgangB> i have not looked at the code much, but i'll give it a try
-
-<WolfgangB> so i can't predict how long it will take to create the console.
-
-<grumbel> there is currently a little-output only thing available
-
-<WolfgangB> now linuxtag is over i'll find more time to do coding :)
-
-<egore> WolfgangB: if MatzeB ports the sripting, you could use that for a console
-
-<egore> WolfgangB: did I miss much today at linuxtag?
-
-<WolfgangB> no. maybe i had just bed luck choosing the presentations, but most of them were not that interesting :(
-
-<WolfgangB> but i got a community ticket  so I can't really complain. 
-
-<egore> WolfgangB: hehe. Did you see the X.org presentation?
-
-<WolfgangB> no, wrong plannig from Linuxtag there. x.org was in one of the smaller rooms, whe I arrived people where already standing in the doorways to watch the presentation.
-
-<egore> like the Xen presentation ...
-
-<egore> it started half an hour to early and the room could have been filled twice
-
-<WolfgangB> but i looked at the exibition. x.org hat a nice demo with 4 videos plaing in transparent windows on the same desktop. another video as background.
-
-<egore> right, that looked great :D
-
-<WolfgangB> grumbel, Of course you missed the LinCity-NG meeting. 
-
-<WolfgangB> ok, that was not an official event on linuxtag
-
-<straver> bye
-
-<-- straver has quit ("leaving")
-
-<grumbel> ok, meeting official over, i'll post a log
\ No newline at end of file

Deleted: trunk/media/wiki/IRC Meeting 2 Brainstorming Summary.wiki
===================================================================
--- trunk/media/wiki/IRC Meeting 2 Brainstorming Summary.wiki	2009-02-15 16:09:33 UTC (rev 2503)
+++ trunk/media/wiki/IRC Meeting 2 Brainstorming Summary.wiki	2009-02-16 21:22:36 UTC (rev 2504)
@@ -1,22 +0,0 @@
-Here are some of the things we discussed and decided on in our second IRC meeting:
-
-==Main Setting==
-The main setting of the game is a planet with abundant natural resources (gold?), and a semi-hostile environment.  People come to this planet hoping to get rich, and enter into the employ of various "bosses", which provide them with equipment and land to mine, in exchange for a cut of the profits.  Bosses and their companies sometimes move from mine to mine - when they find a profitable plot of land, they may have to guard it to keep other bosses from moving in.
-
-Residential areas are organized into colonies, which are surrounded with electric walls to defend from hostile (unintelligent) aliens.  Miners are transported to the mines (outside the colony walls) by shuttle.  
-
-The society here is tough, but not overly hostile.  Most people carry guns, and disagreements are rarely settled by the police.  Communities have sprung up around the mining colonies, including bars and shops.  There is an interstellar government, but it takes a very laissez-faire attitude, and exercises little power on this planet.
-
-Interstellar travel is very expensive, and most people stay on the same planet for most of their lives.  No intelligent alien species have been discovered.
-
-==Plot Elements==
-The main character, Jane, lives on the planet for many years now. She came here like many others in the hope to get rich by mining. Now she works as a mercenary. She has modified her miner suit for combat installing some custom modifications and "extras" she got from a local dealer. She works for the character known as Boss, who employs mercenaries, but keeps the cover of a less interesting business (mining, or junkyard).
-
-The game will start with Jane recovering from a significant physical injury.  She doesn't remember exactly what happened (she had a blackout for some hours because of the shock at the incident), the boss knows what happened but tries to avoid the topic. This is basically a nice element to work on in a later release/episode, we shouldn't reveal it in milestone2. Jane is using a VR training program for physical therapy now (first mission in milestone2).
-
-Jane receives a mission from Boss to rescue a miner from a giant spider.
-
-==Random Stuff==
-The game, and the motivations of the characters, are driven mostly by money.
-
-Jane also has a nemesis.  At some point, this nemesis will rescue Jane.
\ No newline at end of file

Deleted: trunk/media/wiki/IRC Meeting 2.wiki
===================================================================
--- trunk/media/wiki/IRC Meeting 2.wiki	2009-02-15 16:09:33 UTC (rev 2503)
+++ trunk/media/wiki/IRC Meeting 2.wiki	2009-02-16 21:22:36 UTC (rev 2504)
@@ -1,1663 +0,0 @@
-<grumbel> time for meeting start I guess
-
-<pifactorial> yup
-
-<grumbel> added this page to the wiki: http://windstille.berlios.de/wiki/index.php/People
-
-<grumbel> anybody interested should add himself there
-
---> paxed (~paxed at paxed.active.supporter.pdpc) has joined #windstille
-
-<grumbel> so who is new and wasn't there at the last meeting?
-
-<dolphin> I'm new, but looks like I've to go also :(
-
-<grumbel> and especially who is seriously interested in helping of the newcommers?
-
-<wonko> i'm new... just listening atm :)
-
-<MatzeB> I could introduce people who'd like to start with programming...
-
-<pifactorial> I wasn't here at the first meeting
-
-<dolphin> bye->
-
-<grumbel> pifactorial: you want help with story, right?
-
-<quickflash> 89x128 
-
-<paxed> i'm just eyeballing, i probably won't have time to contribute much.
-
-<pifactorial> yeah
-
-<SpoonMeiser> I'm interested in helping
-
-<grumbel> Godrin: gave you svn access 
-
-<grumbel> all those suggested helping with story I suggest to do a: wget -np -m http://pingus.seul.org/~grumbel/tmp/windstille-files/
-
-<grumbel> and browse through the content a bit
-
-<MatzeB> SpoonMeiser: so what do you want to do?
-
-<grumbel> it contains plenty of ideas, sketches and stuff
-
-<grumbel> those people with random ideas should use this page http://windstille.berlios.de/wiki/index.php/Ideas in the wiki to add their stuff
-
-<SpoonMeiser> I'd like to help code, but I find picking up an existing code base to work on fairly intimidating, perhaps sticking to helping out with story
-
-<pifactorial> as far as the story is concerned, who's the minister of information?
-
-<MatzeB> well you can always ask question and such to get into the code...
-
-<MatzeB> you could also do simpler coding stuff like writing scripts or extending/maintaining the flexlay editor
-
-<MatzeB> (script are written in squirrel, editor mostly in ruby)
-
-<grumbel> pifactorial: the current story and sketches is done by me
-
-<quickflash> grumbel is the main approver, since he does the artwork
-
-<pifactorial> are you also the creative mastermind?
-
-<pifactorial> so all seminal ideas flow from you?
-
-<SpoonMeiser> I'm capable of most things code wise, but I don't want to commit to anything big, since I probably won't find the time to do anything too big
-
-<SpoonMeiser> if there are small, well defined tasks, I'll take a look at those
-
-<grumbel> pifactorial: currently I am a bit out of ideas, but since I started windstille and was up until two weeks ago the only one working on it for the last few years, basically all stuff so far came from me
-
-<pifactorial> ok
-
-<grumbel> half of it shamelessly stolen or at least heavily inspired by other games I might add...
-
-<pifactorial> all I meant is, do we come to you and ask about the backstory
-
-<pifactorial> or do we write backstory and give it to you?
-
-<grumbel> there really is not much back story at this point in time
-
-<grumbel> so you could play a part in writing it
-
-<pifactorial> got ya
-
-<MatzeB> SpoonMeiser: well getting the editor running again would be a well defined task...
-
-<grumbel> quickflash: have you written anything down of your story ideas?
-
-<MatzeB> SpoonMeiser: depending on your ruby knowledge this might be a small or big job...
-
-<quickflash> grumbel: have some stuff at work I was playing with
-
-<SpoonMeiser> MatzeB: I've never used ruby, but I hear it's based on Java?
-
-<MatzeB> SpoonMeiser: no
-
-<grumbel> SpoonMeiser: no, its more like python meets perl
-
-<MatzeB> SpoonMeiser: it's more like python with different syntax
-
-<SpoonMeiser> hmmm
-
-<grumbel> SpoonMeiser: with a lot of smalltalk in it
-
-<quickflash> I changed the boss to a large black guy who is similar to that alien obi-wan kenobi goes and talks to in the restraunt in Attack of the Clones (for personality)
-
-<grumbel> for simple cases its really exactly like python, just with begin/end instead of indention
-
-<MatzeB> SpoonMeiser: the editor currently is a base of c++ classes that can draw tiles and stuff
-
-<MatzeB> SpoonMeiser: these can be used from ruby
-
-<MatzeB> SpoonMeiser: so you would have to write ruby code to load levels and then some logic code to handle the gameobjects available
-
-<MatzeB> SpoonMeiser: flexlay already has a well running supertux code which woudl be a good reference on how to do things
-
-<quickflash> to me father-daughter dynamic is more interesting than girl-girl or mother-daughter dynamic
-
-<quickflash> plus it's easier to get guys to do voices than girls :)
-
-<quickflash> also, the boss you have is a young girl, and if you have ever worked with women you will know that women of the same age do not work well together :)
-
-<SpoonMeiser> I couldn't get flexlay to compile last time I checked it out of svn, I'll give it another go though
-
-<grumbel> http://windstille.berlios.de/wiki/index.php/Characters
-
-<grumbel> add least in the 3d models the boss-women looks quite a bit older then the other one
-
-<grumbel> SpoonMeiser: needs latest svn clanlib
-
-<SpoonMeiser> grumbel: I did, finally, get that working
-
-<grumbel> quickflash: anyway, I don't mind changing the relationships a bit
-
-<MatzeB> SpoonMeiser: just ask if you have problems getting stuff compiling
-
-<MatzeB> things might be broken in the svn versions
-
-<pifactorial> quickflash:  give me a quick flash of the story
-
-<pifactorial> or at least the characters
-
-<quickflash> well, really there is only the 3 currently
-
-<SpoonMeiser> MatzeB: I'll take a look and see what I can do, I wasn't checking it out with regards to windstille last time I looked, so I didn't spend too long trying to get it to work
-
-<quickflash> hero is kinda non-descript.  Tough girl persona, she doesn't talk much unless it calls for it.  She never uses her sex to her advantage...
-
-<pifactorial> ok
-
-<MatzeB> SpoonMeiser: I can give you a short intro to the map format later if you're going to work on this
-
-<quickflash> boss is a big friendly black guy who is suprisingly agile, and somewhat cunning, but loyal to the people who work for him, even protective.
-
-<pifactorial> is he an office-type
-
-<pifactorial> or does he do field work?
-
-<quickflash> his cunning is well hidden below his extremely friendly demeanor, so the only ones who get a glimpse of it are his workers (the hero)
-
-<SpoonMeiser> MatzeB: sure
-
-<pifactorial> if his cunning is hidden, he comes across as shallow?
-
-<quickflash> no, not shallow
-
-<pifactorial> just average
-
-<quickflash> just willing to take advantage of a situation so long as no one he cares about gets hurt
-
-<pifactorial> a businessman
-
-<quickflash> yes, but he's in charge of something mundane, like a junk yard, for cover
-
-<pifactorial> ok
-
-<quickflash> and he actually goes out and get's dirty working in the junkyard, because he's not afraid of work
-
-<pifactorial> I think we were using different definitions of cunning
-
-<quickflash> perhaps
-
-<quickflash> intelligently taking advantage of a situation is what I would call it
-
-<pifactorial> I was thinking " Executed with or exhibiting ingenuity." as opposed to "Marked by or given to artful subtlety and deceptiveness."
-
-<pifactorial> ok
-
-<quickflash> yes
-
-<pifactorial> and character #3
-
---> AAAle (~AAAle at host115-188.pool8250.interbusiness.it) has joined #windstille
-
-<pifactorial> AAAle: little late?
-
---> Judas- (~mbn at port423.ds1-fm.adsl.cybercity.dk) has joined #windstille
-
-<quickflash> #3 is the old boss
-
-<quickflash> she is now a competitor that used to work for the boss but now went solo
-
-<pifactorial> retired?
-
-<quickflash> no, she's the same age
-
-<pifactorial> ok
-
-<quickflash> you drop that 3d models head a bit and she will look a lot younger :)
-
-<pifactorial> competitor = evil, or just annoying?
-
-<quickflash> more annoying
-
-<quickflash> she's rather good, and the hero and her go for the same jobs
-
-<pifactorial> where did everyone else go?
-
-<MatzeB> I'd say just normal hard business competition
-
-<grumbel> me too
-
-<quickflash> she's more willing to manipulate people though since she is on her own
-
-<MatzeB> evil for the sake of being evil is strange
-
-<MatzeB> but evil to make money makes sense :)
-
-<pifactorial> hey!  It's everyone else!
-
-<pifactorial> economy-driven universe makes sense
-
-<SpoonMeiser> everyone else is still here, just listening with interest
-
-<pifactorial> but there has to be _something_ darker
-
-<quickflash> not from those 3
-
-<pifactorial> but we have 3 characters, and 0 story, so we can get to that later
-
-<SpoonMeiser> is the structure for the RPG type stuff in windstille yet?
-
-<MatzeB> maybe some jobs come from this "darker" side
-
-<MatzeB> but the 3 shouldn't be directly involved in that
-
-<pifactorial> like an organization?
-
-<quickflash> well the one girl can be, the competitor MatzeB 
-
-<SpoonMeiser> isn't the story just that you're trying to make enough money to get out of there?
-
-<pifactorial> Team Rocket
-
-<pifactorial> I can't believe I just said that\
-
-<grumbel> pifactorial: I would like the basic setting basically completly harmless and non-evil
-
-<MatzeB> quickflash: well I typically find stories more interesting where the "evil"/"Black" side his hidden
-
-* SpoonMeiser slaps pifactorial 
-
-<grumbel> pifactorial: the evil stuff is what those guys might run into later on
-
-<pifactorial> I've gathered that
-
-<MatzeB> quickflash: just actting very indirectly through people like the competitor boss
-
-<pifactorial> yeah, I gathered that grumbel
-
-<MatzeB> who just execute jobs but don't actually know for what or whom
-
-<quickflash> yes, but thinking of the competitor maybe unknowingly getting caught up with the evil stuff, but the boss keeps the hero out of it in the beginning
-
-<pifactorial> but we have to know how the story ends before we start writing it
-
-<PauloMorfeo> Could the storyline be dependant on the jobs the player takes? So if he took "bad" jobs, he would eventually become a bad guy and fight the good guys?
-
-<quickflash> than maybe go to the point where the hero is saving the competitor
-
-<MatzeB> quickflash: the more unknown the evil is the more scary and interesting it is
-
-<jamesg382> mazteb, if I run configure with --enable-debug, will it disable optimization?
-
-<grumbel> pifactorial: only when you want it to be big epic stuff
-
-<quickflash> MatzeB: yes I agree
-
-<MatzeB> quickflash: if you show the bad aliens or whatever right from the start that's plain boring
-
-<MatzeB> jamesg382: yes
-
-<jamesg382> ok, good
-
-<quickflash> but only the boss really knows, he doesn't explain it
-
-<grumbel> pifactorial: my plan goes more to tv-show like, so that you can add episodes wheneever you like
-
-<-- AAAle has quit ("Leaving")
-
-<pifactorial> ok, I think I follow
-
-<quickflash> if it's TV like than it will be truelly character based
-
-<pifactorial> dramatic, not epic
-
-<quickflash> so we need more characters
-
-<grumbel> quickflash: let the competitor save the hero, more interesting
-
-<quickflash> grumbel: yes, like that :)
-
-<pifactorial> heh
-
-<pifactorial> right on
-
---> freed (~freed at d213-103-217-253.cust.tele2.fr) has joined #windstille
-
-<quickflash> anyways, if it's eposodic, need to come up with more characters
-
-<quickflash> there's the bartender already
-
-<quickflash> how should he be like
-
-<pifactorial> if it's episode based, we're going to have to come up with unique, loosely-linked plotlines for each level
-
-<pifactorial> instead of one plot, split up into chapters
-
-<grumbel> pifactorial: not for each level, but for each release
-
-<SpoonMeiser> I fixed flexlay to work on amd64 :)
-
-<pifactorial> ahhhhhhhhhh
-
-<SpoonMeiser> well... compile at least
-
-<MatzeB> SpoonMeiser: svn diff 
-
-<MatzeB> SpoonMeiser: and send it to us
-
-<grumbel> I mean I don't want to solve big fat mytsery at the end of milestone1(2) and/or blow the universe apart
-
-<grumbel> want something I could build on later on
-
-<pifactorial> it's tough - do we want the bartender to be friendly
-
-<quickflash> bartender is an information source, what would make him interesting?
-
-<pifactorial> like the first star wars movie
-
-<pifactorial> it had closure, but not much
-
-<pifactorial> we don't need to know the bartender's background
-
-<SpoonMeiser> Isn't the most important thing at the moment, to get the structure in place that will allow us to have story elements?
-
-<quickflash> no, but need a personality
-
-<pifactorial> but his personality could add atmosphere
-
-<grumbel> bartender should for most part somebody just doing its job, not necesarry friendly all the time, but not evil in any way either
-
-<MatzeB> SpoonMeiser: from what I see it'll mainly be dialogs and scripting cutscenes inside the engine
-
-<grumbel> kind of like most bartenders are in movies
-
-<SpoonMeiser> MatzeB: but aren't there supposed to be 'adventure' areas, where you can choose who to talk to, which jobs to take etc?
-
-<pifactorial> I think the bartender has to be friends with hero though
-
-<jamesg382> mazteB, the game crashes for me when optimized but not when debug is enabled, did you say it was the same for you, too?
-
-<PauloMorfeo> What's the setting of the story? Is that futuristic civilization fighting some other civilization? If so, that planet could be a frontier planet ocupied by both sides. The story of milestone 1 could end up with the hero freeing the planet from the ocupation of the enemy and it would still leave space for future stories.
-
-<pifactorial> friendly enough to give up information
-
-<MatzeB> jamesg382: quickflash had the same problem...
-
-<pifactorial> whoa, coming in the middle
-
-<SpoonMeiser> MatzeB: oh, and the fix to flexlay is just to add -fPIC to the compiler options
-
-<pifactorial> PauloMorfeo: no other civilization, no occupation
-
-<pifactorial> just economy
-
-<grumbel> pifactorial: give him money, he will give you information
-
-<pifactorial> makes sense
-
-<quickflash> so bartender is kinda cold guy who does a lot of listening?
-
-<pifactorial> we can't have _too_ many friendly characters
-
-<pifactorial> I'd prefer warm, but cold might be more interesting
-
-<pifactorial> you know, with an eyepatcjh
-
-<pifactorial> lol, nice sketch, grumbel
-
-<quickflash> like the bartender in Monkey Island 2 :)
-
-<grumbel> the characters should be 'warm', but not so warm that everybody is necesarrily best friend of each other
-
-<pifactorial> I was originally thinking like the Prancing Pony bartender from LOTR, but as I said, cold would probably work better
-
-<grumbel> just bunch of people stuck on some dirty pile of colonie where they have to live with each other
-
-<jamesg382> Mazte, actually, worse than that: it crashes unless I am running it unoptimized, via gdb. So I guess something isn't initialized properly somewhere/
-
-<MatzeB> jamesg382: you know where it crashs?
-
-<SpoonMeiser> everyone is trying to get enough money to get off the dirty colonie?
-
-<quickflash> what's your bt jamesg382 ?
-
-<quickflash> yes, money in itself can make for a boring motivation after a while
-
-<jamesg382> the backtrace when optimized is in the inline player get_state. there is no bt when not optimized because it doesn't crash.
-
-<grumbel> SpoonMeiser: some of them might be happy where they are
-
-<quickflash> my error was with fonts jamesg382 
-
-<grumbel> SpoonMeiser: not everybody wants to live in all-happy StarTrek universe
-
-<jamesg382> I meant, get_movement_state
-
-<SpoonMeiser> quickflash: but since these people aren't going to look back once they've gone, they don't really care about anyone else there?
-
-<grumbel> some like toget their hands dirty every once in a while
-
-<quickflash> they have to care about each other, otherwise it just get's too "mean"
-
-<MatzeB> maybe the planet is in quarantaine or something, basically noone is allowed to leave it
-
-<pifactorial> hmm, the concept of a failing colony would be interesting though
-
-<quickflash> I don't think it should be dispirited
-
-<MatzeB> so that we have a "fixed" universe for the story
-
-<quickflash> MatzeB: that could be an idea
-
-<PauloMorfeo> Me away... Going to do something for my mother!
-
-<MatzeB> or getting tickets to somewhere else is simply really expensive
-
-<grumbel> don't think we need quarantaine
-
-<grumbel> my idea was more that mankind moved out into space and colonized a bunch of planets
-
-<MatzeB> or traveling needs 10years because you don't have faster than light travel :)
-
-<pifactorial> are we looking for an excuse to keep people on the planet?
-
-<grumbel> some of which turned up providing more resources than others
-
-<quickflash> there needs to be some overall conflict that makes it interesting though
-
-<grumbel> and this one is one with less resources
-
-<pifactorial> of course
-
-<quickflash> even tv shows slowly reveal information to make it fun
-
-<pifactorial> why can't people just come and go from the planets?
-
-<MatzeB> I'd like to have an excuse to keep people on the planet...
-
-<MatzeB> we need some kind of motivation why Jane stays on this not so nice place
-
-<grumbel> MatzeB: hunt for gold?
-
-<quickflash> needs something else besides resource gathering, because the people need to be conflicted between that and whatever else we think up
-
-<pifactorial> just like people move around here on earth
-
-<pifactorial> well, she doesn't stay there all the time
-
-<MatzeB> hmm gold hunt would be an interesting thematic too
-
-<quickflash> she stays there because the boss is there
-
-<quickflash> and she likes the boss
-
-<MatzeB> so the people on this planet are people hunting for gold and the bit of economy around that
-
-<MatzeB> (like the bars, shops)
-
-<quickflash> they all stay there for that reason
-
-<pifactorial> Jane stays on the planet because that's where the company office is
-
-<pifactorial> but she gets off the planet as often as possible to do missions
-
-<MatzeB> and the bosses actually "own" a bit of land that they can explore for gold?
-
-<MatzeB> (maybe we should introduce a different material than gold...)
-
-<quickflash> have you guys ever seen a bar where the same guys come everyday
-
-<pifactorial> ahh, social structure
-
-<pifactorial> "bosses"
-
-<grumbel> well, I don't have sunshine all the day where I live, doesn't mean that I suddenly move to the caribbean
-
-<pifactorial> maybe even feudal ;)
-
-<grumbel> so I don't think we need much to keep them there
-
-<quickflash> that's the same reason they stay on the planet, it's there "bar"
-
-<MatzeB> grumbel: well gold hunt would be an interesting motivation
-
-<pifactorial> I don't get it - obviously some people will stay on any planet, but why can't lots of people come and go
-
-<MatzeB> gold hunt is also good for introducing conflicts and twists into the story later
-
-<MatzeB> pifactorial: of course they can come and go
-
-<MatzeB> pifactorial: just we've been thinking in terms of a not so nice palce
-
-<MatzeB> pifactorial: so there has to be some motivation why people move there at all
-
-<pifactorial> ok
-
-<pifactorial> and how hostile is "not so nice"?
-
-<pifactorial> most planets would be very hostile, come to think of it
-
-<pifactorial> compared to any place on earth
-
-<grumbel> half of them could simply be employes of "big-evil company" which were moved there to hunt resources
-
-<MatzeB> well staying with that gold hunt theme people wouldn't be hostile when they sit in the bar or so
-
-<MatzeB> but when someone actually finds a bit of gold they'll start to be hostile
-
-<pifactorial> relocated against their will?
-
-<MatzeB> or the usual fights about who owns which territories
-
-<MatzeB> pifactorial: well the typical gold hunter is a poor person
-
-<MatzeB> pifactorial: that has it's hope to become rich by finding gold
-
-<grumbel> pifactorial: not against their will, its simply their job
-
-<pifactorial> I think entire societies would form around the "mines"
-
-<pifactorial> like I hinted at earlier
-
-<pifactorial> maybe each mine is owned by a different "boss"
-
-<MatzeB> yes that would be a good idea
-
-<pifactorial> but Jane's boss also does bounty stuff on the side
-
---> wapee (~nobody at p54876984.dip.t-dialin.net) has joined #windstille
-
-<pifactorial> and the gold mining is his cover
-
-<MatzeB> maybe the bosses provide material and machines for mining
-
-<MatzeB> and own the land
-
-<MatzeB> but they allow the miners to work there
-
-<pifactorial> and get a cut
-
-<MatzeB> as long as they get 50% of the profits they make or so
-
-<quickflash> bosses each run their company their own way
-
-<MatzeB> there are some stories floating around about people that have become really rich by finding alot of gold
-
-<MatzeB> while in reality the only ones getting rich there would be the bosses
-
-<pifactorial> ahh
-
-<pifactorial> people come to the planet and get trapped
-
-<MatzeB> I'm not sure if we should do this as "companies" or more boss + 5 miners style...
-
-<MatzeB> if we talk about companies I'm thinking about hundrets of workers...
-
-<MatzeB> pifactorial: it's not really trapped
-
-<pifactorial> that's a tough one
-
-<pifactorial> depends on the sizes of the mines
-
-<MatzeB> pifactorial: it's just playing the illusion to them that they could get rich by finding lots of gold
-
-<MatzeB> pifactorial: there probably is a really small chance that this happens
-
-<MatzeB> maybe there are also some people who live there for a longer time
-
-<pifactorial> MatzeB: well, you know the scenario where they come to get rich, and then they are stuck there getting other people rich (but staying poor)
-
-<MatzeB> who have understood that you can't get rich by doing this
-
-<MatzeB> but they just live along with the small profits they make
-
-<MatzeB> pifactorial: yes that's what I mean with gold hunting
-
-<MatzeB> pifactorial: I just wouldn't talk of a "trap"...
-
-<quickflash> well, being that it's the future you don't need as many "human" workers
-
-<pifactorial> but I mean, most people can't even afford to leave
-
-<SpoonMeiser> perhaps Jane isn't top of her game, and this is the only place she can currently find work? maybe she's new to this?
-
-<grumbel> pifactorial: they don't want to leave
-
-<quickflash> might be a lot of robots per company, but like MatzeB's suggestion of maybe like 1 boss + 5 guys
-
-<grumbel> pifactorial: has little todo with money
-
-<pifactorial> what's the story behind Jane's powersuit?
-
-<grumbel> pifactorial: if you have stayed there for years hunting for 'gold' you might actually start to like that place
-
-<MatzeB> robots or just futuristic mining equipment...
-
-<SpoonMeiser> perhaps most places in the universe are the same, the living costs in the nicer places far too high
-
-<MatzeB> that "powersuit" could be the normal mining equipment
-
-<grumbel> pifactorial: after all those workers there have build the colonie or a part of it
-
-<MatzeB> maybe Jane has done some personal modifications to it...
-
-<grumbel> pifactorial: its @home
-
-<pifactorial> about the hostility of the planet - is it hostile because of people, or because of environment?
-
-<quickflash> make the powersuit something usually used for mining, but janes is modified for bounty hunting
-
-<SpoonMeiser> MatzeB: like the A Team :P
-
-<MatzeB> to make it more usable for fighting
-
-<grumbel> pifactorial: environment
-
-<MatzeB> SpoonMeiser: not like making an A-Bomb from a trashcan in 5 minutes...
-
-<MatzeB> SpoonMeiser: more like fiddeling on it for years
-
-<MatzeB> SpoonMeiser: every now and then a few hours after work
-
-<pifactorial> ok so no need of evil bosses/companies that rule the planet with an iron fist
-
-<pifactorial> I had the wrong idea
-
-<grumbel> you can still have a evil company or many of them
-
-<MatzeB> yes
-
-<grumbel> its after all a new born collonie so many parties will try their luck
-
-<MatzeB> what would make such a company evil?
-
-<pifactorial> I thought maybe the powersuit was a gift from Boss
-
-<pifactorial> but the general feel of the planet isn't dystopian
-
-<MatzeB> using slaves to do their work?
-
-<pifactorial> not caring about its workers
-
-<pifactorial> yeah
-
-<pifactorial> they can make more money that way
-
-<SpoonMeiser> I would imagine that law enforcement would be weak in a new colonie, allowing the 'evil' people more opportunities in these places
-
-<pifactorial> but is it dystopian or not?
-
-<PauloMorfeo> Back!
-
-<pifactorial> is it a happy place, or a hellish place?
-
-<MatzeB> pifactorial: something in between I'd say...
-
-<pifactorial> because "somewhere in between"
-
-<pifactorial> is kind of vague
-
-<MatzeB> pifactorial: you can live okay inside the colonie
-
-<MatzeB> but it's not nice if you walk around outside the colonie
-
-<pifactorial> is the colony one of many on the planet, or does everyone live in the same place?
-
-<MatzeB> in that you can't live long without such a miner suit
-
-<pifactorial> dome?
-
-<MatzeB> there surely are some others I'd assume
-
-<MatzeB> always a good possibility to introduce new places/characters later
-
-<MatzeB> some dome type thingy might be there for air and protection against environment...
-
-<pifactorial> are the settlements in domes or something like that?
-
-<PauloMorfeo> About keeping people in the planet, it could be a directive of the empire. The Empire could determine that no one could change from the panet they lived in without permission, in order to control the population on the planets. So, we would have the workers coming to work on the planet and leaving when the comission was over, leaving the locals angry for wanting to leave also. We could have ilegal attempts to emigrate. We could have su
-
-<SpoonMeiser> I hate to sound negative, but surely at the moment we just want to put in place the elements that will allow us to tell the story... have at least one 'walk around and talk' area, and linked with at least one 'powersuit' area?
-
-<pifactorial> is there an "Empire"?  What's with inter-stellar government?
-
-<MatzeB> SpoonMeiser: current plan is VR training program for powersuit
-
-<MatzeB> SpoonMeiser: the bar and janes apartment to walk around and get a first job
-
-<grumbel> wouldn't make the planet that badly suited for humans
-
-<MatzeB> and a first job in a wood type environemnt with spiders...
-
-<PauloMorfeo> pifactorial: is there an "Empire"? I don't know! Is there?
-
-<grumbel> just maybe hostile enemies out there or so
-
-<pifactorial> I think they talked more about the engine last meeting
-
-<MatzeB> hmm yes
-
-<SpoonMeiser> MatzeB: my point is, shouldn't we be discussing getting that section done then? we could talk about story, literally forever
-
-<MatzeB> that way we could do without expensive domes
-
-<grumbel> you don't walk barefoot through the desert either, but it doesn't instantly kill you either
-
-<MatzeB> but just with electro walls around the colony or so...
-
-<-- koorek has quit ("Lost terminal")
-
-<grumbel> SpoonMeiser: this game should be for a lot of part based around the story, so its quite important
-
-<pifactorial> you need more safety equipment underground anyway
-
-<PauloMorfeo> I prefer to see the cities as somewhat fortified places to keep nasty creatures from getting in!
-
-<MatzeB> SpoonMeiser: currently we have good brainstorming, I'd hate to interrupt that now...
-
-<SpoonMeiser> MatzeB: true
-
-<-- Godrin has quit (Remote closed the connection)
-
-<grumbel> SpoonMeiser: ie. more like, now we have a conflict between these and that party, how could they resolve it? and not, we have a gun implemented, who do we shoot?
-
-<pifactorial> grumbel: so what about it?  Is there an Empire?
-
-<MatzeB> it's also a good base to write interesting dialogs
-
-<grumbel> pifactorial: there might be one, but its not really evil or anything
-
-<MatzeB> the empire might just not have much might inside the colonie
-
-<pifactorial> yeah, I would think lassez-faire
-
-<MatzeB> ie. it's there but they have nearly no milita/police there
-
-<pifactorial> a "rim world"
-
-<SpoonMeiser> grumbel: is it going to be easy to implement the different game 'modes' wuth the current code though? seems that this might be a big job
-
-<MatzeB> letting the people settle their disagreements themselfes
-
-<MatzeB> that's why nearly everyone has a gun...
-
-<jamesg382> ok, via the tedius method of absolutely zillions of debug cout statements, I am now quite sure that is crashes at if (player->get_movement_state() == Player::DEAD), line 140 of game_session.cpp
-
-<grumbel> SpoonMeiser: it requires a bit of work, but its not rocketscience
-
-<MatzeB> jamesg382: I can take a look
-
-<MatzeB> SpoonMeiser: I'd like to drive development by a story
-
-<PauloMorfeo> Will there be "cut-scenes" (or whatever you want to call them) or "movies" or something to present us with story elements?
-
-<MatzeB> SpoonMeiser: not drive the story by what the engine currently can do
-
-<MatzeB> PauloMorfeo: scripted cutscenes
-
-<quickflash> ok, let's say this for the basic premis:  Space travel is expensive.  The current windstille planet is a mining planet.  There are many companies on the planet, and they mine for things in different ways
-
-<grumbel> PauloMorfeo: most stuff should happen ingame
-
-<pifactorial> yeah
-
-<pifactorial> we already have the groundwork for I couple
-
-<quickflash> some ways are high tech, some are not
-
-<ruskie> btw is there some basics or is it mostly non-linear(well semi linear) type of game????
-
-<ruskie> s/is/are/
-
-<grumbel> PauloMorfeo: in-game as in in-game cutscene, not like now we switch to random render movie
-
-<PauloMorfeo> I played "Pachi el Marciano" yesterday, it has some cartoon like screenshot instead of movies. It doesn't work bad!
-
-<pifactorial> @quickflash: Boss owns one of these companies
-
-<quickflash> our hero works as a bounty hunter for someone who owns a say junking company.  
-
-<grumbel> ruskie: its not linear, but not really non-linear either
-
-<jamesg382> I like the idea of driving development by a story, too, as long as everyone who is developing the story realises that due to technical constraints quite a lot of it won't make it into Milestone 1, if it makes it in ever. I.e., story si good for background and inspriration, even if much of it doesn't get used
-
-<ruskie> as said semi-lineat
-
-<ruskie> -t+r
-
-<grumbel> ruskie: ie. you might change missions, talk with different people, but you want have simcity-like do whatever you want
-
-<pifactorial> it's a linear storyline with non-linear gameplay
-
-<pifactorial> or maybe it isn't ;)
-
-<SpoonMeiser> MatzeB: if I'm being counter productive, just tell me to shut up :) but, we know that the story will call for walking around and talking to people, and moving between different game modes, my opinion is that we should work on getting that working
-
---> AAAle (~AAAle at host115-188.pool8250.interbusiness.it) has joined #windstille
-
-<MatzeB> SpoonMeiser: we sure will
-
-<MatzeB> SpoonMeiser: just most projects I did before had this story driven by the engine
-
-<quickflash> most jobs involve in some way these other companies, either they need someone to help them get back to work, or in general they just need something cleared out
-
-<MatzeB> SpoonMeiser: which is not good...
-
-<ruskie> so how futuristic is this?
-
-<MatzeB> SpoonMeiser: I'd like to think of it as a movie
-
-<MatzeB> SpoonMeiser: we wanna tell a story
-
-<MatzeB> SpoonMeiser: not just show our special effects...
-
-<quickflash> let's say there aren't too many bounty hunters on the planet, so jane always has a job
-
-<pifactorial> ruskie: quite, rather
-
-<PauloMorfeo> If it is going to be movie like, it must have a very non-linear story, me thinks.
-
-<MatzeB> PauloMorfeo: currently we're mostly talking about background setting...
-
-<grumbel> quickflash: yep, sometimes the companies might need capable motivated local people instead of their underpayed not always motivated workers
-
-<ruskie> PauloMorfeo, semi-linear... yo uget to do linear missions I assume but pick them at random and so on
-
-<pifactorial> ruskie: Alien-ish tech level I think
-
-<SpoonMeiser> MatzeB: I agree, but we have a general idea, enough to get working on the engine with - changing scripted elements is likely to be easier to do later
-
-<quickflash> grumbel: well workers just can't do it, they are workers, not warriors
-
-<MatzeB> will there be a concept of people "owning" land?
-
-<MatzeB> will the bosses own the mines?
-
-<grumbel> quickflash: that too
-
-<MatzeB> will bosses just get out and start mining at some place noone else mined yet?
-
-<ruskie> hmmm I wouldn't go with bosses except where necesary...
-
-<pifactorial> that
-
-<ruskie> there should be mission objectives and such
-
-<MatzeB> that would allow some "evil" companies trying to take over mines that found gold...
-
-<PauloMorfeo> Does the planet have nasty creatures? If so, many of the jobs could revolve about rescuing some valuable equipment or person out of a mine that has been overrun by those creatures. Or maybe even overrun by pirates and bandits.
-
-<grumbel> quickflash: but sometime they simply might not want to do it, "Hey, my contract didn't list that, no way..."
-
-<SpoonMeiser> how are we planning to introduce the VR tutorial? force players to do it, or have it as an optional 'quest', perhaps a hardware shop offers free powersuit orientation to customers?
-
-<grumbel> PauloMorfeo: yes, thats the plan
-
-<grumbel> PauloMorfeo: http://pingus.seul.org/~grumbel/tmp/windstille-spider2.png
-
-<MatzeB> SpoonMeiser: IMO we should make it so that you can complete it in 1 minute if you know how to control the character...
-
-<PauloMorfeo> :p I missed most of the beggining of the discussion...
-
-<ruskie> lol
-
-<grumbel> SpoonMeiser: thats where the game starts
-
-<MatzeB> SpoonMeiser: farcry did that quiet nicely if you know the game...
-
-<grumbel> MatzeB: how did farcry do it? know the game, but never played it
-
-<MatzeB> it basically instructed you how to get through the obstacles in the first level
-
-<MatzeB> but if you already knew how to control it you just walked forward and were done
-
-<pifactorial> back to the question - do you make the suit, or get the suit?
-
-<SpoonMeiser> MatzeB: wouldn't it be nice if a player didn't have to do it at all? but it was linked in via the 'walk about' game mode, like other missions?
-
-<grumbel> pifactorial: get it and improve it
-
-<MatzeB> they also introduce a small bit of story to make the tutorial interesting
-
-<ruskie> so Jane is a merc...
-
-<MatzeB> like mans watching you so you had to duck...
-
-<pifactorial> grumbel: if that's the decision, then it's difficult to link the tutorial into the game
-
---> cory (cory at torque.acm.cs.rpi.edu) has joined #windstille
-
---> miguel (~no at 210.Red-80-37-149.pooles.rima-tde.net) has joined #windstille
-
-<SpoonMeiser> how does the story start, is there a particular point we start with? something significant? or do we start with 'just anothre day in the life of Jane'?
-
-<grumbel> pifactorial: why so?
-
-<MatzeB> I'd say another day...
-
-<MatzeB> the monthly VR training on the schedule...
-
-<pifactorial> because Jane already knows how to use the suit - she made it and has owned it for a long time
-
-<pifactorial> why does she have a training program?
-
-<PauloMorfeo> The tutorial could hapen in home! We start at home and we get tooltips telling us what to do to leave home out to the town
-
-<MatzeB> to stay fit :)
-
-<grumbel> pifactorial: somebody improved the VR programm so that its now actually usable for suit training
-
-<pifactorial> hmm, that might work MatzeB
-
-<SpoonMeiser> MatzeB: if say, she's coming back to work after being injured, or just starting employment with the boss, then we also have a reason why she might have to do the tutorial
-
-<grumbel> pifactorial: or otherwise updated it
-
-<ruskie> hmmm
-
-<ruskie> I like the idea just starting the work
-
-<pifactorial> physical therapy?
-
-<grumbel> pifactorial: 
-
-<grumbel> pifactorial: good idea
-
-<SpoonMeiser> or maybe she's running the tutorial to test her latest suit modification
-
-<ruskie> leaves the ability to improve the suit and other stuff...
-
-<MatzeB> the idea of recovering from an injury is good
-
-<grumbel> something like broke a leg a few weeks ago and has now to get back to work
-
-<ruskie> afk
-
-<pifactorial> had to be rescued
-
-<MatzeB> if we make it so taht Jane doesn't really remember what happened we have a nice element for later stories again :)
-
-<pifactorial> by her nemesis
-
-<jamesg382> mazteb, for some reason player == 0 in GameSession::draw
-
-<pifactorial> :D
-
-<grumbel> jamesg382: player never inited, use Player::current() maybe?
-
-<MatzeB> jamesg382: that might have to do with 1 of my hcanges...
-
-<MatzeB> I'll check it
-
-<MatzeB> didn't know GameSession keeps another ref to the player
-
-<MatzeB> I wonder why it never crashed for me
-
-<MatzeB> seems like we're out of story ideas now
-
-<MatzeB> are there some details in this setting we missed?
-
-<MatzeB> will someone summarize the setting and write it down?
-
-<pifactorial> well, I think we have enough groundwork
-
-<pifactorial> that the story guys can start meeting
-
-<pifactorial> and set some stuff in stone
-
-<MatzeB> most important thing would be to derive some dialogs, cutscenes and first jobs from this setting...
-
-<jamesg382> I think it's not my fault, but if in Europe you are given a number in the form "013-310330", then you type "013310330" and nothing else into the phone, right?
-
-<MatzeB> yes
-
-<MatzeB> there is no - on the phone
-
-<jamesg382> indeed
-
-<MatzeB> jamesg382: svn should be fixed
-
-<paxed> it's usually an area code before the dash...
-
-<jamesg382> must jist be engaged or something
-
-<jamesg382> they are in the same area, I think
-
-* paxed is actually in an area whose code is 013 :P
-
-<quickflash> grumbel: do you want to take the aspects of the story info we came up with and write that down?
-
-<grumbel> quickflash: yes, we need to move that into the wiki
-
-<pifactorial> if you tell us what exists, we can fill in the dialogues
-
-<MatzeB> we just create the a whole nice setting here in irc
-
-<PauloMorfeo> Who here will be willing to do real voices into the game?
-
-<MatzeB> someone would just need to place that in an logical order and write it down
-
-<MatzeB> PauloMorfeo: me
-
-<quickflash> I can do 1 female voice and 2 male voices
-
-<pifactorial> lol
-
-<PauloMorfeo> haha...
-
-<pifactorial> I don't want to know
-
-<MatzeB> you know someone female who would speak?
-
-<quickflash> my wife does the female voice :)
-
-<MatzeB> ah nice
-
-<PauloMorfeo> I will do voices also if required! Nobody else?
-
-<PauloMorfeo> Everybody shy?
-
-<-- miguel (~no at 210.Red-80-37-149.pooles.rima-tde.net) has left #windstille
-
-<pifactorial> I would if somebody would ship me some recording equipment
-
-<MatzeB> well for milestone2 we don't have that many characters anyway...
-
-<quickflash> I'll do the boss, have a voice for him
-
-<MatzeB> pifactorial: I used my builtin soundcard and a cheapo micro
-
-<jamesg382> I wouldn't mind but I'm not sure if I can get a mic to work with my PC, as the sound card only has a digital in. So if there are enough other people already I won't bother, but if you need more voice people, or if an English accent could be useful, I could maybe try to get my parents to send me one of my super-cheapo sound cards from hoem in the post
-
-<MatzeB> pifactorial: but works quiet well
-
-<pifactorial> hmm every character will have a different accent
-
-<jamesg382> heh
-
-<PauloMorfeo> That's not bad! That is nice.
-
-<pifactorial> we want a pretty high standard for sound quality
-
-<pifactorial> which is hard if everybody's using a different mic
-
-<MatzeB> pifactorial: we could simply try it...
-
-<PauloMorfeo> That might be hard... Keeping all voices with similar quality...
-
-<pifactorial> it's worth a try
-
-<MatzeB> pifactorial: I added an experimental file to svn which I did
-
-<grumbel> while sound quality might be a problem, getting proper voice acting itself done is also far from easy
-
-<quickflash> I'll do the voice mixing stuff too, I have some software that's nice for that
-
-<grumbel> person with a mic doesn't make a good actor
-
-<PauloMorfeo> Sure is! How often we get a game with real voices...?
-
-<MatzeB> yep
-
-<jamesg382> Sound quality is nowhere near as important with voice as with music. You have to really concentrate to tell the difference between a good mic and a bad mic with voice.
-
-<MatzeB> how you speak the stuff is important
-
-<pifactorial> but if anybody uses homestarrunner.com, you know the low quality of Marzipan's voice, for example
-
-<SpoonMeiser> what are the changes that need to be made to flexlay?
-
---> yonil (~me at bzq-80-40-61.red.bezeqint.net) has joined #windstille
-
-<grumbel> SpoonMeiser: need to decide on mapformat and implent that properly
-
-<grumbel> SpoonMeiser: then adding all the gameobjects, triggers and stuff
-
-<MatzeB> well should I do intro do flexlay now?
-
-<MatzeB> SpoonMeiser: mapformat will be based on lisp structures
-
-<SpoonMeiser> grumbel: did you come to a decision from your HP forum post about tilemaps?
-
-<MatzeB> SpoonMeiser: that is you basically have a list that contain symbols strings, int, floats and other lists
-
-<jamesg382> maybe for voices we should have a single piece of text that everyone reads out and submits, and then we could discuss which voices are best for which characters?
-
-<MatzeB> a trigger mmight look like this in this format:
-
-<MatzeB> (trigger
-
-<MatzeB>  (name "blup")
-
-<MatzeB>   (x 202) (y 100) (width 50) (height 59)
-
-<MatzeB> )
-
-<pifactorial> is there a web interface to our svn?
-
-<MatzeB> yes
-
-<MatzeB> moment...
-
-<SpoonMeiser> MatzeB: yeah, I get the idea, similar(ish) to a hash in perl
-
-<pifactorial> jamesg382: sounds good to me
-
-<grumbel> SpoonMeiser: yes, going to use the first aproach, the classic one with 32x32 tiles
-
-<grumbel> SpoonMeiser: and then need automatic tile-adding
-
-<MatzeB> http://svn.berlios.de/viewcvs/windstille/
-
-<grumbel> SpoonMeiser: and some way to mark edges
-
-<SpoonMeiser> grumbel: soo we put in the impassable blocks, and the decoration is automatically added?
-
-<pifactorial> good stuff
-
-<MatzeB> SpoonMeiser: that's the current level in svn: http://svn.berlios.de/viewcvs/windstille/trunk/data/levels/newformat2.wst?rev=511&view=markup
-
-<MatzeB> SpoonMeiser: the ground blokc is basically a list of properties and a (objects list
-
-<MatzeB> that contains all the GameObjects
-
-<grumbel> SpoonMeiser: half automatic I would say, ie. editor has a function to mark non-tiling tiles and automatically add decor tiles
-
-<MatzeB> GameObjects are TileMap, background images, triggers, spawnpoints, ...
-
-<MatzeB> badguys other people
-
-<MatzeB> everything that is somehow on screen or forms a logical unit for gameplay...
-
-<MatzeB> the thing that some people call "Entity"
-
-<MatzeB> in the engine we basically have 1 class per GameObject
-
-<MatzeB> this class has own loading code
-
-<MatzeB> you should model it like that in the flexlay editor as well
-
-<pifactorial> MatzeB, you sound like my boss
-
-<pifactorial> nice accent
-
-<MatzeB> heh :)
-
-<MatzeB> well it's not a perfect recording yet
-
-<MatzeB> but I didn't want to do it again after 8 tries
-
-<pifactorial> but it's a good example
-
-<MatzeB> I just needed something for testing
-
-<pifactorial> oh man
-
-<MatzeB> the word ability has too much expression
-
-<MatzeB> as I had spoken it wrong 7 times before :)
-
-<MatzeB> the "suit" also sounds a bit wrong...
-
-<pifactorial> I'm Canadian, and everybody knows Canadians speak perfect English ;)
-
-<PauloMorfeo> Where you downloaded it from? I want to hear it too :(
-
-<MatzeB> I'm german and only know english from school, movies and irc...
-
-<pifactorial> http://svn.berlios.de/viewcvs/*checkout*/windstille/trunk/data/sounds/speech/vr_intro.ogg?rev=504
-
-<SpoonMeiser> pifactorial: I'm British with a Canadian girlfriend, I know Canadians don't speak proper English :P
-
-<pifactorial> lol, Arnold Schwarzenegger movies
-
-<pifactorial> eh?
-
-<MatzeB> he's a senator so he has to speak good english, doesn't he? ;-)
-
-<MatzeB> s/senator/governor/ or whatever
-
-<PauloMorfeo> MatzeB: How old are you? That voice sounds very deep.
-
-<pifactorial> it's funny hearing British people try to do a Canadian accent
-
-<MatzeB> PauloMorfeo: 23
-
-<SpoonMeiser> pifactorial: I can imagine
-
-<MatzeB> PauloMorfeo: yes it's a deep voice
-
-<MatzeB> PauloMorfeo: I'd like to speak some character that matches that
-
-<pifactorial> SpoonMeiser:  vice versa, I would think
-
-<pifactorial> we could make boss german
-
-<PauloMorfeo> haha
-
-<MatzeB> :)
-
-<PauloMorfeo> Tha boss with tha german accent!
-
-<MatzeB> and I though the evil bosses are always french
-
-<MatzeB> but that is probably after the movies have been translated :)
-
-<MatzeB> but if you think I'll be talking in nazi-accent, forget it ;-)
-
-<MatzeB> this is no WW2 game...
-
-<PauloMorfeo> I didn't knew nazis had a special accent...
-
-<MatzeB> well in most english movies they surely have :)
-
-<PauloMorfeo> Anyway, speaking english, you'll hardly sound anything similar to a nazi accent.
-
-<MatzeB> things like "Ah mein Leben!" when they're dying...
-
-<PauloMorfeo> I don't supose we have any scotish dude around? That would be fun!
-
-<pifactorial> you sound like the german guy who buys the powerplant in the simpsons
-
-<MatzeB> pifactorial: are you going to write down the background stuff from irc?
-
-<jamesg382> I can't believe I have a like $3000 PC and 4 state of the art mobile phones on my desk and a microphone and I can't work out to get my voice into my computer
-
-<pifactorial> if anybody here watches the simpsons
-
-<pifactorial> obsessively
-
-<SpoonMeiser> :)
-
-<MatzeB> everyone does :)
-
-<grumbel> but only the first few seasons ;)
-
-<pifactorial> MatzeB: I suppose I could, but I'm not sure I'm aware of the final decisions
-
-<pifactorial> or just a brainstorming summary?
-
-<PauloMorfeo> And what about recording into the hard drive something that is going out to your PC speakers!? I've never managed to do that :S
-
-<MatzeB> pifactorial: simply do some or ask again :)
-
-<MatzeB> pifactorial: I think we were pretty fixed on:
-
-<MatzeB> - gold hunt athmopshere (maybe something else than gold)
-
-<MatzeB> - we're on a small mining planets
-
-<MatzeB> - people get there in the hope to get rish
-
-<PauloMorfeo> Definetly something less common than gold, no?
-
-<MatzeB> - you have to work for "bosses" that provide you with mining facilities but you have to share your profits with them
-
-<MatzeB> - the planet is a not so nice planet, but you can easily live and breath there
-
-<MatzeB> - there is few police/law enforcement present
-
-<MatzeB> most people settle their issues with themselfes (that's why everyone has a gun)
-
-<MatzeB> - There is some economy around the miners, like bars and shops
-
-<jamesg382> ARG! I've worked out the problem! My microphoen is broken!
-
-<MatzeB> - Jane will be the main character of the story she has worked as miner in the past
-
-<MatzeB> but now is a bounty hunter or something
-
-<MatzeB> - She has a modified miner suit
-
-<MatzeB> on which she added some weapons and more armor and other extras...
-
-<MatzeB> She mostyle works for miner boss #1...
-
-<MatzeB> In milestone2 we'll also meet the barkeeper
-
-<MatzeB> and eventually boss#2 that often is in competition to boss#1
-
-<PauloMorfeo> http://www.fileuniverse.com/uploads/lada.mp3 Just as a note, that voice is not mine!
-
-<MatzeB> - Bosses typically use a place on the planet and start mining there
-
-<MatzeB> - If the mine has found gold you have to be carefull and guard the place
-
-<MatzeB> as other "evil" miners will try to overtake the mine
-
-<MatzeB> or people trying to steal the mined gold and such
-
-<MatzeB> though most mines only find small amounts of gold and are not interesting
-
-<MatzeB> Bosses typically switch mining places from time to time...
-
-<MatzeB> There are other planets but we don't know much of them
-
-<MatzeB> Traveling is expensive and people mostly feel home on the colonie after living there for years
-
-<MatzeB> ok that's all I remember for now
-
-<MatzeB> - windstille releases will have episodic character like a TV show
-
-<jamesg382> woo I got my microphone working!!!
-
-<MatzeB> - colonies just places where people live on the planet
-
-<MatzeB> there are electro walls around colonies
-
-<grumbel> anybody posting that to the wiki as we speak?
-
-<MatzeB> the story will start with jane recovring from some injury
-
-<MatzeB> she doesn't really remember what happened, just somethinge with a *type in text here*
-
-<MatzeB> this will not be revealed in milestone2 but in later episodes
-
-<MatzeB> she has to do the VR training program again because she was recovering
-
-<MatzeB> she talks to boss and gets a new job about retrieving a miner who has been lost in the wood or so...
-
-<MatzeB> The miner will be captured by a big spider
-
-<SpoonMeiser> how about this for the start of the story: intro is Jane as a miner, some mining accident occurs and Jane attempts to rescue her co-workers, game starts with Jane recovering from injury and boss recruits her into a new role of mercenary/bounty hunter/whatever?
-
-<pifactorial> do mines exist inside or outside of colony walls?
-
-<MatzeB> pifactorial: outside
-
-<MatzeB> there'll be shuttles that transport miners to the mines
-
-<MatzeB> SpoonMeiser: how do we explain then that Jane has all the extras on her mining suit already?
-
-<MatzeB> SpoonMeiser: also I'd prefer not to tell from the past...
-
-<SpoonMeiser> MatzeB: uhh... she's a hobbiest?
-
-<MatzeB> only revealing this from time to time in some episodes
-
-<SpoonMeiser> MatzeB: OK, that makes sense actually, not to get bogged down with history
-
-<MatzeB> SpoonMeiser: well she does it for a living
-
-<MatzeB> SpoonMeiser: but she likes working with electric stuff, tuning her suit
-
---> bob4rrttt (~quickflas at c-24-14-62-112.hsd1.il.comcast.net) has joined #windstille
-
-<MatzeB> SpoonMeiser: that's why I prefer this "can't remember what happened on that accident" thing...
-
-<SpoonMeiser> MatzeB: So long as we don't have a cliched 'total amnesia' story :)
-
---- bob4rrttt is now known as quickflash2
-
-<MatzeB> not total amnesia
-
-<MatzeB> more like I remember that shuttle crushing on me...
-
-<MatzeB> but no idea how I got there and why...
-
-<MatzeB> but her boss or someone might be able to tell her later
-
-<MatzeB> it's just a few minutes lost in the mind
-
-<MatzeB> because of the shock
-
-<SpoonMeiser> makes sense
-
-<quickflash2> any more techinical things people want to talk about?
-
-<MatzeB> so will someone write this down?
-
-<MatzeB> would be a good thing to get involved ;-)
-
-<pifactorial> ok
-
-<pifactorial> I got a first draft in the wiki
-
-<pifactorial> http://windstille.berlios.de/wiki/index.php/IRC_Meeting_2_Brainstorming_Summary
-
-<MatzeB> looks good
-
-<SpoonMeiser> the windstille specific changes that need to be made to flexlay, should these be mentioned on the flexlay wiki, or the windstille wiki?
-
-<MatzeB> as long as you link to them it shouldn't matter I assume...
-
-<grumbel> SpoonMeiser: windstille one is probally better, since thats where peoples focus is 
-
-<quickflash2> anything else to discuss?
-
-<grumbel> SpoonMeiser: unless you want to write some long interesting guide into flexlay that would be usefull for other projects as well, then thats better placed in flexlay wiki and linked
-
-<SpoonMeiser> grumbel: in the windstille wiki then :)
-
-<grumbel> quickflash2: lets check the checklist :) http://windstille.berlios.de/wiki/index.php/Design_Discussion_CheckList
-
-<quickflash2> were 3d sprites discussed at all?
-
-<MatzeB> quickflash: so far we mostly discussed about setting
-
-<MatzeB> quickflash2: so what about the 3d sprites?
-
-<quickflash2> are we planning on using them in milestone 1?
-
-<grumbel> quickflash: yes
-
-<grumbel> don't see any reason why not
-
-<MatzeB> will we call this release milestone2?
-
-<grumbel> after all we already have one rotating around
-
-<MatzeB> as there already was some release...
-
-<MatzeB> quickflash2: should be possible to get 3d chars working
-
-<grumbel> wondering that as well
-
-<MatzeB> quickflash2: if we hit unexpected problems we can still go back to sprites
-
-<grumbel> could be milestone3 from the number of releases, but then the first one was really 'basic'
-
-<grumbel> milestone2 with version number 0.3.0 might be confusing
-
-<grumbel> we could also simply give it a uniq name
-
-<quickflash2> well, I was working on the animations from an in game perspective, so using whatever method is going to be used by default would help a bit
-
-<grumbel> like "Windstille - The Beginning"
-
-<quickflash2> making animations outside the game leads to some ugly animations- like the running one :)
-
-<MatzeB> Episode One?
-
-<grumbel> that one has some baaaaadddd karma ;)
-
-<MatzeB> :)
-
-<jamesg382> man, I just recorded myself, I'd forgotten that my voice really isn't cool. Anyway, http://galaxyhack.sourceforge.net/rec1.ogg
-
-* SpoonMeiser shudders
-
-<MatzeB> quickflash2: I don't see how 3d sprites would look different from prerendered ones
-
-<pifactorial> jamesg382:  sounds good to me
-
-<quickflash2> it's more matching up the movements in player.cpp
-
-<MatzeB> jamesg382: you should probably speak a little slower...
-
-<pifactorial> it's not Canadian English, but it's workable
-
-<PauloMorfeo> jamesg382: Don't know what you're talking about! Sounds like a good enough voice to me!
-
-<jamesg382> yes, I did speak too fast
-
-<grumbel> jamesg382: sounds pretty good
-
-<quickflash2> jamesg382 I like it
-
-<PauloMorfeo> Sounds like the voices of those dudes that comment those documentaries of wild life in Africa.
-
-<MatzeB> jamesg382: would make a good character
-
-<jamesg382>  if you need a nature documentary presenter character, I'm your man
-
-<pifactorial> lol
-
-<quickflash2> jamesg382: it's not too fast if you ask me, it's normal for an english accent
-
-<MatzeB> well depends if a character speaks it it's probably ok...
-
-<MatzeB> for background story it was a bit too fast for me...
-
-<MatzeB> but maybe that's because I'm not a native english speaker
-
-<PauloMorfeo> At least that's easy to change. Just speak slower if needed... :p
-
-<pifactorial> grumbel: What's the story behind the name Windstille?  Is it the name of the planet?  Does it mean something?
-
-<PauloMorfeo> Is that word German?
-
-<MatzeB> it's a german word
-
-<grumbel> pifactorial: calm air
-
-<pifactorial> so is that the planet's name?
-
-<PauloMorfeo> Similar to english: Still Wind
-
-<grumbel> pifactorial: no
-
-<PauloMorfeo> Name of girl?
-
-<pifactorial> lol Still Wind is an oxymoron
-
-<MatzeB> just a cool name for the game I assume...
-
-<MatzeB> pifactorial: indeed :)
-
-<grumbel> pifactorial: its basically two things, a word play on Turrican which again is a word play on hurrican
-
-<MatzeB> but a nice one
-
-<-- freed has quit (Read error: 104 (Connection reset by peer))
-
-<PauloMorfeo> oxymoron? What's that? It has anything to do with moron?
-
-<SpoonMeiser> I figured the link to Turrican
-
-<MatzeB> pifactorial: well in german it's not really an oxymoron
-
-<grumbel> pifactorial: and in addition to that it refers a little bit to the amount of the athmosphaere in a sommer night
-
-<pifactorial> I meant in english
-
-<MatzeB> pifactorial: it just means the state when there is no wind...
-
-<pifactorial> http://dictionary.reference.com/search?q=oxymoron
-
-<MatzeB> quickflash2: why do you need to adjust the animation to the game?
-
-<MatzeB> quickflash2: is that in terms of speed of the animation?
-
-<MatzeB> or how fast the character moves?
-
-<grumbel> might also refer a bit to "Die Ruhe vor dem Sturm" - "silence before storm" (or however you would translate that)
-
-<quickflash2> I need to see how they look in game
-
-<pifactorial> "the silence before the storm" - yeah, that's a saying in english
-
-<quickflash2> like matching the jump straight up to hanging and such
-
-<MatzeB> anyway the 3d sprites should mainly make it easier to get the sprites imported into the agme
-
-<MatzeB> and they would save some memory
-
-<quickflash2> in 2d you do it in pixels, 3d you do it with a vertice
-
-<quickflash2> yes, 3d is much easier :)
-
-<quickflash2> that's why I'm curious about it's priority
-
-<MatzeB> grumbel: are you actually working on the 3d sprites?
-
-<MatzeB> grumbel: I could take a look at them...
-
-<MatzeB> frame animations are missing from what I see?
-
-<grumbel> yep, animation are missing 
-
-<netsrot> What did he say in rec1.ogg?
-
-<grumbel> have a piece of proof-of-concept python script that gets the vertex data from blender animation
-
-<MatzeB> netsrot: I think it was not windstille related :)
-
-<netsrot> oki
-
-<MatzeB> ok I'll take a look then
-
-<MatzeB> jamesg382: what was that text from BTW?
-
-<grumbel> ok
-
-<pifactorial> hmm, I guess I'd better go soon
-
-<pifactorial> I'm hungry
-
-<pifactorial> but before I go
-
-<MatzeB> jamesg382: I remember some techno songs I don't like that had a very similar text...
-
-<pifactorial> does anybody here have experience with Ogre?
-
-<jamesg382> In English it is "the calm before the storm", not "the silence...."
-
-<MatzeB> not really
-
-<pifactorial> jamesg382: I think I've heard it both ways
-
-<jamesg382> mazteb, it is the opening paragraph to War of the Worlds
-
-<quickflash2> MatzeB: let me commit some changes to the heroken.blend file
-
-<quickflash2> take me a few minutes, it's on the other computer
-
-<pifactorial> anyway, they're thinking about porting vegastrike to an ogre backend
-
-<pifactorial> http://vegastrike.sf.net
-
-<MatzeB> pifactorial: we just want to bring some vertices on screen
-
-<MatzeB> pifactorial: not use yet another big framework
-
-<pifactorial> no
-
-<pifactorial> I didn't mean that
-
-<pifactorial> I'm just recruiting
-
-<pifactorial> for the VS project
-
-<pifactorial> sorry
-
-<jamesg382> the top google link for "silence before the storm" is someone who has translated the German  "Die Ruhe vor dem Sturm"
-
-<quickflash2> "the calm before the storm" is the common english phrase
-
-<pifactorial> yeah, but it wins in a googlefight!
-
-<grumbel> MatzeB: http://windstille.berlios.de/wiki/index.php/Graphics
-
-<grumbel> MatzeB: there is the snipped that does export the vertex data from animation
-
-<MatzeB> ah
-
-<MatzeB> I was searching it in the svn and couldn't find it :)
-
-<grumbel> svn only has the mesh-exporter without animations
-
-<grumbel> needs to get a bit more complicated than that, since thats just supports a single mesh, while we might need multiple meshes
-
-<PauloMorfeo> Dudes, I must go! Bye all. Have a nice work, fun, or whatever you're gonna do!
-
-<MatzeB> yes should be no big problem
-
-<MatzeB> cu PauloMorfeo 
-
-<pifactorial> I'm gone
-
-<MatzeB> well we can finish the meeting now :)
\ No newline at end of file

Deleted: trunk/media/wiki/Ideas.wiki
===================================================================
--- trunk/media/wiki/Ideas.wiki	2009-02-15 16:09:33 UTC (rev 2503)
+++ trunk/media/wiki/Ideas.wiki	2009-02-16 21:22:36 UTC (rev 2504)
@@ -1,414 +0,0 @@
-=== Advanced Lighting ===
-
-As mentioned in the HP forum thread, perhaps lighting similar to [[http://www.mechanicalcat.net/tech/ld48/6/bluescrn/diary|FUBAR]], a game entered in a 48 hour programming competition (so it can't be that difficult) might add a lot of atmosphere.  Files [[http://www.mechanicalcat.net/tech/ld48/6/bluescrn|available here]].  I think it needs Windows, but obviously the lighting logic will be portable.
-
--- [[User:Charlieg|charlieg]] 14 Jul 2005
-
-=== Fist Fights ===
-
-The game is meant to take place on a rough outerspace colonie on a distant planet, so its more or less natural that conflict arises at times, a bit of fist fighting could help resolve that. The fight system should probally implemented as a mix of something like having a uppercut, a face punch and a belly punch and a block (in form of high, middle, low), either the animation itself should give hints on the oponents actions or DDR/Viewtiefull Joe like explizit markers.
-
--- [[User:Grumbel|Grumbel]] 17:07, 2 Jul 2005 (BST)
-
-:Anybody played [[http://openmortal.sourceforge.net/|OpenMortal]]?  Is that excessive, or kind of what you have in mind?
-:--[[User:Pifactorial|Pifactorial]] 16:13, 4 Jul 2005 (BST)
-
-::I haven't played OpenMortal, but I played MortalKombat, StreetFighter, KillerInstinct and the like, but no, thats not what I have in mind. I want something simpler and more mini-game like, more along the fights you get might get in some NHL titel (those EA Sports icehockey games), Indiana Jones or (even so thats kind of a different best) Zelda, ie. stuff where you can block, punch and maybe dodge but not much more. This should really just be for a little fight in the bar or so. No ground breaking boss fight.
-
-::-- [[User:Grumbel|Grumbel]] 23:04, 5 Jul 2005 (BST)
-
-=== Traveling between Planets ===
-Traveling between Planets should happen in this:
-
-http://pingus.seul.org/~grumbel/tmp/windstille-shuttle.png
-
-shuttle. A smaller dropship might be used to carry the player from one mission to the next
-
--- [[User:Grumbel|Grumbel]] 17:07, 2 Jul 2005 (BST)
-
-
-== Backgroundstory Ideas ==
-
-=== Mining Minerals ===
-
-The collonie will mine some minerals. One idea could be that these minerals could be used as fuel/energie source. Gameplay wise this could be used so that:
-
-* the player can recover energie from collecting minerals
-* minerals can detonate when you shoot on them
-
-=== Cargo Ship ===
-
-Every few weeks/month a cargo ship comes and collects the minerals:
-
-[[http://clanlib.org/~grumbel/testrepo/4e33a6db520bc12e4b1a5bfa4a5f918c/renders/0d46b68a4f2e87b0c402132c8089a70b.jpg|Cargo Ship]]
-
--- [[User:Grumbel|Grumbel]] 20:09, 2 Jul 2005 (BST)
-
-=== Some History ===
-
-Project report
-Colony #: 003456-A
-Company: Inviro Mining
-Manager: Nicholas Nantu
-Date: 2468-03-23
-
-The first ships have landed on the planet and have begun to setup the initial
-industries. The colonists have established 3 prime cities and have named the
-planet Windstille.
-
-As per our preliminary reports the planet seems abaoundant in plant and animal
-life as well as rich in mineral deposits.
-
-***CONFIDENTIAL***
-We have already issued orders to our group on the planet to claim as much of
-the land as they can before the others come.
-
-There however seems to be a base for pirates established on the planet. We will
-keep this information hidden for the time being. NOTE: We should hire a merc
-to solve this problem for us asap before it get's well known or out of hand.
-
-Current recommendation: DENY any and all pirate rummors.
-
-Our scouts report a spider like creature in the forrest that seems to be
-sentient. This is not desired since that would require us to re-locate to a
-different planet due to the colonisation laws.
-
-Current recommendation: hire a mercenaries to eliminate any and all sentients native to the planet.
-
-Mineral deposits secured(so far): gold, silver, platinum, uranium and an unknown mineral that seems to be highly concentrated with energy.
-
----CONFIDENTIAL---
-
---[[User:Ruskie|Ruskie]] 16:26, 3 Jul 2005 (BST)
-
-=== Different History - Different Plot-take ===
-
-Our hero's location is a Moon designated SYS3991 3-1.  Orbiting a Gas Giant, piloting to the planet has always been difficult.  The Gas Giant produces large, powerful magnetic fields which protect the moon from dangerous rays emitted by the local sun.  The planet was found to be excellent from a source of minerals, but the magnetic field interferred with regular communications from and on the planet, making it unsuitable for normal human colonization.  The planet became marked as a frontier planet where the Goverment would only vest interest in the gathering of important minerals and, so long as there was a regular ship delivering materials, the goverment would not get involved within the way the planet was actually run.  The self formed goverment of the planet is loosely based on the companies that come and mine the planet.  The first company was the called the "Local Miners Union."  Since then many companies have come and gone, each bringing various technologies to the pl!
 anet, but the Local Miners Union has been the only one to stay strong throughout.  A local militia was created that to help rid companies of any wildlife and creatures that interferred with their business.  The companies did not feel that a powerful militia was in their best interests, so the militia was so well funded.  The militia had to survive using old miners equipment that companies would leave behind when they left.  With the help of the recycling plant, they would modify the mining suits for use more in line with their work.  The head of the militia was a man named Donovan. 
-
-Jane (our hero) was born on this planet, and orphaned as a child when her parents where killed in a mining accident. The circumstances of her parents' death had always been kept secret from her.  Yagor, the owner of the local recycling shop took her in as he usually did with any children left as orphans.  He and Jane grew a special bond.  Delilah, another child left orphaned by the same accident also came to stay with Yagor.  Delilah, while tough, was also always manipulative, and her and Jane never got along.  Delilah was jealous of Jane and Yagor's relationship.  At the age of 16, each girl went out on her own.  Jane joined the Local Miners Union.  Delilah joined the militia with the help of Yagor.
-
-At the age of 20, Delilah stayed behind on a mission due to a case a pneumonia.  While on the mission, everyone else in the militia was killed (Militia was around 30 people).  Everyone's body was recovered except for Donovans.  Once the militia was gone the companies on the planet decided not to try to rebuild a new one.  They felt that most of the planet had been tamed, and that only a few people where needed in order to battle any remaining local wildlife.  They therefore set up a mercenary system, where companies would just request help and pay per incident, instead of an annual subsidy.  Delilah quickly fell into the role of everyone's favorite merc.
-
-At the age of 21 Jane was not happy with her life.  Mining was in no way satisfieng her.  She saw the success that Delilah was having as a merc, and during her off hours started modifying her mining suit with the help of Yagor.  At 22 she took her first job as a mercenary, and by the time she was 23 she was doing it full time.  Now at the age of 25, her and Delilah are known as the best mercs in the business, and competition between them is getting increasingly fierce of late.  2 weeks ago Jane broke her foot.  Now she's doing Physical Therapy to help her recover.
-
-Some ideas on seperate stories that can be used:
-
-The local space goverment SYS3991 is in high need of titanium (or whatever).  Therefore they are offering a tax break on the company that produces the most titanium within a year.  This tax break counts across the whole galaxy, so companies that have never even entered the sector are on there way to start mining at SYS3991 3-1.  With these companies is coming new technology to the planet.  As people in these companies die, they recycle the new technologies, giving Jane (and Delilah) new power-ups to their suits.  The companies at first ignore each other, but after a while start offering merc jobs that interfere with one another's business.  This is not the first time this has happened, we find that the goverment made a similar deal 20 years ago.  At that time, merc jobs where offered against other companies, just the same.  We than come to find that Donovan used to do these types of missions while he was in the militia.
-
-The recent mining has upset the semi-sentient Regalis.  The Regalis have been attacking companies on the barriers more frequently. (Regalis are like Ewoks as far as brains go, but they aren't cute in any way)
-
-A new semi-sentient species (called the Verpasis) has been discovered, due to the recent mining.  They seem to be a spinoff of the Regalis species, except that they live deep within the planet.  The species seems to exhale a chemical that causes scary hallucinations within humans.
-
-3 mercs have shown up that work for one of the companies.  They have very good equipment, and often talk with Jane.  They do not seem to be antagonists to her, but they clearly want her to stay out of their way (which she respects as a fellow merc).
-
-In the end we find that Donavon is still alive.  He found the Verpasis 5 years ago, and discovered the properties of the chemical that they exhale.  He ended up killing all the others in the militia and then flying off the planet to find someone interested in using the chemical as a weapon.  That company got the local space goverment SYS3991 to start the tax break contest in order to build a mine in disguise to really export the chemical created from the Verpasis.  It is also found that Donavon was the one who killed Delilah and Janes parents.
-
-I'm sure we can add more to this.  Just think of little backstories that can intertwine within this.
-
-For episodic purposes, in the end we can basically state that the planet is mined out, so Jane and Yagor take off to find somewhere else to live...
-
---[[User:Quickflash|quickflash]] 06:55, 4 Jul 2005 (BST)
-
-Grammar and spelling improvements.  The story is good, although needs a little more scientific checking (do magnetic fields interfere with radio waves?) and the species needs further development.  Could also do with moving from a conjecture tone to something more solid.  Currently the story is asking to be agreed with, rather than being told.  Also probably should go on a separate page.
-
---[[User:Charlieg|charlieg]] 14 Jul 2005
-
-=== Backstory, Round III ===
-'''Just started throwing this together:'''
-
-Jane grew up on a planet in a system near to the Gold Planet (do we have a name?).  This planet is also a mining planet, but they mine common minerals, and the quality of life is low.  Jane grew up, like 95% of the other residents, in a mining family.  She worked with Boss as her supervisor (not actually a "boss" yet).
-
-One day, when Jane was a teenager, there was a collapse and the miners (including Jane) were trapped for many days.  Boss staged a rescue, and was surprised to find that Jane had the strength left to help with the rescue, even though many of her fellow miners were barely conscious.  He took a liking to her, and they forged a lasting relationship.
-
-Later, with the gold rush, Boss split off and formed his own mining company on the Gold Planet.  He invited Jane to come work for him, and she did.  Unfortunately, one of Boss' employees (nemesis) defected to another mining company, and gave away the security codes to Boss' mine.  When the miners returned to work the next day, they found the mine heavily fortified, and were unable to get in.  Boss lacked the resources to reclaim his property, and was forced into bankruptcy.  At this point, he started his junkyard.
-
-Although all of Boss' employees had abandoned him, Jane stayed loyal.  Instead of joining another mining company, she started to hire herself out as a mercenary to earn money, in hopes of rebuilding Boss' business.
-
-
---[[User:Pifactorial|Pifactorial]] 12:27, 4 Jul 2005 (BST)
-
-=== IRC-Discussion ===
-{{{
- <netsrot> Do you have any new ideas? =)
- <netsrot> will there be a stunngun?
- <grumbel> for the human-mode we will probally have plenty of non-deadly weapons
- <netsrot> nice
- <grumbel> don't wanna have much of a mass-murder kind of game
- <netsrot> Will there be smoke grenades?
- <grumbel> not sure how usefull they would be 
- <grumbel> but cheff granates might be in there
- <grumbel> not really sure how to handle the aiming
- <grumbel> with granates its probally best when one goes a bit into the direction of a yoshi island, ie. some kind  of cross or whatever that one has to target 
- <grumbel> for shooting i am not really sure what I want
- <grumbel> something more rpg like, something where you can actually miss without doing anything wrong
- <grumbel> need probally to have some shild or dodge system in place to allow the player some interaction
- <grumbel> want to have it more mini-game based
- <grumbel> ie. a shootout should play like a small game in itself, rather disconnected from the walking around
- <netsrot> oki
- <grumbel> for the powersuit mode however that needs to be kind of different, but even there I would prefer to not  have it to much metroid like 
- <netsrot> I know .
- <netsrot> More like a tank?
- <grumbel> not sure, but its something I am thinking about
- <grumbel> cybernator was a game that played pretty much like that
- <grumbel> ie. you played a huge battlemech, but it was all sidescrolling 2d jump'n shoot
- <grumbel> it was nice game, but powersuit here is a lot more lightweight, more a suit, then a mech
- <grumbel> question is really: you stand on a platform, some enemy in front of you, what do you do?
- <grumbel> should you need to duck to hit him if he is small?
- <grumbel> should you auto-aim when he flies?
- <grumbel> should you manually aim when he flies?
- <grumbel> should you be able to aim at all?
- <netsrot> I think not
- <netsrot> You should always aim forward or up?
- <grumbel> should I be able to run and shoot at the same time?
- <netsrot> Yes but you should aim very bad?
- <netsrot> Possibly shoot yourself in leg if unluckey =)
- <netsrot> Should there be walk/run mode?
- <netsrot> And walking backwards?
- <netsrot> Will there be any kind of knockback system?
- <netsrot> When getting hit or something.
- <netsrot> grumbel: still here?
- <grumbel> yep, still there
- <grumbel> just programming a bit while talking
- <netsrot> nice =)
- <netsrot> knockback would be nice if there is falling dammage on enemy.
- <grumbel> getting hit should definitivly give some feedback
- <grumbel> not just a drop of energie
- <netsrot> good
- <grumbel> at best it should be something special, say some badguy might bight you in the leg
- <grumbel> or ram you or capture you with tentacles
- <grumbel> or attack you visually by other means
- <grumbel> if you throws some acid/poision at you it should fly in a balistic curve, not linear
- <netsrot> Will there be somethig like cars?
- <netsrot> s/somethig/something/
- <netsrot> I would like a running dropkick move =)
- <netsrot> giving the enemy a long knockback =)
- <grumbel> there will be a dropship that brings you to whereever you need to go
- <netsrot> oki
- <grumbel> cars probally in the background or so, not sure what they should be good for gameplay whise
- <netsrot> You could have bigg guns on it =)
- <netsrot> But thats probably a bad idea.
- <netsrot> Will it be possible to distract an enemy or set up traps?
- <grumbel> distraction yes
- <grumbel> traps not sure, maybe mines or so could be usefull
- <netsrot> Will there be binoculars?
- <grumbel> maybe
- <netsrot> IR goggles?
- <grumbel> they would be a bit weird in 2d 
- <netsrot> I have seen them work in a never released 2d sidescroller
- <grumbel> ir or other kinds of vision most likly
- <netsrot> but it used maps like in worms1
- <netsrot> Will there be some kind of maps over the levels?
- <netsrot> World map/starsystem?
- <grumbel> there won't be a worldmap, because there won't be levels
- <grumbel> but there will be a level map
- <netsrot> oki
- <grumbel> there will also be some overview map, but not in the supertux-kind of way
- <grumbel> more like a real map that you see on a terminal
- <netsrot> ok
- <netsrot> Pherhaps it will be areas instead of level?
- <netsrot> and sectors
- <grumbel> official name currently is 'sector'
- <netsrot> oki
- <grumbel> which can be basically anything from a large outdoor areal to some small back room in the bar
- <grumbel> something different: I also would like to a have a resident evil like inventory
- <grumbel> something where you can look at close-ups of your items, rotate them and stuff like that
- <netsrot> That would be nice.
-}}}
-
-=== Escaping ===
-
-Most games your 'you against the rest of the world' and in the end you win. How about situations in Windstille which you can't win? In which you have to run for your life and just barly make it?
-
-Good idea. For example: There could be an assassination attempt from other mining companies resulting in an explosion in a mine Jane is in. She has to run to find the exit and her Mission obivously fails this time. There could be other events like this.
-
-Or more like it you're attacked by an insane number of enimies, and you have to retreate fighting and doging just to save your skin :)
-
-=== City ===
-
-It would be nice if the city you walk around in non-powersuit mode had a slightly living feel to it, like Syndicate or GTA or whatever. Obviously our extremely limited resources mean anything even resembling a true living city is impossible, but some ideas to heighten the feel of a real city might be:
-
-* NPCs who exist only to provide back story and hints, who you don't actually need to talk to to progress
-* Being able to travel via train or subway rather than just by foot. You wouldn't actually control the vehicle or anything, it would just be an animation for when you go between different areas
-* It might be nice if there was stuff going on in the background, though this is probably never going to happen. E.g. if you are at a shuttle port then shuttles take off and land in the background, if you are at a train station trains come and go in the background
-
--- ----
-
-Here is a Screenshot to give the player a bit more feeling of walking in a big city (just added a few dots with a big effect): [[http://people.freenet.de/almightymagnus/blubb.JPG]]
-
-== Episode 1 ==
-
-=== Intro/Tutorial ===
-
-There was some discussion during the IRC meeting about how to work the tutorial into the story.  I was thinking it might make sense to open the game with a short cut scene where Jane is trapped and her suit badly damaged, and then the training takes over from there, with a dialog with a mechanic character which both introduces plot and explains the game mechanics.  Something along the lines of:
-
-Mechanic: Man, your suit really took a beating down in that mine.  What the hell were you doing down there?
-
-Jane: (Boss) sent me down there to meet someone who was interested in our services, but he didn't give me much detail.  I'm going to go find out if he knows any more than he told me.
-
-Mechanic: Before you go, could you help me test your suit?  I've got everything repaired.
-
-Jane: sure.
-
-...
-
-Mechanic: Why don't you start by climbing onto that block over there
-
-Blinking Overlay: To climb, press Jump and Up together
-
-...
-
---[[User:Mdgeorge|Mdgeorge]] 20:50, 4 Jul 2005 (BST)
-
-== Enemy Ideas ==
-=== Swarm Enemies ===
-
-Instead of simply using a bunch of almost men-sized enemies the game should feature a bunch of swarm-enemies, ie. very little enemies that act as a collective, fighting against them with normal projectile weapons will be pretty much impossible, instead the player has to either utilizie the flame thrower or destroy the swarms nest (if available).
-
-== Items and puzzles ==
-
-If the game is to be a little bit more thoughtful and slow paced than an out-and-out shoot-em-up, perhaps it would be nice if there were a whole bunch of items and objects in the game world, which have to be combined in the right way in the right places to progress?
-
-Grumbel has sketched some ideas out at:
-
-[[http://pingus.seul.org/~grumbel/tmp/windstille-files/puzzles.png]]
-
-Combining the item/puzzle related ideas from the above sketch as well as some thoughts of my own, here is a list of possible item/object comination puzzle ideas:
-
-* you have to push or pull a crate/box or multiple boxes into position to climb over an obstacle, or to gain access to a ladder
-* doors, walls, boxes or other objects that stand in your way could be destroyed with guns and/or explosives
-* explosive barrels can be placed next to a wall and then blown up to destory the wall
-* a bad guy has a powerful machine gun or whatever and you have to duck behind game objects to avoid being hit, but can shoot him when he stops to reload
-* press a button to make a lift go up or down
-* press a button to connect/disconnect a bridge
-* ladders
-* monkey-bar style traversing of ravines
-* zoomed out aiming with sniper rifle or missile launcher or other very powerful weapon to take out very dangerous enemies from afar
-* keycard doors
-* forcing people to do things at gunpoint
-* using a torch to light up/find items in darkness. Perhaps certain enemies don't like the light and would try and creep up on you until you shine your torch at them, and which point they scamper away
-* EMP grenades could take out automated weapon systems or very powerful robot enemies that are otherwise next to impossible to defeat
-* hacking into computers to control doors, lifts, automated weapon systems, robots, etc
-* destroying a power generator to allow you to get through an electrified fence, or to stop automated weapon systems from working, or to intentionally pluge a sector into darkness
-* an aqualung or similar that is needed to dive underwater
-* stealing or forging an identity card to gain access to a restricted area
-* radiation suit to go in a radioactive area
-* sabotaging a train or shuttle using a toolkit
-* putting a tracking device on a shuttle
-
--- ----
-
-== Fog of War/Visibility ==
-
-Not sure if we need it, but might be helpfull to limit visibility to things that are currently in the players view. For example it shouldn't be possible to look through the roof.
-
-
-== Voice Acting Script ==
-
-I think the script could use some work, but maybe my tastes are different, so I figured I'd post a sample of how I'd have written what's in the Plot section and if folks feel it's better, I'd be happy to handle it:
-
-Intro:
-
-The Big Boom.  Humanity found out it could travel to the stars, and it did, en masse.  But it didn't take long for it to turn into The Big Bust.  The guilds, the governments and the corporations staked out the best worlds.  Still, many more took their chances, even without military hardware and terraformers.  Most worlds were so barren, or dangerous, that whole colonies died out.  In the Free Colonies that survive, life isn't easy.
-
-(I like, first of all, to detach from concrete dates, and try to imagine how people would come to refer to an era--in this case the obvious connection is between The Big Bang and The Big Boom.  This also establishes four major classes of humanity: Guild, gov't, corp and free--which I think affords some good storyline and gameplay aspects.)
-
-This is my new home, Sys-triple-three-nine.  The locals call it Hellas.  There are only two real jobs in the colonies: miner and merc.  I tried mining--bouncing from planet to planet, trying to find  work.  Then I met Yagor and he told me I could make more money in one mission as a merc than I could make in a year as a miner.  That was about six months ago.  It's like any other job, really, you have good days.. and bad days.
-
-First Mission
-Boss[4]: "Hey, you feelin' re-coop-er-ated?"
-
-Jane: "I think so, why?"
-
-Boss: "Not sure exactly, somethin' at Jimbo's.  Do me a favor, head down and see what's up."
-
-Jane: "I'm on my way."
-
-(Jane grabs her jacket and leaves her apartment and goes to Jimbo's bar, just a few screens away)
-
-Jane: "Hi, Bob."
-
-Bob: "Jane! I thought you were dead. Looks like one of our boys got into trouble. He ended up trapped in the nothern forest.  We got the emergency call half an hour ago."
-
-Jane: "Doesn't Northern Star take care of this?"
-
-Bob: "Don't ask me, ask them..."
-
-Miner: "Are you kidding? I'm gonna risk my neck for that poor bastard? Only an idiot goes into that forest."
-
-Jane: "I can't believe you'd just abandon him there!"
-
-Miner: "What do you care?  You're just a damn mercenary."
-
-Jane: "I guess I can't expect much from a drunken miner. Anyway, I'll find him.  Where was he when he sent the distress signal?"
-
-Bob: "Here ya go.  You know NorStar can't pay much... "
-
-(Communicator call from Boss)
-
-Boss: "Got something?"
-
-Jane: "Everything's set, boss, looks like we have a job. Come and get me."
-
-Boss: "Okay, meet me on the roof."
-
-(Jane goes to the roof and enters the spaceship, piloted by Boss)
-
-(little cutscene that shows spaceship flying over to the northern forest)
-
-(Jane gets dropped at the forest)
-
-Boss: "Ok Jane, this is as far as I can bring you, you have to make the rest on your own. I'll stay in contact."
-
-: I think that's mostly OK, except:
-: 1. Only Americans say "niner". If an American is doing the voice over of Jane, then OK, but otherwise it's just a pointless Americanism
-: 2. I don't know about using the word "bastard" - I guess I don't really mind, it just swearing in a game almost always makes it looks more childish than more adult
-: 3. I hate the phrase "Have you know honor?", noone in real life would ever say that, ever, it sounds like Fantasy-RPG-talk.
-: -- [[User:James Gregory|James Gregory]] 22:43, 5 Aug 2005 (BST)
-
-I never realized the niner thing (Being an American) though I do think it's more natural to say things like, 'triple-three', rather than simply stating the numbers.  I tend to agree with the stance on cursing (That it can come across as juvenile), unless it's pulled off naturally (Again, being an American, cursing to me lends an air of realism, but it can easily be ditched).  The 'have you no honor' line is crud, I agree, but I thought the idea of a certain disdain between miners and mercs would be interesting and I could think of no way to prompt the miner's response (Which I like).  Perhaps just a simple, "Don't you care?" to which the miner could respond, "You kill people for money and you're lecturing me on morals?"  (Though it'd need to be modified idiomatically--that doesn't sound quite how I'd imagine a miner to speak)
--Meeks
-
-::Just a note - AFAIK "niner" was coined during WWII to avoid confusion with the German word "nein".  As of today, it is still the standard of the FAA and ICAO.
-::--[[User:Pifactorial|Pifactorial]] 11:55, 7 Aug 2005 (BST)
-
-:::I didn't know that, however, the fact that the dialog says "triple three" indicates that the dialog is casual, and not air-traffic-control speak. -- [[User:James Gregory|James Gregory]] 16:23, 7 Aug 2005 (BST)
-
-:: Yep, I like it as well. I think the 'bastard' sounds fine in the context of a drunken miner, the honor-thing might be a bit over the top. Another thing, Bob should only be barkeeper and informant, not the one to pay, so 'we can't pay much' is wrong, should be Northern Star who pays.
-:: -- [[User:Grumbel|Grumbel]] 23:50, 5 Aug 2005 (BST)
-
-:Okay, I changed it around a bit (Kept the 'bastard' for now--I think that the actors will change the script in little ways when they think it doesn't sound natural, so it can get dropped if it sounds silly).  I thought about making it 'Sys-triple-zed-niner' just so we could get both sides of the Atlantic in on the action, but I dropped it.  It's a rather silly trick, but we should consider having different real-world accents for the various different in-game groups (In the way that all the officers in Star Wars were British).  Otherwise, just let me know a scene overview and I'll write the script for it.
-:-Meeks
-
-: I like it, and even made a short test intro using the first few lines of text. Whilst doing so, I found the following very small style points slightly different to how I would write, not sure if it matters:
-: 1. "Staked out" is usually an almost-synonym for "being closely watched", yet here it is being used to mean something a bit different
-: 2. "Still, many more took their chances" should probably be "Still, many individuals took their chances" to differentiate what we are talking about in contrast to the organisations in the previous sentence
-: 3. "Most worlds were so barren, or dangerous, that whole colonies died out" - getting really nitpicky now, but the commas in the sentence seem unneccessary. If I say that sentence out loud I don't include any pauses. Perhaps "Most worlds were so barren or so dangerous that whole colonies died out"?
-: -- [[User:James Gregory|James Gregory]] 01:40, 7 Aug 2005 (BST)
-
-:I like this version but I would like to add some comments.
-
-:: 1. Jane has not been introduced with any depth. Some form of character or character flaw could come across fairly strongly straight away to help us identify with her. Maybe there could be some humourous banter rather than "I guess I can't expect much from a drunken miner."
-
-:: 2. Nobody would call their home Sys-Triple-Three-Nine. More likely would be "This is my new home, Hellas. The Corporations would call it Sys-Triple-Three-Nine".
-
-:: 3. Too many pleasantries reduce the pace and the atmosphere. Maybe cut out:
-
-::: Jane: "I think so, why?" (and collapse the two Boss lines so that he's not expecting a reply)
-
-::: Jane: "Hi, Bob."
-
-::: Bob: "Don't ask me, ask them..."
-
-::: Boss: "Got something?" (Instead, Jane should make the call)
-
-:: 4. The line "Ok Jane, this is as far as I can bring you, you have to make the rest on your own" feels weak. How about "Ok Jane, this is as close as I can get you. The distress signal is coming from just under a klick North-East."?
-
-: -- Dan <mauve at mauveweb.co.uk>
-
-:: I'm not so sure about points 1 and 3, it seems pretty good as it is to me.
-
-:: -- [[User:James Gregory|James Gregory]] 02:17, 7 Aug 2005 (BST)
-
-: Some comments about the intro text: I don't like Big Boom and Big Bust, just sounds wrong to me, probally better to not name those events or give them some more subtle names, something that doesn't jump out of the text so much. I also find the seperation in different classes far to strict, governments are by that time probally mostly the pets of the cooperations and guilds sounds too much fantasy-RPG. -- [[User:Grumbel|Grumbel]] 11:32, 7 Aug 2005 (BST)
-
-:My inspiration for the guilds was the Spacing Guild in Frank Herbert's Dune, so I think that the inclusion of that style of organization has a good, non-FRPG basis.  I also think that even if we decide corps are the superpowers, that there would still be governmental types and (Even if they are weaker than the corps) the people in the governments would still be different from corporate guys.  Maybe that's part of their characterization, too, in that government agents will act high and mighty but weild little real power, or constantly be superseded by corporate agents.  Finally, since this is a voice acting script, I feel it's necessary to iterate that the script is malleable, such that comma placement and individual word choice (And in some cases, whole phrases) can and should be adapted by the voice actor to whatever their interpretation of the character.  That said, it seems like people are comfortable with me writing the script (And providing editing commentary, which i!
 s welcome) so now I need to know what else needs to be written. -- Meeks
\ No newline at end of file

Added: trunk/media/wiki/Index.wiki
===================================================================
--- trunk/media/wiki/Index.wiki	2009-02-15 16:09:33 UTC (rev 2503)
+++ trunk/media/wiki/Index.wiki	2009-02-16 21:22:36 UTC (rev 2504)
@@ -0,0 +1,26 @@
+= Structure of the Wiki
+
+== Plot/Story
+
+* [[Backstory]]
+* [[Characters]]
+* [[Weapons]]
+* [[Vehicles]]
+* [[Locations]]
+
+== Engine
+
+* [[Particles]]
+* [[Navigation Mesh]]
+* [[Scripting]]
+* [[Drawing Model]]
+* [[Editor]]
+* Sector
+* Scene
+
+
+== Misc
+
+* [[PDA]]
+
+# EOF #

Deleted: trunk/media/wiki/Jobs.wiki
===================================================================
--- trunk/media/wiki/Jobs.wiki	2009-02-15 16:09:33 UTC (rev 2503)
+++ trunk/media/wiki/Jobs.wiki	2009-02-16 21:22:36 UTC (rev 2504)
@@ -1,79 +0,0 @@
-== Tasks ==
-
-The following tasks are available, make sure you check with [irc://irc.freenode.net/#windstille] IRC Channel first to make sure that those tasks are not yet compeleted or picked up by somebody else, since those task lists always tend to get outdated quickly.
-
-As always with [[wikipedia:Free Software|Free Software]] game projects, no payment, all for fun, reputation and experience.
-
-=== Blender ===
-
-* rig the powersuit-character and the powersuit-less characters properly (data/blender/hero.blend)
-* create proper animations for walk, run, jump, duck, turn-around, aim and shoot, simple sloppy test animation would for the beginning be enough, just to figure out the movement and timing
-* make sure all animations are exported and available in the game
-* discuss what sort of bad guys will be needed and create models for them
-* you will move between levels in a transport ship, this requires a model (or maybe a 2D based sprite instead?) - this needs to be discussed and made
-* animations for going stairs up and down, [[http://pingus.seul.org/~grumbel/tmp/windstille-stairs-2005-07-17.png|stairs look like this]]
-
-=== Sound ===
-
-* We have none at all currently doing sound effects. If you want to do this, please get in contact
-* Voice acting. We have probably quite a few male volunteers for voice acting, but possibly not many female volunteers. However, we cannot start organising this until later in the development process, because dialog has yet to be written, let alone finalized
-* Wansti is making some music. If you want to write music too, join the IRC channel and coordinate as to what is and isn't already being done, etc
-
-=== Major features the game engine is still missing ===
-
-* Jumping and grabbing on to things, climbing on to platforms
-* Firing weapons
-* Fist fights
-
-=== Various bit-sized C++ tasks that require no particular knowledge ===
-
-* fix bugs - you can find some in the [[http://svn.berlios.de/viewcvs/windstille/trunk/BUGS?view=markup|SVN BUGS file]]
-* integrate all available animations
-* boxes or other items that you can push and pull
-* initialising/loading/saving script variables (this is already being worked on by JamesG and MazteB)
-* implement stairs, see blender task list above
-* implement an elevator a platform onto which one can step on and once one presses 'use' it moves up or down, if 'use' is pressed while its moving it should inverse the direction
-* change the console so that each expression that returns a value automatically prints it
-* implement the currently unimplemneted function in the particle system
-* change the Sprite3DDrawingRequest so that it does *not* make any use of the Sprite3D class itself (sprite3d::Data should be ok), because this causes throuble if you want to draw a sprite3d twice with different parameters
-* implement some form of particle/spring system so that you could attach a lamp to it or something like that
-* add layer support to particles, so that you can have particles on the light layer
-* we need a way to define objects in scripting language, nothing complicated, just so that when you want a lamp you don't have to specify its light/color/highlight layers over and over again seperatly
-* add Origin support to Sprite (much easier to say 'center' instead of (-32, -32))
-* add support for resolutions other than 800x600, for the scenario itsef it simply means to change the scaling, but fonts and such could require some more clever way to scale so that they don't get blurry
-* implement load on-demand (ie. load everything the sector needed at start of the sector) for TileFactor
-* Blender Sprite3D exporter seems to have throuble with the Yagor, body gets messed up, when head and body are joined on the other side everything looks ok
-* implement screenshot support
-* save configuration changes only on request (probally via option menu), not at default on game quit (ie. to avoid switch to fullscreen -> find out that fullscreen doesn't work -> quit game -> stuck with game in unworking fullscreen mode)
-* add ability to use different textures in 3d sprite to skin somebody with different cloth, show damage or such
-* find out what broke the animation in latest SVN, either the .blend file itself got broken, the exporter (since it got restructed by Grumbel) or something else
-
-=== Pretty OpenGL effects ===
-
-* firing weapons - machine gun, flamethrower, etc
-* implement water that has waves
-* add a player-holding-torch lighting effect
-* write a GameObject/Entity that simulates a 'laser display' or however you call things like [[http://www.laserist.org/Laserist/2003Awards/LFI_Static_Cubi%20Bubi_B.jpg|this]], ie. something that uses a laser to project a 2d vector object on a wall, color of the laser should be configurable
-* remove the players light sprite and replace it with a scripted entity, something analog to the fire-particle effect that attaches to the player
-* fix nightvision to handle highlights correctly
-* implement moths or other little insects that fly around street lamps or other things
-
-=== Random tasks ===
-
-* write a Squirrel-mode for Emacs
-* bring all include file guards into the form of (except those of seperate libraries like lisp/ and squirrel/):
- #ifndef HEADER_{SUBDIR}_{FILENAME}_HPP
- #define HEADER_{SUBDIR}_{FILENAME}_HPP
-
-=== Editor (written in Ruby) ===
-
-* update it so that it can handle current file format completly and let it be tolerant to tags he doesn't know yet
-* add handling of unknown GameObjects (stuff their sexpr into a object and write it out on save)
-* added a tile editor that allows to edit the tile definition file
-* find out what broke redo/undo
-* write a .sprite file parser in ruby
-* integrate the color picker component with GenericDialog
-
-=== Into the future: ===
-
-* face animation via morph targets to be used in dialogs, by no means important for the GotM run, just something Grumbel would like to have one day
\ No newline at end of file

Deleted: trunk/media/wiki/Level Format.wiki
===================================================================
--- trunk/media/wiki/Level Format.wiki	2009-02-15 16:09:33 UTC (rev 2503)
+++ trunk/media/wiki/Level Format.wiki	2009-02-16 21:22:36 UTC (rev 2504)
@@ -1,22 +0,0 @@
-A Windstille level or sector needs to hold multiple tilemaps, some meta information, object placments and information on the background and the triggers/scripts. S-Expressions will be used as textbased-format, if necessary  there might also be a compiled binary format, but textbased formats have shown to be very flexlible in the develompent procress, so we start with them first.
-
-There are three default tilemaps, 'foreground', 'background' and 'interactive'. 'interactive' is the one on which the player walks normally, 'foreground' is for stuff infront of the player, 'background' for tiles behind the player, both don't have any impact on collision detection.
-
- (windstille-sector
-   (name  "City")
-   (music "foo.ogg")
- 
-   (objects
-     (tilemap (name "forground")
-              (x-offset 50)
-              (y-offset 50)
-              (width 100)
-              (height 500)
-              (paralax-x 0.5)
-              (paralax-y 0.5)
-              (data 1 0 12 0 0 0 0 0 ....)
-      )
-   
-     (box (pos 10 20))
-     (enemy (pos 10 20)
-            (energy 50)))
\ No newline at end of file

Deleted: trunk/media/wiki/Locations.wiki
===================================================================
--- trunk/media/wiki/Locations.wiki	2009-02-15 16:09:33 UTC (rev 2503)
+++ trunk/media/wiki/Locations.wiki	2009-02-16 21:22:36 UTC (rev 2504)
@@ -1,41 +0,0 @@
-Realistically, milestone 1 is only going to be able to have a very limited number of locations. This is an attempt to keep track of what locations we actually intend to create  - which requires art, level design, coding the required game objects, populating the location with characters and bad guys, and including the location in the plot.
-
-== VR Training ==
-
-* Used for the opening tutorial for the game.
-
-* provides a number of sub rooms to allow the player to train all kinds of stuff
-
-== City ==
-
-* Jane's apartment
-
-This is where the game opens. Perhaps it could be reused for other things, too?
-
-* Street / roof tops
-
-Maybe we will have a sector that just represents walking about the city? I don't know.
-
-* Bar
-
-Used for meeting some of the characters, perhaps you may go here for jobs, or whatever.
-
-* Train station
-
-Maybe this isn't needed, but we have a train model and train stations are a good location for meeting characters and travelling, and they also add to the feel that you are in a living city.
-
-* Shuttle port
-
-Where you get on shuttles to take you away from the city
-
-== Forest ==
-
-This is where the Milestone 1 powersuit mission takes place.
-
-* Above ground
-
-Will contain trees, and maybe some swamp or something too. The idea seems to be that on the forest surface your enemies are the local wildlife, not humans or aliens or whatever. The final boss is a huge spider (though they could be put below ground, see below)
-
-* Underground
-
-Both man made mines and natural labyrinth. Quite possibly it will contain some robots of various sorts for bad guys, perhaps also spiders.
\ No newline at end of file

Deleted: trunk/media/wiki/Main Page.wiki
===================================================================
--- trunk/media/wiki/Main Page.wiki	2009-02-15 16:09:33 UTC (rev 2503)
+++ trunk/media/wiki/Main Page.wiki	2009-02-16 21:22:36 UTC (rev 2504)
@@ -1,82 +0,0 @@
-Windstille is a 2D action adventure game released under the
-[[http://www.gnu.org/licenses/licenses.html#GPL|GPL]] and
-[[http://creativecommons.org/licenses/by-sa/3.0/|Creative Commmons]]
-license, which basically means you can modify and redistribute it as
-you like, as long as you allow others to do the same with your
-released modifications.
-
-We are still looking for new developers to join this project, have a
-look at the [[Jobs]] section to see if you might be able to help.
-
-* [[News]]
-* [[Rebirth]]
-* [[Overview]]
-* [[Getting Started]]
-* [[People|People involved with this project]]
-* [[Roadmap]]
-* [[Design Discussion CheckList]]
-* [[Jobs|Jobs/Tasks]]
-
-== IRC Meetings
-
-* [[IRC Meeting 1]]
-* [[IRC Meeting 2]]
-* [[IRC Meeting 2 Brainstorming Summary]]
-
-== Engine Parts
-
-* [[Basic Features]]
-* [[Collision Detection]]
-* [[Scripting]]
-* [[Graphics]]
-* [[Windstille Drawing Model]]
-* [[Tilemap]]
-* [[Dialog]]
-* [[Prefab]]
-
-== Story
-
-* [[Backstory]]
-* [[Plot]]
-* [[Plot Events]]
-* [[Characters]]
-* [[Locations]]
-
-== Gameplay
-
-* [[Controls]]
-* [[Actions]]
-* [[Fighting]]
-* [[GUI]]
-* [[PDA]]
-* [[Menu screens, save games, etc]]
-* [[Similar Games]]
-* [[Ideas]] - please add your own new ideas here!
-
-== File Formats
-* [[Level Format]]
-* [[Tile Specification Format]]
-* [[Sprite Format]]
-* [[Blender]]
-
-== Talk
-
-* [[Talk:Collision Detection]]
-* [[Talk:Dialog]]
-* [[Talk:Graphics]]
-
-== Links
-
-* [[http://windstille.berlios.de|Official Windstille Webpage]]
-* [[http://pingus.seul.org/~grumbel/tmp/windstille-files/|Windstille Sketches]] - directory full of tons of unsorted sketches and ideas
-
-== Contact
-
-* [[https://lists.berlios.de/mailman/listinfo/windstille-devel|Windstille-Devel mailinglist]] - discussion about the game development
-* [[https://lists.berlios.de/mailman/listinfo/windstille-commit|Windstille-Commit mailinglist]] - automatic mail from the Subversion repository
-* EMail: grumbel at gmx.de
-* IRC: irc://freenode.net/#windstille
-* ICQ: 59461927
-* Jabber: xmpp:grumbel at jabber.org
-
-

Deleted: trunk/media/wiki/News.wiki
===================================================================
--- trunk/media/wiki/News.wiki	2009-02-15 16:09:33 UTC (rev 2503)
+++ trunk/media/wiki/News.wiki	2009-02-16 21:22:36 UTC (rev 2504)
@@ -1,246 +0,0 @@
-2008-05-08
-* Windstille rebirth is in progress
-* Wiki content is moved into SVN and build by custom scripts with help of creoleparser
-
-2007-06-21
-* the write of skeletal animation is under way, Blender export and Windstille import of armatures already works
-* navigation graph is mostly working and ready for integration into the main game
-
-2007-06-13
-* Windstille now features a menu system that lets you browse around all the different features and test level
-* Windstille 0.3.0 got released
-
-2007-04-27
-* [[http://pingus.seul.org/~grumbel/tmp/md5/07294e356e1f09425f79dd940dfaadf4-head.png|Retextured/Modeled Jane's Head]]
-
-2007-04-05
-* Thumbnails of all/most Windstille 3D models are now available [[http://pingus.seul.org/~grumbel/tmp/windstille-models-2007-04-03/|here]]
-
-2007-04-01
-* SVN contains now a script (blender_thumbnail) that can automatically generate thumbnails of 3D models, like [[http://pingus.seul.org/~grumbel/tmp/md5/6f627d003a14e92ffc785fe824886199-jeep.png| this]]
-
-2007-03-22
-* The SVN Repository just got a few huge commits of all the old artwork and 3D models that Grumbel had floating around on his harddisk
-
-2007-03-14
-* [[http://pingus.seul.org/~grumbel/tmp/md5/d90bb62fca1fc7cd443b59ca53507bda-launchvehicle.png|Launch Vehicle]]
-
-2007-03-12
-* [[http://pingus.seul.org/~grumbel/tmp/md5/6788f6a443f9bf60c4e5198fd9a63ff5-windstille-pda.jpg|PDA Mock-Up]]
-
-2007-03-11
-* [[http://pingus.seul.org/~grumbel/tmp/md5/d27ff9b41d67f2d1dbd16f24c8ea9905-launchvehicle4.jpg|Launch Vehicle]]
-
-200?-??-??
-* [[http://pingus.seul.org/~grumbel/tmp/md5/875224254fca9aacc0ef5fbeb01a093e-publictrain.png|Public Train InGame]]
-* [[http://pingus.seul.org/~grumbel/tmp/md5/e93ba7e4b396c2592125cf8d967acd26-publictrainrender.jpg|Public Train 1]]
-* [[http://pingus.seul.org/~grumbel/tmp/md5/24949eb9575f08cac35e1e0dc46c3065-publictrainrender2.jpg|Public Train 2]]
-* [[http://pingus.seul.org/~grumbel/tmp/md5/04dc676300640f7cff48f8cc68132be2-publictrainrender3.jpg|Public Train 3]]
-* [[http://pingus.seul.org/~grumbel/tmp/md5/f3002bfb917781f7f72da7c1fd7f52ad-publictrainrender4.jpg|Public Train 4]]
-* [[http://pingus.seul.org/~grumbel/tmp/md5/0037afdb45f635fa2e761c172b8aeb7d-windstille-anime.png|Jane Anime Style]]
-
-200?-??-??
-* [[http://video.google.com/videoplay?docid=6407848482326054992|Windstille DS Door Interaction]]
-* [[http://video.google.com/videoplay?docid=-7167040824757906656|Windstille Gameplay (very old)]]
-* [[http://video.google.com/videoplay?docid=9023431494719249531|Windstille DS Door Interaction]]
-* [[http://video.google.com/videoplay?docid=3929109335747664257|Windstille on DS]]
-
-2006-09-03
-* [[http://pingus.seul.org/~grumbel/tmp/windstille-nds-2006-09-03.jpg|Windstille NintendoDS (no game, just some static images for testing)]]
-
-2006-05-23
-* [[http://pingus.seul.org/~grumbel/tmp/md5/5fa061fc1c017ff8402360b06345e5ce-rescuepod.png|Rescue Pod]]
-* [[http://pingus.seul.org/~grumbel/tmp/md5/3ed79927b9ed8f1d1a0f4ccf5b8f44ad-rescuepod_large.png|Rescue Pod, large version]]
-
-2006-05-16
-* [[http://pingus.seul.org/~grumbel/tmp/md5/9f789096170bc92de8460073eb2a4e48-nstartmineentrance.png|NStar Mine Entrance]]
-* [[http://pingus.seul.org/~grumbel/tmp/md5/17d00adff886aa23732a03ab9025a784-nstarcellar.png|NStar Cellar]]
-
-2006-05-12
-* [[http://pingus.seul.org/~grumbel/tmp/md5/e2954ded3106bedffdb71b6892388661-scientist2.png|Scientist EnvSuit]]
-* [[http://pingus.seul.org/~grumbel/tmp/md5/0ecccd892d3f0ca3e2fbddac2d9440fe-police.png|Police]]
-* [[http://pingus.seul.org/~grumbel/tmp/md5/86e6f617effb5ea4871f960c538f9283-nstarguard.png|NStart Guard]]
-
-2006-05-11
-* [[http://pingus.seul.org/~grumbel/tmp/md5/aa0dfd525ffed92300e9960c280702e6-merc3.png|Merc 3]]
-* [[http://pingus.seul.org/~grumbel/tmp/md5/14ea49fc32e3911bdf3876931c67a835-scientist.png|Scientist]]
-* [[http://pingus.seul.org/~grumbel/tmp/md5/ead42c17fc90eb586e81db0b59da490b-merc3suit.png|Merc Suit]]
-* [[http://pingus.seul.org/~grumbel/tmp/md5/8d76ae7dca7874a584997fc33383b4b5-holoplatform.png|Holoplatform]]
-
-2006-05-07
-* [[http://pingus.seul.org/~grumbel/tmp/md5/cf886dbe7d61043360b510a697a437a2-airportpersonal2.png|Airport Personal Uniform]]
-* [[http://pingus.seul.org/~grumbel/tmp/md5/d8f02e33c7b9775a1fff3b471e6cf715-shuttle.png|Intro shuttle from the inside]]
-
-2006-04-24
-* [[http://pingus.seul.org/~grumbel/tmp/md5/47d4d7e9858e9c8a3c32735d98265ad3-render1.jpg|Shuttle Test Render 1]]
-* [[http://pingus.seul.org/~grumbel/tmp/md5/61407fae7d761b3ac3a80d60228b710e-render2.jpg|Shuttle Test Render 2]]
-* [[http://pingus.seul.org/~grumbel/tmp/md5/2d5b27b6b5f879898bc8424d5cb5c801-render3.jpg|Shuttle Test Render 3]]
-* [[http://pingus.seul.org/~grumbel/tmp/md5/96ff4547ee664d39fac5406c127cfa1d-cargotruck.png|Cargo Truck Sketch]]
-* [[http://pingus.seul.org/~grumbel/tmp/md5/7048fbae5c79ac9af072d303a942ed97-diggertruck.png|Digger Truck Sketch]]
-* [[http://pingus.seul.org/~grumbel/tmp/md5/e7d1bef78d09ca823ee3a58fe4f6f9ae-texture.png|a mine texture]]
-* [[http://pingus.seul.org/~grumbel/tmp/md5/51c07764d839bfa405568bc265abc401-texture1.png|another mine texture]]
-* [[http://pingus.seul.org/~grumbel/tmp/md5/db27f384d1cbaa41389fc001510d5246-largetruck.png|large truck sketch]]
-* [[http://pingus.seul.org/~grumbel/tmp/md5/83712fa6f1b95eb226571b1b71817ce1-merc3.png|character sketch]]
-* [[http://pingus.seul.org/~grumbel/tmp/md5/3664d852c3c73efab41f06ea52f405c5-scientist.png|rough sketch of scientist cloth]]
-* [[http://pingus.seul.org/~grumbel/tmp/md5/e91e5e57b2bbc72aa3ee0f8f7f790444-soldier.png|soldier cloth]]
-* [[http://pingus.seul.org/~grumbel/tmp/md5/ac29021eea01e5a04e4e39c8a4fab6a9-harry_soldier.png|soldier cloth - Harry's version]]
-* [[http://pingus.seul.org/~grumbel/tmp/md5/88828d8cb00e3b256fb70606ac5f36d2-airportpersonal.png|rough sketch of airport personal cloth]]
-* [[http://pingus.seul.org/~grumbel/tmp/md5/97f64621ab3b90e5a337f37837dbdc46-miner.png|miner sketch]]
-* [[http://pingus.seul.org/~grumbel/tmp/md5/8a6f8fe69979240a0e24fa669ea2f244-minerfront.png|miner sketch total]]
-* [[http://pingus.seul.org/~grumbel/tmp/md5/2cfe0c982de2ab5ff6cedf6fc863f99c-city.png|city sketch]]
-
-2006-04-16
-* [[http://pingus.seul.org/~grumbel/tmp/md5/8f49906d7ea46f09df46aef3c58ac7e9-shuttle.png|Shuttle Sketchs]] for use in the Windstille Intro, untextured 3D model of the shuttle is in the repo
-
-2006-04-14
-* Windstille now contains a simple slideshow viewer, usefull for viewing the notes and other stuff, use it via:
-
- # necesarry to circumvent physfs directory restriction
- ln -s /tmp/ /home/user/projects/windstille/trunk/data/tmp/
- 
- cd /tmp/
- wget -m -np http://pingus.seul.org/~grumbel/tmp/windstille-notes4/index.html
- 
-  cd  /home/user/projects/windstille/trunk/data/tmp/
- ./windstille --sprite2dview /tmp/pingus.seul.org/~grumbel/tmp/windstille-notes4/img_*.jpg|--geometry 1024x768
-
-2006-04-05
-* [[http://pingus.seul.org/~grumbel/tmp/windstille-notes4/index.html|Windstille Notes 4]]
-
-2006-03-20
-* [[http://pingus.seul.org/~grumbel/tmp/windstille-notes3/index.html|Windstille Notes 3]]
-
-2006-03-19
-* [[http://pingus.seul.org/~grumbel/tmp/windstille-notes/index.html|Windstille Notes]]
-* [[http://pingus.seul.org/~grumbel/tmp/windstille-notes2/index.html|Windstille Notes 2 (older stuff)]]
-
-2006-03-01
-* [[http://pingus.seul.org/~grumbel/tmp/md5/a703721fe5f0923fd98d4adf4b3f75c3-mechrender13.png|Mech Rendering 1]]
-* [[http://pingus.seul.org/~grumbel/tmp/md5/b28432cbe65debcd29925957a2da9835-mechrender10.png|Mech Rendering 2]]
-* [[http://pingus.seul.org/~grumbel/tmp/md5/faf65297107fc171d35f8452d40e2181-mechs.png|Mech Sketches 1]]
-* [[http://pingus.seul.org/~grumbel/tmp/md5/7492d2fee62bf6131874f5d227ac70a7-mechs2.png|Mech Sketches 2]]
-
-2005-11-21
-* [[http://pingus.seul.org/~grumbel/tmp/md5/be21dbc75df2208363ceed93d4db695f-elevatorsketchcolor.jpg|Elevator Sketch (forest)]]
-* [[http://pingus.seul.org/~grumbel/tmp/md5/363e8b273008be323cd3a9004b0b9ed8-elevatorsketchcolor.jpg|Elevator Sketch]]
-
-2005-11-20
-* [[http://pingus.seul.org/~grumbel/tmp/md5/eb2bd086698b88be82d69c5316fe0234-minesketch.png|Mine Sketch]]
-* [[http://pingus.seul.org/~grumbel/tmp/md5/bb14afef86310d5ba4b7913de4bb9cee-troopshuttle-crash1.jpg|Shuttle Crash Sketch]]
-
-2005-11-15
-* [[http://pingus.seul.org/~grumbel/tmp/md5/34bb919733b9510c13c1d7684abe696b-elevator.png|Elevator]]
-* [[http://pingus.seul.org/~grumbel/tmp/md5/661fe108c69397de8cb128f5b7683059-stonetextures.jpg|Stone Texture]]
-* [[http://pingus.seul.org/~grumbel/tmp/md5/56229b5ca764e475ed4d1fe9b4c4cf0a-elevatorbase.png|Elevator base]]
-* [[http://pingus.seul.org/~grumbel/tmp/md5/638636cfc49f2fa7e267504bd12c9cc6-explosivecase.png|Elevator case]]
-
-2005-09-31
-* [[http://pingus.seul.org/~grumbel/tmp/md5/f8821262d08e58b79ae8c4a6cf4e40d5-windstillelevel.png|Sketch of the first mission]]
-
-2005-09-23
-* has been a slow month, anyway, 3D attachment points are now working and a water-effect is now included as well
-
-2005-08-28
-* Bob the barkeeper is rigged and a little bit animated
-
-2005-08-22
-* [[http://pingus.seul.org/~grumbel/tmp/windstille-monster-2005-08-21-2.png|Monster 3d model as entered SVN (unanimated)]]
-
-2005-08-20
-* a new generic gamepad driven GUI has entered SVN
-
-2005-08-19
-* a Laserpointer and some raycasting for the tilemap is now in the code
-* some new images for the flashlight light
-
-2005-08-18
-* Sophie, barkeeper and powersuit are mostly textured and ready to export to in-game, not yet animated however
-
-2005-08-16
-* antialising support
-* some more models made ready for the game
-
-2005-08-15
-* a 3d model for the pistol
-
-2005-08-06
-* input is configurable again
-* in-game PDA
-
-2005-08-05
-* switched away from ClanLib, SDL now creates the Windows and stuff
-
-2005-08-01
-* [[http://pingus.seul.org/~grumbel/tmp/windstille-2005-08-01-1.png|some new streetlamps]]
-* some new tiles, [[http://pingus.seul.org/~grumbel/tmp/windstille-2005-08-01-1.png|Screenshot 1]], [[http://pingus.seul.org/~grumbel/tmp/windstille-2005-08-01.png|Screenshot 2]]
-
-2005-07-29
-* some more cleanup and restructuring to get rid of ClanLib
-
-2005-07-28
-* a first try at writing a half usefull script, the player can now burst into flames when you gets to close to fire and extinguish himself when getting under the shower
-
-2005-07-26
-* TTF support now also in dialogs
-* particle system partly accessible from levelfile
-* [[http://pingus.seul.org/~grumbel/tmp/windstille-screenshot-2005-07-26.png|TextArea now has some formating abilites]]
-* lots of more code got switched from ClanLib to SDL
-
-2005-07-25
-* Lisp parsing code got a major cleanup
-
-2005-07-24
-* TTF font support
-* [[http://pingus.seul.org/~grumbel/tmp/windstille-monster-2.jpg|some new monster design]]
-
-2005-07-23
-* collision engine is now implemented and mostly working
-
-2005-07-20
-* level editor can now load/save Windstille levels, more or less at least
-
-2005-07-19
-* tilemap and the particle systems now all use VertexArrayDrawingRequest
-* in-game dialogs are now mostly working
-
-2005-07-18
-* tilemap handling is now based on pure OpenGL, no longer Clanlib sprites
-* a new ClanLib independed 2d sprite class is available
-
-2005-07-16
-* [[http://pingus.seul.org/~grumbel/tmp/windstille-nightvision-2005-07-16.png|Nightvision]]
-
-2005-07-14
-* console now has some simple line editing capabilities
-
-2005-07-10
-* Some more work on [[http://pingus.seul.org/~grumbel/tmp/windstille-yagor-2005-07-10-1.png|Yagor]] and [[http://pingus.seul.org/~grumbel/tmp/windstille-yagor-2005-07-10-2.png|another one]]
-
-2005-07-08
-* [[http://windstille.berlios.de/wiki/index.php/Ideas A first 3D version of Yagor]]
-
-2005-07-03
-* Animated 3D Sprites
-
-2005-06-30
-* [[http://pingus.seul.org/~grumbel/tmp/windstille-plasmagranate.png|Plasma Granate Sketch]]
-
-2005-06-29
-* [[http://pingus.seul.org/~grumbel/tmp/windstille-2005-06-30.png|experimental tilemap deformer]]
-* Flexlay compiles successfully on Windows for the first time
-
-2005-06-28
-* [[http://pingus.seul.org/~grumbel/tmp/windstille-spider2.png|2D sketch of the spider]]
-
-2005-06-25
-* scripting is now available via the console
-
-2005-06-24
-* console can now accept keyboard input
-* Sprite3D now uses vertex arrays
-
-2005-06-23
-* a first model of the spider is available
-
-2005-06-22
-* a bunch of new animation for the girl are available
\ No newline at end of file

Deleted: trunk/media/wiki/Overview.wiki
===================================================================
--- trunk/media/wiki/Overview.wiki	2009-02-15 16:09:33 UTC (rev 2503)
+++ trunk/media/wiki/Overview.wiki	2009-02-16 21:22:36 UTC (rev 2504)
@@ -1,91 +0,0 @@
-Windstille is planed to be an 2D action-adventure game along the lines
-of games like Flashback or Metroid, but it isn't intended as a direct
-clone from either of those. The gameplay will be divided into
-bascically two modes. In one the player walks around without his
-powersuit, thus he is limited to realistic human abilites. This mode
-is used to travel around in the city, talk to people and get jobs. In
-the other mode the player has equiped his powersuit and is out in the
-wild exploring new terrain, foreign planets and such which wouldn't be
-explorable without the suit. In both modes the player will be able to
-use weapons, in the former however much less often then in the later.
-
-
-== Story ==
-
-The game takes place in the distant future when mankind has developed
-faster than light travel and began colonizing the galaxy, building up
-industries and city on other planets. While some of those colonize
-live in wealth others have quickly run out of resources and are now
-struggling for survival. The game starts of in the later kind. Where
-the player takes the role of a yet nameless mercenary which is trying
-to make a living on one of those planets. See [[Plot]].
-
-== Engine and Graphics ==
-
-The engine is coded in C++ and uses ClanLib. It currently works in
-800x600 by using OpenGL. Tiles come currently in 64x64 and there is a
-particle engine, however not yet integrated into the
-game. Lightmapping is supported by the engine. Sprites should be in
-3D, but are currently 2D. There is a level editor, in the form of
-Flexlay, that however would need quite a bit additional work. There
-are 3D models for the powersuit and the hero without the suit.
-
-
-== Missing Pieces ==
-
-Basically most parts of the gameplay are missing, there is no real
-collision detection in place, there has been zero work on the human
-movement and the animations of the powersuit are also better to be
-redone from scratch. There is some scripting support in place, however
-that is based on Ruby and should be replaced with Squirrel
-
-
-== Milestone 1 Goals ==
-
-The goals for the first Milestone would be:
-
-* create a virtual reality look alike mission that teaches the player the use of the powersuit:
-** [[http://pingus.seul.org/~grumbel/tmp/windstille-virtualreality.png|Virtual Reality Artwork]]
-* create a small part of the city including a bar where the player finds is first job:
-** [[http://pingus.seul.org/~grumbel/tmp/windstille-level.xcf|Gimp XCF sketch of a level]]
-** [[http://windstille.berlios.de/artworks.html#scenery|Some close up sketched of possible scenarios]]
-* have the first real mission play in a forest like setting:
-** [[http://windstille.berlios.de/images/screenshot6.jpg|screenshot of forest setting]]
-* write proper dialog and story
-* some more info is available at:
-** [[http://windstille.berlios.de|Official Webpage]] (information on the official webpage however might be outdated and inaccurate)
-
-== Game Mechanics ==
-
-When without the powersuit you can:
-
-* walk
-* run
-* duck
-* jump, 3 tiles wide when staying, 4 tiles when running
-* jump-up to grab on a ledge or the like
-* roll
-* crawl
-* draw your weapon
-** shoot
-** sneak
-** put weapon back
-* use your inventory
-* flashlight
-
-Powersuit:
-
-* walk
-* run
-* jump
-* duck
-* shoot
-* IR-vision
-
-== Weapons ==
-
-* without the powersuit you carry a normal projectile based handgun
-* when with the powersuit you carry a multi-functional blaster, possible modes: plasma balls, laser, shild
-* satchel carges
-* mines
-* granates
\ No newline at end of file

Deleted: trunk/media/wiki/PDA.wiki
===================================================================
--- trunk/media/wiki/PDA.wiki	2009-02-15 16:09:33 UTC (rev 2503)
+++ trunk/media/wiki/PDA.wiki	2009-02-16 21:22:36 UTC (rev 2504)
@@ -1,9 +0,0 @@
-The PDA is a tool that can be used in the game to perform various functions, such as:
-
-* recording dialog, so that it can be recalled later on
-* record mission/quest logs
-* detailed auto-map
-
-When not in use the PDA should be in small form at the edge of the screen to provide a little automap, when activated it should pop-up and fill half the screen, while the player is visible on the other side, the game should continue to run when the PDA is activated. 
-
-The PDA shall also act as communicator to call remote characters, the ship, the base or services. 

Added: trunk/media/wiki/PDA.wiki
===================================================================
--- trunk/media/wiki/PDA.wiki	2009-02-15 16:09:33 UTC (rev 2503)
+++ trunk/media/wiki/PDA.wiki	2009-02-16 21:22:36 UTC (rev 2504)
@@ -0,0 +1,9 @@
+The PDA is a tool that can be used in the game to perform various functions, such as:
+
+* recording dialog, so that it can be recalled later on
+* record mission/quest logs
+* detailed auto-map
+
+When not in use the PDA should be in small form at the edge of the screen to provide a little automap, when activated it should pop-up and fill half the screen, while the player is visible on the other side, the game should continue to run when the PDA is activated. 
+
+The PDA shall also act as communicator to call remote characters, the ship, the base or services. 


Property changes on: trunk/media/wiki/PDA.wiki
___________________________________________________________________
Name: svn:mergeinfo
   + 

Added: trunk/media/wiki/Particles.wiki
===================================================================
--- trunk/media/wiki/Particles.wiki	2009-02-15 16:09:33 UTC (rev 2503)
+++ trunk/media/wiki/Particles.wiki	2009-02-16 21:22:36 UTC (rev 2504)
@@ -0,0 +1,6 @@
+ToDo: Document current particle systems and document possible
+shortcommings and missing features
+
+= Drawer
+
+= Variables

Deleted: trunk/media/wiki/People.wiki
===================================================================
--- trunk/media/wiki/People.wiki	2009-02-15 16:09:33 UTC (rev 2503)
+++ trunk/media/wiki/People.wiki	2009-02-16 21:22:36 UTC (rev 2504)
@@ -1,37 +0,0 @@
-Ingo Ruhnke - [[User:Grumbel|Grumbel]] - [mailto:grumbel at gmx.de grumbel at gmx.de]
-* 2d graphics
-* 3d modeling & texturing
-* programming
-
-Matthias Braun - [[User:MatzeB|MatzeB]] - [mailto:matze at braunis.de matze at braunis.de]
-* Programming
-* Voice acting
-
-Alex Rhodes - [[User:Pifactorial|Pifactorial]] - pifactorial at gmail dot com
-* Story & scripting
-* Voice acting?
-
-James Gregory - [[User:James Gregory|James Gregory]]
-* Programming
-* Scripting
-* Level editing?
-* Voice acting?
-
-Ken Hirsch  - [[User:quickflash|quickflash]] - [mailto:khirsch11414 at yahoo.com khirsch11414 at yahoo.com]
-* Animation
-* Story & Scripting
-* Voice acting
-* Voice editing/mixing
-
-David Kamphausen - [[User:Godrin|Godrin]] - [mailto:david.kamphausen at web.de david.kamphausen at web.de]
-* Programming
-
-Mark Dillavou - [[User:Line72|Line72]] - [mailto:line72_at_line72_dot_net]
-* Programming
-* Scripting
-* 3d modeling/texturing ?
-
-Marek Moeckel - [[User:Wansti|Wansti]] - [mailto:wansti(AT)gmx(DOT)de]
-* Music
-* Level Design?
-* Voice Acting ?
\ No newline at end of file

Deleted: trunk/media/wiki/Plot Events.wiki
===================================================================
--- trunk/media/wiki/Plot Events.wiki	2009-02-15 16:09:33 UTC (rev 2503)
+++ trunk/media/wiki/Plot Events.wiki	2009-02-16 21:22:36 UTC (rev 2504)
@@ -1,43 +0,0 @@
-While the [[Plot]] page goes already into the dialog and the details, this page should focus more on the overall structure, the events that happen and less on how each and every character reacts to them. As with all plot stuff nothing is really set in stone and you are welcome to add your ideas to the [[Ideas]] page or to the Discussion one of this page if you prefer.
-
-* 2263: Colonization of Space is begon
-
-* 2312: Terraforming on a dozens of moons and planets has begone
-
-* 2423: Athmosphere on Zeta-12 becomes breathable
-
-* 2426: colonization on Zeta-12 begins
-
-* 2434: multiple cities have been build on Zeta-12 
-
-* 2497: Jane is born
-
-* 2512: the main resources of Zeta-12 run mostly out, so that the planet gets less interesting for big cooperations
-
-* 2514: Jane quits mining business
-
-* 2515: Jane joins Yagor
-
-* Jane gets wounded in some incident, Jane recovers some days/weeks later (this is where the game starts)
-
-* Miner gets lost in the wood, Jane retrieves him, big Spider involved in this incident (This event is used to explain a bit that the terraforming caused all sorts of weird new creatures)
-
-* A resource freighter crashes down on Zeta-12 shortly after take-off, crash happens near the coast freighter is half flooded (freighter crashdown could be shown via surveillance camera and some dialog via radio)
-
-* Jane investigates the incident and shall recover the blackbox, gets attacked by unknown creature (a out of control devense system inside the freighter could give the player additional throuble, other dangers could be damaged power wires, water and such, unknown creature should be boss-fight like, in the end Jane should get seperated by the creature due to some explosion or so, fight might happen in large parts in the dark)
-
-* unknown creature spreads and causes incidents in some areas over the pass of some weeks/month (radio reports, news)
-
-* Jane tries to find such a creature alive
-
-* some more details about the creatures get know after the retrieval of a lifing one (creatures used to life underground and might have been originally native to the planet, terraforming changed them and mining set them free, which is why they ended up on the freighter)
-
-* outpost in which the creature is hold gets attacked and overrun
-
-* Jane goes to investigate again
-
-* Radar shows that creatures move closer to the city
-
-* Jane needs to stop creatures
-
-* End of this Milestone?
\ No newline at end of file

Deleted: trunk/media/wiki/Plot.wiki
===================================================================
--- trunk/media/wiki/Plot.wiki	2009-02-15 16:09:33 UTC (rev 2503)
+++ trunk/media/wiki/Plot.wiki	2009-02-16 21:22:36 UTC (rev 2504)
@@ -1,160 +0,0 @@
-This page is meant to show what has been decided so far. Please add dialog/script for new plot to the [[Ideas]] page rather than editing this page directly. This page already goes into the actual dialog, if you want a broader overview, go to the [[Plot Events]] page.
-
-When you are writing your new plot on the [[Ideas]] page, take account of the following:
-
-* Take account of the characters available at the [[Characters]] page, possibly we could create more but try to use existing characters where possible
-
-* Take account of the locations at the [[Locations]] page, as with characters we could create more but try to use existing locations where possible
-
-* Take account of the various debates about the background context of the story at the [[Ideas]] page and from the [[IRC Meeting 2 Brainstorming Summary]]
-
-We need plot to explain why the character is going from location A to location B, why they are talking to character D before shooting some stuff in location F, etc. You can add epic background stories of love and betrayal to the [[Ideas]] page if you want but what we really need is some down-to-earth gameplay plot.
-
-Some sort of process will take place whereby we agree on which ideas to use and which not to use, which ideas require new engine functionality and which must be discarded because they are too ambitious, etc. Here is what has been tentatively decided so far, though any and all of this is still up for debate.
-
-== Overview ==
-
-In general windstille should have episodic character. That is each release will feature a new small episode of the heros live, similar to weekly TV soaps :) This should match the open source development style better than having a huge epic story in 1 big release.
-
-== Background ==
-
-The game takes place in the distant future when mankind has developed faster than light travel and began colonizing the galaxy, building up industries and city on other planets. While some of those colonize live in wealth others have quickly run out of resources and are now struggling for survival. The game starts of in the later kind. Where the player takes the role of a yet nameless mercenary which is trying to make a living on one of those planets.
-
-The intro will go something like:
-
-Jane: "Its the year 2248[1], after mankind has developed faster-then-light travel they have begun colonizing other planets and building up industries on other planets in the search for usefull good, one could call it a second gold rush. Some say mankind has spread faster then good for them, others hail the technological progress. Some colonies have become quickly abandoned after no worthy goods have shown up on a planet, other flourish at the same time and some struggle for their survival. This story takes place on one of the struggeling colonies, resources are rare and goods are seldom, the people struggle for their survival, but most of them like it that way."
-
-- View on the Planet -
-
-Jane: "This is Planet SYS339-3, my planet, moved here after I got sick of the mining business. Always moving from planet to planet just turned out to be less fun then expected, so I tried to settle here, build up a new live. Had a hard time in the beginning, but once I meet Yagor. Have worked for him now for like 6 month and things started to get better had a bunch of fun in the job till that one day..."
-
-- Cutscene of Jane getting hit/bitten whatever and getting wounding and then dragging herself to the next opening in the forest to be found by the shuttle. Tilemap for this should be all black, so that only Jane is visible.
-
-- Fadeout
-
-Jane: "Have been out of work since that day, can't really remember what happened. All I know that I broke my leg and lost a lot of blood, wasn't that much fun and pure luck that 'Pilot' found me in time. Recovery took a while, but tomorrow is now my first day back in the job. Yagor wants me todo VR training first, he doesn't seem to trust my abilites anymore, well, guess a little bit VR training can't after beeing out of order for a while."
-
-- Cutscene of Jane entering the VR-chamber
-
-- VR gets activated
-
-AI: "Welcome Jane, long time no see. Good to have you back."
-
-Jane: "How about we stop talking and start training, show me what you got."
-
-AI: "Ok, I have prepared a few programms for you, Yagor wants you to start with the first one, so lets go"
-
-ControllDialog: "Press left/right to walk, press up to enter a door"
-
-Player enters with Jane programm 1 door
-
-AI: "First programm is just a little bit jumping and running, have prepared a little course for, see those gems (camera scrolls around and shows the scenario), try to collect them all."
-
-Player can now move around in the level to collect gems, ControllerDialog shows the keypressed that are required to complete a specific obstacle.
-
-(text runs out and the game fades over to the apartment of Jane, where Jane is just doing a VR training in her new powersuit)
-
-== Virtual Reality Training ==
-
-VR Training shows the player what actions are available and how to use
-them. It does this by guiding the player through a little course where
-he needs all the available actions to make it to the end, an AI-voice
-will explain the player what to do. A little meta-game control help window will tell the player which exact buttons he has to press to perform an action.
-
-# Walking: the player is commanded to walk from his current position to a marked new position
-# Running: the player is commanded to walk from his current position to a new one, the way is however bloked by a conveyour belt which he can pass without changing to running mode
-# Jumping: the player has to jump over a small abyss, if he doesn't make the jump he will get reset to a position infront of the abyss
-# Climbing: the player has to make a 'hang-jump' (Up+Jump) to climb onto a little mountain
-# Duck: the player has to make its way under a block, under the block is a conveyour belt, so ducking will let him glide under it
-# Rolling: same as above but this time the player has to run and then make a roll under the block, optionally this might also be done with sneaking
-
-After movement training is over, the VR Training will switch over to weapon training, where the player has to grab a gun and use it to shoot a bunch of dummy targets (double-pyramids or something like that). Also available should be grenades, satchel charges and shield.
-
-== Back in Real World ==
-
-(onces done with the training Jane takes a shower)
-
-(seconds later her communicator starts to ring)
-
-(Jane dresses up and leaves the shower to take the call)
-
-Boss[4]: "Hi Jane, looks like there is some throuble up in the bar."
-
-Jane: "What's it about?"
-
-Boss: "Not sure exactly, but might be a job for you."
-
-Jane: "Ok, on my way."
-
-(Jane grabs her jaked and leaves her apartment and goes to Jimbos bar,
-just a few screens away)
-
-Jane: "Hi, Bob. Whats up?"
-
-Bob: "Jane! Long time no see. Looks like one of our mineral-hunters got into
-trouble. He moved deep into the nothern forest and got trapped, we
-got the emergency call half an hour ago."
-
-Jane: "Doesn't Northern Star take care of this?"
-
-Bob: "Don't ask me, ask them..."
-
-Miner: "Hey, what did you expect from us? We already underpaid, don't wanna risk my neck for that poor bastard. He should have known better to stay away from that forest."
-
-Jane: "Don't you have the slightest idea of comradeship?"
-
-Miner: "What'd you know lady?"
-
-Jane: "Hrmpf, guess I can't expect much of those drunken guys. Anyway, I am in, let me know his last position."
-
-Bob: "Ok, here you go."
-
-(Communicator call from Boss)
-
-Boss: "Got something?"
-
-Jane: "Yep, everything is set, looks like we have a job.  Come and get me."
-
-Boss: "Okay, lets meet on the roof, will be there in a minute."
-
-Jane: "Yep"
-
-(Jane goes to the roof and enters the spaceship, piloted by Boss)
-
-(little cutscene that shows spaceship flying over to the northern
-forest)
-
-(Jane gets dropped at the forest)
-
-Boss: "Ok Jane, this is as far as I can bring you, you have to make
-the rest on your own. I'll stay in contact."
-
-== Forest Action Sequence ==
-
-The forest is full of creatures, some/most hostile and agressive,
-nobody really knows where they did come from, but rumor is that they
-are caused by some genetic material which was spread over the forest
-as a cargo ship of the Bio-Corp[7] crashed into the forest, however
-that incident has never been confirmed officially and since it
-happened in the early days of colonization no proper record of the
-happenings is available and truth to be told, nobody really cares
-anymore, people have other problems these days.
-
-(Jane now goes hunting down the forest, shooting spiders and other
-animals that cross the way)
-
-Automapping and regular radio messages guide the way through the
-forest.
-
-The level will play both above and below the ground, the below-ground
-sections will allow to greate labyrinth like structures, which the
-above ground only allow in a rather limited fasion.
-
-
-
-(Final boss is a large spider into which net the mineral-hunter has
-fallen)
-
-(to be continued)
-
-[1],[2],[3],[4],[5],[6],[7] just random names/dates/stuff for filling
\ No newline at end of file

Deleted: trunk/media/wiki/Prefab.wiki
===================================================================
--- trunk/media/wiki/Prefab.wiki	2009-02-15 16:09:33 UTC (rev 2503)
+++ trunk/media/wiki/Prefab.wiki	2009-02-16 21:22:36 UTC (rev 2504)
@@ -1,24 +0,0 @@
-A Prefab ist a pre-fabricated game-object or a group prefabricated game-objects. The purpose of a Prefab is to easily place a multiple component object. For example a trashcan might consists of both a sprite, a gameobjects which represent a few flies that fly around it and some other items. So job of a prefab would know we to encapsule this complex object and offer it to the user in the level editor as a single easy to use object.
-
-== Prefab Definition Files ==
-
-All prefab need to be defined in a file so that the editor can find out which are available and how they should be represented in the level editor.
-
-{{{
-(windstille-prefab
- (name "streetlamp")
- (sprite "images/objects/trashcan.sprite"
- (parameter (pos "vector") (image "sprite") ... ({Name} {Type}))
- (function "prefab_streetlamp"))
-}}}
-
-Name gives the name of the prefab, while sprite gives the sprite which should represent it in the editor. Parameter is a list of possible parameters that the prefab can have and which should be editable in the editor. Function is the scripting function which is called with the given parameter to create the prefab.
-
-{{{
-function prefab_streetlamp(params)
-{
- // set trashcan_params and flies_params here according to what is set in params
- spawn_object("scriptable-objects", trashcan_params)
- spawn_object("flies", flies_params)
-}
-}}}

Deleted: trunk/media/wiki/Prototypes.wiki
===================================================================
--- trunk/media/wiki/Prototypes.wiki	2009-02-15 16:09:33 UTC (rev 2503)
+++ trunk/media/wiki/Prototypes.wiki	2009-02-16 21:22:36 UTC (rev 2504)
@@ -1,12 +0,0 @@
-== Navigation Mesh ==
-
-The Navigation Mesh Prototype should demonstrate the concept of the
-navigation mesh level layout and demonstrate actions like jumping,
-ledge grabbing, etc. performated on the mesh.
-
-== Shooting ==
-
-The shooting test shall demonstrate the shooting, the aiming with
-laser pointer, as well as flamethrower action.
-
-

Deleted: trunk/media/wiki/Rebirth.wiki
===================================================================
--- trunk/media/wiki/Rebirth.wiki	2009-02-15 16:09:33 UTC (rev 2503)
+++ trunk/media/wiki/Rebirth.wiki	2009-02-16 21:22:36 UTC (rev 2504)
@@ -1,13 +0,0 @@
-Time to document a few things that went wrong in the past and how I intend to fix them.
-
-== Tilemaps
-
-While tilemaps are a classic building block of 2D games, they just didn't work out for what I had in mind. There is to much flexibility that is lost due to them and there are quite a few things that are made much harder, like slopes, AI reactions to the environment, etc.
-
-How do I intend to fix this? The level in terms of graphics will be a series of textures quads that can be freely placed. The collision geometry on the other side will be a series of line segments. When a player walks he will follow those line segments instead of constantly checking a tilemap. This will lead to a kind of on-rails gameplay instead of a more freeform one. 
-
-Some code for this is in place and availabe in a test application, it is not hooked up into the game.
-
-== 
-
-Gam e

Added: trunk/media/wiki/Rebirth.wiki
===================================================================
--- trunk/media/wiki/Rebirth.wiki	2009-02-15 16:09:33 UTC (rev 2503)
+++ trunk/media/wiki/Rebirth.wiki	2009-02-16 21:22:36 UTC (rev 2504)
@@ -0,0 +1,13 @@
+Time to document a few things that went wrong in the past and how I intend to fix them.
+
+== Tilemaps
+
+While tilemaps are a classic building block of 2D games, they just didn't work out for what I had in mind. There is to much flexibility that is lost due to them and there are quite a few things that are made much harder, like slopes, AI reactions to the environment, etc.
+
+How do I intend to fix this? The level in terms of graphics will be a series of textures quads that can be freely placed. The collision geometry on the other side will be a series of line segments. When a player walks he will follow those line segments instead of constantly checking a tilemap. This will lead to a kind of on-rails gameplay instead of a more freeform one. 
+
+Some code for this is in place and availabe in a test application, it is not hooked up into the game.
+
+== 
+
+Gam e


Property changes on: trunk/media/wiki/Rebirth.wiki
___________________________________________________________________
Name: svn:mergeinfo
   + 

Deleted: trunk/media/wiki/Roadmap.wiki
===================================================================
--- trunk/media/wiki/Roadmap.wiki	2009-02-15 16:09:33 UTC (rev 2503)
+++ trunk/media/wiki/Roadmap.wiki	2009-02-16 21:22:36 UTC (rev 2504)
@@ -1,34 +0,0 @@
-The following roadmap should give a little guide in which order stuff will be developed, so that it can be tested and integrated without to much stepping over each others feed. The main goal is to create a fully playable Milestone 3 (Version 0.3.0) release in the next few month (something around three might be accurate).
-
-The following items should be more or less developed in that order, so that progress is visible and we won't end up with a completly unplayable version inbetween:
-
-* create 32x32 tiles for the virtual world
-* switch the engine back to 32x32 tiles
-* rewrite the currently fully broken collision code to properly handle tilemap - player collisions
-* add support for multiple sectors
-* add/cleanup the dialog support 
-* integrate squirrel scripting into the engine
-* write 'story' for the tutorial, ie. simply a AI that will tell the player how to control the game
-* create the levels necessary for the tutorial
-* create an additional level for the tutorial in which the player can train their movement in free form
-* create all necessary animations for the hero
-* finialize the story and the needed settings for the actual game
-* create all the necessary character 3d models for the actual game
-* do the graphics for the house/base of the hero
-* do the graphics for the powersuit scenario
-* write the dialog for the game
-* create the sound effects for the game
-* create music for the game
-* do the voice over for the game
-
-The following items can be implemented basically as soon as somebody finds the time:
-
-* add slope support to the tilemap
-* add stair support to the tilemap
-* add support to push boxes around
-* add support for carring and stacking boxes
-* add support for multi-layer playfields (ie. rooms that you can enter, which cause the wall to fade away)
-
-== Releases == 
-
-Release 1.0.0 should be a fully playable and complete version, releases before that should be playable as well and should contain at best a self contained story. Development releases/technical previews should be seperated from the playable released and should provide a special interface which lets you select level, intros, etc. The init/intro screen should show that the current version is not playable.
\ No newline at end of file

Deleted: trunk/media/wiki/Scripting.wiki
===================================================================
--- trunk/media/wiki/Scripting.wiki	2009-02-15 16:09:33 UTC (rev 2503)
+++ trunk/media/wiki/Scripting.wiki	2009-02-16 21:22:36 UTC (rev 2504)
@@ -1,13 +0,0 @@
-Windstille uses [[http://www.squirrel-lang.org/|Squirrel]] for scripting. The full source code of squirrel is included within the "squirrel" subdirectory of Windstille's source, and it is automatically built into the game.
-
-C++ functions are exposed to scripts via the interface in the "scripting" sub directory". Miniswig, found in the "tools/miniswig" subdirectory, is a tool that creates wrapper functions to allow the interface functions to be called from squirrel. If you have bison and flex installed then miniswig will be built automatically, and any changes you make to the scripting interface will automatically be added to the wrapper functions when you execute jam.
-
-Each sector/level is stored in an sexpr based .wst file. This contains tilemap layout, trigger locations (doors etc), spawn locations of bad guys, NPCs and the player character, as well as various other things. At some point thse will be editable using the [[http://flexlay.berlios.de/|Flexlay]] tile/level editor, though this doesn't work correctly at the moment.
-
-The plan is that scripts can then be associated with these .wst sectors, or indeed with individual bad guys or objects within these sectors. Multiple scripts can be run simultanously. Some examples of things scripts might be used for:
-
-* to alter the starting locations of bad guys, NPCs or the player character, or stop any one of these from spawing at all
-* to alter which trigger points are active, or to alter their locations, or what they do
-* to control the AI behaviour of bad guys or NPCs
-* to control dialog with NPCs
-* to control when and where new information is provided to the player
\ No newline at end of file

Added: trunk/media/wiki/Scripting.wiki
===================================================================
--- trunk/media/wiki/Scripting.wiki	2009-02-15 16:09:33 UTC (rev 2503)
+++ trunk/media/wiki/Scripting.wiki	2009-02-16 21:22:36 UTC (rev 2504)
@@ -0,0 +1,13 @@
+Windstille uses [[http://www.squirrel-lang.org/|Squirrel]] for scripting. The full source code of squirrel is included within the "squirrel" subdirectory of Windstille's source, and it is automatically built into the game.
+
+C++ functions are exposed to scripts via the interface in the "scripting" sub directory". Miniswig, found in the "tools/miniswig" subdirectory, is a tool that creates wrapper functions to allow the interface functions to be called from squirrel. If you have bison and flex installed then miniswig will be built automatically, and any changes you make to the scripting interface will automatically be added to the wrapper functions when you execute jam.
+
+Each sector/level is stored in an sexpr based .wst file. This contains tilemap layout, trigger locations (doors etc), spawn locations of bad guys, NPCs and the player character, as well as various other things. At some point thse will be editable using the [[http://flexlay.berlios.de/|Flexlay]] tile/level editor, though this doesn't work correctly at the moment.
+
+The plan is that scripts can then be associated with these .wst sectors, or indeed with individual bad guys or objects within these sectors. Multiple scripts can be run simultanously. Some examples of things scripts might be used for:
+
+* to alter the starting locations of bad guys, NPCs or the player character, or stop any one of these from spawing at all
+* to alter which trigger points are active, or to alter their locations, or what they do
+* to control the AI behaviour of bad guys or NPCs
+* to control dialog with NPCs
+* to control when and where new information is provided to the player
\ No newline at end of file


Property changes on: trunk/media/wiki/Scripting.wiki
___________________________________________________________________
Name: svn:mergeinfo
   + 

Deleted: trunk/media/wiki/Similar Games.wiki
===================================================================
--- trunk/media/wiki/Similar Games.wiki	2009-02-15 16:09:33 UTC (rev 2503)
+++ trunk/media/wiki/Similar Games.wiki	2009-02-16 21:22:36 UTC (rev 2504)
@@ -1,36 +0,0 @@
-While Windstille tries to be somewhat original, however there is are obviously some games that have been a huge inspiration.
-
-== Another World ==
-
-One of the most athmosperic games ever created, it has tons of little details, birds in the background, a lion like creature that will watch you in the background for a few screens and will attack you only moments later. Its basically 100% scriptbased, meaning no screen will play the same as the one before, something that makes this game rather uniq and sets it apart from basically all other platformers. Fighting against enemies works either by using the environment, ie. drop huge objects on them (cage, crystal ball) or by using a laser weapon which has three modes, normal shoot, shield and a wall-blasting supershoot. The mode is selected by charging the weapon for a given amount of time.
-
-== Flashback ==
-
-Still probally one of the best animated games ever, especially the later levels where you travel around in a city had quite a bit of influence on the 'human-part' of Windstille.
-
-* [[http://pingus.seul.org/~grumbel/tmp/flashback-gameplay.avi|Flashback Gameplay Video 1]]
-* [[http://pingus.seul.org/~grumbel/tmp/flashback-gameplay3.avi|Flashback Gameplay Video 2]]
-
-== Persian Gulf Inferno ==
-
-Can't really remember much about this game, but the general look was somewhat similar to Flashback.
-
-== Metroid ==
-
-Obviously a heavy inspiration for the powersuit part, however Windstille should try to be quite a bit slower, making the action more real and less jumpy. Metroid Zero Mission actually also contains a short 'human-part', where you have to survive without your powersuit, however that is not all that well executed, looks for most part like a sneaking-game (MetalGear), but actually is just run and hide with the enemies since one simply can't actually 'sneak'. Still is worth a look, video is available [[http://ia200100.eu.archive.org/hdc1/items/MetroidZM_2850/MetroidZM_2850_part4.avi|here (forward a minute or two to get to the human-part, its from a speedrun, so it doesn't exactly represent normal gameplay, but it gets close)]].
-
-== Turrican ==
-
-Turrican is obviously inspired by Metroid and so Windstille is also inspired by Turrican. Originally, meaning the first few days/weeks of development, Windstille reused some Turrican gfx as fillers.
-
-== Cybernator ==
-
-A 2D Sidescrolling mech game, looks somewhat similar to Metroid, but plays *much* slower, since you really are controlling a huge mech and not just a person in powersuit, quite unlike basically every other 2d side scroller.
-
-== Mission Elevator/Elevator Action ==
-
-Rather obscure reference, however was probally the first 2D game that had a somewhat 'realistic' environment, or at least the first one I touched.
-
-== Other similar scrollers ==
-* [[http://www.blizzard.com/blizzclassic/#blackthorne|Blackthorne]]
-* [[http://www.oddworld.com/games/ow_abeodd.shtml|Abe's Oddysee]]
\ No newline at end of file

Deleted: trunk/media/wiki/Sprite Format.wiki
===================================================================
--- trunk/media/wiki/Sprite Format.wiki	2009-02-15 16:09:33 UTC (rev 2503)
+++ trunk/media/wiki/Sprite Format.wiki	2009-02-16 21:22:36 UTC (rev 2504)
@@ -1,20 +0,0 @@
-Sprite handle animation based on 2d images, they support using multiple images as frames as well as cutting the frames out of a single image.
-
-{{{
- (sprite 
-   (action
-     (name "default")
-     (speed 4.0)
-     (images "foo/bar/frame1.png" "foo/bar/frame2.png")
-     (offset 100 10))
- 
-   (action
-     (name "run")
-     (speed 15.0)
-     (image-grid
-       (file "human_turn.png")
-       (x-size 98)
-       (y-size 125))))
-}}}
-
-Other stuff from sprite which might not yet be implemented: 'Origin', alpha, color, pingpong, blendfunc, scale, vflip.
\ No newline at end of file

Deleted: trunk/media/wiki/Talk:Collision Detection.wiki
===================================================================
--- trunk/media/wiki/Talk:Collision Detection.wiki	2009-02-15 16:09:33 UTC (rev 2503)
+++ trunk/media/wiki/Talk:Collision Detection.wiki	2009-02-16 21:22:36 UTC (rev 2504)
@@ -1,46 +0,0 @@
-<<ind:0>>
-Some questions concerning the collision handling:
-# Should we use constant or increasing speed, while pushing/pulling boxes ?
-# Moving the player avatar is done in constant speed, yes? I've not compiled the game yet.
-# What about elasticity - do we need this?
-# What about pushing more than 1 box? Should this be prevented?
-
--- [Godrin]
-<</ind>>
-
-<<ind:1>>
-The most important point is that the GameObjects get proper feedback on collision, which object collided with which other objects, at which side, what speed had the other object when the collision occurred, at which exact point in time the collision occured and such. How to react on that is then the job of the GameObject, for most GameObjects physical behaviour is not usefull, it would be just a 'nice to have' for the few cases where one wants stacked boxes and such.
-
--- [[User:Grumbel|Grumbel]] 16:23, 25 Jun 2005 (BST)
-<</ind>>
-
-<<ind:1>>
-About the box example: You should use normal impulse equations, so this would result in the box increasing it's speed and it would also allow pushing multiple boxes. Elasticity is in general not needed I think.
-
-Another important part of the phyiscs/collision stuff would be to handle slopes correctly.
-
--- [[User:MatzeB|MatzeB]]
-<</ind>>
-
-<<ind:1>>
-Some more questions:
-# As I see, there is already some nice collision demo in test. I think I'll integrate this with the old way collision is done with the tilemap, ok?
-# As Jane isn't really box-shaped, should we part here into several boxes? That would mean linked boxes, which share speed, force and mass. And that leads to the question how to get these boxes. Maybe we should stick to one box, but that has the drawback of bad collision detection when shooting.
-
--- [[User:Godrin|Godrin]] 10:07, 26 Jun 2005 (BST)
-<</ind>>
-
-<<ind:0>>
-There are actually two seperate collision engines in Windstille, completly forgot that I already started the first one after starting the second one a few month later. The second one is in test/physics/ with the jumping boxes and the first one is in collision_manager.cxx and ctest.cxx (last file needs to be recovered from svn history), the first one doesn't do physics but has some API that handles the collision events, which is much more important than jumping boxes, jumping boxes are something that should be implemented ontop of a proper collision event system, not the other way around. 
-
-Another thing that isn't handle by either of those is what I call 'attachments', ie. when you are standing on a moving platform or a conveyour belt you are attached to it and navigate in its coordinate space as long as you are attached, thats something that the physic/collision/entity engine would need to handle as well, so that one could mark objects as attachable to other objects
-
--- [[User:Grumbel|Grumbel]] 15:40, 26 Jun 2005 (BST)
-<</ind>>
-
-<<ind:0>>
-Some news on the collision detection. I think I've found a solution for the 3-box-problem falling on each other. After doing the actual collision detection a constraint-assurance-algorithm is run in each frame. This algorithm does push colliding objects from each other till there is no penetration or a maximal count of tries is reached. This seems to work ok. Now I need some more time to fix some problems with slopes and implement this unstucking for combined collision-objects.
-I hope you can cope with some more delay on this, as I have very limited time. The current code can be found at: http://www-users.rwth-aachen.de/David.Kamphausen/collisiontest_050629.tgz
- 
--- [[User:Godrin|Godrin]] 11:47, 29 Jun 2005 (BST)
-<</ind>>

Deleted: trunk/media/wiki/Talk:Dialog.wiki
===================================================================
--- trunk/media/wiki/Talk:Dialog.wiki	2009-02-15 16:09:33 UTC (rev 2503)
+++ trunk/media/wiki/Talk:Dialog.wiki	2009-02-16 21:22:36 UTC (rev 2504)
@@ -1,78 +0,0 @@
-
-{{{
-//first we need to decide where in out story-book/linked-list like structure to start
-if (famous_for_killing_big_spider)
-	//haven't actually written this function, this just demonstrates global/local distinction
-	congratulations();
-else if (knows_you_mercenary)
-	offer_job();
-else if (seen_before)
-	hello_again();
-else
-	intro();
-
-function intro()
-{
-	seen_before = true;
-	dialog_show("Hey, my name's Bob, you new around here?");
-	add_answer("Yes, I am.", "Go away.");
-	switch(get_answer()) {
-	case 0:
-        ask_questions();
-	  break;
-	case 1:
-	  bye();
-	}
-}
-
-function hello_again()
-{
-	dialog_show("Hello again.");
-	add_answer("Hey.", "Bye.");
-	switch(get_answer()) {
-	case 0:
-	  ask_questions();
-	  break;
-	case 1:
-	  bye();
-	}
-}
-
-function ask_questions()
-{
-	dialog_node("So what you doing here?");
-	add_answer("I work as a mercenary.", "Not much.");
-	switch(get_answer()) {
-	case 0:
-	  knows_you_mercenary = true;
-	  offer_job();
-	  break;
-	case 1:
-	  bye();
-	}
-}
-
-function offer_job()
-{
-	dialog_show("Looking for work?");
-	add_answers("I might be, if the offer is good enough.", "No thanks.");
-	switch(get_answer()) {
-	case 0:
-	  knows_your_job = true;
-	  //I haven't actually written this function in this pseudo-code
-	  details_of_job();
-	  break;
-	case 1:
-	  bye();
-	}
-}
-
-function bye()
-{
-	if (knows_your_job)
-		dialog_show("Feel free to come back if you need a job");
-	else
-		dialog_show("See you again some time, maybe");
-	return;
-}
-}}}

Deleted: trunk/media/wiki/Talk:Graphics.wiki
===================================================================
--- trunk/media/wiki/Talk:Graphics.wiki	2009-02-15 16:09:33 UTC (rev 2503)
+++ trunk/media/wiki/Talk:Graphics.wiki	2009-02-16 21:22:36 UTC (rev 2504)
@@ -1,29 +0,0 @@
-Character animation could also be done with the help of [[http://cal3d.sf.net|cal3d]]. There are good blender exporters around for cal3d and using it is easy.
-
-
-----
-[[Quickflash]]
-
-Created some animations for the hero - feedback welcomed...
-
-WalkCycle - [[http://esoteric.clanlib.org/~khirsch/windstille/Walk.avi|Walk.avi]]
-
-:The stride is a bit long for walking and the front leg makes an odd move when it is pulled forwards. Otherwise it great. 
-
-Basic Stance, perhaps listening to someone - [[http://esoteric.clanlib.org/~khirsch/windstille/Stand.avi|Stand.avi]]
-
-Turning around, the sprite will have to be a little off, but it looks much more un-natural otherwise [[http://esoteric.clanlib.org/~khirsch/windstille/Turn.avi|Turn.avi]]
-
-Curiously looking around.  Perhaps if you have her standing in certain area's waiting she can do actions like these [[http://esoteric.clanlib.org/~khirsch/windstille/Curious.avi|Curious.avi]]
-
-RunCycle, this is at a slower speed than in game - [[http://esoteric.clanlib.org/~khirsch/windstille/Run.avi|Run.avi]]
-
-Jump Up [[http://esoteric.clanlib.org/~khirsch/windstille/StandJump.avi|StandJump.avi]]
-
-Hanging - [[http://esoteric.clanlib.org/~khirsch/windstille/Hang.avi|Hang.avi]]
-
-Jump Up to Hanging - Hanging animation will be off compared to this one... [[http://esoteric.clanlib.org/~khirsch/windstille/JumpToHang.avi|JumpToHang.avi]]
-
-Hero Swinging from above - [[http://esoteric.clanlib.org/~khirsch/windstille/Swing.avi|Swing.avi]]
-
-Hero Climbing a ladder - [[http://esoteric.clanlib.org/~khirsch/windstille/Climb.avi|Climb.avi]]
\ No newline at end of file

Deleted: trunk/media/wiki/Tile Specification Format.wiki
===================================================================
--- trunk/media/wiki/Tile Specification Format.wiki	2009-02-15 16:09:33 UTC (rev 2503)
+++ trunk/media/wiki/Tile Specification Format.wiki	2009-02-16 21:22:36 UTC (rev 2504)
@@ -1,47 +0,0 @@
-The tile file, ie. the tile which defines which graphics are used for a tile, if the tile is collidable or not, etc., should support the following features:
-
-* multi frame animated tiles
-* TexCoord animated tiles (waterfall)
-* multiple tiles per image
-* efficent storage of tiles in OpenGL textures
-
-They should not support:
-
-* support for the different graphics layers (color/light/highlight) turned out to be more throuble then good so it got removed, instead you should be able to place a complete tilemap on the highlight layer.
- 
-Below is what we currently have, more or less, its far from final.
-
- (windstille-tiles
-   ;; Tile-Groups group different tiles together, this is used in
-   ;; the editor, so that tiles can be selected by topic
-   (tilegroup
-     (name "Virtual Reality")
-     (tiles  31 30 114 ...))
- 
-   ;; The given image is cut into 32x32 grid, 'ids' gives which ids are assigned to
-   ;; which grid piece, 'colmap' specfies the same for the collision properties.
-   ;; This would not support animations, but it shouldn't be a problem for the most
-   ;; number of tiles.
-   (tiles (image "tiles/foo.png")
-          ;; width/height (in tiles) are used so that the editor knows which part of an image are used
-          ;; this is usefull since you can then resize the tile-image without breaking the id/colmap setting
-          ;; it is not strictly necessary, but it should give a smoother workflow, since work on the
-          ;; tile-image doesn't break the mapping
-          (width 16)
-          (height 16)
-          ;; Ids for tiles in the image
-          (ids 0 1 2
-               3 4 5
-               6 7 8)
-          ;; Collision information for tiles in the images (number is a bitmask)  
-          (colmap
-              0 0 1
-              0 0 1
-              1 1 1))
-  
-   ;; Sprite based tiles, used for animation (not yet handled by the engine)
-   (tile
-     (id 13)
-     (sprite "images/tile13.sprite")
-     (colmap 0))
-  )
\ No newline at end of file

Deleted: trunk/media/wiki/Tilemap.wiki
===================================================================
--- trunk/media/wiki/Tilemap.wiki	2009-02-15 16:09:33 UTC (rev 2503)
+++ trunk/media/wiki/Tilemap.wiki	2009-02-16 21:22:36 UTC (rev 2504)
@@ -1,3 +0,0 @@
-Normally multiple tiles come per image, see [[Tile Specification Format]], the Tile handling code should be able to load the images, cut the tiles out and seperate them to textures. The Tile handling code should make sure that the tiles get properly packaged to a power-of-two texture even when the original image might not have that format.
-
-The Tile drawing code basically draw a array of vertexes with the UV coorditaes assigned to the right tile position, the vertex array or grid should be deformable for 'wobble' effects across the map.
\ No newline at end of file

Deleted: trunk/media/wiki/Windstille Drawing Model.wiki
===================================================================
--- trunk/media/wiki/Windstille Drawing Model.wiki	2009-02-15 16:09:33 UTC (rev 2503)
+++ trunk/media/wiki/Windstille Drawing Model.wiki	2009-02-16 21:22:36 UTC (rev 2504)
@@ -1,81 +0,0 @@
-= Drawing Operations =
-To bring images on screen you have to execute drawing operations. There are several different types of drawing operations. Each of them depend on a number of parameters.
-
-== Common Parameters ==
-These parameters are used for all drawing operations
-* Position, Rotation, Scale -- These 3 values together are called a modelview transform and are encoded as a 4x4 Matrix
-* Color -- the color is multiplied with each pixel that is drawn
-* blend_sfactor, blend_dfactor -- factors that are used for blending pixels with alpha values on screen (see glBlendFunc for details)
-
-== Text ==
-Writes text on the screen. Parameters:
-* Font -- The font that is used to write the characters (the font has additional attributes like color of the text)
-
-== Surface ==
-Draws a 2d bitmap (called Surface) on screen. Parameters:
-* Surface -- a pointer to a surface (a surface contains the opengl texture handle and uv coordinates)
-
-== Sprite3D ==
-Draws a 3d model on screen. See Sprite3D class for more details. Parameters:
-* Sprite3D -- the 3d sprite that should be drawn
-
-== VertexArray ==
-Executes a drawing command for opengl primiteves. (Typically used for GL_QUAD and GL_TRIANGLE)
-* texture -- texture handle of the opengl texture
-* type -- opengl primitive type
-* vertex list
-* normal list (optional, specified per vertex)
-* color list (optional, specified per vertex)
-
-= State Model and Transform Stack =
-When looking at typical code that does drawing operations, one observes that the
-common parameters are often the same for several drawing operations. It is convenient to 
-not have to specify all parameters again and again for each
-drawing operation. So we created a state machine that maintains a "current" value
-for each of the common parameters.
-
-You can also observe that most of the time the things you want to draw are
-given in a local coordinate system only. Typically you apply a "camera"
-transform to them or have even deeper parent/child relations where the
-coordinate system is relative to the parent. These cases can nicely be handled
-by a stack for the Position, Rotate and Scale attributes. Positions, Rotations
-and Scales are now specified relative to the topmost stack element. You can now simply push
-the transformation from child coordinate system to parent coordinate system on the stack
-and draw all childs in their own coordinate system.
-
-= Foreground/Background and Z-Positions =
-We're presenting a (pseudo) 3d dimensional world on a 2d dimensional screen.
-Handling Foreground and Background requires us to sort the Drawing Operations
-so that stuff in the foreground is drawn after stuff in the background and
-obscures the background.
-
-It's very difficult to enforce a certain drawing order in the code, so we're
-introducing the concept of a z-position. DrawingOperations with higher
-z-positions will be executed after drawing operations with lower z-positions.
-This means that we can't execute the drawing operations imediately anymore, but
-we have to store the information needed to execute them. We call this info a
-Drawing Request. We fill a list with all Drawing Requests and sort them
-according to their z-positions and finally execute them in the correct order.
-
-= Implementation =
-The basic block of the implementation is the DrawingRequest class. It stores all
-information needed to execute a drawing operation. You can create custom subclasses from this class and override
-the draw() function to execute your custom drawing operations. You can expect
-that all common parameters that are maintained by the DrawingContext are already
-setup when the draw() function is called.
-
-The DrawingContext class is responsible for the state management and maintains
-the modelview transform stack.
-
-= Optimisations =
-To correctly implement the drawing operations we have to create snaphots of the
-current drawing state and append it to all DrawingRequests. You can observe that
-for most drawing operations in a typical scene these snapshots contain identical
-values except for the position.
-
-So we factor out the modelview and color+blendfunctions used in DrawingRequests
-to point to a shared block that is used by multiple Drawing Requests. This not
-only reduces memory consumption but also allows for more efficient restoring of
-the drawing state in opengl. As we can now compare the pointers of the
-ModelView and color+blenfunc objects and only reset these values if the
-pointers are different.
\ No newline at end of file

Added: trunk/media/wiki/Windstille Drawing Model.wiki
===================================================================
--- trunk/media/wiki/Windstille Drawing Model.wiki	2009-02-15 16:09:33 UTC (rev 2503)
+++ trunk/media/wiki/Windstille Drawing Model.wiki	2009-02-16 21:22:36 UTC (rev 2504)
@@ -0,0 +1,81 @@
+= Drawing Operations =
+To bring images on screen you have to execute drawing operations. There are several different types of drawing operations. Each of them depend on a number of parameters.
+
+== Common Parameters ==
+These parameters are used for all drawing operations
+* Position, Rotation, Scale -- These 3 values together are called a modelview transform and are encoded as a 4x4 Matrix
+* Color -- the color is multiplied with each pixel that is drawn
+* blend_sfactor, blend_dfactor -- factors that are used for blending pixels with alpha values on screen (see glBlendFunc for details)
+
+== Text ==
+Writes text on the screen. Parameters:
+* Font -- The font that is used to write the characters (the font has additional attributes like color of the text)
+
+== Surface ==
+Draws a 2d bitmap (called Surface) on screen. Parameters:
+* Surface -- a pointer to a surface (a surface contains the opengl texture handle and uv coordinates)
+
+== Sprite3D ==
+Draws a 3d model on screen. See Sprite3D class for more details. Parameters:
+* Sprite3D -- the 3d sprite that should be drawn
+
+== VertexArray ==
+Executes a drawing command for opengl primiteves. (Typically used for GL_QUAD and GL_TRIANGLE)
+* texture -- texture handle of the opengl texture
+* type -- opengl primitive type
+* vertex list
+* normal list (optional, specified per vertex)
+* color list (optional, specified per vertex)
+
+= State Model and Transform Stack =
+When looking at typical code that does drawing operations, one observes that the
+common parameters are often the same for several drawing operations. It is convenient to 
+not have to specify all parameters again and again for each
+drawing operation. So we created a state machine that maintains a "current" value
+for each of the common parameters.
+
+You can also observe that most of the time the things you want to draw are
+given in a local coordinate system only. Typically you apply a "camera"
+transform to them or have even deeper parent/child relations where the
+coordinate system is relative to the parent. These cases can nicely be handled
+by a stack for the Position, Rotate and Scale attributes. Positions, Rotations
+and Scales are now specified relative to the topmost stack element. You can now simply push
+the transformation from child coordinate system to parent coordinate system on the stack
+and draw all childs in their own coordinate system.
+
+= Foreground/Background and Z-Positions =
+We're presenting a (pseudo) 3d dimensional world on a 2d dimensional screen.
+Handling Foreground and Background requires us to sort the Drawing Operations
+so that stuff in the foreground is drawn after stuff in the background and
+obscures the background.
+
+It's very difficult to enforce a certain drawing order in the code, so we're
+introducing the concept of a z-position. DrawingOperations with higher
+z-positions will be executed after drawing operations with lower z-positions.
+This means that we can't execute the drawing operations imediately anymore, but
+we have to store the information needed to execute them. We call this info a
+Drawing Request. We fill a list with all Drawing Requests and sort them
+according to their z-positions and finally execute them in the correct order.
+
+= Implementation =
+The basic block of the implementation is the DrawingRequest class. It stores all
+information needed to execute a drawing operation. You can create custom subclasses from this class and override
+the draw() function to execute your custom drawing operations. You can expect
+that all common parameters that are maintained by the DrawingContext are already
+setup when the draw() function is called.
+
+The DrawingContext class is responsible for the state management and maintains
+the modelview transform stack.
+
+= Optimisations =
+To correctly implement the drawing operations we have to create snaphots of the
+current drawing state and append it to all DrawingRequests. You can observe that
+for most drawing operations in a typical scene these snapshots contain identical
+values except for the position.
+
+So we factor out the modelview and color+blendfunctions used in DrawingRequests
+to point to a shared block that is used by multiple Drawing Requests. This not
+only reduces memory consumption but also allows for more efficient restoring of
+the drawing state in opengl. As we can now compare the pointers of the
+ModelView and color+blenfunc objects and only reset these values if the
+pointers are different.
\ No newline at end of file


Property changes on: trunk/media/wiki/Windstille Drawing Model.wiki
___________________________________________________________________
Name: svn:mergeinfo
   + 

Copied: trunk/media/wiki/obsolete/Basic Features.wiki (from rev 2440, trunk/media/wiki/Basic Features.wiki)


Property changes on: trunk/media/wiki/obsolete/Basic Features.wiki
___________________________________________________________________
Name: svn:mergeinfo
   + 

Copied: trunk/media/wiki/obsolete/Blender.wiki (from rev 2440, trunk/media/wiki/Blender.wiki)


Property changes on: trunk/media/wiki/obsolete/Blender.wiki
___________________________________________________________________
Name: svn:mergeinfo
   + 

Copied: trunk/media/wiki/obsolete/Characters.wiki (from rev 2440, trunk/media/wiki/Characters.wiki)


Property changes on: trunk/media/wiki/obsolete/Characters.wiki
___________________________________________________________________
Name: svn:mergeinfo
   + 

Copied: trunk/media/wiki/obsolete/Collision Detection.wiki (from rev 2440, trunk/media/wiki/Collision Detection.wiki)


Property changes on: trunk/media/wiki/obsolete/Collision Detection.wiki
___________________________________________________________________
Name: svn:mergeinfo
   + 

Copied: trunk/media/wiki/obsolete/Controls.wiki (from rev 2440, trunk/media/wiki/Controls.wiki)


Property changes on: trunk/media/wiki/obsolete/Controls.wiki
___________________________________________________________________
Name: svn:mergeinfo
   + 

Copied: trunk/media/wiki/obsolete/Design Discussion CheckList.wiki (from rev 2440, trunk/media/wiki/Design Discussion CheckList.wiki)


Property changes on: trunk/media/wiki/obsolete/Design Discussion CheckList.wiki
___________________________________________________________________
Name: svn:mergeinfo
   + 

Copied: trunk/media/wiki/obsolete/Dialog.wiki (from rev 2440, trunk/media/wiki/Dialog.wiki)


Property changes on: trunk/media/wiki/obsolete/Dialog.wiki
___________________________________________________________________
Name: svn:mergeinfo
   + 

Copied: trunk/media/wiki/obsolete/GUI.wiki (from rev 2440, trunk/media/wiki/GUI.wiki)


Property changes on: trunk/media/wiki/obsolete/GUI.wiki
___________________________________________________________________
Name: svn:mergeinfo
   + 

Copied: trunk/media/wiki/obsolete/Getting Started.wiki (from rev 2440, trunk/media/wiki/Getting Started.wiki)


Property changes on: trunk/media/wiki/obsolete/Getting Started.wiki
___________________________________________________________________
Name: svn:mergeinfo
   + 

Copied: trunk/media/wiki/obsolete/IRC Meeting 1.wiki (from rev 2440, trunk/media/wiki/IRC Meeting 1.wiki)


Property changes on: trunk/media/wiki/obsolete/IRC Meeting 1.wiki
___________________________________________________________________
Name: svn:mergeinfo
   + 

Copied: trunk/media/wiki/obsolete/IRC Meeting 2 Brainstorming Summary.wiki (from rev 2440, trunk/media/wiki/IRC Meeting 2 Brainstorming Summary.wiki)


Property changes on: trunk/media/wiki/obsolete/IRC Meeting 2 Brainstorming Summary.wiki
___________________________________________________________________
Name: svn:mergeinfo
   + 

Copied: trunk/media/wiki/obsolete/IRC Meeting 2.wiki (from rev 2440, trunk/media/wiki/IRC Meeting 2.wiki)


Property changes on: trunk/media/wiki/obsolete/IRC Meeting 2.wiki
___________________________________________________________________
Name: svn:mergeinfo
   + 

Copied: trunk/media/wiki/obsolete/Ideas.wiki (from rev 2440, trunk/media/wiki/Ideas.wiki)


Property changes on: trunk/media/wiki/obsolete/Ideas.wiki
___________________________________________________________________
Name: svn:mergeinfo
   + 

Copied: trunk/media/wiki/obsolete/Jobs.wiki (from rev 2440, trunk/media/wiki/Jobs.wiki)


Property changes on: trunk/media/wiki/obsolete/Jobs.wiki
___________________________________________________________________
Name: svn:mergeinfo
   + 

Copied: trunk/media/wiki/obsolete/Level Format.wiki (from rev 2440, trunk/media/wiki/Level Format.wiki)


Property changes on: trunk/media/wiki/obsolete/Level Format.wiki
___________________________________________________________________
Name: svn:mergeinfo
   + 

Copied: trunk/media/wiki/obsolete/Locations.wiki (from rev 2440, trunk/media/wiki/Locations.wiki)


Property changes on: trunk/media/wiki/obsolete/Locations.wiki
___________________________________________________________________
Name: svn:mergeinfo
   + 

Copied: trunk/media/wiki/obsolete/Main Page.wiki (from rev 2440, trunk/media/wiki/Main Page.wiki)


Property changes on: trunk/media/wiki/obsolete/Main Page.wiki
___________________________________________________________________
Name: svn:mergeinfo
   + 

Copied: trunk/media/wiki/obsolete/News.wiki (from rev 2440, trunk/media/wiki/News.wiki)


Property changes on: trunk/media/wiki/obsolete/News.wiki
___________________________________________________________________
Name: svn:mergeinfo
   + 

Copied: trunk/media/wiki/obsolete/Overview.wiki (from rev 2440, trunk/media/wiki/Overview.wiki)


Property changes on: trunk/media/wiki/obsolete/Overview.wiki
___________________________________________________________________
Name: svn:mergeinfo
   + 

Copied: trunk/media/wiki/obsolete/People.wiki (from rev 2440, trunk/media/wiki/People.wiki)


Property changes on: trunk/media/wiki/obsolete/People.wiki
___________________________________________________________________
Name: svn:mergeinfo
   + 

Copied: trunk/media/wiki/obsolete/Plot Events.wiki (from rev 2440, trunk/media/wiki/Plot Events.wiki)


Property changes on: trunk/media/wiki/obsolete/Plot Events.wiki
___________________________________________________________________
Name: svn:mergeinfo
   + 

Copied: trunk/media/wiki/obsolete/Plot.wiki (from rev 2440, trunk/media/wiki/Plot.wiki)


Property changes on: trunk/media/wiki/obsolete/Plot.wiki
___________________________________________________________________
Name: svn:mergeinfo
   + 

Copied: trunk/media/wiki/obsolete/Prefab.wiki (from rev 2440, trunk/media/wiki/Prefab.wiki)


Property changes on: trunk/media/wiki/obsolete/Prefab.wiki
___________________________________________________________________
Name: svn:mergeinfo
   + 

Copied: trunk/media/wiki/obsolete/Prototypes.wiki (from rev 2440, trunk/media/wiki/Prototypes.wiki)


Property changes on: trunk/media/wiki/obsolete/Prototypes.wiki
___________________________________________________________________
Name: svn:mergeinfo
   + 

Copied: trunk/media/wiki/obsolete/Roadmap.wiki (from rev 2440, trunk/media/wiki/Roadmap.wiki)


Property changes on: trunk/media/wiki/obsolete/Roadmap.wiki
___________________________________________________________________
Name: svn:mergeinfo
   + 

Copied: trunk/media/wiki/obsolete/Similar Games.wiki (from rev 2440, trunk/media/wiki/Similar Games.wiki)


Property changes on: trunk/media/wiki/obsolete/Similar Games.wiki
___________________________________________________________________
Name: svn:mergeinfo
   + 

Copied: trunk/media/wiki/obsolete/Sprite Format.wiki (from rev 2440, trunk/media/wiki/Sprite Format.wiki)


Property changes on: trunk/media/wiki/obsolete/Sprite Format.wiki
___________________________________________________________________
Name: svn:mergeinfo
   + 

Copied: trunk/media/wiki/obsolete/Talk:Collision Detection.wiki (from rev 2440, trunk/media/wiki/Talk:Collision Detection.wiki)


Property changes on: trunk/media/wiki/obsolete/Talk:Collision Detection.wiki
___________________________________________________________________
Name: svn:mergeinfo
   + 

Copied: trunk/media/wiki/obsolete/Talk:Dialog.wiki (from rev 2440, trunk/media/wiki/Talk:Dialog.wiki)


Property changes on: trunk/media/wiki/obsolete/Talk:Dialog.wiki
___________________________________________________________________
Name: svn:mergeinfo
   + 

Copied: trunk/media/wiki/obsolete/Talk:Graphics.wiki (from rev 2440, trunk/media/wiki/Talk:Graphics.wiki)


Property changes on: trunk/media/wiki/obsolete/Talk:Graphics.wiki
___________________________________________________________________
Name: svn:mergeinfo
   + 

Copied: trunk/media/wiki/obsolete/Tile Specification Format.wiki (from rev 2440, trunk/media/wiki/Tile Specification Format.wiki)


Property changes on: trunk/media/wiki/obsolete/Tile Specification Format.wiki
___________________________________________________________________
Name: svn:mergeinfo
   + 

Copied: trunk/media/wiki/obsolete/Tilemap.wiki (from rev 2440, trunk/media/wiki/Tilemap.wiki)


Property changes on: trunk/media/wiki/obsolete/Tilemap.wiki
___________________________________________________________________
Name: svn:mergeinfo
   + 



From grumbel at mail.berlios.de  Tue Feb 17 18:20:07 2009
From: grumbel at mail.berlios.de (grumbel at BerliOS)
Date: Tue, 17 Feb 2009 18:20:07 +0100
Subject: [Windstille-commit] r2506 - in trunk/media/wiki: . images obsolete
	thumbnails
Message-ID: <200902171720.n1HHK7PG023866@sheep.berlios.de>

Author: grumbel
Date: 2009-02-17 18:20:02 +0100 (Tue, 17 Feb 2009)
New Revision: 2506

Added:
   trunk/media/wiki/News.wiki
   trunk/media/wiki/images/
   trunk/media/wiki/images/actions.png
   trunk/media/wiki/images/heavylifter.jpg
   trunk/media/wiki/images/windstille-logo.png
   trunk/media/wiki/thumbnails/
   trunk/media/wiki/thumbnails/actions.png
   trunk/media/wiki/thumbnails/heavylifter.jpg
Removed:
   trunk/media/wiki/obsolete/News.wiki
Modified:
   trunk/media/wiki/Actions.wiki
   trunk/media/wiki/Backstory.wiki
   trunk/media/wiki/Characters.wiki
   trunk/media/wiki/Drawing Model.wiki
   trunk/media/wiki/Drawing Primitives.wiki
   trunk/media/wiki/Graphics.wiki
   trunk/media/wiki/SConstruct
   trunk/media/wiki/Vehicles.wiki
   trunk/media/wiki/Windstille.wiki
   trunk/media/wiki/default.css
   trunk/media/wiki/template.xml
   trunk/media/wiki/wiki2html.py
Log:
Some small scale cleaup and support for images

Modified: trunk/media/wiki/Actions.wiki
===================================================================
--- trunk/media/wiki/Actions.wiki	2009-02-16 22:19:03 UTC (rev 2505)
+++ trunk/media/wiki/Actions.wiki	2009-02-17 17:20:02 UTC (rev 2506)
@@ -1,3 +1,5 @@
+<<thumbnail src="actions.png">>
+
 The game has basically 3 different control modes, one is with the powersuit, one is for player without the powersuit and a seperate mode is there for the player with his weapon equiped without the powersuit.
 
 == Moving around without a gun / Adventure Mode
@@ -19,7 +21,7 @@
 === Jumps
 === Sit
 
-http://windstille.berlios.de/images/sit.jpg
+{{ http://windstille.berlios.de/images/sit.jpg }}
 
 === Run/Walk
 
@@ -27,13 +29,13 @@
 
 === Hang
 
-http://windstille.berlios.de/images/posing4.jpg
+{{ http://windstille.berlios.de/images/posing4.jpg }} 
 
 === Climb
 
 The Hero should be able to climb both wall and roof ladders.
 
-http://windstille.berlios.de/images/posing2.jpg
+{{ http://windstille.berlios.de/images/posing2.jpg }}
 
 === Swim/Underwater
 
@@ -46,7 +48,7 @@
 
 The game will have a jetpack, I am currently not sure if we have it as a item which you can use all the time or just in some special events/levels.
 
-http://windstille.berlios.de/images/jetpack.png
+{{ http://windstille.berlios.de/images/jetpack.png }}
 
 === Actions Diagram
 
@@ -61,26 +63,26 @@
 
 Basically a turrican style surround shooting. Not sure how the thing will shoot (ice-freeze, flamethrower, normal). I kind of like it to behavice like a flamethrower to remove slime or other poison liquids on the ceiling or ground, which are immune against and unreachable with other weapons.
 
-http://windstille.berlios.de/images/surround.jpg
+{{ http://windstille.berlios.de/images/surround.jpg }}
 
 
 === Light/Torch
 
-http://windstille.berlios.de/images/flashlight.png
-http://windstille.berlios.de/images/flashlight2.png
+{{ http://windstille.berlios.de/images/flashlight.png }}
+{{ http://windstille.berlios.de/images/flashlight2.png }}
 
 === Machinegun
 
-http://windstille.berlios.de/images/machinegun.png
+{{ http://windstille.berlios.de/images/machinegun.png }}
 
 === Plasmagun
 
-http://windstille.berlios.de/images/plasmagun.png
+{{ http://windstille.berlios.de/images/plasmagun.png }}
 
 === Lasergun
 === Flamegun
 
-http://windstille.berlios.de/images/flamegun.png
+{{ http://windstille.berlios.de/images/flamegun.png }}
 
 === Rocketlauncher
 
@@ -93,7 +95,7 @@
 
 Turrican 2 style, but maybe circular, which basically means that the bomb will not erase anything on the screen, but only these enemies which are reachable from the heros position.
 
-http://windstille.berlios.de/images/shockwave.jpg
+{{ http://windstille.berlios.de/images/shockwave.jpg }}
 
 == Items
 
@@ -138,4 +140,4 @@
 * [[http://pingus.seul.org/~grumbel/tmp/windstille-files/anim1.png]]
 * [[http://pingus.seul.org/~grumbel/tmp/windstille-files/anim2.png]]
 * [[http://pingus.seul.org/~grumbel/tmp/windstille-files/anim3.png]]
-* [[http://pingus.seul.org/~grumbel/tmp/windstille-files/anim4.png]]
\ No newline at end of file
+* [[http://pingus.seul.org/~grumbel/tmp/windstille-files/anim4.png]]

Modified: trunk/media/wiki/Backstory.wiki
===================================================================
--- trunk/media/wiki/Backstory.wiki	2009-02-16 22:19:03 UTC (rev 2505)
+++ trunk/media/wiki/Backstory.wiki	2009-02-17 17:20:02 UTC (rev 2506)
@@ -81,9 +81,7 @@
 == 2517 - The main game begins
 
 
-== 
 
-
 = Planets
 
 Zeta-12: A moon around a large gas giant, a cold place, but parts are keep warm through tectonic activity.

Modified: trunk/media/wiki/Characters.wiki
===================================================================
--- trunk/media/wiki/Characters.wiki	2009-02-16 22:19:03 UTC (rev 2505)
+++ trunk/media/wiki/Characters.wiki	2009-02-17 17:20:02 UTC (rev 2506)
@@ -1,43 +1,45 @@
 No names have yet been selected for the different characters, so fell free to suggest some.
 
-= Player (Jane) =
+= Player (Jane)
 
-http://windstille.berlios.de/images/artwork13_small.jpg
+{{ http://windstille.berlios.de/images/artwork13_small.jpg }}
 
 Relativly new in the mercenary business, started to hire at Northern Star when she turned 18, wanted to get away from home as quickly as possible, wanted to see the stars, visit other worlds and the like. Worked as miner for some years now, visited a bunch of colonies, however quickly become sick of the mining business. She is now out of the mining business and tries to start a new living here on this colonie.
 
-= AI =
+= AI
 
 The controller programm of the Virtual Reality, has some intelligence and personality on his own.
 
-= Pilot =
+= Pilot
 
 The person who controls the shuttle and brings Jane to wherever she needs to go. Might actually be Yagor himself, not yet decided.
 
-=Boss (Yagor)=
-http://pingus.seul.org/~grumbel/tmp/windstille-yagor-small.png
+= Boss (Yagor)
 
+{{ http://pingus.seul.org/~grumbel/tmp/windstille-yagor-small.png }}
+
 The person for which Jane works. Has been in the merc business for a while and has worked for a short period of time together with Sophie, before she went solo. Somewhat of a father person to Jane.
 
-= Veteran (Sophie) =
+= Veteran (Sophie)
 
-http://windstille.berlios.de/images/artwork11_small.jpg
+{{ http://windstille.berlios.de/images/artwork11_small.jpg }}
 
 Veteran in the mercenary work, has worked on a bunch of different colonies and has been on this one for quite some years. She knows how stuff works here and how to get what is needed. Has lots of connections to different people around on this colonie. For most part see prefers to work alone. Tough women overall.
 
 = Jeff =
-http://pingus.seul.org/~grumbel/tmp/windstille-jeff.png
 
+{{ http://pingus.seul.org/~grumbel/tmp/windstille-jeff.png }}
+
 A sunnyboy, always sees the bright side of life. He works in the same business as Jane and every once in a while they clash together. While Jane might not like him much, Jeff sees their relationship a little differently.
 
 = Barkeeper (Bob) =
 
-http://windstille.berlios.de/images/barkeeper_small.jpg
+{{ http://windstille.berlios.de/images/barkeeper_small.jpg }}
 
 A valuable informant in this city. He knows most people around and he knows where the good jobs are to find. If something is happening his bar is the place where people exchange information. He might not be the most friendly looking guy, but once you know him for a while one shouldn't have to much throuble to get along with him. He tries his best to keep his bar a save place.
 
 = Mineral Worker =
 
-http://windstille.berlios.de/images/worker_small.jpg
+{{ http://windstille.berlios.de/images/worker_small.jpg }}
 
-One of the many contract workers which work for the Northern Star Mining cooroperation. The NSM often hires people and send them out to the different colonies to dig for resources. Their income is connected to the amount of resources which they collect, so if stuff doesn't work that right, they might quickly lose interesting, since only resources bring them income. Most of the time they are send out to a colonie for a few weeks or month, then send to another one, once the given resource region is harvested. Overall they can be hard workers, but only if the resources can motivate them.
\ No newline at end of file
+One of the many contract workers which work for the Northern Star Mining cooroperation. The NSM often hires people and send them out to the different colonies to dig for resources. Their income is connected to the amount of resources which they collect, so if stuff doesn't work that right, they might quickly lose interesting, since only resources bring them income. Most of the time they are send out to a colonie for a few weeks or month, then send to another one, once the given resource region is harvested. Overall they can be hard workers, but only if the resources can motivate them.

Modified: trunk/media/wiki/Drawing Model.wiki
===================================================================
--- trunk/media/wiki/Drawing Model.wiki	2009-02-16 22:19:03 UTC (rev 2505)
+++ trunk/media/wiki/Drawing Model.wiki	2009-02-17 17:20:02 UTC (rev 2506)
@@ -1,81 +1,60 @@
-= Drawing Operations =
+= Drawing Operations
+
 To bring images on screen you have to execute drawing operations. There are several different types of drawing operations. Each of them depend on a number of parameters.
 
-== Common Parameters ==
+== Common Parameters
 These parameters are used for all drawing operations
+
 * Position, Rotation, Scale -- These 3 values together are called a modelview transform and are encoded as a 4x4 Matrix
 * Color -- the color is multiplied with each pixel that is drawn
 * blend_sfactor, blend_dfactor -- factors that are used for blending pixels with alpha values on screen (see glBlendFunc for details)
 
-== Text ==
+== Text
+
 Writes text on the screen. Parameters:
+
 * Font -- The font that is used to write the characters (the font has additional attributes like color of the text)
 
-== Surface ==
+== Surface
+
 Draws a 2d bitmap (called Surface) on screen. Parameters:
 * Surface -- a pointer to a surface (a surface contains the opengl texture handle and uv coordinates)
 
-== Sprite3D ==
+== Sprite3D
+
 Draws a 3d model on screen. See Sprite3D class for more details. Parameters:
 * Sprite3D -- the 3d sprite that should be drawn
 
-== VertexArray ==
+== VertexArray
+
 Executes a drawing command for opengl primiteves. (Typically used for GL_QUAD and GL_TRIANGLE)
+
 * texture -- texture handle of the opengl texture
 * type -- opengl primitive type
 * vertex list
 * normal list (optional, specified per vertex)
 * color list (optional, specified per vertex)
 
-= State Model and Transform Stack =
-When looking at typical code that does drawing operations, one observes that the
-common parameters are often the same for several drawing operations. It is convenient to 
-not have to specify all parameters again and again for each
-drawing operation. So we created a state machine that maintains a "current" value
-for each of the common parameters.
+= State Model and Transform Stack
 
-You can also observe that most of the time the things you want to draw are
-given in a local coordinate system only. Typically you apply a "camera"
-transform to them or have even deeper parent/child relations where the
-coordinate system is relative to the parent. These cases can nicely be handled
-by a stack for the Position, Rotate and Scale attributes. Positions, Rotations
-and Scales are now specified relative to the topmost stack element. You can now simply push
-the transformation from child coordinate system to parent coordinate system on the stack
-and draw all childs in their own coordinate system.
+When looking at typical code that does drawing operations, one observes that the common parameters are often the same for several drawing operations. It is convenient to not have to specify all parameters again and again for each drawing operation. So we created a state machine that maintains a "current" value for each of the common parameters.
 
-= Foreground/Background and Z-Positions =
-We're presenting a (pseudo) 3d dimensional world on a 2d dimensional screen.
-Handling Foreground and Background requires us to sort the Drawing Operations
-so that stuff in the foreground is drawn after stuff in the background and
-obscures the background.
+You can also observe that most of the time the things you want to draw are given in a local coordinate system only. Typically you apply a "camera" transform to them or have even deeper parent/child relations where the coordinate system is relative to the parent. These cases can nicely be handled by a stack for the Position, Rotate and Scale attributes. Positions, Rotations and Scales are now specified relative to the topmost stack element. You can now simply push the transformation from child coordinate system to parent coordinate system on the stack and draw all childs in their own coordinate system.
 
-It's very difficult to enforce a certain drawing order in the code, so we're
-introducing the concept of a z-position. DrawingOperations with higher
-z-positions will be executed after drawing operations with lower z-positions.
-This means that we can't execute the drawing operations imediately anymore, but
-we have to store the information needed to execute them. We call this info a
-Drawing Request. We fill a list with all Drawing Requests and sort them
-according to their z-positions and finally execute them in the correct order.
+= Foreground/Background and Z-Positions
 
-= Implementation =
-The basic block of the implementation is the DrawingRequest class. It stores all
-information needed to execute a drawing operation. You can create custom subclasses from this class and override
-the draw() function to execute your custom drawing operations. You can expect
-that all common parameters that are maintained by the DrawingContext are already
-setup when the draw() function is called.
+We're presenting a (pseudo) 3d dimensional world on a 2d dimensional screen. Handling Foreground and Background requires us to sort the Drawing Operations so that stuff in the foreground is drawn after stuff in the background and obscures the background.
 
-The DrawingContext class is responsible for the state management and maintains
-the modelview transform stack.
+It's very difficult to enforce a certain drawing order in the code, so we're introducing the concept of a z-position. DrawingOperations with higher z-positions will be executed after drawing operations with lower z-positions. This means that we can't execute the drawing operations imediately anymore, but we have to store the information needed to execute them. We call this info a Drawing Request. We fill a list with all Drawing Requests and sort them according to their z-positions and finally execute them in the correct order.
 
-= Optimisations =
-To correctly implement the drawing operations we have to create snaphots of the
-current drawing state and append it to all DrawingRequests. You can observe that
-for most drawing operations in a typical scene these snapshots contain identical
-values except for the position.
+= Implementation
 
-So we factor out the modelview and color+blendfunctions used in DrawingRequests
-to point to a shared block that is used by multiple Drawing Requests. This not
-only reduces memory consumption but also allows for more efficient restoring of
-the drawing state in opengl. As we can now compare the pointers of the
-ModelView and color+blenfunc objects and only reset these values if the
-pointers are different.
\ No newline at end of file
+The basic block of the implementation is the DrawingRequest class. It stores all information needed to execute a drawing operation. You can create custom subclasses from this class and override the draw() function to execute your custom drawing operations. You can expect that all common parameters that are maintained by the DrawingContext are already setup when the draw() function is called.
+
+The DrawingContext class is responsible for the state management and maintains the modelview transform stack.
+
+= Optimisations
+
+To correctly implement the drawing operations we have to create snaphots of the current drawing state and append it to all DrawingRequests. You can observe that for most drawing operations in a typical scene these snapshots contain identical values except for the position.
+
+So we factor out the modelview and color+blendfunctions used in DrawingRequests to point to a shared block that is used by multiple Drawing Requests. This not only reduces memory consumption but also allows for more efficient restoring of the drawing state in opengl. As we can now compare the pointers of the ModelView and color+blenfunc objects and only reset these values if the pointers are different.
\ No newline at end of file

Modified: trunk/media/wiki/Drawing Primitives.wiki
===================================================================
--- trunk/media/wiki/Drawing Primitives.wiki	2009-02-16 22:19:03 UTC (rev 2505)
+++ trunk/media/wiki/Drawing Primitives.wiki	2009-02-17 17:20:02 UTC (rev 2506)
@@ -1,5 +1,3 @@
-= Drawing Primitives
-
 == Sprite
 
 Simple rectangular sprite that is rotabable and scaleable.

Modified: trunk/media/wiki/Graphics.wiki
===================================================================
--- trunk/media/wiki/Graphics.wiki	2009-02-16 22:19:03 UTC (rev 2505)
+++ trunk/media/wiki/Graphics.wiki	2009-02-17 17:20:02 UTC (rev 2506)
@@ -1,6 +1,6 @@
 = Drawing Model =
 
-[[Windstille Drawing Model]]
+[[Drawing Model]]
 
 = Layers =
 

Copied: trunk/media/wiki/News.wiki (from rev 2504, trunk/media/wiki/obsolete/News.wiki)

Modified: trunk/media/wiki/SConstruct
===================================================================
--- trunk/media/wiki/SConstruct	2009-02-16 22:19:03 UTC (rev 2505)
+++ trunk/media/wiki/SConstruct	2009-02-17 17:20:02 UTC (rev 2506)
@@ -12,7 +12,7 @@
 for i in glob.glob('*.wiki'):
     (filename, ext) = os.path.splitext(i)
     Depends(env.Wiki("build/" + filename + ".html", i), 
-            [# "./wiki2html.py", 
+            ["./wiki2html.py", 
              "template.xml"])
 
 # EOF #

Modified: trunk/media/wiki/Vehicles.wiki
===================================================================
--- trunk/media/wiki/Vehicles.wiki	2009-02-16 22:19:03 UTC (rev 2505)
+++ trunk/media/wiki/Vehicles.wiki	2009-02-17 17:20:02 UTC (rev 2506)
@@ -0,0 +1,18 @@
+== Shuttle
+
+A small transporter that is used to bring Jane to her missions.
+
+== Trains
+
+Public transportation that is used to move from one location in the city to the next.
+
+== Heavy Lifter
+
+<<thumbnail src="heavylifter.jpg">>
+
+A large oil tanker-like cargo space ship, used to transport cargo between the planets.
+
+== Tubes
+
+A large scale (1m?) version of pneumatic tubes, used to transport small cargo around the city. Used for some inviltration missions.
+

Modified: trunk/media/wiki/Windstille.wiki
===================================================================
--- trunk/media/wiki/Windstille.wiki	2009-02-16 22:19:03 UTC (rev 2505)
+++ trunk/media/wiki/Windstille.wiki	2009-02-17 17:20:02 UTC (rev 2506)
@@ -2,7 +2,6 @@
 
 * [[Backstory]]
 * [[Characters]]
-* [[Weapons]]
 * [[Vehicles]]
 * [[Locations]]
 
@@ -11,12 +10,17 @@
 * [[Particles]]
 * [[Navigation Mesh]]
 * [[Scripting]]
+* [[Graphics]]
 * [[Drawing Model]]
+* [[Drawing Primitives]]
 * [[Editor]]
 
-== Misc
+== Game Mechanics
 
+* [[Actions]]
 * [[PDA]]
+* [[Weapons]]
+* [[Fighting]]
 
 == File Formats
 

Modified: trunk/media/wiki/default.css
===================================================================
--- trunk/media/wiki/default.css	2009-02-16 22:19:03 UTC (rev 2505)
+++ trunk/media/wiki/default.css	2009-02-17 17:20:02 UTC (rev 2506)
@@ -10,7 +10,21 @@
 /*  margin-right: 1em; */
 }
 
+h1, h2, h3, h4, h5 {
+  clear: both;
+}
+
+#body img { 
+  float: right;
+  padding-left: 1em;
+}
+
+img.thumbnail { 
+  border-style: none;
+}
+
 #navbar { 
+  clear: both;
   text-align: center;
   background: lightgrey;
 }
@@ -59,20 +73,13 @@
   padding: 0px;
 }
 
-div.comment div.user { 
-  background: lightgrey;
-  border-bottom-style: dotted;
-  border-bottom-width: thin;
- }
-
-div.comment div.body { 
-  padding-left:  1em;
-  padding-right: 1em;
+div.comment p { 
 }
 
 div.comment { 
   border-style: solid;
   border-width: thin;
+  background-color: lightgrey;
 }
 
 div.indent0 { border-style: solid; border-width: thin; padding: 0.5em 1em 0.5em 1em; margin-left: 0em; margin-bottom: 0.5em; }

Added: trunk/media/wiki/images/actions.png
===================================================================
(Binary files differ)


Property changes on: trunk/media/wiki/images/actions.png
___________________________________________________________________
Name: svn:mime-type
   + image/png

Added: trunk/media/wiki/images/heavylifter.jpg
===================================================================
(Binary files differ)


Property changes on: trunk/media/wiki/images/heavylifter.jpg
___________________________________________________________________
Name: svn:mime-type
   + image/jpeg

Added: trunk/media/wiki/images/windstille-logo.png
===================================================================
(Binary files differ)


Property changes on: trunk/media/wiki/images/windstille-logo.png
___________________________________________________________________
Name: svn:mime-type
   + image/png

Deleted: trunk/media/wiki/obsolete/News.wiki
===================================================================
--- trunk/media/wiki/obsolete/News.wiki	2009-02-16 22:19:03 UTC (rev 2505)
+++ trunk/media/wiki/obsolete/News.wiki	2009-02-17 17:20:02 UTC (rev 2506)
@@ -1,246 +0,0 @@
-2008-05-08
-* Windstille rebirth is in progress
-* Wiki content is moved into SVN and build by custom scripts with help of creoleparser
-
-2007-06-21
-* the write of skeletal animation is under way, Blender export and Windstille import of armatures already works
-* navigation graph is mostly working and ready for integration into the main game
-
-2007-06-13
-* Windstille now features a menu system that lets you browse around all the different features and test level
-* Windstille 0.3.0 got released
-
-2007-04-27
-* [[http://pingus.seul.org/~grumbel/tmp/md5/07294e356e1f09425f79dd940dfaadf4-head.png|Retextured/Modeled Jane's Head]]
-
-2007-04-05
-* Thumbnails of all/most Windstille 3D models are now available [[http://pingus.seul.org/~grumbel/tmp/windstille-models-2007-04-03/|here]]
-
-2007-04-01
-* SVN contains now a script (blender_thumbnail) that can automatically generate thumbnails of 3D models, like [[http://pingus.seul.org/~grumbel/tmp/md5/6f627d003a14e92ffc785fe824886199-jeep.png| this]]
-
-2007-03-22
-* The SVN Repository just got a few huge commits of all the old artwork and 3D models that Grumbel had floating around on his harddisk
-
-2007-03-14
-* [[http://pingus.seul.org/~grumbel/tmp/md5/d90bb62fca1fc7cd443b59ca53507bda-launchvehicle.png|Launch Vehicle]]
-
-2007-03-12
-* [[http://pingus.seul.org/~grumbel/tmp/md5/6788f6a443f9bf60c4e5198fd9a63ff5-windstille-pda.jpg|PDA Mock-Up]]
-
-2007-03-11
-* [[http://pingus.seul.org/~grumbel/tmp/md5/d27ff9b41d67f2d1dbd16f24c8ea9905-launchvehicle4.jpg|Launch Vehicle]]
-
-200?-??-??
-* [[http://pingus.seul.org/~grumbel/tmp/md5/875224254fca9aacc0ef5fbeb01a093e-publictrain.png|Public Train InGame]]
-* [[http://pingus.seul.org/~grumbel/tmp/md5/e93ba7e4b396c2592125cf8d967acd26-publictrainrender.jpg|Public Train 1]]
-* [[http://pingus.seul.org/~grumbel/tmp/md5/24949eb9575f08cac35e1e0dc46c3065-publictrainrender2.jpg|Public Train 2]]
-* [[http://pingus.seul.org/~grumbel/tmp/md5/04dc676300640f7cff48f8cc68132be2-publictrainrender3.jpg|Public Train 3]]
-* [[http://pingus.seul.org/~grumbel/tmp/md5/f3002bfb917781f7f72da7c1fd7f52ad-publictrainrender4.jpg|Public Train 4]]
-* [[http://pingus.seul.org/~grumbel/tmp/md5/0037afdb45f635fa2e761c172b8aeb7d-windstille-anime.png|Jane Anime Style]]
-
-200?-??-??
-* [[http://video.google.com/videoplay?docid=6407848482326054992|Windstille DS Door Interaction]]
-* [[http://video.google.com/videoplay?docid=-7167040824757906656|Windstille Gameplay (very old)]]
-* [[http://video.google.com/videoplay?docid=9023431494719249531|Windstille DS Door Interaction]]
-* [[http://video.google.com/videoplay?docid=3929109335747664257|Windstille on DS]]
-
-2006-09-03
-* [[http://pingus.seul.org/~grumbel/tmp/windstille-nds-2006-09-03.jpg|Windstille NintendoDS (no game, just some static images for testing)]]
-
-2006-05-23
-* [[http://pingus.seul.org/~grumbel/tmp/md5/5fa061fc1c017ff8402360b06345e5ce-rescuepod.png|Rescue Pod]]
-* [[http://pingus.seul.org/~grumbel/tmp/md5/3ed79927b9ed8f1d1a0f4ccf5b8f44ad-rescuepod_large.png|Rescue Pod, large version]]
-
-2006-05-16
-* [[http://pingus.seul.org/~grumbel/tmp/md5/9f789096170bc92de8460073eb2a4e48-nstartmineentrance.png|NStar Mine Entrance]]
-* [[http://pingus.seul.org/~grumbel/tmp/md5/17d00adff886aa23732a03ab9025a784-nstarcellar.png|NStar Cellar]]
-
-2006-05-12
-* [[http://pingus.seul.org/~grumbel/tmp/md5/e2954ded3106bedffdb71b6892388661-scientist2.png|Scientist EnvSuit]]
-* [[http://pingus.seul.org/~grumbel/tmp/md5/0ecccd892d3f0ca3e2fbddac2d9440fe-police.png|Police]]
-* [[http://pingus.seul.org/~grumbel/tmp/md5/86e6f617effb5ea4871f960c538f9283-nstarguard.png|NStart Guard]]
-
-2006-05-11
-* [[http://pingus.seul.org/~grumbel/tmp/md5/aa0dfd525ffed92300e9960c280702e6-merc3.png|Merc 3]]
-* [[http://pingus.seul.org/~grumbel/tmp/md5/14ea49fc32e3911bdf3876931c67a835-scientist.png|Scientist]]
-* [[http://pingus.seul.org/~grumbel/tmp/md5/ead42c17fc90eb586e81db0b59da490b-merc3suit.png|Merc Suit]]
-* [[http://pingus.seul.org/~grumbel/tmp/md5/8d76ae7dca7874a584997fc33383b4b5-holoplatform.png|Holoplatform]]
-
-2006-05-07
-* [[http://pingus.seul.org/~grumbel/tmp/md5/cf886dbe7d61043360b510a697a437a2-airportpersonal2.png|Airport Personal Uniform]]
-* [[http://pingus.seul.org/~grumbel/tmp/md5/d8f02e33c7b9775a1fff3b471e6cf715-shuttle.png|Intro shuttle from the inside]]
-
-2006-04-24
-* [[http://pingus.seul.org/~grumbel/tmp/md5/47d4d7e9858e9c8a3c32735d98265ad3-render1.jpg|Shuttle Test Render 1]]
-* [[http://pingus.seul.org/~grumbel/tmp/md5/61407fae7d761b3ac3a80d60228b710e-render2.jpg|Shuttle Test Render 2]]
-* [[http://pingus.seul.org/~grumbel/tmp/md5/2d5b27b6b5f879898bc8424d5cb5c801-render3.jpg|Shuttle Test Render 3]]
-* [[http://pingus.seul.org/~grumbel/tmp/md5/96ff4547ee664d39fac5406c127cfa1d-cargotruck.png|Cargo Truck Sketch]]
-* [[http://pingus.seul.org/~grumbel/tmp/md5/7048fbae5c79ac9af072d303a942ed97-diggertruck.png|Digger Truck Sketch]]
-* [[http://pingus.seul.org/~grumbel/tmp/md5/e7d1bef78d09ca823ee3a58fe4f6f9ae-texture.png|a mine texture]]
-* [[http://pingus.seul.org/~grumbel/tmp/md5/51c07764d839bfa405568bc265abc401-texture1.png|another mine texture]]
-* [[http://pingus.seul.org/~grumbel/tmp/md5/db27f384d1cbaa41389fc001510d5246-largetruck.png|large truck sketch]]
-* [[http://pingus.seul.org/~grumbel/tmp/md5/83712fa6f1b95eb226571b1b71817ce1-merc3.png|character sketch]]
-* [[http://pingus.seul.org/~grumbel/tmp/md5/3664d852c3c73efab41f06ea52f405c5-scientist.png|rough sketch of scientist cloth]]
-* [[http://pingus.seul.org/~grumbel/tmp/md5/e91e5e57b2bbc72aa3ee0f8f7f790444-soldier.png|soldier cloth]]
-* [[http://pingus.seul.org/~grumbel/tmp/md5/ac29021eea01e5a04e4e39c8a4fab6a9-harry_soldier.png|soldier cloth - Harry's version]]
-* [[http://pingus.seul.org/~grumbel/tmp/md5/88828d8cb00e3b256fb70606ac5f36d2-airportpersonal.png|rough sketch of airport personal cloth]]
-* [[http://pingus.seul.org/~grumbel/tmp/md5/97f64621ab3b90e5a337f37837dbdc46-miner.png|miner sketch]]
-* [[http://pingus.seul.org/~grumbel/tmp/md5/8a6f8fe69979240a0e24fa669ea2f244-minerfront.png|miner sketch total]]
-* [[http://pingus.seul.org/~grumbel/tmp/md5/2cfe0c982de2ab5ff6cedf6fc863f99c-city.png|city sketch]]
-
-2006-04-16
-* [[http://pingus.seul.org/~grumbel/tmp/md5/8f49906d7ea46f09df46aef3c58ac7e9-shuttle.png|Shuttle Sketchs]] for use in the Windstille Intro, untextured 3D model of the shuttle is in the repo
-
-2006-04-14
-* Windstille now contains a simple slideshow viewer, usefull for viewing the notes and other stuff, use it via:
-
- # necesarry to circumvent physfs directory restriction
- ln -s /tmp/ /home/user/projects/windstille/trunk/data/tmp/
- 
- cd /tmp/
- wget -m -np http://pingus.seul.org/~grumbel/tmp/windstille-notes4/index.html
- 
-  cd  /home/user/projects/windstille/trunk/data/tmp/
- ./windstille --sprite2dview /tmp/pingus.seul.org/~grumbel/tmp/windstille-notes4/img_*.jpg|--geometry 1024x768
-
-2006-04-05
-* [[http://pingus.seul.org/~grumbel/tmp/windstille-notes4/index.html|Windstille Notes 4]]
-
-2006-03-20
-* [[http://pingus.seul.org/~grumbel/tmp/windstille-notes3/index.html|Windstille Notes 3]]
-
-2006-03-19
-* [[http://pingus.seul.org/~grumbel/tmp/windstille-notes/index.html|Windstille Notes]]
-* [[http://pingus.seul.org/~grumbel/tmp/windstille-notes2/index.html|Windstille Notes 2 (older stuff)]]
-
-2006-03-01
-* [[http://pingus.seul.org/~grumbel/tmp/md5/a703721fe5f0923fd98d4adf4b3f75c3-mechrender13.png|Mech Rendering 1]]
-* [[http://pingus.seul.org/~grumbel/tmp/md5/b28432cbe65debcd29925957a2da9835-mechrender10.png|Mech Rendering 2]]
-* [[http://pingus.seul.org/~grumbel/tmp/md5/faf65297107fc171d35f8452d40e2181-mechs.png|Mech Sketches 1]]
-* [[http://pingus.seul.org/~grumbel/tmp/md5/7492d2fee62bf6131874f5d227ac70a7-mechs2.png|Mech Sketches 2]]
-
-2005-11-21
-* [[http://pingus.seul.org/~grumbel/tmp/md5/be21dbc75df2208363ceed93d4db695f-elevatorsketchcolor.jpg|Elevator Sketch (forest)]]
-* [[http://pingus.seul.org/~grumbel/tmp/md5/363e8b273008be323cd3a9004b0b9ed8-elevatorsketchcolor.jpg|Elevator Sketch]]
-
-2005-11-20
-* [[http://pingus.seul.org/~grumbel/tmp/md5/eb2bd086698b88be82d69c5316fe0234-minesketch.png|Mine Sketch]]
-* [[http://pingus.seul.org/~grumbel/tmp/md5/bb14afef86310d5ba4b7913de4bb9cee-troopshuttle-crash1.jpg|Shuttle Crash Sketch]]
-
-2005-11-15
-* [[http://pingus.seul.org/~grumbel/tmp/md5/34bb919733b9510c13c1d7684abe696b-elevator.png|Elevator]]
-* [[http://pingus.seul.org/~grumbel/tmp/md5/661fe108c69397de8cb128f5b7683059-stonetextures.jpg|Stone Texture]]
-* [[http://pingus.seul.org/~grumbel/tmp/md5/56229b5ca764e475ed4d1fe9b4c4cf0a-elevatorbase.png|Elevator base]]
-* [[http://pingus.seul.org/~grumbel/tmp/md5/638636cfc49f2fa7e267504bd12c9cc6-explosivecase.png|Elevator case]]
-
-2005-09-31
-* [[http://pingus.seul.org/~grumbel/tmp/md5/f8821262d08e58b79ae8c4a6cf4e40d5-windstillelevel.png|Sketch of the first mission]]
-
-2005-09-23
-* has been a slow month, anyway, 3D attachment points are now working and a water-effect is now included as well
-
-2005-08-28
-* Bob the barkeeper is rigged and a little bit animated
-
-2005-08-22
-* [[http://pingus.seul.org/~grumbel/tmp/windstille-monster-2005-08-21-2.png|Monster 3d model as entered SVN (unanimated)]]
-
-2005-08-20
-* a new generic gamepad driven GUI has entered SVN
-
-2005-08-19
-* a Laserpointer and some raycasting for the tilemap is now in the code
-* some new images for the flashlight light
-
-2005-08-18
-* Sophie, barkeeper and powersuit are mostly textured and ready to export to in-game, not yet animated however
-
-2005-08-16
-* antialising support
-* some more models made ready for the game
-
-2005-08-15
-* a 3d model for the pistol
-
-2005-08-06
-* input is configurable again
-* in-game PDA
-
-2005-08-05
-* switched away from ClanLib, SDL now creates the Windows and stuff
-
-2005-08-01
-* [[http://pingus.seul.org/~grumbel/tmp/windstille-2005-08-01-1.png|some new streetlamps]]
-* some new tiles, [[http://pingus.seul.org/~grumbel/tmp/windstille-2005-08-01-1.png|Screenshot 1]], [[http://pingus.seul.org/~grumbel/tmp/windstille-2005-08-01.png|Screenshot 2]]
-
-2005-07-29
-* some more cleanup and restructuring to get rid of ClanLib
-
-2005-07-28
-* a first try at writing a half usefull script, the player can now burst into flames when you gets to close to fire and extinguish himself when getting under the shower
-
-2005-07-26
-* TTF support now also in dialogs
-* particle system partly accessible from levelfile
-* [[http://pingus.seul.org/~grumbel/tmp/windstille-screenshot-2005-07-26.png|TextArea now has some formating abilites]]
-* lots of more code got switched from ClanLib to SDL
-
-2005-07-25
-* Lisp parsing code got a major cleanup
-
-2005-07-24
-* TTF font support
-* [[http://pingus.seul.org/~grumbel/tmp/windstille-monster-2.jpg|some new monster design]]
-
-2005-07-23
-* collision engine is now implemented and mostly working
-
-2005-07-20
-* level editor can now load/save Windstille levels, more or less at least
-
-2005-07-19
-* tilemap and the particle systems now all use VertexArrayDrawingRequest
-* in-game dialogs are now mostly working
-
-2005-07-18
-* tilemap handling is now based on pure OpenGL, no longer Clanlib sprites
-* a new ClanLib independed 2d sprite class is available
-
-2005-07-16
-* [[http://pingus.seul.org/~grumbel/tmp/windstille-nightvision-2005-07-16.png|Nightvision]]
-
-2005-07-14
-* console now has some simple line editing capabilities
-
-2005-07-10
-* Some more work on [[http://pingus.seul.org/~grumbel/tmp/windstille-yagor-2005-07-10-1.png|Yagor]] and [[http://pingus.seul.org/~grumbel/tmp/windstille-yagor-2005-07-10-2.png|another one]]
-
-2005-07-08
-* [[http://windstille.berlios.de/wiki/index.php/Ideas A first 3D version of Yagor]]
-
-2005-07-03
-* Animated 3D Sprites
-
-2005-06-30
-* [[http://pingus.seul.org/~grumbel/tmp/windstille-plasmagranate.png|Plasma Granate Sketch]]
-
-2005-06-29
-* [[http://pingus.seul.org/~grumbel/tmp/windstille-2005-06-30.png|experimental tilemap deformer]]
-* Flexlay compiles successfully on Windows for the first time
-
-2005-06-28
-* [[http://pingus.seul.org/~grumbel/tmp/windstille-spider2.png|2D sketch of the spider]]
-
-2005-06-25
-* scripting is now available via the console
-
-2005-06-24
-* console can now accept keyboard input
-* Sprite3D now uses vertex arrays
-
-2005-06-23
-* a first model of the spider is available
-
-2005-06-22
-* a bunch of new animation for the girl are available
\ No newline at end of file

Modified: trunk/media/wiki/template.xml
===================================================================
--- trunk/media/wiki/template.xml	2009-02-16 22:19:03 UTC (rev 2505)
+++ trunk/media/wiki/template.xml	2009-02-17 17:20:02 UTC (rev 2506)
@@ -1,4 +1,4 @@
-<?xml version="1.0"?>
+<?xml version="1.0" encoding="UTF-8" ?>
 <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
           "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
 <html>
@@ -11,8 +11,7 @@
   <body>
     <div id="title">
       <div id="titlebox">
-        <h1>Windstille</h1>
-        <small>A 2D Action Adventure</small>
+        <h1><img src="images/windstille-logo.png" alt="Windstille" /></h1>
       </div>
       <br clear="all" />
     </div>
@@ -25,7 +24,8 @@
       ${body}
     </div>
     <div id="navbar">
-
+      <a href="News.html">News</a> |
+      <a href="Windstille.html">Index</a><br/>
     </div>
   </body>
 </html>

Added: trunk/media/wiki/thumbnails/actions.png
===================================================================
(Binary files differ)


Property changes on: trunk/media/wiki/thumbnails/actions.png
___________________________________________________________________
Name: svn:mime-type
   + image/png

Added: trunk/media/wiki/thumbnails/heavylifter.jpg
===================================================================
(Binary files differ)


Property changes on: trunk/media/wiki/thumbnails/heavylifter.jpg
___________________________________________________________________
Name: svn:mime-type
   + image/jpeg

Modified: trunk/media/wiki/wiki2html.py
===================================================================
--- trunk/media/wiki/wiki2html.py	2009-02-16 22:19:03 UTC (rev 2505)
+++ trunk/media/wiki/wiki2html.py	2009-02-17 17:20:02 UTC (rev 2506)
@@ -1,5 +1,7 @@
 #!/usr/bin/env python
 
+import codecs
+import re
 from genshi.template import MarkupTemplate
 import genshi.builder as bldr
 import creoleparser
@@ -8,22 +10,54 @@
 # Creoleparser chokes on long documents
 sys.setrecursionlimit(2000)
 
+token_pat = re.compile('\s*([A-Za-z_]+) *= *"([^"]+)"\s*')
+
+def parse_arg_string(str):
+    dict = {}  
+    while str:
+        m = token_pat.match(str)
+        if not m:
+            raise Exception("Couldn't match '%s'" % str)
+        dict[m.group(1)] = m.group(2)
+        str = str[m.end():]
+    return dict
+
 def file2string(filename):
-    f = open(filename)
+    f = codecs.open(filename, encoding='utf-8')
     s = f.read()
     f.close()
     return s
 
 class Wiki2HTML:
-    def macro_func(self, name, arg_string, body):
-        if body == None:
-            return ""
-
+    def macro_func(self, name, arg_string, body, block_type):
         if name == "comment":
             body = self.creole_parser.generate(body)
-            return bldr.tag.div(bldr.tag(bldr.tag.div(arg_string[1:], class_='user'),
-                                         bldr.tag.div(body, class_= "body")), # FIXME: Recursive comments don't really work 
-                                class_='comment')
+            return bldr.tag.div(body, class_= 'comment')
+
+        elif name == "thumbnail":
+            dict = parse_arg_string(arg_string)
+            if not dict.has_key('src'):
+                raise Exception("Source argument missing from <<img>>")
+
+            if dict.has_key('alt'):
+                alt = dict['alt']
+            else:
+                alt = dict['src']
+
+            if dict.has_key('title'):
+                title = dict['title']            
+            else:
+                title = None
+
+            return bldr.tag.a(bldr.tag.img(None, src="thumbnails/" + dict['src'], alt=alt, title=title, class_="thumbnail"),
+                              href="images/" + dict['src'])
+        elif name == "img":
+            dict = parse_arg_string(arg_string)
+            if not dict.has_key('src'):
+                raise Exception("Source argument missing from <<img>>")
+
+            return bldr.tag.img(None, src="images/" + dict['src'], alt=dict['src'], title=dict['title'], class_= 'comment')
+
         elif name == "ind":
             body = self.creole_parser.generate(body)
             return bldr.tag.div(body, class_='indent' + arg_string[1:])
@@ -47,11 +81,11 @@
                     interwiki_links_funcs={'Talk' : self.talk_links_funcs }
                     ))
 
-
             for filename in args:
                 tmpl = MarkupTemplate(file2string("template.xml"))
                 print tmpl.generate(body = self.creole_parser.generate(file2string(filename)),
-                                    title = filename.replace(".wiki", ""))
+                                    title = filename.replace(".wiki", "")).render(method='xhtml', 
+                                                                                  strip_whitespace=True)
 
             
 if __name__ == "__main__":



From grumbel at mail.berlios.de  Tue Feb 17 21:57:31 2009
From: grumbel at mail.berlios.de (grumbel at BerliOS)
Date: Tue, 17 Feb 2009 21:57:31 +0100
Subject: [Windstille-commit] r2507 - in trunk/media/wiki: . images thumbnails
Message-ID: <200902172057.n1HKvVkG032554@sheep.berlios.de>

Author: grumbel
Date: 2009-02-17 21:57:18 +0100 (Tue, 17 Feb 2009)
New Revision: 2507

Added:
   trunk/media/wiki/BlenderToSprite3D.wiki
   trunk/media/wiki/Sprite3D.wiki
   trunk/media/wiki/images/anim1.png
   trunk/media/wiki/images/anim2.png
   trunk/media/wiki/images/anim3.png
   trunk/media/wiki/images/anim4.png
   trunk/media/wiki/images/title-background.png
   trunk/media/wiki/thumbnails/anim1.png
   trunk/media/wiki/thumbnails/anim2.png
   trunk/media/wiki/thumbnails/anim3.png
   trunk/media/wiki/thumbnails/anim4.png
Removed:
   trunk/media/wiki/Blender2WSprite.wiki
   trunk/media/wiki/Graphics.wiki
   trunk/media/wiki/WSprite.wiki
Modified:
   trunk/media/wiki/Actions.wiki
   trunk/media/wiki/Backstory.wiki
   trunk/media/wiki/Blender.wiki
   trunk/media/wiki/Drawing Model.wiki
   trunk/media/wiki/Drawing Primitives.wiki
   trunk/media/wiki/Fighting.wiki
   trunk/media/wiki/Locations.wiki
   trunk/media/wiki/Navigation Mesh.wiki
   trunk/media/wiki/News.wiki
   trunk/media/wiki/Particles.wiki
   trunk/media/wiki/Rebirth.wiki
   trunk/media/wiki/Scripting.wiki
   trunk/media/wiki/Sprite.wiki
   trunk/media/wiki/TODO
   trunk/media/wiki/Weapons.wiki
   trunk/media/wiki/Windstille.wiki
   trunk/media/wiki/default.css
   trunk/media/wiki/images/windstille-logo.png
   trunk/media/wiki/template.xml
   trunk/media/wiki/wiki2html.py
Log:
More wiki updates

Modified: trunk/media/wiki/Actions.wiki
===================================================================
--- trunk/media/wiki/Actions.wiki	2009-02-17 17:20:02 UTC (rev 2506)
+++ trunk/media/wiki/Actions.wiki	2009-02-17 20:57:18 UTC (rev 2507)
@@ -1,7 +1,9 @@
-<<thumbnail src="actions.png">>
+<<thumbnail src="actions.png" title="Source for this file is actions.dia">>
 
 The game has basically 3 different control modes, one is with the powersuit, one is for player without the powersuit and a seperate mode is there for the player with his weapon equiped without the powersuit.
 
+The diagram on the right shows all the actions and how they relate to each other. 
+
 == Moving around without a gun / Adventure Mode
 
 Moving around without the gun puts you basically into an adventure-mode, ie. a mode where you don't spend most of your time fighting, but talking to people, exploring city, factories and stuff.
@@ -39,22 +41,6 @@
 
 === Swim/Underwater
 
-Swimming should basically be a 'endless' jump. You might also be able to simply walk underwater. [FIXME: This doesn't fit dogether with the otherwise planed realistic movement]
-Weapons
-
-Will we need different weapon stages like Turrican or static ones? (Weaponstage <-> Hero's energie!?)
-
-=== Jetpack
-
-The game will have a jetpack, I am currently not sure if we have it as a item which you can use all the time or just in some special events/levels.
-
-{{ http://windstille.berlios.de/images/jetpack.png }}
-
-=== Actions Diagram
-
-The following diagram tries to illustrate possible actions and how the engine should switch between them.
-http://www.stud.uni-karlsruhe.de/~uxsm/windstille-actions.png
-
 == Shoot
 
 Should the hero be able to shoot in different directions or should be stick to a MegaMan like shooting?
@@ -79,31 +65,7 @@
 
 {{ http://windstille.berlios.de/images/plasmagun.png }}
 
-=== Lasergun
-=== Flamegun
 
-{{ http://windstille.berlios.de/images/flamegun.png }}
-
-=== Rocketlauncher
-
-Rocketlauncher can hold missiles:
-
-* Missile
-* Homing Missile
-
-=== Smart Bomb - Shockwave
-
-Turrican 2 style, but maybe circular, which basically means that the bomb will not erase anything on the screen, but only these enemies which are reachable from the heros position.
-
-{{ http://windstille.berlios.de/images/shockwave.jpg }}
-
-== Items
-
-* Power Up
-* Machinegun ammunition
-* Plasmagun ammunition
-* Laser energie
-
 == Enemies
 
 === Respawn
@@ -113,31 +75,10 @@
 
 The game will not be sperated into normal levels, instead it will consist of 'sections', where one can more or less move freely around. Translating between section will be done via special events (like the water-thing in another world) or via doors (where one has to find the keys before passing them). Moving forward and backward should basically possible, but there might be points-of-no-return. Some kind of guidance system should always show you where to go, so that one doesn't lost himself in a level.
 
-== Different types of assault suits
-
-=== Standard
-
-=== Ice
-
-might protect against ice water and give better grip on ice
-
-=== Fire/Lava
-
-protect better against lava and hot regions
-
-=== Level File Format
-
-The level file format will be at its basic level tile based, support for multiple overlapping tiles would be nice, the tile size will be 128x128. In addition the map might support brushes, meaning you can insert (animated) surface objects at arbitrary positions, not sure how this will influence the collision map.
-
-A flewible controller api should be provided for remapping the buttons to specific gamepads.
-
-== Weapon Select
-
-* [[http://windstille.berlios.de/images/weaponitemselect.jpg]]
-
 == Animations
 
-* [[http://pingus.seul.org/~grumbel/tmp/windstille-files/anim1.png]]
-* [[http://pingus.seul.org/~grumbel/tmp/windstille-files/anim2.png]]
-* [[http://pingus.seul.org/~grumbel/tmp/windstille-files/anim3.png]]
-* [[http://pingus.seul.org/~grumbel/tmp/windstille-files/anim4.png]]
+<<thumbnail src="anim1.png">>
+<<thumbnail src="anim2.png">>
+<<thumbnail src="anim3.png">>
+<<thumbnail src="anim4.png">>
+

Modified: trunk/media/wiki/Backstory.wiki
===================================================================
--- trunk/media/wiki/Backstory.wiki	2009-02-17 17:20:02 UTC (rev 2506)
+++ trunk/media/wiki/Backstory.wiki	2009-02-17 20:57:18 UTC (rev 2507)
@@ -1,3 +1,13 @@
+<<note>>
+This is just a rough draft of a possible backstory, its not final and can be changed and adopted if necessary.
+<</note>>
+
+Some general things about the overall setting: 
+
+* the overall tone of the game shall be close to 1980's Sci-Fi movies (Alien, Bladerunner, etc.)
+* the game shall stick to realism whenever possible
+* no crazy post-singularity techology, things shall stay simple and understandable
+
 == 2025 - Landing on the Moon, again
 
 In preparation for the mission to Mars mankind planed a research mission to moon with the goal to setup a small colony 
@@ -81,11 +91,17 @@
 == 2517 - The main game begins
 
 
-
 = Planets
 
-Zeta-12: A moon around a large gas giant, a cold place, but parts are keep warm through tectonic activity.
+== Nugani
 
-Central: A central very earth like planet, lots of water, very little land.
+A moon around a large gas giant, a cold place, but parts are keep warm through tectonic activity.
 
-Hoti: A desert like planet close to the sun, very warm, only the poles are habitatable.
+== Central
+
+A central very earth like planet, lots of water, very little land.
+
+== Hoti
+
+A desert like planet close to the sun, very warm, only the poles are habitatable.
+

Modified: trunk/media/wiki/Blender.wiki
===================================================================
--- trunk/media/wiki/Blender.wiki	2009-02-17 17:20:02 UTC (rev 2506)
+++ trunk/media/wiki/Blender.wiki	2009-02-17 20:57:18 UTC (rev 2507)
@@ -1,20 +1,18 @@
 There are plenty of ways to construct Blender models (*.blend) in a way that they don't work properly on other machines, this text shall give a little guideline on things to keep in mind.
 
-== Textures ==
+== Textures
 
 * The path to the texture must be relative, not absolute, this can be accomplished with the "Relative Path" option in the file dialog when selecting a texture
 * Images must not be packed, the texture screen (Shift-F10) has a toggle button for that
 
-== Links ==
+== Armatures
 
+Armatures and character models should stay seperate. How to accomplish that, is not yet clear.
 
+== Lighting
 
-== Armatures ==
-
-Armatures and character models should stay seperate.
-
-
-== Lighting ==
-
 Since the models are meant to be used in a game, all the lighting is the job of the game engine, not the .blend file. Model files should thus be free of light sources.
 
+== Thumbnail Generation
+
+A thumbnail generator for conforming Blender files can be found in  {{{trunk/blender-thumbnail/}}}.
\ No newline at end of file

Deleted: trunk/media/wiki/Blender2WSprite.wiki
===================================================================
--- trunk/media/wiki/Blender2WSprite.wiki	2009-02-17 17:20:02 UTC (rev 2506)
+++ trunk/media/wiki/Blender2WSprite.wiki	2009-02-17 20:57:18 UTC (rev 2507)
@@ -1,62 +0,0 @@
-{{{
-Notes about blender models:
-
-- You can install the exporter by placing it in your $HOME/.blender/scripts
-  directory. Best would be to create a symlink:
-  
-     ln -s contrib/windstille_exporter.py $HOME/.blender/scripts
-     
-- 1 blender unit corresponds to 32pixels in game
-  (if you use the default 800x600 game resolution)
-- When looking at a character turned left from the side, coordinate axes are:
-    z -> up
-    y -> right
-    x -> front
-  (the exporter will convert these to windstille coordinates which are
-   x->right, y -> down, z -> back)
-- Each blender object should use the same texture on all it's faces.
-   (you can have multiple objects per model of course)
-- You should animate your models with armatures. The exporter will grab all
-  defined actions for the armature and export these. You are only allowed to
-  have 1 armature object in the scene at the moment
-- Empty Objects whose names start with A: are exported as attachement points
-- Take a look at the console output to see warnings and errors from the script
-- You should specify additional attributes for the actions by creating a blender
-  textobject with name "actionconfig". You can then specify lines like this
-  (this example states that for action MyActionName frames 5 - 40 should be
-   exported every 8th frame should be exported and the animation should be
-   played back with speed 5.7 later. The speed and samplerate part are optional)
-
-  # Sampe actionconfig file
-
-  MyActionName 5 - 40
-  AnotherAction 1 - 30 speed 5.0
-
-  You can append additional options at the line. They are each optional but you
-  have to specify them in this order.
-    speed FLOAT_NUMBER      the default fps speed the animation should be played
-    samplerate INT_NUMBER   only sample every nth frame in blender
-    marker NAME INT_NUMBER  remembers a named marker at a specific frame. These
-                            markers will be used by the program for purposes
-                            like finding out when you can safely change
-                            animations. You can specify multiple markers.
-
-- Windstille has some keys that make debugging animations alot easier:
-    Numpad 2,4,6,8 can be used to move the camera around
-    Numpad +,- zoom in and out.
-    Numpad 1,3 slow down and accelerate the game
-
-    So you can easily zoom in and watch your animation in slow motion with
-    these keys.
-
-(- Only for information you don't have to care about this: UVs in blender are
-    u -> right
-    v -> up
-  UVs in windstille are
-    u -> right
-    v -> down
-  Rotations from windstille rotation compared with blender rotations:
-    ws.x = blend.y
-    ws.y = blend.z
-    ws.z = blend.x )
-}}}

Copied: trunk/media/wiki/BlenderToSprite3D.wiki (from rev 2505, trunk/media/wiki/Blender2WSprite.wiki)


Property changes on: trunk/media/wiki/BlenderToSprite3D.wiki
___________________________________________________________________
Name: svn:mergeinfo
   + 

Modified: trunk/media/wiki/Drawing Model.wiki
===================================================================
--- trunk/media/wiki/Drawing Model.wiki	2009-02-17 17:20:02 UTC (rev 2506)
+++ trunk/media/wiki/Drawing Model.wiki	2009-02-17 20:57:18 UTC (rev 2507)
@@ -1,8 +1,7 @@
-= Drawing Operations
-
 To bring images on screen you have to execute drawing operations. There are several different types of drawing operations. Each of them depend on a number of parameters.
 
 == Common Parameters
+
 These parameters are used for all drawing operations
 
 * Position, Rotation, Scale -- These 3 values together are called a modelview transform and are encoded as a 4x4 Matrix
@@ -20,11 +19,6 @@
 Draws a 2d bitmap (called Surface) on screen. Parameters:
 * Surface -- a pointer to a surface (a surface contains the opengl texture handle and uv coordinates)
 
-== Sprite3D
-
-Draws a 3d model on screen. See Sprite3D class for more details. Parameters:
-* Sprite3D -- the 3d sprite that should be drawn
-
 == VertexArray
 
 Executes a drawing command for opengl primiteves. (Typically used for GL_QUAD and GL_TRIANGLE)
@@ -57,4 +51,24 @@
 
 To correctly implement the drawing operations we have to create snaphots of the current drawing state and append it to all DrawingRequests. You can observe that for most drawing operations in a typical scene these snapshots contain identical values except for the position.
 
-So we factor out the modelview and color+blendfunctions used in DrawingRequests to point to a shared block that is used by multiple Drawing Requests. This not only reduces memory consumption but also allows for more efficient restoring of the drawing state in opengl. As we can now compare the pointers of the ModelView and color+blenfunc objects and only reset these values if the pointers are different.
\ No newline at end of file
+So we factor out the modelview and color+blendfunctions used in DrawingRequests to point to a shared block that is used by multiple Drawing Requests. This not only reduces memory consumption but also allows for more efficient restoring of the drawing state in opengl. As we can now compare the pointers of the ModelView and color+blenfunc objects and only reset these values if the pointers are different.
+
+= Layers
+
+The current graphics engine works by using three layers, to each of the layers you can draw independly. They are only later down the pipeline flushed down to the screen. The multiple layers are necessary for once to properly sort the graphics and secondly they are needed to create certain effects. The layer are:
+
+== Color Layer
+
+This is a normal layer, it contains just good old graphics as you would expect and is drawn as if you would draw directly to the screen.
+
+== Light Layer
+
+This layer specifies which areas of the screen are visible and which aren't. At start everything is invisible (black), to make stuff visible one uses white. One can also use other colors, red, green, etc. The light layer is later multiplied with the color layer, thus everything that is black (0) gets blended out and everything else gets lit by the color found in the light layer. Drawing to this layer should almost always happen via additive blending.
+
+== Highlight Layer
+
+The highlight layer is drawn ontop of the light layer, it is meant for lense-flares, glows and other effects that should be 100% visible all of the time and not covered by the light-layers shadow. It is the same as the color layer, only that the light layer doesn't get multiplied with it. Drawing should again be happening mostly additive, since thats gets closest to how real light acts.
+
+= GLSL Effects
+
+GLSL, OpenGLs shader language, allows to do some very nice effects (fire, glass, shockwaves, etc.) the [[http://windstille.berlios.de/screenshots.html|Windstille webpage]] has some videos of them. The good news is that they are rather easy to implement, the bad news is that one needs some framework to implement them properly, ie. first of one needs to get them through ClanLib and secondly for most effects one needs a copy of the current framebuffer, which however is rather expensive to read, so its hard to get. They are also rather GPU heavy, so when not handled with care they won't work on low-end graphic cards (GeforceFX5200, ATI9200) and they don't work at all on even older cards, so they would need to be optional.

Modified: trunk/media/wiki/Drawing Primitives.wiki
===================================================================
--- trunk/media/wiki/Drawing Primitives.wiki	2009-02-17 17:20:02 UTC (rev 2506)
+++ trunk/media/wiki/Drawing Primitives.wiki	2009-02-17 20:57:18 UTC (rev 2507)
@@ -1,3 +1,9 @@
+<<note>>
+Shall we use Vector2f or Vector3f? Later one would allow to make better and cleaner use of 3D objects, but would it would also require more work from the level designer. -- Grumbel
+<</note>>
+
+Windstille uses a ortogonal projection, meaning everything in the game will have a flat 2D look. Multiple layers scrolling at different speeds will be allowed to give a scene a sense of depth. Most non-animated objects in Windstille will be represented by simple 2D sprites,  while animated objects, like humans, robots or vehicles will be represented by 3D objects.
+
 == Sprite
 
 Simple rectangular sprite that is rotabable and scaleable.
@@ -57,4 +63,15 @@
   float rotation;
   float scale;
 }
+}}}
 
+== Sprite3D
+
+Draws a 3d model exported from Blender on screen. 
+
+{{{
+Sprite3D {
+  Vector3f   position;
+  Quaternion rotation;
+}
+}}}

Modified: trunk/media/wiki/Fighting.wiki
===================================================================
--- trunk/media/wiki/Fighting.wiki	2009-02-17 17:20:02 UTC (rev 2506)
+++ trunk/media/wiki/Fighting.wiki	2009-02-17 20:57:18 UTC (rev 2507)
@@ -1,7 +1,7 @@
-Some thoughts on fighting in Windstille.
+<<note>>
+Just some general thoughts on fighting, nothing specific to Windstille.
+<</note>>
 
-== Human Mode ==
-
 Another World had a very interesting way to fight. You had a gun that you could charge, in three stages:
 
 # fire a normal shoot

Deleted: trunk/media/wiki/Graphics.wiki
===================================================================
--- trunk/media/wiki/Graphics.wiki	2009-02-17 17:20:02 UTC (rev 2506)
+++ trunk/media/wiki/Graphics.wiki	2009-02-17 20:57:18 UTC (rev 2507)
@@ -1,38 +0,0 @@
-= Drawing Model =
-
-[[Drawing Model]]
-
-= Layers =
-
-The current graphics engine works by using three layers, to each of the layers you can draw independly. They are only later down the pipeline flushed down to the screen. The multiple layers are necessary for once to properly sort the graphics and secondly they are needed to create certain effects. The layer are:
-
-== Color Layer ==
-
-This is a normal layer, it contains just good old graphics as you would expect and is drawn as if you would draw directly to the screen.
-
-== Light Layer ==
-
-This layer specifies which areas of the screen are visible and which aren't. At start everything is invisible (black), to make stuff visible one uses white. One can also use other colors, red, green, etc. The light layer is later multiplied with the color layer, thus everything that is black (0) gets blended out and everything else gets lit by the color found in the light layer. Drawing to this layer should almost always happen via additive blending.
-
-== Highlight Layer ==
-
-The highlight layer is drawn ontop of the light layer, it is meant for lense-flares, glows and other effects that should be 100% visible all of the time and not covered by the light-layers shadow. It is the same as the color layer, only that the light layer doesn't get multiplied with it. Drawing should again be happening mostly additive, since thats gets closest to how real light acts.
-
-= 3D Sprites =
-
-The idea behind 3D sprites is to avoid the annoying and disk-space consuming procedure of converting all animations into 2D images. This should also allow to much easier apply different skins to the models and change cloth or the like. Bone animation and ragdoll physics would be nice, but for the first few releases (or probally ever) simple keyframe animation would be enough. Bone deform animation can be exported by something like this (only code to get the actual mesh data, no file writing there): 
-
-{{{
-import Blender
-from Blender import NMesh
-
-for i in xrange(1,30):
-        Blender.Set("curframe", i)
-        mesh = NMesh.GetRawFromObject("Plane")
-        obj = NMesh.PutRaw(mesh)
-        obj.setLocation(0, i*5, 0)
-}}}
-
-= GLSL Effects =
-
-GLSL, OpenGLs shader language, allows to do some very nice effects (fire, glass, shockwaves, etc.) the [[http://windstille.berlios.de/screenshots.html|Windstille webpage]] has some videos of them. The good news is that they are rather easy to implement, the bad news is that one needs some framework to implement them properly, ie. first of one needs to get them through ClanLib and secondly for most effects one needs a copy of the current framebuffer, which however is rather expensive to read, so its hard to get. They are also rather GPU heavy, so when not handled with care they won't work on low-end graphic cards (GeforceFX5200, ATI9200) and they don't work at all on even older cards, so they would need to be optional.
\ No newline at end of file

Modified: trunk/media/wiki/Locations.wiki
===================================================================
--- trunk/media/wiki/Locations.wiki	2009-02-17 17:20:02 UTC (rev 2506)
+++ trunk/media/wiki/Locations.wiki	2009-02-17 20:57:18 UTC (rev 2507)
@@ -38,4 +38,4 @@
 
 * Underground
 
-Both man made mines and natural labyrinth. Quite possibly it will contain some robots of various sorts for bad guys, perhaps also spiders.
\ No newline at end of file
+Both man made mines and natural labyrinth. Quite possibly it will contain some robots of various sorts for bad guys, perhaps also spiders.

Modified: trunk/media/wiki/Navigation Mesh.wiki
===================================================================
--- trunk/media/wiki/Navigation Mesh.wiki	2009-02-17 17:20:02 UTC (rev 2506)
+++ trunk/media/wiki/Navigation Mesh.wiki	2009-02-17 20:57:18 UTC (rev 2507)
@@ -0,0 +1 @@
+The Navigation Mesh is a graph structure that is used to represent the walkable area.

Modified: trunk/media/wiki/News.wiki
===================================================================
--- trunk/media/wiki/News.wiki	2009-02-17 17:20:02 UTC (rev 2506)
+++ trunk/media/wiki/News.wiki	2009-02-17 20:57:18 UTC (rev 2507)
@@ -101,8 +101,10 @@
  cd /tmp/
  wget -m -np http://pingus.seul.org/~grumbel/tmp/windstille-notes4/index.html
  
-  cd  /home/user/projects/windstille/trunk/data/tmp/
- ./windstille --sprite2dview /tmp/pingus.seul.org/~grumbel/tmp/windstille-notes4/img_*.jpg|--geometry 1024x768
+{{{
+cd  /home/user/projects/windstille/trunk/data/tmp/
+./windstille --sprite2dview /tmp/pingus.seul.org/~grumbel/tmp/windstille-notes4/img_*.jpg --geometry1024x768
+}}}
 
 2006-04-05
 * [[http://pingus.seul.org/~grumbel/tmp/windstille-notes4/index.html|Windstille Notes 4]]

Modified: trunk/media/wiki/Particles.wiki
===================================================================
--- trunk/media/wiki/Particles.wiki	2009-02-17 17:20:02 UTC (rev 2506)
+++ trunk/media/wiki/Particles.wiki	2009-02-17 20:57:18 UTC (rev 2507)
@@ -1,6 +1,10 @@
+<<note>>
 ToDo: Document current particle systems and document possible
 shortcommings and missing features
+<</note>>
 
+Particle systems in Windstille consists of two main sub parts, a drawer object and a distribution object. The drawer gets the particle and draws it, while the distribution is used to spawn the particles. Distributions are geometric shapes like lines, rectangles or circles.
+
 == Drawer
 
 == Variables

Modified: trunk/media/wiki/Rebirth.wiki
===================================================================
--- trunk/media/wiki/Rebirth.wiki	2009-02-17 17:20:02 UTC (rev 2506)
+++ trunk/media/wiki/Rebirth.wiki	2009-02-17 20:57:18 UTC (rev 2507)
@@ -1,3 +1,5 @@
+<<note>>The following text is written by Grumbel.<</note>>
+
 Time to document a few things that went wrong in the past and how I intend to fix them.
 
 == Tilemaps
@@ -4,10 +6,24 @@
 
 While tilemaps are a classic building block of 2D games, they just didn't work out for what I had in mind. There is to much flexibility that is lost due to them and there are quite a few things that are made much harder, like slopes, AI reactions to the environment, etc.
 
-How do I intend to fix this? The level in terms of graphics will be a series of textures quads that can be freely placed. The collision geometry on the other side will be a series of line segments. When a player walks he will follow those line segments instead of constantly checking a tilemap. This will lead to a kind of on-rails gameplay instead of a more freeform one. 
+The level, in terms of graphics, will be a series of textures quads that can be freely placed. The collision geometry on the other side will be a series of line segments, this concept is called [[Navigation Mesh]]. When a player walks, he will follow those line segments instead of constantly checking a tilemap. This will lead to a kind of on-rails gameplay instead of a more freeform one. 
 
 Some code for this is in place and availabe in a test application, it is not hooked up into the game.
 
-== 
+Some support for Tilemaps might be kept, since they are somewhat useful to get a base graphics done. However its not clear if real tilemaps will be keep or just some surfaces that can be docked together.
 
-Gam e
+== Vertex Animation
+
+<<note>>
+For the time being we might stick with Vertex animation, since they already work, but bone based animation is really the target.
+<</note>>
+
+Vertex animation looked like and easy target and it kind of was, we have them implemented in the game. However the size of the files grew quicker then expected and a lot of flexibility is lost with vertex animation (i.e. no easy way to change clothes, no easy way to seperate animation from the mesh, etc.). Bone based animations are needed.
+
+== Story
+
+To much time was wasted on discussion about backstory and stuff and to little with things that could be turned into actual gameplay. A prototype level that demonstrates dialog and overall gameflow is therefore a priority. 
+
+== Editor
+
+Flexlay, while usable and working, is based on an old version of ClanLIb. This isn't all that good in the long run, since it limits the GUI quite a bit. Current plan is to make a sandbox editor based on Gtkmm, that will allow to edit the levels in engine itself.

Modified: trunk/media/wiki/Scripting.wiki
===================================================================
--- trunk/media/wiki/Scripting.wiki	2009-02-17 17:20:02 UTC (rev 2506)
+++ trunk/media/wiki/Scripting.wiki	2009-02-17 20:57:18 UTC (rev 2507)
@@ -10,4 +10,4 @@
 * to alter which trigger points are active, or to alter their locations, or what they do
 * to control the AI behaviour of bad guys or NPCs
 * to control dialog with NPCs
-* to control when and where new information is provided to the player
\ No newline at end of file
+* to control when and where new information is provided to the player

Modified: trunk/media/wiki/Sprite.wiki
===================================================================
--- trunk/media/wiki/Sprite.wiki	2009-02-17 17:20:02 UTC (rev 2506)
+++ trunk/media/wiki/Sprite.wiki	2009-02-17 20:57:18 UTC (rev 2507)
@@ -11,7 +11,7 @@
   SpriteAction[] actions;
 }}}
 
-= .sprite File Format:
+= File Format - *.sprite
 
 {{{
 (sprite
@@ -21,4 +21,4 @@
     (offset -111 -215)
   )
 )
-}}}
\ No newline at end of file
+}}}

Copied: trunk/media/wiki/Sprite3D.wiki (from rev 2505, trunk/media/wiki/WSprite.wiki)


Property changes on: trunk/media/wiki/Sprite3D.wiki
___________________________________________________________________
Name: svn:mergeinfo
   + 

Modified: trunk/media/wiki/TODO
===================================================================
--- trunk/media/wiki/TODO	2009-02-17 17:20:02 UTC (rev 2506)
+++ trunk/media/wiki/TODO	2009-02-17 20:57:18 UTC (rev 2507)
@@ -1,5 +1,3 @@
-Somebody is eating up empty in {{{ }}} sections
+http://creoleparser.googlepages.com/CheatSheetPlus.html
 
- http://creoleparser.googlepages.com/CheatSheetPlus.html
-
-Do something with actions.dia
\ No newline at end of file
+Add prev/next and chapter jumps to the .html generator

Deleted: trunk/media/wiki/WSprite.wiki
===================================================================
--- trunk/media/wiki/WSprite.wiki	2009-02-17 17:20:02 UTC (rev 2506)
+++ trunk/media/wiki/WSprite.wiki	2009-02-17 20:57:18 UTC (rev 2507)
@@ -1,40 +0,0 @@
-{{{
-Header
-    char     magic[4] (= W3DS)
-    uint16_t format_version      (=2 at the moment)
-    uint16_t mesh_count
-    uint16_t attachement_point_count
-    uint16_t action_count
-
-Mesh Header (x mesh_count)
-    char     texturename[64]
-    uint16_t triangle_count
-    uint16_t vertex_count
-
-    uint16_t vertexnum    (x 3*triangle_count) # three vertex indexes per face
-    float    normal[3]    (x triangle_count)   # one normal per face
-    float    texcoord[2]  (x vertex_count)     # one uv coordinate per vertex
-
-Attachement Point Header x attachement_point_count
-    char name[64]
-
-Action Header (x action_count)
-    char     name[64]
-    float    speed
-    uint16_t marker_count
-    uint16_t frame_count
-
-  Marker (x marker_count)
-    char     name[64]
-    uint16_t frame_count
-
-  MeshData (x frame_count)
-    (x frame_count)
-      (x mesh_count)
-        (x mesh.vertex_count)
-          float[3] vertex_location
-
-      (x attachement_point_count)
-        float locX, locY, locZ
-        float rotW, rotX, rotY, rotZ (it's a quaternion)
-}}}

Modified: trunk/media/wiki/Weapons.wiki
===================================================================
--- trunk/media/wiki/Weapons.wiki	2009-02-17 17:20:02 UTC (rev 2506)
+++ trunk/media/wiki/Weapons.wiki	2009-02-17 20:57:18 UTC (rev 2507)
@@ -0,0 +1,29 @@
+<<note>>
+Lots of stuff in here is out of date.
+<</note>>
+
+== Rocketlauncher
+
+Rocketlauncher can hold missiles:
+
+* Missile
+* Homing Missile
+
+
+== Lasergun
+== Flamegun
+
+{{ http://windstille.berlios.de/images/flamegun.png }}
+
+== Smart Bomb - Shockwave
+
+Turrican 2 style, but maybe circular, which basically means that the bomb will not erase anything on the screen, but only these enemies which are reachable from the heros position.
+
+{{ http://windstille.berlios.de/images/shockwave.jpg }}
+
+== Items
+
+* Power Up
+* Machinegun ammunition
+* Plasmagun ammunition
+* Laser energie

Modified: trunk/media/wiki/Windstille.wiki
===================================================================
--- trunk/media/wiki/Windstille.wiki	2009-02-17 17:20:02 UTC (rev 2506)
+++ trunk/media/wiki/Windstille.wiki	2009-02-17 20:57:18 UTC (rev 2507)
@@ -1,3 +1,5 @@
+* [[Rebirth]]
+
 == Plot/Story
 
 * [[Backstory]]
@@ -10,7 +12,6 @@
 * [[Particles]]
 * [[Navigation Mesh]]
 * [[Scripting]]
-* [[Graphics]]
 * [[Drawing Model]]
 * [[Drawing Primitives]]
 * [[Editor]]
@@ -25,7 +26,7 @@
 == File Formats
 
 * [[Blender]]
-* [[Blender2WSprite]]
-* [[WSprite]]
+* [[BlenderToSprite3D]]
+* [[Sprite3D]]
 * [[Sprite]]
 

Modified: trunk/media/wiki/default.css
===================================================================
--- trunk/media/wiki/default.css	2009-02-17 17:20:02 UTC (rev 2506)
+++ trunk/media/wiki/default.css	2009-02-17 20:57:18 UTC (rev 2507)
@@ -1,11 +1,18 @@
 body { 
-  margin: 1em 15% 1em 15%;
-  background: rgb(50, 50, 100);
+  max-width: 60em;
+  height: 100%;
+
+  margin: 0 auto 0 auto;
+  background: black;
 }
 
 #body {
-  padding: 1em 3em 2em 3em;
+  margin-top:    auto;
+  margin-bottom: auto;
+
+  padding: 0.2em 3em 1em 3em;
   background: white; 
+
 /*  margin-left: 1em;  */
 /*  margin-right: 1em; */
 }
@@ -29,24 +36,21 @@
   background: lightgrey;
 }
 
-#titlebox { 
+#title h1 { 
+  margin-left: auto;
+  margin-right: auto;
+  padding: 0;
+  margin:  0;
   text-align: center; 
-  float: left; 
 }
 
 #title { 
-  background: black;
-  padding: 0.5em 2em 0.5em 2em;
+/*  background: rgb(0, 0, 50); */
+  background-image: url("images/title-background.png");
   color: white;
-  text-align: left;
-  clear: both;
+  width: 100%;
 }
 
-#title h1 { 
-  padding-left: 1em;
-  margin: 0px;
-}
-
 pre {
   padding: 1em;
   border-style: solid;
@@ -65,7 +69,7 @@
   border-bottom-color: lightgrey;
 }
 
-#body p { 
+p { 
   text-indent: 1em;
 }
 
@@ -73,6 +77,31 @@
   padding: 0px;
 }
 
+div.note p { 
+  text-indent: 0em;
+}
+
+div.note p:last-child { 
+  margin-bottom: 0;
+}
+
+div.note p:first-child { 
+  margin-top: 0;
+}
+
+div.note { 
+  width: 20%;
+  font-size: 0.8em;
+  float: right;
+  text-align: left;
+  border-style: solid;
+  border-width: thin;
+  background-color: lightyellow;
+
+  padding: 0.5em;
+  margin: 0 0 0 1em;
+}
+
 div.comment p { 
 }
 

Added: trunk/media/wiki/images/anim1.png
===================================================================
(Binary files differ)


Property changes on: trunk/media/wiki/images/anim1.png
___________________________________________________________________
Name: svn:mime-type
   + image/png

Added: trunk/media/wiki/images/anim2.png
===================================================================
(Binary files differ)


Property changes on: trunk/media/wiki/images/anim2.png
___________________________________________________________________
Name: svn:mime-type
   + image/png

Added: trunk/media/wiki/images/anim3.png
===================================================================
(Binary files differ)


Property changes on: trunk/media/wiki/images/anim3.png
___________________________________________________________________
Name: svn:mime-type
   + image/png

Added: trunk/media/wiki/images/anim4.png
===================================================================
(Binary files differ)


Property changes on: trunk/media/wiki/images/anim4.png
___________________________________________________________________
Name: svn:mime-type
   + image/png

Added: trunk/media/wiki/images/title-background.png
===================================================================
(Binary files differ)


Property changes on: trunk/media/wiki/images/title-background.png
___________________________________________________________________
Name: svn:mime-type
   + image/png

Modified: trunk/media/wiki/images/windstille-logo.png
===================================================================
(Binary files differ)

Modified: trunk/media/wiki/template.xml
===================================================================
--- trunk/media/wiki/template.xml	2009-02-17 17:20:02 UTC (rev 2506)
+++ trunk/media/wiki/template.xml	2009-02-17 20:57:18 UTC (rev 2507)
@@ -10,10 +10,7 @@
   </head>
   <body>
     <div id="title">
-      <div id="titlebox">
-        <h1><img src="images/windstille-logo.png" alt="Windstille" /></h1>
-      </div>
-      <br clear="all" />
+      <h1><img src="images/windstille-logo.png" alt="Windstille" /></h1>
     </div>
     <div id="navbar">
       <a href="News.html">News</a> |
@@ -22,6 +19,7 @@
     <div id="body">
       <h1>${title}</h1>
       ${body}
+      <br clear="all" />
     </div>
     <div id="navbar">
       <a href="News.html">News</a> |

Added: trunk/media/wiki/thumbnails/anim1.png
===================================================================
(Binary files differ)


Property changes on: trunk/media/wiki/thumbnails/anim1.png
___________________________________________________________________
Name: svn:mime-type
   + image/png

Added: trunk/media/wiki/thumbnails/anim2.png
===================================================================
(Binary files differ)


Property changes on: trunk/media/wiki/thumbnails/anim2.png
___________________________________________________________________
Name: svn:mime-type
   + image/png

Added: trunk/media/wiki/thumbnails/anim3.png
===================================================================
(Binary files differ)


Property changes on: trunk/media/wiki/thumbnails/anim3.png
___________________________________________________________________
Name: svn:mime-type
   + image/png

Added: trunk/media/wiki/thumbnails/anim4.png
===================================================================
(Binary files differ)


Property changes on: trunk/media/wiki/thumbnails/anim4.png
___________________________________________________________________
Name: svn:mime-type
   + image/png

Modified: trunk/media/wiki/wiki2html.py
===================================================================
--- trunk/media/wiki/wiki2html.py	2009-02-17 17:20:02 UTC (rev 2506)
+++ trunk/media/wiki/wiki2html.py	2009-02-17 20:57:18 UTC (rev 2507)
@@ -34,6 +34,10 @@
             body = self.creole_parser.generate(body)
             return bldr.tag.div(body, class_= 'comment')
 
+        elif name == "note":
+            body = self.creole_parser.generate(body)
+            return bldr.tag.div(body, class_='note')
+
         elif name == "thumbnail":
             dict = parse_arg_string(arg_string)
             if not dict.has_key('src'):
@@ -81,11 +85,15 @@
                     interwiki_links_funcs={'Talk' : self.talk_links_funcs }
                     ))
 
-            for filename in args:
-                tmpl = MarkupTemplate(file2string("template.xml"))
-                print tmpl.generate(body = self.creole_parser.generate(file2string(filename)),
-                                    title = filename.replace(".wiki", "")).render(method='xhtml', 
-                                                                                  strip_whitespace=True)
+            try:
+                for filename in args:
+                    tmpl = MarkupTemplate(file2string("template.xml"))
+                    print tmpl.generate(body = self.creole_parser.generate(file2string(filename)),
+                                        title = filename.replace(".wiki", "")).render(method='xhtml', 
+                                                                                      strip_whitespace=True)
+            except Exception, err:
+                print err
+            
 
             
 if __name__ == "__main__":



From grumbel at mail.berlios.de  Wed Feb 18 00:57:25 2009
From: grumbel at mail.berlios.de (grumbel at BerliOS)
Date: Wed, 18 Feb 2009 00:57:25 +0100
Subject: [Windstille-commit] r2508 - trunk/media/wiki
Message-ID: <200902172357.n1HNvPjs009492@sheep.berlios.de>

Author: grumbel
Date: 2009-02-18 00:57:18 +0100 (Wed, 18 Feb 2009)
New Revision: 2508

Modified:
   trunk/media/wiki/default.css
   trunk/media/wiki/template.xml
   trunk/media/wiki/wiki2html.py
Log:
Added support for previous/next links

Modified: trunk/media/wiki/default.css
===================================================================
--- trunk/media/wiki/default.css	2009-02-17 20:57:18 UTC (rev 2507)
+++ trunk/media/wiki/default.css	2009-02-17 23:57:18 UTC (rev 2508)
@@ -32,10 +32,31 @@
 
 #navbar { 
   clear: both;
+  background: lightgrey;
   text-align: center;
-  background: lightgrey;
+  padding: 0.2em;
 }
 
+#navbar a {
+  color: black;
+  text-decoration: none;
+  background-color: lightgrey;
+  display: inline-block;
+  text-align: center;
+  border-style: solid;
+  border-color: darkgrey;
+  border-width: thin;
+  margin-left:  1em;
+  margin-right: 1em;
+  width: auto;
+  padding-left: 1em;
+  padding-right: 1em;
+}
+
+#navbar a:hover {
+  background-color: white;
+}
+
 #title h1 { 
   margin-left: auto;
   margin-right: auto;

Modified: trunk/media/wiki/template.xml
===================================================================
--- trunk/media/wiki/template.xml	2009-02-17 20:57:18 UTC (rev 2507)
+++ trunk/media/wiki/template.xml	2009-02-17 23:57:18 UTC (rev 2508)
@@ -6,15 +6,20 @@
     <title>Windstille - ${title}</title>
     <link rel="stylesheet" type="text/css" href="default.css" />
     <link rel="icon" href="images/favicon.png" type="image/png" />
-    <link rel="top" href="Main Page.html" />
+    <link rel="top" href="Windstille.html" />
+    <link rel="next" href="${next}.html" />
+    <link rel="prev" href="${prev}.html" />
   </head>
   <body>
     <div id="title">
       <h1><img src="images/windstille-logo.png" alt="Windstille" /></h1>
     </div>
     <div id="navbar">
-      <a href="News.html">News</a> |
-      <a href="Windstille.html">Index</a><br/>
+      <a href="${prev}.html">? Prev</a>
+      <a href="News.html">News</a>
+      <a href="Windstille.html">Index</a>
+      <a href="${next}.html">Next ?</a>
+      <br clear="all" />
     </div>
     <div id="body">
       <h1>${title}</h1>
@@ -22,8 +27,11 @@
       <br clear="all" />
     </div>
     <div id="navbar">
-      <a href="News.html">News</a> |
-      <a href="Windstille.html">Index</a><br/>
+      <a href="${prev}.html">? Prev</a>
+      <a href="News.html">News</a>
+      <a href="Windstille.html">Index</a>
+      <a href="${next}.html">Next ?</a>
+      <br clear="all" />
     </div>
   </body>
 </html>

Modified: trunk/media/wiki/wiki2html.py
===================================================================
--- trunk/media/wiki/wiki2html.py	2009-02-17 20:57:18 UTC (rev 2507)
+++ trunk/media/wiki/wiki2html.py	2009-02-17 23:57:18 UTC (rev 2508)
@@ -1,5 +1,6 @@
 #!/usr/bin/env python
 
+import os.path
 import codecs
 import re
 from genshi.template import MarkupTemplate
@@ -27,7 +28,47 @@
     s = f.read()
     f.close()
     return s
+
+all_pages = ['Windstille',
+             'News',
+             'Rebirth',
+             'Backstory',
+             'Characters',
+             'Vehicles',
+             'Locations',
+             'Particles',
+             'Navigation Mesh',
+             'Scripting',
+             'Drawing Model',
+             'Drawing Primitives',
+             'Editor',
+             'Actions',
+             'PDA',
+             'Weapons',
+             'Fighting',
+             'Blender',
+             'BlenderToSprite3D',
+             'Sprite3D',
+             'Sprite']
 
+def find_next_page(str):
+    for i in range(len(all_pages)):
+        if all_pages[i] == str:
+            if i == len(all_pages)-1:
+                return "Windstille"
+            else:
+                return all_pages[i+1]
+    raise Exception("Couldn't find next page for " + str)
+
+def find_prev_page(str):
+    for i in range(len(all_pages)):
+        if all_pages[i] == str:
+            if i == 0:
+                return "Windstille"
+            else:
+                return all_pages[i-1]
+    raise Exception("Couldn't find prev page for " + str)
+
 class Wiki2HTML:
     def macro_func(self, name, arg_string, body, block_type):
         if name == "comment":
@@ -88,12 +129,13 @@
             try:
                 for filename in args:
                     tmpl = MarkupTemplate(file2string("template.xml"))
-                    print tmpl.generate(body = self.creole_parser.generate(file2string(filename)),
+                    print tmpl.generate(next = find_next_page(os.path.basename(filename)[:-5]),
+                                        prev = find_prev_page(os.path.basename(filename)[:-5]),
+                                        body = self.creole_parser.generate(file2string(filename)),
                                         title = filename.replace(".wiki", "")).render(method='xhtml', 
                                                                                       strip_whitespace=True)
             except Exception, err:
-                print err
-            
+                sys.stderr.write(str(err) + "\n")
 
             
 if __name__ == "__main__":



From grumbel at mail.berlios.de  Wed Feb 18 01:12:10 2009
From: grumbel at mail.berlios.de (grumbel at BerliOS)
Date: Wed, 18 Feb 2009 01:12:10 +0100
Subject: [Windstille-commit] r2509 - in trunk/media/wiki: . obsolete
Message-ID: <200902180012.n1I0CA5P026710@sheep.berlios.de>

Author: grumbel
Date: 2009-02-18 01:12:08 +0100 (Wed, 18 Feb 2009)
New Revision: 2509

Removed:
   trunk/media/wiki/obsolete/Prototypes.wiki
Modified:
   trunk/media/wiki/Rebirth.wiki
Log:
Moved Prototype stuff into Rebirth

Modified: trunk/media/wiki/Rebirth.wiki
===================================================================
--- trunk/media/wiki/Rebirth.wiki	2009-02-17 23:57:18 UTC (rev 2508)
+++ trunk/media/wiki/Rebirth.wiki	2009-02-18 00:12:08 UTC (rev 2509)
@@ -27,3 +27,19 @@
 == Editor
 
 Flexlay, while usable and working, is based on an old version of ClanLIb. This isn't all that good in the long run, since it limits the GUI quite a bit. Current plan is to make a sandbox editor based on Gtkmm, that will allow to edit the levels in engine itself.
+
+= Prototypes
+
+To get some gameplay details sorted out bevor the big implementation can begin a series of prototypes will be constructed.
+
+== Navigation Mesh ==
+
+The Navigation Mesh Prototype should demonstrate the concept of the
+navigation mesh level layout and demonstrate actions like jumping,
+ledge grabbing, etc. performated on the mesh.
+
+== Shooting ==
+
+The shooting test shall demonstrate the shooting, the aiming with
+laser pointer, as well as flamethrower action.
+

Deleted: trunk/media/wiki/obsolete/Prototypes.wiki
===================================================================
--- trunk/media/wiki/obsolete/Prototypes.wiki	2009-02-17 23:57:18 UTC (rev 2508)
+++ trunk/media/wiki/obsolete/Prototypes.wiki	2009-02-18 00:12:08 UTC (rev 2509)
@@ -1,12 +0,0 @@
-== Navigation Mesh ==
-
-The Navigation Mesh Prototype should demonstrate the concept of the
-navigation mesh level layout and demonstrate actions like jumping,
-ledge grabbing, etc. performated on the mesh.
-
-== Shooting ==
-
-The shooting test shall demonstrate the shooting, the aiming with
-laser pointer, as well as flamethrower action.
-
-



From grumbel at mail.berlios.de  Wed Feb 18 09:21:44 2009
From: grumbel at mail.berlios.de (grumbel at BerliOS)
Date: Wed, 18 Feb 2009 09:21:44 +0100
Subject: [Windstille-commit] r2510 - trunk/media/wiki
Message-ID: <200902180821.n1I8LiKS018029@sheep.berlios.de>

Author: grumbel
Date: 2009-02-18 09:21:42 +0100 (Wed, 18 Feb 2009)
New Revision: 2510

Added:
   trunk/media/wiki/About.wiki
   trunk/media/wiki/upload.sh
Modified:
   trunk/media/wiki/default.css
   trunk/media/wiki/template.xml
   trunk/media/wiki/wiki2html.py
Log:
Added About.wiki page

Added: trunk/media/wiki/About.wiki
===================================================================
--- trunk/media/wiki/About.wiki	2009-02-18 00:12:08 UTC (rev 2509)
+++ trunk/media/wiki/About.wiki	2009-02-18 08:21:42 UTC (rev 2510)
@@ -0,0 +1,18 @@
+This Wiki isn't editable by the general public. Its is stored in SVN and only writable by developers, you can check it out via:
+
+* svn co http://svn.berlios.de/svnroot/repos/windstille/trunk/media/wiki
+
+And can browse it at:
+
+* http://svn.berlios.de/viewvc/windstille/trunk/media/wiki/
+
+Feel free to send patches to:
+
+* [[mailto:grumbel at gmx.de | Ingo Ruhnke <grumbel at gmx.de>]].
+
+This Wiki is generated with the help of [[http://code.google.com/p/creoleparser/ |  Creoleparser]] and [[http://genshi.edgewall.org/ | Genshi]].
+
+The Windstille Project page itself is located at:
+
+* http://windstille.berlios.de/
+* https://developer.berlios.de/projects/windstille

Modified: trunk/media/wiki/default.css
===================================================================
--- trunk/media/wiki/default.css	2009-02-18 00:12:08 UTC (rev 2509)
+++ trunk/media/wiki/default.css	2009-02-18 08:21:42 UTC (rev 2510)
@@ -92,6 +92,7 @@
 
 p { 
   text-indent: 1em;
+  line-height: 170%;
 }
 
 #titlebox h1 {

Modified: trunk/media/wiki/template.xml
===================================================================
--- trunk/media/wiki/template.xml	2009-02-18 00:12:08 UTC (rev 2509)
+++ trunk/media/wiki/template.xml	2009-02-18 08:21:42 UTC (rev 2510)
@@ -15,10 +15,11 @@
       <h1><img src="images/windstille-logo.png" alt="Windstille" /></h1>
     </div>
     <div id="navbar">
+      <a href="News.html">News</a>
       <a href="${prev}.html">? Prev</a>
-      <a href="News.html">News</a>
-      <a href="Windstille.html">Index</a>
+      <a href="Windstille.html">? Up</a>
       <a href="${next}.html">Next ?</a>
+      <a href="About.html">About</a>
       <br clear="all" />
     </div>
     <div id="body">
@@ -27,10 +28,11 @@
       <br clear="all" />
     </div>
     <div id="navbar">
+      <a href="News.html">News</a>
       <a href="${prev}.html">? Prev</a>
-      <a href="News.html">News</a>
       <a href="Windstille.html">Index</a>
       <a href="${next}.html">Next ?</a>
+      <a href="About.html">About</a>
       <br clear="all" />
     </div>
   </body>

Added: trunk/media/wiki/upload.sh
===================================================================
--- trunk/media/wiki/upload.sh	2009-02-18 00:12:08 UTC (rev 2509)
+++ trunk/media/wiki/upload.sh	2009-02-18 08:21:42 UTC (rev 2510)
@@ -0,0 +1,5 @@
+#!/bin/sh
+
+rsync -vrPLtC  build/ grumbel at shell.berlios.de:/home/groups/windstille/htdocs/wikinew
+
+# EOF #


Property changes on: trunk/media/wiki/upload.sh
___________________________________________________________________
Name: svn:executable
   + *

Modified: trunk/media/wiki/wiki2html.py
===================================================================
--- trunk/media/wiki/wiki2html.py	2009-02-18 00:12:08 UTC (rev 2509)
+++ trunk/media/wiki/wiki2html.py	2009-02-18 08:21:42 UTC (rev 2510)
@@ -49,7 +49,8 @@
              'Blender',
              'BlenderToSprite3D',
              'Sprite3D',
-             'Sprite']
+             'Sprite',
+             'About']
 
 def find_next_page(str):
     for i in range(len(all_pages)):



From grumbel at mail.berlios.de  Wed Feb 18 14:07:31 2009
From: grumbel at mail.berlios.de (grumbel at BerliOS)
Date: Wed, 18 Feb 2009 14:07:31 +0100
Subject: [Windstille-commit] r2511 - trunk/media/wiki
Message-ID: <200902181307.n1ID7VDG017190@sheep.berlios.de>

Author: grumbel
Date: 2009-02-18 14:07:30 +0100 (Wed, 18 Feb 2009)
New Revision: 2511

Modified:
   trunk/media/wiki/Blender.wiki
   trunk/media/wiki/BlenderToSprite3D.wiki
   trunk/media/wiki/Characters.wiki
   trunk/media/wiki/Navigation Mesh.wiki
   trunk/media/wiki/PDA.wiki
   trunk/media/wiki/Particles.wiki
   trunk/media/wiki/Rebirth.wiki
   trunk/media/wiki/SConstruct
   trunk/media/wiki/Sprite.wiki
   trunk/media/wiki/TODO
   trunk/media/wiki/Vehicles.wiki
   trunk/media/wiki/default.css
   trunk/media/wiki/template.xml
   trunk/media/wiki/wiki2html.py
Log:
Another round of small updates

Modified: trunk/media/wiki/Blender.wiki
===================================================================
--- trunk/media/wiki/Blender.wiki	2009-02-18 08:21:42 UTC (rev 2510)
+++ trunk/media/wiki/Blender.wiki	2009-02-18 13:07:30 UTC (rev 2511)
@@ -7,8 +7,12 @@
 
 == Armatures
 
-Armatures and character models should stay seperate. How to accomplish that, is not yet clear.
+<<note>>
+How to accomplish that, is not yet clear.
+<</note>>
 
+Armatures and character models should stay seperate. 
+
 == Lighting
 
 Since the models are meant to be used in a game, all the lighting is the job of the game engine, not the .blend file. Model files should thus be free of light sources.

Modified: trunk/media/wiki/BlenderToSprite3D.wiki
===================================================================
--- trunk/media/wiki/BlenderToSprite3D.wiki	2009-02-18 08:21:42 UTC (rev 2510)
+++ trunk/media/wiki/BlenderToSprite3D.wiki	2009-02-18 13:07:30 UTC (rev 2511)
@@ -1,3 +1,7 @@
+<<note>>
+This article needs an update.
+<</note>>
+
 {{{
 Notes about blender models:
 
@@ -6,8 +10,8 @@
   
      ln -s contrib/windstille_exporter.py $HOME/.blender/scripts
      
-- 1 blender unit corresponds to 32pixels in game
-  (if you use the default 800x600 game resolution)
+- 1 blender unit corresponds to 1 meter in game
+  (32 pixels if you use the default 800x600 game resolution)
 - When looking at a character turned left from the side, coordinate axes are:
     z -> up
     y -> right

Modified: trunk/media/wiki/Characters.wiki
===================================================================
--- trunk/media/wiki/Characters.wiki	2009-02-18 08:21:42 UTC (rev 2510)
+++ trunk/media/wiki/Characters.wiki	2009-02-18 13:07:30 UTC (rev 2511)
@@ -1,4 +1,6 @@
-No names have yet been selected for the different characters, so fell free to suggest some.
+<<note>>
+The names are not final, chances are possible and likely.
+<</note>>
 
 = Player (Jane)
 

Modified: trunk/media/wiki/Navigation Mesh.wiki
===================================================================
--- trunk/media/wiki/Navigation Mesh.wiki	2009-02-18 08:21:42 UTC (rev 2510)
+++ trunk/media/wiki/Navigation Mesh.wiki	2009-02-18 13:07:30 UTC (rev 2511)
@@ -1 +1,3 @@
-The Navigation Mesh is a graph structure that is used to represent the walkable area.
+<<thumbnail src="navigation_test.png">>
+
+The Navigation Mesh is a graph structure that is used to represent the walkable area. Currently there exist a simple prototype in Windstille that is available from the main menu under **Navigation Test**.

Modified: trunk/media/wiki/PDA.wiki
===================================================================
--- trunk/media/wiki/PDA.wiki	2009-02-18 08:21:42 UTC (rev 2510)
+++ trunk/media/wiki/PDA.wiki	2009-02-18 13:07:30 UTC (rev 2511)
@@ -1,9 +1,11 @@
+<<thumbnail src="pda.jpg">>
+
 The PDA is a tool that can be used in the game to perform various functions, such as:
 
-* recording dialog, so that it can be recalled later on
+* automaticall record dialog, so that it can be recalled later on in the game
 * record mission/quest logs
-* detailed auto-map
+* detailed auto-map of the environment
 
 When not in use the PDA should be in small form at the edge of the screen to provide a little automap, when activated it should pop-up and fill half the screen, while the player is visible on the other side, the game should continue to run when the PDA is activated. 
 
-The PDA shall also act as communicator to call remote characters, the ship, the base or services. 
+The PDA shall also act as communicator to call remote characters, the shuttle, the base or other services. 

Modified: trunk/media/wiki/Particles.wiki
===================================================================
--- trunk/media/wiki/Particles.wiki	2009-02-18 08:21:42 UTC (rev 2510)
+++ trunk/media/wiki/Particles.wiki	2009-02-18 13:07:30 UTC (rev 2511)
@@ -3,7 +3,7 @@
 shortcommings and missing features
 <</note>>
 
-Particle systems in Windstille consists of two main sub parts, a drawer object and a distribution object. The drawer gets the particle and draws it, while the distribution is used to spawn the particles. Distributions are geometric shapes like lines, rectangles or circles.
+Particle systems, as currently implemented in Windstille, consists of two main sub parts, a drawer object and a distribution object. The drawer gets the particle and draws it, while the distribution is used to spawn the particles. Distributions are geometric shapes like lines, rectangles or circles.
 
 == Drawer
 
@@ -60,4 +60,7 @@
 
 ;; EOF ;;
 }}}
- 
\ No newline at end of file
+ 
+== Other Particle Engines
+
+* http://www.galaxist.net/linearparticle.html

Modified: trunk/media/wiki/Rebirth.wiki
===================================================================
--- trunk/media/wiki/Rebirth.wiki	2009-02-18 08:21:42 UTC (rev 2510)
+++ trunk/media/wiki/Rebirth.wiki	2009-02-18 13:07:30 UTC (rev 2511)
@@ -2,6 +2,10 @@
 
 Time to document a few things that went wrong in the past and how I intend to fix them.
 
+== Wiki
+
+While Wikis are nice for some things, they can easily clog up with way to much redundant garbage if they aren't maintained properly. The user editability also leads to plenty of pointles discussion. To cut the noise down, to make it easier to reorganize things, to make it easier backup things and to make things less maintainance intensive, the Wiki got moved into SVN and is now generated offline.
+
 == Tilemaps
 
 While tilemaps are a classic building block of 2D games, they just didn't work out for what I had in mind. There is to much flexibility that is lost due to them and there are quite a few things that are made much harder, like slopes, AI reactions to the environment, etc.
@@ -34,8 +38,7 @@
 
 == Navigation Mesh ==
 
-The Navigation Mesh Prototype should demonstrate the concept of the
-navigation mesh level layout and demonstrate actions like jumping,
+The [[Navigation Mesh]] Prototype should demonstrate the concept of the navigation mesh level layout and demonstrate actions like jumping,
 ledge grabbing, etc. performated on the mesh.
 
 == Shooting ==

Modified: trunk/media/wiki/SConstruct
===================================================================
--- trunk/media/wiki/SConstruct	2009-02-18 08:21:42 UTC (rev 2510)
+++ trunk/media/wiki/SConstruct	2009-02-18 13:07:30 UTC (rev 2511)
@@ -1,7 +1,9 @@
+# -*- python -*-
+
 import glob
 import os
 
-bld = Builder(action = './wiki2html.py $SOURCE > $TARGET')
+bld = Builder(action = './wiki2html.py -o build $SOURCE')
 env = Environment(BUILDERS = {'Wiki' : bld})
 
 Mkdir("build")

Modified: trunk/media/wiki/Sprite.wiki
===================================================================
--- trunk/media/wiki/Sprite.wiki	2009-02-18 08:21:42 UTC (rev 2510)
+++ trunk/media/wiki/Sprite.wiki	2009-02-18 13:07:30 UTC (rev 2511)
@@ -1,3 +1,5 @@
+A Sprite is a simple animated image. A Sprite can have multiple actions.
+
 = C++ Specification:
 
 {{{

Modified: trunk/media/wiki/TODO
===================================================================
--- trunk/media/wiki/TODO	2009-02-18 08:21:42 UTC (rev 2510)
+++ trunk/media/wiki/TODO	2009-02-18 13:07:30 UTC (rev 2511)
@@ -1,3 +1,5 @@
 http://creoleparser.googlepages.com/CheatSheetPlus.html
 
 Add prev/next and chapter jumps to the .html generator
+
+Add a 'last updated' time to the pages, take it from "svn info"
\ No newline at end of file

Modified: trunk/media/wiki/Vehicles.wiki
===================================================================
--- trunk/media/wiki/Vehicles.wiki	2009-02-18 08:21:42 UTC (rev 2510)
+++ trunk/media/wiki/Vehicles.wiki	2009-02-18 13:07:30 UTC (rev 2511)
@@ -1,3 +1,7 @@
+<<note>>
+Need to add some pretty pictures here.
+<</note>>
+
 == Shuttle
 
 A small transporter that is used to bring Jane to her missions.

Modified: trunk/media/wiki/default.css
===================================================================
--- trunk/media/wiki/default.css	2009-02-18 08:21:42 UTC (rev 2510)
+++ trunk/media/wiki/default.css	2009-02-18 13:07:30 UTC (rev 2511)
@@ -26,25 +26,37 @@
   padding-left: 1em;
 }
 
+#footer { 
+  padding: 0.5em;
+  background-color: rgb(0, 0, 50);
+  color: lightgrey;
+  text-align: center;
+  font-size: small;
+}
+
+#footer a { 
+  color: cyan;
+}
+
 img.thumbnail { 
   border-style: none;
 }
 
 #navbar { 
   clear: both;
-  background: lightgrey;
+  background-color: rgb(0, 0, 50);
   text-align: center;
   padding: 0.2em;
 }
 
 #navbar a {
-  color: black;
+  color: white;
   text-decoration: none;
-  background-color: lightgrey;
+  background-color: rgb(0, 0, 75);
   display: inline-block;
   text-align: center;
   border-style: solid;
-  border-color: darkgrey;
+  border-color: rgb(50, 50, 150);
   border-width: thin;
   margin-left:  1em;
   margin-right: 1em;
@@ -54,6 +66,7 @@
 }
 
 #navbar a:hover {
+  color: black;
   background-color: white;
 }
 
@@ -95,6 +108,14 @@
   line-height: 170%;
 }
 
+li { 
+  padding-bottom: 0.7em;
+}
+
+li:last-child { 
+  padding-bottom: 0.0em;
+}
+
 #titlebox h1 {
   padding: 0px;
 }

Modified: trunk/media/wiki/template.xml
===================================================================
--- trunk/media/wiki/template.xml	2009-02-18 08:21:42 UTC (rev 2510)
+++ trunk/media/wiki/template.xml	2009-02-18 13:07:30 UTC (rev 2511)
@@ -7,6 +7,7 @@
     <link rel="stylesheet" type="text/css" href="default.css" />
     <link rel="icon" href="images/favicon.png" type="image/png" />
     <link rel="top" href="Windstille.html" />
+    <link rel="up" href="Windstille.html" />
     <link rel="next" href="${next}.html" />
     <link rel="prev" href="${prev}.html" />
   </head>
@@ -26,14 +27,12 @@
       <h1>${title}</h1>
       ${body}
       <br clear="all" />
+      <div style="text-align: right;">
+        <a href="http://svn.berlios.de/viewvc/windstille/trunk/media/wiki/${thispage}" style="font-size: small;">view source</a>
+      </div>
     </div>
-    <div id="navbar">
-      <a href="News.html">News</a>
-      <a href="${prev}.html">? Prev</a>
-      <a href="Windstille.html">Index</a>
-      <a href="${next}.html">Next ?</a>
-      <a href="About.html">About</a>
-      <br clear="all" />
+    <div id="footer">
+      This Wiki uses <a href="http://www.wikicreole.org/">Creole</a>.
     </div>
   </body>
 </html>

Modified: trunk/media/wiki/wiki2html.py
===================================================================
--- trunk/media/wiki/wiki2html.py	2009-02-18 08:21:42 UTC (rev 2510)
+++ trunk/media/wiki/wiki2html.py	2009-02-18 13:07:30 UTC (rev 2511)
@@ -115,29 +115,41 @@
 
     def main(self, args):
         if args == []:
-            print "Usage: wiki2html.py FILENAME..."
+            print "Usage: wiki2html.py -o DIRECTORY FILENAME..."
+
         else:
-            self.creole_parser = creoleparser.Parser(dialect=creoleparser.Creole10(
-                    wiki_links_base_url   = '',
-                    wiki_links_path_func  = lambda pagename: pagename + ".html",
-                    wiki_links_space_char = ' ',
-                    # no_wiki_monospace   = True,
-                    use_additions         = True,
-                    macro_func            = self.macro_func,
-                    interwiki_links_funcs={'Talk' : self.talk_links_funcs }
-                    ))
+            if len(args) < 3 or args[0] != '-o':
+                raise Exception("Usage: wiki2html.py -o DIRECTORY FILENAME...")
+            else:
+                directory = args[1]
+                args = args[2:]
 
-            try:
-                for filename in args:
-                    tmpl = MarkupTemplate(file2string("template.xml"))
-                    print tmpl.generate(next = find_next_page(os.path.basename(filename)[:-5]),
-                                        prev = find_prev_page(os.path.basename(filename)[:-5]),
-                                        body = self.creole_parser.generate(file2string(filename)),
-                                        title = filename.replace(".wiki", "")).render(method='xhtml', 
-                                                                                      strip_whitespace=True)
-            except Exception, err:
-                sys.stderr.write(str(err) + "\n")
+                self.creole_parser = creoleparser.Parser(dialect=creoleparser.Creole10(
+                        wiki_links_base_url   = '',
+                        wiki_links_path_func  = lambda pagename: pagename + ".html",
+                        wiki_links_space_char = ' ',
+                        # no_wiki_monospace   = True,
+                        use_additions         = True,
+                        macro_func            = self.macro_func,
+                        interwiki_links_funcs={'Talk' : self.talk_links_funcs }
+                        ))
 
+                try:
+                    for filename in args:
+                        tmpl = MarkupTemplate(file2string("template.xml"))
+                        text = tmpl.generate(next = find_next_page(os.path.basename(filename)[:-5]),
+                                             prev = find_prev_page(os.path.basename(filename)[:-5]),
+                                             thispage = os.path.basename(filename),
+                                             body = self.creole_parser.generate(file2string(filename)),
+                                             title = filename.replace(".wiki", "")).render(method='xhtml', 
+                                                                                           strip_whitespace=True)
+                        f = open(directory + '/' + os.path.basename(filename)[:-5] + ".html", 'w')
+                        f.write(text)
+                        f.close()
+
+                except Exception, err:
+                    sys.stderr.write(str(err) + "\n")
+
             
 if __name__ == "__main__":
     wiki2html = Wiki2HTML()



From grumbel at mail.berlios.de  Wed Feb 18 15:58:32 2009
From: grumbel at mail.berlios.de (grumbel at BerliOS)
Date: Wed, 18 Feb 2009 15:58:32 +0100
Subject: [Windstille-commit] r2512 - trunk/media/wiki
Message-ID: <200902181458.n1IEwWdH028061@sheep.berlios.de>

Author: grumbel
Date: 2009-02-18 15:58:31 +0100 (Wed, 18 Feb 2009)
New Revision: 2512

Modified:
   trunk/media/wiki/Actions.wiki
   trunk/media/wiki/Drawing Model.wiki
   trunk/media/wiki/Locations.wiki
   trunk/media/wiki/Particles.wiki
   trunk/media/wiki/Rebirth.wiki
   trunk/media/wiki/Scripting.wiki
   trunk/media/wiki/default.css
   trunk/media/wiki/wiki2html.py
Log:
Added support for youtube videos

Modified: trunk/media/wiki/Actions.wiki
===================================================================
--- trunk/media/wiki/Actions.wiki	2009-02-18 13:07:30 UTC (rev 2511)
+++ trunk/media/wiki/Actions.wiki	2009-02-18 14:58:31 UTC (rev 2512)
@@ -1,3 +1,8 @@
+<<note>>
+Needs update
+<</note>>
+
+
 <<thumbnail src="actions.png" title="Source for this file is actions.dia">>
 
 The game has basically 3 different control modes, one is with the powersuit, one is for player without the powersuit and a seperate mode is there for the player with his weapon equiped without the powersuit.

Modified: trunk/media/wiki/Drawing Model.wiki
===================================================================
--- trunk/media/wiki/Drawing Model.wiki	2009-02-18 13:07:30 UTC (rev 2511)
+++ trunk/media/wiki/Drawing Model.wiki	2009-02-18 14:58:31 UTC (rev 2512)
@@ -1,3 +1,8 @@
+<<note>>
+Needs more focus on highlight, color and light layers. Some other stuff should be split off.
+<</note>>
+
+
 To bring images on screen you have to execute drawing operations. There are several different types of drawing operations. Each of them depend on a number of parameters.
 
 == Common Parameters
@@ -72,3 +77,5 @@
 = GLSL Effects
 
 GLSL, OpenGLs shader language, allows to do some very nice effects (fire, glass, shockwaves, etc.) the [[http://windstille.berlios.de/screenshots.html|Windstille webpage]] has some videos of them. The good news is that they are rather easy to implement, the bad news is that one needs some framework to implement them properly, ie. first of one needs to get them through ClanLib and secondly for most effects one needs a copy of the current framebuffer, which however is rather expensive to read, so its hard to get. They are also rather GPU heavy, so when not handled with care they won't work on low-end graphic cards (GeforceFX5200, ATI9200) and they don't work at all on even older cards, so they would need to be optional.
+
+<<youtube src="xrA4bQik1Lc">>

Modified: trunk/media/wiki/Locations.wiki
===================================================================
--- trunk/media/wiki/Locations.wiki	2009-02-18 13:07:30 UTC (rev 2511)
+++ trunk/media/wiki/Locations.wiki	2009-02-18 14:58:31 UTC (rev 2512)
@@ -1,41 +1,43 @@
-Realistically, milestone 1 is only going to be able to have a very limited number of locations. This is an attempt to keep track of what locations we actually intend to create  - which requires art, level design, coding the required game objects, populating the location with characters and bad guys, and including the location in the plot.
+Windstille will have basically two kinds of areas, one is the city, in which one can move around by train or other means, and the other are the outdoor areas which will be reachable mainly by shuttle. 
 
+The outdoor areas will mostly feature powersuit gameplay and revolve around mines, cave and other installations that will allow some room for vertical exploration.
+
 == VR Training ==
 
-* Used for the opening tutorial for the game.
+* used for the optional opening tutorial
 
 * provides a number of sub rooms to allow the player to train all kinds of stuff
 
 == City ==
 
-* Jane's apartment
+=== Jane's apartment
 
-This is where the game opens. Perhaps it could be reused for other things, too?
+=== Street / roof tops
 
-* Street / roof tops
-
+<<note>>
 Maybe we will have a sector that just represents walking about the city? I don't know.
+<</note>>
 
-* Bar
+=== Bar
 
 Used for meeting some of the characters, perhaps you may go here for jobs, or whatever.
 
-* Train station
+=== Train station
 
-Maybe this isn't needed, but we have a train model and train stations are a good location for meeting characters and travelling, and they also add to the feel that you are in a living city.
+<<thumbnail src="location_trainstation.jpg">>
 
-* Shuttle port
+The Train station will be one of the main ways to move around in the city or between different cities.
 
+=== Shuttle port
+
 Where you get on shuttles to take you away from the city
 
 == Forest ==
 
-This is where the Milestone 1 powersuit mission takes place.
+=== Above ground
 
-* Above ground
-
 Will contain trees, and maybe some swamp or something too. The idea seems to be that on the forest surface your enemies are the local wildlife, not humans or aliens or whatever. The final boss is a huge spider (though they could be put below ground, see below)
 
-* Underground
+=== Underground
 
-Both man made mines and natural labyrinth. Quite possibly it will contain some robots of various sorts for bad guys, perhaps also spiders.
+Both man made mines and natural caves. Quite possibly it will contain some robots of various sorts for bad guys, perhaps also spiders.

Modified: trunk/media/wiki/Particles.wiki
===================================================================
--- trunk/media/wiki/Particles.wiki	2009-02-18 13:07:30 UTC (rev 2511)
+++ trunk/media/wiki/Particles.wiki	2009-02-18 14:58:31 UTC (rev 2512)
@@ -60,6 +60,10 @@
 
 ;; EOF ;;
 }}}
+
+And here the example code in action:
+
+<<youtube src="q-9miRwcLwk">>
  
 == Other Particle Engines
 

Modified: trunk/media/wiki/Rebirth.wiki
===================================================================
--- trunk/media/wiki/Rebirth.wiki	2009-02-18 13:07:30 UTC (rev 2511)
+++ trunk/media/wiki/Rebirth.wiki	2009-02-18 14:58:31 UTC (rev 2512)
@@ -34,7 +34,7 @@
 
 = Prototypes
 
-To get some gameplay details sorted out bevor the big implementation can begin a series of prototypes will be constructed.
+In the past there was some confusion what the final goal actually is, to get this sorted out development shall focus on developing prototypes of key game mechanics and plenty of sketches of location.
 
 == Navigation Mesh ==
 

Modified: trunk/media/wiki/Scripting.wiki
===================================================================
--- trunk/media/wiki/Scripting.wiki	2009-02-18 13:07:30 UTC (rev 2511)
+++ trunk/media/wiki/Scripting.wiki	2009-02-18 14:58:31 UTC (rev 2512)
@@ -1,3 +1,7 @@
+<<note>>
+Needs update, specifically on how script functions get exported, on how scripts related to sectors, levels or dialog and on what scripting is used for.
+<</note>>
+
 Windstille uses [[http://www.squirrel-lang.org/|Squirrel]] for scripting. The full source code of squirrel is included within the "squirrel" subdirectory of Windstille's source, and it is automatically built into the game.
 
 C++ functions are exposed to scripts via the interface in the "scripting" sub directory". Miniswig, found in the "tools/miniswig" subdirectory, is a tool that creates wrapper functions to allow the interface functions to be called from squirrel. If you have bison and flex installed then miniswig will be built automatically, and any changes you make to the scripting interface will automatically be added to the wrapper functions when you execute jam.

Modified: trunk/media/wiki/default.css
===================================================================
--- trunk/media/wiki/default.css	2009-02-18 13:07:30 UTC (rev 2511)
+++ trunk/media/wiki/default.css	2009-02-18 14:58:31 UTC (rev 2512)
@@ -85,6 +85,12 @@
   width: 100%;
 }
 
+div.youtube { 
+  width: 100%;
+  margin-left:  auto;
+  margin-right: auto;
+}
+
 pre {
   padding: 1em;
   border-style: solid;

Modified: trunk/media/wiki/wiki2html.py
===================================================================
--- trunk/media/wiki/wiki2html.py	2009-02-18 13:07:30 UTC (rev 2511)
+++ trunk/media/wiki/wiki2html.py	2009-02-18 14:58:31 UTC (rev 2512)
@@ -4,6 +4,7 @@
 import codecs
 import re
 from genshi.template import MarkupTemplate
+from genshi import XML
 import genshi.builder as bldr
 import creoleparser
 import sys
@@ -91,12 +92,39 @@
                 alt = dict['src']
 
             if dict.has_key('title'):
-                title = dict['title']            
+                title = dict['title']
             else:
                 title = None
 
             return bldr.tag.a(bldr.tag.img(None, src="thumbnails/" + dict['src'], alt=alt, title=title, class_="thumbnail"),
                               href="images/" + dict['src'])
+
+        elif name == "raw":
+            return XML(body)
+        
+        elif name == "youtube":
+            dict = parse_arg_string(arg_string)            
+            
+            # autoplay=1 - starts video automatically
+            # rel=0      - removes the related video menu at the end
+            # ap=%2526fmt%3D18 - highquality 
+            return bldr.tag.center(
+                bldr.tag.object(
+                    bldr.tag.param(None, 
+                                   name="movie",
+                                   value="http://www.youtube.com/v/%s&hl=en&fs=1&rel=0&loop=1&ap=%%2526fmt%%3D18" % dict['src']) +
+                    bldr.tag.param(None, name="allowFullScreen",   value="true") +
+                    bldr.tag.param(None, name="allowscriptaccess", value="always") +
+                    bldr.tag.embed(None, 
+                                   src="http://www.youtube.com/v/%s&hl=en&fs=1&rel=0&loop=1&ap=%%2526fmt%%3D18" % dict['src'],
+                                   type="application/x-shockwave-flash",
+                                   allowscriptaccess="always",
+                                   allowfullscreen="true",
+                                   width="425",
+                                   height="344"),
+                    width="425", height="344"),
+                class_="youtube")
+
         elif name == "img":
             dict = parse_arg_string(arg_string)
             if not dict.has_key('src'):
@@ -125,20 +153,20 @@
                 args = args[2:]
 
                 self.creole_parser = creoleparser.Parser(dialect=creoleparser.Creole10(
-                        wiki_links_base_url   = '',
-                        wiki_links_path_func  = lambda pagename: pagename + ".html",
-                        wiki_links_space_char = ' ',
-                        # no_wiki_monospace   = True,
-                        use_additions         = True,
-                        macro_func            = self.macro_func,
-                        interwiki_links_funcs={'Talk' : self.talk_links_funcs }
-                        ))
+                    wiki_links_base_url   = '',
+                    wiki_links_path_func  = lambda pagename: pagename + ".html",
+                    wiki_links_space_char = ' ',
+                    # no_wiki_monospace   = True,
+                    use_additions         = True,
+                    macro_func            = self.macro_func,
+                    interwiki_links_funcs={'Talk' : self.talk_links_funcs }
+                    ))
 
                 try:
                     for filename in args:
                         tmpl = MarkupTemplate(file2string("template.xml"))
                         text = tmpl.generate(next = find_next_page(os.path.basename(filename)[:-5]),
-                                             prev = find_prev_page(os.path.basename(filename)[:-5]),
+                        prev = find_prev_page(os.path.basename(filename)[:-5]),
                                              thispage = os.path.basename(filename),
                                              body = self.creole_parser.generate(file2string(filename)),
                                              title = filename.replace(".wiki", "")).render(method='xhtml', 



From grumbel at mail.berlios.de  Wed Feb 18 16:28:34 2009
From: grumbel at mail.berlios.de (grumbel at BerliOS)
Date: Wed, 18 Feb 2009 16:28:34 +0100
Subject: [Windstille-commit] r2513 - in trunk/media/wiki: . images thumbnails
Message-ID: <200902181528.n1IFSYu1031458@sheep.berlios.de>

Author: grumbel
Date: 2009-02-18 16:28:16 +0100 (Wed, 18 Feb 2009)
New Revision: 2513

Added:
   trunk/media/wiki/Suits.wiki
   trunk/media/wiki/images/deepsea_suit.jpg
   trunk/media/wiki/images/environmental_suit.jpg
   trunk/media/wiki/images/location_trainstation.jpg
   trunk/media/wiki/images/navigation_test.png
   trunk/media/wiki/images/pda.jpg
   trunk/media/wiki/images/powersuit.jpg
   trunk/media/wiki/thumbnails/deepsea_suit.jpg
   trunk/media/wiki/thumbnails/environmental_suit.jpg
   trunk/media/wiki/thumbnails/location_trainstation.jpg
   trunk/media/wiki/thumbnails/navigation_test.png
   trunk/media/wiki/thumbnails/pda.jpg
   trunk/media/wiki/thumbnails/powersuit.jpg
Modified:
   trunk/media/wiki/Windstille.wiki
   trunk/media/wiki/wiki2html.py
Log:
Added Suits.wiki page

Added: trunk/media/wiki/Suits.wiki
===================================================================
--- trunk/media/wiki/Suits.wiki	2009-02-18 14:58:31 UTC (rev 2512)
+++ trunk/media/wiki/Suits.wiki	2009-02-18 15:28:16 UTC (rev 2513)
@@ -0,0 +1,17 @@
+== Powersuit
+
+<<thumbnail src="powersuit.jpg">>
+
+A powered suit that is used in exploration missions and for fighting.
+
+== Environmental Suit
+
+<<thumbnail src="environmental_suit.jpg">>
+
+A lightweight suit that is used in exploration environments that lack oxygen.
+
+== Deepsea Suit
+
+<<thumbnail src="deepsea_suit.jpg">>
+
+A suit for exploring deep sea environments.
\ No newline at end of file

Modified: trunk/media/wiki/Windstille.wiki
===================================================================
--- trunk/media/wiki/Windstille.wiki	2009-02-18 14:58:31 UTC (rev 2512)
+++ trunk/media/wiki/Windstille.wiki	2009-02-18 15:28:16 UTC (rev 2513)
@@ -4,6 +4,7 @@
 
 * [[Backstory]]
 * [[Characters]]
+* [[Suits]]
 * [[Vehicles]]
 * [[Locations]]
 

Added: trunk/media/wiki/images/deepsea_suit.jpg
===================================================================
(Binary files differ)


Property changes on: trunk/media/wiki/images/deepsea_suit.jpg
___________________________________________________________________
Name: svn:mime-type
   + image/jpeg

Added: trunk/media/wiki/images/environmental_suit.jpg
===================================================================
(Binary files differ)


Property changes on: trunk/media/wiki/images/environmental_suit.jpg
___________________________________________________________________
Name: svn:mime-type
   + image/jpeg

Added: trunk/media/wiki/images/location_trainstation.jpg
===================================================================
(Binary files differ)


Property changes on: trunk/media/wiki/images/location_trainstation.jpg
___________________________________________________________________
Name: svn:mime-type
   + image/jpeg

Added: trunk/media/wiki/images/navigation_test.png
===================================================================
(Binary files differ)


Property changes on: trunk/media/wiki/images/navigation_test.png
___________________________________________________________________
Name: svn:mime-type
   + image/png

Added: trunk/media/wiki/images/pda.jpg
===================================================================
(Binary files differ)


Property changes on: trunk/media/wiki/images/pda.jpg
___________________________________________________________________
Name: svn:mime-type
   + image/jpeg

Added: trunk/media/wiki/images/powersuit.jpg
===================================================================
(Binary files differ)


Property changes on: trunk/media/wiki/images/powersuit.jpg
___________________________________________________________________
Name: svn:mime-type
   + image/jpeg

Added: trunk/media/wiki/thumbnails/deepsea_suit.jpg
===================================================================
(Binary files differ)


Property changes on: trunk/media/wiki/thumbnails/deepsea_suit.jpg
___________________________________________________________________
Name: svn:mime-type
   + image/jpeg

Added: trunk/media/wiki/thumbnails/environmental_suit.jpg
===================================================================
(Binary files differ)


Property changes on: trunk/media/wiki/thumbnails/environmental_suit.jpg
___________________________________________________________________
Name: svn:mime-type
   + image/jpeg

Added: trunk/media/wiki/thumbnails/location_trainstation.jpg
===================================================================
(Binary files differ)


Property changes on: trunk/media/wiki/thumbnails/location_trainstation.jpg
___________________________________________________________________
Name: svn:mime-type
   + image/jpeg

Added: trunk/media/wiki/thumbnails/navigation_test.png
===================================================================
(Binary files differ)


Property changes on: trunk/media/wiki/thumbnails/navigation_test.png
___________________________________________________________________
Name: svn:mime-type
   + image/png

Added: trunk/media/wiki/thumbnails/pda.jpg
===================================================================
(Binary files differ)


Property changes on: trunk/media/wiki/thumbnails/pda.jpg
___________________________________________________________________
Name: svn:mime-type
   + image/jpeg

Added: trunk/media/wiki/thumbnails/powersuit.jpg
===================================================================
(Binary files differ)


Property changes on: trunk/media/wiki/thumbnails/powersuit.jpg
___________________________________________________________________
Name: svn:mime-type
   + image/jpeg

Modified: trunk/media/wiki/wiki2html.py
===================================================================
--- trunk/media/wiki/wiki2html.py	2009-02-18 14:58:31 UTC (rev 2512)
+++ trunk/media/wiki/wiki2html.py	2009-02-18 15:28:16 UTC (rev 2513)
@@ -35,6 +35,7 @@
              'Rebirth',
              'Backstory',
              'Characters',
+             'Suits',
              'Vehicles',
              'Locations',
              'Particles',



From grumbel at mail.berlios.de  Wed Feb 18 18:03:44 2009
From: grumbel at mail.berlios.de (grumbel at BerliOS)
Date: Wed, 18 Feb 2009 18:03:44 +0100
Subject: [Windstille-commit] r2514 - trunk/media/wiki
Message-ID: <200902181703.n1IH3iLS008256@sheep.berlios.de>

Author: grumbel
Date: 2009-02-18 18:03:44 +0100 (Wed, 18 Feb 2009)
New Revision: 2514

Modified:
   trunk/media/wiki/About.wiki
   trunk/media/wiki/Characters.wiki
   trunk/media/wiki/Locations.wiki
   trunk/media/wiki/Rebirth.wiki
   trunk/media/wiki/default.css
   trunk/media/wiki/template.xml
Log:
Minor adjustments

Modified: trunk/media/wiki/About.wiki
===================================================================
--- trunk/media/wiki/About.wiki	2009-02-18 15:28:16 UTC (rev 2513)
+++ trunk/media/wiki/About.wiki	2009-02-18 17:03:44 UTC (rev 2514)
@@ -1,4 +1,4 @@
-This Wiki isn't editable by the general public. Its is stored in SVN and only writable by developers, you can check it out via:
+This is the Windstille Development Wiki, it isn't editable by the general public. Its is stored in SVN and only writable by developers, you can check it out via:
 
 * svn co http://svn.berlios.de/svnroot/repos/windstille/trunk/media/wiki
 
@@ -10,9 +10,9 @@
 
 * [[mailto:grumbel at gmx.de | Ingo Ruhnke <grumbel at gmx.de>]].
 
-This Wiki is generated with the help of [[http://code.google.com/p/creoleparser/ |  Creoleparser]] and [[http://genshi.edgewall.org/ | Genshi]].
-
 The Windstille Project page itself is located at:
 
 * http://windstille.berlios.de/
 * https://developer.berlios.de/projects/windstille
+
+This Wiki is generated with the help of [[http://code.google.com/p/creoleparser/ |  Creoleparser]] and [[http://genshi.edgewall.org/ | Genshi]].

Modified: trunk/media/wiki/Characters.wiki
===================================================================
--- trunk/media/wiki/Characters.wiki	2009-02-18 15:28:16 UTC (rev 2513)
+++ trunk/media/wiki/Characters.wiki	2009-02-18 17:03:44 UTC (rev 2514)
@@ -28,19 +28,19 @@
 
 Veteran in the mercenary work, has worked on a bunch of different colonies and has been on this one for quite some years. She knows how stuff works here and how to get what is needed. Has lots of connections to different people around on this colonie. For most part see prefers to work alone. Tough women overall.
 
-= Jeff =
+= Jeff
 
 {{ http://pingus.seul.org/~grumbel/tmp/windstille-jeff.png }}
 
 A sunnyboy, always sees the bright side of life. He works in the same business as Jane and every once in a while they clash together. While Jane might not like him much, Jeff sees their relationship a little differently.
 
-= Barkeeper (Bob) =
+= Barkeeper (Bob)
 
 {{ http://windstille.berlios.de/images/barkeeper_small.jpg }}
 
 A valuable informant in this city. He knows most people around and he knows where the good jobs are to find. If something is happening his bar is the place where people exchange information. He might not be the most friendly looking guy, but once you know him for a while one shouldn't have to much throuble to get along with him. He tries his best to keep his bar a save place.
 
-= Mineral Worker =
+= Mineral Worker
 
 {{ http://windstille.berlios.de/images/worker_small.jpg }}
 

Modified: trunk/media/wiki/Locations.wiki
===================================================================
--- trunk/media/wiki/Locations.wiki	2009-02-18 15:28:16 UTC (rev 2513)
+++ trunk/media/wiki/Locations.wiki	2009-02-18 17:03:44 UTC (rev 2514)
@@ -2,13 +2,13 @@
 
 The outdoor areas will mostly feature powersuit gameplay and revolve around mines, cave and other installations that will allow some room for vertical exploration.
 
-== VR Training ==
+== VR Training
 
 * used for the optional opening tutorial
 
 * provides a number of sub rooms to allow the player to train all kinds of stuff
 
-== City ==
+== City
 
 === Jane's apartment
 
@@ -32,7 +32,7 @@
 
 Where you get on shuttles to take you away from the city
 
-== Forest ==
+== Forest
 
 === Above ground
 

Modified: trunk/media/wiki/Rebirth.wiki
===================================================================
--- trunk/media/wiki/Rebirth.wiki	2009-02-18 15:28:16 UTC (rev 2513)
+++ trunk/media/wiki/Rebirth.wiki	2009-02-18 17:03:44 UTC (rev 2514)
@@ -30,18 +30,18 @@
 
 == Editor
 
-Flexlay, while usable and working, is based on an old version of ClanLIb. This isn't all that good in the long run, since it limits the GUI quite a bit. Current plan is to make a sandbox editor based on Gtkmm, that will allow to edit the levels in engine itself.
+Flexlay, while usable and working, is based on an old version of ClanLib. This isn't all that good in the long run, since it limits the GUI quite a bit. Current plan is to rewrite the [[Editor]] and make a sandbox editor based on Gtkmm, that will allow to edit the levels in engine itself.
 
 = Prototypes
 
 In the past there was some confusion what the final goal actually is, to get this sorted out development shall focus on developing prototypes of key game mechanics and plenty of sketches of location.
 
-== Navigation Mesh ==
+== Navigation Mesh
 
 The [[Navigation Mesh]] Prototype should demonstrate the concept of the navigation mesh level layout and demonstrate actions like jumping,
 ledge grabbing, etc. performated on the mesh.
 
-== Shooting ==
+== Shooting
 
 The shooting test shall demonstrate the shooting, the aiming with
 laser pointer, as well as flamethrower action.

Modified: trunk/media/wiki/default.css
===================================================================
--- trunk/media/wiki/default.css	2009-02-18 15:28:16 UTC (rev 2513)
+++ trunk/media/wiki/default.css	2009-02-18 17:03:44 UTC (rev 2514)
@@ -4,6 +4,8 @@
 
   margin: 0 auto 0 auto;
   background: black;
+
+  line-height: 150%;
 }
 
 #body {
@@ -111,17 +113,8 @@
 
 p { 
   text-indent: 1em;
-  line-height: 170%;
 }
 
-li { 
-  padding-bottom: 0.7em;
-}
-
-li:last-child { 
-  padding-bottom: 0.0em;
-}
-
 #titlebox h1 {
   padding: 0px;
 }

Modified: trunk/media/wiki/template.xml
===================================================================
--- trunk/media/wiki/template.xml	2009-02-18 15:28:16 UTC (rev 2513)
+++ trunk/media/wiki/template.xml	2009-02-18 17:03:44 UTC (rev 2514)
@@ -32,7 +32,7 @@
       </div>
     </div>
     <div id="footer">
-      This Wiki uses <a href="http://www.wikicreole.org/">Creole</a>.
+      Powered by <a href="http://www.wikicreole.org/">Creole</a>
     </div>
   </body>
 </html>



From grumbel at mail.berlios.de  Thu Feb 19 00:55:03 2009
From: grumbel at mail.berlios.de (grumbel at BerliOS)
Date: Thu, 19 Feb 2009 00:55:03 +0100
Subject: [Windstille-commit] r2515 - in trunk/media/wiki: . images thumbnails
Message-ID: <200902182355.n1INt3tL001040@sheep.berlios.de>

Author: grumbel
Date: 2009-02-19 00:53:54 +0100 (Thu, 19 Feb 2009)
New Revision: 2515

Added:
   trunk/media/wiki/images/barkeeper.jpg
   trunk/media/wiki/images/jane_portrait.png
   trunk/media/wiki/images/jeff.png
   trunk/media/wiki/images/sophie_head.jpg
   trunk/media/wiki/images/worker.jpg
   trunk/media/wiki/images/worker2.png
   trunk/media/wiki/images/yagor_head.png
   trunk/media/wiki/thumbnails/barkeeper.jpg
   trunk/media/wiki/thumbnails/jane_portrait.png
   trunk/media/wiki/thumbnails/jeff.png
   trunk/media/wiki/thumbnails/sophie_head.jpg
   trunk/media/wiki/thumbnails/worker.jpg
   trunk/media/wiki/thumbnails/worker2.png
   trunk/media/wiki/thumbnails/yagor_head.png
Modified:
   trunk/media/wiki/Characters.wiki
   trunk/media/wiki/Locations.wiki
   trunk/media/wiki/Rebirth.wiki
   trunk/media/wiki/default.css
   trunk/media/wiki/wiki2html.py
Log:
Some more pictures moved into SVN

Modified: trunk/media/wiki/Characters.wiki
===================================================================
--- trunk/media/wiki/Characters.wiki	2009-02-18 17:03:44 UTC (rev 2514)
+++ trunk/media/wiki/Characters.wiki	2009-02-18 23:53:54 UTC (rev 2515)
@@ -4,7 +4,7 @@
 
 = Player (Jane)
 
-{{ http://windstille.berlios.de/images/artwork13_small.jpg }}
+<<thumbnail src="jane_portrait.png">>
 
 Relativly new in the mercenary business, started to hire at Northern Star when she turned 18, wanted to get away from home as quickly as possible, wanted to see the stars, visit other worlds and the like. Worked as miner for some years now, visited a bunch of colonies, however quickly become sick of the mining business. She is now out of the mining business and tries to start a new living here on this colonie.
 
@@ -14,34 +14,35 @@
 
 = Pilot
 
-The person who controls the shuttle and brings Jane to wherever she needs to go. Might actually be Yagor himself, not yet decided.
+The person who controls the shuttle and brings Jane to wherever she needs to go.
 
 = Boss (Yagor)
 
-{{ http://pingus.seul.org/~grumbel/tmp/windstille-yagor-small.png }}
+<<thumbnail src="yagor_head.png">>
 
 The person for which Jane works. Has been in the merc business for a while and has worked for a short period of time together with Sophie, before she went solo. Somewhat of a father person to Jane.
 
 = Veteran (Sophie)
 
-{{ http://windstille.berlios.de/images/artwork11_small.jpg }}
+<<thumbnail src="sophie_head.jpg">>
 
 Veteran in the mercenary work, has worked on a bunch of different colonies and has been on this one for quite some years. She knows how stuff works here and how to get what is needed. Has lots of connections to different people around on this colonie. For most part see prefers to work alone. Tough women overall.
 
 = Jeff
 
-{{ http://pingus.seul.org/~grumbel/tmp/windstille-jeff.png }}
+<<thumbnail src="jeff.png">>
 
 A sunnyboy, always sees the bright side of life. He works in the same business as Jane and every once in a while they clash together. While Jane might not like him much, Jeff sees their relationship a little differently.
 
 = Barkeeper (Bob)
 
-{{ http://windstille.berlios.de/images/barkeeper_small.jpg }}
+<<thumbnail src="barkeeper.jpg">>
 
 A valuable informant in this city. He knows most people around and he knows where the good jobs are to find. If something is happening his bar is the place where people exchange information. He might not be the most friendly looking guy, but once you know him for a while one shouldn't have to much throuble to get along with him. He tries his best to keep his bar a save place.
 
 = Mineral Worker
 
-{{ http://windstille.berlios.de/images/worker_small.jpg }}
+<<thumbnail src="worker.jpg">>
+<<thumbnail src="worker2.png">>
 
 One of the many contract workers which work for the Northern Star Mining cooroperation. The NSM often hires people and send them out to the different colonies to dig for resources. Their income is connected to the amount of resources which they collect, so if stuff doesn't work that right, they might quickly lose interesting, since only resources bring them income. Most of the time they are send out to a colonie for a few weeks or month, then send to another one, once the given resource region is harvested. Overall they can be hard workers, but only if the resources can motivate them.

Modified: trunk/media/wiki/Locations.wiki
===================================================================
--- trunk/media/wiki/Locations.wiki	2009-02-18 17:03:44 UTC (rev 2514)
+++ trunk/media/wiki/Locations.wiki	2009-02-18 23:53:54 UTC (rev 2515)
@@ -41,3 +41,36 @@
 === Underground
 
 Both man made mines and natural caves. Quite possibly it will contain some robots of various sorts for bad guys, perhaps also spiders.
+
+= Artworks
+
+Miscellaneous artworks of possible locations, these are just for
+inspiration, not for exact implementation.
+
+<<raw>>
+<a href="http://pingus.seul.org/%7Egrumbel/tmp/md5/8eb0bc520455b1c10179892c99eb76dc-apartment.jpg"><img src="http://pingus.seul.org/%7Egrumbel/tmp/md5/d8ed7efa7ea9d1f01cc31d2f5fbbbff2-apartment_thumb.jpg" /></a>
+<a href="http://pingus.seul.org/%7Egrumbel/tmp/md5/2b3ffef849f967393bae8a18152fd838-cave2.jpg"><img src="http://pingus.seul.org/%7Egrumbel/tmp/md5/4113fdcebe5f2638aa898f17f54f530d-cave2_thumb.jpg" /></a>
+<a href="http://pingus.seul.org/%7Egrumbel/tmp/md5/5ae72928cbfdf9f1dfb1c510ec6b2730-cave3.jpg"><img src="http://pingus.seul.org/%7Egrumbel/tmp/md5/3ba7bdc05d335ea8ae573d09446f5136-cave3_thumb.jpg" /></a>
+<a href="http://pingus.seul.org/%7Egrumbel/tmp/md5/975db136cac0e004baf9128bd5062074-cave.jpg"><img src="http://pingus.seul.org/%7Egrumbel/tmp/md5/1b072c7a90eca15ebc4551399e03991b-cave_thumb.jpg" /></a>
+<a href="http://pingus.seul.org/%7Egrumbel/tmp/md5/88543d1f5fe04bdc532078aea9ab6dbb-hangar.jpg"><img src="http://pingus.seul.org/%7Egrumbel/tmp/md5/47c4fe0ad2fde78fb41cf7eb269c5e88-hangar_thumb.jpg" /></a>
+<a href="http://pingus.seul.org/%7Egrumbel/tmp/md5/649c09983f1cf88070b976fe5ef4fcbd-haus2.jpg"><img src="http://pingus.seul.org/%7Egrumbel/tmp/md5/ec0eb3e41cb8c7ef6bad97821bbb9dc1-haus2_thumb.jpg" /></a>
+<a href="http://pingus.seul.org/%7Egrumbel/tmp/md5/b5eaa9670f89a13e986b21e7b3bf339c-industrial.jpg"><img src="http://pingus.seul.org/%7Egrumbel/tmp/md5/afcdfdf7a5c9f876c5ea6e11750d7760-industrial_thumb.jpg" /></a>
+<a href="http://pingus.seul.org/%7Egrumbel/tmp/md5/ae4fed0308a12113335c42ae8eee82e7-saveroom.jpg"><img src="http://pingus.seul.org/%7Egrumbel/tmp/md5/e2f9403d4738ebf93c2ea57b228a5a87-saveroom_thumb.jpg" /></a>
+<a href="http://pingus.seul.org/%7Egrumbel/tmp/md5/a13d9ad34bb6033d5924867728b85f86-skybridge.jpg"><img src="http://pingus.seul.org/%7Egrumbel/tmp/md5/a58e24fa043111d608732538269b9502-skybridge_thumb.jpg" /></a>
+<a href="http://pingus.seul.org/%7Egrumbel/tmp/md5/9181985a21462402a775782ca0c6dac4-trainstation.jpg"><img src="http://pingus.seul.org/%7Egrumbel/tmp/md5/61246a61b6fb90362a6886bf76ebdad6-trainstation_thumb.jpg" /></a>
+<a href="http://pingus.seul.org/%7Egrumbel/tmp/md5/41e2e8a787d8378744fc1a3a79c69e5e-cave4.jpg"><img src="http://pingus.seul.org/%7Egrumbel/tmp/md5/d2d2b175797b473301d79b9ee81a27a4-cave4_thumb.jpg" /></a>
+<a href="http://pingus.seul.org/%7Egrumbel/tmp/md5/14d2026deb19bdf355f0c81764d04db5-haus3.jpg"><img src="http://pingus.seul.org/%7Egrumbel/tmp/md5/79c4d410d80acfc3f3252714a870ddb3-haus3_thumb.jpg" /></a>
+<a href="http://pingus.seul.org/%7Egrumbel/tmp/md5/0db46a8e56ee891dba65448db0c122db-subway2.jpg"><img src="http://pingus.seul.org/%7Egrumbel/tmp/md5/9cba2fb3e9cb782afc2b0118a071b3f3-subway2_thumb.jpg" /></a>
+<a href="http://pingus.seul.org/%7Egrumbel/tmp/md5/60ac9c256ce0d4a1b0b776138e0302d4-cave6.jpg"><img src="http://pingus.seul.org/%7Egrumbel/tmp/md5/930399e32dd63e9471d0557d2d0c8212-cave6_thumb.jpg" /></a>
+<a href="http://pingus.seul.org/%7Egrumbel/tmp/md5/bf90c467024aee7baa6b8979aea2e3ba-cellar.jpg"><img src="http://pingus.seul.org/%7Egrumbel/tmp/md5/42d05ee31777d304c780c9d03db9d978-cellar_thumb.jpg" /></a>
+<a href="http://pingus.seul.org/%7Egrumbel/tmp/md5/6ff697a01a0d5168b50e92a83355d62f-desert2.jpg"><img src="http://pingus.seul.org/%7Egrumbel/tmp/md5/4d59c3ff7e86c33235483d9e56354d53-desert2_thumb.jpg" /></a>
+<a href="http://pingus.seul.org/%7Egrumbel/tmp/md5/41414f5425eb8567958a1baa433e2651-desert.jpg"><img src="http://pingus.seul.org/%7Egrumbel/tmp/md5/b521505f1f74de6268df097826bcac80-desert_thumb.jpg" /></a>
+<a href="http://pingus.seul.org/%7Egrumbel/tmp/md5/72552c6bc60110d76e2e2141c3386767-generator.jpg"><img src="http://pingus.seul.org/%7Egrumbel/tmp/md5/ff41b4d4ccc66203e712c30b581650a0-generator_thumb.jpg" /></a>
+<a href="http://pingus.seul.org/%7Egrumbel/tmp/md5/adf836da7ea74a5818441ae688acc234-desert3.jpg"><img src="http://pingus.seul.org/%7Egrumbel/tmp/md5/fdf2e3b50c14d7b97294a01c490e672d-desert3_thumb.jpg" /></a>
+<a href="http://pingus.seul.org/%7Egrumbel/tmp/md5/e5497682674d6d28322488cbdf4c17d8-elevator2.jpg"><img src="http://pingus.seul.org/%7Egrumbel/tmp/md5/bb49300321ac3f8b87dcdf32fc93b2b7-elevator2_thumb.jpg" /></a>
+<a href="http://pingus.seul.org/%7Egrumbel/tmp/md5/78772a53719fb06e13b3485cc6b81a3e-elevator3.jpg"><img src="http://pingus.seul.org/%7Egrumbel/tmp/md5/c2c2d0974c22785ffc20d5cf855260ac-elevator3_thumb.jpg" /></a>
+<a href="http://pingus.seul.org/%7Egrumbel/tmp/md5/cd6ff052619f85229a6f62d4efa49ad9-forest.jpg"><img src="http://pingus.seul.org/%7Egrumbel/tmp/md5/4ff868f99eccaf019c8bf85be829a7d8-forest_thumb.jpg" /></a>
+<a href="http://pingus.seul.org/%7Egrumbel/tmp/md5/3e8f42f5e8e15e11a56fcb0c6500915b-generator2.jpg"><img src="http://pingus.seul.org/%7Egrumbel/tmp/md5/a917354d443f7e23e7807ce097b5325d-generator2_thumb.jpg" /></a>
+<a href="http://pingus.seul.org/%7Egrumbel/tmp/md5/96ee128ba5d017f3ba5a1e46c199b35f-tunnel.jpg"><img src="http://pingus.seul.org/%7Egrumbel/tmp/md5/4b311eca4f0f5da7fde772bdacb93bae-tunnel_thumb.jpg" /></a>
+<a href="http://pingus.seul.org/%7Egrumbel/tmp/md5/d7f32bf6680ee8599c9a15663653e36d-vehicle.jpg"><img src="http://pingus.seul.org/%7Egrumbel/tmp/md5/6ef4cea35f797876d2e48ad367bf47ca-vehicle_thumb.jpg" /></a>
+<</raw>>

Modified: trunk/media/wiki/Rebirth.wiki
===================================================================
--- trunk/media/wiki/Rebirth.wiki	2009-02-18 17:03:44 UTC (rev 2514)
+++ trunk/media/wiki/Rebirth.wiki	2009-02-18 23:53:54 UTC (rev 2515)
@@ -28,6 +28,16 @@
 
 To much time was wasted on discussion about backstory and stuff and to little with things that could be turned into actual gameplay. A prototype level that demonstrates dialog and overall gameflow is therefore a priority. 
 
+== Dialog
+
+Windstille currently has a JRPG like dialog system, that presents a portrait along with text. It sort of works, but creates a very blocking experience. One of the goals of Windstille is to be as non-blocking as possible, meaning that you shouldn't be forced to click on people and then wait for the talk to finish, instead dialog should be more natural and for example be initiated by NPCs automatically. Dialog should also be focused on allow voice acting later one, which JRPG style systems are terrible at.
+
+Long story short, the new dialog system will be more like the classic LucasArts advetures, presenting color-coded text right on the screen without necesarrily block.
+
+Conversation, aka answering to dialog, is currently done by a system similar to Dreamfall, it presents a general topic choice, along with a little text for thought of the character on the topic. So basically a normal multiple choice system with a little twist. This might mostly stay as is, maybe taking a bit additional inspiration from Fahrenheit and Mass Effect.
+
+Another issue with Dialog is scripting, current dialog is heavily scripting based, for longer dialogs this is impractical, a system similar to Adonthell shall be used, i.e. an aproach based on data (s-expr files), not on script code. Scripting will be done via hooks in the data.
+
 == Editor
 
 Flexlay, while usable and working, is based on an old version of ClanLib. This isn't all that good in the long run, since it limits the GUI quite a bit. Current plan is to rewrite the [[Editor]] and make a sandbox editor based on Gtkmm, that will allow to edit the levels in engine itself.

Modified: trunk/media/wiki/default.css
===================================================================
--- trunk/media/wiki/default.css	2009-02-18 17:03:44 UTC (rev 2514)
+++ trunk/media/wiki/default.css	2009-02-18 23:53:54 UTC (rev 2515)
@@ -23,11 +23,6 @@
   clear: both;
 }
 
-#body img { 
-  float: right;
-  padding-left: 1em;
-}
-
 #footer { 
   padding: 0.5em;
   background-color: rgb(0, 0, 50);
@@ -42,8 +37,13 @@
 
 img.thumbnail { 
   border-style: none;
+  float: right;
 }
 
+a img { 
+  border-style: none;
+}
+
 #navbar { 
   clear: both;
   background-color: rgb(0, 0, 50);

Added: trunk/media/wiki/images/barkeeper.jpg
===================================================================
(Binary files differ)


Property changes on: trunk/media/wiki/images/barkeeper.jpg
___________________________________________________________________
Name: svn:mime-type
   + image/jpeg

Added: trunk/media/wiki/images/jane_portrait.png
===================================================================
(Binary files differ)


Property changes on: trunk/media/wiki/images/jane_portrait.png
___________________________________________________________________
Name: svn:mime-type
   + image/png

Added: trunk/media/wiki/images/jeff.png
===================================================================
(Binary files differ)


Property changes on: trunk/media/wiki/images/jeff.png
___________________________________________________________________
Name: svn:mime-type
   + image/png

Added: trunk/media/wiki/images/sophie_head.jpg
===================================================================
(Binary files differ)


Property changes on: trunk/media/wiki/images/sophie_head.jpg
___________________________________________________________________
Name: svn:mime-type
   + image/jpeg

Added: trunk/media/wiki/images/worker.jpg
===================================================================
(Binary files differ)


Property changes on: trunk/media/wiki/images/worker.jpg
___________________________________________________________________
Name: svn:mime-type
   + image/jpeg

Added: trunk/media/wiki/images/worker2.png
===================================================================
(Binary files differ)


Property changes on: trunk/media/wiki/images/worker2.png
___________________________________________________________________
Name: svn:mime-type
   + image/png

Added: trunk/media/wiki/images/yagor_head.png
===================================================================
(Binary files differ)


Property changes on: trunk/media/wiki/images/yagor_head.png
___________________________________________________________________
Name: svn:mime-type
   + image/png

Added: trunk/media/wiki/thumbnails/barkeeper.jpg
===================================================================
(Binary files differ)


Property changes on: trunk/media/wiki/thumbnails/barkeeper.jpg
___________________________________________________________________
Name: svn:mime-type
   + image/jpeg

Added: trunk/media/wiki/thumbnails/jane_portrait.png
===================================================================
(Binary files differ)


Property changes on: trunk/media/wiki/thumbnails/jane_portrait.png
___________________________________________________________________
Name: svn:mime-type
   + image/png

Added: trunk/media/wiki/thumbnails/jeff.png
===================================================================
(Binary files differ)


Property changes on: trunk/media/wiki/thumbnails/jeff.png
___________________________________________________________________
Name: svn:mime-type
   + image/png

Added: trunk/media/wiki/thumbnails/sophie_head.jpg
===================================================================
(Binary files differ)


Property changes on: trunk/media/wiki/thumbnails/sophie_head.jpg
___________________________________________________________________
Name: svn:mime-type
   + image/jpeg

Added: trunk/media/wiki/thumbnails/worker.jpg
===================================================================
(Binary files differ)


Property changes on: trunk/media/wiki/thumbnails/worker.jpg
___________________________________________________________________
Name: svn:mime-type
   + image/jpeg

Added: trunk/media/wiki/thumbnails/worker2.png
===================================================================
(Binary files differ)


Property changes on: trunk/media/wiki/thumbnails/worker2.png
___________________________________________________________________
Name: svn:mime-type
   + image/png

Added: trunk/media/wiki/thumbnails/yagor_head.png
===================================================================
(Binary files differ)


Property changes on: trunk/media/wiki/thumbnails/yagor_head.png
___________________________________________________________________
Name: svn:mime-type
   + image/png

Modified: trunk/media/wiki/wiki2html.py
===================================================================
--- trunk/media/wiki/wiki2html.py	2009-02-18 17:03:44 UTC (rev 2514)
+++ trunk/media/wiki/wiki2html.py	2009-02-18 23:53:54 UTC (rev 2515)
@@ -5,6 +5,8 @@
 import re
 from genshi.template import MarkupTemplate
 from genshi import XML
+from genshi import HTML
+from genshi import Stream
 import genshi.builder as bldr
 import creoleparser
 import sys
@@ -101,7 +103,7 @@
                               href="images/" + dict['src'])
 
         elif name == "raw":
-            return XML(body)
+            return HTML(body) # FIXME: Why can't we use XML()?
         
         elif name == "youtube":
             dict = parse_arg_string(arg_string)            
@@ -131,8 +133,11 @@
             if not dict.has_key('src'):
                 raise Exception("Source argument missing from <<img>>")
 
-            return bldr.tag.img(None, src="images/" + dict['src'], alt=dict['src'], title=dict['title'], class_= 'comment')
+            if dict.has_key['title']:
+                title = dict['title']
 
+            return bldr.tag.img(None, src="images/" + dict['src'], alt=dict['src'], title=title, class_= 'comment')
+
         elif name == "ind":
             body = self.creole_parser.generate(body)
             return bldr.tag.div(body, class_='indent' + arg_string[1:])



From grumbel at mail.berlios.de  Thu Feb 19 00:58:45 2009
From: grumbel at mail.berlios.de (grumbel at BerliOS)
Date: Thu, 19 Feb 2009 00:58:45 +0100
Subject: [Windstille-commit] r2516 - in trunk/media/wiki: . images thumbnails
Message-ID: <200902182358.n1INwjMM004335@sheep.berlios.de>

Author: grumbel
Date: 2009-02-19 00:58:35 +0100 (Thu, 19 Feb 2009)
New Revision: 2516

Added:
   trunk/media/wiki/images/smallshuttle.png
   trunk/media/wiki/thumbnails/smallshuttle.png
Modified:
   trunk/media/wiki/Vehicles.wiki
Log:
Added shutttle picture

Modified: trunk/media/wiki/Vehicles.wiki
===================================================================
--- trunk/media/wiki/Vehicles.wiki	2009-02-18 23:53:54 UTC (rev 2515)
+++ trunk/media/wiki/Vehicles.wiki	2009-02-18 23:58:35 UTC (rev 2516)
@@ -4,6 +4,8 @@
 
 == Shuttle
 
+<<thumbnail src="smallshuttle.png">>
+
 A small transporter that is used to bring Jane to her missions.
 
 == Trains

Added: trunk/media/wiki/images/smallshuttle.png
===================================================================
(Binary files differ)


Property changes on: trunk/media/wiki/images/smallshuttle.png
___________________________________________________________________
Name: svn:mime-type
   + image/png

Added: trunk/media/wiki/thumbnails/smallshuttle.png
===================================================================
(Binary files differ)


Property changes on: trunk/media/wiki/thumbnails/smallshuttle.png
___________________________________________________________________
Name: svn:mime-type
   + image/png



From grumbel at mail.berlios.de  Sat Feb 21 23:56:25 2009
From: grumbel at mail.berlios.de (grumbel at BerliOS)
Date: Sat, 21 Feb 2009 23:56:25 +0100
Subject: [Windstille-commit] r2517 - trunk/media/wiki
Message-ID: <200902212256.n1LMuPIV028696@sheep.berlios.de>

Author: grumbel
Date: 2009-02-21 23:56:24 +0100 (Sat, 21 Feb 2009)
New Revision: 2517

Added:
   trunk/media/wiki/Missions.wiki
Modified:
   trunk/media/wiki/PDA.wiki
   trunk/media/wiki/Particles.wiki
   trunk/media/wiki/Windstille.wiki
   trunk/media/wiki/default.css
   trunk/media/wiki/wiki2html.py
Log:
More stuff

Added: trunk/media/wiki/Missions.wiki
===================================================================

Modified: trunk/media/wiki/PDA.wiki
===================================================================
--- trunk/media/wiki/PDA.wiki	2009-02-18 23:58:35 UTC (rev 2516)
+++ trunk/media/wiki/PDA.wiki	2009-02-21 22:56:24 UTC (rev 2517)
@@ -2,7 +2,7 @@
 
 The PDA is a tool that can be used in the game to perform various functions, such as:
 
-* automaticall record dialog, so that it can be recalled later on in the game
+* automatically record dialog, so that it can be recalled later on in the game
 * record mission/quest logs
 * detailed auto-map of the environment
 

Modified: trunk/media/wiki/Particles.wiki
===================================================================
--- trunk/media/wiki/Particles.wiki	2009-02-18 23:58:35 UTC (rev 2516)
+++ trunk/media/wiki/Particles.wiki	2009-02-21 22:56:24 UTC (rev 2517)
@@ -1,14 +1,85 @@
 <<note>>
-ToDo: Document current particle systems and document possible
-shortcommings and missing features
+TODO: create some more examples such as explosins, water and stuff like that.
 <</note>>
 
-Particle systems, as currently implemented in Windstille, consists of two main sub parts, a drawer object and a distribution object. The drawer gets the particle and draws it, while the distribution is used to spawn the particles. Distributions are geometric shapes like lines, rectangles or circles.
+Particle systems, as currently implemented in Windstille, consists of two main sub parts, a drawer object and a distribution object. The drawer gets the particles position and parameter and draws it, while the distribution is used to spawn the particles. Distributions are geometric shapes like lines, rectangles or circles.
 
 == Drawer
 
+The job of the drawer object is to render the particles, it gets the position, lifetime ond other parameter of the particle and can then decide how to render it with that information. New Drawer objects can be added with relative ease.
+
+=== surface-drawer
+
+Draws a image at the position of each particle.
+
+==== (image //string//)
+
+==== (blendfunc-src //string//)
+
+==== (blendfunc-dst //string//)
+
+=== spark-drawer
+
+Draws a line from the current particle position to the position the particle had a frame earlier.
+
+==== (color //r// //g// //b// //a//)
+
+== Distribution
+
+<<note>>
+In source code Distribution is currently called Randomizer, this needs to be cleaned up.
+<</note>>
+
+The Distribution object decides at which position the next Particle should be spawned. In most cases the distribution object defines a geometric shape in which new Particles get created.
+
+=== rect-distribution
+
+=== line-distribution
+
+=== ciricle-distribution
+
+=== point-distribution
+
 == Variables
 
+==== (drawer //drawer-declaration//)
+
+drawer that draws the particle
+
+==== (distribution //distribution-declaration//)
+
+description of a distribution object from which particles spawn
+
+==== (count //count//)
+
+number of particles that can be on the screen at once
+
+==== (pos //x// //y//)
+
+position of the particle system
+
+==== (z-pos //pos//)
+
+z position, used for drawing order
+
+==== (layer //layer-name//)
+
+layer name to which the particles get drawn, can be:
+
+*  "highlight"
+* "light"
+* "color"
+
+==== (cone //start-angle// //end-angle//)
+
+direction into which particles are emitted
+
+==== (velocity //min// //max//)
+
+speed of the emitted particles
+
+
+
 == Example
 
 {{{
@@ -61,6 +132,10 @@
 ;; EOF ;;
 }}}
 
+<<note>>
+Video is from an older version, but close enough to the examples.
+<</note>>
+
 And here the example code in action:
 
 <<youtube src="q-9miRwcLwk">>

Modified: trunk/media/wiki/Windstille.wiki
===================================================================
--- trunk/media/wiki/Windstille.wiki	2009-02-18 23:58:35 UTC (rev 2516)
+++ trunk/media/wiki/Windstille.wiki	2009-02-21 22:56:24 UTC (rev 2517)
@@ -7,6 +7,7 @@
 * [[Suits]]
 * [[Vehicles]]
 * [[Locations]]
+* [[Missions]]
 
 == Engine
 

Modified: trunk/media/wiki/default.css
===================================================================
--- trunk/media/wiki/default.css	2009-02-18 23:58:35 UTC (rev 2516)
+++ trunk/media/wiki/default.css	2009-02-21 22:56:24 UTC (rev 2517)
@@ -23,6 +23,10 @@
   clear: both;
 }
 
+h3 { padding-left: 1em; }
+h4 { padding-left: 2em; }
+h5 { padding-left: 2em; }
+
 #footer { 
   padding: 0.5em;
   background-color: rgb(0, 0, 50);
@@ -141,7 +145,7 @@
   background-color: lightyellow;
 
   padding: 0.5em;
-  margin: 0 0 0 1em;
+  margin: 0.5em 0em 0.5em 1em;
 }
 
 div.comment p { 

Modified: trunk/media/wiki/wiki2html.py
===================================================================
--- trunk/media/wiki/wiki2html.py	2009-02-18 23:58:35 UTC (rev 2516)
+++ trunk/media/wiki/wiki2html.py	2009-02-21 22:56:24 UTC (rev 2517)
@@ -1,5 +1,6 @@
 #!/usr/bin/env python
 
+import traceback
 import os.path
 import codecs
 import re
@@ -40,6 +41,7 @@
              'Suits',
              'Vehicles',
              'Locations',
+             'Missions',
              'Particles',
              'Navigation Mesh',
              'Scripting',
@@ -182,6 +184,7 @@
                         f.close()
 
                 except Exception, err:
+                    traceback.print_tb(sys.exc_info()[2], 10, sys.stderr)
                     sys.stderr.write(str(err) + "\n")
 
             



From grumbel at mail.berlios.de  Sun Feb 22 17:26:18 2009
From: grumbel at mail.berlios.de (grumbel at BerliOS)
Date: Sun, 22 Feb 2009 17:26:18 +0100
Subject: [Windstille-commit] r2518 - in trunk/media/wiki: . images obsolete
Message-ID: <200902221626.n1MGQImJ003791@sheep.berlios.de>

Author: grumbel
Date: 2009-02-22 17:26:15 +0100 (Sun, 22 Feb 2009)
New Revision: 2518

Added:
   trunk/media/wiki/Planets.wiki
   trunk/media/wiki/images/actions-small.png
Modified:
   trunk/media/wiki/Actions.wiki
   trunk/media/wiki/Backstory.wiki
   trunk/media/wiki/Drawing Model.wiki
   trunk/media/wiki/Editor.wiki
   trunk/media/wiki/Missions.wiki
   trunk/media/wiki/PDA.wiki
   trunk/media/wiki/Suits.wiki
   trunk/media/wiki/TODO
   trunk/media/wiki/Windstille.wiki
   trunk/media/wiki/default.css
   trunk/media/wiki/obsolete/Collision Detection.wiki
   trunk/media/wiki/obsolete/Tile Specification Format.wiki
   trunk/media/wiki/upload.sh
   trunk/media/wiki/wiki2html.py
Log:
Misc random updates

Modified: trunk/media/wiki/Actions.wiki
===================================================================
--- trunk/media/wiki/Actions.wiki	2009-02-21 22:56:24 UTC (rev 2517)
+++ trunk/media/wiki/Actions.wiki	2009-02-22 16:26:15 UTC (rev 2518)
@@ -2,13 +2,12 @@
 Needs update
 <</note>>
 
-
-<<thumbnail src="actions.png" title="Source for this file is actions.dia">>
-
 The game has basically 3 different control modes, one is with the powersuit, one is for player without the powersuit and a seperate mode is there for the player with his weapon equiped without the powersuit.
 
 The diagram on the right shows all the actions and how they relate to each other. 
 
+<<image href="actions.png" src="actions-small.png"  title="Source for this file is actions.dia">>
+
 == Moving around without a gun / Adventure Mode
 
 Moving around without the gun puts you basically into an adventure-mode, ie. a mode where you don't spend most of your time fighting, but talking to people, exploring city, factories and stuff.

Modified: trunk/media/wiki/Backstory.wiki
===================================================================
--- trunk/media/wiki/Backstory.wiki	2009-02-21 22:56:24 UTC (rev 2517)
+++ trunk/media/wiki/Backstory.wiki	2009-02-22 16:26:15 UTC (rev 2518)
@@ -91,17 +91,3 @@
 == 2517 - The main game begins
 
 
-= Planets
-
-== Nugani
-
-A moon around a large gas giant, a cold place, but parts are keep warm through tectonic activity.
-
-== Central
-
-A central very earth like planet, lots of water, very little land.
-
-== Hoti
-
-A desert like planet close to the sun, very warm, only the poles are habitatable.
-

Modified: trunk/media/wiki/Drawing Model.wiki
===================================================================
--- trunk/media/wiki/Drawing Model.wiki	2009-02-21 22:56:24 UTC (rev 2517)
+++ trunk/media/wiki/Drawing Model.wiki	2009-02-22 16:26:15 UTC (rev 2518)
@@ -26,6 +26,10 @@
 
 == VertexArray
 
+<<note>>
+VertexArray is currently one of the main bottlenecks of Windstille, recreating it on every draw is way to expensive, an object that can be reused should be used instead.
+<</note>>
+
 Executes a drawing command for opengl primiteves. (Typically used for GL_QUAD and GL_TRIANGLE)
 
 * texture -- texture handle of the opengl texture

Modified: trunk/media/wiki/Editor.wiki
===================================================================
--- trunk/media/wiki/Editor.wiki	2009-02-21 22:56:24 UTC (rev 2517)
+++ trunk/media/wiki/Editor.wiki	2009-02-22 16:26:15 UTC (rev 2518)
@@ -1,3 +1,3 @@
 The Windstille Editor will follow a sandbox model. The engine shall be
-flexible enough that it can run inside the editor and be manipulated.
+flexible enough that it can run inside the editor and be manipulated. For this to work the engine must first be cleaned up enough so that it can be wrapped up into a GtkWidget.
 

Modified: trunk/media/wiki/Missions.wiki
===================================================================
--- trunk/media/wiki/Missions.wiki	2009-02-21 22:56:24 UTC (rev 2517)
+++ trunk/media/wiki/Missions.wiki	2009-02-22 16:26:15 UTC (rev 2518)
@@ -0,0 +1,3 @@
+The main city will mostly acts as a hub to aquire new missions or quests, while mines, caves and other locations outside the city will be where the actual missions take place.
+
+ 

Modified: trunk/media/wiki/PDA.wiki
===================================================================
--- trunk/media/wiki/PDA.wiki	2009-02-21 22:56:24 UTC (rev 2517)
+++ trunk/media/wiki/PDA.wiki	2009-02-22 16:26:15 UTC (rev 2518)
@@ -9,3 +9,14 @@
 When not in use the PDA should be in small form at the edge of the screen to provide a little automap, when activated it should pop-up and fill half the screen, while the player is visible on the other side, the game should continue to run when the PDA is activated. 
 
 The PDA shall also act as communicator to call remote characters, the shuttle, the base or other services. 
+
+== Dialog Log
+
+== Communication/Phone
+
+== Quest Log
+
+== Automap
+
+== Library
+

Added: trunk/media/wiki/Planets.wiki
===================================================================
--- trunk/media/wiki/Planets.wiki	2009-02-21 22:56:24 UTC (rev 2517)
+++ trunk/media/wiki/Planets.wiki	2009-02-22 16:26:15 UTC (rev 2518)
@@ -0,0 +1,11 @@
+== Nugani
+
+A moon around a large gas giant, a cold place, but parts are keep warm through tectonic activity.
+
+== Central
+
+A central very earth like planet, lots of water, very little land.
+
+== Hoti
+
+A desert like planet close to the sun, very warm, only the poles are habitatable.

Modified: trunk/media/wiki/Suits.wiki
===================================================================
--- trunk/media/wiki/Suits.wiki	2009-02-21 22:56:24 UTC (rev 2517)
+++ trunk/media/wiki/Suits.wiki	2009-02-22 16:26:15 UTC (rev 2518)
@@ -1,3 +1,5 @@
+Different missions might require different special suits. When walking around the city normal clothes will be worn, when doing mine exploration the **Powersuit** will mainly be used. Deep sea exploration will use a **Deepsea Suit**. The **Environmental Suit** might be used in non hostile situations where there simply is a lack of oxygen in the air.
+
 == Powersuit
 
 <<thumbnail src="powersuit.jpg">>
@@ -2,3 +4,3 @@
 
-A powered suit that is used in exploration missions and for fighting.
+A powered suit that is used in exploration missions and for combat. It is armored.
 

Modified: trunk/media/wiki/TODO
===================================================================
--- trunk/media/wiki/TODO	2009-02-21 22:56:24 UTC (rev 2517)
+++ trunk/media/wiki/TODO	2009-02-22 16:26:15 UTC (rev 2518)
@@ -1,5 +1,9 @@
-http://creoleparser.googlepages.com/CheatSheetPlus.html
+- http://creoleparser.googlepages.com/CheatSheetPlus.html
 
-Add prev/next and chapter jumps to the .html generator
+- Add a 'last updated' time to the pages, take it from "svn info"
 
-Add a 'last updated' time to the pages, take it from "svn info"
\ No newline at end of file
+- W3C clean would be nifty
+
+Notes:
+------
+- mime type for jpegs on berlios in broken, is text/plain instead of image/jpeg, worked around with .htdocs/

Modified: trunk/media/wiki/Windstille.wiki
===================================================================
--- trunk/media/wiki/Windstille.wiki	2009-02-21 22:56:24 UTC (rev 2517)
+++ trunk/media/wiki/Windstille.wiki	2009-02-22 16:26:15 UTC (rev 2518)
@@ -6,11 +6,13 @@
 * [[Characters]]
 * [[Suits]]
 * [[Vehicles]]
+* [[Planets]]
 * [[Locations]]
 * [[Missions]]
 
 == Engine
 
+
 * [[Particles]]
 * [[Navigation Mesh]]
 * [[Scripting]]

Modified: trunk/media/wiki/default.css
===================================================================
--- trunk/media/wiki/default.css	2009-02-21 22:56:24 UTC (rev 2517)
+++ trunk/media/wiki/default.css	2009-02-22 16:26:15 UTC (rev 2518)
@@ -39,6 +39,12 @@
   color: cyan;
 }
 
+img.image { 
+  display: block;
+  margin-left:  auto;
+  margin-right: auto;
+}
+
 img.thumbnail { 
   border-style: none;
   float: right;
@@ -91,8 +97,8 @@
   width: 100%;
 }
 
-div.youtube { 
-  width: 100%;
+object.youtube { 
+  display: block;
   margin-left:  auto;
   margin-right: auto;
 }

Added: trunk/media/wiki/images/actions-small.png
===================================================================
(Binary files differ)


Property changes on: trunk/media/wiki/images/actions-small.png
___________________________________________________________________
Name: svn:mime-type
   + image/png

Modified: trunk/media/wiki/obsolete/Collision Detection.wiki
===================================================================
--- trunk/media/wiki/obsolete/Collision Detection.wiki	2009-02-21 22:56:24 UTC (rev 2517)
+++ trunk/media/wiki/obsolete/Collision Detection.wiki	2009-02-22 16:26:15 UTC (rev 2518)
@@ -25,6 +25,7 @@
 
 Once a collision occured the engine should give the object usefull feedback for resolving the collision, the engine should *not* resolve collisions on its own. The engine should instead move the object as close to the other object as possible and then call the callback:
 
+{{{
  CollisionObject::collision(CollisionEvent& collision);
 
  struct CollisionEvent
@@ -41,6 +42,7 @@
   // the amount of time that has not yet been used up
   float rest_delta;
  };
+}}}
 
 Collision resolution could then either mean to change the direction, to simply halt or to attach oneself to the other object (ie. that is how moving platforms should find the player).
 

Modified: trunk/media/wiki/obsolete/Tile Specification Format.wiki
===================================================================
--- trunk/media/wiki/obsolete/Tile Specification Format.wiki	2009-02-21 22:56:24 UTC (rev 2517)
+++ trunk/media/wiki/obsolete/Tile Specification Format.wiki	2009-02-22 16:26:15 UTC (rev 2518)
@@ -11,6 +11,7 @@
  
 Below is what we currently have, more or less, its far from final.
 
+{{{
  (windstille-tiles
    ;; Tile-Groups group different tiles together, this is used in
    ;; the editor, so that tiles can be selected by topic
@@ -44,4 +45,5 @@
      (id 13)
      (sprite "images/tile13.sprite")
      (colmap 0))
-  )
\ No newline at end of file
+  )
+}}}
\ No newline at end of file

Modified: trunk/media/wiki/upload.sh
===================================================================
--- trunk/media/wiki/upload.sh	2009-02-21 22:56:24 UTC (rev 2517)
+++ trunk/media/wiki/upload.sh	2009-02-22 16:26:15 UTC (rev 2518)
@@ -1,5 +1,5 @@
 #!/bin/sh
 
-rsync -vrPLtC  build/ grumbel at shell.berlios.de:/home/groups/windstille/htdocs/wikinew
+rsync -vrPLtC  build/ grumbel at shell.berlios.de:/home/groups/windstille/htdocs/wiki
 
 # EOF #

Modified: trunk/media/wiki/wiki2html.py
===================================================================
--- trunk/media/wiki/wiki2html.py	2009-02-21 22:56:24 UTC (rev 2517)
+++ trunk/media/wiki/wiki2html.py	2009-02-22 16:26:15 UTC (rev 2518)
@@ -40,6 +40,7 @@
              'Characters',
              'Suits',
              'Vehicles',
+             'Planets',
              'Locations',
              'Missions',
              'Particles',
@@ -83,8 +84,11 @@
             return bldr.tag.div(body, class_= 'comment')
 
         elif name == "note":
-            body = self.creole_parser.generate(body)
-            return bldr.tag.div(body, class_='note')
+            if body:
+                body = self.creole_parser.generate(body)
+                return bldr.tag.div(body, class_='note')
+            else:
+                return None
 
         elif name == "thumbnail":
             dict = parse_arg_string(arg_string)
@@ -113,32 +117,40 @@
             # autoplay=1 - starts video automatically
             # rel=0      - removes the related video menu at the end
             # ap=%2526fmt%3D18 - highquality 
-            return bldr.tag.center(
-                bldr.tag.object(
-                    bldr.tag.param(None, 
-                                   name="movie",
-                                   value="http://www.youtube.com/v/%s&hl=en&fs=1&rel=0&loop=1&ap=%%2526fmt%%3D18" % dict['src']) +
-                    bldr.tag.param(None, name="allowFullScreen",   value="true") +
-                    bldr.tag.param(None, name="allowscriptaccess", value="always") +
-                    bldr.tag.embed(None, 
-                                   src="http://www.youtube.com/v/%s&hl=en&fs=1&rel=0&loop=1&ap=%%2526fmt%%3D18" % dict['src'],
-                                   type="application/x-shockwave-flash",
-                                   allowscriptaccess="always",
-                                   allowfullscreen="true",
-                                   width="425",
-                                   height="344"),
-                    width="425", height="344"),
+            return bldr.tag.object(
+                bldr.tag.param(None, 
+                               name="movie",
+                               value="http://www.youtube.com/v/%s&hl=en&fs=1&rel=0&loop=1&ap=%%2526fmt%%3D18" % dict['src']) +
+                bldr.tag.param(None, name="allowFullScreen",   value="true") +
+                bldr.tag.param(None, name="allowscriptaccess", value="always") +
+                bldr.tag.embed(None, 
+                               src="http://www.youtube.com/v/%s&hl=en&fs=1&rel=0&loop=1&ap=%%2526fmt%%3D18" % dict['src'],
+                               type="application/x-shockwave-flash",
+                               allowscriptaccess="always",
+                               allowfullscreen="true",
+                               width="425",
+                               height="344"),
+                width="425", height="344",
                 class_="youtube")
 
-        elif name == "img":
+        elif name == "image":
             dict = parse_arg_string(arg_string)
+
             if not dict.has_key('src'):
                 raise Exception("Source argument missing from <<img>>")
 
-            if dict.has_key['title']:
+            if dict.has_key('title'):
                 title = dict['title']
 
-            return bldr.tag.img(None, src="images/" + dict['src'], alt=dict['src'], title=title, class_= 'comment')
+            if dict.has_key('href'):
+                return bldr.tag.a(bldr.tag.img(None, 
+                                               src="images/" + dict['src'],
+                                               alt=dict['src'], 
+                                               title=title, 
+                                               class_= 'image'),
+                                  href="images/" + dict['href'])
+            else:
+                return bldr.tag.img(None, src="images/" + dict['src'], alt=dict['src'], title=title, class_= 'image')
 
         elif name == "ind":
             body = self.creole_parser.generate(body)
@@ -161,20 +173,20 @@
                 args = args[2:]
 
                 self.creole_parser = creoleparser.Parser(dialect=creoleparser.Creole10(
-                    wiki_links_base_url   = '',
-                    wiki_links_path_func  = lambda pagename: pagename + ".html",
-                    wiki_links_space_char = ' ',
-                    # no_wiki_monospace   = True,
-                    use_additions         = True,
-                    macro_func            = self.macro_func,
-                    interwiki_links_funcs={'Talk' : self.talk_links_funcs }
-                    ))
+                        wiki_links_base_url   = '',
+                        wiki_links_path_func  = lambda pagename: pagename + ".html",
+                        wiki_links_space_char = ' ',
+                        # no_wiki_monospace   = True,
+                        use_additions         = True,
+                        macro_func            = self.macro_func,
+                        interwiki_links_funcs={'Talk' : self.talk_links_funcs }
+                        ))
 
                 try:
                     for filename in args:
                         tmpl = MarkupTemplate(file2string("template.xml"))
                         text = tmpl.generate(next = find_next_page(os.path.basename(filename)[:-5]),
-                        prev = find_prev_page(os.path.basename(filename)[:-5]),
+                                             prev = find_prev_page(os.path.basename(filename)[:-5]),
                                              thispage = os.path.basename(filename),
                                              body = self.creole_parser.generate(file2string(filename)),
                                              title = filename.replace(".wiki", "")).render(method='xhtml', 



From grumbel at mail.berlios.de  Sun Feb 22 18:14:26 2009
From: grumbel at mail.berlios.de (grumbel at BerliOS)
Date: Sun, 22 Feb 2009 18:14:26 +0100
Subject: [Windstille-commit] r2519 - trunk/media/wiki
Message-ID: <200902221714.n1MHEQ9d009598@sheep.berlios.de>

Author: grumbel
Date: 2009-02-22 18:14:26 +0100 (Sun, 22 Feb 2009)
New Revision: 2519

Added:
   trunk/media/wiki/Coding style.wiki
Modified:
   trunk/media/wiki/About.wiki
   trunk/media/wiki/Rebirth.wiki
   trunk/media/wiki/Windstille.wiki
   trunk/media/wiki/default.css
   trunk/media/wiki/wiki2html.py
Log:
Some more random updates

Modified: trunk/media/wiki/About.wiki
===================================================================
--- trunk/media/wiki/About.wiki	2009-02-22 16:26:15 UTC (rev 2518)
+++ trunk/media/wiki/About.wiki	2009-02-22 17:14:26 UTC (rev 2519)
@@ -6,10 +6,15 @@
 
 * http://svn.berlios.de/viewvc/windstille/trunk/media/wiki/
 
-Feel free to send patches to:
+Feel free to send patches to either of these:
 
-* [[mailto:grumbel at gmx.de | Ingo Ruhnke <grumbel at gmx.de>]].
+* [[mailto:grumbel at gmx.de | Ingo Ruhnke <grumbel at gmx.de>]]
+* [[https://lists.berlios.de/pipermail/windstille-devel/ | Windstille Developer Mailing List]] (subscribers-only)
 
+A IRC channel is available at:
+
+* irc.freenode.net, #windstille
+
 The Windstille Project page itself is located at:
 
 * http://windstille.berlios.de/

Copied: trunk/media/wiki/Coding style.wiki (from rev 2263, trunk/media/wiki/Coding style.wiki)
===================================================================
--- trunk/media/wiki/Coding style.wiki	2008-05-27 03:54:19 UTC (rev 2263)
+++ trunk/media/wiki/Coding style.wiki	2009-02-22 17:14:26 UTC (rev 2519)
@@ -0,0 +1,50 @@
+Windstille uses mostly standard GNU indention style, which is the default in Emacs:
+
+{{{
+void
+ClassName::function_name (float delta)
+{
+  value -= 10*delta;
+  
+  std::list<Player*>* lst = get_world ()->get_players ();
+
+  for (std::list<Player*>::iterator i = lst->begin (); i != lst->end (); ++i)
+    {
+      if (fabs((pos - (*i)->get_pos ()).norm ()) < 20.0f)
+        {
+          player_catched(*i);
+          remove();
+        }
+    }
+}
+}}}
+
+The few exceptions are:
+
+* return type is on its own line
+* namespaces aren't indented
+* case lables are intended
+* no space between parenthisis an function call (i.e. foobar() not foobar ())
+
+These can be achived with:
+
+{{{
+(setq indent-tabs-mode nil)
+(setq parens-require-spaces nil)
+(setq c-offsets-alist '((innamespace   . 0)
+                        (inline-open   . 0)
+                        (inline-close  . 0)
+                        (case-label    . 2)
+                        (inextern-lang . 0)))
+}}}
+
+The whole indention thing can be fixed with a keypress in Emacs, so don't bother to much trying to get it correct manually. If you work on something on your own, use whatever style works for you.
+
+Some notes about nameing convention:
+
+* classes are CamelCase (i.e. DrawingManager)
+* functions are lowercase (i.e. set_foobar(5))
+* variables are lowercase (i.e. player_position)
+* files are named after the class they contain, but lowercased (i.e. drawing_manager.hpp for DrawingManager)
+* include guards defines are HEADER_WINDSTILLE_//DIRECTORY//_//FILENAME//
+

Modified: trunk/media/wiki/Rebirth.wiki
===================================================================
--- trunk/media/wiki/Rebirth.wiki	2009-02-22 16:26:15 UTC (rev 2518)
+++ trunk/media/wiki/Rebirth.wiki	2009-02-22 17:14:26 UTC (rev 2519)
@@ -6,6 +6,8 @@
 
 While Wikis are nice for some things, they can easily clog up with way to much redundant garbage if they aren't maintained properly. The user editability also leads to plenty of pointles discussion. To cut the noise down, to make it easier to reorganize things, to make it easier backup things and to make things less maintainance intensive, the Wiki got moved into SVN and is now generated offline.
 
+If people want to discuss the content of the Wiki they shall use the [[About | mailing list]] or [[About | IRC]].
+
 == Tilemaps
 
 While tilemaps are a classic building block of 2D games, they just didn't work out for what I had in mind. There is to much flexibility that is lost due to them and there are quite a few things that are made much harder, like slopes, AI reactions to the environment, etc.

Modified: trunk/media/wiki/Windstille.wiki
===================================================================
--- trunk/media/wiki/Windstille.wiki	2009-02-22 16:26:15 UTC (rev 2518)
+++ trunk/media/wiki/Windstille.wiki	2009-02-22 17:14:26 UTC (rev 2519)
@@ -12,7 +12,7 @@
 
 == Engine
 
-
+* [[Coding style]]
 * [[Particles]]
 * [[Navigation Mesh]]
 * [[Scripting]]

Modified: trunk/media/wiki/default.css
===================================================================
--- trunk/media/wiki/default.css	2009-02-22 16:26:15 UTC (rev 2518)
+++ trunk/media/wiki/default.css	2009-02-22 17:14:26 UTC (rev 2519)
@@ -110,7 +110,7 @@
   border-color: rgb(150, 150, 150);
   background: rgb(220, 220, 220);
   white-space: pre;
-
+  line-height: 120%;
   margin-left: 1em;
   margin-right: 1em;
 }

Modified: trunk/media/wiki/wiki2html.py
===================================================================
--- trunk/media/wiki/wiki2html.py	2009-02-22 16:26:15 UTC (rev 2518)
+++ trunk/media/wiki/wiki2html.py	2009-02-22 17:14:26 UTC (rev 2519)
@@ -43,6 +43,7 @@
              'Planets',
              'Locations',
              'Missions',
+             'Coding style',
              'Particles',
              'Navigation Mesh',
              'Scripting',



From grumbel at mail.berlios.de  Sun Feb 22 18:33:36 2009
From: grumbel at mail.berlios.de (grumbel at BerliOS)
Date: Sun, 22 Feb 2009 18:33:36 +0100
Subject: [Windstille-commit] r2520 - trunk/media/wiki
Message-ID: <200902221733.n1MHXaeF014031@sheep.berlios.de>

Author: grumbel
Date: 2009-02-22 18:33:33 +0100 (Sun, 22 Feb 2009)
New Revision: 2520

Modified:
   trunk/media/wiki/About.wiki
Log:
Added SVN link

Modified: trunk/media/wiki/About.wiki
===================================================================
--- trunk/media/wiki/About.wiki	2009-02-22 17:14:26 UTC (rev 2519)
+++ trunk/media/wiki/About.wiki	2009-02-22 17:33:33 UTC (rev 2520)
@@ -1,4 +1,4 @@
-This is the Windstille Development Wiki, it isn't editable by the general public. Its is stored in SVN and only writable by developers, you can check it out via:
+This is the Windstille Development Wiki, it isn't editable by the general public. Its is stored in [[http://subversion.tigris.org/ | SVN]] and only writable by developers, you can check it out via:
 
 * svn co http://svn.berlios.de/svnroot/repos/windstille/trunk/media/wiki
 



From grumbel at mail.berlios.de  Sun Feb 22 19:35:25 2009
From: grumbel at mail.berlios.de (grumbel at BerliOS)
Date: Sun, 22 Feb 2009 19:35:25 +0100
Subject: [Windstille-commit] r2521 - trunk/media/wiki
Message-ID: <200902221835.n1MIZPVw002104@sheep.berlios.de>

Author: grumbel
Date: 2009-02-22 19:35:23 +0100 (Sun, 22 Feb 2009)
New Revision: 2521

Modified:
   trunk/media/wiki/wiki2html.py
Log:
Init variable properly

Modified: trunk/media/wiki/wiki2html.py
===================================================================
--- trunk/media/wiki/wiki2html.py	2009-02-22 17:33:33 UTC (rev 2520)
+++ trunk/media/wiki/wiki2html.py	2009-02-22 18:35:23 UTC (rev 2521)
@@ -140,6 +140,7 @@
             if not dict.has_key('src'):
                 raise Exception("Source argument missing from <<img>>")
 
+            title = None
             if dict.has_key('title'):
                 title = dict['title']
 



From grumbel at mail.berlios.de  Sun Feb 22 19:35:50 2009
From: grumbel at mail.berlios.de (grumbel at BerliOS)
Date: Sun, 22 Feb 2009 19:35:50 +0100
Subject: [Windstille-commit] r2522 - in trunk/media/wiki: . images thumbnails
Message-ID: <200902221835.n1MIZopE002191@sheep.berlios.de>

Author: grumbel
Date: 2009-02-22 19:35:47 +0100 (Sun, 22 Feb 2009)
New Revision: 2522

Added:
   trunk/media/wiki/images/planet_central.jpg
   trunk/media/wiki/images/planet_ensani.jpg
   trunk/media/wiki/images/planet_hoti.jpg
   trunk/media/wiki/thumbnails/planet_central.jpg
   trunk/media/wiki/thumbnails/planet_ensani.jpg
   trunk/media/wiki/thumbnails/planet_hoti.jpg
Modified:
   trunk/media/wiki/Planets.wiki
Log:
Added some infos on the planets

Modified: trunk/media/wiki/Planets.wiki
===================================================================
--- trunk/media/wiki/Planets.wiki	2009-02-22 18:35:23 UTC (rev 2521)
+++ trunk/media/wiki/Planets.wiki	2009-02-22 18:35:47 UTC (rev 2522)
@@ -1,11 +1,30 @@
+Windstille takes place in a planetary system some lightyears away from earth. The system contains three habitable planets along with numerous moons and other planets.
+
+== Ensani
+
+<<thumbnail src="planet_ensani.jpg">>
+
+A huge gas giant around which circle numerous smaller moons, one of which Nugani, which is habitable. It also has Saturn like rings around it.
+
+Balloon stations exist in the upper athmosphere of Ensani and provide room for a few thousands collonist.
+
 == Nugani
 
-A moon around a large gas giant, a cold place, but parts are keep warm through tectonic activity.
+A moon around the large gas Ensani, a relativly cold place, kept warm mostly through tidal heating, which in turn is the cause of plenty of earth quakes and other geological activity. It is inhabited by the second wave of collonist that didn't make it to Central.
 
+This is the moon where the game starts and most of the game will take place.
+
 == Central
 
-A central very earth like planet, lots of water, very little land.
+<<thumbnail src="planet_central.jpg">>
 
+A central very earth like planet, lots of water, very little land. Rich on natural resources. 
+
+The first wave of collonist landet here and has since then kept a tight grip on the planet, not allowing anybody of the second wave to settle here.
+
 == Hoti
 
-A desert like planet close to the sun, very warm, only the poles are habitatable.
+<<thumbnail src="planet_hoti.jpg">>
+
+A desert planet close to the sun. It features a very hot climate, which makes the pools the most attractive place to build habitates. A few collonist from the second wave settled down here.
+

Added: trunk/media/wiki/images/planet_central.jpg
===================================================================
(Binary files differ)


Property changes on: trunk/media/wiki/images/planet_central.jpg
___________________________________________________________________
Name: svn:mime-type
   + image/jpeg

Added: trunk/media/wiki/images/planet_ensani.jpg
===================================================================
(Binary files differ)


Property changes on: trunk/media/wiki/images/planet_ensani.jpg
___________________________________________________________________
Name: svn:mime-type
   + image/jpeg

Added: trunk/media/wiki/images/planet_hoti.jpg
===================================================================
(Binary files differ)


Property changes on: trunk/media/wiki/images/planet_hoti.jpg
___________________________________________________________________
Name: svn:mime-type
   + image/jpeg

Added: trunk/media/wiki/thumbnails/planet_central.jpg
===================================================================
(Binary files differ)


Property changes on: trunk/media/wiki/thumbnails/planet_central.jpg
___________________________________________________________________
Name: svn:mime-type
   + image/jpeg

Added: trunk/media/wiki/thumbnails/planet_ensani.jpg
===================================================================
(Binary files differ)


Property changes on: trunk/media/wiki/thumbnails/planet_ensani.jpg
___________________________________________________________________
Name: svn:mime-type
   + image/jpeg

Added: trunk/media/wiki/thumbnails/planet_hoti.jpg
===================================================================
(Binary files differ)


Property changes on: trunk/media/wiki/thumbnails/planet_hoti.jpg
___________________________________________________________________
Name: svn:mime-type
   + image/jpeg



From grumbel at mail.berlios.de  Sun Feb 22 19:45:47 2009
From: grumbel at mail.berlios.de (grumbel at BerliOS)
Date: Sun, 22 Feb 2009 19:45:47 +0100
Subject: [Windstille-commit] r2523 - trunk/media/images/locations
Message-ID: <200902221845.n1MIjlr4003250@sheep.berlios.de>

Author: grumbel
Date: 2009-02-22 19:35:30 +0100 (Sun, 22 Feb 2009)
New Revision: 2523

Added:
   trunk/media/images/locations/cliff.xcf
   trunk/media/images/locations/elevator3.xcf
   trunk/media/images/locations/generator2.xcf
   trunk/media/images/locations/planet_central.xcf
   trunk/media/images/locations/planet_ensani.xcf
   trunk/media/images/locations/planet_hoti.xcf
   trunk/media/images/locations/vehicle.xcf
Modified:
   trunk/media/images/locations/elevator2.xcf
Log:
Some more graphics

Added: trunk/media/images/locations/cliff.xcf
===================================================================
(Binary files differ)


Property changes on: trunk/media/images/locations/cliff.xcf
___________________________________________________________________
Name: svn:mime-type
   + application/x-xcf

Modified: trunk/media/images/locations/elevator2.xcf
===================================================================
(Binary files differ)

Added: trunk/media/images/locations/elevator3.xcf
===================================================================
(Binary files differ)


Property changes on: trunk/media/images/locations/elevator3.xcf
___________________________________________________________________
Name: svn:mime-type
   + application/x-xcf

Added: trunk/media/images/locations/generator2.xcf
===================================================================
(Binary files differ)


Property changes on: trunk/media/images/locations/generator2.xcf
___________________________________________________________________
Name: svn:mime-type
   + application/x-xcf

Added: trunk/media/images/locations/planet_central.xcf
===================================================================
(Binary files differ)


Property changes on: trunk/media/images/locations/planet_central.xcf
___________________________________________________________________
Name: svn:mime-type
   + application/x-xcf

Added: trunk/media/images/locations/planet_ensani.xcf
===================================================================
(Binary files differ)


Property changes on: trunk/media/images/locations/planet_ensani.xcf
___________________________________________________________________
Name: svn:mime-type
   + application/x-xcf

Added: trunk/media/images/locations/planet_hoti.xcf
===================================================================
(Binary files differ)


Property changes on: trunk/media/images/locations/planet_hoti.xcf
___________________________________________________________________
Name: svn:mime-type
   + application/x-xcf

Added: trunk/media/images/locations/vehicle.xcf
===================================================================
(Binary files differ)


Property changes on: trunk/media/images/locations/vehicle.xcf
___________________________________________________________________
Name: svn:mime-type
   + application/x-xcf



From grumbel at mail.berlios.de  Sun Feb 22 21:02:23 2009
From: grumbel at mail.berlios.de (grumbel at BerliOS)
Date: Sun, 22 Feb 2009 21:02:23 +0100
Subject: [Windstille-commit] r2524 - trunk/media/wiki
Message-ID: <200902222002.n1MK2NQq009434@sheep.berlios.de>

Author: grumbel
Date: 2009-02-22 21:02:22 +0100 (Sun, 22 Feb 2009)
New Revision: 2524

Modified:
   trunk/media/wiki/Coding style.wiki
   trunk/media/wiki/News.wiki
Log:
Random stuff

Modified: trunk/media/wiki/Coding style.wiki
===================================================================
--- trunk/media/wiki/Coding style.wiki	2009-02-22 18:35:30 UTC (rev 2523)
+++ trunk/media/wiki/Coding style.wiki	2009-02-22 20:02:22 UTC (rev 2524)
@@ -23,7 +23,7 @@
 
 * return type is on its own line
 * namespaces aren't indented
-* case lables are intended
+* case lables are indented
 * no space between parenthisis an function call (i.e. foobar() not foobar ())
 
 These can be achived with:
@@ -38,7 +38,7 @@
                         (inextern-lang . 0)))
 }}}
 
-The whole indention thing can be fixed with a keypress in Emacs, so don't bother to much trying to get it correct manually. If you work on something on your own, use whatever style works for you.
+The whole indention thing can be fixed with a keypress in Emacs, so one shouldn't bother to much with trying to get it correct manually. Instead one should simply use the style that makes one most productive and if needed fix it up later.
 
 Some notes about nameing convention:
 

Modified: trunk/media/wiki/News.wiki
===================================================================
--- trunk/media/wiki/News.wiki	2009-02-22 18:35:30 UTC (rev 2523)
+++ trunk/media/wiki/News.wiki	2009-02-22 20:02:22 UTC (rev 2524)
@@ -1,3 +1,6 @@
+2009-02-22
+* Back in action, the new Wiki went live
+
 2008-05-08
 * Windstille rebirth is in progress
 * Wiki content is moved into SVN and build by custom scripts with help of creoleparser



From grumbel at mail.berlios.de  Sun Feb 22 22:51:17 2009
From: grumbel at mail.berlios.de (grumbel at BerliOS)
Date: Sun, 22 Feb 2009 22:51:17 +0100
Subject: [Windstille-commit] r2525 - trunk/media/wiki
Message-ID: <200902222151.n1MLpH3W019653@sheep.berlios.de>

Author: grumbel
Date: 2009-02-22 22:51:17 +0100 (Sun, 22 Feb 2009)
New Revision: 2525

Added:
   trunk/media/wiki/Controls.wiki
Modified:
   trunk/media/wiki/Coding style.wiki
   trunk/media/wiki/Missions.wiki
   trunk/media/wiki/Particles.wiki
   trunk/media/wiki/Rebirth.wiki
   trunk/media/wiki/Scripting.wiki
   trunk/media/wiki/Windstille.wiki
   trunk/media/wiki/default.css
   trunk/media/wiki/template.xml
   trunk/media/wiki/upload.sh
   trunk/media/wiki/wiki2html.py
Log:
Code cleanup for the validator

Modified: trunk/media/wiki/Coding style.wiki
===================================================================
--- trunk/media/wiki/Coding style.wiki	2009-02-22 20:02:22 UTC (rev 2524)
+++ trunk/media/wiki/Coding style.wiki	2009-02-22 21:51:17 UTC (rev 2525)
@@ -48,3 +48,11 @@
 * files are named after the class they contain, but lowercased (i.e. drawing_manager.hpp for DrawingManager)
 * include guards defines are HEADER_WINDSTILLE_//DIRECTORY//_//FILENAME//
 
+== Other things
+
+* external libraries go to {{{external/}}} not into the {{{src/}}} directory
+* could that can be reused by other projects (lisp, tinygettext, ...) shall be moved to {{{external/}}}
+* complex hacks on external libraries are not allowed unless absolutely necessarry and well documented
+* each testable sub-module shall have test cases and  examples
+* all interactive sub-modules shall have a visual demonstration reachable from the normal in-game menu
+* no code unreachable by either test cases, visual demonstration or test level shall enter the repository

Added: trunk/media/wiki/Controls.wiki
===================================================================
--- trunk/media/wiki/Controls.wiki	2009-02-22 20:02:22 UTC (rev 2524)
+++ trunk/media/wiki/Controls.wiki	2009-02-22 21:51:17 UTC (rev 2525)
@@ -0,0 +1,14 @@
+The game will be designed around a current day dual analog gamepad such as can be found on the Playstation 3 or the Xbox360. This means:
+
+* four face buttons (run, jump, use)
+* two trigger buttons
+* two analog trigger trigger (gun)
+* start/select buttons (menu, pda)
+* two analog sticks
+* directional pad
+* rumble support
+
+
+
+
+

Modified: trunk/media/wiki/Missions.wiki
===================================================================
--- trunk/media/wiki/Missions.wiki	2009-02-22 20:02:22 UTC (rev 2524)
+++ trunk/media/wiki/Missions.wiki	2009-02-22 21:51:17 UTC (rev 2525)
@@ -1,3 +1,3 @@
 The main city will mostly acts as a hub to aquire new missions or quests, while mines, caves and other locations outside the city will be where the actual missions take place.
 
- 
+There will also some missions that play directly in the city or across multiple places.

Modified: trunk/media/wiki/Particles.wiki
===================================================================
--- trunk/media/wiki/Particles.wiki	2009-02-22 20:02:22 UTC (rev 2524)
+++ trunk/media/wiki/Particles.wiki	2009-02-22 21:51:17 UTC (rev 2525)
@@ -132,12 +132,8 @@
 ;; EOF ;;
 }}}
 
-<<note>>
-Video is from an older version, but close enough to the examples.
-<</note>>
+And here an older version of the example code in action:
 
-And here the example code in action:
-
 <<youtube src="q-9miRwcLwk">>
  
 == Other Particle Engines

Modified: trunk/media/wiki/Rebirth.wiki
===================================================================
--- trunk/media/wiki/Rebirth.wiki	2009-02-22 20:02:22 UTC (rev 2524)
+++ trunk/media/wiki/Rebirth.wiki	2009-02-22 21:51:17 UTC (rev 2525)
@@ -1,6 +1,8 @@
-<<note>>The following text is written by Grumbel.<</note>>
+<<note>>
+The following text is written by Grumbel.
+<</note>>
 
-Time to document a few things that went wrong in the past and how I intend to fix them.
+Windstille has been in development for a long long time. However not all things went smoothly, so development died down more then a few times. So time to document a few things that went wrong in the past and how I intend to fix them.
 
 == Wiki
 
@@ -58,3 +60,7 @@
 The shooting test shall demonstrate the shooting, the aiming with
 laser pointer, as well as flamethrower action.
 
+= Moving the goalpost
+
+Windstille as shifted targets quite often, so its time to get things documented properly and tested properly in prototypes, so that the actual game can improve on a more constant basis, instead of randomly jump from one half finished tasks to another half finished one and thus end in an unfinished mess.
+

Modified: trunk/media/wiki/Scripting.wiki
===================================================================
--- trunk/media/wiki/Scripting.wiki	2009-02-22 20:02:22 UTC (rev 2524)
+++ trunk/media/wiki/Scripting.wiki	2009-02-22 21:51:17 UTC (rev 2525)
@@ -4,7 +4,7 @@
 
 Windstille uses [[http://www.squirrel-lang.org/|Squirrel]] for scripting. The full source code of squirrel is included within the "squirrel" subdirectory of Windstille's source, and it is automatically built into the game.
 
-C++ functions are exposed to scripts via the interface in the "scripting" sub directory". Miniswig, found in the "tools/miniswig" subdirectory, is a tool that creates wrapper functions to allow the interface functions to be called from squirrel. If you have bison and flex installed then miniswig will be built automatically, and any changes you make to the scripting interface will automatically be added to the wrapper functions when you execute jam.
+C++ functions are exposed to scripts via the interface in the {{{scripting/}}} sub directory". Miniswig, found in the "tools/miniswig" subdirectory, is a tool that creates wrapper functions to allow the interface functions to be called from squirrel. If you have bison and flex installed then miniswig will be built automatically, and any changes you make to the scripting interface will automatically be added to the wrapper functions when you execute jam.
 
 Each sector/level is stored in an sexpr based .wst file. This contains tilemap layout, trigger locations (doors etc), spawn locations of bad guys, NPCs and the player character, as well as various other things. At some point thse will be editable using the [[http://flexlay.berlios.de/|Flexlay]] tile/level editor, though this doesn't work correctly at the moment.
 

Modified: trunk/media/wiki/Windstille.wiki
===================================================================
--- trunk/media/wiki/Windstille.wiki	2009-02-22 20:02:22 UTC (rev 2524)
+++ trunk/media/wiki/Windstille.wiki	2009-02-22 21:51:17 UTC (rev 2525)
@@ -22,6 +22,7 @@
 
 == Game Mechanics
 
+* [[Controls]]
 * [[Actions]]
 * [[PDA]]
 * [[Weapons]]

Modified: trunk/media/wiki/default.css
===================================================================
--- trunk/media/wiki/default.css	2009-02-22 20:02:22 UTC (rev 2524)
+++ trunk/media/wiki/default.css	2009-02-22 21:51:17 UTC (rev 2525)
@@ -14,7 +14,7 @@
 
   padding: 0.2em 3em 1em 3em;
   background: white; 
-
+  color:      black;
 /*  margin-left: 1em;  */
 /*  margin-right: 1em; */
 }
@@ -30,13 +30,13 @@
 #footer { 
   padding: 0.5em;
   background-color: rgb(0, 0, 50);
-  color: lightgrey;
+  color: #D3D3D3;
   text-align: center;
   font-size: small;
 }
 
 #footer a { 
-  color: cyan;
+  color: #00FFFF;
 }
 
 img.image { 
@@ -57,6 +57,7 @@
 #navbar { 
   clear: both;
   background-color: rgb(0, 0, 50);
+  color: white;
   text-align: center;
   padding: 0.2em;
 }
@@ -118,7 +119,7 @@
 #body h1,h2,h3,h4,h5 { 
   border-bottom-style: solid;
   border-bottom-width: thin;
-  border-bottom-color: lightgrey;
+  border-bottom-color: #D3D3D3;
 }
 
 p { 
@@ -131,16 +132,10 @@
 
 div.note p { 
   text-indent: 0em;
+  margin-top: 0em;
+  margin-bottom: 0em;
 }
 
-div.note p:last-child { 
-  margin-bottom: 0;
-}
-
-div.note p:first-child { 
-  margin-top: 0;
-}
-
 div.note { 
   width: 20%;
   font-size: 0.8em;
@@ -148,7 +143,7 @@
   text-align: left;
   border-style: solid;
   border-width: thin;
-  background-color: lightyellow;
+  background-color: #FFFFE0;
 
   padding: 0.5em;
   margin: 0.5em 0em 0.5em 1em;
@@ -160,7 +155,7 @@
 div.comment { 
   border-style: solid;
   border-width: thin;
-  background-color: lightgrey;
+  background-color: #D3D3D3;
 }
 
 div.indent0 { border-style: solid; border-width: thin; padding: 0.5em 1em 0.5em 1em; margin-left: 0em; margin-bottom: 0.5em; }

Modified: trunk/media/wiki/template.xml
===================================================================
--- trunk/media/wiki/template.xml	2009-02-22 20:02:22 UTC (rev 2524)
+++ trunk/media/wiki/template.xml	2009-02-22 21:51:17 UTC (rev 2525)
@@ -1,8 +1,9 @@
 <?xml version="1.0" encoding="UTF-8" ?>
 <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
           "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
-<html>
+<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
   <head>
+    <meta http-equiv="content-type" content="text/html; charset=utf-8"/>
     <title>Windstille - ${title}</title>
     <link rel="stylesheet" type="text/css" href="default.css" />
     <link rel="icon" href="images/favicon.png" type="image/png" />
@@ -21,18 +22,33 @@
       <a href="Windstille.html">? Up</a>
       <a href="${next}.html">Next ?</a>
       <a href="About.html">About</a>
-      <br clear="all" />
+      <div style="clear: both;" />
     </div>
     <div id="body">
       <h1>${title}</h1>
       ${body}
-      <br clear="all" />
+      <div style="clear: both;" />
       <div style="text-align: right;">
         <a href="http://svn.berlios.de/viewvc/windstille/trunk/media/wiki/${thispage}" style="font-size: small;">view source</a>
       </div>
     </div>
+    
     <div id="footer">
       Powered by <a href="http://www.wikicreole.org/">Creole</a>
+      
+      <span style="display: inline-block; width: 20em;"/>
+
+      <a href="http://validator.w3.org/check?uri=referer"
+         ><img
+             align="middle"
+             src="http://www.w3.org/Icons/valid-xhtml10-blue"
+             alt="Valid XHTML 1.0 Strict" /></a>
+
+      <a href="http://jigsaw.w3.org/css-validator/check/referer"
+         ><img 
+               align="middle"
+               src="http://jigsaw.w3.org/css-validator/images/vcss-blue"
+               alt="Valid CSS!" /></a>
     </div>
   </body>
 </html>

Modified: trunk/media/wiki/upload.sh
===================================================================
--- trunk/media/wiki/upload.sh	2009-02-22 20:02:22 UTC (rev 2524)
+++ trunk/media/wiki/upload.sh	2009-02-22 21:51:17 UTC (rev 2525)
@@ -1,5 +1,5 @@
 #!/bin/sh
 
-rsync -vrPLtC  build/ grumbel at shell.berlios.de:/home/groups/windstille/htdocs/wiki
+rsync -vrPcLC  build/ grumbel at shell.berlios.de:/home/groups/windstille/htdocs/wiki
 
 # EOF #

Modified: trunk/media/wiki/wiki2html.py
===================================================================
--- trunk/media/wiki/wiki2html.py	2009-02-22 20:02:22 UTC (rev 2524)
+++ trunk/media/wiki/wiki2html.py	2009-02-22 21:51:17 UTC (rev 2525)
@@ -50,6 +50,7 @@
              'Drawing Model',
              'Drawing Primitives',
              'Editor',
+             'Controls',
              'Actions',
              'PDA',
              'Weapons',
@@ -192,6 +193,7 @@
                                              thispage = os.path.basename(filename),
                                              body = self.creole_parser.generate(file2string(filename)),
                                              title = filename.replace(".wiki", "")).render(method='xhtml', 
+                                                                                           encoding='latin-1',
                                                                                            strip_whitespace=True)
                         f = open(directory + '/' + os.path.basename(filename)[:-5] + ".html", 'w')
                         f.write(text)



From grumbel at mail.berlios.de  Sun Feb 22 22:59:06 2009
From: grumbel at mail.berlios.de (grumbel at BerliOS)
Date: Sun, 22 Feb 2009 22:59:06 +0100
Subject: [Windstille-commit] r2526 - trunk/media/wiki
Message-ID: <200902222159.n1MLx6QL020411@sheep.berlios.de>

Author: grumbel
Date: 2009-02-22 22:59:06 +0100 (Sun, 22 Feb 2009)
New Revision: 2526

Modified:
   trunk/media/wiki/Actions.wiki
   trunk/media/wiki/Coding style.wiki
   trunk/media/wiki/wiki2html.py
Log:
<<image>> now gets full path in src and href

Modified: trunk/media/wiki/Actions.wiki
===================================================================
--- trunk/media/wiki/Actions.wiki	2009-02-22 21:51:17 UTC (rev 2525)
+++ trunk/media/wiki/Actions.wiki	2009-02-22 21:59:06 UTC (rev 2526)
@@ -6,7 +6,7 @@
 
 The diagram on the right shows all the actions and how they relate to each other. 
 
-<<image href="actions.png" src="actions-small.png"  title="Source for this file is actions.dia">>
+<<image href="images/actions.png" src="images/actions-small.png"  title="Source for this file is actions.dia">>
 
 == Moving around without a gun / Adventure Mode
 

Modified: trunk/media/wiki/Coding style.wiki
===================================================================
--- trunk/media/wiki/Coding style.wiki	2009-02-22 21:51:17 UTC (rev 2525)
+++ trunk/media/wiki/Coding style.wiki	2009-02-22 21:59:06 UTC (rev 2526)
@@ -51,8 +51,8 @@
 == Other things
 
 * external libraries go to {{{external/}}} not into the {{{src/}}} directory
-* could that can be reused by other projects (lisp, tinygettext, ...) shall be moved to {{{external/}}}
+* code that can be reused by other projects (lisp, tinygettext, ...) shall be moved to {{{external/}}}
 * complex hacks on external libraries are not allowed unless absolutely necessarry and well documented
-* each testable sub-module shall have test cases and  examples
+* each testable sub-module shall have test cases and examples
 * all interactive sub-modules shall have a visual demonstration reachable from the normal in-game menu
 * no code unreachable by either test cases, visual demonstration or test level shall enter the repository

Modified: trunk/media/wiki/wiki2html.py
===================================================================
--- trunk/media/wiki/wiki2html.py	2009-02-22 21:51:17 UTC (rev 2525)
+++ trunk/media/wiki/wiki2html.py	2009-02-22 21:59:06 UTC (rev 2526)
@@ -147,11 +147,11 @@
 
             if dict.has_key('href'):
                 return bldr.tag.a(bldr.tag.img(None, 
-                                               src="images/" + dict['src'],
+                                               src=dict['src'],
                                                alt=dict['src'], 
                                                title=title, 
                                                class_= 'image'),
-                                  href="images/" + dict['href'])
+                                  href=dict['href'])
             else:
                 return bldr.tag.img(None, src="images/" + dict['src'], alt=dict['src'], title=title, class_= 'image')
 



From grumbel at mail.berlios.de  Mon Feb 23 13:02:35 2009
From: grumbel at mail.berlios.de (grumbel at BerliOS)
Date: Mon, 23 Feb 2009 13:02:35 +0100
Subject: [Windstille-commit] r2527 - trunk/media/wiki
Message-ID: <200902231202.n1NC2Zf0006126@sheep.berlios.de>

Author: grumbel
Date: 2009-02-23 13:02:34 +0100 (Mon, 23 Feb 2009)
New Revision: 2527

Modified:
   trunk/media/wiki/About.wiki
   trunk/media/wiki/Blender.wiki
Log:
Minor stuff

Modified: trunk/media/wiki/About.wiki
===================================================================
--- trunk/media/wiki/About.wiki	2009-02-22 21:59:06 UTC (rev 2526)
+++ trunk/media/wiki/About.wiki	2009-02-23 12:02:34 UTC (rev 2527)
@@ -1,5 +1,7 @@
-This is the Windstille Development Wiki, it isn't editable by the general public. Its is stored in [[http://subversion.tigris.org/ | SVN]] and only writable by developers, you can check it out via:
+Windstille is a 2D science fiction action adventure game currently under development. 
 
+This page is the Windstille Development Wiki. it isn't editable by the general public. Its is stored in [[http://subversion.tigris.org/ | SVN]] and only writable by developers, you can check it out via:
+
 * svn co http://svn.berlios.de/svnroot/repos/windstille/trunk/media/wiki
 
 And can browse it at:

Modified: trunk/media/wiki/Blender.wiki
===================================================================
--- trunk/media/wiki/Blender.wiki	2009-02-22 21:59:06 UTC (rev 2526)
+++ trunk/media/wiki/Blender.wiki	2009-02-23 12:02:34 UTC (rev 2527)
@@ -1,4 +1,4 @@
-There are plenty of ways to construct Blender models (*.blend) in a way that they don't work properly on other machines, this text shall give a little guideline on things to keep in mind.
+There are plenty of ways to construct Blender models ({{{*.blend}}}) in a way that they don't work properly on other machines, this text shall give a little guideline on things to keep in mind.
 
 == Textures
 
@@ -15,8 +15,8 @@
 
 == Lighting
 
-Since the models are meant to be used in a game, all the lighting is the job of the game engine, not the .blend file. Model files should thus be free of light sources.
+Since the models are meant to be used in a game, all the lighting is the job of the game engine, not the {{{.blend}}} file. Model files should thus be free of light sources.
 
 == Thumbnail Generation
 
-A thumbnail generator for conforming Blender files can be found in  {{{trunk/blender-thumbnail/}}}.
\ No newline at end of file
+A thumbnail generator for conforming Blender files can be found in  {{{trunk/blender-thumbnail/}}}.



From grumbel at mail.berlios.de  Mon Feb 23 15:59:32 2009
From: grumbel at mail.berlios.de (grumbel at BerliOS)
Date: Mon, 23 Feb 2009 15:59:32 +0100
Subject: [Windstille-commit] r2528 - in trunk/media/wiki: . obsolete
Message-ID: <200902231459.n1NExWxh006840@sheep.berlios.de>

Author: grumbel
Date: 2009-02-23 15:59:32 +0100 (Mon, 23 Feb 2009)
New Revision: 2528

Removed:
   trunk/media/wiki/obsolete/Sprite Format.wiki
Modified:
   trunk/media/wiki/Characters.wiki
   trunk/media/wiki/Locations.wiki
   trunk/media/wiki/Navigation Mesh.wiki
   trunk/media/wiki/Scripting.wiki
   trunk/media/wiki/Sprite.wiki
   trunk/media/wiki/default.css
Log:
More random stuff

Modified: trunk/media/wiki/Characters.wiki
===================================================================
--- trunk/media/wiki/Characters.wiki	2009-02-23 12:02:34 UTC (rev 2527)
+++ trunk/media/wiki/Characters.wiki	2009-02-23 14:59:32 UTC (rev 2528)
@@ -2,45 +2,45 @@
 The names are not final, chances are possible and likely.
 <</note>>
 
-= Player (Jane)
+== Player (Jane)
 
 <<thumbnail src="jane_portrait.png">>
 
 Relativly new in the mercenary business, started to hire at Northern Star when she turned 18, wanted to get away from home as quickly as possible, wanted to see the stars, visit other worlds and the like. Worked as miner for some years now, visited a bunch of colonies, however quickly become sick of the mining business. She is now out of the mining business and tries to start a new living here on this colonie.
 
-= AI
+== AI
 
 The controller programm of the Virtual Reality, has some intelligence and personality on his own.
 
-= Pilot
+== Pilot
 
 The person who controls the shuttle and brings Jane to wherever she needs to go.
 
-= Boss (Yagor)
+== Boss (Yagor)
 
 <<thumbnail src="yagor_head.png">>
 
 The person for which Jane works. Has been in the merc business for a while and has worked for a short period of time together with Sophie, before she went solo. Somewhat of a father person to Jane.
 
-= Veteran (Sophie)
+== Veteran (Sophie)
 
 <<thumbnail src="sophie_head.jpg">>
 
 Veteran in the mercenary work, has worked on a bunch of different colonies and has been on this one for quite some years. She knows how stuff works here and how to get what is needed. Has lots of connections to different people around on this colonie. For most part see prefers to work alone. Tough women overall.
 
-= Jeff
+== Jeff
 
 <<thumbnail src="jeff.png">>
 
 A sunnyboy, always sees the bright side of life. He works in the same business as Jane and every once in a while they clash together. While Jane might not like him much, Jeff sees their relationship a little differently.
 
-= Barkeeper (Bob)
+== Barkeeper (Bob)
 
 <<thumbnail src="barkeeper.jpg">>
 
 A valuable informant in this city. He knows most people around and he knows where the good jobs are to find. If something is happening his bar is the place where people exchange information. He might not be the most friendly looking guy, but once you know him for a while one shouldn't have to much throuble to get along with him. He tries his best to keep his bar a save place.
 
-= Mineral Worker
+== Mine Worker
 
 <<thumbnail src="worker.jpg">>
 <<thumbnail src="worker2.png">>

Modified: trunk/media/wiki/Locations.wiki
===================================================================
--- trunk/media/wiki/Locations.wiki	2009-02-23 12:02:34 UTC (rev 2527)
+++ trunk/media/wiki/Locations.wiki	2009-02-23 14:59:32 UTC (rev 2528)
@@ -1,11 +1,12 @@
 Windstille will have basically two kinds of areas, one is the city, in which one can move around by train or other means, and the other are the outdoor areas which will be reachable mainly by shuttle. 
 
-The outdoor areas will mostly feature powersuit gameplay and revolve around mines, cave and other installations that will allow some room for vertical exploration.
+The outdoor areas will mostly feature powersuit gameplay and revolve around mines, cave and other underground locations that will allow some room for vertical exploration.
 
 == VR Training
 
+A virtual reality training simulation.
+
 * used for the optional opening tutorial
-
 * provides a number of sub rooms to allow the player to train all kinds of stuff
 
 == City

Modified: trunk/media/wiki/Navigation Mesh.wiki
===================================================================
--- trunk/media/wiki/Navigation Mesh.wiki	2009-02-23 12:02:34 UTC (rev 2527)
+++ trunk/media/wiki/Navigation Mesh.wiki	2009-02-23 14:59:32 UTC (rev 2528)
@@ -1,3 +1,5 @@
 <<thumbnail src="navigation_test.png">>
 
 The Navigation Mesh is a graph structure that is used to represent the walkable area. Currently there exist a simple prototype in Windstille that is available from the main menu under **Navigation Test**.
+
+A Navigation Mesh is a graph and consists of edges and nodes
\ No newline at end of file

Modified: trunk/media/wiki/Scripting.wiki
===================================================================
--- trunk/media/wiki/Scripting.wiki	2009-02-23 12:02:34 UTC (rev 2527)
+++ trunk/media/wiki/Scripting.wiki	2009-02-23 14:59:32 UTC (rev 2528)
@@ -2,7 +2,7 @@
 Needs update, specifically on how script functions get exported, on how scripts related to sectors, levels or dialog and on what scripting is used for.
 <</note>>
 
-Windstille uses [[http://www.squirrel-lang.org/|Squirrel]] for scripting. The full source code of squirrel is included within the "squirrel" subdirectory of Windstille's source, and it is automatically built into the game.
+Windstille uses [[http://www.squirrel-lang.org/|Squirrel]] for scripting. The full source code of squirrel is included within the {{{external/SQUIRREL2/}}} subdirectory of Windstille's source, and it is automatically built into the game.
 
 C++ functions are exposed to scripts via the interface in the {{{scripting/}}} sub directory". Miniswig, found in the "tools/miniswig" subdirectory, is a tool that creates wrapper functions to allow the interface functions to be called from squirrel. If you have bison and flex installed then miniswig will be built automatically, and any changes you make to the scripting interface will automatically be added to the wrapper functions when you execute jam.
 

Modified: trunk/media/wiki/Sprite.wiki
===================================================================
--- trunk/media/wiki/Sprite.wiki	2009-02-23 12:02:34 UTC (rev 2527)
+++ trunk/media/wiki/Sprite.wiki	2009-02-23 14:59:32 UTC (rev 2528)
@@ -1,4 +1,4 @@
-A Sprite is a simple animated image. A Sprite can have multiple actions.
+A Sprite is a simple nimated image. A Sprite can have multiple actions.
 
 = C++ Specification:
 
@@ -16,11 +16,21 @@
 = File Format - *.sprite
 
 {{{
-(sprite
-  (action
-    (name "default")
-    (images "streetlamp-highlight.png")
-    (offset -111 -215)
-  )
-)
+ (sprite 
+   (action
+     (name "default")
+     (speed 4.0)
+     (images "foo/bar/frame1.png" "foo/bar/frame2.png")
+     (offset 100 10))
+ 
+   (action
+     (name "run")
+     (speed 15.0)
+     (image-grid
+       (file "human_turn.png")
+       (x-size 98)
+       (y-size 125))))
 }}}
+
+Other stuff from sprite which might not yet be implemented: 'Origin', alpha, color, pingpong, blendfunc, scale, vflip.
+

Modified: trunk/media/wiki/default.css
===================================================================
--- trunk/media/wiki/default.css	2009-02-23 12:02:34 UTC (rev 2527)
+++ trunk/media/wiki/default.css	2009-02-23 14:59:32 UTC (rev 2528)
@@ -48,6 +48,7 @@
 img.thumbnail { 
   border-style: none;
   float: right;
+  clear: right;
 }
 
 a img { 

Deleted: trunk/media/wiki/obsolete/Sprite Format.wiki
===================================================================
--- trunk/media/wiki/obsolete/Sprite Format.wiki	2009-02-23 12:02:34 UTC (rev 2527)
+++ trunk/media/wiki/obsolete/Sprite Format.wiki	2009-02-23 14:59:32 UTC (rev 2528)
@@ -1,20 +0,0 @@
-Sprite handle animation based on 2d images, they support using multiple images as frames as well as cutting the frames out of a single image.
-
-{{{
- (sprite 
-   (action
-     (name "default")
-     (speed 4.0)
-     (images "foo/bar/frame1.png" "foo/bar/frame2.png")
-     (offset 100 10))
- 
-   (action
-     (name "run")
-     (speed 15.0)
-     (image-grid
-       (file "human_turn.png")
-       (x-size 98)
-       (y-size 125))))
-}}}
-
-Other stuff from sprite which might not yet be implemented: 'Origin', alpha, color, pingpong, blendfunc, scale, vflip.
\ No newline at end of file



From grumbel at mail.berlios.de  Wed Feb 25 23:08:15 2009
From: grumbel at mail.berlios.de (grumbel at BerliOS)
Date: Wed, 25 Feb 2009 23:08:15 +0100
Subject: [Windstille-commit] r2529 - trunk/media/images/locations
Message-ID: <200902252208.n1PM8FeC031920@sheep.berlios.de>

Author: grumbel
Date: 2009-02-25 23:05:55 +0100 (Wed, 25 Feb 2009)
New Revision: 2529

Added:
   trunk/media/images/locations/cave7.xcf
Log:
More sketches

Added: trunk/media/images/locations/cave7.xcf
===================================================================
(Binary files differ)


Property changes on: trunk/media/images/locations/cave7.xcf
___________________________________________________________________
Name: svn:mime-type
   + application/x-xcf



From grumbel at mail.berlios.de  Sat Feb 28 22:40:20 2009
From: grumbel at mail.berlios.de (grumbel at BerliOS)
Date: Sat, 28 Feb 2009 22:40:20 +0100
Subject: [Windstille-commit] r2530 - trunk/media/images/locations
Message-ID: <200902282140.n1SLeKP5024395@sheep.berlios.de>

Author: grumbel
Date: 2009-02-28 22:39:16 +0100 (Sat, 28 Feb 2009)
New Revision: 2530

Added:
   trunk/media/images/locations/container.xcf
Log:
Another sketch

Added: trunk/media/images/locations/container.xcf
===================================================================
(Binary files differ)


Property changes on: trunk/media/images/locations/container.xcf
___________________________________________________________________
Name: svn:mime-type
   + application/x-xcf



