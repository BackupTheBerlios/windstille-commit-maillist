<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Windstille-commit] r2466 - in trunk/windstille/src: . armature	display engine font gui input math navigation objects	particles scripting sprite2d sprite3d tile util
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/windstille-commit/2009-February/index.html" >
   <LINK REL="made" HREF="mailto:windstille-commit%40lists.berlios.de?Subject=Re%3A%20%5BWindstille-commit%5D%20r2466%20-%20in%20trunk/windstille/src%3A%20.%20armature%0A%09display%20engine%20font%20gui%20input%20math%20navigation%20objects%0A%09particles%20scripting%20sprite2d%20sprite3d%20tile%20util&In-Reply-To=%3C200902112156.n1BLuVob000917%40sheep.berlios.de%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="001462.html">
   <LINK REL="Next"  HREF="001464.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Windstille-commit] r2466 - in trunk/windstille/src: . armature	display engine font gui input math navigation objects	particles scripting sprite2d sprite3d tile util</H1>
    <B>grumbel at BerliOS</B> 
    <A HREF="mailto:windstille-commit%40lists.berlios.de?Subject=Re%3A%20%5BWindstille-commit%5D%20r2466%20-%20in%20trunk/windstille/src%3A%20.%20armature%0A%09display%20engine%20font%20gui%20input%20math%20navigation%20objects%0A%09particles%20scripting%20sprite2d%20sprite3d%20tile%20util&In-Reply-To=%3C200902112156.n1BLuVob000917%40sheep.berlios.de%3E"
       TITLE="[Windstille-commit] r2466 - in trunk/windstille/src: . armature	display engine font gui input math navigation objects	particles scripting sprite2d sprite3d tile util">grumbel at mail.berlios.de
       </A><BR>
    <I>Wed Feb 11 22:56:31 CET 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="001462.html">[Windstille-commit] r2465 - in trunk/windstille/src: . armature	display engine font gui input math navigation objects	particles scripting sprite2d tile util
</A></li>
        <LI>Next message: <A HREF="001464.html">[Windstille-commit] r2467 - trunk/windstille/data/scripts
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1463">[ date ]</a>
              <a href="thread.html#1463">[ thread ]</a>
              <a href="subject.html#1463">[ subject ]</a>
              <a href="author.html#1463">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Author: grumbel
Date: 2009-02-11 22:56:29 +0100 (Wed, 11 Feb 2009)
New Revision: 2466

Added:
   trunk/windstille/src/math/math.hpp
   trunk/windstille/src/util/field.hpp
   trunk/windstille/src/util/handle.hpp
   trunk/windstille/src/util/ref.hpp
   trunk/windstille/src/util/refcounter.hpp
   trunk/windstille/src/util/util.cpp
   trunk/windstille/src/util/util.hpp
Removed:
   trunk/windstille/src/field.hpp
   trunk/windstille/src/handle.hpp
   trunk/windstille/src/math.hpp
   trunk/windstille/src/ref.hpp
   trunk/windstille/src/refcounter.hpp
   trunk/windstille/src/util.cpp
   trunk/windstille/src/util.hpp
Modified:
   trunk/windstille/src/SConscript
   trunk/windstille/src/armature/mesh.cpp
   trunk/windstille/src/conversation.cpp
   trunk/windstille/src/display/display.cpp
   trunk/windstille/src/display/framebuffer.cpp
   trunk/windstille/src/display/opengl_state.cpp
   trunk/windstille/src/display/scene_context.cpp
   trunk/windstille/src/display/shader_object.cpp
   trunk/windstille/src/display/shader_program.cpp
   trunk/windstille/src/display/surface_manager.cpp
   trunk/windstille/src/display/surface_manager.hpp
   trunk/windstille/src/display/texture.cpp
   trunk/windstille/src/display/texture_manager.cpp
   trunk/windstille/src/engine/game_object.hpp
   trunk/windstille/src/font/ttf_font.cpp
   trunk/windstille/src/gui/grid_component.hpp
   trunk/windstille/src/gui/menu_component.cpp
   trunk/windstille/src/input/input_manager_sdl.cpp
   trunk/windstille/src/input/wiimote.cpp
   trunk/windstille/src/navigation/navigation_graph.hpp
   trunk/windstille/src/objects/character.cpp
   trunk/windstille/src/objects/player.hpp
   trunk/windstille/src/particles/surface_drawer.hpp
   trunk/windstille/src/scripting/game_objects.hpp
   trunk/windstille/src/sprite2d/data.cpp
   trunk/windstille/src/sprite2d/data.hpp
   trunk/windstille/src/sprite2d/sprite.cpp
   trunk/windstille/src/sprite2dview.cpp
   trunk/windstille/src/sprite3d/data.cpp
   trunk/windstille/src/sprite3d/data.hpp
   trunk/windstille/src/sprite3d/sprite3d.cpp
   trunk/windstille/src/tile/tile_map.hpp
   trunk/windstille/src/tile/tile_packer.cpp
   trunk/windstille/src/util/response_curve.cpp
   trunk/windstille/src/windstille_main.cpp
Log:
Moved math stuff into math/, util stuff into util/

Modified: trunk/windstille/src/SConscript
===================================================================
--- trunk/windstille/src/SConscript	2009-02-11 21:47:00 UTC (rev 2465)
+++ trunk/windstille/src/SConscript	2009-02-11 21:56:29 UTC (rev 2466)
@@ -183,7 +183,7 @@
 'tile/tile_packer.cpp',
 'timer.cpp',
 'title_screen.cpp',
-'util.cpp',
+'util/util.cpp',
 'util/baby_xml.cpp',
 'util/command_line.cpp',
 'util/command_line_generic.cpp',

Modified: trunk/windstille/src/armature/mesh.cpp
===================================================================
--- trunk/windstille/src/armature/mesh.cpp	2009-02-11 21:47:00 UTC (rev 2465)
+++ trunk/windstille/src/armature/mesh.cpp	2009-02-11 21:56:29 UTC (rev 2466)
@@ -19,7 +19,7 @@
 #include &lt;assert.h&gt;
 #include &lt;stdexcept&gt;
 #include &lt;iostream&gt;
-#include &quot;util.hpp&quot;
+#include &quot;util/util.hpp&quot;
 #include &quot;display/opengl_state.hpp&quot;
 #include &quot;display/texture_manager.hpp&quot;
 #include &quot;util/file_reader.hpp&quot;

Modified: trunk/windstille/src/conversation.cpp
===================================================================
--- trunk/windstille/src/conversation.cpp	2009-02-11 21:47:00 UTC (rev 2465)
+++ trunk/windstille/src/conversation.cpp	2009-02-11 21:56:29 UTC (rev 2466)
@@ -16,7 +16,7 @@
 **  along with this program.  If not, see &lt;<A HREF="http://www.gnu.org/licenses/">http://www.gnu.org/licenses/</A>&gt;.
 */
 
-#include &quot;math.hpp&quot;
+#include &quot;math/math.hpp&quot;
 #include &quot;input/controller.hpp&quot;
 #include &quot;input/input_manager.hpp&quot;
 #include &quot;font/fonts.hpp&quot;

Modified: trunk/windstille/src/display/display.cpp
===================================================================
--- trunk/windstille/src/display/display.cpp	2009-02-11 21:47:00 UTC (rev 2465)
+++ trunk/windstille/src/display/display.cpp	2009-02-11 21:56:29 UTC (rev 2466)
@@ -25,10 +25,10 @@
 #include &lt;SDL.h&gt;
 #include &quot;console.hpp&quot;
 #include &quot;config.hpp&quot;
-#include &quot;math.hpp&quot;
+#include &quot;math/math.hpp&quot;
 #include &quot;display/opengl_state.hpp&quot;
 #include &quot;display.hpp&quot;
-#include &quot;util.hpp&quot;
+#include &quot;util/util.hpp&quot;
 #include &lt;assert.h&gt;
 
 SDL_Surface* Display::window       = 0;

Modified: trunk/windstille/src/display/framebuffer.cpp
===================================================================
--- trunk/windstille/src/display/framebuffer.cpp	2009-02-11 21:47:00 UTC (rev 2465)
+++ trunk/windstille/src/display/framebuffer.cpp	2009-02-11 21:56:29 UTC (rev 2466)
@@ -19,7 +19,7 @@
 
 #include &lt;GL/glew.h&gt;
 #include &lt;GL/gl.h&gt;
-#include &quot;util.hpp&quot;
+#include &quot;util/util.hpp&quot;
 #include &quot;texture.hpp&quot;
 #include &quot;render_buffer.hpp&quot;
 #include &quot;framebuffer.hpp&quot;

Modified: trunk/windstille/src/display/opengl_state.cpp
===================================================================
--- trunk/windstille/src/display/opengl_state.cpp	2009-02-11 21:47:00 UTC (rev 2465)
+++ trunk/windstille/src/display/opengl_state.cpp	2009-02-11 21:56:29 UTC (rev 2466)
@@ -25,7 +25,7 @@
 #include &quot;color.hpp&quot;
 #include &quot;globals.hpp&quot;
 #include &quot;display/display.hpp&quot;
-#include &quot;util.hpp&quot;
+#include &quot;util/util.hpp&quot;
 
 #define MAX_TEXTURE_UNITS 4
 

Modified: trunk/windstille/src/display/scene_context.cpp
===================================================================
--- trunk/windstille/src/display/scene_context.cpp	2009-02-11 21:47:00 UTC (rev 2465)
+++ trunk/windstille/src/display/scene_context.cpp	2009-02-11 21:56:29 UTC (rev 2466)
@@ -21,7 +21,7 @@
 
 #include &lt;iostream&gt;
 
-#include &quot;util.hpp&quot;
+#include &quot;util/util.hpp&quot;
 #include &quot;display/display.hpp&quot;
 #include &quot;display/surface.hpp&quot;
 #include &quot;display/opengl_state.hpp&quot;

Modified: trunk/windstille/src/display/shader_object.cpp
===================================================================
--- trunk/windstille/src/display/shader_object.cpp	2009-02-11 21:47:00 UTC (rev 2465)
+++ trunk/windstille/src/display/shader_object.cpp	2009-02-11 21:56:29 UTC (rev 2466)
@@ -19,7 +19,7 @@
 #include &quot;shader_object.hpp&quot;
 #include &lt;iostream&gt;
 #include &lt;stdio.h&gt;
-#include &quot;util.hpp&quot;
+#include &quot;util/util.hpp&quot;
 
 /** Read a file, user must free() the returned pointer */
 static GLchar* load_file(const char* filename)

Modified: trunk/windstille/src/display/shader_program.cpp
===================================================================
--- trunk/windstille/src/display/shader_program.cpp	2009-02-11 21:47:00 UTC (rev 2465)
+++ trunk/windstille/src/display/shader_program.cpp	2009-02-11 21:56:29 UTC (rev 2466)
@@ -19,7 +19,7 @@
 #include &quot;shader_program.hpp&quot;
 #include &lt;iostream&gt;
 #include &quot;shader_object.hpp&quot;
-#include &quot;util.hpp&quot;
+#include &quot;util/util.hpp&quot;
 
 class ShaderProgramImpl
 {

Modified: trunk/windstille/src/display/surface_manager.cpp
===================================================================
--- trunk/windstille/src/display/surface_manager.cpp	2009-02-11 21:47:00 UTC (rev 2465)
+++ trunk/windstille/src/display/surface_manager.cpp	2009-02-11 21:56:29 UTC (rev 2466)
@@ -24,7 +24,7 @@
 #include &lt;SDL_image.h&gt;
 #include &lt;GL/glew.h&gt;
 #include &lt;GL/gl.h&gt;
-#include &quot;util.hpp&quot;
+#include &quot;util/util.hpp&quot;
 #include &quot;globals.hpp&quot;
 #include &quot;texture.hpp&quot;
 #include &quot;surface.hpp&quot;

Modified: trunk/windstille/src/display/surface_manager.hpp
===================================================================
--- trunk/windstille/src/display/surface_manager.hpp	2009-02-11 21:47:00 UTC (rev 2465)
+++ trunk/windstille/src/display/surface_manager.hpp	2009-02-11 21:56:29 UTC (rev 2466)
@@ -25,7 +25,7 @@
 #include &lt;SDL.h&gt;
 #include &lt;GL/glew.h&gt;
 #include &lt;GL/gl.h&gt;
-#include &quot;ref.hpp&quot;
+#include &quot;util/ref.hpp&quot;
 #include &quot;texture.hpp&quot;
 
 class Surface;

Modified: trunk/windstille/src/display/texture.cpp
===================================================================
--- trunk/windstille/src/display/texture.cpp	2009-02-11 21:47:00 UTC (rev 2465)
+++ trunk/windstille/src/display/texture.cpp	2009-02-11 21:56:29 UTC (rev 2466)
@@ -24,7 +24,7 @@
 #include &quot;texture.hpp&quot;
 #include &quot;display/opengl_state.hpp&quot;
 #include &quot;texture_manager.hpp&quot;
-#include &quot;util.hpp&quot;
+#include &quot;util/util.hpp&quot;
 
 class TextureImpl
 {

Modified: trunk/windstille/src/display/texture_manager.cpp
===================================================================
--- trunk/windstille/src/display/texture_manager.cpp	2009-02-11 21:47:00 UTC (rev 2465)
+++ trunk/windstille/src/display/texture_manager.cpp	2009-02-11 21:56:29 UTC (rev 2466)
@@ -24,7 +24,7 @@
 #include &lt;SDL_image.h&gt;
 #include &lt;GL/glew.h&gt;
 #include &lt;GL/gl.h&gt;
-#include &quot;util.hpp&quot;
+#include &quot;util/util.hpp&quot;
 #include &quot;globals.hpp&quot;
 #include &quot;texture.hpp&quot;
 #include &quot;physfs/physfs_sdl.hpp&quot;

Modified: trunk/windstille/src/engine/game_object.hpp
===================================================================
--- trunk/windstille/src/engine/game_object.hpp	2009-02-11 21:47:00 UTC (rev 2465)
+++ trunk/windstille/src/engine/game_object.hpp	2009-02-11 21:56:29 UTC (rev 2466)
@@ -22,7 +22,7 @@
 #include &lt;string&gt;
 #include &quot;util/file_reader.hpp&quot;
 #include &quot;display/scene_context.hpp&quot;
-#include &quot;refcounter.hpp&quot;
+#include &quot;util/refcounter.hpp&quot;
 
 class Sector;
 

Deleted: trunk/windstille/src/field.hpp
===================================================================
--- trunk/windstille/src/field.hpp	2009-02-11 21:47:00 UTC (rev 2465)
+++ trunk/windstille/src/field.hpp	2009-02-11 21:56:29 UTC (rev 2466)
@@ -1,125 +0,0 @@
-/*
-**  Windstille - A Sci-Fi Action-Adventure Game
-**  Copyright (C) 2000 Ingo Ruhnke &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/windstille-commit">grumbel at gmx.de</A>&gt;
-**
-**  This program is free software: you can redistribute it and/or modify
-**  it under the terms of the GNU General Public License as published by
-**  the Free Software Foundation, either version 3 of the License, or
-**  (at your option) any later version.
-**  
-**  This program is distributed in the hope that it will be useful,
-**  but WITHOUT ANY WARRANTY; without even the implied warranty of
-**  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
-**  GNU General Public License for more details.
-**  
-**  You should have received a copy of the GNU General Public License
-**  along with this program.  If not, see &lt;<A HREF="http://www.gnu.org/licenses/">http://www.gnu.org/licenses/</A>&gt;.
-*/
-
-#ifndef HEADER_WINDSTILLE_FIELD_HPP
-#define HEADER_WINDSTILLE_FIELD_HPP
-
-#include &lt;vector&gt;
-#include &lt;assert.h&gt;
-
-template&lt;class T&gt;
-class Field
-{
-private:
-  int width;
-  int height;
-  std::vector&lt;T&gt; vec;
-
-public:
-  typedef typename std::vector&lt;T&gt;::iterator iterator;
-
-  Field()
-    : width(0), height(0)
-  {
-  }
-
-  Field (int w, int h) 
-    : width (w), height (h), vec (width * height)
-  {
-  }
-
-  /** Creates a new field out of a subsection from an already excisting one 
-   *  @param arg_field The field thet gets copied
-   *  @param w         width of the new field
-   *  @param h         height of the new field
-   *  @param pos_x     The position of the old field in the new resized one
-   *  @param pos_y     The position of the old field in the new resized one */
-  Field(const Field&lt;T&gt;&amp; arg_field, int w, int h, int pos_x, int pos_y)
-    : width (w), height (h), vec (width * height)
-  {
-    int start_x = std::max(0, -pos_x);
-    int start_y = std::max(0, -pos_y);
-
-    int end_x = std::min(arg_field.get_width(),  get_width()  - pos_x);
-    int end_y = std::min(arg_field.get_height(), get_height() - pos_y);
-
-    for(int y = start_y; y &lt; end_y; ++y)
-      for(int x = start_x; x &lt; end_x; ++x)
-        at(pos_x + x, pos_y + y) = arg_field.at(x, y);
-  }
-
-  const T&amp; operator[] (int i) const {
-    return vec[i];
-  }
-
-  T&amp; operator[] (int i) {
-    return vec[i];
-  }
-
-  T&amp; operator() (int x, int y) 
-  {
-    assert (x &gt;= 0 || x &lt; (int) width || y &gt;= 0 || y &lt; (int) height);
-    return vec [width*y + x];
-  }
-
-  const T&amp; operator() (int x, int y) const
-  {
-    assert (x &gt;= 0 || x &lt; (int) width || y &gt;= 0 || y &lt; (int) height);
-    return vec [width*y + x];
-  }
-  
-  inline const T&amp; at (int x, int y) const {
-    return (*this) (x, y);
-  }
-
-  inline T&amp; at (int x, int y) {
-    return (*this) (x, y);
-  }
-
-  /** Resize a field to a new size
-   *  @param w     New width of the field
-   *  @param h     New height of the field
-   *  @param pos_x The position of the old field in the new resized one
-   *  @param pos_y The position of the old field in the new resized one
-   **/
-  void resize(int w, int h, int pos_x = 0, int pos_y = 0) 
-  {
-    *this = Field&lt;T&gt;(*this, w, h, pos_x, pos_y);
-  }
-
-  void clear()
-  {
-    width  = 0;
-    height = 0;
-    vec.clear();
-  }
-
-  /** Provides raw access to the underlying vector */
-  std::vector&lt;T&gt;&amp; get_vector() { return vec; }
-
-  iterator begin () { return vec.begin (); }
-  iterator end () { return vec.end (); }
-
-  int size() const { return vec.size(); }
-  int get_width () const { return width; }
-  int get_height () const { return height; }
-};
-
-#endif
-
-/* EOF */

Modified: trunk/windstille/src/font/ttf_font.cpp
===================================================================
--- trunk/windstille/src/font/ttf_font.cpp	2009-02-11 21:47:00 UTC (rev 2465)
+++ trunk/windstille/src/font/ttf_font.cpp	2009-02-11 21:56:29 UTC (rev 2466)
@@ -31,7 +31,7 @@
 #include &quot;blitter.hpp&quot;
 #include &quot;ttf_font.hpp&quot;
 #include &quot;font_effect.hpp&quot;
-#include &quot;util.hpp&quot;
+#include &quot;util/util.hpp&quot;
 
 TTFCharacter::TTFCharacter(const Rect&amp; pos_,
                            const Rectf&amp; uv_, 

Modified: trunk/windstille/src/gui/grid_component.hpp
===================================================================
--- trunk/windstille/src/gui/grid_component.hpp	2009-02-11 21:47:00 UTC (rev 2465)
+++ trunk/windstille/src/gui/grid_component.hpp	2009-02-11 21:56:29 UTC (rev 2466)
@@ -19,7 +19,7 @@
 #ifndef HEADER_WINDSTILLE_GUI_GRID_COMPONENT_HPP
 #define HEADER_WINDSTILLE_GUI_GRID_COMPONENT_HPP
 
-#include &quot;field.hpp&quot;
+#include &quot;util/field.hpp&quot;
 #include &quot;component.hpp&quot;
 
 namespace gui {

Modified: trunk/windstille/src/gui/menu_component.cpp
===================================================================
--- trunk/windstille/src/gui/menu_component.cpp	2009-02-11 21:47:00 UTC (rev 2465)
+++ trunk/windstille/src/gui/menu_component.cpp	2009-02-11 21:56:29 UTC (rev 2466)
@@ -23,7 +23,7 @@
 #include &quot;gui/tab_component.hpp&quot;
 #include &quot;display/display.hpp&quot;
 #include &quot;menu_item.hpp&quot;
-#include &quot;math.hpp&quot;
+#include &quot;math/math.hpp&quot;
 
 namespace gui {
 

Deleted: trunk/windstille/src/handle.hpp
===================================================================
--- trunk/windstille/src/handle.hpp	2009-02-11 21:47:00 UTC (rev 2465)
+++ trunk/windstille/src/handle.hpp	2009-02-11 21:56:29 UTC (rev 2466)
@@ -1,134 +0,0 @@
-/*
-**  Windstille - A Sci-Fi Action-Adventure Game
-**  Copyright (C) 2007 Ingo Ruhnke &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/windstille-commit">grumbel at gmx.de</A>&gt;
-**
-**  This program is free software: you can redistribute it and/or modify
-**  it under the terms of the GNU General Public License as published by
-**  the Free Software Foundation, either version 3 of the License, or
-**  (at your option) any later version.
-**  
-**  This program is distributed in the hope that it will be useful,
-**  but WITHOUT ANY WARRANTY; without even the implied warranty of
-**  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
-**  GNU General Public License for more details.
-**  
-**  You should have received a copy of the GNU General Public License
-**  along with this program.  If not, see &lt;<A HREF="http://www.gnu.org/licenses/">http://www.gnu.org/licenses/</A>&gt;.
-*/
-
-#ifndef HEADER_WINDSTILLE_HANDLE_HPP
-#define HEADER_WINDSTILLE_HANDLE_HPP
-
-#include &lt;vector&gt;
-
-template&lt;typename Data&gt; class HandleManager;
-
-template&lt;typename Data&gt;
-class Handle
-{
-private:
-  HandleManager&lt;Data&gt;* manager;
-
-  unsigned int index;
-  unsigned int magic;
-
-public:
-  Handle(HandleManager&lt;Data&gt;* manager_, 
-             unsigned int index_,
-             unsigned int magic_)
-    : manager(manager_),
-      index(index_),
-      magic(magic_)
-  {
-  }
-
-  bool is_null() {
-    return manager-&gt;dereference(index, magic) != 0;
-  }
-
-  Data* operator-&gt;() {
-    return manager-&gt;dereference(index, magic);
-  }
-
-  Data&amp; operator*() {
-    return manager-&gt;dereference(index, magic);
-  }
-};
-
-template&lt;typename Data&gt;
-class HandleManager
-{
-private:
-  std::vector&lt;Data&gt;        data_lst;
-  std::vector&lt;unsigned int&gt; magic_lst;
-
-  /** List of indexes in \a data_lst and \a magic_lst that aren't
-      used */
-  std::vector&lt;unsigned int&gt;  free_list;
-  
-  unsigned int next_magic;
-
-public:
-  HandleManager() 
-    : next_magic(0)
-  {
-  }
-  
-  Handle&lt;Data&gt; aquire(const Data&amp; data)
-  {
-    if (free_list.empty()) 
-      {
-        data_lst.push_back(data);
-        magic_lst.push_back(next_magic);
-
-        return Handle&lt;Data&gt;(this, next_magic++);
-      }
-    else
-      {
-        unsigned int index = free_list.back();
-        free_list.pop_back();
-
-        data_lst[index]  = data;
-        magic_lst[index] = next_magic;
-
-        return Handle&lt;Data&gt;(this, next_magic++);
-      }
-  }
-
-  void release(const Handle&lt;Data&gt;&amp; handle)
-  {
-    if (valid(handle))
-      {
-        delete data_lst[handle.index];
-        data_lst[handle.index] = 0;
-
-        free_list.push_back(handle.index);
-      }
-    else
-      {
-        // invalid handle
-      }
-  }
-  
-  bool valid(const Handle&lt;Data&gt;&amp; handle)
-  {
-    return (handle.index &lt; data_lst.size() &amp;&amp;
-            magic_lst[handle.index] == handle.magic);
-  }
-
-  Data&amp; dereference(const Handle&lt;Data&gt;&amp; handle)
-  {
-    if (valid)
-      {
-        return data_lst[handle.index];
-      }
-    else
-      {
-        // invalid handle
-      }
-  }
-};
-
-#endif
-
-/* EOF */

Modified: trunk/windstille/src/input/input_manager_sdl.cpp
===================================================================
--- trunk/windstille/src/input/input_manager_sdl.cpp	2009-02-11 21:47:00 UTC (rev 2465)
+++ trunk/windstille/src/input/input_manager_sdl.cpp	2009-02-11 21:56:29 UTC (rev 2466)
@@ -24,7 +24,7 @@
 #include &lt;stdexcept&gt;
 #include &lt;stdio.h&gt;
 #include &lt;vector&gt;
-#include &quot;math.hpp&quot;
+#include &quot;math/math.hpp&quot;
 #include &quot;config.hpp&quot;
 #include &quot;util/file_reader.hpp&quot;
 #include &quot;controller_def.hpp&quot;

Modified: trunk/windstille/src/input/wiimote.cpp
===================================================================
--- trunk/windstille/src/input/wiimote.cpp	2009-02-11 21:47:00 UTC (rev 2465)
+++ trunk/windstille/src/input/wiimote.cpp	2009-02-11 21:56:29 UTC (rev 2466)
@@ -19,7 +19,7 @@
 #include &lt;iostream&gt;
 #include &lt;assert.h&gt;
 #include &lt;pthread.h&gt;
-#include &quot;math.hpp&quot;
+#include &quot;math/math.hpp&quot;
 #include &quot;wiimote.hpp&quot;
 
 Wiimote* wiimote = 0;

Copied: trunk/windstille/src/math/math.hpp (from rev 2463, trunk/windstille/src/math.hpp)


Property changes on: trunk/windstille/src/math/math.hpp
___________________________________________________________________
Name: svn:keywords
   + Id
Name: svn:mergeinfo
   + 
Name: svn:eol-style
   + native

Deleted: trunk/windstille/src/math.hpp
===================================================================
--- trunk/windstille/src/math.hpp	2009-02-11 21:47:00 UTC (rev 2465)
+++ trunk/windstille/src/math.hpp	2009-02-11 21:56:29 UTC (rev 2466)
@@ -1,81 +0,0 @@
-/*
-**  Windstille - A Sci-Fi Action-Adventure Game
-**  Copyright (C) 2000,2005 Ingo Ruhnke &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/windstille-commit">grumbel at gmx.de</A>&gt;
-**
-**  This program is free software: you can redistribute it and/or modify
-**  it under the terms of the GNU General Public License as published by
-**  the Free Software Foundation, either version 3 of the License, or
-**  (at your option) any later version.
-**  
-**  This program is distributed in the hope that it will be useful,
-**  but WITHOUT ANY WARRANTY; without even the implied warranty of
-**  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
-**  GNU General Public License for more details.
-**  
-**  You should have received a copy of the GNU General Public License
-**  along with this program.  If not, see &lt;<A HREF="http://www.gnu.org/licenses/">http://www.gnu.org/licenses/</A>&gt;.
-*/
-
-#ifndef HEADER_WINDSTILLE_MATH_HPP
-#define HEADER_WINDSTILLE_MATH_HPP
-
-#include &lt;assert.h&gt;
-#include &lt;math.h&gt;
-
-namespace math {
-
-template&lt;class T&gt; 
-T min (const T&amp; a, const T&amp; b) 
-{
-  if (a &lt; b)
-    return a;
-  else
-    return b;
-}
-
-template&lt;class T&gt; 
-T max (const T&amp; a, const T&amp; b) 
-{
-  if (a &gt; b)
-    return a;
-  else
-    return b;
-}
-
-template&lt;class T&gt; 
-T mid (const T&amp; a, const T&amp; b, const T&amp; c) 
-{
-  return max&lt;T&gt;((a), min&lt;T&gt;((b), (c)));
-}
-
-inline float normalize_angle(float radians)
-{
-  radians = fmod (radians, static_cast&lt;float&gt;(2.0 * M_PI));
-  if (radians &lt; 0.0)
-    radians += 2.0 * M_PI;
-  // Floating point math is so loathsome.  In sp98test, the assertion
-  // was barfing at P = 180 because a very small negative number plus
-  // 2 PI was equalling 2 PI.  Gakk!
-  if (radians == 2.0 * M_PI)
-    radians = 0.0;
-  
-  // FIXME: This gets triggered from time to time!
-  //  assert (radians &gt;= 0.0 &amp;&amp; radians &lt; 2.0 * M_PI);
-  return radians;
-}
-
-inline float deg2rad(float degree)
-{
-  return degree / 180.0f * M_PI;
-}
-
-inline float rad2deg(float radians)
-{
-  return radians / M_PI * 180.0f;
-}
-
-} // namespace math
-
-#endif
-
-/* EOF */

Modified: trunk/windstille/src/navigation/navigation_graph.hpp
===================================================================
--- trunk/windstille/src/navigation/navigation_graph.hpp	2009-02-11 21:47:00 UTC (rev 2465)
+++ trunk/windstille/src/navigation/navigation_graph.hpp	2009-02-11 21:56:29 UTC (rev 2466)
@@ -21,7 +21,6 @@
 
 #include &lt;iosfwd&gt;
 #include &lt;vector&gt;
-#include &quot;handle.hpp&quot;
 #include &quot;math/line.hpp&quot;
 
 class Node;

Modified: trunk/windstille/src/objects/character.cpp
===================================================================
--- trunk/windstille/src/objects/character.cpp	2009-02-11 21:47:00 UTC (rev 2465)
+++ trunk/windstille/src/objects/character.cpp	2009-02-11 21:56:29 UTC (rev 2466)
@@ -25,7 +25,7 @@
 #include &quot;physfs/physfs_stream.hpp&quot;
 #include &quot;console.hpp&quot;
 #include &quot;sprite3d/manager.hpp&quot;
-#include &quot;util.hpp&quot;
+#include &quot;util/util.hpp&quot;
 
 #include &lt;exception&gt;
 

Modified: trunk/windstille/src/objects/player.hpp
===================================================================
--- trunk/windstille/src/objects/player.hpp	2009-02-11 21:47:00 UTC (rev 2465)
+++ trunk/windstille/src/objects/player.hpp	2009-02-11 21:56:29 UTC (rev 2466)
@@ -27,7 +27,7 @@
 #include &quot;math/vector.hpp&quot;
 #include &quot;globals.hpp&quot;
 #include &quot;engine/entity.hpp&quot;
-#include &quot;ref.hpp&quot;
+#include &quot;util/ref.hpp&quot;
 #include &quot;display/surface.hpp&quot;
 
 class Controller;

Modified: trunk/windstille/src/particles/surface_drawer.hpp
===================================================================
--- trunk/windstille/src/particles/surface_drawer.hpp	2009-02-11 21:47:00 UTC (rev 2465)
+++ trunk/windstille/src/particles/surface_drawer.hpp	2009-02-11 21:56:29 UTC (rev 2466)
@@ -20,7 +20,7 @@
 #define HEADER_WINDSTILLE_PARTICLES_SURFACE_DRAWER_HPP
 
 #include &quot;display/surface.hpp&quot;
-#include &quot;ref.hpp&quot;
+#include &quot;util/ref.hpp&quot;
 #include &quot;drawer.hpp&quot;
 
 class SurfaceDrawer : public Drawer

Deleted: trunk/windstille/src/ref.hpp
===================================================================
--- trunk/windstille/src/ref.hpp	2009-02-11 21:47:00 UTC (rev 2465)
+++ trunk/windstille/src/ref.hpp	2009-02-11 21:56:29 UTC (rev 2466)
@@ -1,88 +0,0 @@
-/*
-**  Windstille - A Sci-Fi Action-Adventure Game
-**  Copyright (C) 2005 Matthias Braun &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/windstille-commit">matze at braunis.de</A>&gt;
-**
-**  This program is free software: you can redistribute it and/or modify
-**  it under the terms of the GNU General Public License as published by
-**  the Free Software Foundation, either version 3 of the License, or
-**  (at your option) any later version.
-**  
-**  This program is distributed in the hope that it will be useful,
-**  but WITHOUT ANY WARRANTY; without even the implied warranty of
-**  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
-**  GNU General Public License for more details.
-**  
-**  You should have received a copy of the GNU General Public License
-**  along with this program.  If not, see &lt;<A HREF="http://www.gnu.org/licenses/">http://www.gnu.org/licenses/</A>&gt;.
-*/
-
-#ifndef HEADER_WINDSTILLE_REF_HPP
-#define HEADER_WINDSTILLE_REF_HPP
-
-/** This class behaves like a pointer to a refcounted object, but increments the
- * reference count when new objects are assigned and decrements the refcounter
- * when it's lifetime has experied. (similar to std::auto_ptr)
- */
-template&lt;typename T&gt;
-class Ref
-{
-public:
-  Ref(T* object = 0)
-    : object(object)
-  {
-    if(object)
-      object-&gt;ref();
-  }
-  Ref(const Ref&lt;T&gt;&amp; other)
-    : object(other.object)
-  {
-    if(object)
-      object-&gt;ref();
-  }
-  ~Ref()
-  {
-    if(object)
-      object-&gt;unref();
-  }
-
-  void operator= (const Ref&lt;T&gt;&amp; other)
-  {
-    *this = other.get();
-  }
-
-  void operator= (T* object)
-  {
-    if(object)
-      object-&gt;ref();
-    if(this-&gt;object)
-      this-&gt;object-&gt;unref();
-    this-&gt;object = object;
-  }
-
-  T* operator -&gt;() const
-  {
-    return object;
-  }
-
-  T&amp; operator* () const
-  {
-    return *object;
-  }
-
-  operator const T* () const
-  {
-    return object;
-  }
-
-  T* get() const
-  {
-    return object;
-  }
-
-private:
-  T* object;
-};
-
-#endif
-
-/* EOF */

Deleted: trunk/windstille/src/refcounter.hpp
===================================================================
--- trunk/windstille/src/refcounter.hpp	2009-02-11 21:47:00 UTC (rev 2465)
+++ trunk/windstille/src/refcounter.hpp	2009-02-11 21:56:29 UTC (rev 2466)
@@ -1,63 +0,0 @@
-/*
-**  Windstille - A Sci-Fi Action-Adventure Game
-**  Copyright (C) 2005 Matthias Braun &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/windstille-commit">matze at braunis.de</A>&gt;
-**
-**  This program is free software: you can redistribute it and/or modify
-**  it under the terms of the GNU General Public License as published by
-**  the Free Software Foundation, either version 3 of the License, or
-**  (at your option) any later version.
-**  
-**  This program is distributed in the hope that it will be useful,
-**  but WITHOUT ANY WARRANTY; without even the implied warranty of
-**  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
-**  GNU General Public License for more details.
-**  
-**  You should have received a copy of the GNU General Public License
-**  along with this program.  If not, see &lt;<A HREF="http://www.gnu.org/licenses/">http://www.gnu.org/licenses/</A>&gt;.
-*/
-
-#ifndef HEADER_WINDSTILLE_REFCOUNTER_HPP
-#define HEADER_WINDSTILLE_REFCOUNTER_HPP
-
-#include &lt;assert.h&gt;
-
-/**
- * A base class that provides reference counting facilities
- */
-class RefCounter
-{
-public:
-  RefCounter()
-    : refcount(0)
-  { }
-
-  /** increases reference count */
-  void ref()
-  {
-    refcount++;
-  }
-  /** decreases reference count. Destroys the object if the reference count
-   * reaches 0
-   */
-  void unref()
-  {
-    refcount--;
-    if(refcount &lt;= 0) {
-      delete this;
-      return;
-    }
-  }
-
-protected:
-  virtual ~RefCounter()
-  {
-    assert(refcount == 0);
-  }
-
-private:
-  int refcount;
-};
-
-#endif
-
-/* EOF */

Modified: trunk/windstille/src/scripting/game_objects.hpp
===================================================================
--- trunk/windstille/src/scripting/game_objects.hpp	2009-02-11 21:47:00 UTC (rev 2465)
+++ trunk/windstille/src/scripting/game_objects.hpp	2009-02-11 21:56:29 UTC (rev 2466)
@@ -24,7 +24,7 @@
 #include &quot;objects/test_object.hpp&quot;
 #include &quot;objects/player.hpp&quot;
 #include &quot;objects/scriptable_object.hpp&quot;
-#include &quot;ref.hpp&quot;
+#include &quot;util/ref.hpp&quot;
 
 typedef GameObject _GameObject;
 typedef TestObject _TestObject;

Modified: trunk/windstille/src/sprite2d/data.cpp
===================================================================
--- trunk/windstille/src/sprite2d/data.cpp	2009-02-11 21:47:00 UTC (rev 2465)
+++ trunk/windstille/src/sprite2d/data.cpp	2009-02-11 21:56:29 UTC (rev 2466)
@@ -26,7 +26,7 @@
 #include &lt;memory&gt;
 #include &lt;sstream&gt;
 #include &lt;stdexcept&gt;
-#include &quot;util.hpp&quot;
+#include &quot;util/util.hpp&quot;
 #include &quot;display/surface.hpp&quot;
 #include &quot;display/surface_manager.hpp&quot;
 

Modified: trunk/windstille/src/sprite2d/data.hpp
===================================================================
--- trunk/windstille/src/sprite2d/data.hpp	2009-02-11 21:47:00 UTC (rev 2465)
+++ trunk/windstille/src/sprite2d/data.hpp	2009-02-11 21:56:29 UTC (rev 2466)
@@ -24,11 +24,11 @@
 #include &lt;vector&gt;
 #include &lt;GL/glew.h&gt;
 #include &lt;GL/gl.h&gt;
-#include &quot;util.hpp&quot;
+#include &quot;util/util.hpp&quot;
 #include &quot;util/file_reader.hpp&quot;
 #include &quot;math/vector.hpp&quot;
 #include &quot;display/surface.hpp&quot;
-#include &quot;ref.hpp&quot;
+#include &quot;util/ref.hpp&quot;
 
 struct SpriteAction
 {

Modified: trunk/windstille/src/sprite2d/sprite.cpp
===================================================================
--- trunk/windstille/src/sprite2d/sprite.cpp	2009-02-11 21:47:00 UTC (rev 2465)
+++ trunk/windstille/src/sprite2d/sprite.cpp	2009-02-11 21:56:29 UTC (rev 2466)
@@ -27,7 +27,7 @@
 #include &quot;sprite2d/manager.hpp&quot;
 #include &quot;display/surface_drawing_parameters.hpp&quot;
 #include &quot;display/color.hpp&quot;
-#include &quot;util.hpp&quot;
+#include &quot;util/util.hpp&quot;
 
 Sprite::Sprite()
 {  

Modified: trunk/windstille/src/sprite2dview.cpp
===================================================================
--- trunk/windstille/src/sprite2dview.cpp	2009-02-11 21:47:00 UTC (rev 2465)
+++ trunk/windstille/src/sprite2dview.cpp	2009-02-11 21:56:29 UTC (rev 2466)
@@ -22,7 +22,7 @@
 
 #include &quot;display/display.hpp&quot;
 #include &quot;sprite2d/manager.hpp&quot;
-#include &quot;math.hpp&quot;
+#include &quot;math/math.hpp&quot;
 #include &quot;console.hpp&quot;
 #include &quot;input/controller.hpp&quot;
 #include &quot;display/surface_manager.hpp&quot;

Modified: trunk/windstille/src/sprite3d/data.cpp
===================================================================
--- trunk/windstille/src/sprite3d/data.cpp	2009-02-11 21:47:00 UTC (rev 2465)
+++ trunk/windstille/src/sprite3d/data.cpp	2009-02-11 21:56:29 UTC (rev 2466)
@@ -23,7 +23,7 @@
 #include &lt;string.h&gt;
 #include &lt;sstream&gt;
 #include &lt;stdexcept&gt;
-#include &quot;util.hpp&quot;
+#include &quot;util/util.hpp&quot;
 #include &quot;globals.hpp&quot;
 #include &quot;display/texture_manager.hpp&quot;
 #include &quot;display/texture.hpp&quot;

Modified: trunk/windstille/src/sprite3d/data.hpp
===================================================================
--- trunk/windstille/src/sprite3d/data.hpp	2009-02-11 21:47:00 UTC (rev 2465)
+++ trunk/windstille/src/sprite3d/data.hpp	2009-02-11 21:56:29 UTC (rev 2466)
@@ -24,7 +24,7 @@
 #include &lt;GL/glew.h&gt;
 #include &lt;GL/gl.h&gt;
 #include &lt;vector&gt;
-#include &quot;ref.hpp&quot;
+#include &quot;util/ref.hpp&quot;
 #include &quot;display/texture.hpp&quot;
 #include &quot;math/vector3.hpp&quot;
 #include &quot;math/quaternion.hpp&quot;

Modified: trunk/windstille/src/sprite3d/sprite3d.cpp
===================================================================
--- trunk/windstille/src/sprite3d/sprite3d.cpp	2009-02-11 21:47:00 UTC (rev 2465)
+++ trunk/windstille/src/sprite3d/sprite3d.cpp	2009-02-11 21:56:29 UTC (rev 2466)
@@ -29,7 +29,7 @@
 #include &quot;display/drawing_request.hpp&quot;
 #include &quot;display/scene_context.hpp&quot;
 #include &quot;globals.hpp&quot;
-#include &quot;util.hpp&quot;
+#include &quot;util/util.hpp&quot;
 #include &quot;timer.hpp&quot;
 #include &quot;display/opengl_state.hpp&quot;
 #include &quot;sprite3d/manager.hpp&quot;

Modified: trunk/windstille/src/tile/tile_map.hpp
===================================================================
--- trunk/windstille/src/tile/tile_map.hpp	2009-02-11 21:47:00 UTC (rev 2465)
+++ trunk/windstille/src/tile/tile_map.hpp	2009-02-11 21:56:29 UTC (rev 2466)
@@ -22,7 +22,7 @@
 #include &lt;string&gt;
 
 #include &quot;globals.hpp&quot;
-#include &quot;field.hpp&quot;
+#include &quot;util/field.hpp&quot;
 #include &quot;engine/game_object.hpp&quot;
 #include &quot;display/scene_context.hpp&quot;
 

Modified: trunk/windstille/src/tile/tile_packer.cpp
===================================================================
--- trunk/windstille/src/tile/tile_packer.cpp	2009-02-11 21:47:00 UTC (rev 2465)
+++ trunk/windstille/src/tile/tile_packer.cpp	2009-02-11 21:56:29 UTC (rev 2466)
@@ -22,7 +22,7 @@
 #include &quot;display/texture.hpp&quot;
 #include &quot;globals.hpp&quot;
 #include &quot;tile_packer.hpp&quot;
-#include &quot;util.hpp&quot;
+#include &quot;util/util.hpp&quot;
 #include &quot;blitter.hpp&quot;
 
 class TilePackerImpl

Copied: trunk/windstille/src/util/field.hpp (from rev 2463, trunk/windstille/src/field.hpp)


Property changes on: trunk/windstille/src/util/field.hpp
___________________________________________________________________
Name: svn:keywords
   + Id
Name: svn:mergeinfo
   + 
Name: svn:eol-style
   + native

Copied: trunk/windstille/src/util/handle.hpp (from rev 2463, trunk/windstille/src/handle.hpp)


Property changes on: trunk/windstille/src/util/handle.hpp
___________________________________________________________________
Name: svn:keywords
   + Id
Name: svn:mergeinfo
   + 
Name: svn:eol-style
   + native

Copied: trunk/windstille/src/util/ref.hpp (from rev 2463, trunk/windstille/src/ref.hpp)


Property changes on: trunk/windstille/src/util/ref.hpp
___________________________________________________________________
Name: svn:keywords
   + Id
Name: svn:mergeinfo
   + 
Name: svn:eol-style
   + native

Copied: trunk/windstille/src/util/refcounter.hpp (from rev 2463, trunk/windstille/src/refcounter.hpp)


Property changes on: trunk/windstille/src/util/refcounter.hpp
___________________________________________________________________
Name: svn:keywords
   + Id
Name: svn:mergeinfo
   + 
Name: svn:eol-style
   + native

Modified: trunk/windstille/src/util/response_curve.cpp
===================================================================
--- trunk/windstille/src/util/response_curve.cpp	2009-02-11 21:47:00 UTC (rev 2465)
+++ trunk/windstille/src/util/response_curve.cpp	2009-02-11 21:56:29 UTC (rev 2466)
@@ -18,7 +18,7 @@
 
 #include &lt;assert.h&gt;
 #include &lt;iostream&gt;
-#include &quot;math.hpp&quot;
+#include &quot;math/math.hpp&quot;
 #include &quot;response_curve.hpp&quot;
 
 ResponseCurve::ResponseCurve(float i_min_, float i_max_, const std::vector&lt;float&gt;&amp; samples_)

Copied: trunk/windstille/src/util/util.cpp (from rev 2463, trunk/windstille/src/util.cpp)


Property changes on: trunk/windstille/src/util/util.cpp
___________________________________________________________________
Name: svn:keywords
   + Id
Name: svn:mergeinfo
   + 
Name: svn:eol-style
   + native

Copied: trunk/windstille/src/util/util.hpp (from rev 2463, trunk/windstille/src/util.hpp)


Property changes on: trunk/windstille/src/util/util.hpp
___________________________________________________________________
Name: svn:keywords
   + Id
Name: svn:mergeinfo
   + 
Name: svn:eol-style
   + native

Deleted: trunk/windstille/src/util.cpp
===================================================================
--- trunk/windstille/src/util.cpp	2009-02-11 21:47:00 UTC (rev 2465)
+++ trunk/windstille/src/util.cpp	2009-02-11 21:56:29 UTC (rev 2466)
@@ -1,68 +0,0 @@
-/*
-**  Windstille - A Sci-Fi Action-Adventure Game
-**  Copyright (C) 2005 Matthias Braun &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/windstille-commit">matze at braunis.de</A>&gt;
-**
-**  This program is free software: you can redistribute it and/or modify
-**  it under the terms of the GNU General Public License as published by
-**  the Free Software Foundation, either version 3 of the License, or
-**  (at your option) any later version.
-**  
-**  This program is distributed in the hope that it will be useful,
-**  but WITHOUT ANY WARRANTY; without even the implied warranty of
-**  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
-**  GNU General Public License for more details.
-**  
-**  You should have received a copy of the GNU General Public License
-**  along with this program.  If not, see &lt;<A HREF="http://www.gnu.org/licenses/">http://www.gnu.org/licenses/</A>&gt;.
-*/
-
-#include &quot;util.hpp&quot;
-#include &lt;fstream&gt;
-
-std::string dirname(const std::string&amp; filename)
-{
-  std::string::size_type p = filename.find_last_of('/');
-  if(p == std::string::npos)
-    return &quot;&quot;;
-
-  return filename.substr(0, p+1);        
-}
-
-std::string basename(const std::string&amp; filename)
-{
-  std::string::size_type p = filename.find_last_of('/');
-  if(p == std::string::npos)
-    return filename;
-
-  return filename.substr(p+1, filename.size()-p);
-}
-
-void file_to_string(const std::string&amp; filename, std::string&amp; str)
-{
-  std::ifstream in(filename.c_str());
-  while (true)
-    {
-      char c = in.get();
-      if (!in.good())
-        break;
-      str += c;
-    }
-}
-
-bool has_suffix(const std::string&amp; str, const std::string&amp; suffix)
-{
-  if (str.length() &gt;= suffix.length())
-    return str.compare(str.length() - suffix.length(), suffix.length(), suffix) == 0;
-  else
-    return false;
-}
-
-std::string tolowercase(const std::string&amp; str)
-{
-  std::string out;
-  for(std::string::const_iterator i = str.begin();  i != str.end(); ++i)
-    out += tolower(*i);
-  return out;
-}
-
-/* EOF */

Deleted: trunk/windstille/src/util.hpp
===================================================================
--- trunk/windstille/src/util.hpp	2009-02-11 21:47:00 UTC (rev 2465)
+++ trunk/windstille/src/util.hpp	2009-02-11 21:56:29 UTC (rev 2466)
@@ -1,62 +0,0 @@
-/*
-**  Windstille - A Sci-Fi Action-Adventure Game
-**  Copyright (C) 2005 Matthias Braun &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/windstille-commit">matze at braunis.de</A>&gt;
-**
-**  This program is free software: you can redistribute it and/or modify
-**  it under the terms of the GNU General Public License as published by
-**  the Free Software Foundation, either version 3 of the License, or
-**  (at your option) any later version.
-**  
-**  This program is distributed in the hope that it will be useful,
-**  but WITHOUT ANY WARRANTY; without even the implied warranty of
-**  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
-**  GNU General Public License for more details.
-**  
-**  You should have received a copy of the GNU General Public License
-**  along with this program.  If not, see &lt;<A HREF="http://www.gnu.org/licenses/">http://www.gnu.org/licenses/</A>&gt;.
-*/
-
-#ifndef HEADER_WINDSTILLE_UTIL_HPP
-#define HEADER_WINDSTILLE_UTIL_HPP
-
-#include &lt;string&gt;
-#include &lt;stdexcept&gt;
-#include &lt;sstream&gt;
-#include &lt;GL/glew.h&gt;
-#include &lt;GL/gl.h&gt;
-#include &lt;GL/glu.h&gt;
-
-std::string dirname(const std::string&amp; filename);
-std::string basename(const std::string&amp; filename);
-
-/** Loads a file from \a filename and places its content in \a str
-    FIXME: doesn't use PhysFS */
-void file_to_string(const std::string&amp; filename, std::string&amp; str);
-
-bool has_suffix(const std::string&amp; str, const std::string&amp; suffix);
-std::string tolowercase(const std::string&amp; str);
-
-template&lt;class T&gt;
-std::string to_string(const T&amp; data)
-{
-  std::ostringstream os;
-  os &lt;&lt; data;
-  return os.str();
-}
-
-static inline void assert_gl(const char* message)
-{
-#ifdef DEBUG
-  GLenum error = glGetError();
-  if(error != GL_NO_ERROR) {
-    std::ostringstream msg;
-    msg &lt;&lt; &quot;OpenGLError while '&quot; &lt;&lt; message &lt;&lt; &quot;': &quot;
-        &lt;&lt; gluErrorString(error);
-    throw std::runtime_error(msg.str());
-  }
-#endif
-}
-
-#endif
-
-/* EOF */

Modified: trunk/windstille/src/windstille_main.cpp
===================================================================
--- trunk/windstille/src/windstille_main.cpp	2009-02-11 21:47:00 UTC (rev 2465)
+++ trunk/windstille/src/windstille_main.cpp	2009-02-11 21:56:29 UTC (rev 2466)
@@ -33,7 +33,7 @@
 #include &quot;tile/tile_factory.hpp&quot;
 #include &quot;engine/script_manager.hpp&quot;
 #include &quot;config.hpp&quot;
-#include &quot;util.hpp&quot;
+#include &quot;util/util.hpp&quot;
 #include &quot;font/ttf_font.hpp&quot;
 #include &quot;display/display.hpp&quot;
 #include &quot;display/surface_manager.hpp&quot;


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="001462.html">[Windstille-commit] r2465 - in trunk/windstille/src: . armature	display engine font gui input math navigation objects	particles scripting sprite2d tile util
</A></li>
	<LI>Next message: <A HREF="001464.html">[Windstille-commit] r2467 - trunk/windstille/data/scripts
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1463">[ date ]</a>
              <a href="thread.html#1463">[ thread ]</a>
              <a href="subject.html#1463">[ subject ]</a>
              <a href="author.html#1463">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/windstille-commit">More information about the Windstille-commit
mailing list</a><br>
</body></html>
