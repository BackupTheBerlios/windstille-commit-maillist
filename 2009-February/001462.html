<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Windstille-commit] r2465 - in trunk/windstille/src: . armature	display engine font gui input math navigation objects	particles scripting sprite2d tile util
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/windstille-commit/2009-February/index.html" >
   <LINK REL="made" HREF="mailto:windstille-commit%40lists.berlios.de?Subject=Re%3A%20%5BWindstille-commit%5D%20r2465%20-%20in%20trunk/windstille/src%3A%20.%20armature%0A%09display%20engine%20font%20gui%20input%20math%20navigation%20objects%0A%09particles%20scripting%20sprite2d%20tile%20util&In-Reply-To=%3C200902112147.n1BLl2xV000157%40sheep.berlios.de%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="001461.html">
   <LINK REL="Next"  HREF="001463.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Windstille-commit] r2465 - in trunk/windstille/src: . armature	display engine font gui input math navigation objects	particles scripting sprite2d tile util</H1>
    <B>grumbel at BerliOS</B> 
    <A HREF="mailto:windstille-commit%40lists.berlios.de?Subject=Re%3A%20%5BWindstille-commit%5D%20r2465%20-%20in%20trunk/windstille/src%3A%20.%20armature%0A%09display%20engine%20font%20gui%20input%20math%20navigation%20objects%0A%09particles%20scripting%20sprite2d%20tile%20util&In-Reply-To=%3C200902112147.n1BLl2xV000157%40sheep.berlios.de%3E"
       TITLE="[Windstille-commit] r2465 - in trunk/windstille/src: . armature	display engine font gui input math navigation objects	particles scripting sprite2d tile util">grumbel at mail.berlios.de
       </A><BR>
    <I>Wed Feb 11 22:47:02 CET 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="001461.html">[Windstille-commit] r2464 - in trunk/windstille/src: . engine gui	objects particles scripting sprite3d tile
</A></li>
        <LI>Next message: <A HREF="001463.html">[Windstille-commit] r2466 - in trunk/windstille/src: . armature	display engine font gui input math navigation objects	particles scripting sprite2d sprite3d tile util
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1462">[ date ]</a>
              <a href="thread.html#1462">[ thread ]</a>
              <a href="subject.html#1462">[ subject ]</a>
              <a href="author.html#1462">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Author: grumbel
Date: 2009-02-11 22:47:00 +0100 (Wed, 11 Feb 2009)
New Revision: 2465

Added:
   trunk/windstille/src/display/color.hpp
   trunk/windstille/src/math/random.cpp
   trunk/windstille/src/math/random.hpp
   trunk/windstille/src/util/
   trunk/windstille/src/util/baby_xml.cpp
   trunk/windstille/src/util/baby_xml.hpp
   trunk/windstille/src/util/command_line.cpp
   trunk/windstille/src/util/command_line.hpp
   trunk/windstille/src/util/command_line_generic.cpp
   trunk/windstille/src/util/command_line_generic.hpp
   trunk/windstille/src/util/file_reader.cpp
   trunk/windstille/src/util/file_reader.hpp
   trunk/windstille/src/util/file_reader_impl.hpp
   trunk/windstille/src/util/getter.cpp
   trunk/windstille/src/util/getter.hpp
   trunk/windstille/src/util/response_curve.cpp
   trunk/windstille/src/util/response_curve.hpp
   trunk/windstille/src/util/sexpr_file_reader.cpp
   trunk/windstille/src/util/sexpr_file_reader.hpp
Removed:
   trunk/windstille/src/baby_xml.cpp
   trunk/windstille/src/baby_xml.hpp
   trunk/windstille/src/color.hpp
   trunk/windstille/src/command_line.cpp
   trunk/windstille/src/command_line.hpp
   trunk/windstille/src/command_line_generic.cpp
   trunk/windstille/src/command_line_generic.hpp
   trunk/windstille/src/file_reader.cpp
   trunk/windstille/src/file_reader.hpp
   trunk/windstille/src/file_reader_impl.hpp
   trunk/windstille/src/getter.cpp
   trunk/windstille/src/getter.hpp
   trunk/windstille/src/random.cpp
   trunk/windstille/src/random.hpp
   trunk/windstille/src/response_curve.cpp
   trunk/windstille/src/response_curve.hpp
   trunk/windstille/src/sexpr_file_reader.cpp
   trunk/windstille/src/sexpr_file_reader.hpp
Modified:
   trunk/windstille/src/SConscript
   trunk/windstille/src/armature/armature.hpp
   trunk/windstille/src/armature/mesh.cpp
   trunk/windstille/src/armature/model.cpp
   trunk/windstille/src/armature/pose.cpp
   trunk/windstille/src/config.cpp
   trunk/windstille/src/console.cpp
   trunk/windstille/src/engine/game_object.hpp
   trunk/windstille/src/engine/script_manager.cpp
   trunk/windstille/src/engine/sector.cpp
   trunk/windstille/src/engine/sector.hpp
   trunk/windstille/src/font/ttf_font.hpp
   trunk/windstille/src/gui/group_component.cpp
   trunk/windstille/src/gui/slider.cpp
   trunk/windstille/src/input/input_manager_sdl.cpp
   trunk/windstille/src/navigation/navigation_graph.cpp
   trunk/windstille/src/navigation_test.cpp
   trunk/windstille/src/objects/box.cpp
   trunk/windstille/src/objects/liquid.cpp
   trunk/windstille/src/objects/nightvision.cpp
   trunk/windstille/src/objects/swarm.cpp
   trunk/windstille/src/objects/vrdummy.cpp
   trunk/windstille/src/particle_viewer.cpp
   trunk/windstille/src/particles/particle_system.cpp
   trunk/windstille/src/particles/particle_system.hpp
   trunk/windstille/src/particles/randomizer.hpp
   trunk/windstille/src/particles/spark_drawer.cpp
   trunk/windstille/src/scripting/SConscript
   trunk/windstille/src/scripting/game_objects.cpp
   trunk/windstille/src/scripting/game_objects.hpp
   trunk/windstille/src/scripting/interface.cpp
   trunk/windstille/src/scripting/interface.hpp
   trunk/windstille/src/scripting/squirrel_error.cpp
   trunk/windstille/src/scripting/squirrel_error.hpp
   trunk/windstille/src/scripting/util.cpp
   trunk/windstille/src/scripting/util.hpp
   trunk/windstille/src/scripting/wrapper.cpp
   trunk/windstille/src/scripting/wrapper.hpp
   trunk/windstille/src/sprite2d/data.hpp
   trunk/windstille/src/sprite2d/sprite.cpp
   trunk/windstille/src/sprite2d/sprite.hpp
   trunk/windstille/src/text_area.cpp
   trunk/windstille/src/tile/tile_description.hpp
   trunk/windstille/src/tile/tile_factory.cpp
Log:
Moved some generic stuff into util/, reverted namespace scripting back to Scripting since it seems hardcoded in miniswig

Modified: trunk/windstille/src/SConscript
===================================================================
--- trunk/windstille/src/SConscript	2009-02-11 21:22:01 UTC (rev 2464)
+++ trunk/windstille/src/SConscript	2009-02-11 21:47:00 UTC (rev 2465)
@@ -46,17 +46,13 @@
 'armature/model.cpp',
 'armature/pose.cpp',
 'armature_test.cpp',
-'baby_xml.cpp',
 'blitter.cpp',
-'engine/camera.cpp',
 'collision/collision_data.cpp',
 'collision/collision_engine.cpp',
 'collision/collision_object.cpp',
 'collision/collision_test.cpp',
 'collision/ladder_contact.cpp',
 'collision/stair_contact.cpp',
-'command_line.cpp',
-'command_line_generic.cpp',
 'config.cpp',
 'console.cpp',
 'controller_def.cpp',
@@ -77,15 +73,17 @@
 'display/texture_manager.cpp',
 'display/vertex_array_drawing_request.cpp',
 'energy_bar.cpp',
+'engine/camera.cpp',
 'engine/entity.cpp',
-'file_reader.cpp',
+'engine/game_object.cpp',
+'engine/physics.cpp',
+'engine/script_manager.cpp',
+'engine/sector.cpp',
 'font/border_font_effect.cpp',
 'font/fonts.cpp',
 'font/ttf_font.cpp',
-'engine/game_object.cpp',
 'game_session.cpp',
 'geometry_test.cpp',
-'getter.cpp',
 'globals.cpp',
 'graphic_context_state.cpp',
 'gui/automap.cpp',
@@ -111,7 +109,6 @@
 'input/input_manager_sdl.cpp',
 'input/wiimote.cpp',
 'inventory.cpp',
-'objects/laser_pointer.cpp',
 'lisp/getters.cpp',
 'lisp/lexer.cpp',
 'lisp/lisp.cpp',
@@ -122,6 +119,7 @@
 'math/matrix.cpp',
 'math/origin.cpp',
 'math/quaternion.cpp',
+'math/random.cpp',
 'math/rect.cpp',
 'math/vector.cpp',
 'menu_manager.cpp',
@@ -138,14 +136,17 @@
 'objects/elevator.cpp',
 'objects/grenade.cpp',
 'objects/hedgehog.cpp',
+'objects/laser_pointer.cpp',
 'objects/liquid.cpp',
 'objects/nightvision.cpp',
+'objects/pistol.cpp',
 'objects/player.cpp',
 'objects/scriptable_object.cpp',
 'objects/shockwave.cpp',
 'objects/spider_mine.cpp',
 'objects/swarm.cpp',
 'objects/test_object.cpp',
+'objects/trigger.cpp',
 'objects/vrdummy.cpp',
 'particle_viewer.cpp',
 'particles/deform_drawer.cpp',
@@ -155,20 +156,13 @@
 'pda.cpp',
 'physfs/physfs_sdl.cpp',
 'physfs/physfs_stream.cpp',
-'engine/physics.cpp',
-'objects/pistol.cpp',
-'random.cpp',
-'response_curve.cpp',
 'screen.cpp',
 'screen_manager.cpp',
-'engine/script_manager.cpp',
 'scripting/game_objects.cpp',
 'scripting/interface.cpp',
 'scripting/squirrel_error.cpp',
 'scripting/util.cpp',
 'scripting/wrapper.cpp',
-'engine/sector.cpp',
-'sexpr_file_reader.cpp',
 'sound/sound_file.cpp',
 'sound/sound_manager.cpp',
 'sound/sound_source.cpp',
@@ -189,8 +183,14 @@
 'tile/tile_packer.cpp',
 'timer.cpp',
 'title_screen.cpp',
-'objects/trigger.cpp',
 'util.cpp',
+'util/baby_xml.cpp',
+'util/command_line.cpp',
+'util/command_line_generic.cpp',
+'util/file_reader.cpp',
+'util/getter.cpp',
+'util/response_curve.cpp',
+'util/sexpr_file_reader.cpp',
 'view.cpp',
 'windstille_main.cpp',
 ])

Modified: trunk/windstille/src/armature/armature.hpp
===================================================================
--- trunk/windstille/src/armature/armature.hpp	2009-02-11 21:22:01 UTC (rev 2464)
+++ trunk/windstille/src/armature/armature.hpp	2009-02-11 21:47:00 UTC (rev 2465)
@@ -21,7 +21,7 @@
 
 #include &lt;vector&gt;
 #include &quot;bone.hpp&quot;
-#include &quot;file_reader.hpp&quot;
+#include &quot;util/file_reader.hpp&quot;
 
 class Pose;
 

Modified: trunk/windstille/src/armature/mesh.cpp
===================================================================
--- trunk/windstille/src/armature/mesh.cpp	2009-02-11 21:22:01 UTC (rev 2464)
+++ trunk/windstille/src/armature/mesh.cpp	2009-02-11 21:47:00 UTC (rev 2465)
@@ -22,7 +22,7 @@
 #include &quot;util.hpp&quot;
 #include &quot;display/opengl_state.hpp&quot;
 #include &quot;display/texture_manager.hpp&quot;
-#include &quot;file_reader.hpp&quot;
+#include &quot;util/file_reader.hpp&quot;
 #include &quot;armature.hpp&quot;
 #include &quot;mesh.hpp&quot;
 

Modified: trunk/windstille/src/armature/model.cpp
===================================================================
--- trunk/windstille/src/armature/model.cpp	2009-02-11 21:22:01 UTC (rev 2464)
+++ trunk/windstille/src/armature/model.cpp	2009-02-11 21:47:00 UTC (rev 2465)
@@ -18,7 +18,7 @@
 
 #include &lt;iostream&gt;
 #include &lt;stdexcept&gt;
-#include &quot;file_reader.hpp&quot;
+#include &quot;util/file_reader.hpp&quot;
 #include &quot;mesh.hpp&quot;
 #include &quot;model.hpp&quot;
 

Modified: trunk/windstille/src/armature/pose.cpp
===================================================================
--- trunk/windstille/src/armature/pose.cpp	2009-02-11 21:22:01 UTC (rev 2464)
+++ trunk/windstille/src/armature/pose.cpp	2009-02-11 21:47:00 UTC (rev 2465)
@@ -18,7 +18,7 @@
 
 #include &lt;iostream&gt;
 #include &lt;stdexcept&gt;
-#include &quot;file_reader.hpp&quot;
+#include &quot;util/file_reader.hpp&quot;
 #include &quot;pose.hpp&quot;
 
 Pose::Pose(FileReader&amp; reader)

Deleted: trunk/windstille/src/baby_xml.cpp
===================================================================
--- trunk/windstille/src/baby_xml.cpp	2009-02-11 21:22:01 UTC (rev 2464)
+++ trunk/windstille/src/baby_xml.cpp	2009-02-11 21:47:00 UTC (rev 2465)
@@ -1,317 +0,0 @@
-/*
-**  Windstille - A Sci-Fi Action-Adventure Game
-**  Copyright (C) 2005 Ingo Ruhnke &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/windstille-commit">grumbel at gmx.de</A>&gt;
-**
-**  This program is free software: you can redistribute it and/or modify
-**  it under the terms of the GNU General Public License as published by
-**  the Free Software Foundation, either version 3 of the License, or
-**  (at your option) any later version.
-**  
-**  This program is distributed in the hope that it will be useful,
-**  but WITHOUT ANY WARRANTY; without even the implied warranty of
-**  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
-**  GNU General Public License for more details.
-**  
-**  You should have received a copy of the GNU General Public License
-**  along with this program.  If not, see &lt;<A HREF="http://www.gnu.org/licenses/">http://www.gnu.org/licenses/</A>&gt;.
-*/
-
-#include &lt;sstream&gt;
-#include &lt;stdexcept&gt;
-#include &lt;iostream&gt;
-#include &quot;baby_xml.hpp&quot;
-
-class BabyXMLReader
-{
-public:
-  BabyXML* xml;
-  std::string text;
-  int cursor;
-  int line_no;
-  int column_no;
-  
-  BabyXMLReader(const std::string&amp; text_, BabyXML* xml_) 
-    : xml(xml_),
-      text(text_),
-      cursor(0),
-      line_no(0),
-      column_no(0)
-  {
-    std::string content;
-    
-    while(!eof())
-      {
-        char c = look_ahead();
-        switch(c)
-          {
-          case '&lt;':
-            if (!content.empty())
-              {
-                xml-&gt;add_node(BabyXML::Node(BabyXML::Node::TEXT, content));
-                content = &quot;&quot;;
-              }
-            read_element();
-            break;
-
-          case '&amp;':
-            content += read_entity();
-            break;
-
-          default:
-            content += c;
-            incr_cursor();
-            break;
-          }
-      }
-
-    if (!content.empty())
-      xml-&gt;add_node(BabyXML::Node(BabyXML::Node::TEXT, content));
-  }
-
-  void skip_space()
-  {
-    while(true) 
-      {
-        char c = look_ahead();
-        if (c != ' ' &amp;&amp; c != '\t') {
-          break;
-        } else {
-          incr_cursor();
-        }
-      }
-  }
-
-  void read_char(char expect)
-  {
-    char c = look_ahead();
-    if (c != expect)
-      {
-        std::ostringstream str;
-        str &lt;&lt; &quot;Syntax Error:&quot; &lt;&lt; line_no &lt;&lt; &quot;:&quot; &lt;&lt; column_no 
-            &lt;&lt; &quot;: Syntax error: read_char(): expected '&quot; &lt;&lt; expect &lt;&lt; &quot;' got '&quot; &lt;&lt; c &lt;&lt; &quot;'&quot;;
-        throw std::runtime_error(str.str());
-      }
-    else
-      {
-        incr_cursor();
-      }
-  }
-
-  void read_element()
-  {
-    BabyXML::Node node;
-
-    read_char('&lt;');
-    if (look_ahead() == '/') 
-      {
-        node.type = BabyXML::Node::END_TAG;
-        incr_cursor();
-        node.content = read_identifer();
-      }
-    else
-      {
-        node.type = BabyXML::Node::START_TAG;
-        node.content    = read_identifer();
-        node.attributes = read_attributes();
-      }
-    
-    skip_space();
-    read_char('&gt;');
-
-    xml-&gt;add_node(node);
-  }
-
-  /** Read a string of the form: '&quot;your string&quot;' */
-  std::string read_string()
-  {
-    char start = look_ahead();
-    if (start != '\'' &amp;&amp; start != '&quot;')
-      {
-        std::ostringstream str;
-        str &lt;&lt; &quot;Syntax Error:&quot; &lt;&lt; line_no &lt;&lt; &quot;:&quot; &lt;&lt; column_no 
-            &lt;&lt; &quot;: Syntax error: read_string(): expected ' or \&quot; got '&quot; &lt;&lt; start &lt;&lt; &quot;'&quot;;
-        throw std::runtime_error(str.str());
-      }
-    incr_cursor();
-    
-    std::string content;
-    while(true)
-      {
-        char c = look_ahead();
-        if (c == '&quot;' || c == '\'') 
-          {
-            if (c != start)
-              {
-                std::ostringstream str;
-                str &lt;&lt; &quot;Syntax Error:&quot; &lt;&lt; line_no &lt;&lt; &quot;:&quot; &lt;&lt; column_no 
-                    &lt;&lt; &quot;: Syntax error: read_string(): quote mismatch&quot;;
-                throw std::runtime_error(str.str());
-              }
-            incr_cursor();
-            break;
-          } 
-        else if (c == '&amp;') 
-          {
-            c += read_entity();
-          } 
-        else 
-          {
-            incr_cursor();
-            content += c;
-          }
-      }
-    return content;
-  }
-
-  char read_entity()
-  {
-    read_char('&amp;');
-    std::string identifer = read_identifer();
-    read_char(';');
-
-    if (identifer == &quot;quot&quot;)
-      return '&quot;';
-    else if (identifer == &quot;gt&quot;)
-      return '&gt;';
-    else if (identifer == &quot;lt&quot;)
-      return '&lt;';
-    else
-      {
-        std::ostringstream str;
-        str &lt;&lt; &quot;Syntax Error:&quot; &lt;&lt; line_no &lt;&lt; &quot;:&quot; &lt;&lt; column_no &lt;&lt; &quot;: Unknown entity: '&amp;&quot; + identifer + &quot;;'&quot;;
-        throw std::runtime_error(str.str());
-      }
-  }
-  
-  std::vector&lt;BabyXML::Attribute&gt; read_attributes()
-  {
-    std::vector&lt;BabyXML::Attribute&gt; attributes;
-    while(true) 
-      {
-        skip_space();
-
-        char c = look_ahead();
-        if (c == '&gt;' || c == '&amp;' || c == '&lt;' || c == ';')
-          {
-            break;
-          }
-
-        attributes.push_back(BabyXML::Attribute());
-
-        attributes.back().name = read_identifer();
-        read_char('=');
-        attributes.back().value = read_string();
-      }
-    return attributes;
-  }
-
-  std::string read_identifer()
-  {
-    std::string identifer;
-    while(true) 
-      {
-        char c = look_ahead();
-        if (c == '&lt;' || c == '&gt;' || c == '&amp;' || c == ';' || c == ' ' || c == '\t' || c == '=') {
-          break;
-        } else {
-          identifer += c;
-          incr_cursor();
-        }
-      }
-
-    if (identifer.empty())
-      {
-        std::ostringstream str;
-        str &lt;&lt; &quot;Syntax Error:&quot; &lt;&lt; line_no &lt;&lt; &quot;:&quot; &lt;&lt; column_no &lt;&lt; &quot;: Identifer is empty&quot;;
-        throw std::runtime_error(str.str());
-      }
-
-    return identifer;
-  }
-
-  bool eof()
-  {
-    return cursor &gt;= int(text.size());
-  }
-
-  char look_ahead()
-  {
-    if (cursor &gt;= int(text.size()))
-      {
-        std::ostringstream str;
-        str &lt;&lt; &quot;Syntax Error:&quot; &lt;&lt; line_no &lt;&lt; &quot;:&quot; &lt;&lt; column_no &lt;&lt; &quot;: Premature end of text&quot;;
-        throw std::runtime_error(str.str());
-      }
-
-    return text[cursor];
-  }
-
-  void incr_cursor()
-  {
-    cursor += 1;
-    if (text[cursor] == '\n')
-      {
-        line_no += 1;
-        column_no = 0;
-      }
-    else
-      {
-        column_no += 1;
-      }
-  }
-};
-
-BabyXML::BabyXML(const std::string&amp; text)
-{
-  BabyXMLReader(text, this);
-}
-
-BabyXML::~BabyXML()
-{
-  
-}
-
-void
-BabyXML::add_node(const Node&amp; node)
-{
-  nodes.push_back(node);
-}
-
-#ifdef __TEST__
-// g++ -Wall -Werror -O2 -g -o baby_xml baby_xml.cpp -D__TEST__ 
-#include &lt;iostream&gt;
-
-int main(int argc, char** argv)
-{
-  if (argc != 2)
-    {
-      std::cout &lt;&lt; &quot;Usage: &quot; &lt;&lt; argv[0] &lt;&lt; &quot; STRING&quot; &lt;&lt; std::endl;
-    }
-  else
-    {
-      // BabyXML xml(&quot;&lt;strong size='10'&gt;Hello &lt; World&gt; &lt;b&gt;&quot;blabla&quot;&lt;/b&gt; Blablub&lt;/strong&gt;&quot;);
-      BabyXML xml(argv[1]);
-
-      for(BabyXML::iterator i = xml.begin(); i != xml.end(); ++i)
-        {
-          if (i-&gt;type == BabyXML::Node::START_TAG)
-            std::cout &lt;&lt; &quot;STARTTAG: &quot;;
-          else if (i-&gt;type == BabyXML::Node::END_TAG)
-            std::cout &lt;&lt; &quot;ENDTAG: &quot;;
-          else if (i-&gt;type == BabyXML::Node::TEXT)
-            std::cout &lt;&lt; &quot;TEXT: &quot;;
-
-          std::cout &lt;&lt; &quot;'&quot; &lt;&lt; i-&gt;content &lt;&lt; &quot;'&quot;;
-
-          for(std::vector&lt;BabyXML::Attribute&gt;::iterator j = i-&gt;attributes.begin(); j != i-&gt;attributes.end(); ++j)
-            {
-              std::cout &lt;&lt; &quot; &quot; &lt;&lt; j-&gt;name &lt;&lt; &quot;=&quot; &lt;&lt; j-&gt;value;
-            }
-
-          std::cout &lt;&lt; std::endl;
-        }
-    }
-}
-#endif
-
-/* EOF */

Deleted: trunk/windstille/src/baby_xml.hpp
===================================================================
--- trunk/windstille/src/baby_xml.hpp	2009-02-11 21:22:01 UTC (rev 2464)
+++ trunk/windstille/src/baby_xml.hpp	2009-02-11 21:47:00 UTC (rev 2465)
@@ -1,67 +0,0 @@
-/*
-**  Windstille - A Sci-Fi Action-Adventure Game
-**  Copyright (C) 2005 Ingo Ruhnke &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/windstille-commit">grumbel at gmx.de</A>&gt;
-**
-**  This program is free software: you can redistribute it and/or modify
-**  it under the terms of the GNU General Public License as published by
-**  the Free Software Foundation, either version 3 of the License, or
-**  (at your option) any later version.
-**  
-**  This program is distributed in the hope that it will be useful,
-**  but WITHOUT ANY WARRANTY; without even the implied warranty of
-**  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
-**  GNU General Public License for more details.
-**  
-**  You should have received a copy of the GNU General Public License
-**  along with this program.  If not, see &lt;<A HREF="http://www.gnu.org/licenses/">http://www.gnu.org/licenses/</A>&gt;.
-*/
-
-#ifndef HEADER_WINDSTILLE_BABY_XML_HPP
-#define HEADER_WINDSTILLE_BABY_XML_HPP
-
-#include &lt;string&gt;
-#include &lt;vector&gt;
-
-/** Parser for a flat XML-like tag soup, it doesn't support recursive
-    structures */
-class BabyXML
-{
-public:
-  struct Attribute
-  {
-    std::string name;
-    std::string value;
-  };
-
-  struct Node
-  {
-    enum Type { NONE, TEXT, START_TAG, END_TAG, ENTITY };
-    typedef std::vector&lt;Attribute&gt; Attributes;
-
-    Type type;
-    std::string content;
-    Attributes attributes;
-
-    Node() : type(NONE) {}
-    Node(Type type_, const std::string&amp; content_ = std::string()) : type(type_), content(content_) {}
-  };
-
-  typedef std::vector&lt;Node&gt; Nodes;
-  typedef Nodes::iterator       iterator;
-  typedef Nodes::const_iterator const_iterator;
-
-  Nodes nodes;
-
-  /** Parse the given \a text and construct the nodes from it */
-  BabyXML(const std::string&amp; text);
-  ~BabyXML();
-
-  void add_node(const Node&amp; node);
-
-  iterator begin() { return nodes.begin(); }
-  iterator end()   { return nodes.end(); }
-};
-
-#endif
-
-/* EOF */

Deleted: trunk/windstille/src/color.hpp
===================================================================
--- trunk/windstille/src/color.hpp	2009-02-11 21:22:01 UTC (rev 2464)
+++ trunk/windstille/src/color.hpp	2009-02-11 21:47:00 UTC (rev 2465)
@@ -1,37 +0,0 @@
-/*
-**  Windstille - A Sci-Fi Action-Adventure Game
-**  Copyright (C) 2000 Ingo Ruhnke &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/windstille-commit">grumbel at gmx.de</A>&gt;
-**
-**  This program is free software: you can redistribute it and/or modify
-**  it under the terms of the GNU General Public License as published by
-**  the Free Software Foundation, either version 3 of the License, or
-**  (at your option) any later version.
-**  
-**  This program is distributed in the hope that it will be useful,
-**  but WITHOUT ANY WARRANTY; without even the implied warranty of
-**  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
-**  GNU General Public License for more details.
-**  
-**  You should have received a copy of the GNU General Public License
-**  along with this program.  If not, see &lt;<A HREF="http://www.gnu.org/licenses/">http://www.gnu.org/licenses/</A>&gt;.
-*/
-
-#ifndef HEADER_WINDSTILLE_COLOR_HPP
-#define HEADER_WINDSTILLE_COLOR_HPP
-
-class Color
-{
-public:
-  Color()
-    : r(0), g(0), b(0), a(1.0)
-  { }
-  Color(float r, float g, float b, float a = 1.0)
-    : r(r), g(g), b(b), a(a)
-  { }
-
-  float r, g, b, a;
-};
-
-#endif
-
-/* EOF */

Deleted: trunk/windstille/src/command_line.cpp
===================================================================
--- trunk/windstille/src/command_line.cpp	2009-02-11 21:22:01 UTC (rev 2464)
+++ trunk/windstille/src/command_line.cpp	2009-02-11 21:47:00 UTC (rev 2465)
@@ -1,96 +0,0 @@
-/*
-**  ClanLib SDK
-**  Copyright (c) 1997-2005 The ClanLib Team
-**
-**  This software is provided 'as-is', without any express or implied
-**  warranty.  In no event will the authors be held liable for any damages
-**  arising from the use of this software.
-**
-**  Permission is granted to anyone to use this software for any purpose,
-**  including commercial applications, and to alter it and redistribute it
-**  freely, subject to the following restrictions:
-**
-**  1. The origin of this software must not be misrepresented; you must not
-**     claim that you wrote the original software. If you use this software
-**     in a product, an acknowledgment in the product documentation would be
-**     appreciated but is not required.
-**  2. Altered source versions must be plainly marked as such, and must not be
-**     misrepresented as being the original software.
-**  3. This notice may not be removed or altered from any source distribution.
-**
-**  Note: Some of the libraries ClanLib may link to may have additional
-**  requirements or restrictions.
-**
-**  File Author(s):
-**
-**    Magnus Norddahl
-**    (if your name is missing here, please add it)
-*/
-
-#include &quot;command_line.hpp&quot;
-#include &quot;command_line_generic.hpp&quot;
-
-CommandLine::CommandLine()
-{
-	impl = new CommandLine_Generic();
-}
-
-CommandLine::~CommandLine()
-{
-	delete impl;
-}
-
-void CommandLine::parse_args(int argc, char** argv)
-{
-	impl-&gt;parse_args(argc, argv);
-}
-
-void CommandLine::print_help()
-{
-	impl-&gt;print_help();
-}
-
-void CommandLine::set_help_indent(int i)
-{
-	impl-&gt;set_help_indent(i);
-}
-
-void CommandLine::add_usage(const std::string&amp; usage)
-{
-	impl-&gt;add_usage(usage);
-}
-
-void CommandLine::add_doc(const std::string&amp; doc)
-{
-	impl-&gt;add_doc(doc);
-}
-
-void CommandLine::add_group(const std::string&amp; grouptopic)
-{
-	impl-&gt;add_group(grouptopic);
-}
-
-void CommandLine::add_option(
-	int key, 
-	const std::string&amp; long_option, 
-	const std::string&amp; argument,
-	const std::string&amp; help,
-	bool visible)
-{
-	impl-&gt;add_option(key, long_option, argument, help, visible);
-}
-
-bool CommandLine::next()
-{
-	return impl-&gt;next();
-}
-
-int CommandLine::get_key()
-{
-	return impl-&gt;get_key();
-}
-
-std::string CommandLine::get_argument()
-{
-	return impl-&gt;get_argument();
-}

Deleted: trunk/windstille/src/command_line.hpp
===================================================================
--- trunk/windstille/src/command_line.hpp	2009-02-11 21:22:01 UTC (rev 2464)
+++ trunk/windstille/src/command_line.hpp	2009-02-11 21:47:00 UTC (rev 2465)
@@ -1,157 +0,0 @@
-/*
-**  ClanLib SDK
-**  Copyright (c) 1997-2005 The ClanLib Team
-**
-**  This software is provided 'as-is', without any express or implied
-**  warranty.  In no event will the authors be held liable for any damages
-**  arising from the use of this software.
-**
-**  Permission is granted to anyone to use this software for any purpose,
-**  including commercial applications, and to alter it and redistribute it
-**  freely, subject to the following restrictions:
-**
-**  1. The origin of this software must not be misrepresented; you must not
-**     claim that you wrote the original software. If you use this software
-**     in a product, an acknowledgment in the product documentation would be
-**     appreciated but is not required.
-**  2. Altered source versions must be plainly marked as such, and must not be
-**     misrepresented as being the original software.
-**  3. This notice may not be removed or altered from any source distribution.
-**
-**  Note: Some of the libraries ClanLib may link to may have additional
-**  requirements or restrictions.
-**
-**  File Author(s):
-**
-**    Magnus Norddahl
-**    (if your name is missing here, please add it)
-*/
-
-//! clanCore=&quot;System&quot;
-//! header=core.h
-
-#ifndef HEADER_COMMAND_LINE_HPP
-#define HEADER_COMMAND_LINE_HPP
-
-#if _MSC_VER &gt; 1000
-#pragma once
-#endif
-
-#include &lt;string&gt;
-#include &lt;vector&gt;
-
-class CommandLine_Generic;
-
-//: Helper class to parse command line arguments
-//- !group=Core/System!
-//- !header=core.h!
-//- &lt;p&gt;The CommandLine class helps to parse command line arguments, namely
-//- the argc/argv pair that you get from main(). CommandLine mimics
-//- getopt_long() behaviour as closely as possible, while providing a
-//- cleaner interface and a few additional features, like automatic
-//- generation of '--help' output. CommandLine can parse long arguments
-//- in the following styles:&lt;/p&gt;
-//-
-//- &lt;p&gt;program --file FILENAME&lt;br&gt;
-//- program --file=FILENAME&lt;/p&gt;
-//-
-//- &lt;p&gt;Short arguments are handled like this:&lt;/p&gt;
-//-
-//- &lt;p&gt;program -f FILENAME&lt;/p&gt;
-//-
-//- &lt;p&gt;Concatenating short arguments is also supported, so that:&lt;/p&gt;
-//- 
-//- &lt;p&gt;program -f -a -b FILENAME&lt;/p&gt;
-//-
-//- &lt;p&gt;is equivalent to:&lt;/p&gt;
-//-
-//- &lt;p&gt;program -fab FILENAME&lt;/p&gt;
-//-
-//- &lt;p&gt;Non-option arguments (aka rest arguments) are supported as well:&lt;/p&gt;
-//-
-//- &lt;p&gt;program SOMEFILE SOMEOTHERFILE ...&lt;/p&gt;
-//- 
-//- &lt;p&gt;To avoid ambiguity when a filename starts with '-' CommandLine stops
-//- parsing arguments after the first encounter of a '--', so in&lt;/p&gt;
-//-
-//- &lt;p&gt;program -f -b -- -f -b&lt;/p&gt;
-//-
-//- &lt;p&gt;In the above example the first '-f -b' options are treated as
-//- normal while the ones after the '--' are treated as rest arguments
-//- (aka filenames in most programs).&lt;/p&gt;
-class CommandLine
-{
-//! Construction:
-public:
-	CommandLine();
-
-	~CommandLine();
-
-//! Attributes:
-public:
-	enum
-	{
-		REST_ARG  = -2
-	};
-
-	//: Return the key of the current option
-	int get_key();
-
-	//: Return the argument to the current option
-	std::string get_argument();
-
-//! Operations:
-public:
-	//: Change the indention used for the help message, default is 18
-	void set_help_indent(int i);
-
-	//: Add a usage line to the help output, usage is for example
-	//: &quot;[OPTIONS]... FILE&quot;, the program name will get appended
-	//: automatically
-	void add_usage(const std::string&amp; usage);
-
-	//: Adds extra documentation to the help output, should only be
-	//: used at the beginning or at the end, to
-	void add_doc(const std::string&amp; doc);
-	
-	//: Starts a new group of options, the grouptopic gets printed
-	//: above the group of options in the print_help() output
-	void add_group(const std::string&amp; grouptopic);
-  
-	//: Adds a option to the parser
-	//param key: a letter for a short-option or a numeric value
-	//param key: larger than 255 that identifies the option
-	//param long_option: the long name of this option or &quot;&quot; if non
-	//param long_option: should be used for this option
-	//param argument: the type of the argument that this option
-	//param argument: requires (i.e. FILE, SIZE, WIDTH, etc.) or &quot;&quot; if no argument is
-	//param argument: required
-	//param help: the help string for this option
-	//param visible: true if the option should be listed in the help
-	//param visible: output, false will not list it in the help output which might
-	//param visible: be usefull for cheat-options or backward-compability options
-	//param visible: than would only clutter the help output
-	void add_option(
-		int key,
-		const std::string&amp; long_option, 
-		const std::string&amp; argument,
-		const std::string&amp; help,
-		bool visible = true);
-	
-	//: Parse the options arcording to the options added with
-	//: add_option(), result of the parsing is accessible via
-	//: next() and get_key()/get_argument()
-	void parse_args(int argc, char** argv);
-
-	//: Print the help output, normaly done via a --help option
-	void print_help();
-
-	//: Goto the next option
-	bool next();
-
-//! Implementation:
-private:
-	CommandLine_Generic* impl;
-};
-
-#endif

Deleted: trunk/windstille/src/command_line_generic.cpp
===================================================================
--- trunk/windstille/src/command_line_generic.cpp	2009-02-11 21:22:01 UTC (rev 2464)
+++ trunk/windstille/src/command_line_generic.cpp	2009-02-11 21:47:00 UTC (rev 2465)
@@ -1,336 +0,0 @@
-/*
-**  ClanLib SDK
-**  Copyright (c) 1997-2005 The ClanLib Team
-**
-**  This software is provided 'as-is', without any express or implied
-**  warranty.  In no event will the authors be held liable for any damages
-**  arising from the use of this software.
-**
-**  Permission is granted to anyone to use this software for any purpose,
-**  including commercial applications, and to alter it and redistribute it
-**  freely, subject to the following restrictions:
-**
-**  1. The origin of this software must not be misrepresented; you must not
-**     claim that you wrote the original software. If you use this software
-**     in a product, an acknowledgment in the product documentation would be
-**     appreciated but is not required.
-**  2. Altered source versions must be plainly marked as such, and must not be
-**     misrepresented as being the original software.
-**  3. This notice may not be removed or altered from any source distribution.
-**
-**  Note: Some of the libraries ClanLib may link to may have additional
-**  requirements or restrictions.
-**
-**  File Author(s):
-**
-**    Magnus Norddahl
-**    (if your name is missing here, please add it)
-*/
-
-#include &lt;iomanip&gt;
-#include &lt;iostream&gt;
-#include &lt;stdexcept&gt;
-#include &lt;stdio.h&gt;
-
-#include &quot;command_line_generic.hpp&quot;
-
-
-#ifdef WIN32
-#define snprintf _snprintf
-#endif
-
-CommandLine_Generic::CommandLine_Generic()
-{
-  help_indent = 18;
-}
-
-void CommandLine_Generic::parse_args(int argc, char** argv)
-{
-  programm = argv[0];
-
-  for(int i = 1; i &lt; argc; ++i) 
-    {
-      if (argv[i][0] == '-') 
-        {
-          if (argv[i][1] == '-') 
-            {
-              // We got a long option
-              if (argv[i][2] == '\0') { 
-                // Got a '--', so we stop evaluating arguments
-                ++i;
-                while(i &lt; argc) 
-                  {
-                    read_option(CommandLine::REST_ARG, argv[i]);
-                    ++i;
-                  }
-              } 
-              else
-                {
-                  std::string opt = argv[i] + 2;
-                  std::string long_opt;
-                  std::string long_opt_arg;
-
-                  std::string::size_type pos = opt.find('=');
-
-                  if (pos != std::string::npos) 
-                    {
-                      long_opt = opt.substr(0, pos);
-                      long_opt_arg = opt.substr(pos+1);
-                    }
-                  else 
-                    {
-                      long_opt = opt;
-                    }
-
-                  // Long Option
-                  Option* option = lookup_long_option(long_opt);
-
-                  if (option) 
-                    {
-                      if (option-&gt;argument.empty()) 
-                        {
-                          read_option(option-&gt;key, &quot;&quot;);
-                        } 
-                      else
-                        {
-                          if (pos != std::string::npos) 
-                            {
-                              read_option(option-&gt;key, long_opt_arg);
-                            }
-                          else
-                            {            
-                              if (i == argc - 1) 
-                                {
-                                  throw std::runtime_error(&quot;option '&quot; + std::string(argv[i]) + &quot;' requires an argument&quot;);
-                                }
-                              else 
-                                {
-                                  read_option(option-&gt;key, argv[i + 1]);
-                                  ++i;
-                                }
-                            }
-                        }
-                    }
-                  else
-                    {
-                      throw std::runtime_error(&quot;unrecognized option '&quot; + std::string(argv[i]) + &quot;'&quot;);
-                    }
-                }
-            } 
-          else 
-            {
-              // We got a short option
-              char* p = argv[i] + 1;
-          
-              if (*p != '\0') {
-                // Handle option chains
-                while (*p) 
-                  {
-                    // Short option(s)
-                    Option* option = lookup_short_option(*p);
-
-                    if (option) 
-                      {
-                        if (option-&gt;argument.empty()) 
-                          {
-                            read_option(option-&gt;key, &quot;&quot;);
-                          } 
-                        else 
-                          {
-                            if (i == argc - 1 || *(p+1) != '\0') 
-                              {
-                                // No more arguments
-                                throw std::runtime_error(&quot;option requires an argument -- &quot; + std::string(1, *p));
-                              }
-                            else
-                              {
-                                read_option(option-&gt;key, argv[i + 1]);
-                                ++i;
-                              }
-                          }
-                      } 
-                    else 
-                      {
-                        throw std::runtime_error(&quot;invalid option -- &quot; + std::string(1, *p));
-                      }
-                    ++p; 
-                  }
-              } 
-              else
-                {
-                  read_option(CommandLine::REST_ARG, &quot;-&quot;);
-                } 
-            }
-        } 
-      else
-        {
-          read_option(CommandLine::REST_ARG, argv[i]);
-        }
-    }
-
-  current_option = parsed_options.end();
-}
-
-CommandLine_Generic::Option *CommandLine_Generic::lookup_short_option(char short_option)
-{
-  for(Options::iterator i = options.begin(); i != options.end(); ++i)
-    {
-      if (i-&gt;key == short_option)
-        return &amp;(*i);
-    }
-  return 0;
-}
-
-CommandLine_Generic::Option *CommandLine_Generic::lookup_long_option(const std::string&amp; long_option)
-{
-  for(Options::iterator i = options.begin(); i != options.end(); ++i)
-    {
-      if (i-&gt;long_option == long_option)
-        return &amp;*i;
-    }
-  return 0;
-}
-
-void CommandLine_Generic::read_option(int key, const std::string&amp; argument)
-{
-  ParsedOption parsed_option;
-  
-  parsed_option.key = key;
-  parsed_option.argument = argument;
-
-  parsed_options.push_back(parsed_option);
-}
-
-void CommandLine_Generic::print_help()
-{
-  bool first_usage = true;
-  for(Options::iterator i = options.begin(); i != options.end(); ++i)
-    {
-      if (i-&gt;visible)
-        {
-          if (i-&gt;key == USAGE) 
-            {
-              if (first_usage) 
-                {
-                  std::cout &lt;&lt; &quot;Usage: &quot; &lt;&lt; programm &lt;&lt; &quot; &quot; &lt;&lt;  i-&gt;help &lt;&lt; std::endl; 
-                  first_usage = false;
-                }
-              else
-                {
-                  std::cout &lt;&lt; &quot;or:    &quot; &lt;&lt; programm &lt;&lt; &quot; &quot; &lt;&lt; i-&gt;help &lt;&lt; std::endl; 
-                }
-            } 
-          else if (i-&gt;key == GROUP) 
-            {
-              if (i != options.begin())
-                std::cout &lt;&lt; std::endl;
-              std::cout &lt;&lt; i-&gt;help &lt;&lt; std::endl;
-            }
-          else if (i-&gt;key == DOC) 
-            {
-              if (i != options.begin())
-                std::cout &lt;&lt; std::endl;
-              std::cout &lt;&lt; i-&gt;help &lt;&lt; std::endl;
-            }
-          else 
-            {
-              char option[256]   = { 0 };
-              char argument[256] = { 0 };
-
-              if (i-&gt;key &gt; 255 || i-&gt;key &lt; 0)
-                snprintf(option, 256, &quot;--%s&quot;, i-&gt;long_option.c_str());
-              else if (i-&gt;long_option.empty())
-                snprintf(option, 256, &quot;-%c&quot;, char(i-&gt;key));
-              else
-                snprintf(option, 256, &quot;-%c, --%s&quot;, char(i-&gt;key), i-&gt;long_option.c_str());
-
-              if (!i-&gt;argument.empty())
-                {
-                  if (i-&gt;long_option.empty())
-                    snprintf(argument, 256, &quot; %s&quot;, i-&gt;argument.c_str());
-                  else
-                    snprintf(argument, 256, &quot;=%s&quot;, i-&gt;argument.c_str());
-                }
-
-              std::cout &lt;&lt; &quot;  &quot; 
-                        &lt;&lt; std::setiosflags(std::ios::left) &lt;&lt; std::setw(help_indent)
-                        &lt;&lt; (std::string(option) + std::string(argument)) &lt;&lt; std::setw(0)
-                        &lt;&lt; &quot; &quot; &lt;&lt; i-&gt;help &lt;&lt; std::endl;
-            }
-        }
-    }
-  std::cout &lt;&lt; std::endl;
-}
-
-void CommandLine_Generic::add_usage(const std::string&amp; usage)
-{
-  Option option;
-
-  option.key          = USAGE;
-  option.help         = usage;
-  option.visible      = true;
-
-  options.push_back(option);   
-}
-
-void CommandLine_Generic::add_doc(const std::string&amp; grouptopic)
-{
-  Option option;
-
-  option.key          = DOC;
-  option.help         = grouptopic;
-  option.visible      = true;
-
-  options.push_back(option);  
-}
-
-void CommandLine_Generic::add_group(const std::string&amp; grouptopic)
-{
-  Option option;
-
-  option.key          = GROUP;
-  option.help         = grouptopic;
-  option.visible      = true;
-
-  options.push_back(option);  
-}
-
-void CommandLine_Generic::add_option(int key, 
-                                        const std::string&amp; long_option, 
-                                        const std::string&amp; argument,
-                                        const std::string&amp; help,
-                                        bool visible)
-{
-  Option option;
-
-  option.key          = key;
-  option.help         = help;
-  option.long_option  = long_option;
-  option.argument     = argument;
-  option.visible      = visible;
-
-  options.push_back(option);
-}
-
-bool CommandLine_Generic::next()
-{
-  if (current_option == parsed_options.end()) 
-    {
-      (current_option = parsed_options.begin());
-      return current_option != parsed_options.end();
-    }
-  else
-    {
-      return (++current_option) != parsed_options.end();
-    }
-}
-
-int CommandLine_Generic::get_key()
-{
-  return current_option-&gt;key;
-}
-
-std::string CommandLine_Generic::get_argument()
-{
-  return current_option-&gt;argument;
-}

Deleted: trunk/windstille/src/command_line_generic.hpp
===================================================================
--- trunk/windstille/src/command_line_generic.hpp	2009-02-11 21:22:01 UTC (rev 2464)
+++ trunk/windstille/src/command_line_generic.hpp	2009-02-11 21:47:00 UTC (rev 2465)
@@ -1,111 +0,0 @@
-/*
-**  ClanLib SDK
-**  Copyright (c) 1997-2005 The ClanLib Team
-**
-**  This software is provided 'as-is', without any express or implied
-**  warranty.  In no event will the authors be held liable for any damages
-**  arising from the use of this software.
-**
-**  Permission is granted to anyone to use this software for any purpose,
-**  including commercial applications, and to alter it and redistribute it
-**  freely, subject to the following restrictions:
-**
-**  1. The origin of this software must not be misrepresented; you must not
-**     claim that you wrote the original software. If you use this software
-**     in a product, an acknowledgment in the product documentation would be
-**     appreciated but is not required.
-**  2. Altered source versions must be plainly marked as such, and must not be
-**     misrepresented as being the original software.
-**  3. This notice may not be removed or altered from any source distribution.
-**
-**  Note: Some of the libraries ClanLib may link to may have additional
-**  requirements or restrictions.
-**
-**  File Author(s):
-**
-**    Magnus Norddahl
-**    (if your name is missing here, please add it)
-*/
-
-#ifndef HEADER_COMMAND_LINE_GENERIC_HPP
-#define HEADER_COMMAND_LINE_GENERIC_HPP
-
-#if _MSC_VER &gt; 1000
-#pragma once
-#endif
-
-#include &lt;string&gt;
-#include &lt;vector&gt;
-#include &quot;command_line.hpp&quot;
-
-class CommandLine_Generic
-{
-private:
-	int help_indent;
-
-	std::string programm;
-
-	struct Option 
-	{
-		int key;
-		std::string help;
-		std::string long_option;
-		std::string argument;
-		bool visible;
-	};
-  
-	typedef std::vector&lt;Option&gt; Options;
-	Options options;
-
-	struct ParsedOption
-	{
-		int key;
-		std::string argument;
-	};
-
-	typedef std::vector&lt;ParsedOption&gt; ParsedOptions;
-	ParsedOptions parsed_options;
-	ParsedOptions::iterator current_option;
-
-	enum
-	{
-		GROUP     = -3,
-		DOC       = -4,
-		USAGE     = -5
-	};
-
-public:  
-	CommandLine_Generic();
-
-	void set_help_indent(int i) { help_indent = i; }
-
-	void add_usage(const std::string&amp; usage);
-	void add_doc(const std::string&amp; doc);
-	void add_group(const std::string&amp; grouptopic);
-  
-	void add_option(int key,
-						 const std::string&amp; long_option, 
-						 const std::string&amp; argument,
-						 const std::string&amp; help,
-						 bool visible = true);
-
-	void parse_args(int argc, char** argv);
-	void print_help();
-  
-	bool next();
-	int get_key();
-	std::string get_argument();
-
-private:
-	void read_option(int id, const std::string&amp; argument);
-
-	/** Find the Option structure that matches \a short_option */
-	Option* lookup_short_option(char short_option);
-
-	/** Find the Option structure that matches \a long_option */
-	Option* lookup_long_option (const std::string&amp; long_option);
-};
-
-#endif
-
-/* EOF */

Modified: trunk/windstille/src/config.cpp
===================================================================
--- trunk/windstille/src/config.cpp	2009-02-11 21:22:01 UTC (rev 2464)
+++ trunk/windstille/src/config.cpp	2009-02-11 21:47:00 UTC (rev 2465)
@@ -22,8 +22,8 @@
 #include &lt;memory&gt;
 #include &lt;iostream&gt;
 #include &quot;config.hpp&quot;
-#include &quot;sexpr_file_reader.hpp&quot;
-#include &quot;command_line.hpp&quot;
+#include &quot;util/sexpr_file_reader.hpp&quot;
+#include &quot;util/command_line.hpp&quot;
 #include &quot;globals.hpp&quot;
 
 #define _(A) A

Modified: trunk/windstille/src/console.cpp
===================================================================
--- trunk/windstille/src/console.cpp	2009-02-11 21:22:01 UTC (rev 2464)
+++ trunk/windstille/src/console.cpp	2009-02-11 21:47:00 UTC (rev 2465)
@@ -463,7 +463,7 @@
           const SQChar *s;
           if (SQ_SUCCEEDED(sq_getstring(v,-2, &amp;s)))
             {
-              console &lt;&lt; s &lt;&lt; &quot; -&gt; &quot; &lt;&lt; scripting::squirrel2string(v, -1) &lt;&lt; std::endl;
+              console &lt;&lt; s &lt;&lt; &quot; -&gt; &quot; &lt;&lt; Scripting::squirrel2string(v, -1) &lt;&lt; std::endl;
             }
           else
             {
@@ -506,7 +506,7 @@
               {
                 // FIXME: This does only work when somebody is doing a 'return', i.e. almost never
                 if (sq_gettype(vm, -1) != OT_NULL)
-                  console &lt;&lt; scripting::squirrel2string(vm, -1) &lt;&lt; std::endl;
+                  console &lt;&lt; Scripting::squirrel2string(vm, -1) &lt;&lt; std::endl;
                 // else
                 //   console &lt;&lt; &quot;(null)&quot; &lt;&lt; std::endl;
               }

Copied: trunk/windstille/src/display/color.hpp (from rev 2463, trunk/windstille/src/color.hpp)


Property changes on: trunk/windstille/src/display/color.hpp
___________________________________________________________________
Name: svn:keywords
   + Id
Name: svn:mergeinfo
   + 

Modified: trunk/windstille/src/engine/game_object.hpp
===================================================================
--- trunk/windstille/src/engine/game_object.hpp	2009-02-11 21:22:01 UTC (rev 2464)
+++ trunk/windstille/src/engine/game_object.hpp	2009-02-11 21:47:00 UTC (rev 2465)
@@ -20,7 +20,7 @@
 #define HEADER_WINDSTILLE_GAME_OBJECT_HPP
 
 #include &lt;string&gt;
-#include &quot;file_reader.hpp&quot;
+#include &quot;util/file_reader.hpp&quot;
 #include &quot;display/scene_context.hpp&quot;
 #include &quot;refcounter.hpp&quot;
 

Modified: trunk/windstille/src/engine/script_manager.cpp
===================================================================
--- trunk/windstille/src/engine/script_manager.cpp	2009-02-11 21:22:01 UTC (rev 2464)
+++ trunk/windstille/src/engine/script_manager.cpp	2009-02-11 21:47:00 UTC (rev 2465)
@@ -18,7 +18,7 @@
 #include &quot;scripting/squirrel_error.hpp&quot;
 #include &quot;physfs/physfs_stream.hpp&quot;
 
-using namespace scripting;
+using namespace Scripting;
 
 ScriptManager* script_manager = 0;
 
@@ -58,7 +58,7 @@
   sq_setprintfunc(v, printfunc);
   
   // register windstille API
-  scripting::register_windstille_wrapper(v);
+  Scripting::register_windstille_wrapper(v);
 }
 
 ScriptManager::~ScriptManager()

Modified: trunk/windstille/src/engine/sector.cpp
===================================================================
--- trunk/windstille/src/engine/sector.cpp	2009-02-11 21:22:01 UTC (rev 2464)
+++ trunk/windstille/src/engine/sector.cpp	2009-02-11 21:47:00 UTC (rev 2465)
@@ -19,7 +19,7 @@
 #include &lt;iostream&gt;
 #include &lt;sstream&gt;
 #include &lt;stdexcept&gt;
-#include &quot;sexpr_file_reader.hpp&quot;
+#include &quot;util/sexpr_file_reader.hpp&quot;
 #include &quot;globals.hpp&quot;
 #include &quot;display/scene_context.hpp&quot;
 #include &quot;objects/background_gradient.hpp&quot;
@@ -263,7 +263,7 @@
 void
 Sector::remove_object_from_squirrel(GameObject* object)
 {
-  using namespace scripting;
+  using namespace Scripting;
 
   // get objects table
   HSQUIRRELVM v = script_manager-&gt;get_vm();
@@ -295,30 +295,30 @@
 {
   ScriptableObject* script_obj = dynamic_cast&lt;ScriptableObject*&gt; (object);
   if(script_obj) {
-    create_squirrel_instance(v, new scripting::ScriptableObject(script_obj),
+    create_squirrel_instance(v, new Scripting::ScriptableObject(script_obj),
                              true);
     return;
   }
   
   TestObject* tobj = dynamic_cast&lt;TestObject*&gt; (object);
   if(tobj) {
-    create_squirrel_instance(v, new scripting::TestObject(tobj), true);
+    create_squirrel_instance(v, new Scripting::TestObject(tobj), true);
     return;
   }                                                                             
 
   Player* player = dynamic_cast&lt;Player*&gt; (object);
   if(player) {
-    create_squirrel_instance(v, new scripting::Player(player), true);
+    create_squirrel_instance(v, new Scripting::Player(player), true);
     return;
   }
 
-  create_squirrel_instance(v, new scripting::GameObject(object), true);
+  create_squirrel_instance(v, new Scripting::GameObject(object), true);
 }
 
 void
 Sector::expose_object_to_squirrel(GameObject* object)
 {
-  using namespace scripting;
+  using namespace Scripting;
 
   // get objects table
   HSQUIRRELVM v = script_manager-&gt;get_vm();

Modified: trunk/windstille/src/engine/sector.hpp
===================================================================
--- trunk/windstille/src/engine/sector.hpp	2009-02-11 21:22:01 UTC (rev 2464)
+++ trunk/windstille/src/engine/sector.hpp	2009-02-11 21:47:00 UTC (rev 2465)
@@ -21,7 +21,7 @@
 
 #include &lt;string&gt;
 #include &lt;vector&gt;
-#include &quot;color.hpp&quot;
+#include &quot;display/color.hpp&quot;
 
 class FileReader;
 class GameObject;

Deleted: trunk/windstille/src/file_reader.cpp
===================================================================
--- trunk/windstille/src/file_reader.cpp	2009-02-11 21:22:01 UTC (rev 2464)
+++ trunk/windstille/src/file_reader.cpp	2009-02-11 21:47:00 UTC (rev 2465)
@@ -1,169 +0,0 @@
-/*
-**  Windstille - A Sci-Fi Action-Adventure Game
-**  Copyright (C) 2002 Ingo Ruhnke &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/windstille-commit">grumbel at gmx.de</A>&gt;
-**
-**  This program is free software: you can redistribute it and/or modify
-**  it under the terms of the GNU General Public License as published by
-**  the Free Software Foundation, either version 3 of the License, or
-**  (at your option) any later version.
-**  
-**  This program is distributed in the hope that it will be useful,
-**  but WITHOUT ANY WARRANTY; without even the implied warranty of
-**  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
-**  GNU General Public License for more details.
-**  
-**  You should have received a copy of the GNU General Public License
-**  along with this program.  If not, see &lt;<A HREF="http://www.gnu.org/licenses/">http://www.gnu.org/licenses/</A>&gt;.
-*/
-
-#include &quot;lisp/parser.hpp&quot;
-#include &quot;sexpr_file_reader.hpp&quot;
-#include &quot;file_reader.hpp&quot;
-#include &quot;file_reader_impl.hpp&quot;
-
-FileReader
-FileReader::parse(const std::string&amp; filename)
-{
-  lisp::Lisp* root = lisp::Parser::parse(filename);
-  if (!root)
-    {
-      std::ostringstream msg;
-      msg &lt;&lt; &quot;'&quot; &lt;&lt; filename &lt;&lt; &quot;': file not found&quot;;
-      throw std::runtime_error(msg.str());
-    }
-  else if (root &amp;&amp; root-&gt;get_type() == lisp::Lisp::TYPE_LIST &amp;&amp; root-&gt;get_list_size() &gt;= 1)
-    {
-      return SExprFileReader(root, root-&gt;get_list_elem(0));
-    }
-  else
-    {
-      std::ostringstream msg;
-      msg &lt;&lt; &quot;'&quot; &lt;&lt; filename &lt;&lt; &quot;': not a valid sexpr file&quot;;
-      throw std::runtime_error(msg.str());
-    }
-}
-
-FileReader::FileReader(boost::shared_ptr&lt;FileReaderImpl&gt; impl_)
-  : impl(impl_)
-{
-}
-
-FileReader::FileReader()
-{
-}
-
-std::string
-FileReader::get_name() const
-{
-  if (impl.get())
-    return impl-&gt;get_name();
-  else
-    return &quot;&quot;;
-}
-
-bool
-FileReader::read(const char* name, int&amp; value)
-{
-  if (impl.get())
-    return impl-&gt;read_int(name, value);
-  else
-    return false;
-}
-
-bool
-FileReader::read(const char* name, float&amp; value)
-{
-  if (impl.get())
-    return impl-&gt;read_float(name, value);
-  else
-    return false;
-}
-
-bool
-FileReader::read(const char* name, bool&amp; value)
-{
-  if (impl.get())
-    return impl-&gt;read_bool(name, value);
-  else
-    return false;
-}
-
-bool
-FileReader::read(const char* name, std::string&amp; value)
-{
-  if (impl.get())
-    return impl-&gt;read_string(name, value);
-  else
-    return false;
-}
-
-bool
-FileReader::read(const char* name, std::vector&lt;int&gt;&amp; value)
-{
-  if (impl.get())
-    return impl-&gt;get(name, value);
-  else
-    return false;
-}
-
-bool
-FileReader::read(const char* name, std::vector&lt;bool&gt;&amp;   value)
-{
-  if (impl.get())
-    return impl-&gt;get(name, value);
-  else
-    return false;  
-}
-
-bool
-FileReader::read(const char* name, std::vector&lt;std::string&gt;&amp; value)
-{
-  if (impl.get())
-    return impl-&gt;get(name, value);
-  else
-    return false;
-}
-
-bool
-FileReader::read(const char* name, std::vector&lt;float&gt;&amp; value)
-{
-  if (impl.get())
-    return impl-&gt;get(name, value);
-  else
-    return false;
-}
-
-bool
-FileReader::read(const char* name, FileReader&amp; reader)
-{
-  if (impl.get())
-    return impl-&gt;read_section(name, reader);
-  else
-    return false;
-}
-
-std::vector&lt;std::string&gt;
-FileReader::get_section_names() const
-{
-  if (impl.get())
-    return impl-&gt;get_section_names();
-  else
-    return std::vector&lt;std::string&gt;();
-}
-
-std::vector&lt;FileReader&gt;
-FileReader::get_sections() const
-{
-  if (impl.get())
-    return impl-&gt;get_sections();
-  else
-    return std::vector&lt;FileReader&gt;();
-}
-
-void
-FileReader::print_unused_warnings(const std::string&amp; title) const
-{
-  // unimplemented
-}
-
-/* EOF */

Deleted: trunk/windstille/src/file_reader.hpp
===================================================================
--- trunk/windstille/src/file_reader.hpp	2009-02-11 21:22:01 UTC (rev 2464)
+++ trunk/windstille/src/file_reader.hpp	2009-02-11 21:47:00 UTC (rev 2465)
@@ -1,86 +0,0 @@
-/*
-**  Windstille - A Sci-Fi Action-Adventure Game
-**  Copyright (C) 2002 Ingo Ruhnke &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/windstille-commit">grumbel at gmx.de</A>&gt;
-**
-**  This program is free software: you can redistribute it and/or modify
-**  it under the terms of the GNU General Public License as published by
-**  the Free Software Foundation, either version 3 of the License, or
-**  (at your option) any later version.
-**  
-**  This program is distributed in the hope that it will be useful,
-**  but WITHOUT ANY WARRANTY; without even the implied warranty of
-**  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
-**  GNU General Public License for more details.
-**  
-**  You should have received a copy of the GNU General Public License
-**  along with this program.  If not, see &lt;<A HREF="http://www.gnu.org/licenses/">http://www.gnu.org/licenses/</A>&gt;.
-*/
-
-#ifndef HEADER_WINDSTILLE_FILE_READER_HPP
-#define HEADER_WINDSTILLE_FILE_READER_HPP
-
-#include &lt;string&gt;
-#include &lt;vector&gt;
-#include &quot;getter.hpp&quot;
-#include &lt;boost/shared_ptr.hpp&gt;
-
-class FileReaderImpl;
-
-/** Interface to read name/value pairs out of some kind of file or
-    structure */
-class FileReader
-{
-public:
-  static FileReader parse(const std::string&amp; filename);
-
-  FileReader(boost::shared_ptr&lt;FileReaderImpl&gt; impl_);
-  FileReader();
-
-  /** Name of the current section */
-  std::string get_name() const;
-
-  std::vector&lt;std::string&gt; get_section_names() const;
-  std::vector&lt;FileReader&gt;  get_sections() const;
-
-  /** Generic getter function for non-standard types, see getter.hpp */
-  template&lt;typename T&gt;
-  bool get(const char* name, T&amp; v) {
-    return ::get(*this, name, v);
-  }
- 
-  template&lt;class E, class T&gt;
-  bool get(const char* name, E&amp; value, T enum2string)
-  {
-    std::string str;
-    if (get(name, str))
-      {
-        value = enum2string(str);
-        return true;
-      }
-
-    return false;
-  }
-
-  // Primitive types
-  // FIXME: Is there any nice way to not use two different names?
-  bool read(const char* name, FileReader&amp; v);
-
-  bool read(const char* name, int&amp;   v);
-  bool read(const char* name, float&amp; v);
-  bool read(const char* name, bool&amp; v);
-  bool read(const char* name, std::string&amp; v);
-
-  bool read(const char* name, std::vector&lt;bool&gt;&amp;   v);
-  bool read(const char* name, std::vector&lt;int&gt;&amp;   v);
-  bool read(const char* name, std::vector&lt;float&gt;&amp; v);
-  bool read(const char* name, std::vector&lt;std::string&gt;&amp; v);
-
-  void print_unused_warnings(const std::string&amp; title) const;
-
-private:
-  boost::shared_ptr&lt;FileReaderImpl&gt; impl;
-};
-
-#endif
-
-/* EOF */

Deleted: trunk/windstille/src/file_reader_impl.hpp
===================================================================
--- trunk/windstille/src/file_reader_impl.hpp	2009-02-11 21:22:01 UTC (rev 2464)
+++ trunk/windstille/src/file_reader_impl.hpp	2009-02-11 21:47:00 UTC (rev 2465)
@@ -1,60 +0,0 @@
-/*
-**  Windstille - A Sci-Fi Action-Adventure Game
-**  Copyright (C) 2002 Ingo Ruhnke &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/windstille-commit">grumbel at gmx.de</A>&gt;
-**
-**  This program is free software: you can redistribute it and/or modify
-**  it under the terms of the GNU General Public License as published by
-**  the Free Software Foundation, either version 3 of the License, or
-**  (at your option) any later version.
-**  
-**  This program is distributed in the hope that it will be useful,
-**  but WITHOUT ANY WARRANTY; without even the implied warranty of
-**  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
-**  GNU General Public License for more details.
-**  
-**  You should have received a copy of the GNU General Public License
-**  along with this program.  If not, see &lt;<A HREF="http://www.gnu.org/licenses/">http://www.gnu.org/licenses/</A>&gt;.
-*/
-
-#ifndef HEADER_WINDSTILLE_FILE_READER_IMPL_HPP
-#define HEADER_WINDSTILLE_FILE_READER_IMPL_HPP
-
-#include &lt;vector&gt;
-#include &lt;string&gt;
-
-class Size;
-class Color;
-class Vector;
-class Vector3;
-
-class FileReader;
-class ResDescriptor;
-
-/** */
-class FileReaderImpl
-{
-public:
-  FileReaderImpl() {}
-  virtual ~FileReaderImpl() {}
-
-  virtual std::string get_name()                           const =0;
-
-  virtual bool read_bool  (const char* name, bool&amp;)        const =0;
-  virtual bool read_int   (const char* name, int&amp;)         const =0;
-  virtual bool read_float (const char* name, float&amp;)       const =0;
-  virtual bool read_string(const char* name, std::string&amp;) const =0;
-
-  virtual bool get(const char* name, std::vector&lt;bool&gt;&amp;   v) const =0;
-  virtual bool get(const char* name, std::vector&lt;int&gt;&amp;   v) const =0;
-  virtual bool get(const char* name, std::vector&lt;float&gt;&amp; v) const =0;
-  virtual bool get(const char* name, std::vector&lt;std::string&gt;&amp; v) const =0;
-
-  virtual bool read_section(const char* name, FileReader&amp;)   const =0;
-  virtual std::vector&lt;FileReader&gt; get_sections() const =0;
-  virtual std::vector&lt;std::string&gt; get_section_names() const =0;
-};
-
-
-#endif
-
-/* EOF */

Modified: trunk/windstille/src/font/ttf_font.hpp
===================================================================
--- trunk/windstille/src/font/ttf_font.hpp	2009-02-11 21:22:01 UTC (rev 2464)
+++ trunk/windstille/src/font/ttf_font.hpp	2009-02-11 21:47:00 UTC (rev 2465)
@@ -22,7 +22,7 @@
 #include &lt;string&gt;
 #include &lt;GL/glew.h&gt;
 #include &lt;GL/gl.h&gt;
-#include &quot;color.hpp&quot;
+#include &quot;display/color.hpp&quot;
 #include &quot;math/rect.hpp&quot;
 #include &quot;display/texture.hpp&quot;
 

Deleted: trunk/windstille/src/getter.cpp
===================================================================
--- trunk/windstille/src/getter.cpp	2009-02-11 21:22:01 UTC (rev 2464)
+++ trunk/windstille/src/getter.cpp	2009-02-11 21:47:00 UTC (rev 2465)
@@ -1,136 +0,0 @@
-/*
-**  Windstille - A Sci-Fi Action-Adventure Game
-**  Copyright (C) 2007 Ingo Ruhnke &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/windstille-commit">grumbel at gmx.de</A>&gt;
-**
-**  This program is free software: you can redistribute it and/or modify
-**  it under the terms of the GNU General Public License as published by
-**  the Free Software Foundation, either version 3 of the License, or
-**  (at your option) any later version.
-**  
-**  This program is distributed in the hope that it will be useful,
-**  but WITHOUT ANY WARRANTY; without even the implied warranty of
-**  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
-**  GNU General Public License for more details.
-**  
-**  You should have received a copy of the GNU General Public License
-**  along with this program.  If not, see &lt;<A HREF="http://www.gnu.org/licenses/">http://www.gnu.org/licenses/</A>&gt;.
-*/
-
-#include &quot;math/vector.hpp&quot;
-#include &quot;math/vector3.hpp&quot;
-#include &quot;math/quaternion.hpp&quot;
-#include &quot;math/matrix.hpp&quot;
-#include &quot;color.hpp&quot;
-#include &quot;file_reader.hpp&quot;
-#include &quot;getter.hpp&quot;
-
-bool get(FileReader&amp; reader, const char* name, Vector&amp;  value)
-{
-  std::vector&lt;float&gt; floats;
-  if (reader.get(name, floats) &amp;&amp; floats.size() == 2) {
-    value.x = floats[0];
-    value.y = floats[1];
-    return true;
-  } else {
-    return false;
-  }  
-}
-
-bool get(FileReader&amp; reader, const char* name, Vector3&amp; value)
-{
-  std::vector&lt;float&gt; floats;
-  if (reader.get(name, floats) &amp;&amp; floats.size() == 3) {
-    value.x = floats[0];
-    value.y = floats[1];
-    value.z = floats[2];
-    return true;
-  } else {
-    return false;
-  }
-}
-
-bool get(FileReader&amp; reader, const char* name, Quaternion&amp; value)
-{
-  std::vector&lt;float&gt; floats;
-  if (reader.get(name, floats) &amp;&amp; floats.size() == 4) {
-    value.w = floats[0];
-    value.x = floats[1];
-    value.y = floats[2];
-    value.z = floats[3];
-    return true;
-  } else {
-    return false;
-  }
-}
-
-bool get(FileReader&amp; reader, const char* name, Matrix&amp; m)
-{
-  std::vector&lt;float&gt; floats;
-  if (reader.get(name, floats) &amp;&amp; floats.size() == 16) {  
-    m[ 0] = floats[0];
-    m[ 4] = floats[1];
-    m[ 8] = floats[2];
-    m[12] = floats[3];
-    m[ 1] = floats[4];
-    m[ 5] = floats[5];
-    m[ 9] = floats[6];
-    m[13] = floats[7];
-    m[ 2] = floats[8];
-    m[ 6] = floats[9];
-    m[10] = floats[10];
-    m[14] = floats[11];
-    m[ 3] = floats[12];
-    m[ 7] = floats[13];
-    m[11] = floats[14];
-    m[15] = floats[15];
-    return true;
-    // FIXME: Could add code to handel 3x3 matrixes
-  } else {
-    return false;
-  }
-}
-
-bool get(FileReader&amp; reader, const char* name, Color&amp; value)
-{
-  std::vector&lt;float&gt; floats;
-  if (reader.get(name, floats)) {
-    if (floats.size() == 3)
-      {
-        value.r = floats[0];
-        value.g = floats[1];
-        value.b = floats[2];
-        value.a = 1.0f;
-        return true;
-      }
-    else if (floats.size() == 4)
-      {
-        value.r = floats[0];
-        value.b = floats[1];
-        value.g = floats[2];
-        value.a = floats[3];
-        return true;
-      }
-    else
-      {
-        return false;
-      }
-  } else {
-    return false;
-  } 
-}
-
-// Getters for primitive types
-// FIXME: Ugly, maybe there is a better way then to have different read/get names for the function
-bool get(FileReader&amp; reader, const char* name, FileReader&amp; v) { return reader.read(name, v); }
-
-bool get(FileReader&amp; reader, const char* name, int&amp;   v) { return reader.read(name, v); }
-bool get(FileReader&amp; reader, const char* name, float&amp; v) { return reader.read(name, v); }
-bool get(FileReader&amp; reader, const char* name, bool&amp; v) { return reader.read(name, v); }
-bool get(FileReader&amp; reader, const char* name, std::string&amp; v) { return reader.read(name, v); }
-
-bool get(FileReader&amp; reader, const char* name, std::vector&lt;bool&gt;&amp;   v) { return reader.read(name, v); }
-bool get(FileReader&amp; reader, const char* name, std::vector&lt;int&gt;&amp;   v) { return reader.read(name, v); }
-bool get(FileReader&amp; reader, const char* name, std::vector&lt;float&gt;&amp; v) { return reader.read(name, v); }
-bool get(FileReader&amp; reader, const char* name, std::vector&lt;std::string&gt;&amp; v) { return reader.read(name, v); }
-
-/* EOF */

Deleted: trunk/windstille/src/getter.hpp
===================================================================
--- trunk/windstille/src/getter.hpp	2009-02-11 21:22:01 UTC (rev 2464)
+++ trunk/windstille/src/getter.hpp	2009-02-11 21:47:00 UTC (rev 2465)
@@ -1,52 +0,0 @@
-/*
-**  Windstille - A Sci-Fi Action-Adventure Game
-**  Copyright (C) 2007 Ingo Ruhnke &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/windstille-commit">grumbel at gmx.de</A>&gt;
-**
-**  This program is free software: you can redistribute it and/or modify
-**  it under the terms of the GNU General Public License as published by
-**  the Free Software Foundation, either version 3 of the License, or
-**  (at your option) any later version.
-**  
-**  This program is distributed in the hope that it will be useful,
-**  but WITHOUT ANY WARRANTY; without even the implied warranty of
-**  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
-**  GNU General Public License for more details.
-**  
-**  You should have received a copy of the GNU General Public License
-**  along with this program.  If not, see &lt;<A HREF="http://www.gnu.org/licenses/">http://www.gnu.org/licenses/</A>&gt;.
-*/
-
-#ifndef HEADER_WINDSTILLE_GETTER_HPP
-#define HEADER_WINDSTILLE_GETTER_HPP
-
-#include &quot;file_reader.hpp&quot;
-
-class FileReader;
-class Quaternion;
-class Color;
-class Vector;
-class Vector3;
-class Matrix;
-
-bool get(FileReader&amp; reader, const char* name, Matrix&amp; value);
-bool get(FileReader&amp; reader, const char* name, Quaternion&amp; value);
-bool get(FileReader&amp; reader, const char* name, Color&amp; value);
-bool get(FileReader&amp; reader, const char* name, Vector&amp;  value);
-bool get(FileReader&amp; reader, const char* name, Vector3&amp; value);
-
-// Primitive types
-bool get(FileReader&amp; reader, const char* name, FileReader&amp; v);
-
-bool get(FileReader&amp; reader, const char* name, int&amp;   v);
-bool get(FileReader&amp; reader, const char* name, float&amp; v);
-bool get(FileReader&amp; reader, const char* name, bool&amp; v);
-bool get(FileReader&amp; reader, const char* name, std::string&amp; v);
-
-bool get(FileReader&amp; reader, const char* name, std::vector&lt;bool&gt;&amp;   v);
-bool get(FileReader&amp; reader, const char* name, std::vector&lt;int&gt;&amp;   v); 
-bool get(FileReader&amp; reader, const char* name, std::vector&lt;float&gt;&amp; v);
-bool get(FileReader&amp; reader, const char* name, std::vector&lt;std::string&gt;&amp; v);
-
-#endif
-
-/* EOF */

Modified: trunk/windstille/src/gui/group_component.cpp
===================================================================
--- trunk/windstille/src/gui/group_component.cpp	2009-02-11 21:22:01 UTC (rev 2464)
+++ trunk/windstille/src/gui/group_component.cpp	2009-02-11 21:47:00 UTC (rev 2465)
@@ -18,7 +18,7 @@
 
 #include &lt;assert.h&gt;
 #include &quot;display/display.hpp&quot;
-#include &quot;color.hpp&quot;
+#include &quot;display/color.hpp&quot;
 #include &quot;font/fonts.hpp&quot;
 #include &quot;group_component.hpp&quot;
 

Modified: trunk/windstille/src/gui/slider.cpp
===================================================================
--- trunk/windstille/src/gui/slider.cpp	2009-02-11 21:22:01 UTC (rev 2464)
+++ trunk/windstille/src/gui/slider.cpp	2009-02-11 21:47:00 UTC (rev 2465)
@@ -18,7 +18,7 @@
 
 #include &quot;input/controller.hpp&quot;
 #include &quot;display/display.hpp&quot;
-#include &quot;color.hpp&quot;
+#include &quot;display/color.hpp&quot;
 #include &quot;slider.hpp&quot;
 
 namespace gui {

Modified: trunk/windstille/src/input/input_manager_sdl.cpp
===================================================================
--- trunk/windstille/src/input/input_manager_sdl.cpp	2009-02-11 21:22:01 UTC (rev 2464)
+++ trunk/windstille/src/input/input_manager_sdl.cpp	2009-02-11 21:47:00 UTC (rev 2465)
@@ -26,7 +26,7 @@
 #include &lt;vector&gt;
 #include &quot;math.hpp&quot;
 #include &quot;config.hpp&quot;
-#include &quot;file_reader.hpp&quot;
+#include &quot;util/file_reader.hpp&quot;
 #include &quot;controller_def.hpp&quot;
 #include &quot;input_manager_sdl.hpp&quot;
 #ifdef HAVE_CWIID

Copied: trunk/windstille/src/math/random.cpp (from rev 2463, trunk/windstille/src/random.cpp)


Property changes on: trunk/windstille/src/math/random.cpp
___________________________________________________________________
Name: svn:keywords
   + Id
Name: svn:mergeinfo
   + 
Name: svn:eol-style
   + native

Copied: trunk/windstille/src/math/random.hpp (from rev 2463, trunk/windstille/src/random.hpp)


Property changes on: trunk/windstille/src/math/random.hpp
___________________________________________________________________
Name: svn:keywords
   + Id
Name: svn:mergeinfo
   + 
Name: svn:eol-style
   + native

Modified: trunk/windstille/src/navigation/navigation_graph.cpp
===================================================================
--- trunk/windstille/src/navigation/navigation_graph.cpp	2009-02-11 21:22:01 UTC (rev 2464)
+++ trunk/windstille/src/navigation/navigation_graph.cpp	2009-02-11 21:47:00 UTC (rev 2465)
@@ -23,7 +23,7 @@
 #include &quot;display/display.hpp&quot;
 #include &quot;node.hpp&quot;
 #include &quot;segment.hpp&quot;
-#include &quot;file_reader.hpp&quot;
+#include &quot;util/file_reader.hpp&quot;
 #include &quot;segment_position.hpp&quot;
 #include &quot;navigation_graph.hpp&quot;
 

Modified: trunk/windstille/src/navigation_test.cpp
===================================================================
--- trunk/windstille/src/navigation_test.cpp	2009-02-11 21:22:01 UTC (rev 2464)
+++ trunk/windstille/src/navigation_test.cpp	2009-02-11 21:47:00 UTC (rev 2465)
@@ -20,7 +20,7 @@
 #include &lt;iostream&gt;
 #include &lt;GL/glew.h&gt;
 #include &lt;GL/gl.h&gt;
-#include &quot;sexpr_file_reader.hpp&quot;
+#include &quot;util/sexpr_file_reader.hpp&quot;
 #include &quot;input/controller.hpp&quot;
 #include &quot;display/display.hpp&quot;
 #include &quot;screen_manager.hpp&quot;

Modified: trunk/windstille/src/objects/box.cpp
===================================================================
--- trunk/windstille/src/objects/box.cpp	2009-02-11 21:22:01 UTC (rev 2464)
+++ trunk/windstille/src/objects/box.cpp	2009-02-11 21:47:00 UTC (rev 2465)
@@ -23,7 +23,7 @@
 #include &quot;collision/collision_engine.hpp&quot;
 #include &quot;math/vector.hpp&quot;
 #include &quot;tile/tile_map.hpp&quot;
-#include &quot;random.hpp&quot;
+#include &quot;math/random.hpp&quot;
 #include &quot;sprite2d/manager.hpp&quot;
 
 Box::Box(FileReader&amp; props)

Modified: trunk/windstille/src/objects/liquid.cpp
===================================================================
--- trunk/windstille/src/objects/liquid.cpp	2009-02-11 21:22:01 UTC (rev 2464)
+++ trunk/windstille/src/objects/liquid.cpp	2009-02-11 21:47:00 UTC (rev 2465)
@@ -17,7 +17,7 @@
 */
 
 #include &quot;display/vertex_array_drawing_request.hpp&quot;
-#include &quot;random.hpp&quot;
+#include &quot;math/random.hpp&quot;
 #include &quot;liquid.hpp&quot;
 
 #define SAMPLES 5

Modified: trunk/windstille/src/objects/nightvision.cpp
===================================================================
--- trunk/windstille/src/objects/nightvision.cpp	2009-02-11 21:22:01 UTC (rev 2464)
+++ trunk/windstille/src/objects/nightvision.cpp	2009-02-11 21:47:00 UTC (rev 2465)
@@ -17,7 +17,7 @@
 */
 
 #include &quot;globals.hpp&quot;
-#include &quot;random.hpp&quot;
+#include &quot;math/random.hpp&quot;
 #include &quot;math/matrix.hpp&quot;
 #include &quot;display/vertex_array_drawing_request.hpp&quot;
 #include &quot;display/texture_manager.hpp&quot;

Modified: trunk/windstille/src/objects/swarm.cpp
===================================================================
--- trunk/windstille/src/objects/swarm.cpp	2009-02-11 21:22:01 UTC (rev 2464)
+++ trunk/windstille/src/objects/swarm.cpp	2009-02-11 21:47:00 UTC (rev 2465)
@@ -23,7 +23,7 @@
 #include &quot;game_session.hpp&quot;
 #include &quot;view.hpp&quot;
 #include &quot;display/vertex_array_drawing_request.hpp&quot;
-#include &quot;random.hpp&quot;
+#include &quot;math/random.hpp&quot;
 #include &quot;swarm.hpp&quot;
 
 Swarm::Swarm(FileReader&amp; props)

Modified: trunk/windstille/src/objects/vrdummy.cpp
===================================================================
--- trunk/windstille/src/objects/vrdummy.cpp	2009-02-11 21:22:01 UTC (rev 2464)
+++ trunk/windstille/src/objects/vrdummy.cpp	2009-02-11 21:47:00 UTC (rev 2465)
@@ -16,7 +16,7 @@
 **  along with this program.  If not, see &lt;<A HREF="http://www.gnu.org/licenses/">http://www.gnu.org/licenses/</A>&gt;.
 */
 
-#include &quot;random.hpp&quot;
+#include &quot;math/random.hpp&quot;
 #include &quot;vrdummy.hpp&quot;
 
 VRDummy::VRDummy(FileReader&amp; props)

Modified: trunk/windstille/src/particle_viewer.cpp
===================================================================
--- trunk/windstille/src/particle_viewer.cpp	2009-02-11 21:22:01 UTC (rev 2464)
+++ trunk/windstille/src/particle_viewer.cpp	2009-02-11 21:47:00 UTC (rev 2465)
@@ -16,7 +16,7 @@
 **  along with this program.  If not, see &lt;<A HREF="http://www.gnu.org/licenses/">http://www.gnu.org/licenses/</A>&gt;.
 */
 
-#include &quot;sexpr_file_reader.hpp&quot;
+#include &quot;util/sexpr_file_reader.hpp&quot;
 #include &quot;input/controller.hpp&quot;
 #include &quot;screen_manager.hpp&quot;
 #include &quot;gui/gui_manager.hpp&quot;

Modified: trunk/windstille/src/particles/particle_system.cpp
===================================================================
--- trunk/windstille/src/particles/particle_system.cpp	2009-02-11 21:22:01 UTC (rev 2464)
+++ trunk/windstille/src/particles/particle_system.cpp	2009-02-11 21:47:00 UTC (rev 2465)
@@ -21,8 +21,8 @@
 #include &quot;particle_system.hpp&quot;
 #include &quot;display/scene_context.hpp&quot;
 #include &quot;math/vector.hpp&quot;
-#include &quot;color.hpp&quot;
-#include &quot;file_reader.hpp&quot;
+#include &quot;display/color.hpp&quot;
+#include &quot;util/file_reader.hpp&quot;
 #include &quot;spark_drawer.hpp&quot;
 #include &quot;deform_drawer.hpp&quot;
 #include &quot;surface_drawer.hpp&quot;

Modified: trunk/windstille/src/particles/particle_system.hpp
===================================================================
--- trunk/windstille/src/particles/particle_system.hpp	2009-02-11 21:22:01 UTC (rev 2464)
+++ trunk/windstille/src/particles/particle_system.hpp	2009-02-11 21:47:00 UTC (rev 2465)
@@ -21,7 +21,7 @@
 
 #include &lt;vector&gt;
 
-#include &quot;color.hpp&quot;
+#include &quot;display/color.hpp&quot;
 #include &quot;drawer.hpp&quot;
 #include &quot;engine/entity.hpp&quot;
 

Modified: trunk/windstille/src/particles/randomizer.hpp
===================================================================
--- trunk/windstille/src/particles/randomizer.hpp	2009-02-11 21:22:01 UTC (rev 2464)
+++ trunk/windstille/src/particles/randomizer.hpp	2009-02-11 21:47:00 UTC (rev 2465)
@@ -19,7 +19,7 @@
 #ifndef HEADER_WINDSTILLE_PARTICLES_RANDOMIZER_HPP
 #define HEADER_WINDSTILLE_PARTICLES_RANDOMIZER_HPP
 
-#include &quot;random.hpp&quot;
+#include &quot;math/random.hpp&quot;
 
 class Randomizer 
 {

Modified: trunk/windstille/src/particles/spark_drawer.cpp
===================================================================
--- trunk/windstille/src/particles/spark_drawer.cpp	2009-02-11 21:22:01 UTC (rev 2464)
+++ trunk/windstille/src/particles/spark_drawer.cpp	2009-02-11 21:47:00 UTC (rev 2465)
@@ -19,7 +19,7 @@
 #include &quot;display/drawing_request.hpp&quot;
 #include &quot;display/vertex_array_drawing_request.hpp&quot;
 #include &quot;particle_system.hpp&quot;
-#include &quot;color.hpp&quot;
+#include &quot;display/color.hpp&quot;
 #include &quot;spark_drawer.hpp&quot;
 
 SparkDrawer::SparkDrawer(FileReader&amp; props)

Deleted: trunk/windstille/src/random.cpp
===================================================================
--- trunk/windstille/src/random.cpp	2009-02-11 21:22:01 UTC (rev 2464)
+++ trunk/windstille/src/random.cpp	2009-02-11 21:47:00 UTC (rev 2465)
@@ -1,131 +0,0 @@
-/*
-**  Windstille - A Sci-Fi Action-Adventure Game
-**  Copyright (C) 2000,2005 Ingo Ruhnke &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/windstille-commit">grumbel at gmx.de</A>&gt;
-**
-**  This program is free software: you can redistribute it and/or modify
-**  it under the terms of the GNU General Public License as published by
-**  the Free Software Foundation, either version 3 of the License, or
-**  (at your option) any later version.
-**  
-**  This program is distributed in the hope that it will be useful,
-**  but WITHOUT ANY WARRANTY; without even the implied warranty of
-**  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
-**  GNU General Public License for more details.
-**  
-**  You should have received a copy of the GNU General Public License
-**  along with this program.  If not, see &lt;<A HREF="http://www.gnu.org/licenses/">http://www.gnu.org/licenses/</A>&gt;.
-*/
-
-#include &quot;random.hpp&quot;
-
-/* This file is based on:
- * A C-program for MT19937, with initialization improved 2002/1/26.
- *  Coded by Takuji Nishimura and Makoto Matsumoto.
- * <A HREF="http://www.math.sci.hiroshima-u.ac.jp/~m-mat/MT/MT2002/CODES/mt19937ar.c">http://www.math.sci.hiroshima-u.ac.jp/~m-mat/MT/MT2002/CODES/mt19937ar.c</A> 
- */
-
-Random::Random(unsigned long s)
-{
-  mt[0]= s &amp; 0xffffffffUL;
-  for (mti=1; mti&lt;N; mti++) {
-    mt[mti] =
-      (1812433253UL * (mt[mti-1] ^ (mt[mti-1] &gt;&gt; 30)) + mti);
-    /* See Knuth TAOCP Vol2. 3rd Ed. P.106 for multiplier. */
-    /* In the previous versions, MSBs of the seed affect   */
-    /* only MSBs of the array mt[].                        */
-    /* 2002/01/09 modified by Makoto Matsumoto             */
-    mt[mti] &amp;= 0xffffffffUL;
-    /* for &gt;32 bit machines */
-  }
-}
-
-unsigned long
-Random::rand()
-{
-  unsigned long y;
-  static unsigned long mag01[2]={0x0UL, MATRIX_A};
-  /* mag01[x] = x * MATRIX_A  for x=0,1 */
-
-  if (mti &gt;= N) { /* generate N words at one time */
-    unsigned long kk;
-
-    for (kk=0;kk&lt;N-M;kk++) {
-      y = (mt[kk]&amp;UPPER_MASK)|(mt[kk+1]&amp;LOWER_MASK);
-      mt[kk] = mt[kk+M] ^ (y &gt;&gt; 1) ^ mag01[y &amp; 0x1UL];
-    }
-    for (;kk&lt;N-1;kk++) {
-      y = (mt[kk]&amp;UPPER_MASK)|(mt[kk+1]&amp;LOWER_MASK);
-      mt[kk] = mt[kk+(M-N)] ^ (y &gt;&gt; 1) ^ mag01[y &amp; 0x1UL];
-    }
-    y = (mt[N-1]&amp;UPPER_MASK)|(mt[0]&amp;LOWER_MASK);
-    mt[N-1] = mt[M-1] ^ (y &gt;&gt; 1) ^ mag01[y &amp; 0x1UL];
-
-    mti = 0;
-  }
-  
-  y = mt[mti++];
-
-  /* Tempering */
-  y ^= (y &gt;&gt; 11);
-  y ^= (y &lt;&lt; 7) &amp; 0x9d2c5680UL;
-  y ^= (y &lt;&lt; 15) &amp; 0xefc60000UL;
-  y ^= (y &gt;&gt; 18);
-
-  return y;
-}
-
-long
-Random::rand(long range)
-{
-  return rand()/(0xffffffffUL/(range+1));
-}
-
-long
-Random::rand(int start, int end)
-{
-  return start + rand()/(0xffffffffUL/(end-start+1));
-}
-
-double
-Random::drand(double range)
-{
-  return drand()*range;
-}
-
-double
-Random::drand(double start, double end)
-{
-  return (start + (drand()*(end-start)));
-}
-
-/* generates a random number on [0,1]-real-interval */
-double
-Random::drand()
-{
-  return rand()*(1.0/4294967295.0);
-  /* divided by 2^32-1 */
-}
-
-int
-Random::sign()
-{
-  return (rand()%2)?-1:1;
-}
-
-Random rnd;
-
-#ifdef __TEST__
-#include &lt;iostream&gt;
-
-int main()
-{
-  Random random(5489UL);
-  for(int i = 0; i &lt; 1000000; ++i)
-    {
-      std::cout &lt;&lt; random.drand(0, 5) &lt;&lt; std::endl;
-    }
-  return 0;
-}
-#endif
-
-/* EOF */

Deleted: trunk/windstille/src/random.hpp
===================================================================
--- trunk/windstille/src/random.hpp	2009-02-11 21:22:01 UTC (rev 2464)
+++ trunk/windstille/src/random.hpp	2009-02-11 21:47:00 UTC (rev 2465)
@@ -1,64 +0,0 @@
-/*
-**  Windstille - A Sci-Fi Action-Adventure Game
-**  Copyright (C) 2000,2005 Ingo Ruhnke &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/windstille-commit">grumbel at gmx.de</A>&gt;
-**
-**  This program is free software: you can redistribute it and/or modify
-**  it under the terms of the GNU General Public License as published by
-**  the Free Software Foundation, either version 3 of the License, or
-**  (at your option) any later version.
-**  
-**  This program is distributed in the hope that it will be useful,
-**  but WITHOUT ANY WARRANTY; without even the implied warranty of
-**  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
-**  GNU General Public License for more details.
-**  
-**  You should have received a copy of the GNU General Public License
-**  along with this program.  If not, see &lt;<A HREF="http://www.gnu.org/licenses/">http://www.gnu.org/licenses/</A>&gt;.
-*/
-
-#ifndef HEADER_WINDSTILLE_RANDOM_HPP
-#define HEADER_WINDSTILLE_RANDOM_HPP
-
-/** */
-class Random
-{
-private:
-  /* Period parameters */
-  static const unsigned long N = 624;
-  static const unsigned long M = 397;
-  static const unsigned long MATRIX_A   = 0x9908b0dfUL;   /* constant vector a */
-  static const unsigned long UPPER_MASK = 0x80000000UL; /* most significant w-r bits */
-  static const unsigned long LOWER_MASK = 0x7fffffffUL; /* least significant r bits */
-
-  unsigned long mt[N]; /* the array for the state vector  */
-  unsigned long mti;
-
-public:
-  Random(unsigned long seed = 5489UL);
-
-  /** generates a random number on [0,0xffffffff]-interval */
-  unsigned long rand();
-
-  long rand(long range);
-  long rand(int start, int end);
-
-  /** Returns float random number between [start, end] */
-  double drand();
-
-  double drand(double range);
-
-  /** Returns a random number between \a start and \a end */
-  double drand(double start, double end);
-
-  /** Returns either 1 or -1 */
-  int sign();
-private:
-  Random (const Random&amp;);
-  Random&amp; operator= (const Random&amp;);
-};
-
-extern Random rnd;
-
-#endif
-
-/* EOF */

Deleted: trunk/windstille/src/response_curve.cpp
===================================================================
--- trunk/windstille/src/response_curve.cpp	2009-02-11 21:22:01 UTC (rev 2464)
+++ trunk/windstille/src/response_curve.cpp	2009-02-11 21:47:00 UTC (rev 2465)
@@ -1,83 +0,0 @@
-/*
-**  Windstille - A Sci-Fi Action-Adventure Game
-**  Copyright (C) 2005 Ingo Ruhnke &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/windstille-commit">grumbel at gmx.de</A>&gt;
-**
-**  This program is free software: you can redistribute it and/or modify
-**  it under the terms of the GNU General Public License as published by
-**  the Free Software Foundation, either version 3 of the License, or
-**  (at your option) any later version.
-**  
-**  This program is distributed in the hope that it will be useful,
-**  but WITHOUT ANY WARRANTY; without even the implied warranty of
-**  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
-**  GNU General Public License for more details.
-**  
-**  You should have received a copy of the GNU General Public License
-**  along with this program.  If not, see &lt;<A HREF="http://www.gnu.org/licenses/">http://www.gnu.org/licenses/</A>&gt;.
-*/
-
-#include &lt;assert.h&gt;
-#include &lt;iostream&gt;
-#include &quot;math.hpp&quot;
-#include &quot;response_curve.hpp&quot;
-
-ResponseCurve::ResponseCurve(float i_min_, float i_max_, const std::vector&lt;float&gt;&amp; samples_)
-  : i_min(i_min_),
-    i_max(i_max_),
-    samples(samples_)
-{
-  assert(i_max &gt; i_min);
-  assert(!samples.empty());
-}
-
-ResponseCurve::~ResponseCurve()
-{
-}
-
-float
-ResponseCurve::get(float v)
-{
-  if (samples.size() == 1)
-    {
-      return samples[0];
-    }
-  else
-    {
-      v = math::mid(i_min, v, i_max);
-
-      int   bucket_count = samples.size() - 1;
-      float bucket_size  = (i_max - i_min) / bucket_count;
-      
-      int bucket_index = int((v - i_min) / bucket_size);
-
-      float t = ((v - i_min) - (bucket_index * bucket_size)) / bucket_size;
-      
-      return ((1.0f - t) * samples[bucket_index]) + (t * samples[bucket_index + 1]);
-    }
-}
-
-#ifdef __TEST__
-#include &lt;iostream&gt;
-
-int main(int argc, char** argv)
-{
-  if (argc != 2)
-    {
-      std::cout &lt;&lt; &quot;Usage: &quot; &lt;&lt; argv[0] &lt;&lt; &quot; FLOAT&quot; &lt;&lt; std::endl;
-    }
-  else
-    {
-      float samples[] = { 0.0f, 0.25f, 0.75f, 1.0f };
-      std::vector&lt;float&gt; samples_vec(samples, samples+4);
-
-      std::cout &lt;&lt; &quot;Samples: &quot; &lt;&lt; samples_vec.size() &lt;&lt; std::endl;
-
-      ResponseCurve curve(0.0f, 1.0f, samples_vec);
-
-      std::cout &lt;&lt; curve.get(atof(argv[1])) &lt;&lt; std::endl;
-    }
-  return 0;
-}
-#endif
-
-/* EOF */

Deleted: trunk/windstille/src/response_curve.hpp
===================================================================
--- trunk/windstille/src/response_curve.hpp	2009-02-11 21:22:01 UTC (rev 2464)
+++ trunk/windstille/src/response_curve.hpp	2009-02-11 21:47:00 UTC (rev 2465)
@@ -1,45 +0,0 @@
-/*
-**  Windstille - A Sci-Fi Action-Adventure Game
-**  Copyright (C) 2005 Ingo Ruhnke &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/windstille-commit">grumbel at gmx.de</A>&gt;
-**
-**  This program is free software: you can redistribute it and/or modify
-**  it under the terms of the GNU General Public License as published by
-**  the Free Software Foundation, either version 3 of the License, or
-**  (at your option) any later version.
-**  
-**  This program is distributed in the hope that it will be useful,
-**  but WITHOUT ANY WARRANTY; without even the implied warranty of
-**  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
-**  GNU General Public License for more details.
-**  
-**  You should have received a copy of the GNU General Public License
-**  along with this program.  If not, see &lt;<A HREF="http://www.gnu.org/licenses/">http://www.gnu.org/licenses/</A>&gt;.
-*/
-
-#ifndef HEADER_WINDSTILLE_RESPONSE_CURVE_HPP
-#define HEADER_WINDSTILLE_RESPONSE_CURVE_HPP
-
-#include &lt;vector&gt;
-
-/** */
-class ResponseCurve
-{
-private:
-  float  i_min;
-  float  i_max;
-  std::vector&lt;float&gt; samples;
-
-public:
-  ResponseCurve(float i_min_, float i_max_, const std::vector&lt;float&gt;&amp; samples_);
-  ~ResponseCurve();
-
-  float get(float v);
-
-private:
-  ResponseCurve (const ResponseCurve&amp;);
-  ResponseCurve&amp; operator= (const ResponseCurve&amp;);
-};
-
-#endif
-
-/* EOF */

Modified: trunk/windstille/src/scripting/SConscript
===================================================================
--- trunk/windstille/src/scripting/SConscript	2009-02-11 21:22:01 UTC (rev 2464)
+++ trunk/windstille/src/scripting/SConscript	2009-02-11 21:47:00 UTC (rev 2465)
@@ -11,7 +11,7 @@
             ['interface.hpp', 'game_objects.hpp'])
 
 env.Depends(env.Command(['wrapper.cpp', 'wrapper.hpp'], 'miniswig.tmp',
-                        [&quot;$MINISWIG  --input $SOURCE --output-cpp ${TARGETS[0]} --output-hpp ${TARGETS[1]} --module windstille --select-namespace scripting&quot;]),
+                        [&quot;$MINISWIG  --input $SOURCE --output-cpp ${TARGETS[0]} --output-hpp ${TARGETS[1]} --module windstille --select-namespace Scripting&quot;]),
             miniswig)
 
 # EOF #

Modified: trunk/windstille/src/scripting/game_objects.cpp
===================================================================
--- trunk/windstille/src/scripting/game_objects.cpp	2009-02-11 21:22:01 UTC (rev 2464)
+++ trunk/windstille/src/scripting/game_objects.cpp	2009-02-11 21:47:00 UTC (rev 2465)
@@ -21,7 +21,7 @@
 #include &quot;engine/sector.hpp&quot;
 #include &quot;game_objects.hpp&quot;
 
-namespace scripting {
+namespace Scripting {
 
 const std::string&amp;
 GameObject::get_name() const
@@ -108,7 +108,7 @@
   obj()-&gt;start_flash(speed);
 }
 
-} // namespace scripting
+} // namespace Scripting
 
 /* EOF */
 

Modified: trunk/windstille/src/scripting/game_objects.hpp
===================================================================
--- trunk/windstille/src/scripting/game_objects.hpp	2009-02-11 21:22:01 UTC (rev 2464)
+++ trunk/windstille/src/scripting/game_objects.hpp	2009-02-11 21:47:00 UTC (rev 2465)
@@ -33,7 +33,7 @@
 typedef Entity _Entity;
 #endif
 
-namespace scripting
+namespace Scripting
 {
 
 class GameObject

Modified: trunk/windstille/src/scripting/interface.cpp
===================================================================
--- trunk/windstille/src/scripting/interface.cpp	2009-02-11 21:22:01 UTC (rev 2464)
+++ trunk/windstille/src/scripting/interface.cpp	2009-02-11 21:47:00 UTC (rev 2465)
@@ -30,11 +30,11 @@
 #include &quot;engine/camera.hpp&quot;
 #include &quot;config.hpp&quot;
 #include &quot;pda.hpp&quot;
-#include &quot;sexpr_file_reader.hpp&quot;
+#include &quot;util/sexpr_file_reader.hpp&quot;
 #include &quot;display/display.hpp&quot;
 #include &quot;controller_help_window.hpp&quot;
 
-namespace scripting
+namespace Scripting
 {
 
 void set_sector(const std::string&amp; filename)
@@ -338,6 +338,6 @@
   return 0;
 }
 
-} // namespace scripting
+} // namespace Scripting
 
 /* EOF */

Modified: trunk/windstille/src/scripting/interface.hpp
===================================================================
--- trunk/windstille/src/scripting/interface.hpp	2009-02-11 21:22:01 UTC (rev 2464)
+++ trunk/windstille/src/scripting/interface.hpp	2009-02-11 21:47:00 UTC (rev 2465)
@@ -24,7 +24,7 @@
 #include &lt;squirrel.h&gt;
 #endif
 
-namespace scripting {
+namespace Scripting {
 
 void set_sector(const std::string&amp; filename);
 
@@ -116,7 +116,7 @@
  */
 SQInteger spawn_object(HSQUIRRELVM v) __custom;
 
-} // namespace scripting
+} // namespace Scripting
 
 #endif
 

Modified: trunk/windstille/src/scripting/squirrel_error.cpp
===================================================================
--- trunk/windstille/src/scripting/squirrel_error.cpp	2009-02-11 21:22:01 UTC (rev 2464)
+++ trunk/windstille/src/scripting/squirrel_error.cpp	2009-02-11 21:47:00 UTC (rev 2465)
@@ -3,7 +3,7 @@
 #include &quot;squirrel_error.hpp&quot;
 #include &lt;sstream&gt;
 
-namespace scripting
+namespace Scripting
 {
 
 SquirrelError::SquirrelError(HSQUIRRELVM v, const std::string&amp; message) throw()

Modified: trunk/windstille/src/scripting/squirrel_error.hpp
===================================================================
--- trunk/windstille/src/scripting/squirrel_error.hpp	2009-02-11 21:22:01 UTC (rev 2464)
+++ trunk/windstille/src/scripting/squirrel_error.hpp	2009-02-11 21:47:00 UTC (rev 2465)
@@ -22,7 +22,7 @@
 #include &lt;squirrel.h&gt;
 #include &lt;stdexcept&gt;
 
-namespace scripting
+namespace Scripting
 {
 
 /** Exception class for squirrel errors, it takes a squirrelvm and uses

Modified: trunk/windstille/src/scripting/util.cpp
===================================================================
--- trunk/windstille/src/scripting/util.cpp	2009-02-11 21:22:01 UTC (rev 2464)
+++ trunk/windstille/src/scripting/util.cpp	2009-02-11 21:47:00 UTC (rev 2465)
@@ -28,7 +28,7 @@
 
 #include &quot;util.hpp&quot;
 
-namespace scripting {
+namespace Scripting {
 
 std::string sq_to_lisp_string(std::string sq_str)
 {
@@ -412,6 +412,6 @@
   writer.end_list(&quot;squirrel-state&quot;);
 }
 
-} // namespace scripting
+} // namespace Scripting
 
 /* EOF */

Modified: trunk/windstille/src/scripting/util.hpp
===================================================================
--- trunk/windstille/src/scripting/util.hpp	2009-02-11 21:22:01 UTC (rev 2464)
+++ trunk/windstille/src/scripting/util.hpp	2009-02-11 21:47:00 UTC (rev 2465)
@@ -27,7 +27,7 @@
 class Lisp;
 };
 
-namespace scripting {
+namespace Scripting {
 
 // Squirrel to Lisp
 void        table_to_lisp(HSQUIRRELVM v, int table_idx, std::vector&lt;lisp::Lisp*&gt;&amp; entries);
@@ -45,7 +45,7 @@
 void save_squirrel_table(HSQUIRRELVM v, int table_idx, const std::string&amp; file);
 void load_squirrel_table(HSQUIRRELVM v, int table_idx, const std::string&amp; file);
 
-} // namespace scripting
+} // namespace Scripting
 
 #endif
 

Modified: trunk/windstille/src/scripting/wrapper.cpp
===================================================================
--- trunk/windstille/src/scripting/wrapper.cpp	2009-02-11 21:22:01 UTC (rev 2464)
+++ trunk/windstille/src/scripting/wrapper.cpp	2009-02-11 21:47:00 UTC (rev 2465)
@@ -13,14 +13,14 @@
 #include &quot;squirrel_error.hpp&quot;
 #include &quot;wrapper.interface.hpp&quot;
 
-namespace scripting
+namespace Scripting
 {
 namespace Wrapper
 {
 
 static SQInteger GameObject_release_hook(SQUserPointer ptr, SQInteger )
 {
-  scripting::GameObject* _this = reinterpret_cast&lt;scripting::GameObject*&gt; (ptr);
+  Scripting::GameObject* _this = reinterpret_cast&lt;Scripting::GameObject*&gt; (ptr);
   delete _this;
   return 0;
 }
@@ -32,7 +32,7 @@
     sq_throwerror(vm, _SC(&quot;'get_name' called without instance&quot;));
     return SQ_ERROR;
   }
-  scripting::GameObject* _this = reinterpret_cast&lt;scripting::GameObject*&gt; (data);
+  Scripting::GameObject* _this = reinterpret_cast&lt;Scripting::GameObject*&gt; (data);
 
   try {
     const std::string&amp; return_value = _this-&gt;get_name();
@@ -57,7 +57,7 @@
     sq_throwerror(vm, _SC(&quot;'remove' called without instance&quot;));
     return SQ_ERROR;
   }
-  scripting::GameObject* _this = reinterpret_cast&lt;scripting::GameObject*&gt; (data);
+  Scripting::GameObject* _this = reinterpret_cast&lt;Scripting::GameObject*&gt; (data);
 
   try {
     _this-&gt;remove();
@@ -81,7 +81,7 @@
     sq_throwerror(vm, _SC(&quot;'set_active' called without instance&quot;));
     return SQ_ERROR;
   }
-  scripting::GameObject* _this = reinterpret_cast&lt;scripting::GameObject*&gt; (data);
+  Scripting::GameObject* _this = reinterpret_cast&lt;Scripting::GameObject*&gt; (data);
   SQBool arg0;
   if(SQ_FAILED(sq_getbool(vm, 2, &amp;arg0))) {
     sq_throwerror(vm, _SC(&quot;Argument 1 not a bool&quot;));
@@ -110,7 +110,7 @@
     sq_throwerror(vm, _SC(&quot;'set_parent' called without instance&quot;));
     return SQ_ERROR;
   }
-  scripting::GameObject* _this = reinterpret_cast&lt;scripting::GameObject*&gt; (data);
+  Scripting::GameObject* _this = reinterpret_cast&lt;Scripting::GameObject*&gt; (data);
   const SQChar* arg0;
   if(SQ_FAILED(sq_getstring(vm, 2, &amp;arg0))) {
     sq_throwerror(vm, _SC(&quot;Argument 1 not a string&quot;));
@@ -134,7 +134,7 @@
 
 static SQInteger TestObject_release_hook(SQUserPointer ptr, SQInteger )
 {
-  scripting::TestObject* _this = reinterpret_cast&lt;scripting::TestObject*&gt; (ptr);
+  Scripting::TestObject* _this = reinterpret_cast&lt;Scripting::TestObject*&gt; (ptr);
   delete _this;
   return 0;
 }
@@ -146,7 +146,7 @@
     sq_throwerror(vm, _SC(&quot;'set_sprite' called without instance&quot;));
     return SQ_ERROR;
   }
-  scripting::TestObject* _this = reinterpret_cast&lt;scripting::TestObject*&gt; (data);
+  Scripting::TestObject* _this = reinterpret_cast&lt;Scripting::TestObject*&gt; (data);
   const SQChar* arg0;
   if(SQ_FAILED(sq_getstring(vm, 2, &amp;arg0))) {
     sq_throwerror(vm, _SC(&quot;Argument 1 not a string&quot;));
@@ -175,7 +175,7 @@
     sq_throwerror(vm, _SC(&quot;'set_action' called without instance&quot;));
     return SQ_ERROR;
   }
-  scripting::TestObject* _this = reinterpret_cast&lt;scripting::TestObject*&gt; (data);
+  Scripting::TestObject* _this = reinterpret_cast&lt;Scripting::TestObject*&gt; (data);
   const SQChar* arg0;
   if(SQ_FAILED(sq_getstring(vm, 2, &amp;arg0))) {
     sq_throwerror(vm, _SC(&quot;Argument 1 not a string&quot;));
@@ -204,7 +204,7 @@
     sq_throwerror(vm, _SC(&quot;'set_pos' called without instance&quot;));
     return SQ_ERROR;
   }
-  scripting::TestObject* _this = reinterpret_cast&lt;scripting::TestObject*&gt; (data);
+  Scripting::TestObject* _this = reinterpret_cast&lt;Scripting::TestObject*&gt; (data);
   SQFloat arg0;
   if(SQ_FAILED(sq_getfloat(vm, 2, &amp;arg0))) {
     sq_throwerror(vm, _SC(&quot;Argument 1 not a float&quot;));
@@ -238,7 +238,7 @@
     sq_throwerror(vm, _SC(&quot;'set_vflip' called without instance&quot;));
     return SQ_ERROR;
   }
-  scripting::TestObject* _this = reinterpret_cast&lt;scripting::TestObject*&gt; (data);
+  Scripting::TestObject* _this = reinterpret_cast&lt;Scripting::TestObject*&gt; (data);
   SQBool arg0;
   if(SQ_FAILED(sq_getbool(vm, 2, &amp;arg0))) {
     sq_throwerror(vm, _SC(&quot;Argument 1 not a bool&quot;));
@@ -267,7 +267,7 @@
     sq_throwerror(vm, _SC(&quot;'attach' called without instance&quot;));
     return SQ_ERROR;
   }
-  scripting::TestObject* _this = reinterpret_cast&lt;scripting::TestObject*&gt; (data);
+  Scripting::TestObject* _this = reinterpret_cast&lt;Scripting::TestObject*&gt; (data);
   const SQChar* arg0;
   if(SQ_FAILED(sq_getstring(vm, 2, &amp;arg0))) {
     sq_throwerror(vm, _SC(&quot;Argument 1 not a string&quot;));
@@ -296,7 +296,7 @@
 
 static SQInteger Player_release_hook(SQUserPointer ptr, SQInteger )
 {
-  scripting::Player* _this = reinterpret_cast&lt;scripting::Player*&gt; (ptr);
+  Scripting::Player* _this = reinterpret_cast&lt;Scripting::Player*&gt; (ptr);
   delete _this;
   return 0;
 }
@@ -308,7 +308,7 @@
     sq_throwerror(vm, _SC(&quot;'start_listening' called without instance&quot;));
     return SQ_ERROR;
   }
-  scripting::Player* _this = reinterpret_cast&lt;scripting::Player*&gt; (data);
+  Scripting::Player* _this = reinterpret_cast&lt;Scripting::Player*&gt; (data);
 
   try {
     _this-&gt;start_listening();
@@ -332,7 +332,7 @@
     sq_throwerror(vm, _SC(&quot;'stop_listening' called without instance&quot;));
     return SQ_ERROR;
   }
-  scripting::Player* _this = reinterpret_cast&lt;scripting::Player*&gt; (data);
+  Scripting::Player* _this = reinterpret_cast&lt;Scripting::Player*&gt; (data);
 
   try {
     _this-&gt;stop_listening();
@@ -351,7 +351,7 @@
 
 static SQInteger ScriptableObject_release_hook(SQUserPointer ptr, SQInteger )
 {
-  scripting::ScriptableObject* _this = reinterpret_cast&lt;scripting::ScriptableObject*&gt; (ptr);
+  Scripting::ScriptableObject* _this = reinterpret_cast&lt;Scripting::ScriptableObject*&gt; (ptr);
   delete _this;
   return 0;
 }
@@ -363,7 +363,7 @@
     sq_throwerror(vm, _SC(&quot;'move_to' called without instance&quot;));
     return SQ_ERROR;
   }
-  scripting::ScriptableObject* _this = reinterpret_cast&lt;scripting::ScriptableObject*&gt; (data);
+  Scripting::ScriptableObject* _this = reinterpret_cast&lt;Scripting::ScriptableObject*&gt; (data);
   SQFloat arg0;
   if(SQ_FAILED(sq_getfloat(vm, 2, &amp;arg0))) {
     sq_throwerror(vm, _SC(&quot;Argument 1 not a float&quot;));
@@ -407,7 +407,7 @@
     sq_throwerror(vm, _SC(&quot;'start_flash' called without instance&quot;));
     return SQ_ERROR;
   }
-  scripting::ScriptableObject* _this = reinterpret_cast&lt;scripting::ScriptableObject*&gt; (data);
+  Scripting::ScriptableObject* _this = reinterpret_cast&lt;Scripting::ScriptableObject*&gt; (data);
   SQFloat arg0;
   if(SQ_FAILED(sq_getfloat(vm, 2, &amp;arg0))) {
     sq_throwerror(vm, _SC(&quot;Argument 1 not a float&quot;));
@@ -438,7 +438,7 @@
   }
 
   try {
-    scripting::set_sector(arg0);
+    Scripting::set_sector(arg0);
 
     return 0;
 
@@ -461,7 +461,7 @@
   }
 
   try {
-    scripting::play_music(arg0);
+    Scripting::play_music(arg0);
 
     return 0;
 
@@ -484,7 +484,7 @@
   }
 
   try {
-    scripting::stop_music(static_cast&lt;float&gt; (arg0));
+    Scripting::stop_music(static_cast&lt;float&gt; (arg0));
 
     return 0;
 
@@ -507,7 +507,7 @@
   }
 
   try {
-    scripting::play_sound(arg0);
+    Scripting::play_sound(arg0);
 
     return 0;
 
@@ -535,7 +535,7 @@
   }
 
   try {
-    scripting::caption_add(static_cast&lt;int&gt; (arg0), arg1);
+    Scripting::caption_add(static_cast&lt;int&gt; (arg0), arg1);
 
     return 0;
 
@@ -554,7 +554,7 @@
   (void) vm;
 
   try {
-    scripting::caption_clear();
+    Scripting::caption_clear();
 
     return 0;
 
@@ -573,7 +573,7 @@
   (void) vm;
 
   try {
-    scripting::caption_end();
+    Scripting::caption_end();
 
     return 0;
 
@@ -596,7 +596,7 @@
   }
 
   try {
-    scripting::camera_set_active(arg0 == SQTrue);
+    Scripting::camera_set_active(arg0 == SQTrue);
 
     return 0;
 
@@ -615,7 +615,7 @@
   (void) vm;
 
   try {
-    scripting::camera_continue_path();
+    Scripting::camera_continue_path();
 
     return 0;
 
@@ -634,7 +634,7 @@
   (void) vm;
 
   try {
-    scripting::camera_begin_path();
+    Scripting::camera_begin_path();
 
     return 0;
 
@@ -667,7 +667,7 @@
   }
 
   try {
-    scripting::camera_add_point(static_cast&lt;float&gt; (arg0), static_cast&lt;float&gt; (arg1), static_cast&lt;float&gt; (arg2));
+    Scripting::camera_add_point(static_cast&lt;float&gt; (arg0), static_cast&lt;float&gt; (arg1), static_cast&lt;float&gt; (arg2));
 
     return 0;
 
@@ -686,7 +686,7 @@
   (void) vm;
 
   try {
-    scripting::camera_end_path();
+    Scripting::camera_end_path();
 
     return 0;
 
@@ -714,7 +714,7 @@
   }
 
   try {
-    scripting::camera_set_pos(static_cast&lt;float&gt; (arg0), static_cast&lt;float&gt; (arg1));
+    Scripting::camera_set_pos(static_cast&lt;float&gt; (arg0), static_cast&lt;float&gt; (arg1));
 
     return 0;
 
@@ -737,7 +737,7 @@
   }
 
   try {
-    scripting::camera_set_zoom(static_cast&lt;float&gt; (arg0));
+    Scripting::camera_set_zoom(static_cast&lt;float&gt; (arg0));
 
     return 0;
 
@@ -760,7 +760,7 @@
   }
 
   try {
-    scripting::set_controller_help_active(arg0 == SQTrue);
+    Scripting::set_controller_help_active(arg0 == SQTrue);
 
     return 0;
 
@@ -798,7 +798,7 @@
   }
 
   try {
-    scripting::dialog_show(static_cast&lt;int&gt; (arg0), arg1, arg2, arg3);
+    Scripting::dialog_show(static_cast&lt;int&gt; (arg0), arg1, arg2, arg3);
 
     return 0;
 
@@ -817,7 +817,7 @@
   HSQUIRRELVM arg0 = vm;
 
   try {
-    scripting::wait_for_dialog(arg0);
+    Scripting::wait_for_dialog(arg0);
 
     return sq_suspendvm(vm);
 
@@ -836,7 +836,7 @@
   HSQUIRRELVM arg0 = vm;
 
   try {
-    scripting::wait_for_fade(arg0);
+    Scripting::wait_for_fade(arg0);
 
     return sq_suspendvm(vm);
 
@@ -855,7 +855,7 @@
   HSQUIRRELVM arg0 = vm;
 
   try {
-    scripting::wait_for_camera(arg0);
+    Scripting::wait_for_camera(arg0);
 
     return sq_suspendvm(vm);
 
@@ -878,7 +878,7 @@
   }
 
   try {
-    scripting::conversation_add(arg0);
+    Scripting::conversation_add(arg0);
 
     return 0;
 
@@ -906,7 +906,7 @@
   }
 
   try {
-    scripting::conversation_add2(arg0, arg1);
+    Scripting::conversation_add2(arg0, arg1);
 
     return 0;
 
@@ -925,7 +925,7 @@
   (void) vm;
 
   try {
-    scripting::conversation_show();
+    Scripting::conversation_show();
 
     return 0;
 
@@ -943,7 +943,7 @@
 {
 
   try {
-    int return_value = scripting::conversation_get_selection();
+    int return_value = Scripting::conversation_get_selection();
 
     sq_pushinteger(vm, return_value);
     return 1;
@@ -963,7 +963,7 @@
   HSQUIRRELVM arg0 = vm;
 
   try {
-    scripting::wait_for_conversation(arg0);
+    Scripting::wait_for_conversation(arg0);
 
     return sq_suspendvm(vm);
 
@@ -991,7 +991,7 @@
   }
 
   try {
-    scripting::add_objective(arg0, arg1);
+    Scripting::add_objective(arg0, arg1);
 
     return 0;
 
@@ -1014,7 +1014,7 @@
   }
 
   try {
-    scripting::objective_complete(arg0);
+    Scripting::objective_complete(arg0);
 
     return 0;
 
@@ -1037,7 +1037,7 @@
   }
 
   try {
-    bool return_value = scripting::is_objective_given(arg0);
+    bool return_value = Scripting::is_objective_given(arg0);
 
     sq_pushbool(vm, return_value);
     return 1;
@@ -1061,7 +1061,7 @@
   }
 
   try {
-    bool return_value = scripting::is_objective_complete(arg0);
+    bool return_value = Scripting::is_objective_complete(arg0);
 
     sq_pushbool(vm, return_value);
     return 1;
@@ -1081,7 +1081,7 @@
   HSQUIRRELVM arg0 = vm;
 
   try {
-    bool return_value = scripting::run_before(arg0);
+    bool return_value = Scripting::run_before(arg0);
 
     sq_pushbool(vm, return_value);
     return 1;
@@ -1106,7 +1106,7 @@
   }
 
   try {
-    scripting::save_state(arg0, arg1);
+    Scripting::save_state(arg0, arg1);
 
     return 0;
 
@@ -1130,7 +1130,7 @@
   }
 
   try {
-    scripting::load_state(arg0, arg1);
+    Scripting::load_state(arg0, arg1);
 
     return 0;
 
@@ -1149,7 +1149,7 @@
   (void) vm;
 
   try {
-    scripting::list_objects();
+    Scripting::list_objects();
 
     return 0;
 
@@ -1172,7 +1172,7 @@
   }
 
   try {
-    scripting::set_debug(arg0 == SQTrue);
+    Scripting::set_debug(arg0 == SQTrue);
 
     return 0;
 
@@ -1190,7 +1190,7 @@
 {
 
   try {
-    bool return_value = scripting::get_debug();
+    bool return_value = Scripting::get_debug();
 
     sq_pushbool(vm, return_value);
     return 1;
@@ -1209,7 +1209,7 @@
 {
 
   try {
-    float return_value = scripting::get_game_speed();
+    float return_value = Scripting::get_game_speed();
 
     sq_pushfloat(vm, return_value);
     return 1;
@@ -1233,7 +1233,7 @@
   }
 
   try {
-    scripting::set_game_speed(static_cast&lt;float&gt; (arg0));
+    Scripting::set_game_speed(static_cast&lt;float&gt; (arg0));
 
     return 0;
 
@@ -1257,7 +1257,7 @@
   }
 
   try {
-    scripting::wait(arg0, static_cast&lt;float&gt; (arg1));
+    Scripting::wait(arg0, static_cast&lt;float&gt; (arg1));
 
     return sq_suspendvm(vm);
 
@@ -1273,12 +1273,12 @@
 
 static SQInteger display_wrapper(HSQUIRRELVM vm)
 {
-  return scripting::display(vm);
+  return Scripting::display(vm);
 }
 
 static SQInteger println_wrapper(HSQUIRRELVM vm)
 {
-  return scripting::println(vm);
+  return Scripting::println(vm);
 }
 
 static SQInteger set_console_font_wrapper(HSQUIRRELVM vm)
@@ -1295,7 +1295,7 @@
   }
 
   try {
-    scripting::set_console_font(arg0, static_cast&lt;int&gt; (arg1));
+    Scripting::set_console_font(arg0, static_cast&lt;int&gt; (arg1));
 
     return 0;
 
@@ -1318,7 +1318,7 @@
   }
 
   try {
-    scripting::set_gamma(static_cast&lt;float&gt; (arg0));
+    Scripting::set_gamma(static_cast&lt;float&gt; (arg0));
 
     return 0;
 
@@ -1351,7 +1351,7 @@
   }
 
   try {
-    scripting::set_gamma_rgb(static_cast&lt;float&gt; (arg0), static_cast&lt;float&gt; (arg1), static_cast&lt;float&gt; (arg2));
+    Scripting::set_gamma_rgb(static_cast&lt;float&gt; (arg0), static_cast&lt;float&gt; (arg1), static_cast&lt;float&gt; (arg2));
 
     return 0;
 
@@ -1370,7 +1370,7 @@
   (void) vm;
 
   try {
-    scripting::show_config();
+    Scripting::show_config();
 
     return 0;
 
@@ -1389,7 +1389,7 @@
   (void) vm;
 
   try {
-    scripting::cutscene_begin();
+    Scripting::cutscene_begin();
 
     return 0;
 
@@ -1408,7 +1408,7 @@
   (void) vm;
 
   try {
-    scripting::cutscene_end();
+    Scripting::cutscene_end();
 
     return 0;
 
@@ -1446,7 +1446,7 @@
   }
 
   try {
-    scripting::internal_fadeout_rgb(static_cast&lt;float&gt; (arg0), static_cast&lt;float&gt; (arg1), static_cast&lt;float&gt; (arg2), static_cast&lt;float&gt; (arg3));
+    Scripting::internal_fadeout_rgb(static_cast&lt;float&gt; (arg0), static_cast&lt;float&gt; (arg1), static_cast&lt;float&gt; (arg2), static_cast&lt;float&gt; (arg3));
 
     return 0;
 
@@ -1469,7 +1469,7 @@
   }
 
   try {
-    scripting::internal_fadein(static_cast&lt;float&gt; (arg0));
+    Scripting::internal_fadein(static_cast&lt;float&gt; (arg0));
 
     return 0;
 
@@ -1487,7 +1487,7 @@
 {
 
   try {
-    int return_value = scripting::render_mask_get();
+    int return_value = Scripting::render_mask_get();
 
     sq_pushinteger(vm, return_value);
     return 1;
@@ -1511,7 +1511,7 @@
   }
 
   try {
-    scripting::render_mask_set(static_cast&lt;int&gt; (arg0));
+    Scripting::render_mask_set(static_cast&lt;int&gt; (arg0));
 
     return 0;
 
@@ -1527,11 +1527,11 @@
 
 static SQInteger spawn_object_wrapper(HSQUIRRELVM vm)
 {
-  return scripting::spawn_object(vm);
+  return Scripting::spawn_object(vm);
 }
 
 } // end of namespace Wrapper
-void create_squirrel_instance(HSQUIRRELVM v, scripting::GameObject* object, bool setup_releasehook)
+void create_squirrel_instance(HSQUIRRELVM v, Scripting::GameObject* object, bool setup_releasehook)
 {
   using namespace Wrapper;
 
@@ -1557,7 +1557,7 @@
   sq_remove(v, -2); // remove root table
 }
 
-void create_squirrel_instance(HSQUIRRELVM v, scripting::TestObject* object, bool setup_releasehook)
+void create_squirrel_instance(HSQUIRRELVM v, Scripting::TestObject* object, bool setup_releasehook)
 {
   using namespace Wrapper;
 
@@ -1583,7 +1583,7 @@
   sq_remove(v, -2); // remove root table
 }
 
-void create_squirrel_instance(HSQUIRRELVM v, scripting::Player* object, bool setup_releasehook)
+void create_squirrel_instance(HSQUIRRELVM v, Scripting::Player* object, bool setup_releasehook)
 {
   using namespace Wrapper;
 
@@ -1609,7 +1609,7 @@
   sq_remove(v, -2); // remove root table
 }
 
-void create_squirrel_instance(HSQUIRRELVM v, scripting::ScriptableObject* object, bool setup_releasehook)
+void create_squirrel_instance(HSQUIRRELVM v, Scripting::ScriptableObject* object, bool setup_releasehook)
 {
   using namespace Wrapper;
 
@@ -2105,4 +2105,4 @@
 
 }
 
-} // end of namespace scripting
+} // end of namespace Scripting

Modified: trunk/windstille/src/scripting/wrapper.hpp
===================================================================
--- trunk/windstille/src/scripting/wrapper.hpp	2009-02-11 21:22:01 UTC (rev 2464)
+++ trunk/windstille/src/scripting/wrapper.hpp	2009-02-11 21:47:00 UTC (rev 2465)
@@ -9,15 +9,15 @@
 #include &lt;squirrel.h&gt;
 #include &quot;wrapper.interface.hpp&quot;
 
-namespace scripting
+namespace Scripting
 {
 
 void register_windstille_wrapper(HSQUIRRELVM v);
 
-void create_squirrel_instance(HSQUIRRELVM v, scripting::GameObject* object, bool setup_releasehook = false);
-void create_squirrel_instance(HSQUIRRELVM v, scripting::TestObject* object, bool setup_releasehook = false);
-void create_squirrel_instance(HSQUIRRELVM v, scripting::Player* object, bool setup_releasehook = false);
-void create_squirrel_instance(HSQUIRRELVM v, scripting::ScriptableObject* object, bool setup_releasehook = false);
+void create_squirrel_instance(HSQUIRRELVM v, Scripting::GameObject* object, bool setup_releasehook = false);
+void create_squirrel_instance(HSQUIRRELVM v, Scripting::TestObject* object, bool setup_releasehook = false);
+void create_squirrel_instance(HSQUIRRELVM v, Scripting::Player* object, bool setup_releasehook = false);
+void create_squirrel_instance(HSQUIRRELVM v, Scripting::ScriptableObject* object, bool setup_releasehook = false);
 
 }
 

Deleted: trunk/windstille/src/sexpr_file_reader.cpp
===================================================================
--- trunk/windstille/src/sexpr_file_reader.cpp	2009-02-11 21:22:01 UTC (rev 2464)
+++ trunk/windstille/src/sexpr_file_reader.cpp	2009-02-11 21:47:00 UTC (rev 2465)
@@ -1,246 +0,0 @@
-/*
-**  Windstille - A Sci-Fi Action-Adventure Game
-**  Copyright (C) 2005 Ingo Ruhnke &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/windstille-commit">grumbel at gmx.de</A>&gt;
-**
-**  This program is free software: you can redistribute it and/or modify
-**  it under the terms of the GNU General Public License as published by
-**  the Free Software Foundation, either version 3 of the License, or
-**  (at your option) any later version.
-**  
-**  This program is distributed in the hope that it will be useful,
-**  but WITHOUT ANY WARRANTY; without even the implied warranty of
-**  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
-**  GNU General Public License for more details.
-**  
-**  You should have received a copy of the GNU General Public License
-**  along with this program.  If not, see &lt;<A HREF="http://www.gnu.org/licenses/">http://www.gnu.org/licenses/</A>&gt;.
-*/
-
-#include &lt;assert.h&gt;
-#include &lt;string.h&gt;
-#include &quot;lisp/parser.hpp&quot;
-#include &quot;lisp/getters.hpp&quot;
-#include &quot;color.hpp&quot;
-#include &quot;math/size.hpp&quot;
-#include &quot;math/vector.hpp&quot;
-#include &quot;math/vector3.hpp&quot;
-#include &quot;file_reader_impl.hpp&quot;
-#include &quot;sexpr_file_reader.hpp&quot;
-
-class SExprFileReaderImpl: public FileReaderImpl
-{
-public:
-  /** Pointer to the top-most lisp element, only here for purpose of
-      being able to delete it */
-  const lisp::Lisp* root;
-
-  bool  delete_sexpr;
-  const lisp::Lisp* sexpr;
-
-  SExprFileReaderImpl(const lisp::Lisp* root_, const lisp::Lisp* sexpr_)
-    : root(root_),
-      sexpr(sexpr_), 
-      delete_sexpr(false)
-  {
-    assert(sexpr &amp;&amp; 
-           sexpr-&gt;get_type() == lisp::Lisp::TYPE_LIST &amp;&amp;
-           sexpr-&gt;get_list_size() &gt;= 1);
-  }
-
-  SExprFileReaderImpl(const lisp::Lisp* sexpr_, bool delete_sexpr_) 
-    : root(0),
-      sexpr(sexpr_), 
-      delete_sexpr(delete_sexpr_)
-  {
-    assert(sexpr &amp;&amp; 
-           sexpr-&gt;get_type() == lisp::Lisp::TYPE_LIST &amp;&amp;
-           sexpr-&gt;get_list_size() &gt;= 1);
-  }
-
-  ~SExprFileReaderImpl()
-  {
-    if (root)
-      delete root;
-
-    if (delete_sexpr)
-      delete sexpr;
-  }
-
-  std::string get_name() const 
-  {
-    return sexpr-&gt;get_list_elem(0)-&gt;get_symbol();
-  }
-
-  bool read_int(const char* name, int&amp; v) const 
-  {
-    lisp::Lisp* item = get_subsection_item(name);
-    if (item &amp;&amp; item-&gt;get_type() == lisp::Lisp::TYPE_INT)
-      {
-        v = item-&gt;get_int();
-        return true;
-      }
-    return false;
-  }
-
-  bool read_float(const char* name, float&amp; v) const 
-  {
-    lisp::Lisp* item = get_subsection_item(name);
-    if (item)
-      {
-        if (item-&gt;get_type() == lisp::Lisp::TYPE_FLOAT)
-          {
-            v = item-&gt;get_float();
-            return true;
-          }
-        else if (item-&gt;get_type() == lisp::Lisp::TYPE_INT)
-          {
-            v = item-&gt;get_int();
-            return true;
-          }
-        else
-          {
-            return false;
-          }
-      }
-    return false;
-  }
-
-  bool read_bool  (const char* name, bool&amp; v) const 
-  {
-    lisp::Lisp* item = get_subsection_item(name);
-    if (item &amp;&amp; item-&gt;get_type() == lisp::Lisp::TYPE_BOOL)
-      {
-        v = item-&gt;get_bool();
-        return true;
-      }
-    return false;
-  }
-
-  bool read_string(const char* name, std::string&amp; v) const 
-  {
-    lisp::Lisp* sub = get_subsection(name);
-    if (sub)
-      {
-        v = &quot;&quot;;
-        for(size_t i = 1; i &lt; sub-&gt;get_list_size(); ++i)
-          {
-            lisp::Lisp* item = sub-&gt;get_list_elem(i);
-            if (item-&gt;get_type() == lisp::Lisp::TYPE_STRING)
-              {
-                v += item-&gt;get_string();
-              }
-            else if (item-&gt;get_type() == lisp::Lisp::TYPE_SYMBOL)
-              {
-                v += item-&gt;get_symbol();
-              }
-          }
-        return true;
-      }
-    return false;
-  }
-
-  bool get(const char* name, std::vector&lt;int&gt;&amp;   v) const
-  {
-    lisp::Lisp* sub = get_subsection(name);
-    if (sub)
-      return property_get(sub, v);
-    else 
-      return false;
-  }
-
-  bool get(const char* name, std::vector&lt;bool&gt;&amp;   v) const
-  {
-    lisp::Lisp* sub = get_subsection(name);
-    if (sub)
-      return property_get(sub, v);
-    else 
-      return false;
-  }
-
-  bool get(const char* name, std::vector&lt;std::string&gt;&amp;   v) const
-  {
-    lisp::Lisp* sub = get_subsection(name);
-    if (sub)
-      return property_get(sub, v);
-    else 
-      return false;
-  }
-
-  bool get(const char* name, std::vector&lt;float&gt;&amp; v) const
-  {
-    lisp::Lisp* sub = get_subsection(name);
-    if (sub)
-      return property_get(sub, v);
-    else 
-      return false;
-  }
-
-  bool read_section(const char* name, FileReader&amp; v) const 
-  {
-    lisp::Lisp* cur = get_subsection(name);
-    if (cur)
-      {
-        v = SExprFileReader(cur);
-        return true;
-      }
-    return false;
-  }
-
-  std::vector&lt;FileReader&gt; get_sections() const 
-  {
-    std::vector&lt;FileReader&gt; lst;
-    for(size_t i = 1; i &lt; sexpr-&gt;get_list_size(); ++i)
-      { // iterate over subsections
-        lst.push_back(SExprFileReader(sexpr-&gt;get_list_elem(i)));
-      }
-    return lst;
-  }
-
-  std::vector&lt;std::string&gt; get_section_names() const 
-  {
-    std::vector&lt;std::string&gt; lst;
-
-    for(size_t i = 1; i &lt; sexpr-&gt;get_list_size(); ++i)
-      { // iterate over subsections
-        lisp::Lisp* sub = sexpr-&gt;get_list_elem(i);
-        lst.push_back(sub-&gt;get_list_elem(0)-&gt;get_symbol());
-      }
-
-    return lst;
-  }
-
-private:
-  lisp::Lisp* get_subsection_item(const char* name) const
-  {
-    lisp::Lisp* sub = get_subsection(name);
-    if (sub &amp;&amp; sub-&gt;get_list_size() == 2)
-      {
-        return sub-&gt;get_list_elem(1);
-      }
-    return 0;
-  }
-
-  lisp::Lisp* get_subsection(const char* name) const
-  {
-    for(size_t i = 1; i &lt; sexpr-&gt;get_list_size(); ++i)
-      { // iterate over subsections
-        lisp::Lisp* sub = sexpr-&gt;get_list_elem(i);
-        if (strcmp(sub-&gt;get_list_elem(0)-&gt;get_symbol(), name) == 0)
-          return sub;
-      }
-    return 0;
-  } 
-
-};
-
-SExprFileReader::SExprFileReader(const lisp::Lisp* sexpr, bool delete_sexpr)
-  : FileReader(boost::shared_ptr&lt;FileReaderImpl&gt;(new SExprFileReaderImpl(sexpr, delete_sexpr)))
-{
-}
-
-SExprFileReader::SExprFileReader(const lisp::Lisp* root, const lisp::Lisp* sexpr)
-  : FileReader(boost::shared_ptr&lt;FileReaderImpl&gt;(new SExprFileReaderImpl(root, sexpr)))
-{
-}
-
-/* EOF */

Deleted: trunk/windstille/src/sexpr_file_reader.hpp
===================================================================
--- trunk/windstille/src/sexpr_file_reader.hpp	2009-02-11 21:22:01 UTC (rev 2464)
+++ trunk/windstille/src/sexpr_file_reader.hpp	2009-02-11 21:47:00 UTC (rev 2465)
@@ -1,36 +0,0 @@
-/*
-**  Windstille - A Sci-Fi Action-Adventure Game
-**  Copyright (C) 2005 Ingo Ruhnke &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/windstille-commit">grumbel at gmx.de</A>&gt;
-**
-**  This program is free software: you can redistribute it and/or modify
-**  it under the terms of the GNU General Public License as published by
-**  the Free Software Foundation, either version 3 of the License, or
-**  (at your option) any later version.
-**  
-**  This program is distributed in the hope that it will be useful,
-**  but WITHOUT ANY WARRANTY; without even the implied warranty of
-**  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
-**  GNU General Public License for more details.
-**  
-**  You should have received a copy of the GNU General Public License
-**  along with this program.  If not, see &lt;<A HREF="http://www.gnu.org/licenses/">http://www.gnu.org/licenses/</A>&gt;.
-*/
-
-#ifndef HEADER_WINDSTILLE_SEXPR_FILE_READER_HPP
-#define HEADER_WINDSTILLE_SEXPR_FILE_READER_HPP
-
-#include &quot;file_reader.hpp&quot;
-#include &quot;lisp/lisp.hpp&quot;
-
-/** */
-class SExprFileReader : public FileReader
-{
-private:
-public:
-  SExprFileReader(const lisp::Lisp* root, const lisp::Lisp* lisp);
-  SExprFileReader(const lisp::Lisp* lisp, bool delete_sexpr = false);
-};
-
-#endif
-
-/* EOF */

Modified: trunk/windstille/src/sprite2d/data.hpp
===================================================================
--- trunk/windstille/src/sprite2d/data.hpp	2009-02-11 21:22:01 UTC (rev 2464)
+++ trunk/windstille/src/sprite2d/data.hpp	2009-02-11 21:47:00 UTC (rev 2465)
@@ -25,7 +25,7 @@
 #include &lt;GL/glew.h&gt;
 #include &lt;GL/gl.h&gt;
 #include &quot;util.hpp&quot;
-#include &quot;file_reader.hpp&quot;
+#include &quot;util/file_reader.hpp&quot;
 #include &quot;math/vector.hpp&quot;
 #include &quot;display/surface.hpp&quot;
 #include &quot;ref.hpp&quot;

Modified: trunk/windstille/src/sprite2d/sprite.cpp
===================================================================
--- trunk/windstille/src/sprite2d/sprite.cpp	2009-02-11 21:22:01 UTC (rev 2464)
+++ trunk/windstille/src/sprite2d/sprite.cpp	2009-02-11 21:47:00 UTC (rev 2465)
@@ -26,7 +26,7 @@
 #include &quot;sprite2d/data.hpp&quot;
 #include &quot;sprite2d/manager.hpp&quot;
 #include &quot;display/surface_drawing_parameters.hpp&quot;
-#include &quot;color.hpp&quot;
+#include &quot;display/color.hpp&quot;
 #include &quot;util.hpp&quot;
 
 Sprite::Sprite()

Modified: trunk/windstille/src/sprite2d/sprite.hpp
===================================================================
--- trunk/windstille/src/sprite2d/sprite.hpp	2009-02-11 21:22:01 UTC (rev 2464)
+++ trunk/windstille/src/sprite2d/sprite.hpp	2009-02-11 21:47:00 UTC (rev 2465)
@@ -23,7 +23,7 @@
 #include &lt;string&gt;
 #include &lt;GL/glew.h&gt;
 #include &lt;GL/gl.h&gt;
-#include &quot;color.hpp&quot;
+#include &quot;display/color.hpp&quot;
 #include &quot;display/surface.hpp&quot;
 #include &quot;math/vector.hpp&quot;
 #include &quot;math/matrix.hpp&quot;

Modified: trunk/windstille/src/text_area.cpp
===================================================================
--- trunk/windstille/src/text_area.cpp	2009-02-11 21:22:01 UTC (rev 2464)
+++ trunk/windstille/src/text_area.cpp	2009-02-11 21:47:00 UTC (rev 2465)
@@ -21,7 +21,7 @@
 #include &quot;display/opengl_state.hpp&quot;
 #include &quot;font/ttf_font.hpp&quot;
 #include &quot;text_area.hpp&quot;
-#include &quot;baby_xml.hpp&quot;
+#include &quot;util/baby_xml.hpp&quot;
 #include &quot;font/fonts.hpp&quot;
 #include &quot;text_area.hpp&quot;
 

Modified: trunk/windstille/src/tile/tile_description.hpp
===================================================================
--- trunk/windstille/src/tile/tile_description.hpp	2009-02-11 21:22:01 UTC (rev 2464)
+++ trunk/windstille/src/tile/tile_description.hpp	2009-02-11 21:47:00 UTC (rev 2465)
@@ -21,7 +21,7 @@
 
 #include &lt;vector&gt;
 #include &lt;string&gt;
-#include &quot;file_reader.hpp&quot;
+#include &quot;util/file_reader.hpp&quot;
 
 class TileFactory;
 

Modified: trunk/windstille/src/tile/tile_factory.cpp
===================================================================
--- trunk/windstille/src/tile/tile_factory.cpp	2009-02-11 21:22:01 UTC (rev 2464)
+++ trunk/windstille/src/tile/tile_factory.cpp	2009-02-11 21:47:00 UTC (rev 2465)
@@ -29,7 +29,7 @@
 #include &quot;tile_packer.hpp&quot;
 #include &quot;tile_factory.hpp&quot;
 #include &quot;tile_description.hpp&quot;
-#include &quot;sexpr_file_reader.hpp&quot;
+#include &quot;util/sexpr_file_reader.hpp&quot;
 #include &quot;display/surface_manager.hpp&quot;
 #include &quot;display/texture.hpp&quot;
 #include &quot;physfs/physfs_sdl.hpp&quot;

Copied: trunk/windstille/src/util/baby_xml.cpp (from rev 2463, trunk/windstille/src/baby_xml.cpp)


Property changes on: trunk/windstille/src/util/baby_xml.cpp
___________________________________________________________________
Name: svn:mergeinfo
   + 

Copied: trunk/windstille/src/util/baby_xml.hpp (from rev 2463, trunk/windstille/src/baby_xml.hpp)


Property changes on: trunk/windstille/src/util/baby_xml.hpp
___________________________________________________________________
Name: svn:mergeinfo
   + 

Copied: trunk/windstille/src/util/command_line.cpp (from rev 2463, trunk/windstille/src/command_line.cpp)


Property changes on: trunk/windstille/src/util/command_line.cpp
___________________________________________________________________
Name: svn:mergeinfo
   + 

Copied: trunk/windstille/src/util/command_line.hpp (from rev 2463, trunk/windstille/src/command_line.hpp)


Property changes on: trunk/windstille/src/util/command_line.hpp
___________________________________________________________________
Name: svn:mergeinfo
   + 

Copied: trunk/windstille/src/util/command_line_generic.cpp (from rev 2463, trunk/windstille/src/command_line_generic.cpp)


Property changes on: trunk/windstille/src/util/command_line_generic.cpp
___________________________________________________________________
Name: svn:mergeinfo
   + 

Copied: trunk/windstille/src/util/command_line_generic.hpp (from rev 2463, trunk/windstille/src/command_line_generic.hpp)


Property changes on: trunk/windstille/src/util/command_line_generic.hpp
___________________________________________________________________
Name: svn:mergeinfo
   + 

Copied: trunk/windstille/src/util/file_reader.cpp (from rev 2463, trunk/windstille/src/file_reader.cpp)


Property changes on: trunk/windstille/src/util/file_reader.cpp
___________________________________________________________________
Name: svn:keywords
   + Id
Name: svn:mergeinfo
   + 
Name: svn:eol-style
   + native

Copied: trunk/windstille/src/util/file_reader.hpp (from rev 2463, trunk/windstille/src/file_reader.hpp)


Property changes on: trunk/windstille/src/util/file_reader.hpp
___________________________________________________________________
Name: svn:mergeinfo
   + 

Copied: trunk/windstille/src/util/file_reader_impl.hpp (from rev 2463, trunk/windstille/src/file_reader_impl.hpp)


Property changes on: trunk/windstille/src/util/file_reader_impl.hpp
___________________________________________________________________
Name: svn:keywords
   + Id
Name: svn:mergeinfo
   + 
Name: svn:eol-style
   + native

Copied: trunk/windstille/src/util/getter.cpp (from rev 2463, trunk/windstille/src/getter.cpp)
===================================================================
--- trunk/windstille/src/getter.cpp	2009-02-11 21:05:03 UTC (rev 2463)
+++ trunk/windstille/src/util/getter.cpp	2009-02-11 21:47:00 UTC (rev 2465)
@@ -0,0 +1,136 @@
+/*
+**  Windstille - A Sci-Fi Action-Adventure Game
+**  Copyright (C) 2007 Ingo Ruhnke &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/windstille-commit">grumbel at gmx.de</A>&gt;
+**
+**  This program is free software: you can redistribute it and/or modify
+**  it under the terms of the GNU General Public License as published by
+**  the Free Software Foundation, either version 3 of the License, or
+**  (at your option) any later version.
+**  
+**  This program is distributed in the hope that it will be useful,
+**  but WITHOUT ANY WARRANTY; without even the implied warranty of
+**  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+**  GNU General Public License for more details.
+**  
+**  You should have received a copy of the GNU General Public License
+**  along with this program.  If not, see &lt;<A HREF="http://www.gnu.org/licenses/">http://www.gnu.org/licenses/</A>&gt;.
+*/
+
+#include &quot;math/vector.hpp&quot;
+#include &quot;math/vector3.hpp&quot;
+#include &quot;math/quaternion.hpp&quot;
+#include &quot;math/matrix.hpp&quot;
+#include &quot;display/color.hpp&quot;
+#include &quot;file_reader.hpp&quot;
+#include &quot;getter.hpp&quot;
+
+bool get(FileReader&amp; reader, const char* name, Vector&amp;  value)
+{
+  std::vector&lt;float&gt; floats;
+  if (reader.get(name, floats) &amp;&amp; floats.size() == 2) {
+    value.x = floats[0];
+    value.y = floats[1];
+    return true;
+  } else {
+    return false;
+  }  
+}
+
+bool get(FileReader&amp; reader, const char* name, Vector3&amp; value)
+{
+  std::vector&lt;float&gt; floats;
+  if (reader.get(name, floats) &amp;&amp; floats.size() == 3) {
+    value.x = floats[0];
+    value.y = floats[1];
+    value.z = floats[2];
+    return true;
+  } else {
+    return false;
+  }
+}
+
+bool get(FileReader&amp; reader, const char* name, Quaternion&amp; value)
+{
+  std::vector&lt;float&gt; floats;
+  if (reader.get(name, floats) &amp;&amp; floats.size() == 4) {
+    value.w = floats[0];
+    value.x = floats[1];
+    value.y = floats[2];
+    value.z = floats[3];
+    return true;
+  } else {
+    return false;
+  }
+}
+
+bool get(FileReader&amp; reader, const char* name, Matrix&amp; m)
+{
+  std::vector&lt;float&gt; floats;
+  if (reader.get(name, floats) &amp;&amp; floats.size() == 16) {  
+    m[ 0] = floats[0];
+    m[ 4] = floats[1];
+    m[ 8] = floats[2];
+    m[12] = floats[3];
+    m[ 1] = floats[4];
+    m[ 5] = floats[5];
+    m[ 9] = floats[6];
+    m[13] = floats[7];
+    m[ 2] = floats[8];
+    m[ 6] = floats[9];
+    m[10] = floats[10];
+    m[14] = floats[11];
+    m[ 3] = floats[12];
+    m[ 7] = floats[13];
+    m[11] = floats[14];
+    m[15] = floats[15];
+    return true;
+    // FIXME: Could add code to handel 3x3 matrixes
+  } else {
+    return false;
+  }
+}
+
+bool get(FileReader&amp; reader, const char* name, Color&amp; value)
+{
+  std::vector&lt;float&gt; floats;
+  if (reader.get(name, floats)) {
+    if (floats.size() == 3)
+      {
+        value.r = floats[0];
+        value.g = floats[1];
+        value.b = floats[2];
+        value.a = 1.0f;
+        return true;
+      }
+    else if (floats.size() == 4)
+      {
+        value.r = floats[0];
+        value.b = floats[1];
+        value.g = floats[2];
+        value.a = floats[3];
+        return true;
+      }
+    else
+      {
+        return false;
+      }
+  } else {
+    return false;
+  } 
+}
+
+// Getters for primitive types
+// FIXME: Ugly, maybe there is a better way then to have different read/get names for the function
+bool get(FileReader&amp; reader, const char* name, FileReader&amp; v) { return reader.read(name, v); }
+
+bool get(FileReader&amp; reader, const char* name, int&amp;   v) { return reader.read(name, v); }
+bool get(FileReader&amp; reader, const char* name, float&amp; v) { return reader.read(name, v); }
+bool get(FileReader&amp; reader, const char* name, bool&amp; v) { return reader.read(name, v); }
+bool get(FileReader&amp; reader, const char* name, std::string&amp; v) { return reader.read(name, v); }
+
+bool get(FileReader&amp; reader, const char* name, std::vector&lt;bool&gt;&amp;   v) { return reader.read(name, v); }
+bool get(FileReader&amp; reader, const char* name, std::vector&lt;int&gt;&amp;   v) { return reader.read(name, v); }
+bool get(FileReader&amp; reader, const char* name, std::vector&lt;float&gt;&amp; v) { return reader.read(name, v); }
+bool get(FileReader&amp; reader, const char* name, std::vector&lt;std::string&gt;&amp; v) { return reader.read(name, v); }
+
+/* EOF */


Property changes on: trunk/windstille/src/util/getter.cpp
___________________________________________________________________
Name: svn:keywords
   + Id
Name: svn:mergeinfo
   + 
Name: svn:eol-style
   + native

Copied: trunk/windstille/src/util/getter.hpp (from rev 2463, trunk/windstille/src/getter.hpp)


Property changes on: trunk/windstille/src/util/getter.hpp
___________________________________________________________________
Name: svn:keywords
   + Id
Name: svn:mergeinfo
   + 
Name: svn:eol-style
   + native

Copied: trunk/windstille/src/util/response_curve.cpp (from rev 2463, trunk/windstille/src/response_curve.cpp)


Property changes on: trunk/windstille/src/util/response_curve.cpp
___________________________________________________________________
Name: svn:mergeinfo
   + 

Copied: trunk/windstille/src/util/response_curve.hpp (from rev 2463, trunk/windstille/src/response_curve.hpp)


Property changes on: trunk/windstille/src/util/response_curve.hpp
___________________________________________________________________
Name: svn:mergeinfo
   + 

Copied: trunk/windstille/src/util/sexpr_file_reader.cpp (from rev 2463, trunk/windstille/src/sexpr_file_reader.cpp)
===================================================================
--- trunk/windstille/src/sexpr_file_reader.cpp	2009-02-11 21:05:03 UTC (rev 2463)
+++ trunk/windstille/src/util/sexpr_file_reader.cpp	2009-02-11 21:47:00 UTC (rev 2465)
@@ -0,0 +1,246 @@
+/*
+**  Windstille - A Sci-Fi Action-Adventure Game
+**  Copyright (C) 2005 Ingo Ruhnke &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/windstille-commit">grumbel at gmx.de</A>&gt;
+**
+**  This program is free software: you can redistribute it and/or modify
+**  it under the terms of the GNU General Public License as published by
+**  the Free Software Foundation, either version 3 of the License, or
+**  (at your option) any later version.
+**  
+**  This program is distributed in the hope that it will be useful,
+**  but WITHOUT ANY WARRANTY; without even the implied warranty of
+**  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+**  GNU General Public License for more details.
+**  
+**  You should have received a copy of the GNU General Public License
+**  along with this program.  If not, see &lt;<A HREF="http://www.gnu.org/licenses/">http://www.gnu.org/licenses/</A>&gt;.
+*/
+
+#include &lt;assert.h&gt;
+#include &lt;string.h&gt;
+#include &quot;lisp/parser.hpp&quot;
+#include &quot;lisp/getters.hpp&quot;
+#include &quot;display/color.hpp&quot;
+#include &quot;math/size.hpp&quot;
+#include &quot;math/vector.hpp&quot;
+#include &quot;math/vector3.hpp&quot;
+#include &quot;file_reader_impl.hpp&quot;
+#include &quot;sexpr_file_reader.hpp&quot;
+
+class SExprFileReaderImpl: public FileReaderImpl
+{
+public:
+  /** Pointer to the top-most lisp element, only here for purpose of
+      being able to delete it */
+  const lisp::Lisp* root;
+
+  bool  delete_sexpr;
+  const lisp::Lisp* sexpr;
+
+  SExprFileReaderImpl(const lisp::Lisp* root_, const lisp::Lisp* sexpr_)
+    : root(root_),
+      sexpr(sexpr_), 
+      delete_sexpr(false)
+  {
+    assert(sexpr &amp;&amp; 
+           sexpr-&gt;get_type() == lisp::Lisp::TYPE_LIST &amp;&amp;
+           sexpr-&gt;get_list_size() &gt;= 1);
+  }
+
+  SExprFileReaderImpl(const lisp::Lisp* sexpr_, bool delete_sexpr_) 
+    : root(0),
+      sexpr(sexpr_), 
+      delete_sexpr(delete_sexpr_)
+  {
+    assert(sexpr &amp;&amp; 
+           sexpr-&gt;get_type() == lisp::Lisp::TYPE_LIST &amp;&amp;
+           sexpr-&gt;get_list_size() &gt;= 1);
+  }
+
+  ~SExprFileReaderImpl()
+  {
+    if (root)
+      delete root;
+
+    if (delete_sexpr)
+      delete sexpr;
+  }
+
+  std::string get_name() const 
+  {
+    return sexpr-&gt;get_list_elem(0)-&gt;get_symbol();
+  }
+
+  bool read_int(const char* name, int&amp; v) const 
+  {
+    lisp::Lisp* item = get_subsection_item(name);
+    if (item &amp;&amp; item-&gt;get_type() == lisp::Lisp::TYPE_INT)
+      {
+        v = item-&gt;get_int();
+        return true;
+      }
+    return false;
+  }
+
+  bool read_float(const char* name, float&amp; v) const 
+  {
+    lisp::Lisp* item = get_subsection_item(name);
+    if (item)
+      {
+        if (item-&gt;get_type() == lisp::Lisp::TYPE_FLOAT)
+          {
+            v = item-&gt;get_float();
+            return true;
+          }
+        else if (item-&gt;get_type() == lisp::Lisp::TYPE_INT)
+          {
+            v = item-&gt;get_int();
+            return true;
+          }
+        else
+          {
+            return false;
+          }
+      }
+    return false;
+  }
+
+  bool read_bool  (const char* name, bool&amp; v) const 
+  {
+    lisp::Lisp* item = get_subsection_item(name);
+    if (item &amp;&amp; item-&gt;get_type() == lisp::Lisp::TYPE_BOOL)
+      {
+        v = item-&gt;get_bool();
+        return true;
+      }
+    return false;
+  }
+
+  bool read_string(const char* name, std::string&amp; v) const 
+  {
+    lisp::Lisp* sub = get_subsection(name);
+    if (sub)
+      {
+        v = &quot;&quot;;
+        for(size_t i = 1; i &lt; sub-&gt;get_list_size(); ++i)
+          {
+            lisp::Lisp* item = sub-&gt;get_list_elem(i);
+            if (item-&gt;get_type() == lisp::Lisp::TYPE_STRING)
+              {
+                v += item-&gt;get_string();
+              }
+            else if (item-&gt;get_type() == lisp::Lisp::TYPE_SYMBOL)
+              {
+                v += item-&gt;get_symbol();
+              }
+          }
+        return true;
+      }
+    return false;
+  }
+
+  bool get(const char* name, std::vector&lt;int&gt;&amp;   v) const
+  {
+    lisp::Lisp* sub = get_subsection(name);
+    if (sub)
+      return property_get(sub, v);
+    else 
+      return false;
+  }
+
+  bool get(const char* name, std::vector&lt;bool&gt;&amp;   v) const
+  {
+    lisp::Lisp* sub = get_subsection(name);
+    if (sub)
+      return property_get(sub, v);
+    else 
+      return false;
+  }
+
+  bool get(const char* name, std::vector&lt;std::string&gt;&amp;   v) const
+  {
+    lisp::Lisp* sub = get_subsection(name);
+    if (sub)
+      return property_get(sub, v);
+    else 
+      return false;
+  }
+
+  bool get(const char* name, std::vector&lt;float&gt;&amp; v) const
+  {
+    lisp::Lisp* sub = get_subsection(name);
+    if (sub)
+      return property_get(sub, v);
+    else 
+      return false;
+  }
+
+  bool read_section(const char* name, FileReader&amp; v) const 
+  {
+    lisp::Lisp* cur = get_subsection(name);
+    if (cur)
+      {
+        v = SExprFileReader(cur);
+        return true;
+      }
+    return false;
+  }
+
+  std::vector&lt;FileReader&gt; get_sections() const 
+  {
+    std::vector&lt;FileReader&gt; lst;
+    for(size_t i = 1; i &lt; sexpr-&gt;get_list_size(); ++i)
+      { // iterate over subsections
+        lst.push_back(SExprFileReader(sexpr-&gt;get_list_elem(i)));
+      }
+    return lst;
+  }
+
+  std::vector&lt;std::string&gt; get_section_names() const 
+  {
+    std::vector&lt;std::string&gt; lst;
+
+    for(size_t i = 1; i &lt; sexpr-&gt;get_list_size(); ++i)
+      { // iterate over subsections
+        lisp::Lisp* sub = sexpr-&gt;get_list_elem(i);
+        lst.push_back(sub-&gt;get_list_elem(0)-&gt;get_symbol());
+      }
+
+    return lst;
+  }
+
+private:
+  lisp::Lisp* get_subsection_item(const char* name) const
+  {
+    lisp::Lisp* sub = get_subsection(name);
+    if (sub &amp;&amp; sub-&gt;get_list_size() == 2)
+      {
+        return sub-&gt;get_list_elem(1);
+      }
+    return 0;
+  }
+
+  lisp::Lisp* get_subsection(const char* name) const
+  {
+    for(size_t i = 1; i &lt; sexpr-&gt;get_list_size(); ++i)
+      { // iterate over subsections
+        lisp::Lisp* sub = sexpr-&gt;get_list_elem(i);
+        if (strcmp(sub-&gt;get_list_elem(0)-&gt;get_symbol(), name) == 0)
+          return sub;
+      }
+    return 0;
+  } 
+
+};
+
+SExprFileReader::SExprFileReader(const lisp::Lisp* sexpr, bool delete_sexpr)
+  : FileReader(boost::shared_ptr&lt;FileReaderImpl&gt;(new SExprFileReaderImpl(sexpr, delete_sexpr)))
+{
+}
+
+SExprFileReader::SExprFileReader(const lisp::Lisp* root, const lisp::Lisp* sexpr)
+  : FileReader(boost::shared_ptr&lt;FileReaderImpl&gt;(new SExprFileReaderImpl(root, sexpr)))
+{
+}
+
+/* EOF */


Property changes on: trunk/windstille/src/util/sexpr_file_reader.cpp
___________________________________________________________________
Name: svn:keywords
   + Id
Name: svn:mergeinfo
   + 
Name: svn:eol-style
   + native

Copied: trunk/windstille/src/util/sexpr_file_reader.hpp (from rev 2463, trunk/windstille/src/sexpr_file_reader.hpp)


Property changes on: trunk/windstille/src/util/sexpr_file_reader.hpp
___________________________________________________________________
Name: svn:keywords
   + Id
Name: svn:mergeinfo
   + 
Name: svn:eol-style
   + native


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="001461.html">[Windstille-commit] r2464 - in trunk/windstille/src: . engine gui	objects particles scripting sprite3d tile
</A></li>
	<LI>Next message: <A HREF="001463.html">[Windstille-commit] r2466 - in trunk/windstille/src: . armature	display engine font gui input math navigation objects	particles scripting sprite2d sprite3d tile util
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1462">[ date ]</a>
              <a href="thread.html#1462">[ thread ]</a>
              <a href="subject.html#1462">[ subject ]</a>
              <a href="author.html#1462">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/windstille-commit">More information about the Windstille-commit
mailing list</a><br>
</body></html>
