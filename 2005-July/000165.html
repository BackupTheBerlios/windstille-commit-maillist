<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Windstille-commit] r509 - trunk/src/scripting
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/windstille-commit/2005-July/index.html" >
   <LINK REL="made" HREF="mailto:windstille-commit%40lists.berlios.de?Subject=Re%3A%20%5BWindstille-commit%5D%20r509%20-%20trunk/src/scripting&In-Reply-To=%3C200507021548.j62FmCi6013744%40sheep.berlios.de%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000164.html">
   <LINK REL="Next"  HREF="000166.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Windstille-commit] r509 - trunk/src/scripting</H1>
    <B>James Gregory at BerliOS</B> 
    <A HREF="mailto:windstille-commit%40lists.berlios.de?Subject=Re%3A%20%5BWindstille-commit%5D%20r509%20-%20trunk/src/scripting&In-Reply-To=%3C200507021548.j62FmCi6013744%40sheep.berlios.de%3E"
       TITLE="[Windstille-commit] r509 - trunk/src/scripting">jamesgregory at berlios.de
       </A><BR>
    <I>Sat Jul  2 17:48:12 CEST 2005</I>
    <P><UL>
        <LI>Previous message: <A HREF="000164.html">[Windstille-commit] r508 - in trunk: data data/images src
</A></li>
        <LI>Next message: <A HREF="000166.html">[Windstille-commit] r510 - in trunk/src: . display input lisp physfs scripting sound tinygettext
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#165">[ date ]</a>
              <a href="thread.html#165">[ thread ]</a>
              <a href="subject.html#165">[ subject ]</a>
              <a href="author.html#165">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Author: jamesgregory
Date: 2005-07-02 17:48:11 +0200 (Sat, 02 Jul 2005)
New Revision: 509

Modified:
   trunk/src/scripting/wrapper.cpp
   trunk/src/scripting/wrapper.hpp
Log:
revert to unix line endings

Modified: trunk/src/scripting/wrapper.cpp
===================================================================
--- trunk/src/scripting/wrapper.cpp	2005-07-02 15:46:41 UTC (rev 508)
+++ trunk/src/scripting/wrapper.cpp	2005-07-02 15:48:11 UTC (rev 509)
@@ -1,358 +1,358 @@
-/**
- * WARNING: This file is automatically generated from:
- *  'src/scripting/wrapper.interface.hpp'
- * DO NOT CHANGE
- */
-#include &lt;config.h&gt;
-
-#include &lt;new&gt;
-#include &lt;assert.h&gt;
-#include &lt;string&gt;
-#include &lt;squirrel.h&gt;
-#include &quot;wrapper_util.hpp&quot;
-#include &quot;wrapper.interface.hpp&quot;
-
-namespace SquirrelWrapper
-{
-
-static int GameObject_release_hook(SQUserPointer ptr, int )
-{
-  Scripting::GameObject* _this = reinterpret_cast&lt;Scripting::GameObject*&gt; (ptr);
-  delete _this;
-  return 0;
-}
-
-void create_squirrel_instance(HSQUIRRELVM v, Scripting::GameObject* object, bool setup_releasehook)
-{
-  sq_pushstring(v, &quot;GameObject&quot;, -1);
-  if(sq_get(v, -2) &lt; 0) {
-    std::ostringstream msg;
-    msg &lt;&lt; &quot;Couldn't resolved squirrel type 'GameObject'&quot;;
-    throw SquirrelError(v, msg.str());
-  }
-
-  if(sq_createinstance(v, -1) &lt; 0 || sq_setinstanceup(v, -1, object) &lt; 0) {
-    std::ostringstream msg;
-    msg &lt;&lt; &quot;Couldn't setup squirrel instance for object of type 'GameObject'&quot;;
-    throw SquirrelError(v, msg.str());
-  }
-  sq_remove(v, -2);
-
-  if(setup_releasehook) {
-    sq_setreleasehook(v, -1, GameObject_release_hook);
-  }
-}
-static int GameObject_get_name_wrapper(HSQUIRRELVM v)
-{
-  Scripting::GameObject* _this;
-  sq_getinstanceup(v, 1, (SQUserPointer*) &amp;_this, 0);
-  
-  const std::string&amp; return_value = _this-&gt;get_name();
-  
-  sq_pushstring(v, return_value.c_str(), return_value.size());
-  return 1;
-}
-
-static int FlashingSign_release_hook(SQUserPointer ptr, int )
-{
-  Scripting::FlashingSign* _this = reinterpret_cast&lt;Scripting::FlashingSign*&gt; (ptr);
-  delete _this;
-  return 0;
-}
-
-void create_squirrel_instance(HSQUIRRELVM v, Scripting::FlashingSign* object, bool setup_releasehook)
-{
-  sq_pushstring(v, &quot;FlashingSign&quot;, -1);
-  if(sq_get(v, -2) &lt; 0) {
-    std::ostringstream msg;
-    msg &lt;&lt; &quot;Couldn't resolved squirrel type 'FlashingSign'&quot;;
-    throw SquirrelError(v, msg.str());
-  }
-
-  if(sq_createinstance(v, -1) &lt; 0 || sq_setinstanceup(v, -1, object) &lt; 0) {
-    std::ostringstream msg;
-    msg &lt;&lt; &quot;Couldn't setup squirrel instance for object of type 'FlashingSign'&quot;;
-    throw SquirrelError(v, msg.str());
-  }
-  sq_remove(v, -2);
-
-  if(setup_releasehook) {
-    sq_setreleasehook(v, -1, FlashingSign_release_hook);
-  }
-}
-static int FlashingSign_enable_wrapper(HSQUIRRELVM v)
-{
-  Scripting::FlashingSign* _this;
-  sq_getinstanceup(v, 1, (SQUserPointer*) &amp;_this, 0);
-  
-  _this-&gt;enable();
-  
-  return 0;
-}
-
-static int FlashingSign_disable_wrapper(HSQUIRRELVM v)
-{
-  Scripting::FlashingSign* _this;
-  sq_getinstanceup(v, 1, (SQUserPointer*) &amp;_this, 0);
-  
-  _this-&gt;disable();
-  
-  return 0;
-}
-
-static int set_sector_wrapper(HSQUIRRELVM v)
-{
-  const char* arg0;
-  sq_getstring(v, 2, &amp;arg0);
-  
-  Scripting::set_sector(arg0);
-  
-  return 0;
-}
-
-static int play_music_wrapper(HSQUIRRELVM v)
-{
-  const char* arg0;
-  sq_getstring(v, 2, &amp;arg0);
-  
-  Scripting::play_music(arg0);
-  
-  return 0;
-}
-
-static int play_sound_wrapper(HSQUIRRELVM v)
-{
-  const char* arg0;
-  sq_getstring(v, 2, &amp;arg0);
-  
-  Scripting::play_sound(arg0);
-  
-  return 0;
-}
-
-static int set_dialog_wrapper(HSQUIRRELVM v)
-{
-  int arg0;
-  sq_getinteger(v, 2, &amp;arg0);
-  const char* arg1;
-  sq_getstring(v, 3, &amp;arg1);
-  const char* arg2;
-  sq_getstring(v, 4, &amp;arg2);
-  
-  Scripting::set_dialog(arg0, arg1, arg2);
-  
-  return 0;
-}
-
-static int show_dialog_wrapper(HSQUIRRELVM v)
-{
-  float arg0;
-  sq_getfloat(v, 2, &amp;arg0);
-  
-  Scripting::show_dialog(arg0);
-  
-  return 0;
-}
-
-static int hide_dialog_wrapper(HSQUIRRELVM v)
-{
-  float arg0;
-  sq_getfloat(v, 2, &amp;arg0);
-  
-  Scripting::hide_dialog(arg0);
-  
-  return 0;
-}
-
-static int wait_wrapper(HSQUIRRELVM v)
-{
-  HSQUIRRELVM arg0 = v;
-  float arg1;
-  sq_getfloat(v, 2, &amp;arg1);
-  
-  Scripting::wait(arg0, arg1);
-  
-  return sq_suspendvm(v);
-}
-
-static int wait_for_dialog_wrapper(HSQUIRRELVM v)
-{
-  HSQUIRRELVM arg0 = v;
-  
-  Scripting::wait_for_dialog(arg0);
-  
-  return sq_suspendvm(v);
-}
-
-void register_windstille_wrapper(HSQUIRRELVM v)
-{
-  sq_pushroottable(v);
-  sq_pushstring(v, &quot;VCENTER&quot;, -1);
-  sq_pushinteger(v, 0);
-  if(sq_createslot(v, -3) &lt; 0) {
-    std::ostringstream msg;
-    msg &lt;&lt; &quot;Couldn't register constant'VCENTER'&quot;;
-    throw SquirrelError(v, msg.str());
-  }
-
-  sq_pushstring(v, &quot;LEFT&quot;, -1);
-  sq_pushinteger(v, 1);
-  if(sq_createslot(v, -3) &lt; 0) {
-    std::ostringstream msg;
-    msg &lt;&lt; &quot;Couldn't register constant'LEFT'&quot;;
-    throw SquirrelError(v, msg.str());
-  }
-
-  sq_pushstring(v, &quot;RIGHT&quot;, -1);
-  sq_pushinteger(v, 2);
-  if(sq_createslot(v, -3) &lt; 0) {
-    std::ostringstream msg;
-    msg &lt;&lt; &quot;Couldn't register constant'RIGHT'&quot;;
-    throw SquirrelError(v, msg.str());
-  }
-
-  sq_pushstring(v, &quot;HCENTER&quot;, -1);
-  sq_pushinteger(v, 0);
-  if(sq_createslot(v, -3) &lt; 0) {
-    std::ostringstream msg;
-    msg &lt;&lt; &quot;Couldn't register constant'HCENTER'&quot;;
-    throw SquirrelError(v, msg.str());
-  }
-
-  sq_pushstring(v, &quot;TOP&quot;, -1);
-  sq_pushinteger(v, 16);
-  if(sq_createslot(v, -3) &lt; 0) {
-    std::ostringstream msg;
-    msg &lt;&lt; &quot;Couldn't register constant'TOP'&quot;;
-    throw SquirrelError(v, msg.str());
-  }
-
-  sq_pushstring(v, &quot;BOTTOM&quot;, -1);
-  sq_pushinteger(v, 32);
-  if(sq_createslot(v, -3) &lt; 0) {
-    std::ostringstream msg;
-    msg &lt;&lt; &quot;Couldn't register constant'BOTTOM'&quot;;
-    throw SquirrelError(v, msg.str());
-  }
-
-  sq_pushstring(v, &quot;set_sector&quot;, -1);
-  sq_newclosure(v, &amp;set_sector_wrapper, 0);
-  if(sq_createslot(v, -3) &lt; 0) {
-    std::ostringstream msg;
-    msg &lt;&lt; &quot;Couldn't register function'set_sector'&quot;;
-    throw SquirrelError(v, msg.str());
-  }
-
-  sq_pushstring(v, &quot;play_music&quot;, -1);
-  sq_newclosure(v, &amp;play_music_wrapper, 0);
-  if(sq_createslot(v, -3) &lt; 0) {
-    std::ostringstream msg;
-    msg &lt;&lt; &quot;Couldn't register function'play_music'&quot;;
-    throw SquirrelError(v, msg.str());
-  }
-
-  sq_pushstring(v, &quot;play_sound&quot;, -1);
-  sq_newclosure(v, &amp;play_sound_wrapper, 0);
-  if(sq_createslot(v, -3) &lt; 0) {
-    std::ostringstream msg;
-    msg &lt;&lt; &quot;Couldn't register function'play_sound'&quot;;
-    throw SquirrelError(v, msg.str());
-  }
-
-  sq_pushstring(v, &quot;set_dialog&quot;, -1);
-  sq_newclosure(v, &amp;set_dialog_wrapper, 0);
-  if(sq_createslot(v, -3) &lt; 0) {
-    std::ostringstream msg;
-    msg &lt;&lt; &quot;Couldn't register function'set_dialog'&quot;;
-    throw SquirrelError(v, msg.str());
-  }
-
-  sq_pushstring(v, &quot;show_dialog&quot;, -1);
-  sq_newclosure(v, &amp;show_dialog_wrapper, 0);
-  if(sq_createslot(v, -3) &lt; 0) {
-    std::ostringstream msg;
-    msg &lt;&lt; &quot;Couldn't register function'show_dialog'&quot;;
-    throw SquirrelError(v, msg.str());
-  }
-
-  sq_pushstring(v, &quot;hide_dialog&quot;, -1);
-  sq_newclosure(v, &amp;hide_dialog_wrapper, 0);
-  if(sq_createslot(v, -3) &lt; 0) {
-    std::ostringstream msg;
-    msg &lt;&lt; &quot;Couldn't register function'hide_dialog'&quot;;
-    throw SquirrelError(v, msg.str());
-  }
-
-  sq_pushstring(v, &quot;wait&quot;, -1);
-  sq_newclosure(v, &amp;wait_wrapper, 0);
-  if(sq_createslot(v, -3) &lt; 0) {
-    std::ostringstream msg;
-    msg &lt;&lt; &quot;Couldn't register function'wait'&quot;;
-    throw SquirrelError(v, msg.str());
-  }
-
-  sq_pushstring(v, &quot;wait_for_dialog&quot;, -1);
-  sq_newclosure(v, &amp;wait_for_dialog_wrapper, 0);
-  if(sq_createslot(v, -3) &lt; 0) {
-    std::ostringstream msg;
-    msg &lt;&lt; &quot;Couldn't register function'wait_for_dialog'&quot;;
-    throw SquirrelError(v, msg.str());
-  }
-
-  // Register class GameObject
-  sq_pushstring(v, &quot;GameObject&quot;, -1);
-  if(sq_newclass(v, SQFalse) &lt; 0) {
-    std::ostringstream msg;
-    msg &lt;&lt; &quot;Couldn't create new class 'GameObject'&quot;;
-    throw SquirrelError(v, msg.str());
-  }
-  sq_pushstring(v, &quot;get_name&quot;, -1);
-  sq_newclosure(v, &amp;GameObject_get_name_wrapper, 0);
-  if(sq_createslot(v, -3) &lt; 0) {
-    std::ostringstream msg;
-    msg &lt;&lt; &quot;Couldn't register function'get_name'&quot;;
-    throw SquirrelError(v, msg.str());
-  }
-
-  if(sq_createslot(v, -3) &lt; 0) {
-    std::ostringstream msg;
-    msg &lt;&lt; &quot;Couldn't register class'GameObject'&quot;;
-    throw SquirrelError(v, msg.str());
-  }
-
-  // Register class FlashingSign
-  sq_pushstring(v, &quot;FlashingSign&quot;, -1);
-  sq_pushstring(v, &quot;GameObject&quot;, -1);
-  sq_get(v, -3);
-  if(sq_newclass(v, SQTrue) &lt; 0) {
-    std::ostringstream msg;
-    msg &lt;&lt; &quot;Couldn't create new class 'FlashingSign'&quot;;
-    throw SquirrelError(v, msg.str());
-  }
-  sq_pushstring(v, &quot;enable&quot;, -1);
-  sq_newclosure(v, &amp;FlashingSign_enable_wrapper, 0);
-  if(sq_createslot(v, -3) &lt; 0) {
-    std::ostringstream msg;
-    msg &lt;&lt; &quot;Couldn't register function'enable'&quot;;
-    throw SquirrelError(v, msg.str());
-  }
-
-  sq_pushstring(v, &quot;disable&quot;, -1);
-  sq_newclosure(v, &amp;FlashingSign_disable_wrapper, 0);
-  if(sq_createslot(v, -3) &lt; 0) {
-    std::ostringstream msg;
-    msg &lt;&lt; &quot;Couldn't register function'disable'&quot;;
-    throw SquirrelError(v, msg.str());
-  }
-
-  if(sq_createslot(v, -3) &lt; 0) {
-    std::ostringstream msg;
-    msg &lt;&lt; &quot;Couldn't register class'FlashingSign'&quot;;
-    throw SquirrelError(v, msg.str());
-  }
-
-  sq_pop(v, 1);
-}
-
-}
-
+/**
+ * WARNING: This file is automatically generated from:
+ *  'src/scripting/wrapper.interface.hpp'
+ * DO NOT CHANGE
+ */
+#include &lt;config.h&gt;
+
+#include &lt;new&gt;
+#include &lt;assert.h&gt;
+#include &lt;string&gt;
+#include &lt;squirrel.h&gt;
+#include &quot;wrapper_util.hpp&quot;
+#include &quot;wrapper.interface.hpp&quot;
+
+namespace SquirrelWrapper
+{
+
+static int GameObject_release_hook(SQUserPointer ptr, int )
+{
+  Scripting::GameObject* _this = reinterpret_cast&lt;Scripting::GameObject*&gt; (ptr);
+  delete _this;
+  return 0;
+}
+
+void create_squirrel_instance(HSQUIRRELVM v, Scripting::GameObject* object, bool setup_releasehook)
+{
+  sq_pushstring(v, &quot;GameObject&quot;, -1);
+  if(sq_get(v, -2) &lt; 0) {
+    std::ostringstream msg;
+    msg &lt;&lt; &quot;Couldn't resolved squirrel type 'GameObject'&quot;;
+    throw SquirrelError(v, msg.str());
+  }
+
+  if(sq_createinstance(v, -1) &lt; 0 || sq_setinstanceup(v, -1, object) &lt; 0) {
+    std::ostringstream msg;
+    msg &lt;&lt; &quot;Couldn't setup squirrel instance for object of type 'GameObject'&quot;;
+    throw SquirrelError(v, msg.str());
+  }
+  sq_remove(v, -2);
+
+  if(setup_releasehook) {
+    sq_setreleasehook(v, -1, GameObject_release_hook);
+  }
+}
+static int GameObject_get_name_wrapper(HSQUIRRELVM v)
+{
+  Scripting::GameObject* _this;
+  sq_getinstanceup(v, 1, (SQUserPointer*) &amp;_this, 0);
+  
+  const std::string&amp; return_value = _this-&gt;get_name();
+  
+  sq_pushstring(v, return_value.c_str(), return_value.size());
+  return 1;
+}
+
+static int FlashingSign_release_hook(SQUserPointer ptr, int )
+{
+  Scripting::FlashingSign* _this = reinterpret_cast&lt;Scripting::FlashingSign*&gt; (ptr);
+  delete _this;
+  return 0;
+}
+
+void create_squirrel_instance(HSQUIRRELVM v, Scripting::FlashingSign* object, bool setup_releasehook)
+{
+  sq_pushstring(v, &quot;FlashingSign&quot;, -1);
+  if(sq_get(v, -2) &lt; 0) {
+    std::ostringstream msg;
+    msg &lt;&lt; &quot;Couldn't resolved squirrel type 'FlashingSign'&quot;;
+    throw SquirrelError(v, msg.str());
+  }
+
+  if(sq_createinstance(v, -1) &lt; 0 || sq_setinstanceup(v, -1, object) &lt; 0) {
+    std::ostringstream msg;
+    msg &lt;&lt; &quot;Couldn't setup squirrel instance for object of type 'FlashingSign'&quot;;
+    throw SquirrelError(v, msg.str());
+  }
+  sq_remove(v, -2);
+
+  if(setup_releasehook) {
+    sq_setreleasehook(v, -1, FlashingSign_release_hook);
+  }
+}
+static int FlashingSign_enable_wrapper(HSQUIRRELVM v)
+{
+  Scripting::FlashingSign* _this;
+  sq_getinstanceup(v, 1, (SQUserPointer*) &amp;_this, 0);
+  
+  _this-&gt;enable();
+  
+  return 0;
+}
+
+static int FlashingSign_disable_wrapper(HSQUIRRELVM v)
+{
+  Scripting::FlashingSign* _this;
+  sq_getinstanceup(v, 1, (SQUserPointer*) &amp;_this, 0);
+  
+  _this-&gt;disable();
+  
+  return 0;
+}
+
+static int set_sector_wrapper(HSQUIRRELVM v)
+{
+  const char* arg0;
+  sq_getstring(v, 2, &amp;arg0);
+  
+  Scripting::set_sector(arg0);
+  
+  return 0;
+}
+
+static int play_music_wrapper(HSQUIRRELVM v)
+{
+  const char* arg0;
+  sq_getstring(v, 2, &amp;arg0);
+  
+  Scripting::play_music(arg0);
+  
+  return 0;
+}
+
+static int play_sound_wrapper(HSQUIRRELVM v)
+{
+  const char* arg0;
+  sq_getstring(v, 2, &amp;arg0);
+  
+  Scripting::play_sound(arg0);
+  
+  return 0;
+}
+
+static int set_dialog_wrapper(HSQUIRRELVM v)
+{
+  int arg0;
+  sq_getinteger(v, 2, &amp;arg0);
+  const char* arg1;
+  sq_getstring(v, 3, &amp;arg1);
+  const char* arg2;
+  sq_getstring(v, 4, &amp;arg2);
+  
+  Scripting::set_dialog(arg0, arg1, arg2);
+  
+  return 0;
+}
+
+static int show_dialog_wrapper(HSQUIRRELVM v)
+{
+  float arg0;
+  sq_getfloat(v, 2, &amp;arg0);
+  
+  Scripting::show_dialog(arg0);
+  
+  return 0;
+}
+
+static int hide_dialog_wrapper(HSQUIRRELVM v)
+{
+  float arg0;
+  sq_getfloat(v, 2, &amp;arg0);
+  
+  Scripting::hide_dialog(arg0);
+  
+  return 0;
+}
+
+static int wait_wrapper(HSQUIRRELVM v)
+{
+  HSQUIRRELVM arg0 = v;
+  float arg1;
+  sq_getfloat(v, 2, &amp;arg1);
+  
+  Scripting::wait(arg0, arg1);
+  
+  return sq_suspendvm(v);
+}
+
+static int wait_for_dialog_wrapper(HSQUIRRELVM v)
+{
+  HSQUIRRELVM arg0 = v;
+  
+  Scripting::wait_for_dialog(arg0);
+  
+  return sq_suspendvm(v);
+}
+
+void register_windstille_wrapper(HSQUIRRELVM v)
+{
+  sq_pushroottable(v);
+  sq_pushstring(v, &quot;VCENTER&quot;, -1);
+  sq_pushinteger(v, 0);
+  if(sq_createslot(v, -3) &lt; 0) {
+    std::ostringstream msg;
+    msg &lt;&lt; &quot;Couldn't register constant'VCENTER'&quot;;
+    throw SquirrelError(v, msg.str());
+  }
+
+  sq_pushstring(v, &quot;LEFT&quot;, -1);
+  sq_pushinteger(v, 1);
+  if(sq_createslot(v, -3) &lt; 0) {
+    std::ostringstream msg;
+    msg &lt;&lt; &quot;Couldn't register constant'LEFT'&quot;;
+    throw SquirrelError(v, msg.str());
+  }
+
+  sq_pushstring(v, &quot;RIGHT&quot;, -1);
+  sq_pushinteger(v, 2);
+  if(sq_createslot(v, -3) &lt; 0) {
+    std::ostringstream msg;
+    msg &lt;&lt; &quot;Couldn't register constant'RIGHT'&quot;;
+    throw SquirrelError(v, msg.str());
+  }
+
+  sq_pushstring(v, &quot;HCENTER&quot;, -1);
+  sq_pushinteger(v, 0);
+  if(sq_createslot(v, -3) &lt; 0) {
+    std::ostringstream msg;
+    msg &lt;&lt; &quot;Couldn't register constant'HCENTER'&quot;;
+    throw SquirrelError(v, msg.str());
+  }
+
+  sq_pushstring(v, &quot;TOP&quot;, -1);
+  sq_pushinteger(v, 16);
+  if(sq_createslot(v, -3) &lt; 0) {
+    std::ostringstream msg;
+    msg &lt;&lt; &quot;Couldn't register constant'TOP'&quot;;
+    throw SquirrelError(v, msg.str());
+  }
+
+  sq_pushstring(v, &quot;BOTTOM&quot;, -1);
+  sq_pushinteger(v, 32);
+  if(sq_createslot(v, -3) &lt; 0) {
+    std::ostringstream msg;
+    msg &lt;&lt; &quot;Couldn't register constant'BOTTOM'&quot;;
+    throw SquirrelError(v, msg.str());
+  }
+
+  sq_pushstring(v, &quot;set_sector&quot;, -1);
+  sq_newclosure(v, &amp;set_sector_wrapper, 0);
+  if(sq_createslot(v, -3) &lt; 0) {
+    std::ostringstream msg;
+    msg &lt;&lt; &quot;Couldn't register function'set_sector'&quot;;
+    throw SquirrelError(v, msg.str());
+  }
+
+  sq_pushstring(v, &quot;play_music&quot;, -1);
+  sq_newclosure(v, &amp;play_music_wrapper, 0);
+  if(sq_createslot(v, -3) &lt; 0) {
+    std::ostringstream msg;
+    msg &lt;&lt; &quot;Couldn't register function'play_music'&quot;;
+    throw SquirrelError(v, msg.str());
+  }
+
+  sq_pushstring(v, &quot;play_sound&quot;, -1);
+  sq_newclosure(v, &amp;play_sound_wrapper, 0);
+  if(sq_createslot(v, -3) &lt; 0) {
+    std::ostringstream msg;
+    msg &lt;&lt; &quot;Couldn't register function'play_sound'&quot;;
+    throw SquirrelError(v, msg.str());
+  }
+
+  sq_pushstring(v, &quot;set_dialog&quot;, -1);
+  sq_newclosure(v, &amp;set_dialog_wrapper, 0);
+  if(sq_createslot(v, -3) &lt; 0) {
+    std::ostringstream msg;
+    msg &lt;&lt; &quot;Couldn't register function'set_dialog'&quot;;
+    throw SquirrelError(v, msg.str());
+  }
+
+  sq_pushstring(v, &quot;show_dialog&quot;, -1);
+  sq_newclosure(v, &amp;show_dialog_wrapper, 0);
+  if(sq_createslot(v, -3) &lt; 0) {
+    std::ostringstream msg;
+    msg &lt;&lt; &quot;Couldn't register function'show_dialog'&quot;;
+    throw SquirrelError(v, msg.str());
+  }
+
+  sq_pushstring(v, &quot;hide_dialog&quot;, -1);
+  sq_newclosure(v, &amp;hide_dialog_wrapper, 0);
+  if(sq_createslot(v, -3) &lt; 0) {
+    std::ostringstream msg;
+    msg &lt;&lt; &quot;Couldn't register function'hide_dialog'&quot;;
+    throw SquirrelError(v, msg.str());
+  }
+
+  sq_pushstring(v, &quot;wait&quot;, -1);
+  sq_newclosure(v, &amp;wait_wrapper, 0);
+  if(sq_createslot(v, -3) &lt; 0) {
+    std::ostringstream msg;
+    msg &lt;&lt; &quot;Couldn't register function'wait'&quot;;
+    throw SquirrelError(v, msg.str());
+  }
+
+  sq_pushstring(v, &quot;wait_for_dialog&quot;, -1);
+  sq_newclosure(v, &amp;wait_for_dialog_wrapper, 0);
+  if(sq_createslot(v, -3) &lt; 0) {
+    std::ostringstream msg;
+    msg &lt;&lt; &quot;Couldn't register function'wait_for_dialog'&quot;;
+    throw SquirrelError(v, msg.str());
+  }
+
+  // Register class GameObject
+  sq_pushstring(v, &quot;GameObject&quot;, -1);
+  if(sq_newclass(v, SQFalse) &lt; 0) {
+    std::ostringstream msg;
+    msg &lt;&lt; &quot;Couldn't create new class 'GameObject'&quot;;
+    throw SquirrelError(v, msg.str());
+  }
+  sq_pushstring(v, &quot;get_name&quot;, -1);
+  sq_newclosure(v, &amp;GameObject_get_name_wrapper, 0);
+  if(sq_createslot(v, -3) &lt; 0) {
+    std::ostringstream msg;
+    msg &lt;&lt; &quot;Couldn't register function'get_name'&quot;;
+    throw SquirrelError(v, msg.str());
+  }
+
+  if(sq_createslot(v, -3) &lt; 0) {
+    std::ostringstream msg;
+    msg &lt;&lt; &quot;Couldn't register class'GameObject'&quot;;
+    throw SquirrelError(v, msg.str());
+  }
+
+  // Register class FlashingSign
+  sq_pushstring(v, &quot;FlashingSign&quot;, -1);
+  sq_pushstring(v, &quot;GameObject&quot;, -1);
+  sq_get(v, -3);
+  if(sq_newclass(v, SQTrue) &lt; 0) {
+    std::ostringstream msg;
+    msg &lt;&lt; &quot;Couldn't create new class 'FlashingSign'&quot;;
+    throw SquirrelError(v, msg.str());
+  }
+  sq_pushstring(v, &quot;enable&quot;, -1);
+  sq_newclosure(v, &amp;FlashingSign_enable_wrapper, 0);
+  if(sq_createslot(v, -3) &lt; 0) {
+    std::ostringstream msg;
+    msg &lt;&lt; &quot;Couldn't register function'enable'&quot;;
+    throw SquirrelError(v, msg.str());
+  }
+
+  sq_pushstring(v, &quot;disable&quot;, -1);
+  sq_newclosure(v, &amp;FlashingSign_disable_wrapper, 0);
+  if(sq_createslot(v, -3) &lt; 0) {
+    std::ostringstream msg;
+    msg &lt;&lt; &quot;Couldn't register function'disable'&quot;;
+    throw SquirrelError(v, msg.str());
+  }
+
+  if(sq_createslot(v, -3) &lt; 0) {
+    std::ostringstream msg;
+    msg &lt;&lt; &quot;Couldn't register class'FlashingSign'&quot;;
+    throw SquirrelError(v, msg.str());
+  }
+
+  sq_pop(v, 1);
+}
+
+}
+

Modified: trunk/src/scripting/wrapper.hpp
===================================================================
--- trunk/src/scripting/wrapper.hpp	2005-07-02 15:46:41 UTC (rev 508)
+++ trunk/src/scripting/wrapper.hpp	2005-07-02 15:48:11 UTC (rev 509)
@@ -1,23 +1,23 @@
-/**
- * WARNING: This file is automatically generated from:
- *  'src/scripting/wrapper.interface.hpp'
- * DO NOT CHANGE
- */
-#ifndef __windstille_WRAPPER_H__
-#define __windstille_WRAPPER_H__
-
-#include &lt;squirrel.h&gt;
-#include &quot;wrapper.interface.hpp&quot;
-
-namespace SquirrelWrapper
-{
-
-void register_windstille_wrapper(HSQUIRRELVM v);
-
-void create_squirrel_instance(HSQUIRRELVM v, Scripting::GameObject* object, bool setup_releasehook = false);
-void create_squirrel_instance(HSQUIRRELVM v, Scripting::FlashingSign* object, bool setup_releasehook = false);
-
-}
-
-#endif
-
+/**
+ * WARNING: This file is automatically generated from:
+ *  'src/scripting/wrapper.interface.hpp'
+ * DO NOT CHANGE
+ */
+#ifndef __windstille_WRAPPER_H__
+#define __windstille_WRAPPER_H__
+
+#include &lt;squirrel.h&gt;
+#include &quot;wrapper.interface.hpp&quot;
+
+namespace SquirrelWrapper
+{
+
+void register_windstille_wrapper(HSQUIRRELVM v);
+
+void create_squirrel_instance(HSQUIRRELVM v, Scripting::GameObject* object, bool setup_releasehook = false);
+void create_squirrel_instance(HSQUIRRELVM v, Scripting::FlashingSign* object, bool setup_releasehook = false);
+
+}
+
+#endif
+


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000164.html">[Windstille-commit] r508 - in trunk: data data/images src
</A></li>
	<LI>Next message: <A HREF="000166.html">[Windstille-commit] r510 - in trunk/src: . display input lisp physfs scripting sound tinygettext
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#165">[ date ]</a>
              <a href="thread.html#165">[ thread ]</a>
              <a href="subject.html#165">[ subject ]</a>
              <a href="author.html#165">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/windstille-commit">More information about the Windstille-commit
mailing list</a><br>
</body></html>
