<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Windstille-commit] r3069 - in trunk/windstille/src: app armature	collision display editor engine gui hud input lisp math	objects particles physfs properties screen scripting sprite2d	sprite3d
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/windstille-commit/2009-August/index.html" >
   <LINK REL="made" HREF="mailto:windstille-commit%40lists.berlios.de?Subject=Re%3A%20%5BWindstille-commit%5D%20r3069%20-%20in%20trunk/windstille/src%3A%20app%20armature%0A%09collision%20display%20editor%20engine%20gui%20hud%20input%20lisp%20math%0A%09objects%20particles%20physfs%20properties%20screen%20scripting%20sprite2d%0A%09sprite3d&In-Reply-To=%3C200908251343.n7PDhSsb013320%40sheep.berlios.de%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="002065.html">
   <LINK REL="Next"  HREF="002067.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Windstille-commit] r3069 - in trunk/windstille/src: app armature	collision display editor engine gui hud input lisp math	objects particles physfs properties screen scripting sprite2d	sprite3d</H1>
    <B>grumbel at BerliOS</B> 
    <A HREF="mailto:windstille-commit%40lists.berlios.de?Subject=Re%3A%20%5BWindstille-commit%5D%20r3069%20-%20in%20trunk/windstille/src%3A%20app%20armature%0A%09collision%20display%20editor%20engine%20gui%20hud%20input%20lisp%20math%0A%09objects%20particles%20physfs%20properties%20screen%20scripting%20sprite2d%0A%09sprite3d&In-Reply-To=%3C200908251343.n7PDhSsb013320%40sheep.berlios.de%3E"
       TITLE="[Windstille-commit] r3069 - in trunk/windstille/src: app armature	collision display editor engine gui hud input lisp math	objects particles physfs properties screen scripting sprite2d	sprite3d">grumbel at mail.berlios.de
       </A><BR>
    <I>Tue Aug 25 15:43:28 CEST 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="002065.html">[Windstille-commit] r3068 - trunk/windstille
</A></li>
        <LI>Next message: <A HREF="002067.html">[Windstille-commit] r3070 - in trunk/windstille: . src/editor
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2066">[ date ]</a>
              <a href="thread.html#2066">[ thread ]</a>
              <a href="subject.html#2066">[ subject ]</a>
              <a href="author.html#2066">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Author: grumbel
Date: 2009-08-25 15:43:24 +0200 (Tue, 25 Aug 2009)
New Revision: 3069

Modified:
   trunk/windstille/src/app/console.cpp
   trunk/windstille/src/armature/armature.cpp
   trunk/windstille/src/collision/collision_engine.cpp
   trunk/windstille/src/collision/collision_object.cpp
   trunk/windstille/src/display/surface_manager.cpp
   trunk/windstille/src/editor/decal_object_model.cpp
   trunk/windstille/src/editor/editor_window.cpp
   trunk/windstille/src/editor/layer_manager.cpp
   trunk/windstille/src/editor/object_selector.cpp
   trunk/windstille/src/editor/selection.hpp
   trunk/windstille/src/editor/windstille_widget.cpp
   trunk/windstille/src/engine/entity.cpp
   trunk/windstille/src/engine/physics.cpp
   trunk/windstille/src/engine/sector.cpp
   trunk/windstille/src/engine/squirrel_thread.cpp
   trunk/windstille/src/gui/automap.cpp
   trunk/windstille/src/gui/button.cpp
   trunk/windstille/src/gui/component.cpp
   trunk/windstille/src/gui/grid_component.cpp
   trunk/windstille/src/gui/group_component.cpp
   trunk/windstille/src/gui/list_view.cpp
   trunk/windstille/src/gui/menu_component.cpp
   trunk/windstille/src/gui/menu_item.cpp
   trunk/windstille/src/gui/root_component.cpp
   trunk/windstille/src/gui/slider.cpp
   trunk/windstille/src/gui/tab_component.cpp
   trunk/windstille/src/gui/text_view.cpp
   trunk/windstille/src/hud/dialog_manager.cpp
   trunk/windstille/src/hud/inventory.cpp
   trunk/windstille/src/input/input_manager_sdl.cpp
   trunk/windstille/src/input/wiimote.cpp
   trunk/windstille/src/lisp/property_iterator.hpp
   trunk/windstille/src/math/matrix.cpp
   trunk/windstille/src/objects/grenade.cpp
   trunk/windstille/src/objects/player.cpp
   trunk/windstille/src/objects/shockwave.cpp
   trunk/windstille/src/objects/test_object.cpp
   trunk/windstille/src/particles/deform_drawer.cpp
   trunk/windstille/src/particles/particle_system.cpp
   trunk/windstille/src/particles/particle_system.hpp
   trunk/windstille/src/particles/surface_drawer.cpp
   trunk/windstille/src/physfs/physfs_stream.cpp
   trunk/windstille/src/properties/property.hpp
   trunk/windstille/src/properties/property_set.cpp
   trunk/windstille/src/properties/property_set.hpp
   trunk/windstille/src/screen/sprite2dview.cpp
   trunk/windstille/src/scripting/squirrel_error.cpp
   trunk/windstille/src/sprite2d/sprite.cpp
   trunk/windstille/src/sprite2d/sprite.hpp
   trunk/windstille/src/sprite3d/sprite3d.cpp
Log:
Fixed a bunch of -Wshadow warnings

Modified: trunk/windstille/src/app/console.cpp
===================================================================
--- trunk/windstille/src/app/console.cpp	2009-08-25 12:19:46 UTC (rev 3068)
+++ trunk/windstille/src/app/console.cpp	2009-08-25 13:43:24 UTC (rev 3069)
@@ -498,7 +498,6 @@
   std::string str = str_; //&quot;return (&quot; + str_ + &quot;)&quot;;
 
   int i = str.length();
-  const char* buffer = str.c_str();
 
   HSQUIRRELVM vm = ScriptManager::current()-&gt;get_vm();
 
@@ -507,7 +506,7 @@
 
   try 
     {
-      if(SQ_SUCCEEDED(sq_compilebuffer(vm, buffer, i, _SC(&quot;interactive console&quot;), SQTrue)))
+      if(SQ_SUCCEEDED(sq_compilebuffer(vm, str.c_str(), i, _SC(&quot;interactive console&quot;), SQTrue)))
         {
           sq_pushroottable(vm);
           if(SQ_SUCCEEDED(sq_call(vm, 1, 1/*retval*/, true))) 

Modified: trunk/windstille/src/armature/armature.cpp
===================================================================
--- trunk/windstille/src/armature/armature.cpp	2009-08-25 12:19:46 UTC (rev 3068)
+++ trunk/windstille/src/armature/armature.cpp	2009-08-25 13:43:24 UTC (rev 3069)
@@ -110,14 +110,14 @@
 }
 
 Bone*
-Armature::get_bone(const std::string&amp; name)
+Armature::get_bone(const std::string&amp; name_)
 {
   for(Bones::iterator i = bones.begin(); i != bones.end(); ++i)
     {
-      if ((*i)-&gt;name == name)
+      if ((*i)-&gt;name == name_)
         return *i;
     }
-  std::cout &lt;&lt; &quot;Error: Bone: '&quot; &lt;&lt; name &lt;&lt; &quot;' not found&quot; &lt;&lt; std::endl;
+  std::cout &lt;&lt; &quot;Error: Bone: '&quot; &lt;&lt; name_ &lt;&lt; &quot;' not found&quot; &lt;&lt; std::endl;
   return 0;
 }
 

Modified: trunk/windstille/src/collision/collision_engine.cpp
===================================================================
--- trunk/windstille/src/collision/collision_engine.cpp	2009-08-25 12:19:46 UTC (rev 3068)
+++ trunk/windstille/src/collision/collision_engine.cpp	2009-08-25 13:43:24 UTC (rev 3069)
@@ -240,15 +240,16 @@
 
   if(target.top &lt; rb.top)
     {
-      float add = static_cast&lt;float&gt;(c_roundup(target.bottom / static_cast&lt;float&gt;(TILE_SIZE))) * static_cast&lt;float&gt;(TILE_SIZE) - target.bottom;
-      target.top    += add;
-      target.bottom += add;
+      float v = static_cast&lt;float&gt;(c_roundup(target.bottom / static_cast&lt;float&gt;(TILE_SIZE)))
+        * static_cast&lt;float&gt;(TILE_SIZE) - target.bottom;
+      target.top    += v;
+      target.bottom += v;
     }
   if(target.left &lt; rb.left)
     {
-      float add = static_cast&lt;float&gt;(c_roundup(target.right / static_cast&lt;float&gt;(TILE_SIZE))) * static_cast&lt;float&gt;(TILE_SIZE) - target.right;
-      target.left  += add;
-      target.right += add;
+      float v = static_cast&lt;float&gt;(c_roundup(target.right / static_cast&lt;float&gt;(TILE_SIZE))) * static_cast&lt;float&gt;(TILE_SIZE) - target.right;
+      target.left  += v;
+      target.right += v;
     }
 
   b.pos = Vector2f(target.left-b.primitive.left, target.top-b.primitive.top);

Modified: trunk/windstille/src/collision/collision_object.cpp
===================================================================
--- trunk/windstille/src/collision/collision_object.cpp	2009-08-25 12:19:46 UTC (rev 3068)
+++ trunk/windstille/src/collision/collision_object.cpp	2009-08-25 13:43:24 UTC (rev 3069)
@@ -26,28 +26,19 @@
  * CollisionObject
  ***********************************************************************/
 
-CollisionObject::CollisionObject(GameObject* game_object, const Rectf&amp; rect_)
- : object_type(),
-   pos(),
-   velocity(),
-   game_object(),
+CollisionObject::CollisionObject(GameObject* game_object_, const Rectf&amp; rect_)
+ : object_type(RECTANGLE),
+   pos(0,0),
+   velocity(0,0),
+   game_object(game_object_),
    collision(),
    primitive(rect_),
    tilemap(),
-   is_unstuckable(),
-   is_unstuck_movable(),
-   is_domains(),
-   check_domains()
+   is_unstuckable(true),
+   is_unstuck_movable(true),
+   is_domains(DOMAIN_PLAYER  | DOMAIN_ENEMY),
+   check_domains(DOMAIN_TILEMAP | DOMAIN_PLAYER | DOMAIN_ENEMY)
 {
-  object_type        = RECTANGLE;
-  is_unstuckable     = true;
-  is_unstuck_movable = true;
-  velocity           = Vector2f(0,0);
-  pos                = Vector2f(0,0);
-  game_object        = game_object;
-
-  is_domains    = DOMAIN_PLAYER  | DOMAIN_ENEMY;
-  check_domains = DOMAIN_TILEMAP | DOMAIN_PLAYER | DOMAIN_ENEMY;
 }
 
 CollisionObject::CollisionObject(TileMap* tilemap_)

Modified: trunk/windstille/src/display/surface_manager.cpp
===================================================================
--- trunk/windstille/src/display/surface_manager.cpp	2009-08-25 12:19:46 UTC (rev 3068)
+++ trunk/windstille/src/display/surface_manager.cpp	2009-08-25 13:43:24 UTC (rev 3069)
@@ -91,7 +91,7 @@
 
 void
 SurfaceManager::load_grid(const Pathname&amp; filename,
-                          std::vector&lt;Surface&gt;&amp; surfaces,
+                          std::vector&lt;Surface&gt;&amp; out_surfaces,
                           int width, int height)
 {
   SoftwareSurface image(filename);
@@ -119,10 +119,10 @@
           float s_max_u = (maxu * (static_cast&lt;float&gt;(x + width)))  / static_cast&lt;float&gt;(image.get_width());
           float s_max_v = (maxv * (static_cast&lt;float&gt;(x + height))) / static_cast&lt;float&gt;(image.get_height());
 
-          surfaces.push_back(Surface(texture, 
-                                     Rectf(s_min_u, s_min_v, s_max_u, s_max_v), 
-                                     Sizef(static_cast&lt;float&gt;(width),
-                                           static_cast&lt;float&gt;(height))));
+          out_surfaces.push_back(Surface(texture, 
+                                         Rectf(s_min_u, s_min_v, s_max_u, s_max_v), 
+                                         Sizef(static_cast&lt;float&gt;(width),
+                                               static_cast&lt;float&gt;(height))));
         }
     }
 }

Modified: trunk/windstille/src/editor/decal_object_model.cpp
===================================================================
--- trunk/windstille/src/editor/decal_object_model.cpp	2009-08-25 12:19:46 UTC (rev 3068)
+++ trunk/windstille/src/editor/decal_object_model.cpp	2009-08-25 13:43:24 UTC (rev 3069)
@@ -59,9 +59,9 @@
   software_surface = SoftwareSurface(Pathname(path));
 }
 
-DecalObjectModel::DecalObjectModel(const std::string&amp; /*name*/, const Vector2f&amp; rel_pos, 
+DecalObjectModel::DecalObjectModel(const std::string&amp; /*name*/, const Vector2f&amp; rel_pos_, 
                                    const std::string&amp; path_, MapType type_)
-  : ObjectModel(&quot;DecalObjectModel&quot;, rel_pos),
+  : ObjectModel(&quot;DecalObjectModel&quot;, rel_pos_),
     path(path_),
     surface(Pathname(path_)),
     software_surface(Pathname(path_)),

Modified: trunk/windstille/src/editor/editor_window.cpp
===================================================================
--- trunk/windstille/src/editor/editor_window.cpp	2009-08-25 12:19:46 UTC (rev 3068)
+++ trunk/windstille/src/editor/editor_window.cpp	2009-08-25 13:43:24 UTC (rev 3069)
@@ -859,13 +859,13 @@
 }
 
 void
-EditorWindow::on_layer_toggle(int layer, bool status)
+EditorWindow::on_layer_toggle(int layer, bool status_)
 {
   //std::cout &lt;&lt; &quot;EditorWindow::on_layer_toggle(&quot; &lt;&lt; layer &lt;&lt; &quot;, &quot; &lt;&lt; status &lt;&lt; &quot;)&quot; &lt;&lt; std::endl;
 
   if (WindstilleWidget* wst = get_windstille_widget())
     {
-      wst-&gt;get_select_mask().set(layer, status);
+      wst-&gt;get_select_mask().set(layer, status_);
       wst-&gt;queue_draw();
     }
 }

Modified: trunk/windstille/src/editor/layer_manager.cpp
===================================================================
--- trunk/windstille/src/editor/layer_manager.cpp	2009-08-25 12:19:46 UTC (rev 3068)
+++ trunk/windstille/src/editor/layer_manager.cpp	2009-08-25 13:43:24 UTC (rev 3069)
@@ -129,18 +129,18 @@
 {
   if (auto_lock-&gt;get_active())
     {
-      Gtk::TreeModel::Path path;
+      Gtk::TreeModel::Path path_;
       Gtk::TreeViewColumn* focus_column;
-      treeview.get_cursor(path, focus_column);
+      treeview.get_cursor(path_, focus_column);
       
-      if (!path.gobj())
+      if (!path_.gobj())
         {
           std::cout &lt;&lt; &quot;LayerManager::on_cursor_changed(): Error: Couldn't get path&quot; &lt;&lt; std::endl;
         }
       else
         {
           //std::cout &lt;&lt; &quot;on_cursor_changed: &quot; &lt;&lt; path.to_string() &lt;&lt; std::endl;
-          Gtk::TreeModel::iterator it = treeview.get_model()-&gt;get_iter(path);
+          Gtk::TreeModel::iterator it = treeview.get_model()-&gt;get_iter(path_);
           if (it)
             {
               EditorWindow::current()-&gt;on_lock_all(true);

Modified: trunk/windstille/src/editor/object_selector.cpp
===================================================================
--- trunk/windstille/src/editor/object_selector.cpp	2009-08-25 12:19:46 UTC (rev 3068)
+++ trunk/windstille/src/editor/object_selector.cpp	2009-08-25 13:43:24 UTC (rev 3069)
@@ -161,14 +161,14 @@
 ObjectSelector::add_decal(const Glib::RefPtr&lt;Gdk::Pixbuf&gt;&amp; icon,
                           const std::string&amp; pathname,
                           const std::string&amp; url,
-                          uint32_t filter)
+                          uint32_t filter_)
 {
   Gtk::ListStore::iterator it = list_store-&gt;append();
 
   (*it)[Columns::instance().pathname]    = pathname;
   (*it)[Columns::instance().url]         = url;
   (*it)[Columns::instance().icon]        = icon;
-  (*it)[Columns::instance().filter_mask] = filter;
+  (*it)[Columns::instance().filter_mask] = filter_;
 }
 
 static bool has_suffix(const std::string&amp; str, const std::string&amp; suffix)
@@ -186,7 +186,7 @@
 }
 
 void
-ObjectSelector::add_decals_from_directory(const std::string&amp; pathname, uint32_t filter)
+ObjectSelector::add_decals_from_directory(const std::string&amp; pathname, uint32_t filter_)
 {
   std::vector&lt;Glib::ustring&gt; images;
 
@@ -195,9 +195,9 @@
     {
       if (has_suffix(*i, &quot;.png&quot;))
         {
-          Glib::ustring path = pathname;
-          path += *i;
-          images.push_back(path);
+          Glib::ustring path_ = pathname;
+          path_ += *i;
+          images.push_back(path_);
         }
     }
 
@@ -253,7 +253,7 @@
 
       add_decal(icon, *i, 
                 &quot;<A HREF="file:///home/ingo/projects/windstille/trunk/windstille/">file:///home/ingo/projects/windstille/trunk/windstille/</A>&quot; + *i, 
-                filter);
+                filter_);
     }
 }
 
@@ -291,8 +291,8 @@
       i != selection.end();
       ++i)
     {
-      Gtk::TreeModel::Path path = list_filter-&gt;convert_path_to_child_path(*i);
-      Gtk::ListStore::iterator it = list_store-&gt;get_iter(path);
+      Gtk::TreeModel::Path path_ = list_filter-&gt;convert_path_to_child_path(*i);
+      Gtk::ListStore::iterator it = list_store-&gt;get_iter(path_);
 
       iconpath = (*it)[Columns::instance().pathname];
     }
@@ -327,8 +327,8 @@
       i != selection.end();
       ++i)
     {
-      Gtk::TreeModel::Path path = list_filter-&gt;convert_path_to_child_path(*i);
-      Gtk::ListStore::iterator it = list_store-&gt;get_iter(path);
+      Gtk::TreeModel::Path path_ = list_filter-&gt;convert_path_to_child_path(*i);
+      Gtk::ListStore::iterator it = list_store-&gt;get_iter(path_);
 
       if (selection_data.get_target() == &quot;application/x-windstille-decal&quot;)
         {

Modified: trunk/windstille/src/editor/selection.hpp
===================================================================
--- trunk/windstille/src/editor/selection.hpp	2009-08-25 12:19:46 UTC (rev 3068)
+++ trunk/windstille/src/editor/selection.hpp	2009-08-25 13:43:24 UTC (rev 3069)
@@ -55,8 +55,8 @@
   ~Selection();
 
   template&lt;class Iter&gt;
-  void add(Iter begin, Iter end) {
-    for(Iter i = begin; i != end; ++i)
+  void add(Iter begin_, Iter end_) {
+    for(Iter i = begin_; i != end_; ++i)
       {
         add(*i);
       }

Modified: trunk/windstille/src/editor/windstille_widget.cpp
===================================================================
--- trunk/windstille/src/editor/windstille_widget.cpp	2009-08-25 12:19:46 UTC (rev 3068)
+++ trunk/windstille/src/editor/windstille_widget.cpp	2009-08-25 13:43:24 UTC (rev 3069)
@@ -580,13 +580,13 @@
 }
 
 bool
-WindstilleWidget::scroll(GdkEventScroll* event)
+WindstilleWidget::scroll(GdkEventScroll* event_)
 {
-  if (event-&gt;direction == GDK_SCROLL_UP)
+  if (event_-&gt;direction == GDK_SCROLL_UP)
     {
       //viewer-&gt;get_state().zoom(1.1f, Vector2i(event-&gt;x, event-&gt;y));
     }
-  else if (event-&gt;direction == GDK_SCROLL_DOWN)
+  else if (event_-&gt;direction == GDK_SCROLL_DOWN)
     {
       //viewer-&gt;get_state().zoom(1.0f/1.1f, Vector2i(event-&gt;x, event-&gt;y));
     }
@@ -594,25 +594,25 @@
 }
 
 bool
-WindstilleWidget::mouse_down(GdkEventButton* event)
+WindstilleWidget::mouse_down(GdkEventButton* event_)
 {
   grab_focus();
 
-  //std::cout &lt;&lt; &quot;Button Press: &quot; &lt;&lt; event-&gt;x &lt;&lt; &quot;, &quot; &lt;&lt; event-&gt;y &lt;&lt; &quot; - &quot; &lt;&lt; event-&gt;button &lt;&lt; std::endl;
+  //std::cout &lt;&lt; &quot;Button Press: &quot; &lt;&lt; event_-&gt;x &lt;&lt; &quot;, &quot; &lt;&lt; event_-&gt;y &lt;&lt; &quot; - &quot; &lt;&lt; event_-&gt;button &lt;&lt; std::endl;
 
-  if (event-&gt;button == 1)
+  if (event_-&gt;button == 1)
     { // Tool
-      EditorWindow::current()-&gt;get_current_tool()-&gt;mouse_down(event, *this);
+      EditorWindow::current()-&gt;get_current_tool()-&gt;mouse_down(event_, *this);
       return true;
     }
-  else if (event-&gt;button == 2)
+  else if (event_-&gt;button == 2)
     { // Scroll
-      scroll_tool-&gt;mouse_down(event, *this);
+      scroll_tool-&gt;mouse_down(event_, *this);
       return true;
     }
-  else if (event-&gt;button == 3)
+  else if (event_-&gt;button == 3)
     { // Context Menu
-      EditorWindow::current()-&gt;get_current_tool()-&gt;mouse_right_down(event, *this);
+      EditorWindow::current()-&gt;get_current_tool()-&gt;mouse_right_down(event_, *this);
       return true;
     }
   else
@@ -622,29 +622,29 @@
 }
 
 bool
-WindstilleWidget::mouse_move(GdkEventMotion* event)
+WindstilleWidget::mouse_move(GdkEventMotion* event_)
 {
-  //std::cout &lt;&lt; &quot;Motion: &quot; &lt;&lt; event-&gt;x &lt;&lt; &quot;, &quot; &lt;&lt; event-&gt;y &lt;&lt; std::endl;
+  //std::cout &lt;&lt; &quot;Motion: &quot; &lt;&lt; event_-&gt;x &lt;&lt; &quot;, &quot; &lt;&lt; event_-&gt;y &lt;&lt; std::endl;
   
-  EditorWindow::current()-&gt;get_current_tool()-&gt;mouse_move(event, *this);
-  scroll_tool-&gt;mouse_move(event, *this);
+  EditorWindow::current()-&gt;get_current_tool()-&gt;mouse_move(event_, *this);
+  scroll_tool-&gt;mouse_move(event_, *this);
   
   return true;
 }
 
 bool
-WindstilleWidget::mouse_up(GdkEventButton* event)
+WindstilleWidget::mouse_up(GdkEventButton* event_)
 {
-  //std::cout &lt;&lt; &quot;Button Release: &quot; &lt;&lt; event-&gt;x &lt;&lt; &quot;, &quot; &lt;&lt; event-&gt;y &lt;&lt; &quot; - &quot; &lt;&lt; event-&gt;button &lt;&lt; std::endl;
-  //viewer-&gt;on_mouse_button_up(Vector2i(event-&gt;x, event-&gt;y), event-&gt;button);
-  if (event-&gt;button == 1)
+  //std::cout &lt;&lt; &quot;Button Release: &quot; &lt;&lt; event_-&gt;x &lt;&lt; &quot;, &quot; &lt;&lt; event_-&gt;y &lt;&lt; &quot; - &quot; &lt;&lt; event_-&gt;button &lt;&lt; std::endl;
+  //viewer-&gt;on_mouse_button_up(Vector2i(event_-&gt;x, event_-&gt;y), event_-&gt;button);
+  if (event_-&gt;button == 1)
     {
-      EditorWindow::current()-&gt;get_current_tool()-&gt;mouse_up(event, *this);
+      EditorWindow::current()-&gt;get_current_tool()-&gt;mouse_up(event_, *this);
       queue_draw();
     }
-  else if (event-&gt;button == 2)
+  else if (event_-&gt;button == 2)
     {
-      scroll_tool-&gt;mouse_up(event, *this);
+      scroll_tool-&gt;mouse_up(event_, *this);
       queue_draw();
     }
 
@@ -652,11 +652,11 @@
 }
 
 bool
-WindstilleWidget::key_press(GdkEventKey* event)
+WindstilleWidget::key_press(GdkEventKey* event_)
 {
-  //std::cout &lt;&lt; event-&gt;keyval &lt;&lt; &quot; keypress &quot; &lt;&lt; state.get_pos() &lt;&lt; std::endl;
+  //std::cout &lt;&lt; event_-&gt;keyval &lt;&lt; &quot; keypress &quot; &lt;&lt; state.get_pos() &lt;&lt; std::endl;
 
-  switch(event-&gt;keyval)
+  switch(event_-&gt;keyval)
     {
       case GDK_1:
         map_type = DecalObjectModel::COLORMAP;
@@ -713,9 +713,9 @@
 }
 
 bool
-WindstilleWidget::key_release(GdkEventKey* /*event*/)
+WindstilleWidget::key_release(GdkEventKey* /*event_*/)
 { // /usr/include/gtk-2.0/gdk/gdkkeysyms.h
-  //std::cout &lt;&lt; &quot;KeyRelease: &quot; &lt;&lt; (int)event-&gt;keyval &lt;&lt; std::endl;
+  //std::cout &lt;&lt; &quot;KeyRelease: &quot; &lt;&lt; (int)event_-&gt;keyval &lt;&lt; std::endl;
   return true;
 }
 
@@ -746,18 +746,18 @@
   else
     object-&gt;set_select_mask(select_mask);
 
-  Gtk::TreeModel::Path path;
+  Gtk::TreeModel::Path path_;
   Gtk::TreeViewColumn* focus_column;
 
-  EditorWindow::current()-&gt;get_layer_manager().get_treeview().get_cursor(path, focus_column);
+  EditorWindow::current()-&gt;get_layer_manager().get_treeview().get_cursor(path_, focus_column);
 
-  if (!path.gobj())
+  if (!path_.gobj())
     {
       std::cout &lt;&lt; &quot;WindstilleWidget::on_drag_data_received(): Error: Couldn't get path&quot; &lt;&lt; std::endl;
     }
   else
     {
-      execute(CommandHandle(new ObjectAddCommand(sector_model-&gt;get_layer(path), object)));
+      execute(CommandHandle(new ObjectAddCommand(sector_model-&gt;get_layer(path_), object)));
     }
 }
 
@@ -807,36 +807,36 @@
 LayerHandle
 WindstilleWidget::get_current_layer()
 {
-  Gtk::TreeModel::Path path;
+  Gtk::TreeModel::Path path_;
   Gtk::TreeViewColumn* focus_column;
-  EditorWindow::current()-&gt;get_layer_manager().get_treeview().get_cursor(path, focus_column);
+  EditorWindow::current()-&gt;get_layer_manager().get_treeview().get_cursor(path_, focus_column);
 
-  if (!path.gobj())
+  if (!path_.gobj())
     {
       std::cout &lt;&lt; &quot;WindstilleWidget::get_current_layer(): Error: Couldn't get path&quot; &lt;&lt; std::endl;
       return LayerHandle();
     }
   else
     {
-      return sector_model-&gt;get_layer(path);  
+      return sector_model-&gt;get_layer(path_);  
     }
 }
 
 Gtk::TreeModel::Path
 WindstilleWidget::get_current_layer_path()
 {
-  Gtk::TreeModel::Path path;
+  Gtk::TreeModel::Path path_;
   Gtk::TreeViewColumn* focus_column;
-  EditorWindow::current()-&gt;get_layer_manager().get_treeview().get_cursor(path, focus_column);
+  EditorWindow::current()-&gt;get_layer_manager().get_treeview().get_cursor(path_, focus_column);
 
-  if (!path.gobj())
+  if (!path_.gobj())
     {
       std::cout &lt;&lt; &quot;WindstilleWidget::get_current_layer_path(): Error: Couldn't get path&quot; &lt;&lt; std::endl;
       return Gtk::TreeModel::Path();
     }
   else
     {
-      return path;
+      return path_;
      }
 }
 
@@ -879,13 +879,13 @@
 }
 
 void
-WindstilleWidget::save_screenshot(const std::string&amp; filename)
+WindstilleWidget::save_screenshot(const std::string&amp; filename_)
 {
   Glib::RefPtr&lt;Gdk::GL::Window&gt; glwindow = get_gl_window();
 
   if (glwindow-&gt;gl_begin(get_gl_context()))
     {
-      Display::save_screenshot(Pathname(filename, Pathname::kSysPath));
+      Display::save_screenshot(Pathname(filename_, Pathname::kSysPath));
       glwindow-&gt;gl_end();
     }
 }

Modified: trunk/windstille/src/engine/entity.cpp
===================================================================
--- trunk/windstille/src/engine/entity.cpp	2009-08-25 12:19:46 UTC (rev 3068)
+++ trunk/windstille/src/engine/entity.cpp	2009-08-25 13:43:24 UTC (rev 3069)
@@ -37,9 +37,9 @@
 }
 
 void
-Entity::set_pos(Vector2f pos)
+Entity::set_pos(Vector2f pos_)
 {
-  this-&gt;pos = pos;
+  pos = pos_;
 }
 
 bool

Modified: trunk/windstille/src/engine/physics.cpp
===================================================================
--- trunk/windstille/src/engine/physics.cpp	2009-08-25 12:19:46 UTC (rev 3068)
+++ trunk/windstille/src/engine/physics.cpp	2009-08-25 13:43:24 UTC (rev 3069)
@@ -22,8 +22,8 @@
 
 #include &quot;collision/collision_object.hpp&quot;
 
-Physics::Physics(Entity* entity)
-  : entity(entity),
+Physics::Physics(Entity* entity_)
+  : entity(entity_),
     mass(200.0),
     bounciness(1.0),
     force(),

Modified: trunk/windstille/src/engine/sector.cpp
===================================================================
--- trunk/windstille/src/engine/sector.cpp	2009-08-25 12:19:46 UTC (rev 3068)
+++ trunk/windstille/src/engine/sector.cpp	2009-08-25 13:43:24 UTC (rev 3069)
@@ -83,14 +83,14 @@
 }
 
 void
-Sector::parse_file(const Pathname&amp; filename)
+Sector::parse_file(const Pathname&amp; filename_)
 {
-  if (debug) std::cout &lt;&lt; &quot;Sector:parse_file '&quot; &lt;&lt; filename &lt;&lt; &quot;'&quot; &lt;&lt; std::endl;
+  if (debug) std::cout &lt;&lt; &quot;Sector:parse_file '&quot; &lt;&lt; filename_ &lt;&lt; &quot;'&quot; &lt;&lt; std::endl;
   
-  FileReader reader = FileReader::parse(filename);
+  FileReader reader = FileReader::parse(filename_);
   if(reader.get_name() != &quot;windstille-sector&quot;) {
     std::ostringstream msg;
-    msg &lt;&lt; &quot;'&quot; &lt;&lt; filename &lt;&lt; &quot;' is not a windstille-sector file&quot;;
+    msg &lt;&lt; &quot;'&quot; &lt;&lt; filename_ &lt;&lt; &quot;' is not a windstille-sector file&quot;;
     throw std::runtime_error(msg.str());
   }
   
@@ -254,11 +254,11 @@
 }
 
 GameObject*
-Sector::get_object(const std::string&amp; name) const
+Sector::get_object(const std::string&amp; name_) const
 {
   for(Objects::const_iterator i = objects.begin(); i != objects.end(); ++i) 
     {
-      if ((*i)-&gt;get_name() == name)
+      if ((*i)-&gt;get_name() == name_)
         {
           return i-&gt;get();
         }
@@ -313,21 +313,21 @@
 }
 
 void
-Sector::call_script_function(const std::string&amp; name)
+Sector::call_script_function(const std::string&amp; name_)
 {
   if (!vm.get())
     {
-      throw std::runtime_error(&quot;Sector::call_script_function(): Can't call function '&quot; + name + &quot;' without a init script&quot;);
+      throw std::runtime_error(&quot;Sector::call_script_function(): Can't call function '&quot; + name_ + &quot;' without a init script&quot;);
     }
   else
     {
       if (!vm-&gt;is_idle())
         {
-          throw std::runtime_error(&quot;Sector::call_script_function(): VM must be idle to call  '&quot; + name + &quot;'&quot;);
+          throw std::runtime_error(&quot;Sector::call_script_function(): VM must be idle to call  '&quot; + name_ + &quot;'&quot;);
         }
       else
         {
-          vm-&gt;call(name);
+          vm-&gt;call(name_);
         }
     }
 }

Modified: trunk/windstille/src/engine/squirrel_thread.cpp
===================================================================
--- trunk/windstille/src/engine/squirrel_thread.cpp	2009-08-25 12:19:46 UTC (rev 3068)
+++ trunk/windstille/src/engine/squirrel_thread.cpp	2009-08-25 13:43:24 UTC (rev 3069)
@@ -64,8 +64,8 @@
     }
 }
 
-SquirrelThread::SquirrelThread(HSQUIRRELVM parent_vm, bool isolated_)
-  : parent_vm(parent_vm),
+SquirrelThread::SquirrelThread(HSQUIRRELVM parent_vm_, bool isolated_)
+  : parent_vm(parent_vm_),
     isolated(isolated_),
     thread(0),
     filename(&quot;&lt;unset&gt;&quot;),

Modified: trunk/windstille/src/gui/automap.cpp
===================================================================
--- trunk/windstille/src/gui/automap.cpp	2009-08-25 12:19:46 UTC (rev 3068)
+++ trunk/windstille/src/gui/automap.cpp	2009-08-25 13:43:24 UTC (rev 3069)
@@ -26,8 +26,8 @@
 
 namespace gui {
 
-Automap::Automap(Component* parent)
-  : Component(parent),
+Automap::Automap(Component* parent_)
+  : Component(parent_),
     surface(),
     pos(),
     zoom()
@@ -35,8 +35,8 @@
   assert(0);
 }
 
-Automap::Automap(const Rectf&amp; rect, Component* parent)
-  : Component(rect, parent),
+Automap::Automap(const Rectf&amp; rect_, Component* parent_)
+  : Component(rect_, parent_),
     surface(),
     pos(0.0f, 0.0f),
     zoom(6.0f)

Modified: trunk/windstille/src/gui/button.cpp
===================================================================
--- trunk/windstille/src/gui/button.cpp	2009-08-25 12:19:46 UTC (rev 3068)
+++ trunk/windstille/src/gui/button.cpp	2009-08-25 13:43:24 UTC (rev 3069)
@@ -23,15 +23,15 @@
 
 namespace gui {
 
-Button::Button(Component* parent)
-  : Component(parent),
+Button::Button(Component* parent_)
+  : Component(parent_),
     label()
 {
   assert(0);
 }
 
-Button::Button(const std::string&amp; label_, Component* parent)
-  : Component(Rectf(), parent),
+Button::Button(const std::string&amp; label_, Component* parent_)
+  : Component(Rectf(), parent_),
     label(label_)
 {
 }

Modified: trunk/windstille/src/gui/component.cpp
===================================================================
--- trunk/windstille/src/gui/component.cpp	2009-08-25 12:19:46 UTC (rev 3068)
+++ trunk/windstille/src/gui/component.cpp	2009-08-25 13:43:24 UTC (rev 3069)
@@ -20,9 +20,9 @@
 
 namespace gui {
 
-Component::Component(Component* parent)
+Component::Component(Component* parent_)
   : rect(),
-    parent(parent),
+    parent(parent_),
     active(false)
 {
 }

Modified: trunk/windstille/src/gui/grid_component.cpp
===================================================================
--- trunk/windstille/src/gui/grid_component.cpp	2009-08-25 12:19:46 UTC (rev 3068)
+++ trunk/windstille/src/gui/grid_component.cpp	2009-08-25 13:43:24 UTC (rev 3069)
@@ -22,8 +22,8 @@
 
 namespace gui {
 
-GridComponent::GridComponent(Component* parent)
-  : Component(parent),
+GridComponent::GridComponent(Component* parent_)
+  : Component(parent_),
     grid(),
     pos(),
     child_active(),
@@ -32,8 +32,8 @@
   assert(0);  
 }
 
-GridComponent::GridComponent(const Rectf&amp; rect, int weight, int height, Component* parent)
-  : Component(rect, parent),
+GridComponent::GridComponent(const Rectf&amp; rect_, int weight, int height, Component* parent_)
+  : Component(rect_, parent_),
     grid(weight, height),
     pos(0, 0),
     child_active(false),
@@ -209,7 +209,7 @@
   }
   else
   {
-    Rectf rect = get_screen_rect();
+    Rectf rect_ = get_screen_rect();
 
     if (colspan == 1 &amp;&amp; rowspan == 1)
     {
@@ -225,10 +225,10 @@
       grid(x, y) = ComponentBox(component, Size(colspan, rowspan));
     }
 
-    component-&gt;set_screen_rect(Rectf(Vector2f(rect.left + static_cast&lt;float&gt;(x) * (rect.get_width()  / static_cast&lt;float&gt;(grid.get_width()))  + padding,
-                                              rect.top  + static_cast&lt;float&gt;(y) * (rect.get_height() / static_cast&lt;float&gt;(grid.get_height())) + padding),
-                                     Sizef((rect.get_width()  / static_cast&lt;float&gt;(grid.get_width()))  * static_cast&lt;float&gt;(colspan) - 2.0f * padding,
-                                           (rect.get_height() / static_cast&lt;float&gt;(grid.get_height())) * static_cast&lt;float&gt;(rowspan) - 2.0f * padding)));
+    component-&gt;set_screen_rect(Rectf(Vector2f(rect_.left + static_cast&lt;float&gt;(x) * (rect_.get_width()  / static_cast&lt;float&gt;(grid.get_width()))  + padding,
+                                              rect_.top  + static_cast&lt;float&gt;(y) * (rect_.get_height() / static_cast&lt;float&gt;(grid.get_height())) + padding),
+                                     Sizef((rect_.get_width()  / static_cast&lt;float&gt;(grid.get_width()))  * static_cast&lt;float&gt;(colspan) - 2.0f * padding,
+                                           (rect_.get_height() / static_cast&lt;float&gt;(grid.get_height())) * static_cast&lt;float&gt;(rowspan) - 2.0f * padding)));
   }
 }
 

Modified: trunk/windstille/src/gui/group_component.cpp
===================================================================
--- trunk/windstille/src/gui/group_component.cpp	2009-08-25 12:19:46 UTC (rev 3068)
+++ trunk/windstille/src/gui/group_component.cpp	2009-08-25 13:43:24 UTC (rev 3069)
@@ -22,8 +22,8 @@
 
 namespace gui {
 
-GroupComponent::GroupComponent(const Rectf&amp; rect, const std::string&amp; title_, Component* parent)
-  : Component(rect, parent),
+GroupComponent::GroupComponent(const Rectf&amp; rect_, const std::string&amp; title_, Component* parent_)
+  : Component(rect_, parent_),
     title(title_),
     child()
 {

Modified: trunk/windstille/src/gui/list_view.cpp
===================================================================
--- trunk/windstille/src/gui/list_view.cpp	2009-08-25 12:19:46 UTC (rev 3068)
+++ trunk/windstille/src/gui/list_view.cpp	2009-08-25 13:43:24 UTC (rev 3069)
@@ -23,8 +23,8 @@
 
 namespace gui {
 
-ListView::ListView(const Rectf&amp; rect, Component* parent)
-  : Component(rect, parent),
+ListView::ListView(const Rectf&amp; rect_, Component* parent_)
+  : Component(rect_, parent_),
     columns(),
     items(),
     current_item(0)

Modified: trunk/windstille/src/gui/menu_component.cpp
===================================================================
--- trunk/windstille/src/gui/menu_component.cpp	2009-08-25 12:19:46 UTC (rev 3068)
+++ trunk/windstille/src/gui/menu_component.cpp	2009-08-25 13:43:24 UTC (rev 3069)
@@ -25,8 +25,8 @@
 
 namespace gui {
 
-MenuComponent::MenuComponent(const Rectf&amp; rect, bool allow_cancel_, Component* parent)
-  : Component(rect, parent),
+MenuComponent::MenuComponent(const Rectf&amp; rect_, bool allow_cancel_, Component* parent_)
+  : Component(rect_, parent_),
     items(),
     current_item(0),
     font(Fonts::current()-&gt;vera20.get()),
@@ -236,9 +236,9 @@
 }
 
 void
-MenuComponent::set_screen_rect(const Rectf&amp; rect)
+MenuComponent::set_screen_rect(const Rectf&amp; rect_)
 {
-  num_displayable_items = static_cast&lt;int&gt;(rect.get_height() / item_height());  
+  num_displayable_items = static_cast&lt;int&gt;(rect_.get_height() / item_height());  
 
   if (num_displayable_items &lt; int(items.size()))
     {
@@ -252,7 +252,7 @@
     }
 
   
-  Component::set_screen_rect(rect);
+  Component::set_screen_rect(rect_);
 }
 
 } // namespace gui

Modified: trunk/windstille/src/gui/menu_item.cpp
===================================================================
--- trunk/windstille/src/gui/menu_item.cpp	2009-08-25 12:19:46 UTC (rev 3068)
+++ trunk/windstille/src/gui/menu_item.cpp	2009-08-25 13:43:24 UTC (rev 3069)
@@ -84,11 +84,11 @@
 }
 
 EnumMenuItem&amp;
-EnumMenuItem::add_pair(int value, const std::string&amp; label)
+EnumMenuItem::add_pair(int value_, const std::string&amp; label_)
 {
   EnumValue enum_value;
-  enum_value.value = value;
-  enum_value.label = label;
+  enum_value.value = value_;
+  enum_value.label = label_;
   labels.push_back(enum_value);
 
   return *this;

Modified: trunk/windstille/src/gui/root_component.cpp
===================================================================
--- trunk/windstille/src/gui/root_component.cpp	2009-08-25 12:19:46 UTC (rev 3068)
+++ trunk/windstille/src/gui/root_component.cpp	2009-08-25 13:43:24 UTC (rev 3069)
@@ -24,8 +24,8 @@
 
 namespace gui {
 
-RootComponent::RootComponent(const Rectf&amp; rect)
-  : Component(rect, 0),
+RootComponent::RootComponent(const Rectf&amp; rect_)
+  : Component(rect_, 0),
     focus(0),
     children()
 {

Modified: trunk/windstille/src/gui/slider.cpp
===================================================================
--- trunk/windstille/src/gui/slider.cpp	2009-08-25 12:19:46 UTC (rev 3068)
+++ trunk/windstille/src/gui/slider.cpp	2009-08-25 13:43:24 UTC (rev 3069)
@@ -22,8 +22,8 @@
 
 namespace gui {
 
-Slider::Slider(Component* parent)
-  : Component(parent),
+Slider::Slider(Component* parent_)
+  : Component(parent_),
     min(0),
     max(100),
     step(10),

Modified: trunk/windstille/src/gui/tab_component.cpp
===================================================================
--- trunk/windstille/src/gui/tab_component.cpp	2009-08-25 12:19:46 UTC (rev 3068)
+++ trunk/windstille/src/gui/tab_component.cpp	2009-08-25 13:43:24 UTC (rev 3069)
@@ -23,16 +23,16 @@
 
 namespace gui {
 
-TabComponent::TabComponent(Component* parent)
-  : Component(parent),
+TabComponent::TabComponent(Component* parent_)
+  : Component(parent_),
     tabs(),
     current_tab(0)
 {
   assert(0);
 }
 
-TabComponent::TabComponent(const Rectf&amp; rect, Component* parent)
-  : Component(rect, parent),
+TabComponent::TabComponent(const Rectf&amp; rect_, Component* parent_)
+  : Component(rect_, parent_),
     tabs(),
     current_tab(0)
 {

Modified: trunk/windstille/src/gui/text_view.cpp
===================================================================
--- trunk/windstille/src/gui/text_view.cpp	2009-08-25 12:19:46 UTC (rev 3068)
+++ trunk/windstille/src/gui/text_view.cpp	2009-08-25 13:43:24 UTC (rev 3069)
@@ -22,9 +22,9 @@
 
 namespace gui {
 
-TextView::TextView(const Rectf&amp; rect, Component* component)
-  : Component(rect, component),
-    text_area(rect, false)
+TextView::TextView(const Rectf&amp; rect_, Component* component_)
+  : Component(rect_, component_),
+    text_area(rect_, false)
 {
 }
 
@@ -62,10 +62,10 @@
 }
 
 void
-TextView::set_screen_rect(const Rectf&amp; rect)
+TextView::set_screen_rect(const Rectf&amp; rect_)
 {
-  Component::set_screen_rect(rect);
-  text_area.set_rect(rect.grow(-16.0f, -4.0f));
+  Component::set_screen_rect(rect_);
+  text_area.set_rect(rect_.grow(-16.0f, -4.0f));
 }
 
 void

Modified: trunk/windstille/src/hud/dialog_manager.cpp
===================================================================
--- trunk/windstille/src/hud/dialog_manager.cpp	2009-08-25 12:19:46 UTC (rev 3068)
+++ trunk/windstille/src/hud/dialog_manager.cpp	2009-08-25 13:43:24 UTC (rev 3069)
@@ -100,8 +100,8 @@
 
   if (text_area-&gt;is_progress_complete())
     {
-      const Vector2f&amp; pos = text_area-&gt;get_cursor_pos();
-      Rectf cursor(pos.x + 8, pos.y + 8, pos.x + 24, pos.y + 24);
+      const Vector2f&amp; pos_ = text_area-&gt;get_cursor_pos();
+      Rectf cursor(pos_.x + 8, pos_.y + 8, pos_.x + 24, pos_.y + 24);
       Display::fill_rect(cursor, Color(1.0, 1.0, 1.0, 
                                        fabsf(sinf(static_cast&lt;float&gt;(SDL_GetTicks()) / 1000.0f * math::pi * 3.0f))));
     }

Modified: trunk/windstille/src/hud/inventory.cpp
===================================================================
--- trunk/windstille/src/hud/inventory.cpp	2009-08-25 12:19:46 UTC (rev 3068)
+++ trunk/windstille/src/hud/inventory.cpp	2009-08-25 13:43:24 UTC (rev 3069)
@@ -28,8 +28,8 @@
   std::string name;
   Sprite sprite;
   
-  InventoryItem(const std::string&amp; name, const std::string&amp; filename)
-    : name(name), sprite(Pathname(filename))
+  InventoryItem(const std::string&amp; name_, const std::string&amp; filename_)
+    : name(name_), sprite(Pathname(filename_))
   {
   }
 };

Modified: trunk/windstille/src/input/input_manager_sdl.cpp
===================================================================
--- trunk/windstille/src/input/input_manager_sdl.cpp	2009-08-25 12:19:46 UTC (rev 3068)
+++ trunk/windstille/src/input/input_manager_sdl.cpp	2009-08-25 13:43:24 UTC (rev 3069)
@@ -233,8 +233,8 @@
     }
 }
 
-InputManagerSDL::InputManagerSDL(const ControllerDescription&amp; controller_description)
-  : InputManager(controller_description),
+InputManagerSDL::InputManagerSDL(const ControllerDescription&amp; controller_description_)
+  : InputManager(controller_description_),
     impl(new InputManagerSDLImpl)
 {
   for (int i = 0; i &lt; SDLK_LAST; ++i) {

Modified: trunk/windstille/src/input/wiimote.cpp
===================================================================
--- trunk/windstille/src/input/wiimote.cpp	2009-08-25 12:19:46 UTC (rev 3068)
+++ trunk/windstille/src/input/wiimote.cpp	2009-08-25 13:43:24 UTC (rev 3069)
@@ -436,41 +436,41 @@
 }
 
 void
-Wiimote::mesg(cwiid_wiimote_t* /*w*/, int mesg_count, union cwiid_mesg mesg[])
+Wiimote::mesg(cwiid_wiimote_t* /*w*/, int mesg_count, union cwiid_mesg msg[])
 {
   pthread_mutex_lock(&amp;mutex);
 
   //std::cout &lt;&lt; &quot;StatusCallback: &quot; &lt;&lt; w &lt;&lt; &quot; &quot; &lt;&lt; mesg_count &lt;&lt; std::endl;
   for (int i=0; i &lt; mesg_count; i++)
     {
-      switch (mesg[i].type) 
+      switch (msg[i].type) 
         {
         case CWIID_MESG_STATUS:
-          wiimote-&gt;on_status(mesg[i].status_mesg);
+          wiimote-&gt;on_status(msg[i].status_mesg);
           break;
 
         case CWIID_MESG_BTN:
-          wiimote-&gt;on_button(mesg[i].btn_mesg);
+          wiimote-&gt;on_button(msg[i].btn_mesg);
           break;
 
         case CWIID_MESG_ACC:
-          wiimote-&gt;on_acc(mesg[i].acc_mesg);
+          wiimote-&gt;on_acc(msg[i].acc_mesg);
           break;
 
         case CWIID_MESG_IR:
-          wiimote-&gt;on_ir(mesg[i].ir_mesg);
+          wiimote-&gt;on_ir(msg[i].ir_mesg);
           break;
 
         case CWIID_MESG_NUNCHUK:
-          wiimote-&gt;on_nunchuck(mesg[i].nunchuk_mesg);
+          wiimote-&gt;on_nunchuck(msg[i].nunchuk_mesg);
           break;
 
         case CWIID_MESG_CLASSIC:
-          wiimote-&gt;on_classic(mesg[i].classic_mesg);
+          wiimote-&gt;on_classic(msg[i].classic_mesg);
           break;
 
         case CWIID_MESG_ERROR:
-          wiimote-&gt;on_error(mesg[i].error_mesg);
+          wiimote-&gt;on_error(msg[i].error_mesg);
           break;
 
         default:

Modified: trunk/windstille/src/lisp/property_iterator.hpp
===================================================================
--- trunk/windstille/src/lisp/property_iterator.hpp	2009-08-25 12:19:46 UTC (rev 3068)
+++ trunk/windstille/src/lisp/property_iterator.hpp	2009-08-25 13:43:24 UTC (rev 3069)
@@ -60,8 +60,8 @@
 private:
   friend class Properties;
 
-  PropertyIterator(PropertyMap::iterator begin, PropertyMap::iterator end)
-    : i(begin), end(end)
+  PropertyIterator(PropertyMap::iterator begin_, PropertyMap::iterator end_)
+    : i(begin_), end(end_)
   {
   }
     

Modified: trunk/windstille/src/math/matrix.cpp
===================================================================
--- trunk/windstille/src/math/matrix.cpp	2009-08-25 12:19:46 UTC (rev 3068)
+++ trunk/windstille/src/math/matrix.cpp	2009-08-25 13:43:24 UTC (rev 3069)
@@ -206,20 +206,20 @@
   float c = cosf(angle * 3.14159265f / 180.0f);
   float s = sinf(angle * 3.14159265f / 180.0f);
 
-  Matrix matrix = Matrix::identity();
-  matrix[0]  = x*x*(1-c)+c;
-  matrix[1]  = y*x*(1-c)+z*s;
-  matrix[2]  = x*z*(1-c)-y*s;
+  Matrix m = Matrix::identity();
+  m[0]  = x*x*(1-c)+c;
+  m[1]  = y*x*(1-c)+z*s;
+  m[2]  = x*z*(1-c)-y*s;
 
-  matrix[4]  = x*y*(1-c)-z*s;
-  matrix[5]  = y*y*(1-c)+c;
-  matrix[6]  = y*z*(1-c)+x*s;
+  m[4]  = x*y*(1-c)-z*s;
+  m[5]  = y*y*(1-c)+c;
+  m[6]  = y*z*(1-c)+x*s;
 
-  matrix[8]  = x*z*(1-c)+y*s;
-  matrix[9]  = y*z*(1-c)-x*s;
-  matrix[10] = z*z*(1-c)+c;
+  m[8]  = x*z*(1-c)+y*s;
+  m[9]  = y*z*(1-c)-x*s;
+  m[10] = z*z*(1-c)+c;
 
-  return multiply(matrix);
+  return multiply(m);
 }
 // <A HREF="http://www.cvl.iis.u-tokyo.ac.jp/~miyazaki/tech/teche23.html">http://www.cvl.iis.u-tokyo.ac.jp/~miyazaki/tech/teche23.html</A>
 // <A HREF="http://gpwiki.org/index.php/MathGem:Fast_Matrix_Inversion">http://gpwiki.org/index.php/MathGem:Fast_Matrix_Inversion</A>

Modified: trunk/windstille/src/objects/grenade.cpp
===================================================================
--- trunk/windstille/src/objects/grenade.cpp	2009-08-25 12:19:46 UTC (rev 3068)
+++ trunk/windstille/src/objects/grenade.cpp	2009-08-25 13:43:24 UTC (rev 3069)
@@ -50,9 +50,9 @@
 }
 
 void
-Grenade::set_velocity(const Vector2f&amp; velocity)
+Grenade::set_velocity(const Vector2f&amp; velocity_)
 {
-  this-&gt;velocity = velocity;
+  velocity = velocity_;
 }
 
 /* EOF */

Modified: trunk/windstille/src/objects/player.cpp
===================================================================
--- trunk/windstille/src/objects/player.cpp	2009-08-25 12:19:46 UTC (rev 3068)
+++ trunk/windstille/src/objects/player.cpp	2009-08-25 13:43:24 UTC (rev 3069)
@@ -31,7 +31,7 @@
 #include &quot;tile/tile_map.hpp&quot;
 
 static const int MAX_ENERGY = 16;
-static const float WALK_SPEED = 128.0;
+static const float WALK_SPEED = 100.0;
 static const float RUN_SPEED = 256.0;
 
 Player::Player () 
@@ -91,7 +91,7 @@
                                Color(1.0f, 0.0f, 0.0f, 0.5f), 10000.0f);
     }
 
-  sprite.draw(sc.color(), pos, z_pos);
+  sprite.draw(sc.color(), pos + Vector2f(0.0f, 1.0f), z_pos);
 
   Entity* obj = find_useable_entity();
   if (obj)
@@ -758,10 +758,10 @@
 }
 
 void
-Player::try_set_action(const std::string&amp; name, float speed)
+Player::try_set_action(const std::string&amp; name_, float speed)
 {
-  if (sprite.get_action() != name)
-    sprite.set_action(name, speed);
+  if (sprite.get_action() != name_)
+    sprite.set_action(name_, speed);
 }
 
 int
@@ -812,10 +812,10 @@
 }
 
 void 
-Player::set_pos(Vector2f pos)
+Player::set_pos(Vector2f pos_)
 {
-  Entity::set_pos(pos);
-  c_object-&gt;set_pos(pos);
+  Entity::set_pos(pos_);
+  c_object-&gt;set_pos(pos_);
 }
 
 /* EOF */

Modified: trunk/windstille/src/objects/shockwave.cpp
===================================================================
--- trunk/windstille/src/objects/shockwave.cpp	2009-08-25 12:19:46 UTC (rev 3068)
+++ trunk/windstille/src/objects/shockwave.cpp	2009-08-25 13:43:24 UTC (rev 3069)
@@ -27,12 +27,12 @@
   ShaderProgram shader_program;
   float radius;
 
-  ShockwaveDrawingRequest(const Vector2f&amp; pos, 
+  ShockwaveDrawingRequest(const Vector2f&amp; pos_, 
                           const Texture&amp;       noise_,
                           const ShaderProgram&amp; shader_program_,
                           float r,
                           const Matrix&amp; modelview_) 
-    : DrawingRequest(pos, 500.0f, modelview_),
+    : DrawingRequest(pos_, 500.0f, modelview_),
       noise(noise_),
       shader_program(shader_program_),
       radius(r)
@@ -60,16 +60,16 @@
 
     { // Apply modelview matrix to texture matrix so that we can
       // give texcoords as screencords
-      GLdouble modelview[16];
+      GLdouble m[16];
       glMatrixMode(GL_MODELVIEW);
-      glGetDoublev(GL_MODELVIEW_MATRIX, modelview);
+      glGetDoublev(GL_MODELVIEW_MATRIX, m);
       glMatrixMode(GL_TEXTURE);
       glLoadIdentity();
       glTranslatef(0, 599, 0);
       glScalef(1, -1, 1);
-      glMultMatrixd(modelview);
+      glMultMatrixd(m);
 
-      //glLoadMatrixd(modelview);
+      //glLoadMatrixd(m);
     }
 
     int count = int(radius);
@@ -77,7 +77,7 @@
     state.bind_texture(screen_texture, 0);
     state.activate();
 
-    float radius = static_cast&lt;float&gt;(count)*2.0f + 20.0f; // enlarge radius by 20.0f to handle texture displacement 
+    float rad = static_cast&lt;float&gt;(count)*2.0f + 20.0f; // enlarge radius by 20.0f to handle texture displacement 
     float minradius = 2.0f * static_cast&lt;float&gt;(count) - 164.0f;
     if (minradius &lt; 0)
       minradius = 0;
@@ -91,11 +91,11 @@
       {
         float angel = 2.0f * math::pi / static_cast&lt;float&gt;(segments);
 
-        float x1 =  sinf(angel*static_cast&lt;float&gt;(i))*radius;
-        float y1 = -cosf(angel*static_cast&lt;float&gt;(i))*radius;
+        float x1 =  sinf(angel*static_cast&lt;float&gt;(i))*rad;
+        float y1 = -cosf(angel*static_cast&lt;float&gt;(i))*rad;
 
-        float x2 =  sinf(angel*(static_cast&lt;float&gt;(i)+1))*radius;
-        float y2 = -cosf(angel*(static_cast&lt;float&gt;(i)+1))*radius;
+        float x2 =  sinf(angel*(static_cast&lt;float&gt;(i)+1))*rad;
+        float y2 = -cosf(angel*(static_cast&lt;float&gt;(i)+1))*rad;
 
         glTexCoord2f(x1+256, (y1+256));
         glVertex3f(x1+256, y1+256, 0);
@@ -173,7 +173,7 @@
 
   void draw_disc(int count)
   {
-    float radius = static_cast&lt;float&gt;(count)*2.0f;
+    float rad = static_cast&lt;float&gt;(count)*2.0f;
     float minradius = 2.0f * static_cast&lt;float&gt;(count) - 164.0f;
     if (minradius &lt; 0)
       minradius = 0;
@@ -185,11 +185,11 @@
       {
         float angel = 2.0f * math::pi / static_cast&lt;float&gt;(segments);
 
-        float x1 =  sinf(angel*static_cast&lt;float&gt;(i))*radius;
-        float y1 = -cosf(angel*static_cast&lt;float&gt;(i))*radius;
+        float x1 =  sinf(angel*static_cast&lt;float&gt;(i))*rad;
+        float y1 = -cosf(angel*static_cast&lt;float&gt;(i))*rad;
 
-        float x2 =  sinf(angel*(static_cast&lt;float&gt;(i)+1))*radius;
-        float y2 = -cosf(angel*(static_cast&lt;float&gt;(i)+1))*radius;
+        float x2 =  sinf(angel*(static_cast&lt;float&gt;(i)+1))*rad;
+        float y2 = -cosf(angel*(static_cast&lt;float&gt;(i)+1))*rad;
 
         glColor4f(1.0f, 1.0f, 1.0f, 1.0f);
         glTexCoord2f(x1/512.0f+0.5f, y1/512.0f+0.5f);

Modified: trunk/windstille/src/objects/test_object.cpp
===================================================================
--- trunk/windstille/src/objects/test_object.cpp	2009-08-25 12:19:46 UTC (rev 3068)
+++ trunk/windstille/src/objects/test_object.cpp	2009-08-25 13:43:24 UTC (rev 3069)
@@ -89,9 +89,9 @@
 }
 
 void
-TestObject::set_pos(const Vector2f&amp; pos)
+TestObject::set_pos(const Vector2f&amp; pos_)
 {
-  this-&gt;pos = pos;
+  pos = pos_;
 }
 
 void

Modified: trunk/windstille/src/particles/deform_drawer.cpp
===================================================================
--- trunk/windstille/src/particles/deform_drawer.cpp	2009-08-25 12:19:46 UTC (rev 3068)
+++ trunk/windstille/src/particles/deform_drawer.cpp	2009-08-25 13:43:24 UTC (rev 3069)
@@ -33,10 +33,10 @@
   ParticleSystem&amp;   psys;
   ShaderProgram&amp;    shader_program;
 
-  DeformDrawerRequest(const Vector2f&amp; pos_, float z_pos,  const Matrix&amp; modelview_,
+  DeformDrawerRequest(const Vector2f&amp; pos_, float z_pos_,  const Matrix&amp; modelview_,
                       Framebuffer&amp; framebuffer_, Surface&amp; surface_, ParticleSystem&amp; psys_,
                       ShaderProgram&amp; shader_program_)
-    : DrawingRequest(pos_, z_pos, modelview_),
+    : DrawingRequest(pos_, z_pos_, modelview_),
       framebuffer(framebuffer_), surface(surface_), psys(psys_), 
       shader_program(shader_program_)
   {}

Modified: trunk/windstille/src/particles/particle_system.cpp
===================================================================
--- trunk/windstille/src/particles/particle_system.cpp	2009-08-25 12:19:46 UTC (rev 3068)
+++ trunk/windstille/src/particles/particle_system.cpp	2009-08-25 13:43:24 UTC (rev 3069)
@@ -83,10 +83,6 @@
   if (props.get(&quot;size&quot;, p_size))
     set_size(p_size.x, p_size.y);
 
-  Vector2f p_aspect;
-  if (props.get(&quot;aspect&quot;, p_aspect))
-    set_aspect(p_aspect.x, p_aspect.y);
-
   props.get(&quot;color-begin&quot;, color_start);
   props.get(&quot;color-end&quot;,   color_stop);
   
@@ -389,20 +385,13 @@
 }
 
 void
-ParticleSystem::set_aspect(float from, float to)
+ParticleSystem::set_color(const Color&amp; color_start_, const Color&amp; color_end_)
 {
-  (void) from;
-  (void) to;
+  color_start = color_start_;
+  color_stop  = color_end_;
 }
 
 void
-ParticleSystem::set_color(const Color&amp; start, const Color&amp; end)
-{
-  color_start = start;
-  color_stop  = end;
-}
-
-void
 ParticleSystem::set_fade_color(const Color&amp; color)
 {
   color_stop = color;

Modified: trunk/windstille/src/particles/particle_system.hpp
===================================================================
--- trunk/windstille/src/particles/particle_system.hpp	2009-08-25 12:19:46 UTC (rev 3068)
+++ trunk/windstille/src/particles/particle_system.hpp	2009-08-25 13:43:24 UTC (rev 3069)
@@ -159,9 +159,6 @@
       along their lifetime */
   void set_size  (float from, float to);
 
-  /** set the aspect ratio from which they will start and end */
-  void set_aspect(float from, float to);
-
   /** Set the color at which the particles will start */
   void set_color(const Color&amp; start, const Color&amp; end);
 

Modified: trunk/windstille/src/particles/surface_drawer.cpp
===================================================================
--- trunk/windstille/src/particles/surface_drawer.cpp	2009-08-25 12:19:46 UTC (rev 3068)
+++ trunk/windstille/src/particles/surface_drawer.cpp	2009-08-25 13:43:24 UTC (rev 3069)
@@ -76,16 +76,16 @@
 }
   
 void
-SurfaceDrawer::set_texture(Surface surface)
+SurfaceDrawer::set_texture(Surface surface_)
 {
-  this-&gt;surface = surface;
+  surface = surface_;
 }
 
 void
-SurfaceDrawer::set_blendfuncs(GLenum blendfunc_src, GLenum blendfunc_dest)
+SurfaceDrawer::set_blendfuncs(GLenum blendfunc_src_, GLenum blendfunc_dest_)
 {
-  this-&gt;blendfunc_src  = blendfunc_src;
-  this-&gt;blendfunc_dest = blendfunc_dest;
+  blendfunc_src  = blendfunc_src_;
+  blendfunc_dest = blendfunc_dest_;
 }
 
 void

Modified: trunk/windstille/src/physfs/physfs_stream.cpp
===================================================================
--- trunk/windstille/src/physfs/physfs_stream.cpp	2009-08-25 12:19:46 UTC (rev 3068)
+++ trunk/windstille/src/physfs/physfs_stream.cpp	2009-08-25 13:43:24 UTC (rev 3069)
@@ -126,13 +126,14 @@
         return 0;
 
     size_t size = pptr() - pbase();
+
     PHYSFS_sint64 res = PHYSFS_write(file, pbase(), 1, size);
     if(res &lt;= 0)
-        return traits_type::eof();
-    
+      return traits_type::eof();
+
     if(c != traits_type::eof()) {
-        PHYSFS_sint64 res = PHYSFS_write(file, &amp;c, 1, 1);
-        if(res &lt;= 0)
+        PHYSFS_sint64 r = PHYSFS_write(file, &amp;c, 1, 1);
+        if(r &lt;= 0)
             return traits_type::eof();
     }
 

Modified: trunk/windstille/src/properties/property.hpp
===================================================================
--- trunk/windstille/src/properties/property.hpp	2009-08-25 12:19:46 UTC (rev 3068)
+++ trunk/windstille/src/properties/property.hpp	2009-08-25 13:43:24 UTC (rev 3069)
@@ -50,8 +50,8 @@
     float C::*float_value;
   } value;
 
-  PropertyImpl(Type type)
-    : Property(type),
+  PropertyImpl(Type type_)
+    : Property(type_),
       value()
   {}
 

Modified: trunk/windstille/src/properties/property_set.cpp
===================================================================
--- trunk/windstille/src/properties/property_set.cpp	2009-08-25 12:19:46 UTC (rev 3068)
+++ trunk/windstille/src/properties/property_set.cpp	2009-08-25 13:43:24 UTC (rev 3069)
@@ -37,13 +37,13 @@
 }
   
 void
-PropertySet::add(const std::string&amp; name, Property* property)
+PropertySet::add(const std::string&amp; name_, Property* property)
 {
-  Property*&amp; i = properties[name];
+  Property*&amp; i = properties[name_];
   if (i)
     {
       std::ostringstream str;
-      str &lt;&lt; &quot;PropertySet::add: Name conflict: '&quot; &lt;&lt; name &lt;&lt; &quot;' already used&quot;;
+      str &lt;&lt; &quot;PropertySet::add: Name conflict: '&quot; &lt;&lt; name_ &lt;&lt; &quot;' already used&quot;;
       throw std::runtime_error(str.str());
     }
   else
@@ -53,13 +53,13 @@
 }
 
 Property*
-PropertySet::get(const std::string&amp; name) const
+PropertySet::get(const std::string&amp; name_) const
 {
-  std::map&lt;std::string, Property*&gt;::const_iterator i = properties.find(name);
+  std::map&lt;std::string, Property*&gt;::const_iterator i = properties.find(name_);
   if (i == properties.end())
     {
       if (parent)
-        return parent-&gt;get(name);
+        return parent-&gt;get(name_);
       else
         return 0;
     }

Modified: trunk/windstille/src/properties/property_set.hpp
===================================================================
--- trunk/windstille/src/properties/property_set.hpp	2009-08-25 12:19:46 UTC (rev 3068)
+++ trunk/windstille/src/properties/property_set.hpp	2009-08-25 13:43:24 UTC (rev 3069)
@@ -40,18 +40,18 @@
   void add(const std::string&amp; name, Property* property);
 
   template&lt;class C&gt;
-  void add_int(const std::string&amp; name, bool C::*ptr)
+  void add_int(const std::string&amp; name_, bool C::*ptr)
   { 
-    add(name, PropertyImpl&lt;C&gt;::create_int(ptr));
+    add(name_, PropertyImpl&lt;C&gt;::create_int(ptr));
   }
 
   template&lt;class C&gt;
-  void add_bool(const std::string&amp; name, bool C::*ptr)
+  void add_bool(const std::string&amp; name_, bool C::*ptr)
   { 
-    add(name, PropertyImpl&lt;C&gt;::create_bool(ptr));
+    add(name_, PropertyImpl&lt;C&gt;::create_bool(ptr));
   }
 
-  Property* get(const std::string&amp; name) const;
+  Property* get(const std::string&amp; name_) const;
 
   void get_properties(std::vector&lt;std::string&gt;&amp; lst) const;
 

Modified: trunk/windstille/src/screen/sprite2dview.cpp
===================================================================
--- trunk/windstille/src/screen/sprite2dview.cpp	2009-08-25 12:19:46 UTC (rev 3068)
+++ trunk/windstille/src/screen/sprite2dview.cpp	2009-08-25 13:43:24 UTC (rev 3069)
@@ -139,30 +139,30 @@
         {
           Sprite small = sprite;
           small.set_alpha(1.0f);
-          float width  = small.get_width();
-          float height = small.get_height();
-          float scale;
-          if (width &gt; height)
+          float w  = small.get_width();
+          float h = small.get_height();
+          float s;
+          if (w &gt; h)
             {
-              scale = 125.0f / width;
+              s = 125.0f / w;
 
-              width  *= scale;
-              height *= scale;
-              small.set_scale(scale);
+              w  *= s;
+              h *= s;
+              small.set_scale(s);
 
-              small.draw(Vector2f(DISPLAY_W - width,
-                                  DISPLAY_H - height));
+              small.draw(Vector2f(DISPLAY_W - w,
+                                  DISPLAY_H - h));
             }
           else
             {
-              scale = 125.0f / height;
+              s = 125.0f / h;
 
-              width  *= scale;
-              height *= scale;
-              small.set_scale(scale);
+              w  *= s;
+              h *= s;
+              small.set_scale(s);
 
-              small.draw(Vector2f(DISPLAY_W - width,
-                                DISPLAY_H - height));
+              small.draw(Vector2f(DISPLAY_W - w,
+                                DISPLAY_H - h));
             }
         }        
       break;
@@ -185,10 +185,10 @@
 
       if (aspect &gt; 4.0/3.0)
         { // expand vertical
-          float scale = DISPLAY_H/height;
-          width  *= scale;
-          height *= scale;
-          sprite.set_scale(scale);
+          float s = DISPLAY_H/height;
+          width  *= s;
+          height *= s;
+          sprite.set_scale(s);
 
           if (offset - (width - DISPLAY_W) &gt; 0)
             {
@@ -206,10 +206,10 @@
         }
       else
         { // expand horizontal
-          float scale = 800.0f/width;
-          width  *= scale;
-          height *= scale;
-          sprite.set_scale(scale);
+          float s = 800.0f/width;
+          width  *= s;
+          height *= s;
+          sprite.set_scale(s);
 
           if (offset - (height - DISPLAY_H) &gt; 0)
             {
@@ -287,25 +287,25 @@
 }
 
 void
-Sprite2DView::prepare_sprite(Sprite&amp; sprite)
+Sprite2DView::prepare_sprite(Sprite&amp; sprite_)
 {
-  float width  = sprite.get_width();
-  float height = sprite.get_height();
-  float aspect = width/height;
+  float w = sprite_.get_width();
+  float h = sprite_.get_height();
+  float a = w/h;
 
-  if (aspect &gt; 4.0/3.0)
+  if (a &gt; 4.0/3.0)
     { // expand vertical
-      float scale = DISPLAY_H/height;
-      width  *= scale;
-      height *= scale;
-      sprite.set_scale(scale);
+      float s = DISPLAY_H/h;
+      w *= s;
+      h *= s;
+      sprite_.set_scale(s);
     }
   else
     { // expand horizontal
-      float scale = DISPLAY_W/width;
-      width  *= scale;
-      height *= scale;
-      sprite.set_scale(scale);
+      float s = DISPLAY_W/w;
+      w *= s;
+      h *= s;
+      sprite_.set_scale(s);
     }  
 }
 

Modified: trunk/windstille/src/scripting/squirrel_error.cpp
===================================================================
--- trunk/windstille/src/scripting/squirrel_error.cpp	2009-08-25 12:19:46 UTC (rev 3068)
+++ trunk/windstille/src/scripting/squirrel_error.cpp	2009-08-25 13:43:24 UTC (rev 3069)
@@ -21,11 +21,11 @@
 
 namespace Scripting {
 
-SquirrelError::SquirrelError(HSQUIRRELVM v, const std::string&amp; context, const std::string&amp; message) throw()
+SquirrelError::SquirrelError(HSQUIRRELVM v, const std::string&amp; context, const std::string&amp; message_) throw()
   : message()
 {
   std::ostringstream msg;
-  msg &lt;&lt; &quot;Squirrel error: &quot; &lt;&lt; context &lt;&lt; &quot;: &quot; &lt;&lt; message &lt;&lt; &quot; (&quot;;
+  msg &lt;&lt; &quot;Squirrel error: &quot; &lt;&lt; context &lt;&lt; &quot;: &quot; &lt;&lt; message_ &lt;&lt; &quot; (&quot;;
   const char* lasterr;
   sq_getlasterror(v);
   if(sq_gettype(v, -1) != OT_STRING)
@@ -38,14 +38,14 @@
   }
   sq_pop(v, 1);
   msg &lt;&lt; lasterr &lt;&lt; &quot;)&quot;;
-  this-&gt;message = msg.str();
+  message = msg.str();
 }
 
-SquirrelError::SquirrelError(HSQUIRRELVM v, const std::string&amp; message) throw()
+SquirrelError::SquirrelError(HSQUIRRELVM v, const std::string&amp; message_) throw()
   : message()
 {
   std::ostringstream msg;
-  msg &lt;&lt; &quot;Squirrel error: &quot; &lt;&lt; message &lt;&lt; &quot; (&quot;;
+  msg &lt;&lt; &quot;Squirrel error: &quot; &lt;&lt; message_ &lt;&lt; &quot; (&quot;;
   const char* lasterr;
   sq_getlasterror(v);
   if(sq_gettype(v, -1) != OT_STRING)
@@ -58,7 +58,7 @@
   }
   sq_pop(v, 1);
   msg &lt;&lt; lasterr &lt;&lt; &quot;)&quot;;
-  this-&gt;message = msg.str();
+  message = msg.str();
 }
 
 SquirrelError::~SquirrelError() throw()

Modified: trunk/windstille/src/sprite2d/sprite.cpp
===================================================================
--- trunk/windstille/src/sprite2d/sprite.cpp	2009-08-25 12:19:46 UTC (rev 3068)
+++ trunk/windstille/src/sprite2d/sprite.cpp	2009-08-25 13:43:24 UTC (rev 3069)
@@ -29,7 +29,6 @@
     current_action(0),
     frame(0),
     speed(0),
-    alpha(0),
     pingpong(),
     reverse(),
     vflip(),
@@ -45,7 +44,6 @@
     current_action(0),
     frame(0),
     speed(0),
-    alpha(0),
     pingpong(),
     reverse(),
     vflip(),
@@ -62,7 +60,6 @@
   speed    = 1.0;
   pingpong = false;
   reverse  = false;
-  alpha    = 0.0;
   scale = current_action-&gt;scale;
   color    = Color(1.0f, 1.0f, 1.0f);
   blend_sfactor = GL_SRC_ALPHA;
@@ -74,7 +71,6 @@
     current_action(0),
     frame(0),
     speed(0),
-    alpha(0),
     pingpong(),
     reverse(),
     vflip(),
@@ -89,7 +85,6 @@
   speed = 1.0;
   pingpong = false;
   reverse = false;
-  alpha = 0.0;
   scale = current_action-&gt;scale;
   color    = Color(1.0f, 1.0f, 1.0f);
   blend_sfactor = GL_SRC_ALPHA;
@@ -101,7 +96,6 @@
     current_action(rhs.current_action),
     frame(rhs.frame),
     speed(rhs.speed),
-    alpha(rhs.alpha),
     pingpong(rhs.pingpong),
     reverse(rhs.reverse),
     vflip(rhs.vflip),
@@ -121,7 +115,6 @@
     current_action = rhs.current_action;
     frame          = rhs.frame;
     speed          = rhs.speed;
-    alpha          = rhs.alpha;
     pingpong       = rhs.pingpong;
     reverse        = rhs.reverse;
     vflip          = rhs.vflip;
@@ -164,7 +157,6 @@
           speed    = 1.0;
           frame    = 0;
           vflip    = false;
-          alpha    = 0.0;
           scale    = current_action-&gt;scale;
           color    = Color(1.0f, 1.0f, 1.0f);
           blend_sfactor = GL_SRC_ALPHA;
@@ -230,7 +222,7 @@
 float
 Sprite::get_alpha() const
 {
-  return alpha;
+  return color.a;
 }
 
 Surface
@@ -248,8 +240,6 @@
 void
 Sprite::draw(const Vector2f&amp; pos) const
 {
-  // FIXME: Sprite needs to get a whole list with possible parameters
-  // (color, blendfunc, ...), not just alpha
   Surface surface = current_action-&gt;surfaces[ static_cast&lt;int&gt; (frame) ];
   surface.draw(SurfaceDrawingParameters()
                .set_pos(pos + (current_action-&gt;offset * scale))

Modified: trunk/windstille/src/sprite2d/sprite.hpp
===================================================================
--- trunk/windstille/src/sprite2d/sprite.hpp	2009-08-25 12:19:46 UTC (rev 3068)
+++ trunk/windstille/src/sprite2d/sprite.hpp	2009-08-25 13:43:24 UTC (rev 3069)
@@ -41,7 +41,6 @@
 
   float frame;
   float speed;
-  float alpha;
 
   bool   pingpong;
   bool   reverse;

Modified: trunk/windstille/src/sprite3d/sprite3d.cpp
===================================================================
--- trunk/windstille/src/sprite3d/sprite3d.cpp	2009-08-25 12:19:46 UTC (rev 3068)
+++ trunk/windstille/src/sprite3d/sprite3d.cpp	2009-08-25 13:43:24 UTC (rev 3069)
@@ -280,9 +280,9 @@
   const Sprite3D* sprite;
 
 public:
-  Sprite3DDrawingRequest(const Sprite3D* sprite, 
+  Sprite3DDrawingRequest(const Sprite3D* sprite_, 
                          const Vector2f&amp; pos_, float z_pos_, const Matrix&amp; modelview_)
-    : DrawingRequest(pos_, z_pos_, modelview_), sprite(sprite)
+    : DrawingRequest(pos_, z_pos_, modelview_), sprite(sprite_)
   {}
 
   void draw(const Texture&amp; /*tmp_texture*/)


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="002065.html">[Windstille-commit] r3068 - trunk/windstille
</A></li>
	<LI>Next message: <A HREF="002067.html">[Windstille-commit] r3070 - in trunk/windstille: . src/editor
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2066">[ date ]</a>
              <a href="thread.html#2066">[ thread ]</a>
              <a href="subject.html#2066">[ subject ]</a>
              <a href="author.html#2066">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/windstille-commit">More information about the Windstille-commit
mailing list</a><br>
</body></html>
