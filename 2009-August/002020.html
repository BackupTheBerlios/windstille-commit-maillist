<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Windstille-commit] r3023 - in trunk/windstille/src: app armature	engine lisp objects particles properties screen sound	sprite2d sprite3d util
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/windstille-commit/2009-August/index.html" >
   <LINK REL="made" HREF="mailto:windstille-commit%40lists.berlios.de?Subject=Re%3A%20%5BWindstille-commit%5D%20r3023%20-%20in%20trunk/windstille/src%3A%20app%20armature%0A%09engine%20lisp%20objects%20particles%20properties%20screen%20sound%0A%09sprite2d%20sprite3d%20util&In-Reply-To=%3C200908232209.n7NM98fg013313%40sheep.berlios.de%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="002019.html">
   <LINK REL="Next"  HREF="002021.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Windstille-commit] r3023 - in trunk/windstille/src: app armature	engine lisp objects particles properties screen sound	sprite2d sprite3d util</H1>
    <B>grumbel at BerliOS</B> 
    <A HREF="mailto:windstille-commit%40lists.berlios.de?Subject=Re%3A%20%5BWindstille-commit%5D%20r3023%20-%20in%20trunk/windstille/src%3A%20app%20armature%0A%09engine%20lisp%20objects%20particles%20properties%20screen%20sound%0A%09sprite2d%20sprite3d%20util&In-Reply-To=%3C200908232209.n7NM98fg013313%40sheep.berlios.de%3E"
       TITLE="[Windstille-commit] r3023 - in trunk/windstille/src: app armature	engine lisp objects particles properties screen sound	sprite2d sprite3d util">grumbel at mail.berlios.de
       </A><BR>
    <I>Mon Aug 24 00:09:08 CEST 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="002019.html">[Windstille-commit] r3022 - in trunk/windstille/src: gui sound	sprite2d
</A></li>
        <LI>Next message: <A HREF="002021.html">[Windstille-commit] r3024 - in trunk/windstille/src: app collision	engine hud input lisp objects screen scripting
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2020">[ date ]</a>
              <a href="thread.html#2020">[ thread ]</a>
              <a href="subject.html#2020">[ subject ]</a>
              <a href="author.html#2020">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Author: grumbel
Date: 2009-08-24 00:09:04 +0200 (Mon, 24 Aug 2009)
New Revision: 3023

Modified:
   trunk/windstille/src/app/console.cpp
   trunk/windstille/src/armature/bone.cpp
   trunk/windstille/src/armature/ipo_curve.cpp
   trunk/windstille/src/armature/mesh.cpp
   trunk/windstille/src/armature/mesh.hpp
   trunk/windstille/src/engine/camera.cpp
   trunk/windstille/src/engine/entity.cpp
   trunk/windstille/src/engine/physics.cpp
   trunk/windstille/src/engine/physics.hpp
   trunk/windstille/src/engine/script_manager.hpp
   trunk/windstille/src/engine/sector.cpp
   trunk/windstille/src/engine/sector.hpp
   trunk/windstille/src/lisp/lexer.cpp
   trunk/windstille/src/lisp/lisp.cpp
   trunk/windstille/src/lisp/parser.cpp
   trunk/windstille/src/lisp/parser.hpp
   trunk/windstille/src/objects/box.cpp
   trunk/windstille/src/objects/box.hpp
   trunk/windstille/src/objects/character.cpp
   trunk/windstille/src/objects/elevator.hpp
   trunk/windstille/src/objects/pistol.hpp
   trunk/windstille/src/objects/player.cpp
   trunk/windstille/src/objects/player.hpp
   trunk/windstille/src/objects/vrdummy.cpp
   trunk/windstille/src/objects/vrdummy.hpp
   trunk/windstille/src/particles/surface_drawer.cpp
   trunk/windstille/src/properties/property.hpp
   trunk/windstille/src/properties/property_set.cpp
   trunk/windstille/src/screen/game_session.cpp
   trunk/windstille/src/screen/title_screen.cpp
   trunk/windstille/src/screen/view.cpp
   trunk/windstille/src/sound/ogg_sound_file.cpp
   trunk/windstille/src/sound/ogg_sound_file.hpp
   trunk/windstille/src/sound/sound_file.hpp
   trunk/windstille/src/sound/sound_manager.cpp
   trunk/windstille/src/sound/stream_sound_source.cpp
   trunk/windstille/src/sound/wav_sound_file.cpp
   trunk/windstille/src/sound/wav_sound_file.hpp
   trunk/windstille/src/sprite2d/manager.cpp
   trunk/windstille/src/sprite2d/sprite.cpp
   trunk/windstille/src/sprite2d/sprite.hpp
   trunk/windstille/src/sprite3d/manager.cpp
   trunk/windstille/src/sprite3d/sprite3d.cpp
   trunk/windstille/src/sprite3d/sprite3d.hpp
   trunk/windstille/src/util/command_line.cpp
   trunk/windstille/src/util/command_line.hpp
   trunk/windstille/src/util/command_line_generic.cpp
   trunk/windstille/src/util/command_line_generic.hpp
   trunk/windstille/src/util/file_reader.cpp
   trunk/windstille/src/util/sexpr_file_reader.cpp
Log:
Cleanupd up some compiler warnings

Modified: trunk/windstille/src/app/console.cpp
===================================================================
--- trunk/windstille/src/app/console.cpp	2009-08-23 21:18:46 UTC (rev 3022)
+++ trunk/windstille/src/app/console.cpp	2009-08-23 22:09:04 UTC (rev 3023)
@@ -73,6 +73,10 @@
 private:
   Console* console;
   char buf[1024];
+
+private:
+  ConsoleStreambuf (const ConsoleStreambuf&amp;);
+  ConsoleStreambuf&amp; operator= (const ConsoleStreambuf&amp;);
 };
 
 //-------------------------------------------------------------------------------
@@ -103,16 +107,18 @@
   ConsoleEntry current_entry;
 
   ConsoleImpl(Console&amp; console_)
-    : console(console_)
+    : console(console_),
+      x_pos(16.0f),
+      y_pos(600.0f - 16.0f),
+      buffer(),
+      command_line(),
+      active(false),
+      history(),
+      history_position(1),
+      cursor_pos(0),
+      scroll_offset(0),
+      current_entry()
   {
-    x_pos = 16.0f;
-    y_pos = 600.0f - 16.0f;
-
-    active = false;
-    history_position = 1; 
-
-    scroll_offset = 0;
-    cursor_pos  = 0;   
   }
 
   void draw();
@@ -132,17 +138,17 @@
     current_entry.display_time = 0;
 
     for (int i = 0; i &lt; len; ++i)
+    {
+      if (buf[i] == '\n' || (current_entry.message.size() &gt; 80 &amp;&amp; buf[i] == ' ')) // primitive linebreak
       {
-        if (buf[i] == '\n' || (current_entry.message.size() &gt; 80 &amp;&amp; buf[i] == ' ')) // primitive linebreak
-          {
-            buffer.push_back(current_entry);
-            current_entry = ConsoleEntry();
-          }
-        else
-          {
-            current_entry.message += buf[i];
-          }
+        buffer.push_back(current_entry);
+        current_entry = ConsoleEntry();
       }
+      else
+      {
+        current_entry.message += buf[i];
+      }
+    }
   }
 };
 

Modified: trunk/windstille/src/armature/bone.cpp
===================================================================
--- trunk/windstille/src/armature/bone.cpp	2009-08-23 21:18:46 UTC (rev 3022)
+++ trunk/windstille/src/armature/bone.cpp	2009-08-23 22:09:04 UTC (rev 3023)
@@ -19,7 +19,17 @@
 #include &quot;bone.hpp&quot;
 
 Bone::Bone()
-  : parent(0)
+  : name(),
+    children_names(),
+    parent_name(),
+    children(),
+    parent(0),
+    length(),
+    quat(),
+    offset(),
+    render_matrix(),
+    render_head(),
+    render_tail()
 {
 }
 

Modified: trunk/windstille/src/armature/ipo_curve.cpp
===================================================================
--- trunk/windstille/src/armature/ipo_curve.cpp	2009-08-23 21:18:46 UTC (rev 3022)
+++ trunk/windstille/src/armature/ipo_curve.cpp	2009-08-23 22:09:04 UTC (rev 3023)
@@ -19,6 +19,7 @@
 #include &quot;ipo_curve.hpp&quot;
 
 IpoCurve::IpoCurve()
+  : points()
 {
 }
 

Modified: trunk/windstille/src/armature/mesh.cpp
===================================================================
--- trunk/windstille/src/armature/mesh.cpp	2009-08-23 21:18:46 UTC (rev 3022)
+++ trunk/windstille/src/armature/mesh.cpp	2009-08-23 22:09:04 UTC (rev 3023)
@@ -27,7 +27,15 @@
 #include &quot;mesh.hpp&quot;
 
 Mesh::Mesh(FileReader&amp; reader, const std::string&amp; path)
-  : blend_sfactor(GL_ONE),
+  : name(),
+    vertices(),
+    normals(),
+    texcoords(),
+    triangles(),
+    groups(),
+    vertices_(),
+    texture(),
+    blend_sfactor(GL_ONE),
     blend_dfactor(GL_ZERO)
 {
   if (reader.get_name() != &quot;mesh&quot;)

Modified: trunk/windstille/src/armature/mesh.hpp
===================================================================
--- trunk/windstille/src/armature/mesh.hpp	2009-08-23 21:18:46 UTC (rev 3022)
+++ trunk/windstille/src/armature/mesh.hpp	2009-08-23 22:09:04 UTC (rev 3023)
@@ -36,6 +36,12 @@
   std::string bone_name;
   float       weight;
   std::vector&lt;int&gt; vertices;
+
+  VertexGroup()
+    : bone_name(),
+      weight(),
+      vertices()
+  {}
 };
 
 struct Vertex
@@ -50,6 +56,16 @@
   std::vector&lt;float&gt; weights;
   std::vector&lt;std::string&gt; bone_names;
   std::vector&lt;Bone*&gt; bones;
+
+  Vertex()
+    : pos(),
+      normal(),
+      texcoord(),
+      render_pos(),
+      weights(),
+      bone_names(),
+      bones()
+  {}
 };
 
 /** */

Modified: trunk/windstille/src/engine/camera.cpp
===================================================================
--- trunk/windstille/src/engine/camera.cpp	2009-08-23 21:18:46 UTC (rev 3022)
+++ trunk/windstille/src/engine/camera.cpp	2009-08-23 22:09:04 UTC (rev 3023)
@@ -60,10 +60,11 @@
 }
 
 Camera::Camera()
-  : pos(0, 0), zoom(1.0f)
-{
-  path_pos = 0;
-  mode     = CAMERA_FOLLOW_PLAYER;
+  : mode(CAMERA_FOLLOW_PLAYER),
+    pos(0, 0), 
+    zoom(1.0f),
+    path_pos(0)
+{  
 }
 
 void

Modified: trunk/windstille/src/engine/entity.cpp
===================================================================
--- trunk/windstille/src/engine/entity.cpp	2009-08-23 21:18:46 UTC (rev 3022)
+++ trunk/windstille/src/engine/entity.cpp	2009-08-23 22:09:04 UTC (rev 3023)
@@ -25,10 +25,12 @@
 #include &quot;entity.hpp&quot;
 
 Entity::Entity()
-  : velocity(0, 0),
-    useable(false)
+  : pos(),
+    velocity(0, 0),
+    useable(false),
+    use_verb(),
+    parent(0)
 {
-  parent = 0;
 }
 
 Entity::~Entity()

Modified: trunk/windstille/src/engine/physics.cpp
===================================================================
--- trunk/windstille/src/engine/physics.cpp	2009-08-23 21:18:46 UTC (rev 3022)
+++ trunk/windstille/src/engine/physics.cpp	2009-08-23 22:09:04 UTC (rev 3023)
@@ -22,12 +22,13 @@
 #include &quot;physics.hpp&quot;
 
 Physics::Physics(Entity* entity)
-  : entity(entity)
+  : entity(entity),
+    mass(200.0),
+    bounciness(1.0),
+    force(),
+    air_friction(0.0),
+    contact_friction(0.0)
 {
-  mass = 200.0;
-  bounciness = 1.0;
-  air_friction = 0.0;
-  contact_friction = 0.0;
 }
 
 Physics::~Physics()

Modified: trunk/windstille/src/engine/physics.hpp
===================================================================
--- trunk/windstille/src/engine/physics.hpp	2009-08-23 21:18:46 UTC (rev 3022)
+++ trunk/windstille/src/engine/physics.hpp	2009-08-23 22:09:04 UTC (rev 3023)
@@ -48,6 +48,10 @@
   Vector2f force;
   float air_friction;
   float contact_friction;
+
+private:
+  Physics(const Physics&amp;);
+  Physics&amp; operator=(const Physics&amp;);
 };
 
 #endif

Modified: trunk/windstille/src/engine/script_manager.hpp
===================================================================
--- trunk/windstille/src/engine/script_manager.hpp	2009-08-23 21:18:46 UTC (rev 3022)
+++ trunk/windstille/src/engine/script_manager.hpp	2009-08-23 22:09:04 UTC (rev 3023)
@@ -55,6 +55,7 @@
       MAX_WAKEUP_EVENT_COUNT
     };
 
+#pragma GCC diagnostic warning &quot;-Weffc++&quot;
   struct WakeupData 
   {
     explicit WakeupData() : type(NO_EVENT) {}
@@ -94,6 +95,10 @@
   
   void expose_object_to_squirrel(boost::shared_ptr&lt;GameObject&gt; object);
   void remove_object_from_squirrel(boost::shared_ptr&lt;GameObject&gt; object);
+
+private:
+  ScriptManager(const ScriptManager&amp;);
+  ScriptManager&amp; operator=(const ScriptManager&amp;);
 };
 
 #endif

Modified: trunk/windstille/src/engine/sector.cpp
===================================================================
--- trunk/windstille/src/engine/sector.cpp	2009-08-23 21:18:46 UTC (rev 3022)
+++ trunk/windstille/src/engine/sector.cpp	2009-08-23 22:09:04 UTC (rev 3023)
@@ -59,8 +59,17 @@
     navigation_graph(new NavigationGraph()),
     scene_graph(new SceneGraph()),
     filename(arg_filename),
+    name(),
+    music(),
+    init_script(),
+    vm(),
+    objects(),
+    new_objects(),
+    ambient_light(),
+    interactive_tilemap(0),
+    interactivebackground_tilemap(0),
     player(0)
-{ 
+{
   //current_ = this;
 
   if (debug) std::cout &lt;&lt; &quot;Creating new Sector&quot; &lt;&lt; std::endl;

Modified: trunk/windstille/src/engine/sector.hpp
===================================================================
--- trunk/windstille/src/engine/sector.hpp	2009-08-23 21:18:46 UTC (rev 3022)
+++ trunk/windstille/src/engine/sector.hpp	2009-08-23 22:09:04 UTC (rev 3023)
@@ -69,6 +69,7 @@
 
   Player* player;
 
+private:
   void parse_file(const Pathname&amp; filename);
 
   void commit_adds();

Modified: trunk/windstille/src/lisp/lexer.cpp
===================================================================
--- trunk/windstille/src/lisp/lexer.cpp	2009-08-23 21:18:46 UTC (rev 3022)
+++ trunk/windstille/src/lisp/lexer.cpp	2009-08-23 22:09:04 UTC (rev 3023)
@@ -29,7 +29,7 @@
 };
 
 Lexer::Lexer(std::istream&amp; newstream)
-    : stream(newstream), eof(false), linenumber(0)
+  : stream(newstream), eof(false), linenumber(0), bufend(0), c(0), token_length(0)
 {
   try {
     // trigger a refill of the buffer

Modified: trunk/windstille/src/lisp/lisp.cpp
===================================================================
--- trunk/windstille/src/lisp/lisp.cpp	2009-08-23 21:18:46 UTC (rev 3022)
+++ trunk/windstille/src/lisp/lisp.cpp	2009-08-23 22:09:04 UTC (rev 3023)
@@ -24,7 +24,8 @@
 {
     
 Lisp::Lisp(int val)
-  : type(TYPE_INT)
+  : type(TYPE_INT),
+    v()
 {
   v.int_ = val;
 }

Modified: trunk/windstille/src/lisp/parser.cpp
===================================================================
--- trunk/windstille/src/lisp/parser.cpp	2009-08-23 21:18:46 UTC (rev 3022)
+++ trunk/windstille/src/lisp/parser.cpp	2009-08-23 22:09:04 UTC (rev 3023)
@@ -35,6 +35,7 @@
 {
 public:
   ParseError(const Parser* parser, const std::string&amp; message) throw()
+    : string()
   {
     std::ostringstream msg;
     msg &lt;&lt; &quot;Parse error in file '&quot; &lt;&lt; parser-&gt;filename &lt;&lt; &quot;' line &quot;

Modified: trunk/windstille/src/lisp/parser.hpp
===================================================================
--- trunk/windstille/src/lisp/parser.hpp	2009-08-23 21:18:46 UTC (rev 3022)
+++ trunk/windstille/src/lisp/parser.hpp	2009-08-23 22:09:04 UTC (rev 3023)
@@ -42,6 +42,10 @@
   std::string filename;
   Lexer* lexer;
   Lexer::TokenType token;
+
+private:
+  Parser(const Parser&amp;);
+  Parser&amp; operator=(const Parser&amp;);
 };
 
 } // end of namespace lisp

Modified: trunk/windstille/src/objects/box.cpp
===================================================================
--- trunk/windstille/src/objects/box.cpp	2009-08-23 21:18:46 UTC (rev 3022)
+++ trunk/windstille/src/objects/box.cpp	2009-08-23 22:09:04 UTC (rev 3023)
@@ -27,6 +27,9 @@
 #include &quot;sprite2d/manager.hpp&quot;
 
 Box::Box(FileReader&amp; props)
+  : sprite(),
+    colobj(0),
+    gravity()
 {
   gravity = 0.0f;
   float width  = 64.0f;

Modified: trunk/windstille/src/objects/box.hpp
===================================================================
--- trunk/windstille/src/objects/box.hpp	2009-08-23 21:18:46 UTC (rev 3022)
+++ trunk/windstille/src/objects/box.hpp	2009-08-23 22:09:04 UTC (rev 3023)
@@ -41,6 +41,10 @@
   void update(float delta);
 
   void draw(SceneContext&amp; gc);
+
+private:
+  Box(const Box&amp;);
+  Box&amp; operator=(const Box&amp;);
 };
 
 #endif

Modified: trunk/windstille/src/objects/character.cpp
===================================================================
--- trunk/windstille/src/objects/character.cpp	2009-08-23 21:18:46 UTC (rev 3022)
+++ trunk/windstille/src/objects/character.cpp	2009-08-23 22:09:04 UTC (rev 3023)
@@ -30,10 +30,11 @@
 #include &lt;exception&gt;
 
 Character::Character(FileReader&amp; props)
+  : sprite(),
+    z_pos(100.0f)
 {
   set_useable(true);
   use_verb = &quot;Talk&quot;;
-  z_pos = 100.0f;
 
   std::string sprite3d_filename = &quot;models/characters/jane/jane.wsprite&quot;;
   std::string action_name;

Modified: trunk/windstille/src/objects/elevator.hpp
===================================================================
--- trunk/windstille/src/objects/elevator.hpp	2009-08-23 21:18:46 UTC (rev 3022)
+++ trunk/windstille/src/objects/elevator.hpp	2009-08-23 22:09:04 UTC (rev 3023)
@@ -29,12 +29,17 @@
   Sizef size;
   CollisionObject* colobject;
   Sprite sprite;
+
 public:
   Elevator(FileReader&amp; props);
   ~Elevator();
 
   void draw(SceneContext&amp; sc);
   void update(float delta);
+
+private:
+  Elevator(const Elevator&amp;);
+  Elevator&amp; operator=(const Elevator&amp;);
 };
 
 #endif

Modified: trunk/windstille/src/objects/pistol.hpp
===================================================================
--- trunk/windstille/src/objects/pistol.hpp	2009-08-23 21:18:46 UTC (rev 3022)
+++ trunk/windstille/src/objects/pistol.hpp	2009-08-23 22:09:04 UTC (rev 3023)
@@ -40,6 +40,10 @@
   void update(float delta);
 
   void fire(bool enable);
+
+private:
+  Pistol(const Pistol&amp;);
+  Pistol&amp; operator=(const Pistol&amp;);
 };
 
 #endif

Modified: trunk/windstille/src/objects/player.cpp
===================================================================
--- trunk/windstille/src/objects/player.cpp	2009-08-23 21:18:46 UTC (rev 3022)
+++ trunk/windstille/src/objects/player.cpp	2009-08-23 22:09:04 UTC (rev 3023)
@@ -44,7 +44,19 @@
 static const float RUN_SPEED = 256.0;
 
 Player::Player () 
- : state(STAND)
+  : sprite(),
+    jumping(),
+    bomb_placed(),
+    hit_count(),
+    energy(),
+    c_object(),
+    laser_pointer(),
+    contact(),
+    weapon(),
+    state(STAND),
+    jump_foot(),
+    reload_time(),
+    z_pos()
 {
   sprite = Sprite3D(Pathname(&quot;models/characters/jane/jane.wsprite&quot;));
   pos.x = 320;

Modified: trunk/windstille/src/objects/player.hpp
===================================================================
--- trunk/windstille/src/objects/player.hpp	2009-08-23 21:18:46 UTC (rev 3022)
+++ trunk/windstille/src/objects/player.hpp	2009-08-23 22:09:04 UTC (rev 3023)
@@ -165,6 +165,10 @@
   void try_set_action(const std::string&amp; name, float speed = 1.0);
 
   Direction get_direction() const;
+
+private:
+  Player(const Player&amp;);
+  Player&amp; operator=(const Player&amp;);
 };
 
 #endif

Modified: trunk/windstille/src/objects/vrdummy.cpp
===================================================================
--- trunk/windstille/src/objects/vrdummy.cpp	2009-08-23 21:18:46 UTC (rev 3022)
+++ trunk/windstille/src/objects/vrdummy.cpp	2009-08-23 22:09:04 UTC (rev 3023)
@@ -20,6 +20,10 @@
 #include &quot;vrdummy.hpp&quot;
 
 VRDummy::VRDummy(FileReader&amp; props)
+  : sprite(),
+    highlight(),
+    rotation(),
+    jump_time()
 {
   props.get(&quot;name&quot;, name);
   props.get(&quot;pos&quot;,  pos);

Modified: trunk/windstille/src/objects/vrdummy.hpp
===================================================================
--- trunk/windstille/src/objects/vrdummy.hpp	2009-08-23 21:18:46 UTC (rev 3022)
+++ trunk/windstille/src/objects/vrdummy.hpp	2009-08-23 22:09:04 UTC (rev 3023)
@@ -32,6 +32,7 @@
 
   float rotation;
   float jump_time;
+
 public:
   VRDummy(FileReader&amp; props);
   ~VRDummy();

Modified: trunk/windstille/src/particles/surface_drawer.cpp
===================================================================
--- trunk/windstille/src/particles/surface_drawer.cpp	2009-08-23 21:18:46 UTC (rev 3022)
+++ trunk/windstille/src/particles/surface_drawer.cpp	2009-08-23 22:09:04 UTC (rev 3023)
@@ -53,6 +53,9 @@
 }
 
 SurfaceDrawer::SurfaceDrawer(FileReader&amp; props)
+  : surface(),
+    blendfunc_src(),
+    blendfunc_dest()
 {
   std::string blendfunc_src_str = &quot;src_alpha&quot;;
   std::string blendfunc_dst_str = &quot;one_minus_src_alpha&quot;;

Modified: trunk/windstille/src/properties/property.hpp
===================================================================
--- trunk/windstille/src/properties/property.hpp	2009-08-23 21:18:46 UTC (rev 3022)
+++ trunk/windstille/src/properties/property.hpp	2009-08-23 22:09:04 UTC (rev 3023)
@@ -52,7 +52,8 @@
   } value;
 
   PropertyImpl(Type type)
-    : Property(type)
+    : Property(type),
+      value()
   {}
 
 public:

Modified: trunk/windstille/src/properties/property_set.cpp
===================================================================
--- trunk/windstille/src/properties/property_set.cpp	2009-08-23 21:18:46 UTC (rev 3022)
+++ trunk/windstille/src/properties/property_set.cpp	2009-08-23 22:09:04 UTC (rev 3023)
@@ -24,7 +24,8 @@
 
 PropertySet::PropertySet(const std::string&amp; name_, PropertySet* parent_)
   : parent(parent_),
-    name(name_)
+    name(name_),
+    properties()
 {  
 }
 

Modified: trunk/windstille/src/screen/game_session.cpp
===================================================================
--- trunk/windstille/src/screen/game_session.cpp	2009-08-23 21:18:46 UTC (rev 3022)
+++ trunk/windstille/src/screen/game_session.cpp	2009-08-23 22:09:04 UTC (rev 3023)
@@ -96,6 +96,24 @@
   Screen* current_gui;
 
   GameSessionImpl() 
+    : sc(),
+      fadeout_value(),
+      fade_time(),
+      sector(),
+      view(),
+      filename(),
+      pause(),
+      cutscene_value(),
+      cutscene_mode(),
+      next_action(),
+      fade_state(),
+      fade_color(),
+      speech_manager(),
+      dialog_manager(),
+      conversation(),
+      inventory(),
+      pda(),
+      current_gui()
   {
     current_gui    = 0;
     cutscene_mode  = false;
@@ -119,6 +137,10 @@
   void update(float delta, const Controller&amp; controller);
   
   void handle_event(const SDL_Event&amp; event);
+
+private:
+  GameSessionImpl (const GameSessionImpl&amp;);
+  GameSessionImpl&amp; operator= (const GameSessionImpl&amp;);
 };
 
 GameSession::GameSession(const Pathname&amp; arg_filename)

Modified: trunk/windstille/src/screen/title_screen.cpp
===================================================================
--- trunk/windstille/src/screen/title_screen.cpp	2009-08-23 21:18:46 UTC (rev 3022)
+++ trunk/windstille/src/screen/title_screen.cpp	2009-08-23 22:09:04 UTC (rev 3023)
@@ -24,8 +24,8 @@
 #include &quot;app/menu_manager.hpp&quot;
 
 TitleScreen::TitleScreen()
+  : background(Pathname(&quot;images/titlescreen.sprite&quot;))
 {
-  background = Sprite(Pathname(&quot;images/titlescreen.sprite&quot;));
   background.set_scale(std::max(float(Display::get_width())  / background.get_width(),
                                 float(Display::get_height()) / background.get_height()));
 }

Modified: trunk/windstille/src/screen/view.cpp
===================================================================
--- trunk/windstille/src/screen/view.cpp	2009-08-23 21:18:46 UTC (rev 3022)
+++ trunk/windstille/src/screen/view.cpp	2009-08-23 22:09:04 UTC (rev 3023)
@@ -27,6 +27,7 @@
 
 View::View()
   : state(Display::get_width(), Display::get_height()),
+    camera(),
     zoom(1.0), 
     transform(0, 0)
 {

Modified: trunk/windstille/src/sound/ogg_sound_file.cpp
===================================================================
--- trunk/windstille/src/sound/ogg_sound_file.cpp	2009-08-23 21:18:46 UTC (rev 3022)
+++ trunk/windstille/src/sound/ogg_sound_file.cpp	2009-08-23 22:09:04 UTC (rev 3023)
@@ -18,10 +18,10 @@
 
 #include &quot;ogg_sound_file.hpp&quot;
 
-OggSoundFile::OggSoundFile(PHYSFS_file* file)
+OggSoundFile::OggSoundFile(PHYSFS_file* file_)
+  : file(file_),
+    vorbis_file()
 {
-  this-&gt;file = file;
-
   ov_callbacks callbacks = { cb_read, cb_seek, cb_close, cb_tell };
   ov_open_callbacks(file, &amp;vorbis_file, 0, 0, callbacks);
 

Modified: trunk/windstille/src/sound/ogg_sound_file.hpp
===================================================================
--- trunk/windstille/src/sound/ogg_sound_file.hpp	2009-08-23 21:18:46 UTC (rev 3022)
+++ trunk/windstille/src/sound/ogg_sound_file.hpp	2009-08-23 22:09:04 UTC (rev 3023)
@@ -42,6 +42,10 @@
   
   PHYSFS_file* file;
   OggVorbis_File vorbis_file;
+
+private:
+  OggSoundFile(const OggSoundFile&amp;);
+  OggSoundFile&amp; operator=(const OggSoundFile&amp;);
 };
 
 #endif

Modified: trunk/windstille/src/sound/sound_file.hpp
===================================================================
--- trunk/windstille/src/sound/sound_file.hpp	2009-08-23 21:18:46 UTC (rev 3022)
+++ trunk/windstille/src/sound/sound_file.hpp	2009-08-23 22:09:04 UTC (rev 3023)
@@ -26,7 +26,12 @@
 class SoundFile
 {
 public:
-  SoundFile() {}
+  SoundFile() 
+    : channels(),
+      rate(),
+      bits_per_sample(),
+      size()
+  {}
   virtual ~SoundFile() {}
 
   virtual size_t read(void* buffer, size_t buffer_size) = 0;

Modified: trunk/windstille/src/sound/sound_manager.cpp
===================================================================
--- trunk/windstille/src/sound/sound_manager.cpp	2009-08-23 21:18:46 UTC (rev 3022)
+++ trunk/windstille/src/sound/sound_manager.cpp	2009-08-23 22:09:04 UTC (rev 3023)
@@ -34,7 +34,12 @@
   : device(0), 
     context(0), 
     sound_enabled(false), 
-    music_enabled(true)
+    buffers(),
+    sources(),
+    music_source(),
+    next_music_source(),
+    music_enabled(true),
+    current_music()
 {
   try 
     {

Modified: trunk/windstille/src/sound/stream_sound_source.cpp
===================================================================
--- trunk/windstille/src/sound/stream_sound_source.cpp	2009-08-23 21:18:46 UTC (rev 3022)
+++ trunk/windstille/src/sound/stream_sound_source.cpp	2009-08-23 22:09:04 UTC (rev 3023)
@@ -23,26 +23,29 @@
 #include &quot;sound_file.hpp&quot;
 
 StreamSoundSource::StreamSoundSource(std::auto_ptr&lt;SoundFile&gt; file_)
+  : file(file_),
+    format(),
+    fade_state(),
+    fade_start_ticks(),
+    fade_time()
 {
-  file = file_;
-
   alGenBuffers(STREAMFRAGMENTS, buffers);
   SoundManager::check_al_error(&quot;Couldn't allocate audio buffers: &quot;);
 
   format = SoundManager::get_sample_format(file.get());
 
   try 
+  {
+    for(size_t i = 0; i &lt; STREAMFRAGMENTS; ++i) 
     {
-      for(size_t i = 0; i &lt; STREAMFRAGMENTS; ++i) 
-        {
-          fillBufferAndQueue(buffers[i]);
-        }
+      fillBufferAndQueue(buffers[i]);
     }
+  }
   catch(...) 
-    {
-      alDeleteBuffers(STREAMFRAGMENTS, buffers);
-      throw;
-    }
+  {
+    alDeleteBuffers(STREAMFRAGMENTS, buffers);
+    throw;
+  }
 }
 
 StreamSoundSource::~StreamSoundSource()

Modified: trunk/windstille/src/sound/wav_sound_file.cpp
===================================================================
--- trunk/windstille/src/sound/wav_sound_file.cpp	2009-08-23 21:18:46 UTC (rev 3022)
+++ trunk/windstille/src/sound/wav_sound_file.cpp	2009-08-23 22:09:04 UTC (rev 3023)
@@ -40,10 +40,10 @@
   return result;
 }
 
-WavSoundFile::WavSoundFile(PHYSFS_file* file)
+WavSoundFile::WavSoundFile(PHYSFS_file* file_)
+  : file(file_),
+    datastart()
 {
-  this-&gt;file = file;
-
   char magic[4];
   if(PHYSFS_read(file, magic, sizeof(magic), 1) != 1)
     throw std::runtime_error(&quot;Couldn't read file magic (not a wave file)&quot;);

Modified: trunk/windstille/src/sound/wav_sound_file.hpp
===================================================================
--- trunk/windstille/src/sound/wav_sound_file.hpp	2009-08-23 21:18:46 UTC (rev 3022)
+++ trunk/windstille/src/sound/wav_sound_file.hpp	2009-08-23 22:09:04 UTC (rev 3023)
@@ -35,6 +35,10 @@
   PHYSFS_file* file;
   
   PHYSFS_sint64 datastart;
+
+private:
+  WavSoundFile(const WavSoundFile&amp;);
+  WavSoundFile&amp; operator=(const WavSoundFile&amp;);
 };
 
 #endif

Modified: trunk/windstille/src/sprite2d/manager.cpp
===================================================================
--- trunk/windstille/src/sprite2d/manager.cpp	2009-08-23 21:18:46 UTC (rev 3022)
+++ trunk/windstille/src/sprite2d/manager.cpp	2009-08-23 22:09:04 UTC (rev 3023)
@@ -27,6 +27,7 @@
 #include &quot;sprite2d/sprite.hpp&quot;
 
 SpriteManager::SpriteManager()
+  : datas()
 {
 }
 

Modified: trunk/windstille/src/sprite2d/sprite.cpp
===================================================================
--- trunk/windstille/src/sprite2d/sprite.cpp	2009-08-23 21:18:46 UTC (rev 3022)
+++ trunk/windstille/src/sprite2d/sprite.cpp	2009-08-23 22:09:04 UTC (rev 3023)
@@ -101,6 +101,43 @@
   blend_dfactor = GL_ONE_MINUS_SRC_ALPHA;
 }
 
+Sprite::Sprite(const Sprite&amp; rhs)
+  : data(rhs.data),
+    current_action(rhs.current_action),
+    frame(rhs.frame),
+    speed(rhs.speed),
+    alpha(rhs.alpha),
+    pingpong(rhs.pingpong),
+    reverse(rhs.reverse),
+    vflip(rhs.vflip),
+    blend_sfactor(rhs.blend_sfactor),
+    blend_dfactor(rhs.blend_dfactor),
+    scale(rhs.scale),
+    color(rhs.color)
+{
+}
+
+Sprite&amp;
+Sprite::operator=(const Sprite&amp; rhs)
+{
+  if (this != &amp;rhs)
+  {
+    data           = rhs.data;
+    current_action = rhs.current_action;
+    frame          = rhs.frame;
+    speed          = rhs.speed;
+    alpha          = rhs.alpha;
+    pingpong       = rhs.pingpong;
+    reverse        = rhs.reverse;
+    vflip          = rhs.vflip;
+    blend_sfactor  = rhs.blend_sfactor;
+    blend_dfactor  = rhs.blend_dfactor;
+    scale          = rhs.scale;
+    color          = rhs.color; 
+  }
+  return *this;
+}
+
 Sprite::~Sprite()
 {
 }

Modified: trunk/windstille/src/sprite2d/sprite.hpp
===================================================================
--- trunk/windstille/src/sprite2d/sprite.hpp	2009-08-23 21:18:46 UTC (rev 3022)
+++ trunk/windstille/src/sprite2d/sprite.hpp	2009-08-23 22:09:04 UTC (rev 3023)
@@ -64,6 +64,8 @@
       one-file sprite */
   explicit Sprite(const Pathname&amp; filename);
   explicit Sprite(const SpriteDataPtr data);
+  Sprite(const Sprite&amp;);
+  Sprite&amp; operator=(const Sprite&amp;);
   ~Sprite();
 
   void update(float delta);
@@ -105,10 +107,6 @@
 
   /** true if the Sprite is valid and usable, false if not */
   operator bool() const;
-
-private:
-  Sprite(const Sprite&amp;);
-  Sprite&amp; operator=(const Sprite&amp;);
 };
 
 #endif

Modified: trunk/windstille/src/sprite3d/manager.cpp
===================================================================
--- trunk/windstille/src/sprite3d/manager.cpp	2009-08-23 21:18:46 UTC (rev 3022)
+++ trunk/windstille/src/sprite3d/manager.cpp	2009-08-23 22:09:04 UTC (rev 3023)
@@ -24,6 +24,7 @@
 namespace sprite3d {
 
 Manager::Manager()
+  : datas()
 {
 }
 

Modified: trunk/windstille/src/sprite3d/sprite3d.cpp
===================================================================
--- trunk/windstille/src/sprite3d/sprite3d.cpp	2009-08-23 21:18:46 UTC (rev 3022)
+++ trunk/windstille/src/sprite3d/sprite3d.cpp	2009-08-23 22:09:04 UTC (rev 3023)
@@ -72,6 +72,39 @@
   next_action.action    = 0;
 }
 
+Sprite3D::Sprite3D(const Sprite3D&amp; rhs)
+  : data(rhs.data),
+    actions_switched(rhs.actions_switched),
+    frame1(rhs.frame1),
+    frame2(rhs.frame2),
+    blend_time(rhs.blend_time),
+    next_frame(rhs.next_frame),
+    next_action(rhs.next_action),
+    abort_at_frame(rhs.abort_at_frame),
+    blend_sfactor(rhs.blend_sfactor),
+    blend_dfactor(rhs.blend_dfactor)
+{
+}
+
+Sprite3D&amp;
+Sprite3D::operator=(const Sprite3D&amp; rhs)
+{
+  if (this != &amp;rhs)
+  {
+    data             = rhs.data;
+    actions_switched = rhs.actions_switched;
+    frame1           = rhs.frame1;
+    frame2           = rhs.frame2;
+    blend_time       = rhs.blend_time;
+    next_frame       = rhs.next_frame;
+    next_action      = rhs.next_action;
+    abort_at_frame   = rhs.abort_at_frame;
+    blend_sfactor    = rhs.blend_sfactor;
+    blend_dfactor    = rhs.blend_dfactor;
+  }
+  return *this;
+}
+
 Sprite3D::~Sprite3D()
 {
 }
@@ -266,6 +299,10 @@
   {
     sprite-&gt;draw(pos, modelview);
   }
+
+private:
+  Sprite3DDrawingRequest(const Sprite3DDrawingRequest&amp;);
+  Sprite3DDrawingRequest&amp; operator=(const Sprite3DDrawingRequest&amp;);
 };
 
 void

Modified: trunk/windstille/src/sprite3d/sprite3d.hpp
===================================================================
--- trunk/windstille/src/sprite3d/sprite3d.hpp	2009-08-23 21:18:46 UTC (rev 3022)
+++ trunk/windstille/src/sprite3d/sprite3d.hpp	2009-08-23 22:09:04 UTC (rev 3023)
@@ -48,6 +48,8 @@
 
   Sprite3D();
   explicit Sprite3D(const Pathname&amp; filename);
+  Sprite3D(const Sprite3D&amp;);
+  Sprite3D&amp; operator=(const Sprite3D&amp;);
   ~Sprite3D();
 
   /**
@@ -140,6 +142,7 @@
 
   void set_next_frame();
 
+private:
   const sprite3d::Data* data;
   bool actions_switched;
 

Modified: trunk/windstille/src/util/command_line.cpp
===================================================================
--- trunk/windstille/src/util/command_line.cpp	2009-08-23 21:18:46 UTC (rev 3022)
+++ trunk/windstille/src/util/command_line.cpp	2009-08-23 22:09:04 UTC (rev 3023)
@@ -31,8 +31,8 @@
 #include &quot;command_line_generic.hpp&quot;
 
 CommandLine::CommandLine()
+  : impl(new CommandLine_Generic())
 {
-	impl = new CommandLine_Generic();
 }
 
 CommandLine::~CommandLine()

Modified: trunk/windstille/src/util/command_line.hpp
===================================================================
--- trunk/windstille/src/util/command_line.hpp	2009-08-23 21:18:46 UTC (rev 3022)
+++ trunk/windstille/src/util/command_line.hpp	2009-08-23 22:09:04 UTC (rev 3023)
@@ -152,6 +152,10 @@
 //! Implementation:
 private:
 	CommandLine_Generic* impl;
+
+private:
+  CommandLine(const CommandLine&amp;);
+  CommandLine&amp; operator=(const CommandLine&amp;);
 };
 
 #endif

Modified: trunk/windstille/src/util/command_line_generic.cpp
===================================================================
--- trunk/windstille/src/util/command_line_generic.cpp	2009-08-23 21:18:46 UTC (rev 3022)
+++ trunk/windstille/src/util/command_line_generic.cpp	2009-08-23 22:09:04 UTC (rev 3023)
@@ -40,6 +40,11 @@
 #endif
 
 CommandLine_Generic::CommandLine_Generic()
+  : help_indent(),
+    programm(),
+    options(),
+    parsed_options(),
+    current_option()
 {
   help_indent = 18;
 }

Modified: trunk/windstille/src/util/command_line_generic.hpp
===================================================================
--- trunk/windstille/src/util/command_line_generic.hpp	2009-08-23 21:18:46 UTC (rev 3022)
+++ trunk/windstille/src/util/command_line_generic.hpp	2009-08-23 22:09:04 UTC (rev 3023)
@@ -52,6 +52,14 @@
 		std::string long_option;
 		std::string argument;
 		bool visible;
+
+          Option()
+            : key(),
+              help(),
+              long_option(),
+              argument(),
+              visible()
+          {}
 	};
   
 	typedef std::vector&lt;Option&gt; Options;
@@ -61,6 +69,11 @@
 	{
 		int key;
 		std::string argument;
+
+          ParsedOption()
+            : key(),
+              argument()
+          {}
 	};
 
 	typedef std::vector&lt;ParsedOption&gt; ParsedOptions;

Modified: trunk/windstille/src/util/file_reader.cpp
===================================================================
--- trunk/windstille/src/util/file_reader.cpp	2009-08-23 21:18:46 UTC (rev 3022)
+++ trunk/windstille/src/util/file_reader.cpp	2009-08-23 22:09:04 UTC (rev 3023)
@@ -81,6 +81,7 @@
 }
 
 FileReader::FileReader()
+  : impl()
 {
 }
 

Modified: trunk/windstille/src/util/sexpr_file_reader.cpp
===================================================================
--- trunk/windstille/src/util/sexpr_file_reader.cpp	2009-08-23 21:18:46 UTC (rev 3022)
+++ trunk/windstille/src/util/sexpr_file_reader.cpp	2009-08-23 22:09:04 UTC (rev 3023)
@@ -244,6 +244,9 @@
     return 0;
   } 
 
+private:
+  SExprFileReaderImpl(const SExprFileReaderImpl&amp;);
+  SExprFileReaderImpl&amp; operator=(const SExprFileReaderImpl&amp;);
 };
 
 SExprFileReader::SExprFileReader(const lisp::Lisp* sexpr, bool delete_sexpr)


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="002019.html">[Windstille-commit] r3022 - in trunk/windstille/src: gui sound	sprite2d
</A></li>
	<LI>Next message: <A HREF="002021.html">[Windstille-commit] r3024 - in trunk/windstille/src: app collision	engine hud input lisp objects screen scripting
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2020">[ date ]</a>
              <a href="thread.html#2020">[ thread ]</a>
              <a href="subject.html#2020">[ subject ]</a>
              <a href="author.html#2020">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/windstille-commit">More information about the Windstille-commit
mailing list</a><br>
</body></html>
