<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Windstille-commit] r2578 - in trunk/windstille/data/sectors: intro	newformat2
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/windstille-commit/2009-March/index.html" >
   <LINK REL="made" HREF="mailto:windstille-commit%40lists.berlios.de?Subject=Re%3A%20%5BWindstille-commit%5D%20r2578%20-%20in%20trunk/windstille/data/sectors%3A%20intro%0A%09newformat2&In-Reply-To=%3C200903082238.n28McPUi001208%40sheep.berlios.de%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="001574.html">
   <LINK REL="Next"  HREF="001576.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Windstille-commit] r2578 - in trunk/windstille/data/sectors: intro	newformat2</H1>
    <B>grumbel at BerliOS</B> 
    <A HREF="mailto:windstille-commit%40lists.berlios.de?Subject=Re%3A%20%5BWindstille-commit%5D%20r2578%20-%20in%20trunk/windstille/data/sectors%3A%20intro%0A%09newformat2&In-Reply-To=%3C200903082238.n28McPUi001208%40sheep.berlios.de%3E"
       TITLE="[Windstille-commit] r2578 - in trunk/windstille/data/sectors: intro	newformat2">grumbel at mail.berlios.de
       </A><BR>
    <I>Sun Mar  8 23:38:25 CET 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="001574.html">[Windstille-commit] r2577 - trunk/windstille/data/sectors/newformat2
</A></li>
        <LI>Next message: <A HREF="001576.html">[Windstille-commit] r2579 - trunk/windstille/src/input
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1575">[ date ]</a>
              <a href="thread.html#1575">[ thread ]</a>
              <a href="subject.html#1575">[ subject ]</a>
              <a href="author.html#1575">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Author: grumbel
Date: 2009-03-08 23:38:24 +0100 (Sun, 08 Mar 2009)
New Revision: 2578

Modified:
   trunk/windstille/data/sectors/intro/intro.nut
   trunk/windstille/data/sectors/newformat2/bob.nut
   trunk/windstille/data/sectors/newformat2/frank.nut
   trunk/windstille/data/sectors/newformat2/newformat2.nut
Log:
Moved script code into run() function

Modified: trunk/windstille/data/sectors/intro/intro.nut
===================================================================
--- trunk/windstille/data/sectors/intro/intro.nut	2009-03-08 22:38:02 UTC (rev 2577)
+++ trunk/windstille/data/sectors/intro/intro.nut	2009-03-08 22:38:24 UTC (rev 2578)
@@ -5,78 +5,80 @@
   fadeout(0.2, r,g,b);
   wait_for_fade();
   wait(1)
-  caption_clear();
+    caption_clear();
   fadein(3);
   wait_for_fade();
 }
 
-//render_mask_set(RENDER_MASK_COLORMAP);
-fadeout(0);
+function run()
+{
+  //render_mask_set(RENDER_MASK_COLORMAP);
+  fadeout(0);
 
-objects.player.set_active(false);
-spawn_object(&quot;scriptable-object&quot;, { name=&quot;planet&quot;, pos=[0,0],
-                 sprite=&quot;images/planet.sprite&quot;, z_pos=1001 });
+  objects.player.set_active(false);
+  spawn_object(&quot;scriptable-object&quot;, { name=&quot;planet&quot;, pos=[0,0],
+        sprite=&quot;images/planet.sprite&quot;, z_pos=1001 });
 
-camera_set_active(false);
-camera_set_pos(400, 300); // USA
-camera_set_zoom(4.0);
-fadein(1);
-wait_for_fade();
-cutscene_begin();
-wait(2);
+  camera_set_active(false);
+  camera_set_pos(400, 300); // USA
+  camera_set_zoom(4.0);
+  fadein(1);
+  wait_for_fade();
+  cutscene_begin();
+  wait(2);
 
-caption_add(BOTTOM, &quot;Location: USA&quot;);
-wait_for_dialog();
+  caption_add(BOTTOM, &quot;Location: USA&quot;);
+  wait_for_dialog();
 
-camera_continue_path();
-camera_add_point(533, 248, 6.0); // greenland
-camera_end_path();
-wait_for_camera();
+  camera_continue_path();
+  camera_add_point(533, 248, 6.0); // greenland
+  camera_end_path();
+  wait_for_camera();
 
-caption_add(BOTTOM, &quot;Location: Greenland&quot;);
-wait_for_dialog();
+  caption_add(BOTTOM, &quot;Location: Greenland&quot;);
+  wait_for_dialog();
 
-camera_continue_path();
-camera_add_point(445, 513, 3.0); // antarctica
-camera_end_path();
-wait_for_camera();
+  camera_continue_path();
+  camera_add_point(445, 513, 3.0); // antarctica
+  camera_end_path();
+  wait_for_camera();
 
-caption_add(BOTTOM, &quot;Location: Antarctica&quot;);
-wait_for_dialog();
+  caption_add(BOTTOM, &quot;Location: Antarctica&quot;);
+  wait_for_dialog();
 
-camera_add_point(400, 300, 1.0);
-camera_add_point(400, 300, 1.0);
-camera_end_path();
-// wait_for_camera();
+  camera_add_point(400, 300, 1.0);
+  camera_add_point(400, 300, 1.0);
+  camera_end_path();
+  // wait_for_camera();
 
-caption_add(BOTTOM, &quot;The Big Boom. Humanity found out it could travel to the stars, and it did, en masse.&quot;);
+  caption_add(BOTTOM, &quot;The Big Boom. Humanity found out it could travel to the stars, and it did, en masse.&quot;);
 
-wait_for_dialog();
-fade_in_out(1,0,0)
+  wait_for_dialog();
+  fade_in_out(1,0,0)
 
-caption_add(BOTTOM, &quot;But it didn't take long for it to turn into The Big Bust. The guilds, the governments and the corporations staked out the best worlds.&quot;);
+    caption_add(BOTTOM, &quot;But it didn't take long for it to turn into The Big Bust. The guilds, the governments and the corporations staked out the best worlds.&quot;);
 
-wait_for_dialog();
-fade_in_out(1,1,1)
+  wait_for_dialog();
+  fade_in_out(1,1,1)
 
-caption_add(BOTTOM, &quot;Still, many individuals took their chances, even without military hardware and terraformers. Most worlds were so barren or so dangerous that whole colonies died out. In the Free Colonies that survive, life isn't easy.&quot;);
+    caption_add(BOTTOM, &quot;Still, many individuals took their chances, even without military hardware and terraformers. Most worlds were so barren or so dangerous that whole colonies died out. In the Free Colonies that survive, life isn't easy.&quot;);
 
-wait_for_dialog();
+  wait_for_dialog();
 
-caption_end();
+  caption_end();
 
-fadeout(1);
-wait_for_fade();
-objects.player.set_active(true);
-objects.planet.remove();
+  fadeout(1);
+  wait_for_fade();
+  objects.player.set_active(true);
+  objects.planet.remove();
 
-cutscene_end();
-camera_set_active(true);
+  cutscene_end();
+  camera_set_active(true);
 
-render_mask_set(RENDER_MASK_ALL);
-wait(1);
-wait_for_fade();
-fadein(1);
+  render_mask_set(RENDER_MASK_ALL);
+  wait(1);
+  wait_for_fade();
+  fadein(1);
+}
 
-
 /* EOF */

Modified: trunk/windstille/data/sectors/newformat2/bob.nut
===================================================================
--- trunk/windstille/data/sectors/newformat2/bob.nut	2009-03-08 22:38:02 UTC (rev 2577)
+++ trunk/windstille/data/sectors/newformat2/bob.nut	2009-03-08 22:38:24 UTC (rev 2578)
@@ -8,13 +8,13 @@
   conversation_add(&quot;Choice 2&quot;); 
   conversation_add(&quot;Choice 3&quot;); 
   if (!conversation_get())
-  {
-    ask_questions();
-  }
+    {
+      ask_questions();
+    }
   else
-  {
-    bye();
-  }
+    {
+      bye();
+    }
 }
 
 function hello_again()
@@ -34,10 +34,10 @@
   conversation_add(&quot;I work as a mercenary.&quot;);
   conversation_add(&quot;Not much&quot;);
   if (!conversation_get())
-  {
+    {
       bob_knows_you_mercenary = true;
       offer_job();
-  }
+    }
   else
     bye();
 }
@@ -49,7 +49,7 @@
   conversation_add(&quot;No thanks.&quot;);
   if (!conversation_get()) {
     add_objective(&quot;Kill spider&quot;, &quot;You must kill the spider at the end of the level&quot;);
-      explain_job();
+    explain_job();
   }
   else
     bye();
@@ -68,14 +68,17 @@
     dialog.show(&quot;See you again some time&quot;);
 }
 
-dialog &lt;- Dialog(0, &quot;Bob&quot;, &quot;images/portraits/bob.sprite&quot;);
-if (is_objective_given(&quot;Kill spider&quot;))
-  explain_job();
-else if (bob_knows_you_mercenary)
-  offer_job();
-else if (bob_seen_before)
-  hello_again();
-else
-  intro();
+function run()
+{
+  dialog &lt;- Dialog(0, &quot;Bob&quot;, &quot;images/portraits/bob.sprite&quot;);
+  if (is_objective_given(&quot;Kill spider&quot;))
+    explain_job();
+  else if (bob_knows_you_mercenary)
+    offer_job();
+  else if (bob_seen_before)
+    hello_again();
+  else
+    intro();
+}
 
 /* EOF */

Modified: trunk/windstille/data/sectors/newformat2/frank.nut
===================================================================
--- trunk/windstille/data/sectors/newformat2/frank.nut	2009-03-08 22:38:02 UTC (rev 2577)
+++ trunk/windstille/data/sectors/newformat2/frank.nut	2009-03-08 22:38:24 UTC (rev 2578)
@@ -1,12 +1,14 @@
+function run()
+{
+  /* play_sound(&quot;sounds/speech/vr_intro.ogg&quot;); */
+  println(&quot;Dislaying dialog&quot;);
+  add_dialog(TOP, &quot;Frank&quot;, &quot;images/portraits/sophie.sprite&quot;, 
+             &quot;&lt;sin&gt;Welcome&lt;/sin&gt; to the &lt;large&gt;VR training program&lt;/large&gt;. Here you &quot; +
+             &quot;will learn the &lt;sin&gt;basic manoeuvering&lt;/sin&gt; abilities of &lt;large&gt;your&lt;/large&gt; &quot; +
+             &quot;powersuit,&lt;sleep&gt; jumping,&lt;sleep&gt; running, &lt;sleep&gt; climbing&lt;sleep&gt; and shooting. &quot; +
+             &quot;We will start with &lt;small&gt;climbing&lt;/small&gt;. See the &lt;i&gt;block&lt;/i&gt; in front &quot; +
+             &quot;of you? Press &lt;b&gt;Right&lt;/b&gt; and &lt;b&gt;Jump&lt;/b&gt; to hang on the ledge.&quot;);
+  println(&quot;Dislaying done&quot;);
+}
 
-/* play_sound(&quot;sounds/speech/vr_intro.ogg&quot;); */
-println(&quot;Dislaying dialog&quot;);
-add_dialog(TOP, &quot;Frank&quot;, &quot;images/portraits/sophie.sprite&quot;, 
-       &quot;&lt;sin&gt;Welcome&lt;/sin&gt; to the &lt;large&gt;VR training program&lt;/large&gt;. Here you &quot; +
-       &quot;will learn the &lt;sin&gt;basic manoeuvering&lt;/sin&gt; abilities of &lt;large&gt;your&lt;/large&gt; &quot; +
-       &quot;powersuit,&lt;sleep&gt; jumping,&lt;sleep&gt; running, &lt;sleep&gt; climbing&lt;sleep&gt; and shooting. &quot; +
-       &quot;We will start with &lt;small&gt;climbing&lt;/small&gt;. See the &lt;i&gt;block&lt;/i&gt; in front &quot; +
-       &quot;of you? Press &lt;b&gt;Right&lt;/b&gt; and &lt;b&gt;Jump&lt;/b&gt; to hang on the ledge.&quot;);
-println(&quot;Dislaying done&quot;);
-
 /* EOF */

Modified: trunk/windstille/data/sectors/newformat2/newformat2.nut
===================================================================
--- trunk/windstille/data/sectors/newformat2/newformat2.nut	2009-03-08 22:38:02 UTC (rev 2577)
+++ trunk/windstille/data/sectors/newformat2/newformat2.nut	2009-03-08 22:38:24 UTC (rev 2578)
@@ -1,7 +1,3 @@
-set_controller_help_active(true);
-objects.player_flames2.set_active(false);
-objects.player_flames.set_active(false);      
-
 /* Some fun with fire */
 function startfire()
 {
@@ -21,7 +17,14 @@
   objects.player_flames.set_active(false);
 }
 
-objects.Block0Sign.start_flash(0.7);
-objects.Block0Sign.move_to(100, 370, 100, 2);
+function run()
+{
+  set_controller_help_active(true);
+  objects.player_flames2.set_active(false);
+  objects.player_flames.set_active(false);      
 
+  objects.Block0Sign.start_flash(0.7);
+  objects.Block0Sign.move_to(100, 370, 100, 2);
+}
+
 /* EOF */


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="001574.html">[Windstille-commit] r2577 - trunk/windstille/data/sectors/newformat2
</A></li>
	<LI>Next message: <A HREF="001576.html">[Windstille-commit] r2579 - trunk/windstille/src/input
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1575">[ date ]</a>
              <a href="thread.html#1575">[ thread ]</a>
              <a href="subject.html#1575">[ subject ]</a>
              <a href="author.html#1575">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/windstille-commit">More information about the Windstille-commit
mailing list</a><br>
</body></html>
