<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Windstille-commit] r3267 - in tags/windstille-0.2.0: . src	src/collision src/editor src/input
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/windstille-commit/2009-September/index.html" >
   <LINK REL="made" HREF="mailto:windstille-commit%40lists.berlios.de?Subject=Re%3A%20%5BWindstille-commit%5D%20r3267%20-%20in%20tags/windstille-0.2.0%3A%20.%20src%0A%09src/collision%20src/editor%20src/input&In-Reply-To=%3C200909271142.n8RBgPGb030140%40sheep.berlios.de%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="002263.html">
   <LINK REL="Next"  HREF="002265.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Windstille-commit] r3267 - in tags/windstille-0.2.0: . src	src/collision src/editor src/input</H1>
    <B>grumbel at BerliOS</B> 
    <A HREF="mailto:windstille-commit%40lists.berlios.de?Subject=Re%3A%20%5BWindstille-commit%5D%20r3267%20-%20in%20tags/windstille-0.2.0%3A%20.%20src%0A%09src/collision%20src/editor%20src/input&In-Reply-To=%3C200909271142.n8RBgPGb030140%40sheep.berlios.de%3E"
       TITLE="[Windstille-commit] r3267 - in tags/windstille-0.2.0: . src	src/collision src/editor src/input">grumbel at mail.berlios.de
       </A><BR>
    <I>Sun Sep 27 13:42:25 CEST 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="002263.html">[Windstille-commit] r3266 - in tags/windstille-0.2.0/src: . input
</A></li>
        <LI>Next message: <A HREF="002265.html">[Windstille-commit] r3268 - in branches: . windstille-0.1.x	windstille-0.1.x/data windstille-0.1.x/data/gui	windstille-0.1.x/data/gui/checkbox windstille-0.1.x/data/gui/fonts	windstille-0.1.x/data/gui/menu	windstille-0.1.x/data/gui/radiobutton windstille-0.1.x/src	windstille-0.1.x/src/editor
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2264">[ date ]</a>
              <a href="thread.html#2264">[ thread ]</a>
              <a href="subject.html#2264">[ subject ]</a>
              <a href="author.html#2264">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Author: grumbel
Date: 2009-09-27 13:42:19 +0200 (Sun, 27 Sep 2009)
New Revision: 3267

Removed:
   tags/windstille-0.2.0/aclocal.m4
Modified:
   tags/windstille-0.2.0/
   tags/windstille-0.2.0/autogen.sh
   tags/windstille-0.2.0/configure.ac
   tags/windstille-0.2.0/src/
   tags/windstille-0.2.0/src/Makefile.am
   tags/windstille-0.2.0/src/collision/collision_mask.cxx
   tags/windstille-0.2.0/src/collision/collision_mask.hxx
   tags/windstille-0.2.0/src/editor/editor_tilemap.cxx
   tags/windstille-0.2.0/src/editor/tile_selector.cxx
   tags/windstille-0.2.0/src/input/
   tags/windstille-0.2.0/src/player_view.cxx
   tags/windstille-0.2.0/src/screenshot.cxx
   tags/windstille-0.2.0/src/screenshot.hxx
   tags/windstille-0.2.0/src/tile.cxx
   tags/windstille-0.2.0/src/windstille_bonus.cxx
   tags/windstille-0.2.0/src/windstille_main.hxx
Log:
Some changes to make Windstille 0.2.x compile with ClanLib 0.8 (editor still looks broken)


Property changes on: tags/windstille-0.2.0
___________________________________________________________________
Name: svn:ignore
   - configure
Makefile.in
config.log
depcomp
config.h
Makefile
mkinstalldirs
config.status
stamp-h1
config.h.in
autom4te.cache
missing
install-sh

   + aclocal.m4
autom4te.cache
config.h
config.h.in
config.log
config.status
configure
depcomp
install-sh
Makefile
Makefile.in
missing
mkinstalldirs
stamp-h1


Deleted: tags/windstille-0.2.0/aclocal.m4
===================================================================
--- tags/windstille-0.2.0/aclocal.m4	2009-09-27 11:38:37 UTC (rev 3266)
+++ tags/windstille-0.2.0/aclocal.m4	2009-09-27 11:42:19 UTC (rev 3267)
@@ -1,893 +0,0 @@
-# generated automatically by aclocal 1.7.7 -*- Autoconf -*-
-
-# Copyright (C) 1996, 1997, 1998, 1999, 2000, 2001, 2002
-# Free Software Foundation, Inc.
-# This file is free software; the Free Software Foundation
-# gives unlimited permission to copy and/or distribute it,
-# with or without modifications, as long as this notice is preserved.
-
-# This program is distributed in the hope that it will be useful,
-# but WITHOUT ANY WARRANTY, to the extent permitted by law; without
-# even the implied warranty of MERCHANTABILITY or FITNESS FOR A
-# PARTICULAR PURPOSE.
-
-# Do all the work for Automake.                            -*- Autoconf -*-
-
-# This macro actually does too much some checks are only needed if
-# your package does certain things.  But this isn't really a big deal.
-
-# Copyright (C) 1996, 1997, 1998, 1999, 2000, 2001, 2002, 2003
-# Free Software Foundation, Inc.
-
-# This program is free software; you can redistribute it and/or modify
-# it under the terms of the GNU General Public License as published by
-# the Free Software Foundation; either version 2, or (at your option)
-# any later version.
-
-# This program is distributed in the hope that it will be useful,
-# but WITHOUT ANY WARRANTY; without even the implied warranty of
-# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
-# GNU General Public License for more details.
-
-# You should have received a copy of the GNU General Public License
-# along with this program; if not, write to the Free Software
-# Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA
-# 02111-1307, USA.
-
-# serial 10
-
-AC_PREREQ([2.54])
-
-# Autoconf 2.50 wants to disallow AM_ names.  We explicitly allow
-# the ones we care about.
-m4_pattern_allow([^AM_[A-Z]+FLAGS$])dnl
-
-# AM_INIT_AUTOMAKE(PACKAGE, VERSION, [NO-DEFINE])
-# AM_INIT_AUTOMAKE([OPTIONS])
-# -----------------------------------------------
-# The call with PACKAGE and VERSION arguments is the old style
-# call (pre autoconf-2.50), which is being phased out.  PACKAGE
-# and VERSION should now be passed to AC_INIT and removed from
-# the call to AM_INIT_AUTOMAKE.
-# We support both call styles for the transition.  After
-# the next Automake release, Autoconf can make the AC_INIT
-# arguments mandatory, and then we can depend on a new Autoconf
-# release and drop the old call support.
-AC_DEFUN([AM_INIT_AUTOMAKE],
-[AC_REQUIRE([AM_SET_CURRENT_AUTOMAKE_VERSION])dnl
- AC_REQUIRE([AC_PROG_INSTALL])dnl
-# test to see if srcdir already configured
-if test &quot;`cd $srcdir &amp;&amp; pwd`&quot; != &quot;`pwd`&quot; &amp;&amp;
-   test -f $srcdir/config.status; then
-  AC_MSG_ERROR([source directory already configured; run &quot;make distclean&quot; there first])
-fi
-
-# test whether we have cygpath
-if test -z &quot;$CYGPATH_W&quot;; then
-  if (cygpath --version) &gt;/dev/null 2&gt;/dev/null; then
-    CYGPATH_W='cygpath -w'
-  else
-    CYGPATH_W=echo
-  fi
-fi
-AC_SUBST([CYGPATH_W])
-
-# Define the identity of the package.
-dnl Distinguish between old-style and new-style calls.
-m4_ifval([$2],
-[m4_ifval([$3], [_AM_SET_OPTION([no-define])])dnl
- AC_SUBST([PACKAGE], [$1])dnl
- AC_SUBST([VERSION], [$2])],
-[_AM_SET_OPTIONS([$1])dnl
- AC_SUBST([PACKAGE], ['AC_PACKAGE_TARNAME'])dnl
- AC_SUBST([VERSION], ['AC_PACKAGE_VERSION'])])dnl
-
-_AM_IF_OPTION([no-define],,
-[AC_DEFINE_UNQUOTED(PACKAGE, &quot;$PACKAGE&quot;, [Name of package])
- AC_DEFINE_UNQUOTED(VERSION, &quot;$VERSION&quot;, [Version number of package])])dnl
-
-# Some tools Automake needs.
-AC_REQUIRE([AM_SANITY_CHECK])dnl
-AC_REQUIRE([AC_ARG_PROGRAM])dnl
-AM_MISSING_PROG(ACLOCAL, aclocal-${am__api_version})
-AM_MISSING_PROG(AUTOCONF, autoconf)
-AM_MISSING_PROG(AUTOMAKE, automake-${am__api_version})
-AM_MISSING_PROG(AUTOHEADER, autoheader)
-AM_MISSING_PROG(MAKEINFO, makeinfo)
-AM_MISSING_PROG(AMTAR, tar)
-AM_PROG_INSTALL_SH
-AM_PROG_INSTALL_STRIP
-# We need awk for the &quot;check&quot; target.  The system &quot;awk&quot; is bad on
-# some platforms.
-AC_REQUIRE([AC_PROG_AWK])dnl
-AC_REQUIRE([AC_PROG_MAKE_SET])dnl
-AC_REQUIRE([AM_SET_LEADING_DOT])dnl
-
-_AM_IF_OPTION([no-dependencies],,
-[AC_PROVIDE_IFELSE([AC_PROG_CC],
-                  [_AM_DEPENDENCIES(CC)],
-                  [define([AC_PROG_CC],
-                          defn([AC_PROG_CC])[_AM_DEPENDENCIES(CC)])])dnl
-AC_PROVIDE_IFELSE([AC_PROG_CXX],
-                  [_AM_DEPENDENCIES(CXX)],
-                  [define([AC_PROG_CXX],
-                          defn([AC_PROG_CXX])[_AM_DEPENDENCIES(CXX)])])dnl
-])
-])
-
-
-# When config.status generates a header, we must update the stamp-h file.
-# This file resides in the same directory as the config header
-# that is generated.  The stamp files are numbered to have different names.
-
-# Autoconf calls _AC_AM_CONFIG_HEADER_HOOK (when defined) in the
-# loop where config.status creates the headers, so we can generate
-# our stamp files there.
-AC_DEFUN([_AC_AM_CONFIG_HEADER_HOOK],
-[# Compute $1's index in $config_headers.
-_am_stamp_count=1
-for _am_header in $config_headers :; do
-  case $_am_header in
-    $1 | $1:* )
-      break ;;
-    * )
-      _am_stamp_count=`expr $_am_stamp_count + 1` ;;
-  esac
-done
-echo &quot;timestamp for $1&quot; &gt;`AS_DIRNAME([$1])`/stamp-h[]$_am_stamp_count])
-
-# Copyright 2002  Free Software Foundation, Inc.
-
-# This program is free software; you can redistribute it and/or modify
-# it under the terms of the GNU General Public License as published by
-# the Free Software Foundation; either version 2, or (at your option)
-# any later version.
-
-# This program is distributed in the hope that it will be useful,
-# but WITHOUT ANY WARRANTY; without even the implied warranty of
-# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
-# GNU General Public License for more details.
-
-# You should have received a copy of the GNU General Public License
-# along with this program; if not, write to the Free Software
-# Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA
-
-# AM_AUTOMAKE_VERSION(VERSION)
-# ----------------------------
-# Automake X.Y traces this macro to ensure aclocal.m4 has been
-# generated from the m4 files accompanying Automake X.Y.
-AC_DEFUN([AM_AUTOMAKE_VERSION],[am__api_version=&quot;1.7&quot;])
-
-# AM_SET_CURRENT_AUTOMAKE_VERSION
-# -------------------------------
-# Call AM_AUTOMAKE_VERSION so it can be traced.
-# This function is AC_REQUIREd by AC_INIT_AUTOMAKE.
-AC_DEFUN([AM_SET_CURRENT_AUTOMAKE_VERSION],
-	 [AM_AUTOMAKE_VERSION([1.7.7])])
-
-# Helper functions for option handling.                    -*- Autoconf -*-
-
-# Copyright 2001, 2002  Free Software Foundation, Inc.
-
-# This program is free software; you can redistribute it and/or modify
-# it under the terms of the GNU General Public License as published by
-# the Free Software Foundation; either version 2, or (at your option)
-# any later version.
-
-# This program is distributed in the hope that it will be useful,
-# but WITHOUT ANY WARRANTY; without even the implied warranty of
-# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
-# GNU General Public License for more details.
-
-# You should have received a copy of the GNU General Public License
-# along with this program; if not, write to the Free Software
-# Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA
-# 02111-1307, USA.
-
-# serial 2
-
-# _AM_MANGLE_OPTION(NAME)
-# -----------------------
-AC_DEFUN([_AM_MANGLE_OPTION],
-[[_AM_OPTION_]m4_bpatsubst($1, [[^a-zA-Z0-9_]], [_])])
-
-# _AM_SET_OPTION(NAME)
-# ------------------------------
-# Set option NAME.  Presently that only means defining a flag for this option.
-AC_DEFUN([_AM_SET_OPTION],
-[m4_define(_AM_MANGLE_OPTION([$1]), 1)])
-
-# _AM_SET_OPTIONS(OPTIONS)
-# ----------------------------------
-# OPTIONS is a space-separated list of Automake options.
-AC_DEFUN([_AM_SET_OPTIONS],
-[AC_FOREACH([_AM_Option], [$1], [_AM_SET_OPTION(_AM_Option)])])
-
-# _AM_IF_OPTION(OPTION, IF-SET, [IF-NOT-SET])
-# -------------------------------------------
-# Execute IF-SET if OPTION is set, IF-NOT-SET otherwise.
-AC_DEFUN([_AM_IF_OPTION],
-[m4_ifset(_AM_MANGLE_OPTION([$1]), [$2], [$3])])
-
-#
-# Check to make sure that the build environment is sane.
-#
-
-# Copyright 1996, 1997, 2000, 2001 Free Software Foundation, Inc.
-
-# This program is free software; you can redistribute it and/or modify
-# it under the terms of the GNU General Public License as published by
-# the Free Software Foundation; either version 2, or (at your option)
-# any later version.
-
-# This program is distributed in the hope that it will be useful,
-# but WITHOUT ANY WARRANTY; without even the implied warranty of
-# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
-# GNU General Public License for more details.
-
-# You should have received a copy of the GNU General Public License
-# along with this program; if not, write to the Free Software
-# Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA
-# 02111-1307, USA.
-
-# serial 3
-
-# AM_SANITY_CHECK
-# ---------------
-AC_DEFUN([AM_SANITY_CHECK],
-[AC_MSG_CHECKING([whether build environment is sane])
-# Just in case
-sleep 1
-echo timestamp &gt; conftest.file
-# Do `set' in a subshell so we don't clobber the current shell's
-# arguments.  Must try -L first in case configure is actually a
-# symlink; some systems play weird games with the mod time of symlinks
-# (eg FreeBSD returns the mod time of the symlink's containing
-# directory).
-if (
-   set X `ls -Lt $srcdir/configure conftest.file 2&gt; /dev/null`
-   if test &quot;$[*]&quot; = &quot;X&quot;; then
-      # -L didn't work.
-      set X `ls -t $srcdir/configure conftest.file`
-   fi
-   rm -f conftest.file
-   if test &quot;$[*]&quot; != &quot;X $srcdir/configure conftest.file&quot; \
-      &amp;&amp; test &quot;$[*]&quot; != &quot;X conftest.file $srcdir/configure&quot;; then
-
-      # If neither matched, then we have a broken ls.  This can happen
-      # if, for instance, CONFIG_SHELL is bash and it inherits a
-      # broken ls alias from the environment.  This has actually
-      # happened.  Such a system could not be considered &quot;sane&quot;.
-      AC_MSG_ERROR([ls -t appears to fail.  Make sure there is not a broken
-alias in your environment])
-   fi
-
-   test &quot;$[2]&quot; = conftest.file
-   )
-then
-   # Ok.
-   :
-else
-   AC_MSG_ERROR([newly created file is older than distributed files!
-Check your system clock])
-fi
-AC_MSG_RESULT(yes)])
-
-#  -*- Autoconf -*-
-
-
-# Copyright 1997, 1999, 2000, 2001 Free Software Foundation, Inc.
-
-# This program is free software; you can redistribute it and/or modify
-# it under the terms of the GNU General Public License as published by
-# the Free Software Foundation; either version 2, or (at your option)
-# any later version.
-
-# This program is distributed in the hope that it will be useful,
-# but WITHOUT ANY WARRANTY; without even the implied warranty of
-# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
-# GNU General Public License for more details.
-
-# You should have received a copy of the GNU General Public License
-# along with this program; if not, write to the Free Software
-# Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA
-# 02111-1307, USA.
-
-# serial 3
-
-# AM_MISSING_PROG(NAME, PROGRAM)
-# ------------------------------
-AC_DEFUN([AM_MISSING_PROG],
-[AC_REQUIRE([AM_MISSING_HAS_RUN])
-$1=${$1-&quot;${am_missing_run}$2&quot;}
-AC_SUBST($1)])
-
-
-# AM_MISSING_HAS_RUN
-# ------------------
-# Define MISSING if not defined so far and test if it supports --run.
-# If it does, set am_missing_run to use it, otherwise, to nothing.
-AC_DEFUN([AM_MISSING_HAS_RUN],
-[AC_REQUIRE([AM_AUX_DIR_EXPAND])dnl
-test x&quot;${MISSING+set}&quot; = xset || MISSING=&quot;\${SHELL} $am_aux_dir/missing&quot;
-# Use eval to expand $SHELL
-if eval &quot;$MISSING --run true&quot;; then
-  am_missing_run=&quot;$MISSING --run &quot;
-else
-  am_missing_run=
-  AC_MSG_WARN([`missing' script is too old or missing])
-fi
-])
-
-# AM_AUX_DIR_EXPAND
-
-# Copyright 2001 Free Software Foundation, Inc.
-
-# This program is free software; you can redistribute it and/or modify
-# it under the terms of the GNU General Public License as published by
-# the Free Software Foundation; either version 2, or (at your option)
-# any later version.
-
-# This program is distributed in the hope that it will be useful,
-# but WITHOUT ANY WARRANTY; without even the implied warranty of
-# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
-# GNU General Public License for more details.
-
-# You should have received a copy of the GNU General Public License
-# along with this program; if not, write to the Free Software
-# Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA
-# 02111-1307, USA.
-
-# For projects using AC_CONFIG_AUX_DIR([foo]), Autoconf sets
-# $ac_aux_dir to `$srcdir/foo'.  In other projects, it is set to
-# `$srcdir', `$srcdir/..', or `$srcdir/../..'.
-#
-# Of course, Automake must honor this variable whenever it calls a
-# tool from the auxiliary directory.  The problem is that $srcdir (and
-# therefore $ac_aux_dir as well) can be either absolute or relative,
-# depending on how configure is run.  This is pretty annoying, since
-# it makes $ac_aux_dir quite unusable in subdirectories: in the top
-# source directory, any form will work fine, but in subdirectories a
-# relative path needs to be adjusted first.
-#
-# $ac_aux_dir/missing
-#    fails when called from a subdirectory if $ac_aux_dir is relative
-# $top_srcdir/$ac_aux_dir/missing
-#    fails if $ac_aux_dir is absolute,
-#    fails when called from a subdirectory in a VPATH build with
-#          a relative $ac_aux_dir
-#
-# The reason of the latter failure is that $top_srcdir and $ac_aux_dir
-# are both prefixed by $srcdir.  In an in-source build this is usually
-# harmless because $srcdir is `.', but things will broke when you
-# start a VPATH build or use an absolute $srcdir.
-#
-# So we could use something similar to $top_srcdir/$ac_aux_dir/missing,
-# iff we strip the leading $srcdir from $ac_aux_dir.  That would be:
-#   am_aux_dir='\$(top_srcdir)/'`expr &quot;$ac_aux_dir&quot; : &quot;$srcdir//*\(.*\)&quot;`
-# and then we would define $MISSING as
-#   MISSING=&quot;\${SHELL} $am_aux_dir/missing&quot;
-# This will work as long as MISSING is not called from configure, because
-# unfortunately $(top_srcdir) has no meaning in configure.
-# However there are other variables, like CC, which are often used in
-# configure, and could therefore not use this &quot;fixed&quot; $ac_aux_dir.
-#
-# Another solution, used here, is to always expand $ac_aux_dir to an
-# absolute PATH.  The drawback is that using absolute paths prevent a
-# configured tree to be moved without reconfiguration.
-
-# Rely on autoconf to set up CDPATH properly.
-AC_PREREQ([2.50])
-
-AC_DEFUN([AM_AUX_DIR_EXPAND], [
-# expand $ac_aux_dir to an absolute path
-am_aux_dir=`cd $ac_aux_dir &amp;&amp; pwd`
-])
-
-# AM_PROG_INSTALL_SH
-# ------------------
-# Define $install_sh.
-
-# Copyright 2001 Free Software Foundation, Inc.
-
-# This program is free software; you can redistribute it and/or modify
-# it under the terms of the GNU General Public License as published by
-# the Free Software Foundation; either version 2, or (at your option)
-# any later version.
-
-# This program is distributed in the hope that it will be useful,
-# but WITHOUT ANY WARRANTY; without even the implied warranty of
-# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
-# GNU General Public License for more details.
-
-# You should have received a copy of the GNU General Public License
-# along with this program; if not, write to the Free Software
-# Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA
-# 02111-1307, USA.
-
-AC_DEFUN([AM_PROG_INSTALL_SH],
-[AC_REQUIRE([AM_AUX_DIR_EXPAND])dnl
-install_sh=${install_sh-&quot;$am_aux_dir/install-sh&quot;}
-AC_SUBST(install_sh)])
-
-# AM_PROG_INSTALL_STRIP
-
-# Copyright 2001 Free Software Foundation, Inc.
-
-# This program is free software; you can redistribute it and/or modify
-# it under the terms of the GNU General Public License as published by
-# the Free Software Foundation; either version 2, or (at your option)
-# any later version.
-
-# This program is distributed in the hope that it will be useful,
-# but WITHOUT ANY WARRANTY; without even the implied warranty of
-# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
-# GNU General Public License for more details.
-
-# You should have received a copy of the GNU General Public License
-# along with this program; if not, write to the Free Software
-# Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA
-# 02111-1307, USA.
-
-# One issue with vendor `install' (even GNU) is that you can't
-# specify the program used to strip binaries.  This is especially
-# annoying in cross-compiling environments, where the build's strip
-# is unlikely to handle the host's binaries.
-# Fortunately install-sh will honor a STRIPPROG variable, so we
-# always use install-sh in `make install-strip', and initialize
-# STRIPPROG with the value of the STRIP variable (set by the user).
-AC_DEFUN([AM_PROG_INSTALL_STRIP],
-[AC_REQUIRE([AM_PROG_INSTALL_SH])dnl
-# Installed binaries are usually stripped using `strip' when the user
-# run `make install-strip'.  However `strip' might not be the right
-# tool to use in cross-compilation environments, therefore Automake
-# will honor the `STRIP' environment variable to overrule this program.
-dnl Don't test for $cross_compiling = yes, because it might be `maybe'.
-if test &quot;$cross_compiling&quot; != no; then
-  AC_CHECK_TOOL([STRIP], [strip], :)
-fi
-INSTALL_STRIP_PROGRAM=&quot;\${SHELL} \$(install_sh) -c -s&quot;
-AC_SUBST([INSTALL_STRIP_PROGRAM])])
-
-#                                                          -*- Autoconf -*-
-# Copyright (C) 2003  Free Software Foundation, Inc.
-
-# This program is free software; you can redistribute it and/or modify
-# it under the terms of the GNU General Public License as published by
-# the Free Software Foundation; either version 2, or (at your option)
-# any later version.
-
-# This program is distributed in the hope that it will be useful,
-# but WITHOUT ANY WARRANTY; without even the implied warranty of
-# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
-# GNU General Public License for more details.
-
-# You should have received a copy of the GNU General Public License
-# along with this program; if not, write to the Free Software
-# Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA
-# 02111-1307, USA.
-
-# serial 1
-
-# Check whether the underlying file-system supports filenames
-# with a leading dot.  For instance MS-DOS doesn't.
-AC_DEFUN([AM_SET_LEADING_DOT],
-[rm -rf .tst 2&gt;/dev/null
-mkdir .tst 2&gt;/dev/null
-if test -d .tst; then
-  am__leading_dot=.
-else
-  am__leading_dot=_
-fi
-rmdir .tst 2&gt;/dev/null
-AC_SUBST([am__leading_dot])])
-
-# serial 5						-*- Autoconf -*-
-
-# Copyright (C) 1999, 2000, 2001, 2002, 2003  Free Software Foundation, Inc.
-
-# This program is free software; you can redistribute it and/or modify
-# it under the terms of the GNU General Public License as published by
-# the Free Software Foundation; either version 2, or (at your option)
-# any later version.
-
-# This program is distributed in the hope that it will be useful,
-# but WITHOUT ANY WARRANTY; without even the implied warranty of
-# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
-# GNU General Public License for more details.
-
-# You should have received a copy of the GNU General Public License
-# along with this program; if not, write to the Free Software
-# Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA
-# 02111-1307, USA.
-
-
-# There are a few dirty hacks below to avoid letting `AC_PROG_CC' be
-# written in clear, in which case automake, when reading aclocal.m4,
-# will think it sees a *use*, and therefore will trigger all it's
-# C support machinery.  Also note that it means that autoscan, seeing
-# CC etc. in the Makefile, will ask for an AC_PROG_CC use...
-
-
-
-# _AM_DEPENDENCIES(NAME)
-# ----------------------
-# See how the compiler implements dependency checking.
-# NAME is &quot;CC&quot;, &quot;CXX&quot;, &quot;GCJ&quot;, or &quot;OBJC&quot;.
-# We try a few techniques and use that to set a single cache variable.
-#
-# We don't AC_REQUIRE the corresponding AC_PROG_CC since the latter was
-# modified to invoke _AM_DEPENDENCIES(CC); we would have a circular
-# dependency, and given that the user is not expected to run this macro,
-# just rely on AC_PROG_CC.
-AC_DEFUN([_AM_DEPENDENCIES],
-[AC_REQUIRE([AM_SET_DEPDIR])dnl
-AC_REQUIRE([AM_OUTPUT_DEPENDENCY_COMMANDS])dnl
-AC_REQUIRE([AM_MAKE_INCLUDE])dnl
-AC_REQUIRE([AM_DEP_TRACK])dnl
-
-ifelse([$1], CC,   [depcc=&quot;$CC&quot;   am_compiler_list=],
-       [$1], CXX,  [depcc=&quot;$CXX&quot;  am_compiler_list=],
-       [$1], OBJC, [depcc=&quot;$OBJC&quot; am_compiler_list='gcc3 gcc'],
-       [$1], GCJ,  [depcc=&quot;$GCJ&quot;  am_compiler_list='gcc3 gcc'],
-                   [depcc=&quot;$$1&quot;   am_compiler_list=])
-
-AC_CACHE_CHECK([dependency style of $depcc],
-               [am_cv_$1_dependencies_compiler_type],
-[if test -z &quot;$AMDEP_TRUE&quot; &amp;&amp; test -f &quot;$am_depcomp&quot;; then
-  # We make a subdir and do the tests there.  Otherwise we can end up
-  # making bogus files that we don't know about and never remove.  For
-  # instance it was reported that on HP-UX the gcc test will end up
-  # making a dummy file named `D' -- because `-MD' means `put the output
-  # in D'.
-  mkdir conftest.dir
-  # Copy depcomp to subdir because otherwise we won't find it if we're
-  # using a relative directory.
-  cp &quot;$am_depcomp&quot; conftest.dir
-  cd conftest.dir
-  # We will build objects and dependencies in a subdirectory because
-  # it helps to detect inapplicable dependency modes.  For instance
-  # both Tru64's cc and ICC support -MD to output dependencies as a
-  # side effect of compilation, but ICC will put the dependencies in
-  # the current directory while Tru64 will put them in the object
-  # directory.
-  mkdir sub
-
-  am_cv_$1_dependencies_compiler_type=none
-  if test &quot;$am_compiler_list&quot; = &quot;&quot;; then
-     am_compiler_list=`sed -n ['s/^#*\([a-zA-Z0-9]*\))$/\1/p'] &lt; ./depcomp`
-  fi
-  for depmode in $am_compiler_list; do
-    # Setup a source with many dependencies, because some compilers
-    # like to wrap large dependency lists on column 80 (with \), and
-    # we should not choose a depcomp mode which is confused by this.
-    #
-    # We need to recreate these files for each test, as the compiler may
-    # overwrite some of them when testing with obscure command lines.
-    # This happens at least with the AIX C compiler.
-    : &gt; sub/conftest.c
-    for i in 1 2 3 4 5 6; do
-      echo '#include &quot;conftst'$i'.h&quot;' &gt;&gt; sub/conftest.c
-      : &gt; sub/conftst$i.h
-    done
-    echo &quot;${am__include} ${am__quote}sub/conftest.Po${am__quote}&quot; &gt; confmf
-
-    case $depmode in
-    nosideeffect)
-      # after this tag, mechanisms are not by side-effect, so they'll
-      # only be used when explicitly requested
-      if test &quot;x$enable_dependency_tracking&quot; = xyes; then
-	continue
-      else
-	break
-      fi
-      ;;
-    none) break ;;
-    esac
-    # We check with `-c' and `-o' for the sake of the &quot;dashmstdout&quot;
-    # mode.  It turns out that the SunPro C++ compiler does not properly
-    # handle `-M -o', and we need to detect this.
-    if depmode=$depmode \
-       source=sub/conftest.c object=sub/conftest.${OBJEXT-o} \
-       depfile=sub/conftest.Po tmpdepfile=sub/conftest.TPo \
-       $SHELL ./depcomp $depcc -c -o sub/conftest.${OBJEXT-o} sub/conftest.c \
-         &gt;/dev/null 2&gt;conftest.err &amp;&amp;
-       grep sub/conftst6.h sub/conftest.Po &gt; /dev/null 2&gt;&amp;1 &amp;&amp;
-       grep sub/conftest.${OBJEXT-o} sub/conftest.Po &gt; /dev/null 2&gt;&amp;1 &amp;&amp;
-       ${MAKE-make} -s -f confmf &gt; /dev/null 2&gt;&amp;1; then
-      # icc doesn't choke on unknown options, it will just issue warnings
-      # (even with -Werror).  So we grep stderr for any message
-      # that says an option was ignored.
-      if grep 'ignoring option' conftest.err &gt;/dev/null 2&gt;&amp;1; then :; else
-        am_cv_$1_dependencies_compiler_type=$depmode
-        break
-      fi
-    fi
-  done
-
-  cd ..
-  rm -rf conftest.dir
-else
-  am_cv_$1_dependencies_compiler_type=none
-fi
-])
-AC_SUBST([$1DEPMODE], [depmode=$am_cv_$1_dependencies_compiler_type])
-AM_CONDITIONAL([am__fastdep$1], [
-  test &quot;x$enable_dependency_tracking&quot; != xno \
-  &amp;&amp; test &quot;$am_cv_$1_dependencies_compiler_type&quot; = gcc3])
-])
-
-
-# AM_SET_DEPDIR
-# -------------
-# Choose a directory name for dependency files.
-# This macro is AC_REQUIREd in _AM_DEPENDENCIES
-AC_DEFUN([AM_SET_DEPDIR],
-[AC_REQUIRE([AM_SET_LEADING_DOT])dnl
-AC_SUBST([DEPDIR], [&quot;${am__leading_dot}deps&quot;])dnl
-])
-
-
-# AM_DEP_TRACK
-# ------------
-AC_DEFUN([AM_DEP_TRACK],
-[AC_ARG_ENABLE(dependency-tracking,
-[  --disable-dependency-tracking Speeds up one-time builds
-  --enable-dependency-tracking  Do not reject slow dependency extractors])
-if test &quot;x$enable_dependency_tracking&quot; != xno; then
-  am_depcomp=&quot;$ac_aux_dir/depcomp&quot;
-  AMDEPBACKSLASH='\'
-fi
-AM_CONDITIONAL([AMDEP], [test &quot;x$enable_dependency_tracking&quot; != xno])
-AC_SUBST([AMDEPBACKSLASH])
-])
-
-# Generate code to set up dependency tracking.   -*- Autoconf -*-
-
-# Copyright 1999, 2000, 2001, 2002 Free Software Foundation, Inc.
-
-# This program is free software; you can redistribute it and/or modify
-# it under the terms of the GNU General Public License as published by
-# the Free Software Foundation; either version 2, or (at your option)
-# any later version.
-
-# This program is distributed in the hope that it will be useful,
-# but WITHOUT ANY WARRANTY; without even the implied warranty of
-# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
-# GNU General Public License for more details.
-
-# You should have received a copy of the GNU General Public License
-# along with this program; if not, write to the Free Software
-# Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA
-# 02111-1307, USA.
-
-#serial 2
-
-# _AM_OUTPUT_DEPENDENCY_COMMANDS
-# ------------------------------
-AC_DEFUN([_AM_OUTPUT_DEPENDENCY_COMMANDS],
-[for mf in $CONFIG_FILES; do
-  # Strip MF so we end up with the name of the file.
-  mf=`echo &quot;$mf&quot; | sed -e 's/:.*$//'`
-  # Check whether this is an Automake generated Makefile or not.
-  # We used to match only the files named `Makefile.in', but
-  # some people rename them; so instead we look at the file content.
-  # Grep'ing the first line is not enough: some people post-process
-  # each Makefile.in and add a new line on top of each file to say so.
-  # So let's grep whole file.
-  if grep '^#.*generated by automake' $mf &gt; /dev/null 2&gt;&amp;1; then
-    dirpart=`AS_DIRNAME(&quot;$mf&quot;)`
-  else
-    continue
-  fi
-  grep '^DEP_FILES *= *[[^ @%:@]]' &lt; &quot;$mf&quot; &gt; /dev/null || continue
-  # Extract the definition of DEP_FILES from the Makefile without
-  # running `make'.
-  DEPDIR=`sed -n -e '/^DEPDIR = / s///p' &lt; &quot;$mf&quot;`
-  test -z &quot;$DEPDIR&quot; &amp;&amp; continue
-  # When using ansi2knr, U may be empty or an underscore; expand it
-  U=`sed -n -e '/^U = / s///p' &lt; &quot;$mf&quot;`
-  test -d &quot;$dirpart/$DEPDIR&quot; || mkdir &quot;$dirpart/$DEPDIR&quot;
-  # We invoke sed twice because it is the simplest approach to
-  # changing $(DEPDIR) to its actual value in the expansion.
-  for file in `sed -n -e '
-    /^DEP_FILES = .*\\\\$/ {
-      s/^DEP_FILES = //
-      :loop
-	s/\\\\$//
-	p
-	n
-	/\\\\$/ b loop
-      p
-    }
-    /^DEP_FILES = / s/^DEP_FILES = //p' &lt; &quot;$mf&quot; | \
-       sed -e 's/\$(DEPDIR)/'&quot;$DEPDIR&quot;'/g' -e 's/\$U/'&quot;$U&quot;'/g'`; do
-    # Make sure the directory exists.
-    test -f &quot;$dirpart/$file&quot; &amp;&amp; continue
-    fdir=`AS_DIRNAME([&quot;$file&quot;])`
-    AS_MKDIR_P([$dirpart/$fdir])
-    # echo &quot;creating $dirpart/$file&quot;
-    echo '# dummy' &gt; &quot;$dirpart/$file&quot;
-  done
-done
-])# _AM_OUTPUT_DEPENDENCY_COMMANDS
-
-
-# AM_OUTPUT_DEPENDENCY_COMMANDS
-# -----------------------------
-# This macro should only be invoked once -- use via AC_REQUIRE.
-#
-# This code is only required when automatic dependency tracking
-# is enabled.  FIXME.  This creates each `.P' file that we will
-# need in order to bootstrap the dependency handling code.
-AC_DEFUN([AM_OUTPUT_DEPENDENCY_COMMANDS],
-[AC_CONFIG_COMMANDS([depfiles],
-     [test x&quot;$AMDEP_TRUE&quot; != x&quot;&quot; || _AM_OUTPUT_DEPENDENCY_COMMANDS],
-     [AMDEP_TRUE=&quot;$AMDEP_TRUE&quot; ac_aux_dir=&quot;$ac_aux_dir&quot;])
-])
-
-# Check to see how 'make' treats includes.	-*- Autoconf -*-
-
-# Copyright (C) 2001, 2002, 2003 Free Software Foundation, Inc.
-
-# This program is free software; you can redistribute it and/or modify
-# it under the terms of the GNU General Public License as published by
-# the Free Software Foundation; either version 2, or (at your option)
-# any later version.
-
-# This program is distributed in the hope that it will be useful,
-# but WITHOUT ANY WARRANTY; without even the implied warranty of
-# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
-# GNU General Public License for more details.
-
-# You should have received a copy of the GNU General Public License
-# along with this program; if not, write to the Free Software
-# Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA
-# 02111-1307, USA.
-
-# serial 2
-
-# AM_MAKE_INCLUDE()
-# -----------------
-# Check to see how make treats includes.
-AC_DEFUN([AM_MAKE_INCLUDE],
-[am_make=${MAKE-make}
-cat &gt; confinc &lt;&lt; 'END'
-am__doit:
-	@echo done
-.PHONY: am__doit
-END
-# If we don't find an include directive, just comment out the code.
-AC_MSG_CHECKING([for style of include used by $am_make])
-am__include=&quot;#&quot;
-am__quote=
-_am_result=none
-# First try GNU make style include.
-echo &quot;include confinc&quot; &gt; confmf
-# We grep out `Entering directory' and `Leaving directory'
-# messages which can occur if `w' ends up in MAKEFLAGS.
-# In particular we don't look at `^make:' because GNU make might
-# be invoked under some other name (usually &quot;gmake&quot;), in which
-# case it prints its new name instead of `make'.
-if test &quot;`$am_make -s -f confmf 2&gt; /dev/null | grep -v 'ing directory'`&quot; = &quot;done&quot;; then
-   am__include=include
-   am__quote=
-   _am_result=GNU
-fi
-# Now try BSD make style include.
-if test &quot;$am__include&quot; = &quot;#&quot;; then
-   echo '.include &quot;confinc&quot;' &gt; confmf
-   if test &quot;`$am_make -s -f confmf 2&gt; /dev/null`&quot; = &quot;done&quot;; then
-      am__include=.include
-      am__quote=&quot;\&quot;&quot;
-      _am_result=BSD
-   fi
-fi
-AC_SUBST([am__include])
-AC_SUBST([am__quote])
-AC_MSG_RESULT([$_am_result])
-rm -f confinc confmf
-])
-
-# AM_CONDITIONAL                                              -*- Autoconf -*-
-
-# Copyright 1997, 2000, 2001 Free Software Foundation, Inc.
-
-# This program is free software; you can redistribute it and/or modify
-# it under the terms of the GNU General Public License as published by
-# the Free Software Foundation; either version 2, or (at your option)
-# any later version.
-
-# This program is distributed in the hope that it will be useful,
-# but WITHOUT ANY WARRANTY; without even the implied warranty of
-# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
-# GNU General Public License for more details.
-
-# You should have received a copy of the GNU General Public License
-# along with this program; if not, write to the Free Software
-# Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA
-# 02111-1307, USA.
-
-# serial 5
-
-AC_PREREQ(2.52)
-
-# AM_CONDITIONAL(NAME, SHELL-CONDITION)
-# -------------------------------------
-# Define a conditional.
-AC_DEFUN([AM_CONDITIONAL],
-[ifelse([$1], [TRUE],  [AC_FATAL([$0: invalid condition: $1])],
-        [$1], [FALSE], [AC_FATAL([$0: invalid condition: $1])])dnl
-AC_SUBST([$1_TRUE])
-AC_SUBST([$1_FALSE])
-if $2; then
-  $1_TRUE=
-  $1_FALSE='#'
-else
-  $1_TRUE='#'
-  $1_FALSE=
-fi
-AC_CONFIG_COMMANDS_PRE(
-[if test -z &quot;${$1_TRUE}&quot; &amp;&amp; test -z &quot;${$1_FALSE}&quot;; then
-  AC_MSG_ERROR([conditional &quot;$1&quot; was never defined.
-Usually this means the macro was only invoked conditionally.])
-fi])])
-
-
-dnl PKG_CHECK_MODULES(GSTUFF, gtk+-2.0 &gt;= 1.3 glib = 1.3.4, action-if, action-not)
-dnl defines GSTUFF_LIBS, GSTUFF_CFLAGS, see pkg-config man page
-dnl also defines GSTUFF_PKG_ERRORS on error
-AC_DEFUN(PKG_CHECK_MODULES, [
-  succeeded=no
-
-  if test -z &quot;$PKG_CONFIG&quot;; then
-    AC_PATH_PROG(PKG_CONFIG, pkg-config, no)
-  fi
-
-  if test &quot;$PKG_CONFIG&quot; = &quot;no&quot; ; then
-     echo &quot;*** The pkg-config script could not be found. Make sure it is&quot;
-     echo &quot;*** in your path, or set the PKG_CONFIG environment variable&quot;
-     echo &quot;*** to the full path to pkg-config.&quot;
-     echo &quot;*** Or see <A HREF="http://www.freedesktop.org/software/pkgconfig">http://www.freedesktop.org/software/pkgconfig</A> to get pkg-config.&quot;
-  else
-     PKG_CONFIG_MIN_VERSION=0.9.0
-     if $PKG_CONFIG --atleast-pkgconfig-version $PKG_CONFIG_MIN_VERSION; then
-        AC_MSG_CHECKING(for $2)
-
-        if $PKG_CONFIG --exists &quot;$2&quot; ; then
-            AC_MSG_RESULT(yes)
-            succeeded=yes
-
-            AC_MSG_CHECKING($1_CFLAGS)
-            $1_CFLAGS=`$PKG_CONFIG --cflags &quot;$2&quot;`
-            AC_MSG_RESULT($$1_CFLAGS)
-
-            AC_MSG_CHECKING($1_LIBS)
-            $1_LIBS=`$PKG_CONFIG --libs &quot;$2&quot;`
-            AC_MSG_RESULT($$1_LIBS)
-        else
-            $1_CFLAGS=&quot;&quot;
-            $1_LIBS=&quot;&quot;
-            ## If we have a custom action on failure, don't print errors, but 
-            ## do set a variable so people can do so.
-            $1_PKG_ERRORS=`$PKG_CONFIG --errors-to-stdout --print-errors &quot;$2&quot;`
-            ifelse([$4], ,echo $$1_PKG_ERRORS,)
-        fi
-
-        AC_SUBST($1_CFLAGS)
-        AC_SUBST($1_LIBS)
-     else
-        echo &quot;*** Your version of pkg-config is too old. You need version $PKG_CONFIG_MIN_VERSION or newer.&quot;
-        echo &quot;*** See <A HREF="http://www.freedesktop.org/software/pkgconfig">http://www.freedesktop.org/software/pkgconfig</A>&quot;
-     fi
-  fi
-
-  if test $succeeded = yes; then
-     ifelse([$3], , :, [$3])
-  else
-     ifelse([$4], , AC_MSG_ERROR([Library requirements ($2) not met; consider adjusting the PKG_CONFIG_PATH environment variable if your libraries are in a nonstandard prefix so pkg-config can find them.]), [$4])
-  fi
-])
-
-
-

Modified: tags/windstille-0.2.0/autogen.sh
===================================================================
--- tags/windstille-0.2.0/autogen.sh	2009-09-27 11:38:37 UTC (rev 3266)
+++ tags/windstille-0.2.0/autogen.sh	2009-09-27 11:42:19 UTC (rev 3267)
@@ -1,7 +1,7 @@
 #!/bin/sh
 
 aclocal-1.7
-automake-1.7 --force --copy --add-missing
+automake-1.7 --copy --add-missing
 autoheader
 autoconf
 

Modified: tags/windstille-0.2.0/configure.ac
===================================================================
--- tags/windstille-0.2.0/configure.ac	2009-09-27 11:38:37 UTC (rev 3266)
+++ tags/windstille-0.2.0/configure.ac	2009-09-27 11:42:19 UTC (rev 3267)
@@ -14,7 +14,7 @@
 AC_CHECK_LIB(guile, scm_boot_guile)
 AC_CHECK_HEADER(guile/gh.h)
 
-REQUIRED_CLANLIB_VERSION=&quot;0.7.7&quot;
+REQUIRED_CLANLIB_VERSION=&quot;0.8.0&quot;
 
 CXXFLAGS=&quot;$CXXFLAGS -I\${top_srcdir}/src/&quot;
 
@@ -43,16 +43,16 @@
 
 PKG_CHECK_MODULES(WINDSTILLE,
  [
-  clanCore-0.7           &gt;= $REQUIRED_CLANLIB_VERSION
-  clanApp-0.7            &gt;= $REQUIRED_CLANLIB_VERSION
-  clanDisplay-0.7        &gt;= $REQUIRED_CLANLIB_VERSION
-  clanGL-0.7             &gt;= $REQUIRED_CLANLIB_VERSION
-  clanGUI-0.7            &gt;= $REQUIRED_CLANLIB_VERSION
-  clanGUIStyleSilver-0.7 &gt;= $REQUIRED_CLANLIB_VERSION
+  clanCore-0.8           &gt;= $REQUIRED_CLANLIB_VERSION
+  clanApp-0.8            &gt;= $REQUIRED_CLANLIB_VERSION
+  clanDisplay-0.8        &gt;= $REQUIRED_CLANLIB_VERSION
+  clanGL-0.8             &gt;= $REQUIRED_CLANLIB_VERSION
+  clanGUI-0.8            &gt;= $REQUIRED_CLANLIB_VERSION
+  clanGUIStyleSilver-0.8 &gt;= $REQUIRED_CLANLIB_VERSION
 dnl clanSound   &gt;= $REQUIRED_CLANLIB_VERSION
 dnl clanMikMod  &gt;= $REQUIRED_CLANLIB_VERSION
-  clanSound-0.7  &gt;= $REQUIRED_CLANLIB_VERSION
-  clanVorbis-0.7  &gt;= $REQUIRED_CLANLIB_VERSION
+  clanSound-0.8  &gt;= $REQUIRED_CLANLIB_VERSION
+  clanVorbis-0.8  &gt;= $REQUIRED_CLANLIB_VERSION
   ],
  [])
 


Property changes on: tags/windstille-0.2.0/src
___________________________________________________________________
Name: svn:externals
   - input	<A HREF="svn://clanlib.org/Games/Feuerkraft/trunk/src/input/">svn://clanlib.org/Games/Feuerkraft/trunk/src/input/</A>

   + 


Modified: tags/windstille-0.2.0/src/Makefile.am
===================================================================
--- tags/windstille-0.2.0/src/Makefile.am	2009-09-27 11:38:37 UTC (rev 3266)
+++ tags/windstille-0.2.0/src/Makefile.am	2009-09-27 11:42:19 UTC (rev 3267)
@@ -107,7 +107,7 @@
   editor/libwindstille_editor.a \
   collision/libwindstille_collision.a \
   guistyle/libwindstille_guistyle.a \
-  input/libfeuerkraft_input.a \
+  input/libwindstille_input.a \
   @WINDSTILLE_LIBS@
 
 windstille_CPPFLAGS = \

Modified: tags/windstille-0.2.0/src/collision/collision_mask.cxx
===================================================================
--- tags/windstille-0.2.0/src/collision/collision_mask.cxx	2009-09-27 11:38:37 UTC (rev 3266)
+++ tags/windstille-0.2.0/src/collision/collision_mask.cxx	2009-09-27 11:42:19 UTC (rev 3267)
@@ -57,7 +57,7 @@
   memset(data, ~0, sizeof(cm_uint32) * len);
 }
 
-CollisionMask::CollisionMask(CL_PixelBuffer* provider)
+CollisionMask::CollisionMask(const CL_PixelBuffer&amp; provider)
 {
   create_from(provider);
 }
@@ -74,18 +74,18 @@
 
 CollisionMask::CollisionMask(const std::string filename)
 {
-  CL_PixelBuffer* provider = CL_ProviderFactory::load(filename);
+  CL_PixelBuffer provider = CL_ProviderFactory::load(filename);
   create_from(provider);
-  delete provider;
 }
 
 void
-CollisionMask::create_from(CL_PixelBuffer* provider)
+CollisionMask::create_from(const CL_PixelBuffer&amp; provider_)
 {  
-  provider-&gt;lock();
+  CL_PixelBuffer&amp; provider = const_cast&lt;CL_PixelBuffer&amp;&gt;(provider_);
+  provider.lock();
 
-  width  = provider-&gt;get_width();
-  height = provider-&gt;get_height();
+  width  = provider.get_width();
+  height = provider.get_height();
   pitch  = (width/int_width + (width%int_width == 0 ? 0 : 1));
 
   int len = height * pitch;
@@ -95,13 +95,13 @@
   for (int y = 0; y &lt; height; ++y)
     for (int x = 0; x &lt; width; ++x)
       {
-        if (static_cast&lt;unsigned char*&gt;(provider-&gt;get_data())[(y * width + x) * 4] &gt; 50)
+        if (static_cast&lt;unsigned char*&gt;(provider.get_data())[(y * width + x) * 4] &gt; 50)
           put_pixel(x, y, true);
       }
 
   std::cout &lt;&lt; width &lt;&lt; &quot;x&quot; &lt;&lt; height &lt;&lt; std::endl;
 
-  provider-&gt;unlock(); 
+  provider.unlock(); 
 }
 
 CollisionMask::~CollisionMask()

Modified: tags/windstille-0.2.0/src/collision/collision_mask.hxx
===================================================================
--- tags/windstille-0.2.0/src/collision/collision_mask.hxx	2009-09-27 11:38:37 UTC (rev 3266)
+++ tags/windstille-0.2.0/src/collision/collision_mask.hxx	2009-09-27 11:42:19 UTC (rev 3267)
@@ -47,7 +47,7 @@
   /** Generate a collision mask from a given bitmap */
   CollisionMask(int width, int height, cm_uint32* data);
 
-  CollisionMask(CL_PixelBuffer* provider);
+  CollisionMask(const CL_PixelBuffer&amp; provider);
   
   /** Creates a collision mask from a file */
   CollisionMask(const std::string filename);
@@ -93,7 +93,7 @@
   bool slow_pixel_collides_with(const CollisionMask&amp; mask, int x_of, int y_of) const;
 
 private:
-  void create_from(CL_PixelBuffer* provider);
+  void create_from(const CL_PixelBuffer&amp; provider);
 
   /** Checks pixel precisly if the two collision masks collide */
   bool pixel_collides_with(const CollisionMask&amp; mask, int x_of, int y_of) const;

Modified: tags/windstille-0.2.0/src/editor/editor_tilemap.cxx
===================================================================
--- tags/windstille-0.2.0/src/editor/editor_tilemap.cxx	2009-09-27 11:38:37 UTC (rev 3266)
+++ tags/windstille-0.2.0/src/editor/editor_tilemap.cxx	2009-09-27 11:42:19 UTC (rev 3267)
@@ -186,7 +186,8 @@
   //glScalef(get_zoom(), get_zoom(), 1.0f);
   //glTranslatef(trans_offset.x, trans_offset.y, 0.0f);
 
-  CL_Display::push_translate_offset(int(trans_offset.x), int(trans_offset.y));
+  CL_Display::push_modelview();
+  CL_Display::add_translate(int(trans_offset.x), int(trans_offset.y));
 
   CL_Display::clear(CL_Color(100, 0, 100));
 
@@ -221,7 +222,7 @@
           }
     }
 
-  CL_Display::pop_translate_offset();
+  CL_Display::pop_modelview();
   // glPopMatrix();
 }
 

Modified: tags/windstille-0.2.0/src/editor/tile_selector.cxx
===================================================================
--- tags/windstille-0.2.0/src/editor/tile_selector.cxx	2009-09-27 11:38:37 UTC (rev 3266)
+++ tags/windstille-0.2.0/src/editor/tile_selector.cxx	2009-09-27 11:42:19 UTC (rev 3267)
@@ -96,7 +96,8 @@
 void 
 TileSelector::draw()
 {
-  CL_Display::push_translate_offset(0, -offset);
+  CL_Display::push_modelview();
+  CL_Display::add_translate(0, -offset);
   for(int y = 0; y &lt; /*height FIXME*/ 40; ++y)
     for(int x = 0; x &lt; width; ++x)
       {
@@ -125,7 +126,7 @@
                                   CL_Color(0,0,255, 20));
           }
       }
-  CL_Display::pop_translate_offset();
+  CL_Display::pop_modelview();
 }
 
 /* EOF */


Property changes on: tags/windstille-0.2.0/src/input
___________________________________________________________________
Name: svn:ignore
   + .deps
Makefile
Makefile.in


Modified: tags/windstille-0.2.0/src/player_view.cxx
===================================================================
--- tags/windstille-0.2.0/src/player_view.cxx	2009-09-27 11:38:37 UTC (rev 3266)
+++ tags/windstille-0.2.0/src/player_view.cxx	2009-09-27 11:42:19 UTC (rev 3267)
@@ -32,10 +32,11 @@
 void
 PlayerView::draw ()
 {
-  CL_Display::push_translate_offset(int(-pos.x + CL_Display::get_width ()/2),
-                                    int(-pos.y + CL_Display::get_height ()/2));
+  CL_Display::push_modelview();
+  CL_Display::add_translate(int(-pos.x + CL_Display::get_width ()/2),
+                            int(-pos.y + CL_Display::get_height ()/2));
   world-&gt;draw ();
-  CL_Display::pop_translate_offset();
+  CL_Display::pop_modelview();
 }
 
 void

Modified: tags/windstille-0.2.0/src/screenshot.cxx
===================================================================
--- tags/windstille-0.2.0/src/screenshot.cxx	2009-09-27 11:38:37 UTC (rev 3266)
+++ tags/windstille-0.2.0/src/screenshot.cxx	2009-09-27 11:42:19 UTC (rev 3267)
@@ -28,7 +28,7 @@
 void
 Screenshot::write_screenshot_pnm(const std::string&amp; filename)
 {
-  CL_PixelBuffer* buf = take_screen_shot();
+  CL_PixelBuffer buf = take_screen_shot();
 
   FILE* out = fopen(filename.c_str(), &quot;wb&quot;);
   
@@ -39,10 +39,10 @@
       return;
     }
 
-  buf-&gt;lock();
-  int width  = buf-&gt;get_width();
-  int pitch  = buf-&gt;get_width()*3;
-  int height = buf-&gt;get_height();
+  buf.lock();
+  int width  = buf.get_width();
+  int pitch  = buf.get_width()*3;
+  int height = buf.get_height();
 
   fprintf(out,
 	  &quot;P6\n&quot;
@@ -52,7 +52,7 @@
 	  width,
 	  height);
 
-  unsigned char* data = static_cast&lt;unsigned char*&gt;(buf-&gt;get_data());
+  unsigned char* data = static_cast&lt;unsigned char*&gt;(buf.get_data());
   
   for(int i = height-1; i &gt;= 0; --i)
     {
@@ -62,13 +62,11 @@
              out);
     }
 
-  buf-&gt;unlock();
+  buf.unlock();
   fclose(out);
-  
-  delete buf;
 }
 
-CL_PixelBuffer*
+CL_PixelBuffer
 Screenshot::take_screen_shot()
 {
   CL_PixelBuffer back_buffer = CL_Display::get_current_window()-&gt;get_back_buffer();
@@ -76,7 +74,7 @@
   unsigned short width = back_buffer.get_width();
   unsigned short height = back_buffer.get_height();
 		
-  CL_PixelBuffer *pbuf = new CL_PixelBuffer(width, height, width*3, CL_PixelFormat::bgr888);
+  CL_PixelBuffer pbuf(width, height, width*3, CL_PixelFormat::bgr888);
   back_buffer.convert(pbuf);
   
   return pbuf;

Modified: tags/windstille-0.2.0/src/screenshot.hxx
===================================================================
--- tags/windstille-0.2.0/src/screenshot.hxx	2009-09-27 11:38:37 UTC (rev 3266)
+++ tags/windstille-0.2.0/src/screenshot.hxx	2009-09-27 11:42:19 UTC (rev 3267)
@@ -29,7 +29,7 @@
 {
 private:
 public:
-  static CL_PixelBuffer* take_screen_shot();
+  static CL_PixelBuffer take_screen_shot();
   static void write_screenshot_pnm(const std::string&amp; filename);
 private:
   Screenshot (const Screenshot&amp;);

Modified: tags/windstille-0.2.0/src/tile.cxx
===================================================================
--- tags/windstille-0.2.0/src/tile.cxx	2009-09-27 11:38:37 UTC (rev 3266)
+++ tags/windstille-0.2.0/src/tile.cxx	2009-09-27 11:42:19 UTC (rev 3267)
@@ -17,6 +17,8 @@
 //  along with this program; if not, write to the Free Software
 //  Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA.
 
+#include &lt;string.h&gt;
+
 #include &quot;globals.hxx&quot;
 #include &quot;tile.hxx&quot;
 

Modified: tags/windstille-0.2.0/src/windstille_bonus.cxx
===================================================================
--- tags/windstille-0.2.0/src/windstille_bonus.cxx	2009-09-27 11:38:37 UTC (rev 3266)
+++ tags/windstille-0.2.0/src/windstille_bonus.cxx	2009-09-27 11:42:19 UTC (rev 3267)
@@ -32,7 +32,7 @@
 
 WindstilleBonus::WindstilleBonus()
 {
-  std::list&lt;std::string&gt; llst = resources-&gt;get_all_resources(&quot;bonus&quot;);
+  std::vector&lt;std::string&gt; llst = resources-&gt;get_all_resources(&quot;bonus&quot;);
   std::copy(llst.begin(), llst.end(), std::back_inserter(lst));
   std::random_shuffle(lst.begin(), lst.end());
 

Modified: tags/windstille-0.2.0/src/windstille_main.hxx
===================================================================
--- tags/windstille-0.2.0/src/windstille_main.hxx	2009-09-27 11:38:37 UTC (rev 3266)
+++ tags/windstille-0.2.0/src/windstille_main.hxx	2009-09-27 11:42:19 UTC (rev 3267)
@@ -44,7 +44,7 @@
   WindstilleMain();
   ~WindstilleMain();
 
-  virtual char* get_title() { return &quot;Windstille&quot;; }
+  virtual const char* get_title() { return &quot;Windstille&quot;; }
   virtual int main(int argc, char** argv);
 
 private:


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="002263.html">[Windstille-commit] r3266 - in tags/windstille-0.2.0/src: . input
</A></li>
	<LI>Next message: <A HREF="002265.html">[Windstille-commit] r3268 - in branches: . windstille-0.1.x	windstille-0.1.x/data windstille-0.1.x/data/gui	windstille-0.1.x/data/gui/checkbox windstille-0.1.x/data/gui/fonts	windstille-0.1.x/data/gui/menu	windstille-0.1.x/data/gui/radiobutton windstille-0.1.x/src	windstille-0.1.x/src/editor
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2264">[ date ]</a>
              <a href="thread.html#2264">[ thread ]</a>
              <a href="subject.html#2264">[ subject ]</a>
              <a href="author.html#2264">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/windstille-commit">More information about the Windstille-commit
mailing list</a><br>
</body></html>
