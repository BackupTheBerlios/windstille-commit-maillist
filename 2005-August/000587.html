<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Windstille-commit] r934 - trunk/src/input
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/windstille-commit/2005-August/index.html" >
   <LINK REL="made" HREF="mailto:windstille-commit%40lists.berlios.de?Subject=Re%3A%20%5BWindstille-commit%5D%20r934%20-%20trunk/src/input&In-Reply-To=%3C200508062050.j76KoViT012341%40sheep.berlios.de%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000586.html">
   <LINK REL="Next"  HREF="000588.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Windstille-commit] r934 - trunk/src/input</H1>
    <B>Ingo Ruhnke at BerliOS</B> 
    <A HREF="mailto:windstille-commit%40lists.berlios.de?Subject=Re%3A%20%5BWindstille-commit%5D%20r934%20-%20trunk/src/input&In-Reply-To=%3C200508062050.j76KoViT012341%40sheep.berlios.de%3E"
       TITLE="[Windstille-commit] r934 - trunk/src/input">grumbel at berlios.de
       </A><BR>
    <I>Sat Aug  6 22:50:31 CEST 2005</I>
    <P><UL>
        <LI>Previous message: <A HREF="000586.html">[Windstille-commit] r933 - trunk/src
</A></li>
        <LI>Next message: <A HREF="000588.html">[Windstille-commit] r935 - trunk/src
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#587">[ date ]</a>
              <a href="thread.html#587">[ thread ]</a>
              <a href="subject.html#587">[ subject ]</a>
              <a href="author.html#587">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Author: grumbel
Date: 2005-08-06 22:50:29 +0200 (Sat, 06 Aug 2005)
New Revision: 934

Removed:
   trunk/src/input/axis_button.cpp
   trunk/src/input/axis_button.hpp
   trunk/src/input/axis_factory.cpp
   trunk/src/input/axis_factory.hpp
   trunk/src/input/button_axis.cpp
   trunk/src/input/button_axis.hpp
   trunk/src/input/button_factory.cpp
   trunk/src/input/button_factory.hpp
   trunk/src/input/input_axis.hpp
   trunk/src/input/input_axis_input_device.cpp
   trunk/src/input/input_axis_input_device.hpp
   trunk/src/input/input_button.hpp
   trunk/src/input/input_button_input_device.cpp
   trunk/src/input/input_button_input_device.hpp
   trunk/src/input/input_keyboard.hpp
   trunk/src/input/input_keyboard_input_device.cpp
   trunk/src/input/input_keyboard_input_device.hpp
   trunk/src/input/multi_button.cpp
   trunk/src/input/multi_button.hpp
Log:
- removed some unused input stuff, not all yet, some of the rest might get recycled

Deleted: trunk/src/input/axis_button.cpp
===================================================================
--- trunk/src/input/axis_button.cpp	2005-08-06 20:38:47 UTC (rev 933)
+++ trunk/src/input/axis_button.cpp	2005-08-06 20:50:29 UTC (rev 934)
@@ -1,72 +0,0 @@
-//  $Id$
-//
-//  Pingus - A free Lemmings clone
-//  Copyright (C) 2002 Ingo Ruhnke &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/windstille-commit">grumbel at gmx.de</A>&gt;
-//
-//  This program is free software; you can redistribute it and/or
-//  modify it under the terms of the GNU General Public License
-//  as published by the Free Software Foundation; either version 2
-//  of the License, or (at your option) any later version.
-//
-//  This program is distributed in the hope that it will be useful,
-//  but WITHOUT ANY WARRANTY; without even the implied warranty of
-//  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
-//  GNU General Public License for more details.
-//
-//  You should have received a copy of the GNU General Public License
-//  along with this program; if not, write to the Free Software
-//  Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA.
-
-#include &lt;iostream&gt;
-#include &quot;input_axis.hpp&quot;
-#include &quot;axis_button.hpp&quot;
-
-AxisButton::AxisButton(InputAxis* axis, bool top)
-  : axis(axis),
-    down(false),
-    top(top)
-{
-  on_axis_move_slot = axis-&gt;on_move().connect(this, &amp;AxisButton::on_axis_move);
-}
-
-AxisButton::~AxisButton()
-{
-}
-
-void
-AxisButton::update(float )
-{
-}
-
-void
-AxisButton::on_axis_move(float pos)
-{
-  if (top)
-    {
-      if (down &amp;&amp; pos &lt; 0.5f)
-        {
-          down = false;
-          button_up();
-        }
-      else if (!down &amp;&amp; pos &gt; 0.5f)
-        {
-          down = true;
-          button_down();
-        }
-    }
-  else
-    {
-      if (down &amp;&amp; pos &gt; -0.5f)
-        {
-          down = false;
-          button_up();
-        }
-      else if (!down &amp;&amp; pos &lt; -0.5f)
-        {
-          down = true;
-          button_down();
-        }
-    }
-}
-
-/* EOF */

Deleted: trunk/src/input/axis_button.hpp
===================================================================
--- trunk/src/input/axis_button.hpp	2005-08-06 20:38:47 UTC (rev 933)
+++ trunk/src/input/axis_button.hpp	2005-08-06 20:50:29 UTC (rev 934)
@@ -1,53 +0,0 @@
-//  $Id$
-// 
-//  Pingus - A free Lemmings clone
-//  Copyright (C) 2002 Ingo Ruhnke &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/windstille-commit">grumbel at gmx.de</A>&gt;
-//
-//  This program is free software; you can redistribute it and/or
-//  modify it under the terms of the GNU General Public License
-//  as published by the Free Software Foundation; either version 2
-//  of the License, or (at your option) any later version.
-//
-//  This program is distributed in the hope that it will be useful,
-//  but WITHOUT ANY WARRANTY; without even the implied warranty of
-//  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
-//  GNU General Public License for more details.
-// 
-//  You should have received a copy of the GNU General Public License
-//  along with this program; if not, write to the Free Software
-//  Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA.
-
-#ifndef HEADER_AXIS_BUTTON_HXX
-#define HEADER_AXIS_BUTTON_HXX
-
-#include &quot;input_button.hpp&quot;
-
-class InputAxis;
-
-/** */
-class AxisButton : public InputButton
-{
-private:
-  CL_Slot on_axis_move_slot;
-  InputAxis* axis;
-  bool down;
-
-  /** true if the range 0..1 should be used to trigger, false if -1..0
-      should be used */
-  bool top;
-public:
-  AxisButton(InputAxis* axis, bool top);
-  ~AxisButton();
-
-  void update(float delta);
-  
-private:
-  void on_axis_move(float pos);
-
-  AxisButton (const AxisButton&amp;);
-  AxisButton&amp; operator= (const AxisButton&amp;);
-};
-
-#endif
-
-/* EOF */

Deleted: trunk/src/input/axis_factory.cpp
===================================================================
--- trunk/src/input/axis_factory.cpp	2005-08-06 20:38:47 UTC (rev 933)
+++ trunk/src/input/axis_factory.cpp	2005-08-06 20:50:29 UTC (rev 934)
@@ -1,78 +0,0 @@
-//  $Id$
-//
-//  Pingus - A free Lemmings clone
-//  Copyright (C) 2002 Ingo Ruhnke &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/windstille-commit">grumbel at gmx.de</A>&gt;
-//
-//  This program is free software; you can redistribute it and/or
-//  modify it under the terms of the GNU General Public License
-//  as published by the Free Software Foundation; either version 2
-//  of the License, or (at your option) any later version.
-//
-//  This program is distributed in the hope that it will be useful,
-//  but WITHOUT ANY WARRANTY; without even the implied warranty of
-//  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
-//  GNU General Public License for more details.
-//
-//  You should have received a copy of the GNU General Public License
-//  along with this program; if not, write to the Free Software
-//  Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA.
-#include &lt;config.h&gt;
-
-#include &lt;ClanLib/Display/joystick.h&gt;
-#include &lt;sstream&gt;
-#include &lt;stdexcept&gt;
-#include &quot;input_axis_input_device.hpp&quot;
-#include &quot;windstille_error.hpp&quot;
-#include &quot;button_factory.hpp&quot;
-#include &quot;button_axis.hpp&quot;
-#include &quot;axis_factory.hpp&quot;
-#include &quot;lisp/lisp.hpp&quot;
-
-InputAxis* 
-AxisFactory::create(const lisp::Lisp* lisp)
-{
-  if(lisp-&gt;get_type() != lisp::Lisp::TYPE_LIST)
-    throw std::runtime_error(&quot;expected list in axis argument&quot;);
-  if(lisp-&gt;get_list_size() == 0)
-    throw std::runtime_error(&quot;List needs at least 1 argument in axis&quot;);
-  const lisp::Lisp* namel = lisp-&gt;get_list_elem(0);
-  if(namel-&gt;get_type() != lisp::Lisp::TYPE_SYMBOL)
-    throw std::runtime_error(&quot;axis needs symbol as first argument&quot;);
-
-  std::string name = namel-&gt;get_string();
-  if(name == &quot;joystick-axis&quot;)
-    return create_joystick_axis(lisp);
-  else if(name == &quot;button-axis&quot;)
-    return create_button_axis(lisp);
-  
-  std::ostringstream msg;
-  msg &lt;&lt; &quot;Unknown axis type '&quot; &lt;&lt; name &lt;&lt; &quot;' found&quot;;
-  throw std::runtime_error(msg.str());
-}
-
-InputAxis*
-AxisFactory::create_joystick_axis(const lisp::Lisp* lisp)
-{
-  if(lisp-&gt;get_list_size() != 3)
-    throw std::runtime_error(&quot;joystick-axis needs 2 arguments&quot;);
-  int device_num = lisp-&gt;get_list_elem(1)-&gt;get_int();
-  int axis_num   = lisp-&gt;get_list_elem(2)-&gt;get_int();
-
-  if (device_num &gt;= 0 &amp;&amp; device_num &lt; CL_Joystick::get_device_count())
-    return new InputAxisInputDevice(CL_Joystick::get_device(device_num), axis_num);
-  else
-    throw WindstilleError(&quot;Error: AxisFactory::create_joystick_axis: &quot;);
-}
-
-InputAxis*
-AxisFactory::create_button_axis(const lisp::Lisp* lisp)
-{
-  if(lisp-&gt;get_list_size() != 3)
-    throw std::runtime_error(&quot;button-axis needs 2 arguments&quot;);
-  InputButton* left  = ButtonFactory::create(lisp-&gt;get_list_elem(1));
-  InputButton* right = ButtonFactory::create(lisp-&gt;get_list_elem(2));
-
-  return new ButtonAxis(left, right);
-}
-
-/* EOF */

Deleted: trunk/src/input/axis_factory.hpp
===================================================================
--- trunk/src/input/axis_factory.hpp	2005-08-06 20:38:47 UTC (rev 933)
+++ trunk/src/input/axis_factory.hpp	2005-08-06 20:50:29 UTC (rev 934)
@@ -1,38 +0,0 @@
-//  $Id$
-// 
-//  Pingus - A free Lemmings clone
-//  Copyright (C) 2002 Ingo Ruhnke &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/windstille-commit">grumbel at gmx.de</A>&gt;
-//
-//  This program is free software; you can redistribute it and/or
-//  modify it under the terms of the GNU General Public License
-//  as published by the Free Software Foundation; either version 2
-//  of the License, or (at your option) any later version.
-//
-//  This program is distributed in the hope that it will be useful,
-//  but WITHOUT ANY WARRANTY; without even the implied warranty of
-//  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
-//  GNU General Public License for more details.
-// 
-//  You should have received a copy of the GNU General Public License
-//  along with this program; if not, write to the Free Software
-//  Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA.
-
-#ifndef HEADER_AXIS_FACTORY_HXX
-#define HEADER_AXIS_FACTORY_HXX
-
-#include &quot;lisp/lisp.hpp&quot;
-#include &quot;input_axis.hpp&quot;
-
-/** */
-class AxisFactory
-{
-public:
-  static InputAxis* create(const lisp::Lisp* lisp);
-private:
-  static InputAxis* create_joystick_axis(const lisp::Lisp* lisp);
-  static InputAxis* create_button_axis(const lisp::Lisp* lisp);
-};
-
-#endif
-
-/* EOF */

Deleted: trunk/src/input/button_axis.cpp
===================================================================
--- trunk/src/input/button_axis.cpp	2005-08-06 20:38:47 UTC (rev 933)
+++ trunk/src/input/button_axis.cpp	2005-08-06 20:50:29 UTC (rev 934)
@@ -1,87 +0,0 @@
-//  $Id$
-//
-//  Pingus - A free Lemmings clone
-//  Copyright (C) 2002 Ingo Ruhnke &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/windstille-commit">grumbel at gmx.de</A>&gt;
-//
-//  This program is free software; you can redistribute it and/or
-//  modify it under the terms of the GNU General Public License
-//  as published by the Free Software Foundation; either version 2
-//  of the License, or (at your option) any later version.
-//
-//  This program is distributed in the hope that it will be useful,
-//  but WITHOUT ANY WARRANTY; without even the implied warranty of
-//  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
-//  GNU General Public License for more details.
-//
-//  You should have received a copy of the GNU General Public License
-//  along with this program; if not, write to the Free Software
-//  Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA.
-
-#include &lt;iostream&gt;
-#include &quot;input_button.hpp&quot;
-#include &quot;button_axis.hpp&quot;
-
-ButtonAxis::ButtonAxis(InputButton* left, InputButton* right)
-  : left(left), right(right)
-{
-  slots.push_back(left-&gt;on_key_down().connect(this, &amp;ButtonAxis::on_left_down));
-  slots.push_back(left-&gt;on_key_up().connect  (this, &amp;ButtonAxis::on_left_up));
-
-  slots.push_back(right-&gt;on_key_down().connect(this, &amp;ButtonAxis::on_right_down));
-  slots.push_back(right-&gt;on_key_up().connect  (this, &amp;ButtonAxis::on_right_up));
-
-  left_state  = false;
-  right_state = false;
-  
-  pos = 0.0f;
-}
-
-void
-ButtonAxis::update(float delta)
-{
-  left-&gt;update(delta);
-  right-&gt;update(delta);
-
-  float new_pos = 0.0f;
-  if (left_state)
-    {
-      new_pos -= 1.0f;
-    }
-  
-  if (right_state)
-    {
-      new_pos += 1.0f;
-    }
-
-  if (new_pos != pos)
-    {
-      pos = new_pos;
-      move(pos);
-    }
-}
-
-void
-ButtonAxis::on_left_up()
-{
-  left_state = false;
-}
-
-void
-ButtonAxis::on_left_down()
-{
-  left_state = true;
-}
-
-void
-ButtonAxis::on_right_up()
-{
-  right_state = false;
-}
-
-void
-ButtonAxis::on_right_down()
-{
-  right_state = true;
-}
-
-/* EOF */

Deleted: trunk/src/input/button_axis.hpp
===================================================================
--- trunk/src/input/button_axis.hpp	2005-08-06 20:38:47 UTC (rev 933)
+++ trunk/src/input/button_axis.hpp	2005-08-06 20:50:29 UTC (rev 934)
@@ -1,50 +0,0 @@
-//  $Id$
-// 
-//  Pingus - A free Lemmings clone
-//  Copyright (C) 2002 Ingo Ruhnke &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/windstille-commit">grumbel at gmx.de</A>&gt;
-//
-//  This program is free software; you can redistribute it and/or
-//  modify it under the terms of the GNU General Public License
-//  as published by the Free Software Foundation; either version 2
-//  of the License, or (at your option) any later version.
-//
-//  This program is distributed in the hope that it will be useful,
-//  but WITHOUT ANY WARRANTY; without even the implied warranty of
-//  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
-//  GNU General Public License for more details.
-// 
-//  You should have received a copy of the GNU General Public License
-//  along with this program; if not, write to the Free Software
-//  Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA.
-
-#ifndef HEADER_BUTTON_AXIS_HXX
-#define HEADER_BUTTON_AXIS_HXX
-
-#include &quot;input_axis.hpp&quot;
-
-class InputButton;
-
-class ButtonAxis : public InputAxis
-{
-private:
-  InputButton* left;
-  InputButton* right;
-
-  bool left_state;
-  bool right_state;
-  
-  float pos;
-private:
-  void on_left_up();
-  void on_left_down();
-
-  void on_right_up();
-  void on_right_down();
-public:
-  ButtonAxis(InputButton* left, InputButton* right);
-  void update(float delta);
-};
-
-#endif
-
-/* EOF */

Deleted: trunk/src/input/button_factory.cpp
===================================================================
--- trunk/src/input/button_factory.cpp	2005-08-06 20:38:47 UTC (rev 933)
+++ trunk/src/input/button_factory.cpp	2005-08-06 20:50:29 UTC (rev 934)
@@ -1,114 +0,0 @@
-//  $Id$
-//
-//  Pingus - A free Lemmings clone
-//  Copyright (C) 2002 Ingo Ruhnke &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/windstille-commit">grumbel at gmx.de</A>&gt;
-//
-//  This program is free software; you can redistribute it and/or
-//  modify it under the terms of the GNU General Public License
-//  as published by the Free Software Foundation; either version 2
-//  of the License, or (at your option) any later version.
-//
-//  This program is distributed in the hope that it will be useful,
-//  but WITHOUT ANY WARRANTY; without even the implied warranty of
-//  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
-//  GNU General Public License for more details.
-//
-//  You should have received a copy of the GNU General Public License
-//  along with this program; if not, write to the Free Software
-//  Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA.
-
-#include &lt;ClanLib/Display/joystick.h&gt;
-#include &lt;ClanLib/Display/keyboard.h&gt;
-#include &quot;windstille_error.hpp&quot;
-#include &quot;input_button.hpp&quot;
-#include &quot;input_axis.hpp&quot;
-#include &quot;input_button_input_device.hpp&quot;
-#include &quot;axis_factory.hpp&quot;
-#include &quot;axis_button.hpp&quot;
-#include &quot;multi_button.hpp&quot;
-#include &quot;button_factory.hpp&quot;
-#include &quot;lisp/lisp.hpp&quot;
-#include &quot;lisp/properties.hpp&quot;
-
-InputButton* 
-ButtonFactory::create(const lisp::Lisp* lisp)
-{
-  if(lisp-&gt;get_type() != lisp::Lisp::TYPE_LIST)
-    throw std::runtime_error(&quot;expected list in axis argument&quot;);
-  if(lisp-&gt;get_list_size() == 0)
-    throw std::runtime_error(&quot;List needs at least 1 argument in axis&quot;);
-  const lisp::Lisp* namel = lisp-&gt;get_list_elem(0);
-  if(namel-&gt;get_type() != lisp::Lisp::TYPE_SYMBOL)
-    throw std::runtime_error(&quot;axis needs symbol as first argument&quot;);
- 
-  std::string name = namel-&gt;get_symbol();
-
-  if(name == &quot;joystick_button&quot;) {
-    return create_joystick_button(lisp);
-  } else if(name == &quot;keyboard-button&quot;) {
-    return create_keyboard_button(lisp);
-  } else if(name == &quot;axis-button&quot;) {
-    return create_axis_button(lisp);
-  } else if(name == &quot;multi-button&quot;) {
-    return create_multi_button(lisp);
-  }
-  
-  std::ostringstream msg;
-  msg &lt;&lt; &quot;Unknown button type '&quot; &lt;&lt; name &lt;&lt; &quot;' found&quot;;
-  throw std::runtime_error(msg.str());
-}
-
-InputButton*
-ButtonFactory::create_axis_button(const lisp::Lisp* lisp)
-{
-  if(lisp-&gt;get_list_size() != 3)
-    throw std::runtime_error(&quot;axis_button needs exactly 2 arguments&quot;);
-  
-  InputAxis* axis = AxisFactory::create(lisp-&gt;get_list_elem(1));
-  bool top = lisp-&gt;get_list_elem(2)-&gt;get_bool();
-  
-  return new AxisButton(axis, top);
-}
-
-InputButton*
-ButtonFactory::create_joystick_button(const lisp::Lisp* lisp)
-{
-  if(lisp-&gt;get_list_size() != 3)
-    throw std::runtime_error(&quot;joystick_button needs exactly 2 arguments&quot;);
-
-  int device_num = lisp-&gt;get_list_elem(1)-&gt;get_int();
-  int button_num = lisp-&gt;get_list_elem(2)-&gt;get_int();
-  
-  if (device_num &gt;= 0 &amp;&amp; device_num &lt; CL_Joystick::get_device_count())
-    return new InputButtonInputDevice(CL_Joystick::get_device(device_num), button_num);
-  else
-    throw WindstilleError(&quot;Error: ButtonFactory::create_joystick_button: device out of range&quot;);
-}
-
-InputButton*
-ButtonFactory::create_keyboard_button(const lisp::Lisp* lisp)
-{
-  if(lisp-&gt;get_list_size() != 2)
-    throw std::runtime_error(&quot;keyboard_button needs exactly 1 argument&quot;);
-  std::string key_str = lisp-&gt;get_list_elem(1)-&gt;get_string();
-  int key_num         = CL_Keyboard::get_device().string_to_keyid(key_str);
-
-  // FIXME: No error checking
-  return new InputButtonInputDevice(CL_Keyboard::get_device(), key_num);
-}
-
-InputButton*
-ButtonFactory::create_multi_button(const lisp::Lisp* lisp)
-{
-  MultiButton* button = new MultiButton();
- 
-  lisp::Properties props(lisp);
-  lisp::PropertyIterator&lt;const lisp::Lisp*&gt; iter = props.get_iter();
-  while(iter.next()) {
-    button-&gt;add(create(*iter));
-  }
-  
-  return button;
-}
-
-/* EOF */

Deleted: trunk/src/input/button_factory.hpp
===================================================================
--- trunk/src/input/button_factory.hpp	2005-08-06 20:38:47 UTC (rev 933)
+++ trunk/src/input/button_factory.hpp	2005-08-06 20:50:29 UTC (rev 934)
@@ -1,46 +0,0 @@
-//  $Id$
-// 
-//  Pingus - A free Lemmings clone
-//  Copyright (C) 2002 Ingo Ruhnke &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/windstille-commit">grumbel at gmx.de</A>&gt;
-//
-//  This program is free software; you can redistribute it and/or
-//  modify it under the terms of the GNU General Public License
-//  as published by the Free Software Foundation; either version 2
-//  of the License, or (at your option) any later version.
-//
-//  This program is distributed in the hope that it will be useful,
-//  but WITHOUT ANY WARRANTY; without even the implied warranty of
-//  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
-//  GNU General Public License for more details.
-// 
-//  You should have received a copy of the GNU General Public License
-//  along with this program; if not, write to the Free Software
-//  Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA.
-
-#ifndef HEADER_BUTTON_FACTORY_HXX
-#define HEADER_BUTTON_FACTORY_HXX
-
-#include &quot;lisp/lisp.hpp&quot;
-
-class InputButton;
-
-/** */
-class ButtonFactory
-{
-private:
-public:
-  static InputButton* create(const lisp::Lisp* lisp);
-
-private:
-  static InputButton* create_joystick_button(const lisp::Lisp* lisp);
-  static InputButton* create_keyboard_button(const lisp::Lisp* lisp);
-  static InputButton* create_axis_button(const lisp::Lisp* lisp);
-  static InputButton* create_multi_button(const lisp::Lisp* lisp);
-
-  ButtonFactory (const ButtonFactory&amp;);
-  ButtonFactory&amp; operator= (const ButtonFactory&amp;);
-};
-
-#endif
-
-/* EOF */

Deleted: trunk/src/input/input_axis.hpp
===================================================================
--- trunk/src/input/input_axis.hpp	2005-08-06 20:38:47 UTC (rev 933)
+++ trunk/src/input/input_axis.hpp	2005-08-06 20:50:29 UTC (rev 934)
@@ -1,42 +0,0 @@
-//  $Id$
-// 
-//  Pingus - A free Lemmings clone
-//  Copyright (C) 2002 Ingo Ruhnke &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/windstille-commit">grumbel at gmx.de</A>&gt;
-//
-//  This program is free software; you can redistribute it and/or
-//  modify it under the terms of the GNU General Public License
-//  as published by the Free Software Foundation; either version 2
-//  of the License, or (at your option) any later version.
-//
-//  This program is distributed in the hope that it will be useful,
-//  but WITHOUT ANY WARRANTY; without even the implied warranty of
-//  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
-//  GNU General Public License for more details.
-// 
-//  You should have received a copy of the GNU General Public License
-//  along with this program; if not, write to the Free Software
-//  Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA.
-
-#ifndef HEADER_INPUT_AXIS_HXX
-#define HEADER_INPUT_AXIS_HXX
-
-#include &lt;vector&gt;
-#include &lt;ClanLib/Signals/slot.h&gt;
-#include &lt;ClanLib/Signals/signal_v1.h&gt;
-
-class InputAxis
-{
-protected:
-  std::vector&lt;CL_Slot&gt; slots;
-  CL_Signal_v1&lt;float&gt; move;  
-public:
-  InputAxis() {}
-  virtual ~InputAxis() {}
-
-  virtual void update(float ) {}
-  CL_Signal_v1&lt;float&gt;&amp; on_move() { return move; }
-};
-
-#endif
-
-/* EOF */

Deleted: trunk/src/input/input_axis_input_device.cpp
===================================================================
--- trunk/src/input/input_axis_input_device.cpp	2005-08-06 20:38:47 UTC (rev 933)
+++ trunk/src/input/input_axis_input_device.cpp	2005-08-06 20:50:29 UTC (rev 934)
@@ -1,38 +0,0 @@
-//  $Id$
-//
-//  Pingus - A free Lemmings clone
-//  Copyright (C) 2002 Ingo Ruhnke &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/windstille-commit">grumbel at gmx.de</A>&gt;
-//
-//  This program is free software; you can redistribute it and/or
-//  modify it under the terms of the GNU General Public License
-//  as published by the Free Software Foundation; either version 2
-//  of the License, or (at your option) any later version.
-//
-//  This program is distributed in the hope that it will be useful,
-//  but WITHOUT ANY WARRANTY; without even the implied warranty of
-//  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
-//  GNU General Public License for more details.
-//
-//  You should have received a copy of the GNU General Public License
-//  along with this program; if not, write to the Free Software
-//  Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA.
-
-#include &lt;ClanLib/Display/input_event.h&gt;
-#include &quot;input_axis_input_device.hpp&quot;
-
-InputAxisInputDevice::InputAxisInputDevice(CL_InputDevice&amp; dev, int num)
-  : dev(dev), axis_num(num)
-{
-  slots.push_back(dev.sig_axis_move().connect(this, &amp;InputAxisInputDevice::on_axis_move));
-}
-
-void
-InputAxisInputDevice::on_axis_move(const CL_InputEvent&amp; event)
-{
-  if (event.id == axis_num)
-    {
-      move(event.axis_pos);
-    }
-}
-
-/* EOF */

Deleted: trunk/src/input/input_axis_input_device.hpp
===================================================================
--- trunk/src/input/input_axis_input_device.hpp	2005-08-06 20:38:47 UTC (rev 933)
+++ trunk/src/input/input_axis_input_device.hpp	2005-08-06 20:50:29 UTC (rev 934)
@@ -1,41 +0,0 @@
-//  $Id$
-// 
-//  Pingus - A free Lemmings clone
-//  Copyright (C) 2002 Ingo Ruhnke &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/windstille-commit">grumbel at gmx.de</A>&gt;
-//
-//  This program is free software; you can redistribute it and/or
-//  modify it under the terms of the GNU General Public License
-//  as published by the Free Software Foundation; either version 2
-//  of the License, or (at your option) any later version.
-//
-//  This program is distributed in the hope that it will be useful,
-//  but WITHOUT ANY WARRANTY; without even the implied warranty of
-//  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
-//  GNU General Public License for more details.
-// 
-//  You should have received a copy of the GNU General Public License
-//  along with this program; if not, write to the Free Software
-//  Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA.
-
-#ifndef HEADER_INPUT_AXIS_INPUT_DEVICE_HXX
-#define HEADER_INPUT_AXIS_INPUT_DEVICE_HXX
-
-#include &lt;ClanLib/Display/input_device.h&gt;
-#include &quot;input_axis.hpp&quot;
-
-class InputAxisInputDevice : public InputAxis
-{
-private:
-  CL_InputDevice dev;
-  int axis_num;
-
-  void on_axis_move(const CL_InputEvent&amp; event); 
-
-public:
-  InputAxisInputDevice(CL_InputDevice&amp; dev, int num);
-  void update(float ) {}
-};
-
-#endif
-
-/* EOF */

Deleted: trunk/src/input/input_button.hpp
===================================================================
--- trunk/src/input/input_button.hpp	2005-08-06 20:38:47 UTC (rev 933)
+++ trunk/src/input/input_button.hpp	2005-08-06 20:50:29 UTC (rev 934)
@@ -1,46 +0,0 @@
-//  $Id$
-// 
-//  Pingus - A free Lemmings clone
-//  Copyright (C) 2002 Ingo Ruhnke &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/windstille-commit">grumbel at gmx.de</A>&gt;
-//
-//  This program is free software; you can redistribute it and/or
-//  modify it under the terms of the GNU General Public License
-//  as published by the Free Software Foundation; either version 2
-//  of the License, or (at your option) any later version.
-//
-//  This program is distributed in the hope that it will be useful,
-//  but WITHOUT ANY WARRANTY; without even the implied warranty of
-//  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
-//  GNU General Public License for more details.
-// 
-//  You should have received a copy of the GNU General Public License
-//  along with this program; if not, write to the Free Software
-//  Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA.
-
-#ifndef HEADER_INPUT_BOTTON_HXX
-#define HEADER_INPUT_BOTTON_HXX
-
-#include &lt;vector&gt;
-#include &lt;ClanLib/Signals/slot.h&gt;
-#include &lt;ClanLib/Signals/signal_v0.h&gt;
-
-class InputButton
-{
-protected:
-  std::vector&lt;CL_Slot&gt; slots;
-  CL_Signal_v0 button_down;
-  CL_Signal_v0 button_up;
-
-public:
-  InputButton() {}
-  virtual ~InputButton() {}
-  
-  virtual void update(float ) {}
-
-  CL_Signal_v0&amp; on_key_down() { return button_down; }
-  CL_Signal_v0&amp; on_key_up()   { return button_up; }
-};
-
-#endif
-
-/* EOF */

Deleted: trunk/src/input/input_button_input_device.cpp
===================================================================
--- trunk/src/input/input_button_input_device.cpp	2005-08-06 20:38:47 UTC (rev 933)
+++ trunk/src/input/input_button_input_device.cpp	2005-08-06 20:50:29 UTC (rev 934)
@@ -1,49 +0,0 @@
-//  $Id$
-//
-//  Pingus - A free Lemmings clone
-//  Copyright (C) 2002 Ingo Ruhnke &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/windstille-commit">grumbel at gmx.de</A>&gt;
-//
-//  This program is free software; you can redistribute it and/or
-//  modify it under the terms of the GNU General Public License
-//  as published by the Free Software Foundation; either version 2
-//  of the License, or (at your option) any later version.
-//
-//  This program is distributed in the hope that it will be useful,
-//  but WITHOUT ANY WARRANTY; without even the implied warranty of
-//  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
-//  GNU General Public License for more details.
-//
-//  You should have received a copy of the GNU General Public License
-//  along with this program; if not, write to the Free Software
-//  Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA.
-
-#include &lt;iostream&gt;
-#include &lt;ClanLib/Display/input_event.h&gt;
-#include &quot;input_button_input_device.hpp&quot;
-
-InputButtonInputDevice::InputButtonInputDevice(CL_InputDevice&amp; dev_, int keycode_)
-  : dev(dev_), keycode(keycode_)
-{
-  slots.push_back(dev.sig_key_down().connect(this, &amp;InputButtonInputDevice::on_key_down));
-  slots.push_back(dev.sig_key_up().connect(this, &amp;InputButtonInputDevice::on_key_up));
-}
-
-void
-InputButtonInputDevice::on_key_down(const CL_InputEvent&amp; event)
-{
-  if (keycode == event.id)
-    {
-      button_down();
-    }
-}
-
-void
-InputButtonInputDevice::on_key_up(const CL_InputEvent&amp; event)
-{
-  if (keycode == event.id)
-    {
-      button_up();
-    }
-}
-
-/* EOF */

Deleted: trunk/src/input/input_button_input_device.hpp
===================================================================
--- trunk/src/input/input_button_input_device.hpp	2005-08-06 20:38:47 UTC (rev 933)
+++ trunk/src/input/input_button_input_device.hpp	2005-08-06 20:50:29 UTC (rev 934)
@@ -1,43 +0,0 @@
-//  $Id$
-// 
-//  Pingus - A free Lemmings clone
-//  Copyright (C) 2002 Ingo Ruhnke &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/windstille-commit">grumbel at gmx.de</A>&gt;
-//
-//  This program is free software; you can redistribute it and/or
-//  modify it under the terms of the GNU General Public License
-//  as published by the Free Software Foundation; either version 2
-//  of the License, or (at your option) any later version.
-//
-//  This program is distributed in the hope that it will be useful,
-//  but WITHOUT ANY WARRANTY; without even the implied warranty of
-//  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
-//  GNU General Public License for more details.
-// 
-//  You should have received a copy of the GNU General Public License
-//  along with this program; if not, write to the Free Software
-//  Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA.
-
-#ifndef HEADER_INPUT_BOTTON_INPUT_DEVICE_HXX
-#define HEADER_INPUT_BOTTON_INPUT_DEVICE_HXX
-
-#include &lt;ClanLib/Display/input_device.h&gt;
-#include &quot;input_button.hpp&quot;
-
-class InputButtonInputDevice : public InputButton
-{
-private:
-  CL_InputDevice dev;
-  int keycode;
-
-  void on_key_down(const CL_InputEvent&amp; event);
-  void on_key_up(const CL_InputEvent&amp; event);
-
-public:
-  InputButtonInputDevice(CL_InputDevice&amp; dev, int keycode);
-  
-  void update(float ) {}
-};
-
-#endif
-
-/* EOF */

Deleted: trunk/src/input/input_keyboard.hpp
===================================================================
--- trunk/src/input/input_keyboard.hpp	2005-08-06 20:38:47 UTC (rev 933)
+++ trunk/src/input/input_keyboard.hpp	2005-08-06 20:50:29 UTC (rev 934)
@@ -1,43 +0,0 @@
-//  $Id$
-// 
-//  Pingus - A free Lemmings clone
-//  Copyright (C) 2002 Ingo Ruhnke &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/windstille-commit">grumbel at gmx.de</A>&gt;
-//
-//  This program is free software; you can redistribute it and/or
-//  modify it under the terms of the GNU General Public License
-//  as published by the Free Software Foundation; either version 2
-//  of the License, or (at your option) any later version.
-//
-//  This program is distributed in the hope that it will be useful,
-//  but WITHOUT ANY WARRANTY; without even the implied warranty of
-//  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
-//  GNU General Public License for more details.
-// 
-//  You should have received a copy of the GNU General Public License
-//  along with this program; if not, write to the Free Software
-//  Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA.
-
-#ifndef HEADER_INPUT_KEYBOARD_HXX
-#define HEADER_INPUT_KEYBOARD_HXX
-
-#include &quot;input_event.hpp&quot;
-
-/** */
-class InputKeyboard
-{
-protected:
-  std::vector&lt;CL_Slot&gt; slots;
-  CL_Signal_v2&lt;KeyboardEvent::KeyType, int&gt; key;
-
-public:
-  InputKeyboard() {}
-  virtual ~InputKeyboard() {}
-  
-  virtual void update(float ) {}
-
-  CL_Signal_v2&lt;KeyboardEvent::KeyType, int&gt;&amp; on_key() { return key; }
-};
-
-#endif
-
-/* EOF */

Deleted: trunk/src/input/input_keyboard_input_device.cpp
===================================================================
--- trunk/src/input/input_keyboard_input_device.cpp	2005-08-06 20:38:47 UTC (rev 933)
+++ trunk/src/input/input_keyboard_input_device.cpp	2005-08-06 20:50:29 UTC (rev 934)
@@ -1,46 +0,0 @@
-//  $Id$
-//
-//  Pingus - A free Lemmings clone
-//  Copyright (C) 2002 Ingo Ruhnke &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/windstille-commit">grumbel at gmx.de</A>&gt;
-//
-//  This program is free software; you can redistribute it and/or
-//  modify it under the terms of the GNU General Public License
-//  as published by the Free Software Foundation; either version 2
-//  of the License, or (at your option) any later version.
-//
-//  This program is distributed in the hope that it will be useful,
-//  but WITHOUT ANY WARRANTY; without even the implied warranty of
-//  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
-//  GNU General Public License for more details.
-//
-//  You should have received a copy of the GNU General Public License
-//  along with this program; if not, write to the Free Software
-//  Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA.
-
-#include &lt;ctype.h&gt;
-#include &lt;ClanLib/Display/input_event.h&gt;
-#include &quot;input_event.hpp&quot;
-#include &quot;input_keyboard_input_device.hpp&quot;
-
-InputKeyboardInputDevice::InputKeyboardInputDevice(CL_InputDevice&amp; dev_)
-  : dev(dev_)
-{
-  slots.push_back(dev.sig_key_down().connect(this, &amp;InputKeyboardInputDevice::on_key_down)); 
-  slots.push_back(dev.sig_key_up().connect(this, &amp;InputKeyboardInputDevice::on_key_up)); 
-}
-
-void
-InputKeyboardInputDevice::on_key_up(const CL_InputEvent&amp; )
-{
-}
-
-void
-InputKeyboardInputDevice::on_key_down(const CL_InputEvent&amp; event)
-{
-  if (!event.str.empty() &amp;&amp; (isgraph(event.str[0]) || event.str[0] == ' '))
-    key(KeyboardEvent::LETTER, event.str[0]);
-  else
-    key(KeyboardEvent::SPECIAL, event.id);
-}
-
-/* EOF */

Deleted: trunk/src/input/input_keyboard_input_device.hpp
===================================================================
--- trunk/src/input/input_keyboard_input_device.hpp	2005-08-06 20:38:47 UTC (rev 933)
+++ trunk/src/input/input_keyboard_input_device.hpp	2005-08-06 20:50:29 UTC (rev 934)
@@ -1,42 +0,0 @@
-//  $Id$
-// 
-//  Pingus - A free Lemmings clone
-//  Copyright (C) 2002 Ingo Ruhnke &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/windstille-commit">grumbel at gmx.de</A>&gt;
-//
-//  This program is free software; you can redistribute it and/or
-//  modify it under the terms of the GNU General Public License
-//  as published by the Free Software Foundation; either version 2
-//  of the License, or (at your option) any later version.
-//
-//  This program is distributed in the hope that it will be useful,
-//  but WITHOUT ANY WARRANTY; without even the implied warranty of
-//  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
-//  GNU General Public License for more details.
-// 
-//  You should have received a copy of the GNU General Public License
-//  along with this program; if not, write to the Free Software
-//  Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA.
-
-#ifndef HEADER_INPUT_KEYBOARD_INPUT_DEVICE_HXX
-#define HEADER_INPUT_KEYBOARD_INPUT_DEVICE_HXX
-
-#include &lt;ClanLib/Display/input_device.h&gt;
-#include &quot;input_keyboard.hpp&quot;
-
-/** */
-class InputKeyboardInputDevice : public InputKeyboard
-{
-private:
-  CL_InputDevice dev;
-
-  void on_key_up(const CL_InputEvent&amp; event);
-  void on_key_down(const CL_InputEvent&amp; event);
-
-public:
-  InputKeyboardInputDevice(CL_InputDevice&amp; dev);
-  void update(float) {}
-};
-
-#endif
-
-/* EOF */

Deleted: trunk/src/input/multi_button.cpp
===================================================================
--- trunk/src/input/multi_button.cpp	2005-08-06 20:38:47 UTC (rev 933)
+++ trunk/src/input/multi_button.cpp	2005-08-06 20:50:29 UTC (rev 934)
@@ -1,65 +0,0 @@
-//  $Id$
-//
-//  Pingus - A free Lemmings clone
-//  Copyright (C) 2002 Ingo Ruhnke &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/windstille-commit">grumbel at gmx.de</A>&gt;
-//
-//  This program is free software; you can redistribute it and/or
-//  modify it under the terms of the GNU General Public License
-//  as published by the Free Software Foundation; either version 2
-//  of the License, or (at your option) any later version.
-//
-//  This program is distributed in the hope that it will be useful,
-//  but WITHOUT ANY WARRANTY; without even the implied warranty of
-//  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
-//  GNU General Public License for more details.
-//
-//  You should have received a copy of the GNU General Public License
-//  along with this program; if not, write to the Free Software
-//  Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA.
-
-#include &lt;iostream&gt;
-#include &quot;multi_button.hpp&quot;
-
-MultiButton::MultiButton()
-{
-  press_count = 0;
-}
-
-void
-MultiButton::add(InputButton* button)
-{
-  buttons.push_back(button);
-  slots.push_back(button-&gt;on_key_down().connect(this, &amp;MultiButton::pressed));
-  slots.push_back(button-&gt;on_key_up().connect(this, &amp;MultiButton::released));
-}
-
-void
-MultiButton::update(float delta)
-{
-  for (Buttons::iterator i = buttons.begin(); i != buttons.end(); ++i)
-    (*i)-&gt;update(delta);
-}
-
-void
-MultiButton::released()
-{
-  press_count -= 1;
-
-  if (press_count == 0)
-    button_up();
-
-  // FIXME: Workaround
-  if (press_count &lt; 0)
-    press_count = 0;
-}
-
-void
-MultiButton::pressed()
-{
-  press_count += 1;
-
-  if (press_count == 1)
-    button_down();
-}
-
-/* EOF */

Deleted: trunk/src/input/multi_button.hpp
===================================================================
--- trunk/src/input/multi_button.hpp	2005-08-06 20:38:47 UTC (rev 933)
+++ trunk/src/input/multi_button.hpp	2005-08-06 20:50:29 UTC (rev 934)
@@ -1,46 +0,0 @@
-//  $Id$
-// 
-//  Pingus - A free Lemmings clone
-//  Copyright (C) 2002 Ingo Ruhnke &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/windstille-commit">grumbel at gmx.de</A>&gt;
-//
-//  This program is free software; you can redistribute it and/or
-//  modify it under the terms of the GNU General Public License
-//  as published by the Free Software Foundation; either version 2
-//  of the License, or (at your option) any later version.
-//
-//  This program is distributed in the hope that it will be useful,
-//  but WITHOUT ANY WARRANTY; without even the implied warranty of
-//  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
-//  GNU General Public License for more details.
-// 
-//  You should have received a copy of the GNU General Public License
-//  along with this program; if not, write to the Free Software
-//  Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA.
-
-#ifndef HEADER_MULTI_BUTTON_HXX
-#define HEADER_MULTI_BUTTON_HXX
-
-#include &lt;vector&gt;
-#include &quot;input_button.hpp&quot;
-
-/** */
-class MultiButton : public InputButton
-{
-private:
-  typedef std::vector&lt;InputButton*&gt; Buttons;
-  Buttons buttons;
-  std::vector&lt;CL_Slot&gt; slots;  
-  int press_count;
-public:
-  MultiButton();
-  
-  void add(InputButton*);
-  void update(float delta);
-private:
-  void released();
-  void pressed();
-};
-
-#endif
-
-/* EOF */


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000586.html">[Windstille-commit] r933 - trunk/src
</A></li>
	<LI>Next message: <A HREF="000588.html">[Windstille-commit] r935 - trunk/src
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#587">[ date ]</a>
              <a href="thread.html#587">[ thread ]</a>
              <a href="subject.html#587">[ subject ]</a>
              <a href="author.html#587">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/windstille-commit">More information about the Windstille-commit
mailing list</a><br>
</body></html>
